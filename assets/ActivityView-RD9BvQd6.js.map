{"version":3,"file":"ActivityView-RD9BvQd6.js","sources":["../../src/composables/use-api/voicemail.ts","../../src/components/Activity/NoActivity.vue","../../src/components/Activity/ActivityPhone.vue","../../src/components/Activity/ActivityVoicemail.vue","../../src/components/Activity/ActivitySms.vue","../../src/views/ActivityView.vue"],"sourcesContent":["import axios from 'axios';\nimport type { AxiosError } from 'axios';\nimport type { ApiDataException, VoiceMailResponseData } from '@/types';\nimport { EndpointApi } from '@/enums';\nimport { useAuthStore, useUserStore } from '@/stores';\n\nexport async function getVoiceMail() {\n  const userStore = useUserStore();\n\n  try {\n    const response = await axios.get<VoiceMailResponseData>(\n      EndpointApi.GetVoiceMail\n    );\n    userStore.voicemails = [];\n    for (const numbers of Object.values(response.data.voicemails)) {\n      for (const voicemail of numbers) {\n        userStore.setVoicemails({\n          from: voicemail.from_number,\n          to: voicemail.to,\n          date: voicemail.date,\n          timestamp: voicemail.timestamp,\n          filename: voicemail.filename,\n          msgno: voicemail.msgno,\n        });\n      }\n    }\n    return response.data;\n  } catch (err) {\n    throw err as AxiosError<ApiDataException>;\n  }\n}\n\nexport async function downloadVoiceMailAudio(\n  number: string,\n  msgNumber: number,\n  filename: string\n) {\n  try {\n    const response = await axios.post(\n      `/api/numbers/${number}/voicemail`,\n      {\n        msg_no: msgNumber,\n        file_name: filename,\n      },\n      {\n        responseType: 'blob',\n      }\n    );\n    return response.data;\n  } catch (err) {\n    throw err as AxiosError<ApiDataException>;\n  }\n}\n","<template>\n  <div class=\"no-acitivity\">\n    <svg\n      width=\"248\"\n      height=\"201\"\n      viewBox=\"0 0 248 201\"\n      fill=\"none\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n    >\n      <g clip-path=\"url(#clip0_542_2352)\">\n        <path\n          d=\"M123.567 200.503C191.811 200.503 247.134 155.619 247.134 100.252C247.134 44.8842 191.811 0 123.567 0C55.3227 0 0 44.8842 0 100.252C0 155.619 55.3227 200.503 123.567 200.503Z\"\n          fill=\"url(#paint0_linear_542_2352)\"\n        />\n        <path\n          opacity=\"0.3\"\n          fill-rule=\"evenodd\"\n          clip-rule=\"evenodd\"\n          d=\"M148 198.544C147.984 191.695 146.855 181.783 141.633 173.042C132.549 157.833 114.586 152 114.586 152C114.586 152 111.282 170.75 120.367 185.958C124.077 192.17 129.269 196.818 134.113 200.143C138.822 199.82 143.456 199.283 148 198.544Z\"\n          fill=\"#0676C5\"\n        />\n        <path\n          opacity=\"0.5\"\n          fill-rule=\"evenodd\"\n          clip-rule=\"evenodd\"\n          d=\"M143.248 199.238C136.839 200.071 130.265 200.503 123.567 200.503C118.479 200.503 113.463 200.254 108.537 199.769C96.3017 190.643 91 176.058 91 176.058C91 176.058 109.391 171.827 124.889 180.288C133.806 185.157 139.781 193.246 143.248 199.238Z\"\n          fill=\"#0676C5\"\n        />\n        <rect x=\"20\" y=\"17\" width=\"174\" height=\"28\" rx=\"4\" fill=\"white\" />\n        <rect x=\"24\" y=\"21\" width=\"20\" height=\"20\" rx=\"4\" fill=\"#0676C5\" />\n        <path d=\"M79 28H50V34H79V28Z\" fill=\"#67748E\" fill-opacity=\"0.25\" />\n        <path d=\"M127 28H86V34H127V28Z\" fill=\"#67748E\" fill-opacity=\"0.25\" />\n        <path d=\"M190 28H134V34H190V28Z\" fill=\"#67748E\" fill-opacity=\"0.25\" />\n        <circle cx=\"34\" cy=\"31\" r=\"4\" fill=\"white\" />\n        <rect x=\"20\" y=\"89\" width=\"174\" height=\"28\" rx=\"4\" fill=\"white\" />\n        <rect x=\"24\" y=\"93\" width=\"20\" height=\"20\" rx=\"4\" fill=\"#0676C5\" />\n        <path d=\"M79 100H50V106H79V100Z\" fill=\"#67748E\" fill-opacity=\"0.25\" />\n        <path d=\"M127 100H86V106H127V100Z\" fill=\"#67748E\" fill-opacity=\"0.25\" />\n        <path\n          d=\"M190 100H134V106H190V100Z\"\n          fill=\"#67748E\"\n          fill-opacity=\"0.25\"\n        />\n        <circle cx=\"34\" cy=\"103\" r=\"4\" fill=\"white\" />\n        <rect y=\"53\" width=\"174\" height=\"28\" rx=\"4\" fill=\"white\" />\n        <rect x=\"4\" y=\"57\" width=\"20\" height=\"20\" rx=\"4\" fill=\"#0676C5\" />\n        <path d=\"M59 64H30V70H59V64Z\" fill=\"#67748E\" fill-opacity=\"0.25\" />\n        <path d=\"M120 64H66V70H120V64Z\" fill=\"#67748E\" fill-opacity=\"0.25\" />\n        <path d=\"M170 64H127V70H170V64Z\" fill=\"#67748E\" fill-opacity=\"0.25\" />\n        <circle cx=\"14\" cy=\"67\" r=\"4\" fill=\"white\" />\n        <rect y=\"125\" width=\"174\" height=\"28\" rx=\"4\" fill=\"white\" />\n        <rect x=\"4\" y=\"129\" width=\"20\" height=\"20\" rx=\"4\" fill=\"#0676C5\" />\n        <path d=\"M59 136H30V142H59V136Z\" fill=\"#67748E\" fill-opacity=\"0.25\" />\n        <path d=\"M120 136H66V142H120V136Z\" fill=\"#67748E\" fill-opacity=\"0.25\" />\n        <path\n          d=\"M170 136H127V142H170V136Z\"\n          fill=\"#67748E\"\n          fill-opacity=\"0.25\"\n        />\n        <circle cx=\"14\" cy=\"139\" r=\"4\" fill=\"white\" />\n        <path\n          d=\"M122.056 154.636C122.457 151.026 125.666 148.619 129.276 149.02C129.677 149.02 130.079 149.221 130.48 149.221L139.906 137.788L148.13 141.8L134.491 157.645C133.288 161.054 129.477 162.659 126.067 161.455C123.46 160.653 121.655 157.645 122.056 154.636Z\"\n          fill=\"#FFB8B8\"\n        />\n        <path\n          d=\"M180.019 61.1722C189.434 61.1722 197.067 53.5394 197.067 44.1239C197.067 34.7084 189.434 27.0757 180.019 27.0757C170.603 27.0757 162.971 34.7084 162.971 44.1239C162.971 53.5394 170.603 61.1722 180.019 61.1722Z\"\n          fill=\"#FFB8B8\"\n        />\n        <path\n          d=\"M184.231 61.1723C194.259 61.3729 202.483 53.5508 202.683 43.5224C202.884 33.494 195.062 25.2707 185.033 25.0702C183.629 25.0702 182.225 25.2707 180.821 25.4713C177.011 23.2651 172.799 21.6605 168.386 22.0617C163.974 22.4628 159.762 25.0702 158.157 29.0815C156.553 33.0929 158.358 38.5082 162.369 40.1127C164.977 41.1156 167.785 40.7144 170.592 40.3133C173.4 39.9122 176.409 39.511 178.816 41.1156C181.223 42.5195 182.225 46.3303 180.22 48.1354C177.813 50.1411 177.011 53.3502 178.014 56.3587C179.016 58.7655 182.025 61.1723 184.231 61.1723Z\"\n          fill=\"#1F2937\"\n        />\n        <path\n          d=\"M203.686 166.27C202.082 163.061 203.486 159.25 206.695 157.645C207.096 157.445 207.497 157.445 207.698 157.244L209.503 142.603L218.729 141.6L215.72 162.258C216.523 165.869 214.116 169.278 210.706 169.88C207.898 170.482 204.89 168.877 203.686 166.27Z\"\n          fill=\"#FFB8B8\"\n        />\n        <path\n          fill-rule=\"evenodd\"\n          clip-rule=\"evenodd\"\n          d=\"M202.699 76.4463C197.569 70.4316 190.174 66.3742 181.623 65.7845C174.985 65.2462 164.975 65.0289 160.21 72.025C157.695 73.1572 155.924 75.6273 155.55 78.6211L153.343 96.4716C151.338 113.119 144.92 128.964 134.691 142.201L133.487 143.806C132.685 145.009 132.886 146.413 133.688 147.416L137.9 152.029C137.9 152.029 137.9 152.229 138.1 152.229C139.304 153.232 140.908 153.032 141.911 151.828L159.561 130.568C159.777 130.304 159.989 130.036 160.196 129.765C157.818 138.287 155.569 144.078 154.014 148.082C151.026 155.775 150.602 156.868 156.753 158.046C157.626 158.213 158.786 158.457 160.17 158.749L160.172 158.749C173.746 161.611 208.934 169.028 207.296 152.831C206.901 147.298 207.138 138.552 207.697 129.04C208.569 136.726 208.564 144.515 207.697 152.229C207.697 153.633 208.5 154.837 209.703 155.238L215.72 157.043H216.121C217.726 157.243 219.13 156.241 219.33 154.636L223.943 124.15C224.344 120.339 223.943 116.528 222.539 112.918L206.895 81.2284C206.096 79.7097 204.532 77.8406 202.699 76.4463Z\"\n          fill=\"#0676C5\"\n        />\n        <path\n          fill-rule=\"evenodd\"\n          clip-rule=\"evenodd\"\n          d=\"M206 174.935L205.291 154.034L155.751 152.831L152.255 197.787C172.575 193.868 190.951 185.877 206 174.935Z\"\n          fill=\"#1F2937\"\n        />\n      </g>\n      <defs>\n        <linearGradient\n          id=\"paint0_linear_542_2352\"\n          x1=\"123.567\"\n          y1=\"0\"\n          x2=\"123.567\"\n          y2=\"200.503\"\n          gradientUnits=\"userSpaceOnUse\"\n        >\n          <stop stop-color=\"#0676C5\" stop-opacity=\"0.5\" />\n          <stop offset=\"1\" stop-color=\"#0676C5\" stop-opacity=\"0\" />\n        </linearGradient>\n        <clipPath id=\"clip0_542_2352\">\n          <rect width=\"247.134\" height=\"200.503\" fill=\"white\" />\n        </clipPath>\n      </defs>\n    </svg>\n\n    <GlobalText :size=\"16\">{{ t('Nothing to see hereâ€”yet!') }}</GlobalText>\n    <GlobalText\n      :size=\"14\"\n      color=\"text-secondary\"\n      class=\"d-flex flex-column align-items-center\"\n    >\n      <span> {{ t('Calls, messages, and voicemail from') }} </span>\n      <span>{{ t('outside your directory will appear here.') }}</span>\n    </GlobalText>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { useI18n } from 'vue-i18n';\nimport { GlobalText } from '@/components/Global/Text';\n\nconst { t } = useI18n();\n</script>\n\n<style>\n.no-acitivity {\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  gap: 16px;\n}\n</style>\n","<template>\n  <svg\n    width=\"16\"\n    height=\"16\"\n    viewBox=\"0 0 16 16\"\n    fill=\"none\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n  >\n    <path\n      d=\"M14.9668 11.5667C14.8037 11.3929 14.2278 10.8792 13.169 10.1995C12.1025 9.51386 11.3159 9.08636 11.0903 8.98667C11.0704 8.97785 11.0485 8.97462 11.0269 8.97732C11.0053 8.98001 10.9849 8.98854 10.9678 9.00199C10.6044 9.28542 9.99247 9.80605 9.95966 9.83417C9.74779 10.0157 9.74779 10.0157 9.57435 9.95917C9.26935 9.85917 8.32185 9.35605 7.49623 8.52855C6.6706 7.70105 6.14154 6.73011 6.04154 6.42542C5.98435 6.25167 5.98435 6.25167 6.16654 6.0398C6.19466 6.00699 6.7156 5.39511 6.99904 5.03199C7.01248 5.01489 7.02101 4.99445 7.02371 4.97286C7.02641 4.95128 7.02317 4.92937 7.01435 4.90949C6.91466 4.68355 6.48716 3.8973 5.80154 2.83074C5.12091 1.7723 4.60779 1.19636 4.43404 1.03324C4.41809 1.01819 4.39839 1.00772 4.37699 1.00294C4.3556 0.998153 4.33331 0.999228 4.31248 1.00605C3.70512 1.21476 3.11912 1.48108 2.56248 1.80136C2.02511 2.11374 1.51636 2.47295 1.04216 2.8748C1.02561 2.88887 1.0132 2.90718 1.00626 2.92777C0.999327 2.94836 0.998126 2.97045 1.00279 2.99167C1.0681 3.29605 1.38029 4.56667 2.34904 6.32667C3.33748 8.12292 4.02248 9.04323 5.47404 10.4898C6.9256 11.9364 7.87498 12.6626 9.6731 13.651C11.4331 14.6198 12.7044 14.9323 13.0081 14.997C13.0294 15.0016 13.0515 15.0004 13.0721 14.9935C13.0928 14.9865 13.1111 14.9741 13.1253 14.9576C13.5271 14.4834 13.8862 13.9747 14.1984 13.4373C14.5186 12.8806 14.7849 12.2946 14.9937 11.6873C15.0004 11.6666 15.0014 11.6445 14.9967 11.6233C14.992 11.6021 14.9817 11.5826 14.9668 11.5667Z\"\n      fill=\"#0676C5\"\n    />\n  </svg>\n</template>\n","<template>\n  <svg\n    width=\"16\"\n    height=\"16\"\n    viewBox=\"0 0 16 16\"\n    fill=\"none\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n  >\n    <path\n      d=\"M3.66699 10.6665C5.32385 10.6665 6.66699 9.32336 6.66699 7.6665C6.66699 6.00965 5.32385 4.6665 3.66699 4.6665C2.01014 4.6665 0.666992 6.00965 0.666992 7.6665C0.666992 9.32336 2.01014 10.6665 3.66699 10.6665Z\"\n      stroke=\"#0676C5\"\n      stroke-width=\"1.33333\"\n      stroke-linecap=\"round\"\n      stroke-linejoin=\"round\"\n    />\n    <path\n      d=\"M12.333 10.6665C13.9899 10.6665 15.333 9.32336 15.333 7.6665C15.333 6.00965 13.9899 4.6665 12.333 4.6665C10.6762 4.6665 9.33301 6.00965 9.33301 7.6665C9.33301 9.32336 10.6762 10.6665 12.333 10.6665Z\"\n      stroke=\"#0676C5\"\n      stroke-width=\"1.33333\"\n      stroke-linecap=\"round\"\n      stroke-linejoin=\"round\"\n    />\n    <path\n      d=\"M3.66699 10.6665H12.3337\"\n      stroke=\"#0676C5\"\n      stroke-width=\"1.33333\"\n      stroke-linecap=\"round\"\n      stroke-linejoin=\"round\"\n    />\n  </svg>\n</template>\n","<template>\n  <svg\n    width=\"16\"\n    height=\"16\"\n    viewBox=\"0 0 16 16\"\n    fill=\"none\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n  >\n    <path\n      d=\"M3.00229 11.5162C3.00229 11.5183 3.00229 11.5221 3 11.5274C3.00086 11.5239 3.00143 11.5201 3.00229 11.5162ZM13.8525 12C13.7584 11.9979 13.6654 11.9779 13.5783 11.9411L11.9547 11.3484L11.9427 11.3434C11.9073 11.3282 11.8693 11.3206 11.8309 11.321C11.7956 11.3211 11.7605 11.3277 11.7274 11.3405C11.688 11.3558 11.3325 11.4933 10.9597 11.5987C10.7575 11.6558 10.0538 11.8422 9.48908 11.8422C8.04567 11.8422 6.69604 11.271 5.68925 10.2337C5.19741 9.73036 4.80741 9.13156 4.54183 8.47197C4.27625 7.81238 4.14037 7.10509 4.14204 6.39106C4.14203 6.01901 4.18095 5.64805 4.25813 5.28458C4.50947 4.0886 5.17513 3.00067 6.13245 2.22249C7.11447 1.4293 8.32678 0.998775 9.57487 1C11.0677 1 12.4588 1.58887 13.4922 2.65412C14.469 3.66314 15.0043 4.98986 15 6.38959C14.9991 7.42969 14.6975 8.44598 14.1336 9.30889L14.1281 9.31713L14.107 9.34657C14.1021 9.35335 14.0973 9.35982 14.0927 9.3666L14.0884 9.37455C14.077 9.39446 14.0667 9.41501 14.0575 9.43608L14.5076 11.0831C14.5275 11.1511 14.5383 11.2215 14.5396 11.2925C14.5397 11.3854 14.522 11.4775 14.4875 11.5634C14.453 11.6493 14.4024 11.7273 14.3386 11.793C14.2748 11.8588 14.199 11.9109 14.1156 11.9464C14.0322 11.9819 13.9428 12.0001 13.8525 12Z\"\n      fill=\"#0676C5\"\n    />\n    <path\n      d=\"M9.37095 13.2933C9.33866 13.2305 9.29323 13.1754 9.23775 13.1318C9.18226 13.0881 9.11802 13.0569 9.04939 13.0402C8.86876 12.9924 8.65814 13.0005 8.4972 12.9887C6.97762 12.883 5.54765 12.2308 4.47158 11.1527C3.51494 10.2014 2.89321 8.96512 2.70002 7.62991C2.65627 7.32553 2.65627 7.24991 2.65627 7.24991C2.65625 7.14835 2.6253 7.04921 2.56756 6.96568C2.50981 6.88214 2.428 6.81817 2.333 6.78228C2.238 6.74638 2.13433 6.74026 2.03577 6.76474C1.93721 6.78921 1.84844 6.84312 1.78127 6.91928C1.78127 6.91928 1.53502 7.18741 1.41877 7.45647C1.09273 8.20768 0.953687 9.02674 1.01356 9.84346C1.07342 10.6602 1.33042 11.4502 1.76252 12.1458C1.84377 12.2812 1.84377 12.3437 1.82564 12.4843C1.74033 12.9252 1.59095 13.703 1.51314 14.1065C1.48738 14.2373 1.49696 14.3726 1.5409 14.4985C1.58485 14.6244 1.66156 14.7363 1.76314 14.8227L1.77752 14.8349C1.91189 14.9416 2.07841 14.9998 2.25002 14.9999C2.34654 15 2.44212 14.981 2.53127 14.944L4.20345 14.2987C4.26103 14.2768 4.32463 14.2768 4.3822 14.2987C5.04064 14.5437 5.72595 14.6737 6.37533 14.6737C7.18444 14.6744 7.98375 14.4966 8.71627 14.153C8.88689 14.073 9.15377 13.9862 9.31002 13.8055C9.36915 13.7355 9.40644 13.6496 9.41727 13.5586C9.4281 13.4675 9.41199 13.3753 9.37095 13.2933Z\"\n      fill=\"#0676C5\"\n    />\n  </svg>\n</template>\n","<template>\n  <div class=\"activiy-container\">\n    <header class=\"activity-header\">\n      <div class=\"d-flex gap-2 align-items-center\">\n        <SidebarToogle />\n        <div class=\"d-flex gap-3\">\n          <div class=\"activity-icon\">\n            <BaseIcon\n              name=\"fa-solid fa-list\"\n              library=\"fontawesome\"\n              style=\"font-size: 13px\"\n              :color=\"Color.White\"\n            />\n          </div>\n          <GlobalText :weight=\"700\" :size=\"16\">{{ t('Activity') }}</GlobalText>\n        </div>\n      </div>\n      <div class=\"activity-right-container\">\n        <button\n          class=\"activity-right-item\"\n          :class=\"{ selected: callStore.type === 'call' }\"\n          :disabled=\"callStore.type === 'call'\"\n          @click=\"setActivitiesCall(callStore.calls)\"\n        >\n          <ActivityPhone />\n          <GlobalText color=\"brand-blue-500\" :size=\"16\" :weight=\"700\">\n            {{ t('Calls') }}\n          </GlobalText>\n          <div v-if=\"callStore.countCalls > 0\" class=\"container-badge\">\n            {{ callStore.countCalls }}\n          </div>\n        </button>\n        <button\n          class=\"activity-right-item\"\n          :class=\"{ selected: callStore.type === 'voicemail' }\"\n          :disabled=\"callStore.type === 'voicemail'\"\n          @click=\"setActivitiesVoicemail\"\n        >\n          <ActivityVoicemail />\n          <GlobalText color=\"brand-blue-500\" :size=\"16\" :weight=\"700\">\n            {{ t('Voicemail') }}\n          </GlobalText>\n        </button>\n        <button\n          class=\"activity-right-item\"\n          :class=\"{ selected: callStore.type === 'sms' }\"\n          :disabled=\"callStore.type === 'sms'\"\n          @click=\"setActivitiesSms\"\n        >\n          <ActivitySms />\n          <GlobalText color=\"brand-blue-500\" :size=\"16\" :weight=\"700\">\n            {{ t('SMS') }}\n          </GlobalText>\n        </button>\n      </div>\n    </header>\n    <div\n      v-if=\"activities.length === 0\"\n      class=\"d-flex flex-column flex-grow-1 justify-content-center align-items-center\"\n      style=\"height: 80vh\"\n    >\n      <NoActivity />\n    </div>\n    <div v-else class=\"activity-table-container\" style=\"height: 78vh\">\n      <GlobalTable\n        v-model:rows=\"activities\"\n        v-model:columns=\"columns\"\n        class=\"activity-table\"\n      >\n        <template #row-type=\"{ row }\">\n          <div class=\"d-flex gap-2 align-items-center\">\n            <template v-if=\"row.type.startsWith('call')\">\n              <div class=\"container-type\">\n                <BaseIcon name=\"phone\" :color=\"Color.White\" size=\"xs\" />\n              </div>\n              <GlobalText :size=\"16\" :weight=\"700\">\n                {{ t('Call') }}\n              </GlobalText>\n              <BaseIcon\n                v-if=\"row.direction === 'outgoing'\"\n                name=\"fa-solid fa-arrow-up\"\n                :color=\"Color.TextSecondary\"\n                font-size=\"12px\"\n                library=\"fontawesome\"\n                style=\"rotate: 45deg\"\n              />\n              <BaseIcon\n                v-else\n                name=\"fa-solid fa-arrow-down\"\n                :color=\"Color.TextSecondary\"\n                font-size=\"12px\"\n                library=\"fontawesome\"\n                style=\"rotate: 45deg\"\n              />\n            </template>\n            <template v-if=\"row.type === 'voicemail'\">\n              <div class=\"container-type\">\n                <BaseIcon name=\"voicemail\" :color=\"Color.White\" size=\"xs\" />\n              </div>\n              <GlobalText :size=\"16\" :weight=\"700\">\n                {{ t('Voicemail') }}\n              </GlobalText>\n            </template>\n          </div>\n        </template>\n        <template #row-from=\"{ row }\">\n          <GlobalText\n            :size=\"16\"\n            :style=\"{\n              cursor: 'pointer',\n              padding: '0.5rem',\n            }\"\n            @click=\"call(row.from)\"\n          >\n            {{ phoneMasked(row.from) }}\n          </GlobalText>\n        </template>\n        <template #row-to=\"{ row }\">\n          <GlobalText\n            :size=\"16\"\n            :style=\"{\n              cursor: 'pointer',\n              padding: '0.5rem',\n            }\"\n            @click=\"call(row.to)\"\n          >\n            {{ phoneMasked(row.to) }}\n          </GlobalText>\n        </template>\n        <template #row-details=\"{ row }\">\n          <GlobalText\n            :size=\"16\"\n            :color=\"\n              ['Missed', 'Cancelled'].includes(row.details)\n                ? 'error'\n                : 'text-primary'\n            \"\n          >\n            {{ row.details }}\n          </GlobalText>\n        </template>\n        <template #row-time=\"{ row }\">\n          <GlobalText :size=\"12\" color=\"text-secondary\">\n            {{ formattedTime(new Date(row.time)) }}\n          </GlobalText>\n        </template>\n        <template #row-actions=\"{ row, index }\">\n          <span\n            class=\"container-actions\"\n            @click=\"playVoiceMail(row as Activity, index)\"\n          >\n            <BaseIcon\n              v-if=\"row.play === 'loading'\"\n              :color=\"Color.White\"\n              name=\"fa-solid fa-spinner\"\n              class=\"spin\"\n              library=\"fontawesome\"\n              font-size=\"14px\"\n            />\n            <BaseIcon\n              v-else-if=\"row.play === 'pause'\"\n              :color=\"Color.White\"\n              library=\"fontawesome\"\n              name=\"fa-solid fa-stop\"\n              font-size=\"14px\"\n            />\n            <BaseIcon\n              v-else\n              :color=\"Color.White\"\n              library=\"fontawesome\"\n              name=\"fa-solid fa-play\"\n              font-size=\"14px\"\n            />\n          </span>\n        </template>\n      </GlobalTable>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport type { Call, ColumnsTable } from '@/types';\nimport { useI18n } from 'vue-i18n';\nimport GlobalTable from '@/components/Global/GlobalTable.vue';\nimport { Color } from '@/enums';\nimport BaseIcon from '@/components/BaseIcon.vue';\nimport { onMounted, ref, watch } from 'vue';\nimport { useCallsStore, useUserStore, useWebrtcStore } from '@/stores';\nimport { phoneMasked } from '@/utils';\nimport {\n  useUserAgent,\n  getVoiceMail,\n  downloadVoiceMailAudio,\n  useDate,\n} from '@/composables';\nimport NoActivity from '@/components/Activity/NoActivity.vue';\nimport { GlobalText } from '@/components/Global/Text';\nimport ActivityPhone from '@/components/Activity/ActivityPhone.vue';\nimport ActivityVoicemail from '@/components/Activity/ActivityVoicemail.vue';\nimport ActivitySms from '@/components/Activity/ActivitySms.vue';\nimport SidebarToogle from '@/components/Sidebar/SidebarToogle.vue';\n\ninterface Activity {\n  type: string;\n  to: string;\n  from: string;\n  details: string | number;\n  direction?: 'incoming' | 'outgoing';\n  time: Date | string;\n  play?: 'play' | 'pause' | 'loading';\n  filename?: string;\n  msgNumber?: number;\n}\n\nconst indexActions = 5;\nconst detailsColumn = 3;\n\nconst { t } = useI18n();\nconst callStore = useCallsStore();\nconst { newCall } = useUserAgent();\nconst webrtcStore = useWebrtcStore();\nconst userStore = useUserStore();\nconst { formattedTime, formattedDetails } = useDate();\n\nconst activities = ref<Activity[]>([]);\nconst audioPlaying = ref<HTMLAudioElement | null>(null);\nconst lockVoiceMails = ref<boolean>(false);\n\nasync function playVoiceMail(row: Activity, index: number) {\n  if (audioPlaying.value) {\n    audioPlaying.value.pause();\n    audioPlaying.value = null;\n    lockVoiceMails.value = false;\n\n    if (row.play === 'pause') {\n      row.play = 'play';\n      return;\n    }\n  }\n\n  if (lockVoiceMails.value) {\n    return;\n  }\n\n  lockVoiceMails.value = true;\n  activities.value.map((activity, id) => {\n    if (id !== index) activity.play = 'play';\n  });\n\n  try {\n    row.play = 'loading';\n    const audioData = await downloadVoiceMailAudio(\n      row.to,\n      row.msgNumber ?? 0,\n      row.filename ?? ''\n    );\n    const objUrl = URL.createObjectURL(audioData);\n    const audio = new Audio(objUrl);\n\n    audioPlaying.value = audio;\n    audioPlaying.value.addEventListener('ended', () => {\n      lockVoiceMails.value = false;\n      row.play = 'play';\n      audioPlaying.value = null;\n      objUrl && URL.revokeObjectURL(objUrl);\n    });\n\n    audio.play();\n    row.play = 'pause';\n  } catch (error) {\n    console.log(error);\n    lockVoiceMails.value = false;\n    row.play = 'play';\n  }\n}\n\nfunction setActivitiesCall(calls: Call[]) {\n  callStore.setType('call');\n  columns.value[indexActions].hide = true;\n  columns.value[detailsColumn].hide = false;\n  activities.value = [];\n  for (const call of calls) {\n    activities.value.push({\n      type: `call ${call.direction}`,\n      details: formattedDetails.value(call.duration ?? call.status),\n      direction: call.direction,\n      from:\n        call.direction === 'outgoing' ? call.localNumber : call.remoteNumber,\n      to: call.direction === 'outgoing' ? call.remoteNumber : call.localNumber,\n      time: call.date,\n    });\n  }\n\n  // sort activity by date desc\n  activities.value.sort((a, b) => {\n    return new Date(b.time).getTime() - new Date(a.time).getTime();\n  });\n}\n\nconst columns = ref<ColumnsTable[]>([\n  { headerName: t('Type'), field: 'type', sorted: true },\n  { headerName: t('From'), field: 'from', sorted: true },\n  { headerName: t('To'), field: 'to', sorted: true },\n  { headerName: t('Details'), field: 'details', sorted: true },\n  { headerName: t('Time'), field: 'time', sorted: true, isDate: true },\n  { headerName: t(''), field: 'actions', hide: true },\n]);\n\nfunction setActivitiesVoicemail() {\n  callStore.setType('voicemail');\n  columns.value[indexActions].hide = false;\n  columns.value[detailsColumn].hide = true;\n\n  activities.value = [];\n  for (const voicemail of userStore.voicemails) {\n    activities.value.push({\n      type: 'voicemail',\n      details: voicemail.timestamp,\n      from: voicemail.from,\n      to: voicemail.to,\n      time: voicemail.date,\n      filename: voicemail.filename,\n      msgNumber: voicemail.msgno,\n    });\n  }\n\n  // sort activity by date desc\n  activities.value.sort((a, b) => {\n    return new Date(b.time).getTime() - new Date(a.time).getTime();\n  });\n}\n\nfunction setActivitiesSms() {\n  callStore.setType('sms');\n  activities.value = [];\n}\n\nfunction call(number: string) {\n  newCall(number, webrtcStore.userAgentActive);\n}\n\nwatch(\n  () => callStore.calls,\n  (calls) => {\n    if (callStore.type === 'call') {\n      activities.value = [];\n      setActivitiesCall(calls);\n    }\n  },\n  { deep: true }\n);\n\nwatch(\n  () => callStore.type,\n  (type) => {\n    if (type === 'call') {\n      callStore.resetCountCalls();\n    }\n  }\n);\n\nonMounted(() => {\n  callStore.resetCountCalls();\n  setActivitiesCall(callStore.calls);\n  getVoiceMail();\n});\n</script>\n\n<style scoped>\n.activiy-container {\n  display: grid;\n  grid-template-rows: 52px auto;\n  height: calc(100vh - 84px);\n  width: 100%;\n  background-color: var(--bg-subtle);\n  border-radius: 6px;\n  box-shadow: 0 20px 27px 0 rgba(0, 0, 0, 0.05);\n}\n\n.activity-header {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  height: 52px;\n  background-color: var(--bg-element);\n  padding: 0 16px;\n  border-radius: 6px 6px 0 0;\n}\n\n.activity-icon {\n  width: 24px;\n  height: 24px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  background-color: var(--type-activity);\n  border-radius: 4px;\n}\n\n.container-type {\n  width: 24px;\n  height: 24px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  background: var(--line-icon);\n  border-radius: 4px;\n}\n\n.container-type:hover {\n  background: var(--line-icon-hover);\n}\n\n.container-badge {\n  height: 16px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  background: var(--unread-badge-bg);\n  border-radius: 4px;\n  padding: 2px 5px;\n  font-size: 12px;\n  font-weight: bold;\n  color: var(--bg-element);\n}\n\n.activity-right-container {\n  display: flex;\n  align-items: center;\n  border-radius: 6px;\n  border: 1px solid var(--line);\n}\n\n.activity-right-item {\n  all: unset;\n  display: flex;\n  align-items: center;\n  padding: 8px 12px;\n  gap: 8px;\n  transition: 0.2s;\n  cursor: pointer;\n  line-height: 16px;\n}\n\n.activity-right-item.selected {\n  background-color: var(--hover);\n}\n\n.activity-right-item:not(:last-child) {\n  border-right: 1px solid var(--line);\n}\n\n.activity-right-item:hover {\n  background-color: var(--hover);\n}\n\n.button-activity {\n  border: none;\n  background-color: transparent;\n}\n\n.container-actions {\n  width: 24px;\n  height: 24px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background: var(--button-primary-bg);\n  border-radius: 4px;\n  cursor: pointer;\n}\n\n.activity-table-container {\n  border-radius: 0 0 6px 6px;\n  overflow: auto;\n  height: 100% !important;\n}\n</style>\n"],"names":["getVoiceMail","userStore","useUserStore","response","axios","EndpointApi","numbers","voicemail","err","downloadVoiceMailAudio","number","msgNumber","filename","t","useI18n","_hoisted_1","_hoisted_2","_createElementVNode","_hoisted_3","_cache","_hoisted_4","_hoisted_5","indexActions","detailsColumn","callStore","useCallsStore","newCall","useUserAgent","webrtcStore","useWebrtcStore","formattedTime","formattedDetails","useDate","activities","ref","audioPlaying","lockVoiceMails","playVoiceMail","row","index","activity","id","audioData","objUrl","audio","error","setActivitiesCall","calls","columns","call","a","b","setActivitiesVoicemail","setActivitiesSms","watch","type","onMounted"],"mappings":"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"}