import{E as U,h as V,a as $,l as S,bJ as I,bK as k,bL as O,r as M,w as A,bM as j,bN as w,bO as N,bP as H,bQ as T,d as Y,j as q,ao as F,c as _,e as R,C as X,n as v,m as C,U as z,G,t as E,f as L,y as J,av as K,q as Q,M as Z}from"./main-A7BwrMDB.js";import{g as ee,a as te}from"./user-dV8HVTng.js";import{g as B}from"./index-35H_NU9g.js";import{B as oe}from"./BaseAvatar-cLayq0TK.js";import{_ as ne}from"./_plugin-vue_export-helper-x3n3nnut.js";async function ke(e,o=!1){try{return(await V.post(U.Search,{search:e,only_mobile_numbers:o})).data.numbers}catch{console.log("searching outputerror")}}function se(){const e=$();return{user:S(()=>t=>{if(!t)return null;const s=ee(t,e.teams);return te(s,e.teams)})}}function h(e){var o;const t=w(e);return(o=t==null?void 0:t.$el)!=null?o:t}const x=T?window:void 0;function g(...e){let o,t,s,u;if(typeof e[0]=="string"||Array.isArray(e[0])?([t,s,u]=e,o=x):[o,t,s,u]=e,!o)return k;Array.isArray(t)||(t=[t]),Array.isArray(s)||(s=[s]);const f=[],m=()=>{f.forEach(r=>r()),f.length=0},c=(r,l,n,a)=>(r.addEventListener(l,n,a),()=>r.removeEventListener(l,n,a)),i=A(()=>[h(o),w(u)],([r,l])=>{if(m(),!r)return;const n=j(l)?{...l}:l;f.push(...t.flatMap(a=>s.map(d=>c(r,a,d,n))))},{immediate:!0,flush:"post"}),p=()=>{i(),m()};return N(p),p}let D=!1;function W(e,o,t={}){const{window:s=x,ignore:u=[],capture:f=!0,detectIframe:m=!1}=t;if(!s)return k;O&&!D&&(D=!0,Array.from(s.document.body.children).forEach(n=>n.addEventListener("click",k)),s.document.documentElement.addEventListener("click",k));let c=!0;const i=n=>u.some(a=>{if(typeof a=="string")return Array.from(s.document.querySelectorAll(a)).some(d=>d===n.target||n.composedPath().includes(d));{const d=h(a);return d&&(n.target===d||n.composedPath().includes(d))}}),r=[g(s,"click",n=>{const a=h(e);if(!(!a||a===n.target||n.composedPath().includes(a))){if(n.detail===0&&(c=!i(n)),!c){c=!0;return}o(n)}},{passive:!0,capture:f}),g(s,"pointerdown",n=>{const a=h(e);c=!i(n)&&!!(a&&!n.composedPath().includes(a))},{passive:!0}),m&&g(s,"blur",n=>{setTimeout(()=>{var a;const d=h(e);((a=s.document.activeElement)==null?void 0:a.tagName)==="IFRAME"&&!(d!=null&&d.contains(s.document.activeElement))&&o(n)},0)})].filter(Boolean);return()=>r.forEach(n=>n())}const ge={[I.mounted](e,o){const t=!o.modifiers.bubble;if(typeof o.value=="function")e.__onClickOutside_stop=W(e,o.value,{capture:t});else{const[s,u]=o.value;e.__onClickOutside_stop=W(e,s,Object.assign({capture:t},u))}},[I.unmounted](e){e.__onClickOutside_stop()}};function b(e){return typeof Window<"u"&&e instanceof Window?e.document.documentElement:typeof Document<"u"&&e instanceof Document?e.documentElement:e}function P(e){const o=window.getComputedStyle(e);if(o.overflowX==="scroll"||o.overflowY==="scroll"||o.overflowX==="auto"&&e.clientWidth<e.scrollWidth||o.overflowY==="auto"&&e.clientHeight<e.scrollHeight)return!0;{const t=e.parentNode;return!t||t.tagName==="BODY"?!1:P(t)}}function re(e){const o=e||window.event,t=o.target;return P(t)?!1:o.touches.length>1?!0:(o.preventDefault&&o.preventDefault(),!1)}const y=new WeakMap;function ae(e,o=!1){const t=M(o);let s=null,u;A(H(e),c=>{const i=b(w(c));if(i){const p=i;y.get(p)||y.set(p,u),t.value&&(p.style.overflow="hidden")}},{immediate:!0});const f=()=>{const c=b(w(e));!c||t.value||(O&&(s=g(c,"touchmove",i=>{re(i)},{passive:!1})),c.style.overflow="hidden",t.value=!0)},m=()=>{var c;const i=b(w(e));!i||!t.value||(O&&(s==null||s()),i.style.overflow=(c=y.get(i))!=null?c:"",y.delete(i),t.value=!1)};return N(m),S({get(){return t.value},set(c){c?f():m()}})}function ce(){let e=!1;const o=M(!1);return(t,s)=>{if(o.value=s.value,e)return;e=!0;const u=ae(t,s.value);A(o,f=>u.value=f)}}ce();const ie={class:"dropdown-contacts-list"},le=["onClick"],ue={class:"dropdown-contacts-item-right"},de={class:"dropdown-contacts-item-name"},fe={class:"dropdown-contacts-item-phone"},me={class:"dropdown-contacts-load-more"},pe=Y({__name:"DroddownContacts",props:{users:{},matchContactsLength:{}},emits:["load-more","contact-selected"],setup(e,{emit:o}){const t=o,{t:s}=q(),{user:u}=se(),f=F(),m=S(()=>r=>`${f.avatars[Number(r)][80]}`);function c(r){const l=r;l.style.opacity="0"}function i(r,l){const n=r;B.to(n,{duration:.4,ease:"power4.out",opacity:1,onComplete:l})}function p(r,l){const n=r;B.to(n,{duration:.4,ease:"power4.out",opacity:0,onComplete:l})}return(r,l)=>(_(),R(K,{onBeforeEnter:c,onEnter:i,onLeave:p},{default:X(()=>[v("ul",ie,[(_(!0),C(G,null,z(r.users,n=>{var a;return _(),C("li",{key:n.userId,class:"dropdown-contacts-item",onClick:d=>t("contact-selected",n)},[Q(oe,{src:m.value((a=L(u)(n.number))==null?void 0:a.userId),size:"2.25rem"},null,8,["src"]),v("div",ue,[v("span",de,E(n.name),1),v("span",fe,E(L(Z)(n.number)),1)])],8,le)}),128)),r.matchContactsLength>r.users.length?(_(),C("li",{key:0,onClick:l[0]||(l[0]=n=>t("load-more"))},[v("div",me,[v("span",null,E(L(s)("Load more")),1)])])):J("",!0)])]),_:1}))}}),Ce=ne(pe,[["__scopeId","data-v-7c7ec362"]]);export{Ce as D,ke as s,se as u,ge as v};
//# sourceMappingURL=DroddownContacts-lrXkBHej.js.map
