{"version":3,"file":"SearchView-NR6KDtsk.js","sources":["../../src/assets/images/icon-groups.svg","../../src/views/SearchView.vue"],"sourcesContent":["export default \"data:image/svg+xml,%3csvg%20width='20'%20height='20'%20viewBox='0%200%2020%2020'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3crect%20width='20'%20height='20'%20rx='4'%20fill='%2317AD37'/%3e%3cpath%20d='M7.5625%2010C8.49448%2010%209.25%209.24448%209.25%208.3125C9.25%207.38052%208.49448%206.625%207.5625%206.625C6.63052%206.625%205.875%207.38052%205.875%208.3125C5.875%209.24448%206.63052%2010%207.5625%2010Z'%20fill='white'/%3e%3cpath%20d='M9.48437%2010.938C8.82437%2010.6028%208.09594%2010.4692%207.5625%2010.4692C6.51766%2010.4692%204.375%2011.11%204.375%2012.3911V13.3755H7.89062V12.9988C7.89062%2012.5535%208.07812%2012.1071%208.40625%2011.7349C8.66805%2011.4377%209.03461%2011.1618%209.48437%2010.938Z'%20fill='white'/%3e%3cpath%20d='M11.9687%2010.7505C10.7484%2010.7505%208.3125%2011.5042%208.3125%2013.0005V14.1255H15.625V13.0005C15.625%2011.5042%2013.1891%2010.7505%2011.9687%2010.7505Z'%20fill='white'/%3e%3cpath%20d='M11.9688%2010C13.1078%2010%2014.0313%209.07659%2014.0313%207.9375C14.0313%206.79841%2013.1078%205.875%2011.9688%205.875C10.8297%205.875%209.90625%206.79841%209.90625%207.9375C9.90625%209.07659%2010.8297%2010%2011.9688%2010Z'%20fill='white'/%3e%3c/svg%3e\"","<template>\n  <div class=\"d-flex gap-2 p-3 align-items-center result-search\">\n    <SidebarToogle />\n    <div class=\"icon-container search\">\n      <BaseIcon name=\"search\" :style=\"{ stroke: Color.LineIcon }\" :size=\"16\" />\n    </div>\n    <span :style=\"{ color: Color.TextPrimary }\"\n      >{{ t('Search results for') }}\n      <strong>\"{{ search }}\"</strong>\n    </span>\n  </div>\n  <div v-show=\"rows.length && !loadingMessages\">\n    <GlobalTable\n      :columns=\"columns\"\n      :rows=\"rows\"\n      row-cursor=\"pointer\"\n      @row-clicked=\"(message:any) => onclick(message as unknown as any)\"\n    >\n      <template #row-type=\"{ row }\">\n        <div class=\"d-flex gap-2 p-1 align-items-center\">\n          <div class=\"icon-container message\">\n            <BaseIcon name=\"message-circle\" :size=\"16\" :color=\"Color.White\" />\n          </div>\n          <span class=\"fw-bold\" :style=\"{ color: Color.TextPrimary }\">\n            {{\n              row.type === 'attachment' ? t('Message') : t(capitalize(row.type))\n            }}\n          </span>\n        </div>\n      </template>\n      <template #row-from=\"{ row }\">\n        <div class=\"to-avatar\">\n          <BaseAvatar\n            v-if=\"row.src_user !== userStore.user.userId\"\n            :src=\"avatarUrl(row.src_user)\"\n            size=\"1.25rem\"\n            :status=\"statusStore?.status[row.src_user]?.status as unknown as UserStatusEnum ?? 'offline'\"\n          />\n          <span :title=\"row.from\" class=\"from dots\">{{ row.from }}</span>\n        </div>\n      </template>\n      <template #row-to=\"{ row }\">\n        <div :class=\"row.group_id ? 'to-avatar-group' : 'to-avatar'\">\n          <BaseAvatar\n            v-if=\"row.dst_user && row.dst_user !== userStore.user.userId\"\n            :src=\"avatarUrl(row.dst_user)\"\n            size=\"1.25rem\"\n            :status=\"statusStore?.status[row.dst_user]?.status as unknown as UserStatusEnum ?? 'offline'\"\n          />\n          <BaseAvatar v-if=\"row.group_id\" :src=\"GroupICon\" size=\"1.25rem\" />\n          <span :title=\"row.to\" class=\"to dots\">{{ row.to }}</span>\n        </div>\n      </template>\n      <template #row-details=\"{ row }\">\n        <span\n          :title=\"row.content\"\n          class=\"details dots\"\n          v-html=\"row.details\"\n        ></span>\n      </template>\n      <template #row-created_at=\"{ row }\">\n        <span :title=\"row.timeFormatted\" class=\"time dots\">{{\n          row.timeFormatted\n        }}</span>\n      </template>\n    </GlobalTable>\n  </div>\n  <ContentLoading v-show=\"loadingMessages\" />\n  <div\n    v-if=\"rows.length == 0 && !loadingMessages\"\n    class=\"d-flex flex-column flex-grow-1 justify-content-center align-items-center gap-3 no-results-container\"\n    style=\"height: 80vh\"\n  >\n    <svg\n      width=\"248\"\n      height=\"201\"\n      viewBox=\"0 0 248 201\"\n      fill=\"none\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n    >\n      <g clip-path=\"url(#clip0_3643_19726)\">\n        <path\n          d=\"M123.567 200.503C191.811 200.503 247.134 155.619 247.134 100.252C247.134 44.8842 191.811 0 123.567 0C55.3227 0 0 44.8842 0 100.252C0 155.619 55.3227 200.503 123.567 200.503Z\"\n          fill=\"url(#paint0_linear_3643_19726)\"\n        />\n        <rect x=\"5\" y=\"18\" width=\"219\" height=\"29\" rx=\"4\" fill=\"white\" />\n        <path d=\"M127 30H79V36H127V30Z\" fill=\"#67748E\" fill-opacity=\"0.3\" />\n        <path d=\"M155 30H135V36H155V30Z\" fill=\"#67748E\" fill-opacity=\"0.3\" />\n        <path d=\"M163 30H219V36H163V30Z\" fill=\"#67748E\" fill-opacity=\"0.3\" />\n        <path d=\"M71 30H38V36H71V30Z\" fill=\"#67748E\" fill-opacity=\"0.25\" />\n        <rect x=\"10\" y=\"23\" width=\"20\" height=\"20\" rx=\"4\" fill=\"#0676C5\" />\n        <circle cx=\"20\" cy=\"33\" r=\"4\" fill=\"white\" />\n        <rect x=\"5\" y=\"98\" width=\"219\" height=\"29\" rx=\"4\" fill=\"white\" />\n        <path d=\"M127 110H79V116H127V110Z\" fill=\"#67748E\" fill-opacity=\"0.3\" />\n        <path d=\"M155 110H135V116H155V110Z\" fill=\"#67748E\" fill-opacity=\"0.3\" />\n        <path d=\"M163 110H219V116H163V110Z\" fill=\"#67748E\" fill-opacity=\"0.3\" />\n        <path d=\"M71 110H38V116H71V110Z\" fill=\"#67748E\" fill-opacity=\"0.25\" />\n        <rect x=\"10\" y=\"103\" width=\"20\" height=\"20\" rx=\"4\" fill=\"#0676C5\" />\n        <circle cx=\"20\" cy=\"113\" r=\"4\" fill=\"white\" />\n        <rect x=\"22\" y=\"58\" width=\"219\" height=\"29\" rx=\"4\" fill=\"white\" />\n        <path d=\"M144 70H96V76H144V70Z\" fill=\"#67748E\" fill-opacity=\"0.3\" />\n        <path d=\"M172 70H152V76H172V70Z\" fill=\"#67748E\" fill-opacity=\"0.3\" />\n        <path d=\"M180 70H236V76H180V70Z\" fill=\"#67748E\" fill-opacity=\"0.3\" />\n        <path d=\"M88 70H55V76H88V70Z\" fill=\"#67748E\" fill-opacity=\"0.25\" />\n        <rect x=\"27\" y=\"63\" width=\"20\" height=\"20\" rx=\"4\" fill=\"#0676C5\" />\n        <circle cx=\"37\" cy=\"73\" r=\"4\" fill=\"white\" />\n        <path\n          d=\"M174.238 66.3013C187.802 66.3013 198.799 55.3049 198.799 41.7402C198.799 28.1756 187.802 17.1792 174.238 17.1792C160.673 17.1792 149.677 28.1756 149.677 41.7402C149.677 55.3049 160.673 66.3013 174.238 66.3013Z\"\n          fill=\"#FFB8B8\"\n        />\n        <path\n          d=\"M221.569 161.32L229.188 119.158L208.115 118.88L200.525 178.691C208.375 173.614 215.446 167.778 221.569 161.32Z\"\n          fill=\"#FFB8B8\"\n        />\n        <path\n          d=\"M220.549 129.641C217.288 136.476 216.897 150.794 217.572 165.32C198.942 183.02 172.851 195.394 143.25 199.238C161.72 155.14 153.238 84.1575 153.238 84.1575C193.35 57.962 220.389 89.737 228.516 102.489C229.475 103.985 230.114 105.662 230.394 107.412C230.661 107.907 230.813 108.458 230.837 109.024L231.738 130.658L220.549 129.641Z\"\n          fill=\"#0676C5\"\n        />\n        <path\n          d=\"M148.038 198.538L164.188 109.158L143.115 108.88L131.515 200.299C137.133 200.01 142.649 199.416 148.038 198.538Z\"\n          fill=\"#FFB8B8\"\n        />\n        <path\n          d=\"M162.738 84.6574L153.738 83.6574C153.738 83.6574 145.738 81.6574 142.738 92.6574C139.738 103.657 139.738 125.657 139.738 125.657L167.738 124.657L162.738 84.6574Z\"\n          fill=\"#0676C5\"\n        />\n        <path\n          d=\"M178.173 53.5647C179.055 50.5029 178.8 46.3597 175.831 45.2016C174.285 44.5982 172.559 45.0741 170.907 45.2432C167.676 45.5606 164.441 44.6702 161.827 42.7438C158.756 40.4612 156.86 36.9721 155.059 33.5965L152.335 28.4909C151.729 27.4265 151.212 26.3137 150.789 25.1639C149.274 20.6566 150.919 15.4383 154.288 12.0823C157.809 8.8069 162.442 6.99041 167.251 7.00004C172.022 7.03428 176.736 8.0441 181.102 9.96741C188.863 13.1309 195.893 17.8533 201.756 23.8424C205.588 27.7625 209.076 32.8693 208.275 38.2924C207.652 42.5138 204.575 45.8941 201.64 48.992L190.996 60.2289C189.111 62.2189 187.096 64.2901 184.464 65.0552C181.832 65.8203 178.441 64.6964 177.723 62.0508C177.723 62.0508 177.29 56.6264 178.173 53.5647Z\"\n          fill=\"#2F2E41\"\n        />\n        <g style=\"mix-blend-mode: multiply\" opacity=\"0.3\">\n          <path\n            d=\"M98.4235 198.426C90.4555 183.73 78.6488 167.94 66.1041 157.725C66.0223 157.665 65.9576 157.585 65.9162 157.493C65.8748 157.401 65.8581 157.299 65.8681 157.198C63.4159 158.584 61.2572 160.434 59.5127 162.646C57.1198 165.71 55.6111 169.37 55.1502 173.23C54.6893 177.091 55.2938 181.003 56.898 184.545C56.9277 184.604 56.9576 184.662 56.9878 184.721C69.4501 191.2 83.4408 195.914 98.4235 198.426Z\"\n            fill=\"#0676C5\"\n          />\n        </g>\n        <g style=\"mix-blend-mode: multiply\" opacity=\"0.3\">\n          <path\n            d=\"M125.091 200.496C124.584 200.501 124.075 200.503 123.566 200.503C115.663 200.503 107.933 199.901 100.443 198.751C100.439 198.743 100.435 198.735 100.431 198.727C99.5962 196.948 98.7242 195.09 98.3167 194.313C94.4008 187.101 89.7976 180.285 84.571 173.958C79.3397 167.634 73.5012 161.838 67.1392 156.653L66.9756 156.544C71.0479 154.493 75.6236 153.655 80.1585 154.129C84.0181 154.617 87.7206 155.959 90.9967 158.057C94.2727 160.155 97.0402 162.957 99.0976 166.259C103.637 173.522 104.545 182.438 105.271 190.972C106.075 188.79 107.635 186.969 109.668 185.84C111.7 184.71 114.071 184.347 116.348 184.817C118.599 185.398 120.623 186.645 122.155 188.394C123.687 190.143 124.657 192.314 124.937 194.622C124.937 194.81 124.952 195.279 124.973 195.938C125.01 197.055 125.064 198.719 125.091 200.496Z\"\n            fill=\"#0676C5\"\n          />\n        </g>\n      </g>\n      <defs>\n        <linearGradient\n          id=\"paint0_linear_3643_19726\"\n          x1=\"123.567\"\n          y1=\"0\"\n          x2=\"123.567\"\n          y2=\"200.503\"\n          gradientUnits=\"userSpaceOnUse\"\n        >\n          <stop stop-color=\"#0676C5\" stop-opacity=\"0.5\" />\n          <stop offset=\"1\" stop-color=\"#0676C5\" stop-opacity=\"0\" />\n        </linearGradient>\n        <clipPath id=\"clip0_3643_19726\">\n          <rect width=\"247.134\" height=\"200.503\" fill=\"white\" />\n        </clipPath>\n      </defs>\n    </svg>\n    <div class=\"no_results_text\">\n      <span>{{ t('No results found.') }}</span>\n      <p>\n        {{ t(\"Looks like we couldn't find any results\") }}<br />\n        {{ t('matching your query.') }}\n      </p>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport ContentLoading from '@/components/Views/ContentChat/ContentLoading.vue';\nimport { useRoute, useRouter } from 'vue-router';\nimport { computed, onBeforeMount, ref, watch } from 'vue';\nimport { Color, RouteName } from '@/enums';\nimport BaseIcon from '@/components/BaseIcon.vue';\nimport { useI18n } from 'vue-i18n';\nimport type { ColumnsTable, Group, UserStatusEnum } from '@/types';\nimport { useDate, useGroup } from '@/composables';\nimport GlobalTable from '@/components/Global/GlobalTable.vue';\nimport {\n  useIndexesStore,\n  useMessageStore,\n  useStatusStore,\n  useUserStore,\n} from '@/stores';\nimport { capitalize } from 'lodash';\nimport BaseAvatar from '@/components/BaseAvatar.vue';\nimport GroupICon from '@/assets/images/icon-groups.svg';\nimport collect from 'collect.js';\nimport { defaultImage } from '@/utils';\nimport SidebarToogle from '@/components/Sidebar/SidebarToogle.vue';\n\nconst router = useRouter();\nconst route = useRoute();\nconst { t } = useI18n();\nconst { formattedTimeValue } = useDate();\nconst { searchMessages } = useMessageStore();\nconst indexesStore = useIndexesStore();\nconst statusStore = useStatusStore();\nconst userStore = useUserStore();\nconst { participantsValue } = useGroup();\n\nconst search = ref('');\nconst loadingMessages = ref(false);\nconst endOfSearchMessages = ref(false);\n\nconst columns: ColumnsTable[] = [\n  { headerName: t('Type'), field: 'type', sorted: true, width: '15%' },\n  { headerName: t('From'), field: 'from', sorted: true, width: '15%' },\n  { headerName: t('To'), field: 'to', sorted: true, width: '15%' },\n  { headerName: t('Details'), field: 'details', sorted: true, width: '35%' },\n  {\n    headerName: t('Time'),\n    field: 'created_at',\n    sorted: true,\n    isDate: true,\n    width: '20%',\n  },\n];\n\nconst avatarUrl = computed(() => {\n  return (userId: number) =>\n    indexesStore.avatars[userId]\n      ? indexesStore.avatars[userId]['32']\n      : defaultImage;\n});\n\nwatch(\n  () => route.query,\n  () => {\n    if (!Object.prototype.hasOwnProperty.call(route.query, 'search')) {\n      return;\n    }\n    search.value = route.query.search as string;\n    rows.value = [];\n    endOfSearchMessages.value = false;\n    searchMessagesQuery();\n  },\n  { deep: true }\n);\n\nconst rows: any = ref([]);\n\nonBeforeMount(() => {\n  window.addEventListener('scroll', handleScroll);\n  search.value = route.query.search as string;\n\n  if (!search.value) {\n    return router.push({\n      name: RouteName.Home,\n    });\n  }\n});\n\nsearchMessagesQuery();\n\nfunction handleScroll() {\n  const scrollY = window.scrollY;\n  const windowHeight = window.innerHeight;\n  const documentHeight = document.documentElement.scrollHeight;\n\n  if (\n    scrollY + windowHeight >= documentHeight * 0.9 &&\n    scrollY + windowHeight <= documentHeight * 0.95 &&\n    !loadingMessages.value &&\n    rows.value.length > 0\n  ) {\n    const lastElement: any = rows.value[rows.value.length - 1];\n    searchMessagesQuery(lastElement.created_at);\n  }\n}\n\nfunction searchMessagesQuery(dataBegin = '') {\n  if (endOfSearchMessages.value || loadingMessages.value) {\n    return;\n  }\n\n  loadingMessages.value = true;\n  searchMessages(route.query.search as string, dataBegin)\n    .then((response) => {\n      const newRows = [];\n      const queryFilter = route.query.search as string;\n      for (const row of response.data) {\n        /** @todo remove later when sms is on main */\n        if (row.type == 'sms') {\n          continue;\n        }\n\n        const found = rows.value.find(\n          (rowOriginal: any) => rowOriginal.id === row.id\n        );\n        if (found !== undefined) {\n          continue;\n        }\n\n        if (row.type == 'attachment') {\n          row.type = 'message';\n        }\n\n        let details = row.content;\n        const timeFormatted = formattedTimeValue(new Date(row.created_at));\n        const from =\n          row.src_user !== userStore.user.userId\n            ? userStore.getNameByUserId(row.src_user)\n            : t('Me');\n        let to = t('Me');\n        if (row.dst_user && row.dst_user !== userStore.user.userId) {\n          to = userStore.getNameByUserId(row.dst_user);\n        }\n\n        if (!from || !to) {\n          continue;\n        }\n\n        if (row.group_id) {\n          const group = userStore.groupById(row.group_id) as Group;\n          if (!group) {\n            continue;\n          }\n          to = participantsValue(group);\n        }\n\n        if (details.length > 60) {\n          details = extractSubstring(details, queryFilter);\n        }\n\n        const escapedSearchWord = queryFilter.replace(\n          /[.*+?^${}()|[\\]\\\\]/g,\n          '\\\\$&'\n        );\n        const searchPattern = new RegExp(\n          `\\\\b(${escapedSearchWord.replace(/\\s+/g, '|')})\\\\b`,\n          'gi'\n        );\n\n        details = details.replace(\n          searchPattern,\n          '<span class=\"fw-bold\">$&</span>'\n        );\n\n        newRows.push({ ...row, details, from, to, timeFormatted });\n      }\n\n      if (newRows.length > 0) {\n        rows.value.push(...newRows);\n        rows.value = collect(rows.value).sortByDesc('created_at').all();\n      }\n\n      if (!response.moreMessages) {\n        endOfSearchMessages.value = true;\n      }\n      setTimeout(() => {\n        loadingMessages.value = false;\n      }, 500);\n    })\n    .catch((error) => {\n      console.error('Error:', error);\n      loadingMessages.value = false;\n    });\n}\n\nfunction extractSubstring(inputString: string, filterWord: string) {\n  const index = inputString.indexOf(filterWord);\n  if (index === -1) {\n    return inputString;\n  }\n\n  return inputString.substring(index);\n}\n\nfunction onclick(row: any) {\n  if (row.group_id) {\n    return router.push({\n      name: RouteName.Group,\n      params: { id: row.group_id },\n      query: { messageId: row.id, dateCondition: row.created_at },\n    });\n  }\n\n  const userId =\n    row.src_user == userStore.user.userId ? row.dst_user : row.src_user;\n  router.push({\n    name: RouteName.Directory,\n    params: { id: userId },\n    query: { messageId: row.id, dateCondition: row.created_at },\n  });\n}\n</script>\n\n<style lang=\"scss\">\ntable th:nth-child(4) {\n  width: 35%;\n}\n\ntable > tbody > tr > td {\n  color: var(--text-primary) !important;\n}\n</style>\n\n<style lang=\"scss\" scoped>\n.icon-container {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  border-radius: 5px;\n  height: 24px;\n  width: 24px;\n  box-shadow: none;\n\n  &.search {\n    background: var(--bg-subtle);\n  }\n\n  &.message {\n    background: var(--button-primary-bg);\n  }\n}\n\n.time {\n  font-size: 12px;\n  color: var(--text-secondary);\n}\n\n.to-avatar,\n.to-avatar-group {\n  display: flex;\n  gap: 6px;\n}\n\n.to-avatar-group figure,\n.no-results-container {\n  background-color: var(--bg-subtle);\n}\n\n.dots {\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  display: block;\n}\n\ntable {\n  table-layout: fixed;\n}\n\n.loading-messages {\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  height: 100%;\n  width: 100%;\n}\n\n.result-search {\n  border-radius: 6px;\n  background-color: var(--white-500);\n}\n\n.no_results_text {\n  text-align: center;\n  span {\n    color: var(--text-primary);\n    line-height: normal;\n    letter-spacing: -0.24px;\n  }\n\n  p {\n    color: var(--text-secondary);\n    margin-top: 10px;\n    line-height: normal;\n    letter-spacing: -0.21px;\n  }\n}\n</style>\n"],"names":["GroupICon","router","useRouter","route","useRoute","t","useI18n","formattedTimeValue","useDate","searchMessages","useMessageStore","indexesStore","useIndexesStore","statusStore","useStatusStore","userStore","useUserStore","participantsValue","useGroup","search","ref","loadingMessages","endOfSearchMessages","columns","avatarUrl","computed","userId","defaultImage","watch","rows","searchMessagesQuery","onBeforeMount","handleScroll","RouteName","scrollY","windowHeight","documentHeight","lastElement","dataBegin","response","newRows","queryFilter","row","rowOriginal","details","timeFormatted","from","to","group","extractSubstring","escapedSearchWord","searchPattern","collect","error","inputString","filterWord","index","onclick"],"mappings":"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"}