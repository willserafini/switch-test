import{E as z,h as E,i as K,d as J,r as c,k as W,j as Q,w as M,l as Y,c as y,m as F,n as e,q as w,C as p,z as P,t as l,f as s,p as Z,D as f,s as R,F as ee,v as se,x as oe,e as N,y as B,G as ae,H as te,R as le,B as re,I as ie,J as ne}from"./main-A7BwrMDB.js";import{_ as de,a as ce}from"./logo_au-qIb2iIvG.js";import{_ as L}from"./BaseIcon.vue_vue_type_script_setup_true_lang-io_05Ke-.js";import{C as i}from"./color-Ih_vWK5s.js";import{u as ue}from"./use-input-type-XeEeU_dq.js";import{u as me}from"./use-meta-8qaBMXcq.js";import{_ as j}from"./BaseModal.vue_vue_type_style_index_0_lang-fG62cZ1v.js";import{G as pe}from"./GlobalInput-_b9BFpf9.js";import{_ as fe}from"./index-yeKH0v8d.js";import{_ as ve}from"./_plugin-vue_export-helper-x3n3nnut.js";async function _e(v){try{return await E.get(z.CSRF),(await E.post(z.ForgotPassword,v,{headers:{"X-XSRF-TOKEN":K("XSRF-TOKEN")}})).data}catch(T){throw T}}const D=v=>(ie("data-v-d2a5895e"),v=v(),ne(),v),ye={class:"form auth-boxed"},we={class:"form-container outer"},he={class:"form-form"},ge={class:"form-form-wrap"},be={class:"form-container"},ke={class:"form-content"},xe={class:""},Pe={key:0,src:de,width:"150",alt:""},Te={key:1,src:ce,width:"150",alt:""},Ve={class:"form"},Ce={id:"username-field",class:"field-wrapper input"},Fe=["disabled"],Le=["innerHTML"],Se={id:"password-field",class:"field-wrapper input mb-2"},Ie={class:"d-flex justify-content-between"},ze=["type","disabled"],Ee=["innerHTML"],Me=["stroke"],Re=D(()=>e("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"},null,-1)),Ne=D(()=>e("circle",{cx:"12",cy:"12",r:"3"},null,-1)),Be=[Re,Ne],je={class:"d-sm-flex justify-content-between"},De={class:"field-wrapper"},He=["disabled"],Oe={class:"signup-link"},Ue=["href"],$e={class:"m-4"},Ae={class:"row g-3 needs-validation mt-2",novalidate:""},qe={class:"col-12"},Ge={class:"invalid-feedback"},Xe={class:"d-flex gap-3"},Ke=["disabled"],Je=["disabled"],We={class:"m-4"},Qe={class:"d-flex"},Ye=J({__name:"LoginView",setup(v){const T=c(),H=W(),{t:a}=Q(),O="https://vaitel.com",h=c(!1),g=c(""),b=c(!1),k=c(""),V=c(!1);me(a("Login"));const{pwdType:U,setPwdType:I}=ue(),r=c({email:"",password:""}),n=c({email:"",password:""}),m=c(!1);M(()=>r.value,()=>{n.value={email:"",password:""}},{deep:!0});async function $(){if(!r.value.email||!r.value.password){r.value.email||(n.value.email="Email are required"),r.value.password||(n.value.password="Password are required");return}m.value=!0,await te(r.value).then(async()=>{H.push({name:le.Home}),m.value=!1}).catch(u=>{var d,x;m.value=!1;const o=(d=u.response)==null?void 0:d.data;if(re(o==null?void 0:o.message),((x=u.response)==null?void 0:x.status)===422){const _=o==null?void 0:o.form_errors;if(Object.keys(_).length>0)for(const t of Object.keys(_)){const C=t,S=_[C];if(typeof S!="string")for(const X of S)n.value[C]+=X,n.value[C]+="<br>";else n.value[C]=S}}})}async function A(){var u;b.value=!0;try{await _e({email:g.value}),h.value=!1,V.value=!0,g.value=""}catch(o){const d=(u=o.response)==null?void 0:u.data;k.value=d==null?void 0:d.form_errors.email}finally{b.value=!1}}const q=Y(()=>!1);M(g,u=>{u&&(k.value="")});function G(){k.value="",h.value=!0}return(u,o)=>{var d,x,_;return y(),F(ae,null,[e("div",ye,[e("div",we,[e("div",he,[e("div",ge,[e("div",be,[e("div",ke,[e("h1",xe,[q.value?(y(),F("img",Pe)):(y(),F("img",Te))]),w(s(fe),{as:"p",size:13,weight:600,color:"text-secondary"},{default:p(()=>[P(l(s(a)("Sign in to your account")),1)]),_:1}),e("form",{ref_key:"loginFormRef",ref:T,class:"text-start needs-validation",novalidate:"","data-testid":"form-login",onSubmit:Z($,["prevent"])},[e("div",Ve,[e("div",Ce,[e("label",{for:"username-field",style:f({color:s(i).TextPrimary})},l(s(a)("EMAIL")),5),w(L,{name:"user",color:s(i).LineIcon},null,8,["color"]),R(e("input",{"onUpdate:modelValue":o[0]||(o[0]=t=>r.value.email=t),type:"email",placeholder:"example@example.com",disabled:m.value},null,8,Fe),[[ee,r.value.email]]),e("div",{class:"invalid-feedback",innerHTML:(d=n.value)==null?void 0:d.email},null,8,Le)]),e("div",Se,[e("div",Ie,[e("label",{for:"password-field",style:f({color:s(i).TextPrimary})},l(s(a)("PASSWORD")),5),e("a",{class:"forgot-pass-link",style:f({color:s(i).TextSecondary,cursor:"pointer"}),onClick:G},l(s(a)("Forgot Password?")),5)]),w(L,{name:"lock",color:s(i).LineIcon},null,8,["color"]),R(e("input",{"onUpdate:modelValue":o[1]||(o[1]=t=>r.value.password=t),"data-testid":"password",type:s(U),class:oe(["form-control",[(x=n.value)!=null&&x.password?"is-invalid":""]]),placeholder:"Password",disabled:m.value},null,10,ze),[[se,r.value.password]]),e("div",{class:"invalid-feedback",innerHTML:(_=n.value)==null?void 0:_.password},null,8,Ee),(y(),F("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:s(i).LineIcon,"stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-eye",onClick:o[2]||(o[2]=(...t)=>s(I)&&s(I)(...t))},Be,8,Me))]),e("div",je,[e("div",De,[e("button",{type:"submit",class:"primary-btn w-100 py-3",disabled:m.value},[m.value?(y(),N(L,{key:0,name:"fa-solid fa-spinner",class:"spin",library:"fontawesome","font-size":"1rem"})):B("",!0),P(" "+l(s(a)("Log In")),1)],8,He)])]),e("p",Oe,[P(l(s(a)("Dont have an account?"))+" ",1),e("a",{href:s(O),target:"_blank"},l(s(a)("Create one")),9,Ue)])])],544)])])])])])]),w(j,{modelValue:h.value,"onUpdate:modelValue":o[5]||(o[5]=t=>h.value=t),scrollable:"",persist:"",size:"sm"},{header:p(()=>[e("span",{style:f({color:s(i).TextPrimary})},l(s(a)("Forgot your password?")),5)]),body:p(()=>[e("section",$e,[e("span",{class:"font-size-14",style:f({color:s(i).TextPrimary})},[P(l(s(a)("Please enter your account email and we'll email you a link to reset your password."))+" ",1),e("form",Ae,[e("div",qe,[w(pe,{modelValue:g.value,"onUpdate:modelValue":o[3]||(o[3]=t=>g.value=t),type:"text","error-text":k.value},null,8,["modelValue","error-text"]),e("div",Ge,l(k.value),1)])])],4)])]),footer:p(()=>[e("div",Xe,[e("button",{class:"secondary-btn text-uppercase",disabled:b.value,onClick:o[4]||(o[4]=t=>h.value=!1)},l(s(a)("Cancel")),9,Ke),e("button",{class:"primary-btn text-uppercase",disabled:b.value,onClick:A},[b.value?(y(),N(L,{key:0,name:"fa-solid fa-spinner",class:"spin",library:"fontawesome","font-size":"1rem"})):B("",!0),P(" "+l(s(a)("Send")),1)],8,Je)])]),_:1},8,["modelValue"]),w(j,{modelValue:V.value,"onUpdate:modelValue":o[7]||(o[7]=t=>V.value=t),scrollable:"",persist:"",size:"sm"},{header:p(()=>[e("span",{style:f({color:s(i).TextPrimary})},l(s(a)("Email sent.")),5)]),body:p(()=>[e("section",We,[e("span",{class:"font-size-14",style:f({color:s(i).TextPrimary})},l(s(a)("An email is on its way to you to reset your password.")),5)])]),footer:p(()=>[e("div",Qe,[e("button",{class:"primary-btn text-uppercase",onClick:o[6]||(o[6]=t=>V.value=!1)},l(s(a)("Ok")),1)])]),_:1},8,["modelValue"])],64)}}}),ds=ve(Ye,[["__scopeId","data-v-d2a5895e"]]);export{ds as default};
//# sourceMappingURL=LoginView-IR2vf5FO.js.map
