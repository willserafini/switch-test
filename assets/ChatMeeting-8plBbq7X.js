import{d as ee,c as E,m as R,n as b,f as N,l as ce,b as kn,a as zo,r as re,bu as yf,R as W,w as Sr,j as Ve,bg as bf,t as Y,a8 as Ac,O as ze,P as Rr,aq as Fr,e as ue,X as V,z as oi,y as ne,a_ as Ut,I as Ct,J as kt,b7 as vf,a5 as Cf,b4 as Ei,bX as kf,b5 as wf,bY as Sf,aj as Br,a4 as Nc,x as Fn,b2 as Ic,a3 as Ef,s as es,aw as ai,V as Pc,G as wn,q as Ge,C as Dc,U as li,g as Lc,bz as jo,bA as xf,aO as Mf,bZ as Tf,bC as Of,b_ as Af,W as xi,b$ as Nf,bB as If,k as _c,M as lo,b0 as Bn,b1 as ls,ak as Pf,br as Df,aT as Lf}from"./main-A7BwrMDB.js";import{b as $n,a as dt,c as Rc,e as ft,s as _f,f as Fc,g as Rf}from"./SidebarToogle-U6gwKzHv.js";import{_ as te}from"./_plugin-vue_export-helper-x3n3nnut.js";import{u as Wo,m as Ff,n as Bf,p as $f,t as Hf,v as Vf,w as zf,x as jf,I as Bc,T as Wf}from"./index-Gr4YhlML.js";import{C as Pa}from"./color-Ih_vWK5s.js";import{_ as Kf}from"./BaseIcon.vue_vue_type_script_setup_true_lang-io_05Ke-.js";const Uf={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},qf=["fill"],Gf=ee({__name:"FileCode",props:{progress:{}},setup(n){const{color:e}=_e();return(t,r)=>(E(),R("svg",Uf,[b("path",{d:"M11.3243 10.1537C11.5342 10.3835 11.5342 10.6134 11.3243 10.8432L9.82523 12.3423C9.59537 12.5522 9.36552 12.5522 9.13566 12.3423C8.92579 12.1124 8.92579 11.8826 9.13566 11.6527L10.265 10.4934L9.13566 9.33417C8.92579 9.10431 8.92579 8.87445 9.13566 8.6446C9.36552 8.43473 9.59537 8.43473 9.82523 8.6446L11.3243 10.1437V10.1537ZM6.82706 9.34416L5.69776 10.5034L6.82706 11.6627C7.03693 11.8926 7.03693 12.1224 6.82706 12.3523C6.5972 12.5622 6.36735 12.5622 6.13749 12.3523L4.6384 10.8532C4.42853 10.6234 4.42853 10.3935 4.6384 10.1636L6.13749 8.66459C6.36735 8.45472 6.5972 8.45472 6.82706 8.66459C7.03693 8.89444 7.03693 9.1243 6.82706 9.35415V9.34416ZM3.98879 0H8.86582C9.28556 0 9.63535 0.149906 9.92517 0.439725L13.553 4.06746C13.8428 4.35728 13.9927 4.71705 13.9927 5.1268V14.0013C13.9727 14.5609 13.7728 15.0306 13.403 15.4104C13.0233 15.7901 12.5636 15.98 11.9939 16H3.99878C3.43912 15.98 2.96942 15.7801 2.58965 15.4104C2.20988 15.0306 2.01999 14.5709 2 14.0013V2.00874C2.01999 1.44909 2.21988 0.979388 2.58965 0.599625C2.96942 0.219863 3.42913 0.0299813 3.99878 0.00999375L3.98879 0ZM9.48544 4.99688H12.9833L12.8234 4.77701L9.19562 1.14928L8.97575 1.01936V4.4872C8.99574 4.797 9.16564 4.9669 9.47545 4.98688L9.48544 4.99688ZM11.9839 14.9906C12.2737 14.9906 12.5136 14.9007 12.7035 14.7108C12.8934 14.5209 12.9833 14.2811 12.9833 13.9913V5.99625H9.48544C9.06569 5.97627 8.71591 5.82636 8.42609 5.55653C8.15625 5.26671 8.00634 4.90693 7.98635 4.49719V0.999376H3.98879C3.69897 0.999376 3.45911 1.08932 3.26923 1.2792C3.07935 1.46908 2.9894 1.70893 2.9894 1.99875V13.9913C2.9894 14.2811 3.07935 14.5209 3.26923 14.7108C3.45911 14.9007 3.69897 14.9906 3.98879 14.9906H11.9839Z",fill:N(e)(t.progress)},null,8,qf)]))}}),Jf={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Zf=["fill"],Yf=ee({__name:"FileCompressed",props:{progress:{}},setup(n){const{color:e}=_e();return(t,r)=>(E(),R("svg",Jf,[b("path",{d:"M5.02815 10.2436L5.36794 8.99438H5.61779L5.95758 10.2436L5.98757 10.4035V10.4934C5.96758 10.8032 5.79768 10.9731 5.48787 10.9931C5.17806 10.9731 5.00816 10.8032 4.98818 10.4934V10.4035L5.01816 10.2436H5.02815ZM4.99817 7.995C4.74832 8.01499 4.58842 8.14491 4.52846 8.37477L4.05874 9.96377C4.01877 10.1137 3.99878 10.2536 3.99878 10.4035V10.4934C4.01877 10.9132 4.16868 11.263 4.43851 11.5528C4.72833 11.8226 5.08812 11.9725 5.49787 11.9925C5.91761 11.9725 6.2674 11.8226 6.55722 11.5528C6.82705 11.263 6.97696 10.9032 6.99695 10.4934V10.4035C6.99695 10.2536 6.97696 10.1137 6.93699 9.96377L6.46727 8.37477C6.40731 8.14491 6.24741 8.02498 5.99756 7.995H4.99817ZM3.99878 6.49594C4.01877 6.80575 4.18866 6.97564 4.49848 6.99563H6.49726C6.80707 6.97564 6.97696 6.80575 6.99695 6.49594C6.97696 6.18613 6.80707 6.01624 6.49726 5.99625H4.49848C4.18866 6.01624 4.01877 6.18613 3.99878 6.49594ZM3.99878 4.49719C4.01877 4.807 4.18866 4.97689 4.49848 4.99688H6.49726C6.80707 4.97689 6.97696 4.807 6.99695 4.49719C6.97696 4.18738 6.80707 4.01749 6.49726 3.9975H4.49848C4.18866 4.01749 4.01877 4.18738 3.99878 4.49719ZM3.99878 2.49844C4.01877 2.80824 4.18866 2.97814 4.49848 2.99813H6.49726C6.80707 2.97814 6.97696 2.80824 6.99695 2.49844C6.97696 2.18863 6.80707 2.01874 6.49726 1.99875H4.49848C4.18866 2.01874 4.01877 2.18863 3.99878 2.49844ZM2 1.99875V13.9913C2.01999 14.5509 2.21987 15.0206 2.58964 15.4004C2.96941 15.7801 3.42913 15.97 3.99878 15.99H11.9939C12.5536 15.97 13.0233 15.7701 13.403 15.4004C13.7828 15.0206 13.9727 14.5609 13.9927 13.9913V5.1268C13.9927 4.70706 13.8428 4.35728 13.5529 4.06746L9.93516 0.439725C9.64533 0.149906 9.28555 0 8.8758 0H3.99878C3.43912 0.0199875 2.96941 0.219863 2.58964 0.589631C2.21987 0.969394 2.01999 1.4391 2 1.99875ZM12.9933 4.99688H9.49543C9.18561 4.97689 9.01572 4.807 8.99573 4.49719V1.02936L9.2156 1.14928L12.8434 4.77701L13.0033 4.99688H12.9933ZM12.9933 13.9913C12.9933 14.2811 12.9033 14.5209 12.7135 14.7108C12.5236 14.9007 12.2837 14.9906 11.9939 14.9906H3.99878C3.70896 14.9906 3.4691 14.9007 3.27922 14.7108C3.08934 14.5209 2.99939 14.2811 2.99939 13.9913V1.99875C2.99939 1.70893 3.08934 1.46908 3.27922 1.2792C3.4691 1.08932 3.70896 0.999375 3.99878 0.999375H7.99634V4.49719C8.01633 4.91693 8.16624 5.26671 8.43607 5.55653C8.7259 5.82636 9.08568 5.97626 9.49543 5.99625H12.9933V13.9913Z",fill:N(e)(t.progress)},null,8,Zf)]))}}),Xf={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Qf={"clip-path":"url(#clip0_2956_22970)"},eh=["fill"],th=b("defs",null,[b("clipPath",{id:"clip0_2956_22970"},[b("rect",{width:"16",height:"16",fill:"white"})])],-1),nh=ee({__name:"FileCsv",props:{progress:{}},setup(n){const{color:e}=_e();return(t,r)=>(E(),R("svg",Xf,[b("g",Qf,[b("path",{d:"M13.4843 10.9894C13.1749 11.0094 13.0052 11.179 12.9853 11.4885V12.4866C12.9853 13.5845 13.2947 14.6026 13.9235 15.5109L14.0832 15.7604C14.183 15.9102 14.3227 15.98 14.4924 15.98C14.6621 15.98 14.7918 15.9102 14.9016 15.7604L15.0613 15.5109C15.6901 14.5926 15.9995 13.5845 15.9995 12.4866V11.4885C15.9796 11.179 15.8099 11.0094 15.5005 10.9894C15.1911 11.0094 15.0214 11.179 15.0014 11.4885V12.4866C15.0014 13.2152 14.8317 13.9039 14.5024 14.5427C14.173 13.8939 14.0033 13.2152 14.0033 12.4866V11.4885C13.9834 11.179 13.8137 11.0094 13.5043 10.9894H13.4843ZM10.4002 10.9894C10.0009 10.9894 9.67157 11.1291 9.40208 11.3986C9.1326 11.6681 8.99287 11.9975 8.99287 12.3968C9.01283 12.9956 9.29229 13.4248 9.83127 13.6744L10.9891 14.2034C11.1587 14.2832 11.2386 14.413 11.2386 14.5827C11.2186 14.8322 11.0789 14.9719 10.8294 14.9919H9.49192C9.18251 15.0119 9.01283 15.1815 8.99287 15.491C9.01283 15.8004 9.18251 15.9701 9.49192 15.99H10.8294C11.2286 15.99 11.558 15.8503 11.8275 15.5808C12.0969 15.3113 12.2367 14.9819 12.2367 14.5827C12.2167 13.9838 11.9373 13.5546 11.3983 13.3051L10.2405 12.776C10.0708 12.6962 9.99096 12.5664 9.99096 12.3968C10.0109 12.1472 10.1507 12.0075 10.4002 11.9875H11.4881C11.7975 11.9676 11.9672 11.7979 11.9872 11.4885C11.9672 11.179 11.7975 11.0094 11.4881 10.9894H10.4002ZM6.2481 10.9894C5.89876 10.9894 5.59934 11.1192 5.36977 11.3687C5.12025 11.5983 4.99049 11.8877 4.99049 12.247V14.7424C4.99049 15.0917 5.11027 15.3911 5.36977 15.6207C5.59934 15.8702 5.88878 16 6.2481 16H6.74715C7.09648 16 7.39591 15.8702 7.62547 15.6207C7.87499 15.3911 8.00475 15.1017 8.00475 14.7424V14.4928C7.98479 14.1834 7.81511 14.0137 7.5057 13.9938C7.19629 14.0137 7.02662 14.1834 7.00665 14.4928V14.7424C6.98669 14.8921 6.90684 14.9719 6.75713 14.9919H6.25808C6.10837 14.9719 6.02852 14.8921 6.00856 14.7424V12.247C6.02852 12.0973 6.10837 12.0175 6.25808 11.9975H6.75713C6.90684 12.0175 6.98669 12.0973 7.00665 12.247V12.4966C7.02662 12.806 7.19629 12.9757 7.5057 12.9956C7.81511 12.9757 7.98479 12.806 8.00475 12.4966V12.247C8.00475 11.8977 7.88497 11.5983 7.62547 11.3687C7.39591 11.1192 7.10646 10.9894 6.74715 10.9894H6.2481ZM10.9891 5.00062H7.49572C7.18631 4.98066 7.01663 4.81098 6.99667 4.50156V1.03805L7.21625 1.16781L10.8393 4.79102L10.999 5.0106L10.9891 5.00062ZM2.00618 14.9819C1.71673 14.9819 1.47719 14.8921 1.28755 14.7024C1.09791 14.5128 1.00808 14.2732 1.00808 13.9838V2.00624C1.00808 1.71678 1.09791 1.47723 1.28755 1.28759C1.47719 1.09794 1.71673 1.00811 2.00618 1.00811H5.99857V4.50156C6.01853 4.92077 6.16825 5.27012 6.43774 5.55958C6.72719 5.82907 7.0865 5.97879 7.49572 5.99875H10.9891V8.99314H11.9872V5.1204C11.9872 4.70119 11.8374 4.35184 11.548 4.06238L7.9249 0.439177C7.63545 0.149719 7.27614 0 6.86692 0H1.9962C1.43726 0.0199626 0.968159 0.219588 0.588882 0.588896C0.209605 0.958203 0.019962 1.42732 0 1.99626V13.9738C0.019962 14.5328 0.219586 15.0019 0.588882 15.3812C0.958178 15.7604 1.42728 15.9501 1.9962 15.9701H2.99429V14.9719H1.9962L2.00618 14.9819Z",fill:N(e)(t.progress)},null,8,eh)]),th]))}}),rh={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},sh=["fill"],ih=ee({__name:"FileExcel",props:{progress:{}},setup(n){const{color:e}=_e();return(t,r)=>(E(),R("svg",rh,[b("path",{d:"M6.64717 7.71518L7.98634 9.62399L9.32553 7.71518C9.51541 7.48532 9.74527 7.44535 10.0151 7.59525C10.245 7.78513 10.2849 8.01499 10.145 8.28482L8.61596 10.5034L10.145 12.722C10.2949 12.9919 10.245 13.2217 10.0151 13.4116C9.74527 13.5615 9.51541 13.5116 9.32553 13.2817L7.98634 11.3729L6.64717 13.2817C6.45728 13.5116 6.22742 13.5515 5.95758 13.4116C5.72772 13.2217 5.68775 12.9919 5.82766 12.722L7.38671 10.5034L5.82766 8.28482C5.67775 8.01499 5.72772 7.78513 5.95758 7.59525C6.22742 7.44535 6.45728 7.49532 6.64717 7.71518ZM3.98879 0H8.86581C9.28555 0 9.63534 0.149906 9.92516 0.439725L13.553 4.06746C13.8428 4.35728 13.9927 4.71705 13.9927 5.1268V14.0012C13.9727 14.5609 13.7728 15.0306 13.403 15.4104C13.0233 15.7901 12.5636 15.98 11.9939 16H3.99878C3.43912 15.98 2.96941 15.7801 2.58964 15.4104C2.20987 15.0406 2.01999 14.5709 2 14.0012V1.99875C2.01999 1.4391 2.21987 0.969394 2.58964 0.589631C2.95941 0.209869 3.42913 0.0199875 3.99878 0H3.98879ZM9.48543 4.99688H12.9833L12.8234 4.77701L9.19561 1.14928L8.97574 1.01936V4.4872C8.99573 4.797 9.16563 4.9669 9.47544 4.98688L9.48543 4.99688ZM11.9839 14.9906C12.2737 14.9906 12.5136 14.9007 12.7035 14.7108C12.8934 14.5209 12.9833 14.2811 12.9833 13.9913V5.99625H9.48543C9.06569 5.97626 8.7159 5.82636 8.42608 5.55653C8.15624 5.26671 8.00633 4.90693 7.98634 4.49719V0.999375H3.98879C3.69896 0.999375 3.45911 1.08932 3.26923 1.2792C3.07934 1.46908 2.9894 1.70893 2.9894 1.99875V13.9913C2.9894 14.2811 3.07934 14.5209 3.26923 14.7108C3.45911 14.9007 3.69896 14.9906 3.98879 14.9906H11.9839Z",fill:N(e)(t.progress)},null,8,sh)]))}}),oh={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},ah=["fill"],Da=ee({__name:"FileGeneric",props:{progress:{}},setup(n){const{color:e}=_e();return(t,r)=>(E(),R("svg",oh,[b("path",{d:"M2.01 2.00874V14.0012C2.02998 14.5609 2.22986 15.0306 2.59963 15.4104C2.97939 15.7901 3.43909 15.98 4.00873 16H12.0037C12.5633 15.98 13.0331 15.7801 13.4128 15.4104C13.7926 15.0306 13.9825 14.5709 14.0024 14.0012V5.1268C14.0024 4.70706 13.8525 4.35728 13.5627 4.06746L9.93501 0.439725C9.64519 0.149906 9.28542 0 8.87568 0H3.99874C3.43909 0.0199875 2.96939 0.219862 2.58963 0.589631C2.20986 0.969394 2.01999 1.42911 2 1.99875L2.01 2.00874ZM13.0031 5.00687H9.50527C9.19547 4.98688 9.02557 4.81699 9.00558 4.50718V1.03935L9.22545 1.16927L12.8532 4.797L13.0131 5.01686L13.0031 5.00687ZM13.0031 14.0012C13.0031 14.2911 12.9131 14.5309 12.7232 14.7208C12.5334 14.9107 12.2935 15.0006 12.0037 15.0006H4.00873C3.71891 15.0006 3.47906 14.9107 3.28918 14.7208C3.0993 14.5309 3.00936 14.2911 3.00936 14.0012V2.00874C3.00936 1.71893 3.0993 1.47908 3.28918 1.28919C3.47906 1.09931 3.71891 1.00937 4.00873 1.00937H8.00621V4.50718C8.0262 4.92692 8.17611 5.2767 8.44594 5.56652C8.73576 5.83635 9.09553 5.98626 9.50527 6.00625H13.0031V14.0012Z",fill:N(e)(t.progress)},null,8,ah)]))}}),lh={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},ch=["fill"],uh=ee({__name:"FileImage",props:{progress:{}},setup(n){const{color:e}=_e();return(t,r)=>(E(),R("svg",lh,[b("path",{d:"M8.88566 8.50469C8.61583 8.50469 8.40597 8.61462 8.25606 8.84447L7.22671 10.3735L6.97686 10.0637C6.82696 9.85384 6.63708 9.75391 6.38723 9.75391C6.1174 9.75391 5.90754 9.86384 5.75763 10.0937L4.12866 12.6221C4.04871 12.772 3.99874 12.9319 3.99874 13.1218C3.99874 13.3716 4.07869 13.5815 4.24858 13.7514C4.41848 13.9213 4.62835 14.0013 4.87819 14.0013H11.1243C11.3741 14.0013 11.584 13.9213 11.7539 13.7514C11.9237 13.5815 12.0037 13.3716 12.0037 13.1218C12.0037 12.9319 11.9637 12.782 11.8738 12.6521L9.49528 8.84447C9.34537 8.61462 9.1455 8.50469 8.86567 8.50469H8.88566ZM7.66643 11.5328L8.88566 9.72392L10.9144 13.0019H5.10804L6.41722 10.9432L6.85694 11.5728C6.95688 11.7027 7.09679 11.7626 7.26668 11.7626C7.45656 11.7626 7.58648 11.6927 7.67642 11.5428L7.66643 11.5328ZM4.25858 8.005C4.29855 8.46471 4.5484 8.71455 5.00811 8.75453C5.46782 8.71455 5.71766 8.46471 5.75763 8.005C5.71766 7.54529 5.46782 7.29544 5.00811 7.25547C4.5484 7.29544 4.29855 7.54529 4.25858 8.005ZM2.01 2.00875V14.0013C2.02998 14.5609 2.22985 15.0306 2.59962 15.4104C2.96939 15.7901 3.4391 15.98 4.00874 16H12.0037C12.5633 15.98 13.033 15.7801 13.4128 15.4104C13.7926 15.0306 13.9825 14.5709 14.0024 14.0013V5.1268C14.0024 4.70706 13.8525 4.35728 13.5627 4.06746L9.935 0.439728C9.64518 0.149909 9.28541 0 8.87567 0H3.99874C3.43909 0.0199875 2.96939 0.219863 2.58963 0.589632C2.20987 0.9594 2.01999 1.42911 2 1.99875L2.01 2.00875ZM13.0031 5.00687H9.50527C9.19547 4.98688 9.02558 4.81699 9.00559 4.50718V1.03935L9.22545 1.16927L12.8532 4.797L13.0131 5.01686L13.0031 5.00687ZM13.0031 14.0013C13.0031 14.2911 12.9131 14.5309 12.7232 14.7208C12.5334 14.9107 12.2935 15.0006 12.0037 15.0006H4.00874C3.71892 15.0006 3.47907 14.9107 3.28919 14.7208C3.09931 14.5309 3.00937 14.2911 3.00937 14.0013V2.00875C3.00937 1.71893 3.09931 1.47908 3.28919 1.2892C3.47907 1.09931 3.71892 1.00937 4.00874 1.00937H8.00622V4.50718C8.02621 4.92692 8.17611 5.2767 8.44594 5.56652C8.73576 5.83635 9.09553 5.98626 9.50527 6.00625H13.0031V14.0013Z",fill:N(e)(t.progress)},null,8,ch)]))}}),dh={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},fh={"clip-path":"url(#clip0_2956_22968)"},hh=["fill"],ph=b("defs",null,[b("clipPath",{id:"clip0_2956_22968"},[b("rect",{width:"16",height:"16",fill:"white"})])],-1),mh=ee({__name:"FilePDF",props:{progress:{}},setup(n){const{color:e}=_e();return(t,r)=>(E(),R("svg",dh,[b("g",fh,[b("path",{d:"M13 11.5V15.5C13.02 15.81 13.19 15.98 13.5 16C13.81 15.98 13.98 15.81 14 15.5V14H15C15.31 13.98 15.48 13.81 15.5 13.5C15.48 13.19 15.31 13.02 15 13H14V12H15C15.31 11.98 15.48 11.81 15.5 11.5C15.48 11.19 15.31 11.02 15 11H13.5C13.19 11.02 13.02 11.19 13 11.5ZM10.5 15H10V12H10.5C10.81 12.02 10.98 12.19 11 12.5V14.5C10.98 14.81 10.81 14.98 10.5 15ZM9.5 11C9.19 11.02 9.02 11.19 9 11.5V15.5C9.02 15.81 9.19 15.98 9.5 16H10.5C10.92 15.98 11.27 15.83 11.56 15.56C11.83 15.27 11.98 14.91 12 14.5V12.5C11.98 12.08 11.83 11.73 11.56 11.44C11.27 11.17 10.91 11.02 10.5 11H9.5ZM6.5 13.5H6V12H6.5C6.96 12.04 7.21 12.29 7.25 12.75C7.21 13.21 6.96 13.46 6.5 13.5ZM5.5 11C5.19 11.02 5.02 11.19 5 11.5V15.5C5.02 15.81 5.19 15.98 5.5 16C5.81 15.98 5.98 15.81 6 15.5V14.5H6.5C7 14.48 7.42 14.31 7.75 14C8.06 13.67 8.23 13.25 8.25 12.75C8.23 12.25 8.06 11.83 7.75 11.5C7.42 11.19 7 11.02 6.5 11H5.5ZM11 5H7.5C7.19 4.98 7.02 4.81 7 4.5V1.03L7.22 1.16L10.85 4.79L11.01 5.01L11 5ZM2 15.01C1.71 15.01 1.47 14.92 1.28 14.73C1.09 14.54 1 14.3 1 14.01V2C1 1.71 1.09 1.47 1.28 1.28C1.47 1.09 1.71 1 2 1H6V4.5C6.02 4.92 6.17 5.27 6.44 5.56C6.73 5.83 7.09 5.98 7.5 6H11V9H12V5.12C12 4.7 11.85 4.35 11.56 4.06L7.94 0.44C7.65 0.15 7.29 0 6.88 0H2C1.44 0.02 0.97 0.22 0.59 0.59C0.21 0.96 0.02 1.44 0 2V14C0.02 14.56 0.22 15.03 0.59 15.41C0.96 15.79 1.43 15.98 2 16H3V15H2V15.01Z",fill:N(e)(t.progress)},null,8,hh)]),ph]))}}),gh={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},yh=["fill"],bh=ee({__name:"FilePowerPoint",props:{progress:{}},setup(n){const{color:e}=_e();return(t,r)=>(E(),R("svg",gh,[b("path",{d:"M8.23619 10.9931C8.58598 10.9931 8.8858 10.8732 9.11566 10.6134C9.36551 10.3835 9.49543 10.0937 9.49543 9.73392C9.49543 9.37414 9.36551 9.08432 9.11566 8.85447C8.8858 8.60462 8.59597 8.4747 8.23619 8.4747H6.48726V10.9731H8.23619V10.9931ZM5.98757 7.49531H8.23619C8.8858 7.5153 9.41547 7.73516 9.82522 8.1549C10.245 8.57464 10.4648 9.10431 10.4848 9.74391C10.4648 10.3935 10.245 10.9232 9.82522 11.3329C9.40548 11.7527 8.8758 11.9725 8.23619 11.9925H6.48726V13.4916C6.46727 13.8014 6.29738 13.9713 5.98757 13.9913C5.67776 13.9713 5.50786 13.8014 5.48787 13.4916V7.995C5.50786 7.6852 5.67776 7.5153 5.98757 7.49531ZM3.98879 0H8.86581C9.28555 0 9.63534 0.149907 9.92516 0.439726L13.553 4.06746C13.8428 4.35728 13.9927 4.71705 13.9927 5.1268V14.0013C13.9727 14.5609 13.7728 15.0306 13.403 15.4104C13.0233 15.7901 12.5636 15.98 11.9939 16H3.99878C3.43912 15.98 2.96941 15.7801 2.58964 15.4104C2.20987 15.0406 2.01999 14.5709 2 14.0013V2.00875C2.01999 1.4491 2.21987 0.979388 2.58964 0.599626C2.95941 0.219863 3.42913 0.0299815 3.99878 0.00999398L3.98879 0ZM9.48543 4.99688H12.9833L12.8234 4.77701L9.19561 1.14928L8.97574 1.01936V4.4872C8.99573 4.797 9.16563 4.9669 9.47544 4.98688L9.48543 4.99688ZM11.9839 14.9906C12.2737 14.9906 12.5136 14.9007 12.7035 14.7108C12.8934 14.5209 12.9833 14.2811 12.9833 13.9913V5.99625H9.48543C9.06569 5.97626 8.7159 5.82636 8.42608 5.55653C8.15624 5.26671 8.00633 4.90693 7.98635 4.49719V0.999375H3.98879C3.69896 0.999375 3.45911 1.08932 3.26923 1.2792C3.07934 1.46908 2.9894 1.70893 2.9894 1.99875V13.9913C2.9894 14.2811 3.07934 14.5209 3.26923 14.7108C3.45911 14.9007 3.69896 14.9906 3.98879 14.9906H11.9839Z",fill:N(e)(t.progress)},null,8,yh)]))}}),vh={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Ch=["fill"],kh=["fill"],wh=ee({__name:"FilePresentation",props:{progress:{}},setup(n){const{color:e}=_e();return(t,r)=>(E(),R("svg",vh,[b("path",{d:"M13.57 4.06L9.94 0.44C9.65 0.15 9.29 0 8.88 0H4C3.44 0.02 2.97 0.22 2.59 0.59C2.22 0.97 2.02 1.44 2 2V14C2.02 14.56 2.22 15.03 2.59 15.41C2.97 15.79 3.43 15.98 4 16H12C12.56 15.98 13.03 15.78 13.41 15.41C13.79 15.03 13.98 14.57 14 14V5.13C14 4.71 13.85 4.36 13.56 4.07L13.57 4.06ZM13.01 14C13.01 14.29 12.92 14.53 12.73 14.72C12.54 14.91 12.3 15 12.01 15H4C3.71 15 3.47 14.91 3.28 14.72C3.09 14.53 3 14.29 3 14V2C3 1.71 3.09 1.47 3.28 1.28C3.47 1.09 3.71 1 4 1H8V4.5C8.02 4.92 8.17 5.27 8.44 5.56C8.73 5.83 9.09 5.98 9.5 6H13V14H13.01ZM9.51 5C9.2 4.98 9.03 4.81 9.01 4.5V1.03L9.23 1.15L12.86 4.78L13.02 5H9.51Z",fill:N(e)(t.progress)},null,8,Ch),b("path",{d:"M4.5 7.75C4.22 7.75 4 7.97 4 8.25C4 8.53 4.22 8.75 4.5 8.75H4.75977V12.25C4.75977 12.53 4.97977 12.75 5.25977 12.75H6.87977L6.22977 13.4C6.02977 13.6 6.02977 13.91 6.22977 14.11C6.42977 14.31 6.73977 14.31 6.93977 14.11L7.73977 13.31L8.57977 14.15C8.67977 14.25 8.80977 14.3 8.92977 14.3C9.04977 14.3 9.18977 14.25 9.27977 14.15C9.47977 13.95 9.47977 13.64 9.27977 13.44L8.59977 12.75H10.2598C10.5398 12.75 10.7598 12.53 10.7598 12.25V8.75H11C11.28 8.75 11.5 8.53 11.5 8.25C11.5 7.97 11.28 7.75 11 7.75H4.5ZM9.75977 8.75V11.75H5.75977V8.75H9.75977Z",fill:N(e)(t.progress)},null,8,kh)]))}}),Sh={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Eh=["fill"],xh=ee({__name:"FileSound",props:{progress:{}},setup(n){const{color:e}=_e();return(t,r)=>(E(),R("svg",Sh,[b("path",{d:"M6.00748 13.2517C6.35726 13.1918 6.52715 13.0618 6.50716 12.872C6.52715 12.6821 6.35726 12.5622 6.00748 12.4922C5.6577 12.5522 5.4878 12.6821 5.50779 12.872C5.4878 13.0618 5.6577 13.1818 6.00748 13.2517ZM10.005 12.2523C10.3547 12.1924 10.5246 12.0625 10.5046 11.8726C10.5246 11.6827 10.3547 11.5628 10.005 11.4928C9.65518 11.5528 9.48529 11.6827 9.50527 11.8726C9.48529 12.0625 9.65518 12.1824 10.005 12.2523ZM11.504 7.25547V11.8826C11.484 12.2823 11.3341 12.6021 11.0643 12.852C10.7745 13.1218 10.4147 13.2617 10.005 13.2617C9.59522 13.2617 9.23545 13.1218 8.94563 12.852C8.6758 12.6021 8.52589 12.2823 8.5059 11.8826C8.52589 11.4828 8.6758 11.163 8.94563 10.9132C9.23545 10.6433 9.59522 10.5034 10.005 10.5034C10.1749 10.5034 10.3348 10.5334 10.5046 10.5934V7.96502L7.50653 9.09432V12.872C7.48655 13.2717 7.33664 13.5915 7.06681 13.8414C6.77699 14.1112 6.41722 14.2511 6.00748 14.2511C5.59774 14.2511 5.23796 14.1112 4.94815 13.8414C4.67832 13.5915 4.52841 13.2717 4.50842 12.872C4.52841 12.4722 4.67832 12.1524 4.94815 11.9026C5.23796 11.6327 5.59774 11.4928 6.00748 11.4928C6.17737 11.4928 6.33727 11.5228 6.50716 11.5828V8.74454C6.52715 8.51468 6.62708 8.35478 6.81696 8.27483L10.8144 6.77577C10.9843 6.7158 11.1342 6.73579 11.2842 6.83573C11.4341 6.93567 11.504 7.07558 11.504 7.24547V7.25547ZM2.01 2.00874V14.0013C2.02998 14.5609 2.22986 15.0306 2.59963 15.4104C2.97939 15.7901 3.4391 15.98 4.00874 16H12.0037C12.5633 15.98 13.0331 15.7801 13.4128 15.4104C13.7926 15.0306 13.9825 14.5709 14.0024 14.0013V5.1268C14.0024 4.70706 13.8525 4.35728 13.5627 4.06746L9.935 0.439725C9.64518 0.149906 9.28541 0 8.87567 0H3.99874C3.43909 0.0199875 2.96939 0.219863 2.58963 0.589632C2.20987 0.969394 2.01999 1.42911 2 1.99875L2.01 2.00874ZM13.0031 5.00687H9.50527C9.19547 4.98688 9.02558 4.81699 9.00559 4.50718V1.03935L9.22545 1.16927L12.8532 4.797L13.0131 5.01687L13.0031 5.00687ZM13.0031 14.0013C13.0031 14.2911 12.9131 14.5309 12.7232 14.7208C12.5334 14.9107 12.2935 15.0006 12.0037 15.0006H4.00874C3.71892 15.0006 3.47907 14.9107 3.28919 14.7208C3.09931 14.5309 3.00937 14.2911 3.00937 14.0013V1.99875C3.00937 1.70893 3.09931 1.46908 3.28919 1.2792C3.47907 1.08932 3.71892 0.999375 4.00874 0.999375H8.00622V4.49719C8.02621 4.91693 8.17611 5.26671 8.44594 5.55653C8.73576 5.82636 9.09553 5.97627 9.50527 5.99625H13.0031V13.9913V14.0013Z",fill:N(e)(t.progress)},null,8,Eh)]))}}),Mh={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Th=["fill"],Oh=ee({__name:"FileSpreasheet",props:{progress:{}},setup(n){const{color:e}=_e();return(t,r)=>(E(),R("svg",Mh,[b("path",{d:"M10.9845 7.995H4.98818V8.99438H10.9845V7.995ZM11.9839 11.4928V12.9919C11.9839 13.2817 11.894 13.5216 11.7041 13.7114C11.5142 13.9013 11.2743 13.9913 10.9845 13.9913H4.98818C4.69835 13.9913 4.4585 13.9013 4.26862 13.7114C4.07873 13.5216 3.98878 13.2817 3.98878 12.9919V7.995C3.98878 7.70519 4.07873 7.46533 4.26862 7.27545C4.4585 7.08557 4.69835 6.99563 4.98818 6.99563H10.9845C11.2743 6.99563 11.5142 7.08557 11.7041 7.27545C11.894 7.46533 11.9839 7.70519 11.9839 7.995V11.4928ZM8.48604 10.9931H10.9845V9.99376H8.48604V10.9931ZM8.48604 12.9919H10.9845V11.9925H8.48604V12.9919ZM4.98818 10.9931H7.48665V9.99376H4.98818V10.9931ZM4.98818 11.9925V12.9919H7.48665V11.9925H4.98818ZM3.98878 0H8.86581C9.28555 0 9.63534 0.149906 9.92517 0.439725L13.553 4.06746C13.8428 4.35728 13.9927 4.71705 13.9927 5.1268V14.0013C13.9727 14.5609 13.7728 15.0306 13.403 15.4104C13.0233 15.7901 12.5636 15.98 11.9939 16H3.99878C3.43912 15.98 2.96941 15.7801 2.58964 15.4104C2.20987 15.0406 2.01999 14.5709 2 14.0013V1.99875C2.01999 1.4391 2.21987 0.969394 2.58964 0.589632C2.95941 0.209869 3.42913 0.0199875 3.99878 0H3.98878ZM9.48543 4.99688H12.9833L12.8234 4.77702L9.19561 1.14928L8.97574 1.01936V4.4872C8.99573 4.797 9.16563 4.9669 9.47544 4.98688L9.48543 4.99688ZM11.9839 14.9906C12.2737 14.9906 12.5136 14.9007 12.7035 14.7108C12.8934 14.5209 12.9833 14.2811 12.9833 13.9913V5.99625H9.48543C9.06569 5.97627 8.7159 5.82636 8.42608 5.55653C8.15624 5.26671 8.00633 4.90693 7.98635 4.49719V0.999375H3.98878C3.69896 0.999375 3.45911 1.08932 3.26923 1.2792C3.07934 1.46908 2.98939 1.70893 2.98939 1.99875V13.9913C2.98939 14.2811 3.07934 14.5209 3.26923 14.7108C3.45911 14.9007 3.69896 14.9906 3.98878 14.9906H11.9839Z",fill:N(e)(t.progress)},null,8,Th)]))}}),Ah={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Nh=["fill"],Ih=ee({__name:"FileText",props:{progress:{}},setup(n){const{color:e}=_e();return(t,r)=>(E(),R("svg",Ah,[b("path",{d:"M5.4978 11.9925H10.4946C10.8045 12.0125 10.9743 12.1824 10.9943 12.4922C10.9743 12.802 10.8045 12.9719 10.4946 12.9919H5.4978C5.18799 12.9719 5.0181 12.802 4.99811 12.4922C5.0181 12.1824 5.18799 12.0125 5.4978 11.9925ZM5.4978 9.99375H10.4946C10.8045 10.0137 10.9743 10.1836 10.9943 10.4934C10.9743 10.8032 10.8045 10.9731 10.4946 10.9931H5.4978C5.18799 10.9731 5.0181 10.8032 4.99811 10.4934C5.0181 10.1836 5.18799 10.0137 5.4978 9.99375ZM5.4978 7.995H10.4946C10.8045 8.01499 10.9743 8.18488 10.9943 8.49469C10.9743 8.8045 10.8045 8.97439 10.4946 8.99438H5.4978C5.18799 8.97439 5.0181 8.8045 4.99811 8.49469C5.0181 8.18488 5.18799 8.01499 5.4978 7.995ZM3.99874 0H8.87567C9.2954 0 9.64518 0.149909 9.935 0.439728L13.5627 4.06746C13.8525 4.35728 14.0024 4.71705 14.0024 5.1268V14.0013C13.9825 14.5609 13.7826 15.0306 13.4128 15.4104C13.033 15.7901 12.5733 15.98 12.0037 16H3.99874C3.43909 15.98 2.96939 15.7801 2.58963 15.4104C2.20987 15.0406 2.01999 14.5709 2 14.0013V2.00875C2.01999 1.4491 2.21986 0.97939 2.58963 0.599627C2.9594 0.219865 3.4291 0.0299834 3.99874 0.00999589V0ZM9.49528 4.99688H12.9931L12.8332 4.77702L9.20546 1.14928L8.9856 1.01936V4.4872C9.00559 4.797 9.17548 4.9669 9.48528 4.98688L9.49528 4.99688ZM11.9937 14.9906C12.2835 14.9906 12.5234 14.9007 12.7133 14.7108C12.9031 14.5209 12.9931 14.2811 12.9931 13.9913V5.99625H9.49528C9.07554 5.97626 8.72576 5.82636 8.43595 5.55653C8.16612 5.26671 8.01621 4.90693 7.99622 4.49719V0.999375H3.99874C3.70892 0.999375 3.46907 1.08932 3.27919 1.2792C3.08931 1.46908 2.99937 1.70893 2.99937 1.99875V13.9913C2.99937 14.2811 3.08931 14.5209 3.27919 14.7108C3.46907 14.9007 3.70892 14.9906 3.99874 14.9906H11.9937Z",fill:N(e)(t.progress)},null,8,Nh)]))}}),Ph={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Dh=["fill"],Lh=ee({__name:"FileVideo",props:{progress:{}},setup(n){const{color:e}=_e();return(t,r)=>(E(),R("svg",Ph,[b("path",{d:"M10.979 11.4956V9.49813L9.48087 10.0874V10.8964L10.979 11.4856V11.4956ZM9.48087 11.995C9.48087 12.2846 9.39098 12.5243 9.20122 12.7141C9.01145 12.9039 8.77174 12.9938 8.48209 12.9938H4.98636C4.69671 12.9938 4.45701 12.9039 4.26724 12.7141C4.07747 12.5243 3.98758 12.2846 3.98758 11.995V8.99875C3.98758 8.70911 4.07747 8.46941 4.26724 8.27965C4.45701 8.08989 4.69671 8 4.98636 8H8.48209C8.77174 8 9.01145 8.08989 9.20122 8.27965C9.39098 8.46941 9.48087 8.70911 9.48087 8.99875L11.2887 8.27965C11.4585 8.21973 11.6083 8.2397 11.7581 8.33958C11.9079 8.43945 11.9778 8.57928 11.9778 8.74906V12.2447C11.9778 12.4145 11.9079 12.5443 11.7581 12.6542C11.6083 12.7541 11.4585 12.784 11.2887 12.7141L9.48087 11.995ZM8.48209 8.99875H4.98636V11.995H8.48209V8.99875ZM3.98758 0.00998751H8.86162C9.28111 0.00998751 9.63068 0.1598 9.92032 0.449438L13.5459 4.07491C13.8356 4.36454 13.9854 4.72409 13.9854 5.13358V14.0025C13.9654 14.5618 13.7656 15.0312 13.3961 15.4107C13.0166 15.7903 12.5571 15.98 11.9878 16H3.99756C3.43824 15.98 2.96881 15.7803 2.58928 15.4107C2.20974 15.0312 2.01998 14.5718 2 14.0025V1.9975C2.01998 1.4382 2.21973 0.968789 2.58928 0.589263C2.96881 0.209738 3.42826 0.019975 3.99756 0L3.98758 0.00998751ZM9.48087 5.00375H12.9766L12.8168 4.78402L9.19122 1.15855L8.97149 1.02871V4.49438C8.99146 4.80399 9.16125 4.97378 9.47088 4.99376L9.48087 5.00375ZM11.9778 14.9913C12.2675 14.9913 12.5072 14.9014 12.6969 14.7116C12.8867 14.5218 12.9766 14.2821 12.9766 13.9925V6.0025H9.48087C9.06139 5.98252 8.7118 5.83271 8.42215 5.56305C8.15248 5.27341 8.00268 4.91386 7.9827 4.50437V1.00874H3.98758C3.69793 1.00874 3.45822 1.09863 3.26846 1.28839C3.07869 1.47815 2.9888 1.71785 2.9888 2.00749V13.9925C2.9888 14.2821 3.07869 14.5218 3.26846 14.7116C3.45822 14.9014 3.69793 14.9913 3.98758 14.9913H11.9778Z",fill:N(e)(t.progress)},null,8,Dh)]))}}),_h={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Rh=["fill"],Fh=ee({__name:"FileWord",props:{progress:{}},setup(n){const{color:e}=_e();return(t,r)=>(E(),R("svg",_h,[b("path",{d:"M5.20804 7.34541L6.45728 11.253L7.51663 7.37539C7.57659 7.14553 7.7365 7.02561 7.98634 6.99563C8.23619 7.01562 8.3961 7.14553 8.45606 7.37539L9.51541 11.253L10.7646 7.34541C10.8946 7.07558 11.0945 6.96564 11.3943 7.0356C11.6641 7.16552 11.774 7.3654 11.7041 7.66521L9.95514 13.1618C9.87519 13.3916 9.71529 13.5016 9.48543 13.5016C9.23558 13.4816 9.07568 13.3517 9.01572 13.1218L7.98634 9.40412L6.95697 13.1218C6.89701 13.3517 6.73711 13.4716 6.48726 13.5016C6.2574 13.5016 6.0975 13.3916 6.01754 13.1618L4.26861 7.66521C4.20865 7.3554 4.30859 7.14553 4.57843 7.0356C4.86825 6.97564 5.07812 7.07558 5.20804 7.34541ZM3.98878 0H8.8658C9.28555 0 9.63534 0.149905 9.92516 0.439724L13.5529 4.06746C13.8428 4.35728 13.9927 4.71705 13.9927 5.12679V14.0012C13.9727 14.5609 13.7728 15.0306 13.403 15.4104C13.0233 15.7901 12.5636 15.98 11.9939 16H3.99878C3.43912 15.98 2.9694 15.7801 2.58964 15.4104C2.20987 15.0406 2.01999 14.5709 2 14.0012V2.00874C2.01999 1.44909 2.21986 0.979387 2.58964 0.599624C2.95941 0.219861 3.42913 0.0299796 3.99878 0.00999208L3.98878 0ZM9.48543 4.99688H12.9833L12.8234 4.77701L9.19561 1.14928L8.97574 1.01936V4.48719C8.99573 4.797 9.16562 4.96689 9.47543 4.98688L9.48543 4.99688ZM11.9839 14.9906C12.2737 14.9906 12.5136 14.9007 12.7035 14.7108C12.8934 14.5209 12.9833 14.2811 12.9833 13.9913V5.99625H9.48543C9.06569 5.97627 8.7159 5.82636 8.42608 5.55653C8.15624 5.26671 8.00633 4.90693 7.98634 4.49719V0.999376H3.98878C3.69896 0.999376 3.45911 1.08932 3.26922 1.2792C3.07934 1.46908 2.98939 1.70893 2.98939 1.99875V13.9913C2.98939 14.2811 3.07934 14.5209 3.26922 14.7108C3.45911 14.9007 3.69896 14.9906 3.98878 14.9906H11.9839Z",fill:N(e)(t.progress)},null,8,Rh)]))}});function _e(){const n=[{extension:["html","htm","css","js","ts","json","xml","py","java","c","cs","rb","php"],icon:Gf},{extension:["zip","rar","7z","tar","tar.gz"],icon:Yf},{extension:["csv","tsv"],icon:nh},{extension:["xls","xlsx"],icon:ih},{extension:["jpg","jpeg","png","gif","svg","webp"],icon:uh},{extension:["pdf"],icon:mh},{extension:["ppt","pptx","pot","potx"],icon:bh},{extension:["odp"],icon:wh},{extension:["mp3","wav","ogg","m4a"],icon:xh},{extension:["ods"],icon:Oh},{extension:["txt","odt","rtf","md"],icon:Ih},{extension:["mp4","avi","mov","mkv","m4v"],icon:Lh},{extension:["doc","docx","dot","dotx"],icon:Fh}],e=ce(()=>r=>{const i=r.split(".").pop();if(!i)return Da;const o=n.findIndex(a=>a.extension.includes(i));return o!==-1?n[o].icon:Da}),t=ce(()=>r=>r&&r<100?Pa.TextSecondary:Pa.TextPrimary);return{findIconByName:e,color:t}}function $r(){const n=kn(),e=zo(),{isUS:t,startAustralianMobileNumber:r}=Wo(),s=re();re();const i=re(0),{width:o}=yf(s),a=re(),l=ce(()=>{const w=n.query.number;return w?String(w):null}),c=ce(()=>n.params.id),u=ce(()=>e.getImportedContactsById(parseInt(c.value,10))),f=re("<p></p>"),d=re(!1);function h(){const w=String(n.params.id);w&&(a.value=e.directory(w))}const p=ce(()=>t.value?e.myNumbers:e.myNumbers.filter(w=>w.numbersUnmasked.startsWith(r))),m=ce(()=>{h();const w=String(n.name);if(w!==W.Directory&&w!==W.FavoriteDirectory&&!a.value)return[];const $=e.teams.find(B=>{var x;return B.userId.toString()===((x=a.value)==null?void 0:x.userId.toString())});return($==null?void 0:$.assignedNumbers.filter(B=>t.value?!0:B.number.startsWith(r)).map(B=>B.number))??[]});function g(w,$){const B=document.querySelector(".base-editor-container"),x=w.clientHeight,j=B.clientHeight+72,T=x-j-60;$.style.gridTemplateRows=`60px ${T}px ${j}px`}function y(){const w=new ResizeObserver(function(){const B=document.querySelector("#chat-container"),x=document.querySelector(".panel");g(B,x)}),$=document.querySelector(".base-editor-container");if($)w.observe($),w.observe(document.body);else{y();return}}function v(){const w=new ResizeObserver(function(){const B=document.querySelector("#main-panel"),x=document.querySelector(".sms-main");g(B,x)}),$=document.querySelector(".base-editor-container");if($)w.observe($),w.observe(document.body);else{v();return}}return Sr(o,w=>i.value=w),{panelRef:s,panelWidth:i,routeId:c,contact:u,loadingMessages:d,editor:f,numbersFrom:p,numbersTo:m,number:l,resize:y,resizeSms:v}}const Bh={lessThanXSeconds:{one:"menos de un segundo",other:"menos de {{count}} segundos"},xSeconds:{one:"1 segundo",other:"{{count}} segundos"},halfAMinute:"medio minuto",lessThanXMinutes:{one:"menos de un minuto",other:"menos de {{count}} minutos"},xMinutes:{one:"1 minuto",other:"{{count}} minutos"},aboutXHours:{one:"alrededor de 1 hora",other:"alrededor de {{count}} horas"},xHours:{one:"1 hora",other:"{{count}} horas"},xDays:{one:"1 día",other:"{{count}} días"},aboutXWeeks:{one:"alrededor de 1 semana",other:"alrededor de {{count}} semanas"},xWeeks:{one:"1 semana",other:"{{count}} semanas"},aboutXMonths:{one:"alrededor de 1 mes",other:"alrededor de {{count}} meses"},xMonths:{one:"1 mes",other:"{{count}} meses"},aboutXYears:{one:"alrededor de 1 año",other:"alrededor de {{count}} años"},xYears:{one:"1 año",other:"{{count}} años"},overXYears:{one:"más de 1 año",other:"más de {{count}} años"},almostXYears:{one:"casi 1 año",other:"casi {{count}} años"}},$h=(n,e,t)=>{let r;const s=Bh[n];return typeof s=="string"?r=s:e===1?r=s.one:r=s.other.replace("{{count}}",e.toString()),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"en "+r:"hace "+r:r},Hh={full:"EEEE, d 'de' MMMM 'de' y",long:"d 'de' MMMM 'de' y",medium:"d MMM y",short:"dd/MM/y"},Vh={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},zh={full:"{{date}} 'a las' {{time}}",long:"{{date}} 'a las' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},jh={date:$n({formats:Hh,defaultWidth:"full"}),time:$n({formats:Vh,defaultWidth:"full"}),dateTime:$n({formats:zh,defaultWidth:"full"})},Wh={lastWeek:"'el' eeee 'pasado a la' p",yesterday:"'ayer a la' p",today:"'hoy a la' p",tomorrow:"'mañana a la' p",nextWeek:"eeee 'a la' p",other:"P"},Kh={lastWeek:"'el' eeee 'pasado a las' p",yesterday:"'ayer a las' p",today:"'hoy a las' p",tomorrow:"'mañana a las' p",nextWeek:"eeee 'a las' p",other:"P"},Uh=(n,e,t,r)=>e.getHours()!==1?Kh[n]:Wh[n],qh={narrow:["AC","DC"],abbreviated:["AC","DC"],wide:["antes de cristo","después de cristo"]},Gh={narrow:["1","2","3","4"],abbreviated:["T1","T2","T3","T4"],wide:["1º trimestre","2º trimestre","3º trimestre","4º trimestre"]},Jh={narrow:["e","f","m","a","m","j","j","a","s","o","n","d"],abbreviated:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"],wide:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"]},Zh={narrow:["d","l","m","m","j","v","s"],short:["do","lu","ma","mi","ju","vi","sá"],abbreviated:["dom","lun","mar","mié","jue","vie","sáb"],wide:["domingo","lunes","martes","miércoles","jueves","viernes","sábado"]},Yh={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"mañana",afternoon:"tarde",evening:"tarde",night:"noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"mañana",afternoon:"tarde",evening:"tarde",night:"noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"mañana",afternoon:"tarde",evening:"tarde",night:"noche"}},Xh={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"de la mañana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"de la mañana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"de la mañana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"}},Qh=(n,e)=>Number(n)+"º",ep={ordinalNumber:Qh,era:dt({values:qh,defaultWidth:"wide"}),quarter:dt({values:Gh,defaultWidth:"wide",argumentCallback:n=>Number(n)-1}),month:dt({values:Jh,defaultWidth:"wide"}),day:dt({values:Zh,defaultWidth:"wide"}),dayPeriod:dt({values:Yh,defaultWidth:"wide",formattingValues:Xh,defaultFormattingWidth:"wide"})},tp=/^(\d+)(º)?/i,np=/\d+/i,rp={narrow:/^(ac|dc|a|d)/i,abbreviated:/^(a\.?\s?c\.?|a\.?\s?e\.?\s?c\.?|d\.?\s?c\.?|e\.?\s?c\.?)/i,wide:/^(antes de cristo|antes de la era com[uú]n|despu[eé]s de cristo|era com[uú]n)/i},sp={any:[/^ac/i,/^dc/i],wide:[/^(antes de cristo|antes de la era com[uú]n)/i,/^(despu[eé]s de cristo|era com[uú]n)/i]},ip={narrow:/^[1234]/i,abbreviated:/^T[1234]/i,wide:/^[1234](º)? trimestre/i},op={any:[/1/i,/2/i,/3/i,/4/i]},ap={narrow:/^[efmajsond]/i,abbreviated:/^(ene|feb|mar|abr|may|jun|jul|ago|sep|oct|nov|dic)/i,wide:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i},lp={narrow:[/^e/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^en/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i]},cp={narrow:/^[dlmjvs]/i,short:/^(do|lu|ma|mi|ju|vi|s[áa])/i,abbreviated:/^(dom|lun|mar|mi[ée]|jue|vie|s[áa]b)/i,wide:/^(domingo|lunes|martes|mi[ée]rcoles|jueves|viernes|s[áa]bado)/i},up={narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^do/i,/^lu/i,/^ma/i,/^mi/i,/^ju/i,/^vi/i,/^sa/i]},dp={narrow:/^(a|p|mn|md|(de la|a las) (mañana|tarde|noche))/i,any:/^([ap]\.?\s?m\.?|medianoche|mediodia|(de la|a las) (mañana|tarde|noche))/i},fp={any:{am:/^a/i,pm:/^p/i,midnight:/^mn/i,noon:/^md/i,morning:/mañana/i,afternoon:/tarde/i,evening:/tarde/i,night:/noche/i}},hp={ordinalNumber:Rc({matchPattern:tp,parsePattern:np,valueCallback:function(n){return parseInt(n,10)}}),era:ft({matchPatterns:rp,defaultMatchWidth:"wide",parsePatterns:sp,defaultParseWidth:"any"}),quarter:ft({matchPatterns:ip,defaultMatchWidth:"wide",parsePatterns:op,defaultParseWidth:"any",valueCallback:n=>n+1}),month:ft({matchPatterns:ap,defaultMatchWidth:"wide",parsePatterns:lp,defaultParseWidth:"any"}),day:ft({matchPatterns:cp,defaultMatchWidth:"wide",parsePatterns:up,defaultParseWidth:"any"}),dayPeriod:ft({matchPatterns:dp,defaultMatchWidth:"any",parsePatterns:fp,defaultParseWidth:"any"})},pp={code:"es",formatDistance:$h,formatLong:jh,formatRelative:Uh,localize:ep,match:hp,options:{weekStartsOn:1,firstWeekContainsDate:1}},mp={lessThanXSeconds:{one:"menos de um segundo",other:"menos de {{count}} segundos"},xSeconds:{one:"1 segundo",other:"{{count}} segundos"},halfAMinute:"meio minuto",lessThanXMinutes:{one:"menos de um minuto",other:"menos de {{count}} minutos"},xMinutes:{one:"1 minuto",other:"{{count}} minutos"},aboutXHours:{one:"cerca de 1 hora",other:"cerca de {{count}} horas"},xHours:{one:"1 hora",other:"{{count}} horas"},xDays:{one:"1 dia",other:"{{count}} dias"},aboutXWeeks:{one:"cerca de 1 semana",other:"cerca de {{count}} semanas"},xWeeks:{one:"1 semana",other:"{{count}} semanas"},aboutXMonths:{one:"cerca de 1 mês",other:"cerca de {{count}} meses"},xMonths:{one:"1 mês",other:"{{count}} meses"},aboutXYears:{one:"cerca de 1 ano",other:"cerca de {{count}} anos"},xYears:{one:"1 ano",other:"{{count}} anos"},overXYears:{one:"mais de 1 ano",other:"mais de {{count}} anos"},almostXYears:{one:"quase 1 ano",other:"quase {{count}} anos"}},gp=(n,e,t)=>{let r;const s=mp[n];return typeof s=="string"?r=s:e===1?r=s.one:r=s.other.replace("{{count}}",String(e)),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"em "+r:"há "+r:r},yp={full:"EEEE, d 'de' MMMM 'de' y",long:"d 'de' MMMM 'de' y",medium:"d MMM y",short:"dd/MM/yyyy"},bp={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},vp={full:"{{date}} 'às' {{time}}",long:"{{date}} 'às' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Cp={date:$n({formats:yp,defaultWidth:"full"}),time:$n({formats:bp,defaultWidth:"full"}),dateTime:$n({formats:vp,defaultWidth:"full"})},kp={lastWeek:n=>{const e=n.getDay();return"'"+(e===0||e===6?"último":"última")+"' eeee 'às' p"},yesterday:"'ontem às' p",today:"'hoje às' p",tomorrow:"'amanhã às' p",nextWeek:"eeee 'às' p",other:"P"},wp=(n,e,t,r)=>{const s=kp[n];return typeof s=="function"?s(e):s},Sp={narrow:["AC","DC"],abbreviated:["AC","DC"],wide:["antes de cristo","depois de cristo"]},Ep={narrow:["1","2","3","4"],abbreviated:["T1","T2","T3","T4"],wide:["1º trimestre","2º trimestre","3º trimestre","4º trimestre"]},xp={narrow:["j","f","m","a","m","j","j","a","s","o","n","d"],abbreviated:["jan","fev","mar","abr","mai","jun","jul","ago","set","out","nov","dez"],wide:["janeiro","fevereiro","março","abril","maio","junho","julho","agosto","setembro","outubro","novembro","dezembro"]},Mp={narrow:["D","S","T","Q","Q","S","S"],short:["dom","seg","ter","qua","qui","sex","sab"],abbreviated:["domingo","segunda","terça","quarta","quinta","sexta","sábado"],wide:["domingo","segunda-feira","terça-feira","quarta-feira","quinta-feira","sexta-feira","sábado"]},Tp={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"manhã",afternoon:"tarde",evening:"tarde",night:"noite"},abbreviated:{am:"AM",pm:"PM",midnight:"meia-noite",noon:"meio-dia",morning:"manhã",afternoon:"tarde",evening:"tarde",night:"noite"},wide:{am:"a.m.",pm:"p.m.",midnight:"meia-noite",noon:"meio-dia",morning:"manhã",afternoon:"tarde",evening:"tarde",night:"noite"}},Op={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"da manhã",afternoon:"da tarde",evening:"da tarde",night:"da noite"},abbreviated:{am:"AM",pm:"PM",midnight:"meia-noite",noon:"meio-dia",morning:"da manhã",afternoon:"da tarde",evening:"da tarde",night:"da noite"},wide:{am:"a.m.",pm:"p.m.",midnight:"meia-noite",noon:"meio-dia",morning:"da manhã",afternoon:"da tarde",evening:"da tarde",night:"da noite"}},Ap=(n,e)=>{const t=Number(n);return(e==null?void 0:e.unit)==="week"?t+"ª":t+"º"},Np={ordinalNumber:Ap,era:dt({values:Sp,defaultWidth:"wide"}),quarter:dt({values:Ep,defaultWidth:"wide",argumentCallback:n=>n-1}),month:dt({values:xp,defaultWidth:"wide"}),day:dt({values:Mp,defaultWidth:"wide"}),dayPeriod:dt({values:Tp,defaultWidth:"wide",formattingValues:Op,defaultFormattingWidth:"wide"})},Ip=/^(\d+)[ºªo]?/i,Pp=/\d+/i,Dp={narrow:/^(ac|dc|a|d)/i,abbreviated:/^(a\.?\s?c\.?|d\.?\s?c\.?)/i,wide:/^(antes de cristo|depois de cristo)/i},Lp={any:[/^ac/i,/^dc/i],wide:[/^antes de cristo/i,/^depois de cristo/i]},_p={narrow:/^[1234]/i,abbreviated:/^T[1234]/i,wide:/^[1234](º)? trimestre/i},Rp={any:[/1/i,/2/i,/3/i,/4/i]},Fp={narrow:/^[jfmajsond]/i,abbreviated:/^(jan|fev|mar|abr|mai|jun|jul|ago|set|out|nov|dez)/i,wide:/^(janeiro|fevereiro|março|abril|maio|junho|julho|agosto|setembro|outubro|novembro|dezembro)/i},Bp={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^fev/i,/^mar/i,/^abr/i,/^mai/i,/^jun/i,/^jul/i,/^ago/i,/^set/i,/^out/i,/^nov/i,/^dez/i]},$p={narrow:/^(dom|[23456]ª?|s[aá]b)/i,short:/^(dom|[23456]ª?|s[aá]b)/i,abbreviated:/^(dom|seg|ter|qua|qui|sex|s[aá]b)/i,wide:/^(domingo|(segunda|ter[cç]a|quarta|quinta|sexta)([- ]feira)?|s[aá]bado)/i},Hp={short:[/^d/i,/^2/i,/^3/i,/^4/i,/^5/i,/^6/i,/^s[aá]/i],narrow:[/^d/i,/^2/i,/^3/i,/^4/i,/^5/i,/^6/i,/^s[aá]/i],any:[/^d/i,/^seg/i,/^t/i,/^qua/i,/^qui/i,/^sex/i,/^s[aá]b/i]},Vp={narrow:/^(a|p|mn|md|(da) (manhã|tarde|noite))/i,any:/^([ap]\.?\s?m\.?|meia[-\s]noite|meio[-\s]dia|(da) (manhã|tarde|noite))/i},zp={any:{am:/^a/i,pm:/^p/i,midnight:/^mn|^meia[-\s]noite/i,noon:/^md|^meio[-\s]dia/i,morning:/manhã/i,afternoon:/tarde/i,evening:/tarde/i,night:/noite/i}},jp={ordinalNumber:Rc({matchPattern:Ip,parsePattern:Pp,valueCallback:n=>parseInt(n,10)}),era:ft({matchPatterns:Dp,defaultMatchWidth:"wide",parsePatterns:Lp,defaultParseWidth:"any"}),quarter:ft({matchPatterns:_p,defaultMatchWidth:"wide",parsePatterns:Rp,defaultParseWidth:"any",valueCallback:n=>n+1}),month:ft({matchPatterns:Fp,defaultMatchWidth:"wide",parsePatterns:Bp,defaultParseWidth:"any"}),day:ft({matchPatterns:$p,defaultMatchWidth:"wide",parsePatterns:Hp,defaultParseWidth:"any"}),dayPeriod:ft({matchPatterns:Vp,defaultMatchWidth:"any",parsePatterns:zp,defaultParseWidth:"any"})},Wp={code:"pt-BR",formatDistance:gp,formatLong:Cp,formatRelative:wp,localize:Np,match:jp,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Kp(n){const{t:e}=Ve(),t=new Date(n),r=new Date;return r.toDateString()===t.toDateString()?e("Today"):_f(r,1).toDateString()===t.toDateString()?e("Yesterday"):Fc(t,"EEEE, MMMM do",{locale:Up()})}function Up(){const{locale:n}=bf();return n==="pt_BR"?Wp:n==="es"?pp:Rf}const qp=["datetime"],Gp=ee({__name:"BaseDayDivider",props:{dateString:{}},setup(n){return(e,t)=>(E(),R("time",{class:"day-divider",datetime:N(Fc)(new Date(e.dateString),"yyyy-MM-dd")},[b("span",null,Y(N(Kp)(e.dateString)),1)],8,qp))}}),A6=te(Gp,[["__scopeId","data-v-f1064f60"]]);var ur=(n,e=[])=>({parts:(...t)=>{if(Jp(e))return ur(n,t);throw new Error("createAnatomy().parts(...) should only be called once. Did you mean to use .extendWith(...) ?")},extendWith:(...t)=>ur(n,[...e,...t]),rename:t=>ur(t,e),keys:()=>e,build:()=>[...new Set(e)].reduce((t,r)=>Object.assign(t,{[r]:{selector:[`&[data-scope="${xn(n)}"][data-part="${xn(r)}"]`,`& [data-scope="${xn(n)}"][data-part="${xn(r)}"]`].join(", "),attrs:{"data-scope":xn(n),"data-part":xn(r)}}}),{})}),xn=n=>n.replace(/([A-Z])([A-Z])/g,"$1-$2").replace(/([a-z])([A-Z])/g,"$1-$2").replace(/[\s_]+/g,"-").toLowerCase(),Jp=n=>n.length===0,Mn=n=>n?"":void 0,yt=n=>typeof n=="object"&&(n==null?void 0:n.nodeType)===Node.ELEMENT_NODE&&typeof(n==null?void 0:n.nodeName)=="string";function mn(n,e){return!n||!e||!yt(n)||!yt(e)?!1:n===e||n.contains(e)}var Zp=n=>mn(n.currentTarget,n.target),Yp=n=>n.nodeType===Node.DOCUMENT_NODE?n:n.ownerDocument??document;function $c(n){const e={getRootNode:t=>{var r;return((r=t.getRootNode)==null?void 0:r.call(t))??document},getDoc:t=>Yp(e.getRootNode(t)),getWin:t=>e.getDoc(t).defaultView??window,getActiveElement:t=>e.getDoc(t).activeElement,isActiveElement:(t,r)=>r===e.getActiveElement(t),focus(t,r){r!=null&&(e.isActiveElement(t,r)||r.focus({preventScroll:!0}))},getById:(t,r)=>e.getRootNode(t).getElementById(r),setValue:(t,r)=>{if(t==null||r==null)return;const s=r.toString();t.value!==s&&(t.value=r.toString())}};return{...e,...n}}var Hc=n=>n.nodeType===Node.DOCUMENT_NODE,Xp=n=>n.nodeType!==void 0,Qp=n=>n&&Xp(n)&&n.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&"host"in n;function Ko(n){return Hc(n)?n:(n==null?void 0:n.ownerDocument)??document}function Uo(n){var e;return Qp(n)?Uo(n.host):Hc(n)?n.defaultView??window:yt(n)?((e=n.ownerDocument)==null?void 0:e.defaultView)??window:window}function e1(n,e){return n.find(t=>t.id===e)}function qo(n,e){const t=e1(n,e);return t?n.indexOf(t):-1}function t1(n,e,t=!0){let r=qo(n,e);return r=t?(r+1)%n.length:Math.min(r+1,n.length-1),n[r]}function n1(n,e,t=!0){let r=qo(n,e);return r===-1?t?n[n.length-1]:null:(r=t?(r-1+n.length)%n.length:Math.max(0,r-1),n[r])}var r1=n=>n.dataset.valuetext??n.textContent??"",s1=(n,e)=>n.trim().toLowerCase().startsWith(e.toLowerCase()),i1=(n,e)=>n.map((t,r)=>n[(Math.max(e,0)+r)%n.length]);function o1(n,e,t){const r=t?qo(n,t):-1;let s=t?i1(n,r):n;return e.length===1&&(s=s.filter(o=>o.id!==t)),s.find(o=>s1(r1(o),e))}function a1(n,e){const{state:t,activeId:r,key:s,timeout:i=350}=e,o=t.keysSoFar+s,l=o.length>1&&Array.from(o).every(h=>h===o[0])?o[0]:o;let c=n.slice();const u=o1(c,l,r);function f(){clearTimeout(t.timer),t.timer=-1}function d(h){t.keysSoFar=h,f(),h!==""&&(t.timer=+setTimeout(()=>{d(""),f()},i))}return d(o),u}var Vc=Object.assign(a1,{defaultOptions:{keysSoFar:"",timer:-1},isValidEvent:l1});function l1(n){return n.key.length===1&&!n.ctrlKey&&!n.metaKey}function Er(n){var e;return((e=n.composedPath)==null?void 0:e.call(n)[0])??n.target}function zc(n){if(n==null||!yt(n))return!1;try{const e=n.ownerDocument.defaultView||window;return n instanceof e.HTMLInputElement&&n.selectionStart!=null||/(textarea|select)/.test(n.localName)||n.isContentEditable}catch{return!1}}var jc=()=>typeof document<"u";function c1(){const n=navigator.userAgentData;return(n==null?void 0:n.platform)??navigator.platform}var Wc=n=>jc()&&n.test(c1()),u1=()=>jc()&&!!navigator.maxTouchPoints,d1=()=>Wc(/^Mac/)&&!u1(),f1=()=>Wc(/mac|iphone|ipad|ipod/i),h1=()=>f1()&&!d1();function p1(n,e){return Array.from((n==null?void 0:n.querySelectorAll(e))??[])}function m1(n){const e=new Set;function t(r){const s=globalThis.requestAnimationFrame(r);e.add(()=>globalThis.cancelAnimationFrame(s))}return t(()=>t(n)),function(){e.forEach(s=>s())}}function gt(n){const e=globalThis.requestAnimationFrame(n);return()=>{globalThis.cancelAnimationFrame(e)}}var g1=n=>n[0],y1=n=>n[n.length-1],b1=(n,...e)=>n.concat(e),v1=(n,e)=>n.filter(t=>t!==e),co=(n,...e)=>(typeof n=="function"?n(...e):n)??void 0,C1=n=>n,dr=(...n)=>(...e)=>{n.forEach(function(t){t==null||t(...e)})};function Kc(n,e,...t){var s;if(n in e){const i=e[n];return typeof i=="function"?i(...t):i}const r=new Error(`No matching key: ${JSON.stringify(n)} in ${JSON.stringify(Object.keys(e))}`);throw(s=Error.captureStackTrace)==null||s.call(Error,r,Kc),r}var La=n=>Array.isArray(n),k1=n=>n==null;function ci(n){if(!w1(n)||n===void 0)return n;const e=Reflect.ownKeys(n).filter(r=>typeof r=="string"),t={};for(const r of e){const s=n[r];s!==void 0&&(t[r]=ci(s))}return t}var w1=n=>n&&typeof n=="object"&&n.constructor===Object;function S1(...n){const e=n.length===1?n[0]:n[1],t=n.length===2?n[0]:!0}var uo,tn=new Map,E1=n=>n.getBoundingClientRect();function _a(n,e){const{scope:t="rect",getRect:r=E1,onChange:s}=e,i=x1({scope:t,getRect:r}),o=tn.get(n);return o?(o.callbacks.push(s),s(r(n))):(tn.set(n,{rect:{},callbacks:[s]}),tn.size===1&&(uo=requestAnimationFrame(i))),function(){const l=tn.get(n);if(!l)return;const c=l.callbacks.indexOf(s);c>-1&&l.callbacks.splice(c,1),l.callbacks.length===0&&(tn.delete(n),tn.size===0&&cancelAnimationFrame(uo))}}function x1(n){const{scope:e,getRect:t}=n,r=T1(e);return function s(){const i=[];tn.forEach((o,a)=>{const l=t(a);r(o.rect,l)||(o.rect=l,i.push(o))}),i.forEach(o=>{o.callbacks.forEach(a=>a(o.rect))}),uo=requestAnimationFrame(s)}}var Uc=(n,e)=>n.width===e.width&&n.height===e.height,qc=(n,e)=>n.top===e.top&&n.left===e.left,M1=(n,e)=>Uc(n,e)&&qc(n,e);function T1(n){return n==="size"?Uc:n==="position"?qc:M1}var Ra=(n,e,t,r)=>(n.addEventListener(e,t,r),()=>n.removeEventListener(e,t,r));function O1(n){const e=typeof n=="boolean";return{ancestorResize:e?n:n.ancestorResize??!0,ancestorScroll:e?n:n.ancestorScroll??!0,referenceResize:e?n:n.referenceResize??!0}}function A1(n,e,t,r=!1){const{ancestorScroll:s,ancestorResize:i,referenceResize:o}=O1(r),a=s||i,l=[];a&&yt(n)&&l.push(...Ff(n));function c(){let f=[_a(e,{scope:"size",onChange:t})];return o&&yt(n)&&f.push(_a(n,{onChange:t})),f.push(dr(...l.map(d=>Ra(d,"resize",t)))),()=>f.forEach(d=>d())}function u(){return dr(...l.map(f=>Ra(f,"scroll",t,{passive:!0})))}return dr(c(),u())}function Fa(n=0,e=0,t=0,r=0){if(typeof DOMRect=="function")return new DOMRect(n,e,t,r);const s={x:n,y:e,width:t,height:r,top:e,right:n+t,bottom:e+r,left:n};return{...s,toJSON:()=>s}}function N1(n){if(!n)return Fa();const{x:e,y:t,width:r,height:s}=n;return Fa(e,t,r,s)}function I1(n,e){return{contextElement:yt(n)?n:void 0,getBoundingClientRect:()=>{const t=n,r=e==null?void 0:e(t);return r||!t?N1(r):t.getBoundingClientRect()}}}var tr=n=>({variable:n,reference:`var(${n})`}),Et={arrowSize:tr("--arrow-size"),arrowSizeHalf:tr("--arrow-size-half"),arrowBg:tr("--arrow-background"),transformOrigin:tr("--transform-origin"),arrowOffset:tr("--arrow-offset")},P1=n=>({top:"bottom center","top-start":n?`${n.x}px bottom`:"left bottom","top-end":n?`${n.x}px bottom`:"right bottom",bottom:"top center","bottom-start":n?`${n.x}px top`:"top left","bottom-end":n?`${n.x}px top`:"top right",left:"right center","left-start":n?`right ${n.y}px`:"right top","left-end":n?`right ${n.y}px`:"right bottom",right:"left center","right-start":n?`left ${n.y}px`:"left top","right-end":n?`left ${n.y}px`:"left bottom"}),D1={name:"transformOrigin",fn({placement:n,elements:e,middlewareData:t}){const{arrow:r}=t,s=P1(r)[n],{floating:i}=e;return i.style.setProperty(Et.transformOrigin.variable,s),{data:{transformOrigin:s}}}},L1=n=>{if(n)return{name:"shiftArrow",fn({placement:e,middlewareData:t}){if(!t.arrow)return{};const{x:r,y:s}=t.arrow,i=e.split("-")[0];return Object.assign(n.style,{left:r!=null?`${r}px`:"",top:s!=null?`${s}px`:"",[i]:`calc(100% + ${Et.arrowOffset.reference})`}),{}}}};function _1(n){const[e,t]=n.split("-");return{side:e,align:t,hasAlign:t!=null}}function R1(n){return n.split("-")[0]}var F1={strategy:"absolute",placement:"bottom",listeners:!0,gutter:8,flip:!0,slide:!0,overlap:!1,sameWidth:!1,fitViewport:!1,overflowPadding:8,arrowPadding:4};function Ba(n,e){const t=n.devicePixelRatio||1;return Math.round(e*t)/t}function Gc(n){return co(n.boundary)}function B1(n,e){if(n)return Bf({element:n,padding:e.arrowPadding})}function $1(n,e){if(!k1(e.offset??e.gutter))return $f(({placement:t})=>{var a;const r=((n==null?void 0:n.clientHeight)||0)/2,s=((a=e.offset)==null?void 0:a.mainAxis)??e.gutter,i=typeof s=="number"?s+r:s??r,{hasAlign:o}=_1(t);return ci({crossAxis:o?e.shift:void 0,mainAxis:i,alignmentAxis:e.shift})})}function H1(n){if(n.flip)return Hf({boundary:Gc(n),padding:n.overflowPadding,fallbackPlacements:n.flip===!0?void 0:n.flip})}function V1(n){if(!(!n.slide&&!n.overlap))return Vf({boundary:Gc(n),mainAxis:n.slide,crossAxis:n.overlap,padding:n.overflowPadding})}function z1(n){return zf({padding:n.overflowPadding,apply({elements:e,rects:t,availableHeight:r,availableWidth:s}){const i=e.floating,o=Math.round(t.reference.width);s=Math.floor(s),r=Math.floor(r),i.style.setProperty("--reference-width",`${o}px`),i.style.setProperty("--available-width",`${s}px`),i.style.setProperty("--available-height",`${r}px`)}})}function j1(n,e,t={}){const r=I1(n,t.getAnchorRect);if(!e||!r)return;const s=Object.assign({},F1,t),i=e.querySelector("[data-part=arrow]"),o=[$1(i,s),H1(s),V1(s),B1(i,s),L1(i),D1,z1(s)],{placement:a,strategy:l,onComplete:c,onPositioned:u}=s,f=async()=>{if(!r||!e)return;const p=await jf(r,e,{placement:a,middleware:o,strategy:l});c==null||c(p),u==null||u({placed:!0});const m=Uo(e),g=Ba(m,p.x),y=Ba(m,p.y);e.style.setProperty("--x",`${g}px`),e.style.setProperty("--y",`${y}px`);const v=e.firstElementChild;if(v){const w=m.getComputedStyle(v).zIndex;e.style.setProperty("--z-index",w)}},d=async()=>{t.updatePosition?(await t.updatePosition({updatePosition:f}),u==null||u({placed:!0})):await f()},h=s.listeners?A1(r,e,d,s.listeners):void 0;return d(),()=>{var p;h==null||h(),u==null||u({placed:!1}),(p=s.onCleanup)==null||p.call(s)}}function $a(n,e,t={}){const{defer:r,...s}=t,i=r?gt:a=>a(),o=[];return o.push(i(()=>{const a=typeof n=="function"?n():n,l=typeof e=="function"?e():e;o.push(j1(a,l,s))})),()=>{o.forEach(a=>a==null?void 0:a())}}var W1={bottom:"rotate(45deg)",left:"rotate(135deg)",top:"rotate(225deg)",right:"rotate(315deg)"};function K1(n={}){const{placement:e,sameWidth:t,fitViewport:r,strategy:s="absolute"}=n;return{arrow:{position:"absolute",width:Et.arrowSize.reference,height:Et.arrowSize.reference,[Et.arrowSizeHalf.variable]:`calc(${Et.arrowSize.reference} / 2)`,[Et.arrowOffset.variable]:`calc(${Et.arrowSizeHalf.reference} * -1)`},arrowTip:{transform:e?W1[e.split("-")[0]]:void 0,background:Et.arrowBg.reference,top:"0",left:"0",width:"100%",height:"100%",position:"absolute",zIndex:"inherit"},floating:{position:s,isolation:"isolate",minWidth:t?void 0:"max-content",width:t?"var(--reference-width)":void 0,maxWidth:r?"var(--available-width)":void 0,maxHeight:r?"var(--available-height)":void 0,top:"0px",left:"0px",transform:e?"translate3d(var(--x), var(--y), 0)":"translate3d(0, -100vh, 0)",zIndex:"var(--z-index)"}}}var Go=n=>typeof n=="object"&&n!==null&&n.nodeType===1,Jc=n=>Go(n)&&n.tagName==="IFRAME";function U1(n){return Go(n)?n.offsetWidth>0||n.offsetHeight>0||n.getClientRects().length>0:!1}function q1(n){return parseInt(n.getAttribute("tabindex")||"0",10)<0}var Jo="input:not([type='hidden']):not([disabled]), select:not([disabled]), textarea:not([disabled]), a[href], button:not([disabled]), [tabindex], iframe, object, embed, area[href], audio[controls], video[controls], [contenteditable]:not([contenteditable='false']), details > summary:first-of-type",G1=(n,e=!1)=>{if(!n)return[];const t=Array.from(n.querySelectorAll(Jo));(e==!0||e=="if-empty"&&t.length===0)&&Go(n)&&xr(n)&&t.unshift(n);const s=t.filter(xr);return s.forEach((i,o)=>{if(Jc(i)&&i.contentDocument){const a=i.contentDocument.body;s.splice(o,1,...G1(a))}}),s};function xr(n){return!n||n.closest("[inert]")?!1:n.matches(Jo)&&U1(n)}function Zo(n,e){if(!n)return[];const t=Array.from(n.querySelectorAll(Jo)),r=t.filter(Ha);return e&&Ha(n)&&r.unshift(n),r.forEach((s,i)=>{if(Jc(s)&&s.contentDocument){const o=s.contentDocument.body,a=Zo(o);r.splice(i,1,...a)}}),!r.length&&e?t:r}function Ha(n){return n!=null&&n.tabIndex>0?!0:xr(n)&&!q1(n)}function J1(n,e){const t=Zo(n,e),r=t[0]||null,s=t[t.length-1]||null;return[r,s]}function Z1(n,e){const t=Zo(n),r=(n==null?void 0:n.ownerDocument)||document,s=e??r.activeElement;if(!s)return null;const i=t.indexOf(s);return t[i+1]||null}function Y1(n,e={}){const{triggerElement:t,onFocus:r}=e,s=(n==null?void 0:n.ownerDocument)||document,i=s.body;function o(a){if(a.key!=="Tab")return;let l=null;const[c,u]=J1(n,!0),f=!c&&!u;a.shiftKey&&(s.activeElement===c||f)?l=t:!a.shiftKey&&s.activeElement===t?l=c:!a.shiftKey&&(s.activeElement===u||f)&&(l=Z1(i,t)),l&&(a.preventDefault(),(r==null?void 0:r(l))??l.focus())}return s==null||s.addEventListener("keydown",o,!0),()=>{s==null||s.removeEventListener("keydown",o,!0)}}function N6(n,e){const{defer:t,triggerElement:r,...s}=e,i=t?gt:a=>a(),o=[];return o.push(i(()=>{const a=typeof n=="function"?n():n,l=typeof r=="function"?r():r;o.push(Y1(a,{triggerElement:l,...s}))})),()=>{o.forEach(a=>a==null?void 0:a())}}var nr=new WeakMap,We=[];function X1(n,e={}){const{rootEl:t}=e,r=n.filter(Boolean);if(r.length===0)return;const s=r[0].ownerDocument||document,i=s.defaultView??window,o=new Set(r),a=new Set,l=t??s.body;let c=h=>{for(let y of h.querySelectorAll("[data-live-announcer], [data-zag-top-layer]"))o.add(y);let p=y=>{if(o.has(y)||a.has(y.parentElement)&&y.parentElement.getAttribute("role")!=="row")return NodeFilter.FILTER_REJECT;for(let v of o)if(y.contains(v))return NodeFilter.FILTER_SKIP;return NodeFilter.FILTER_ACCEPT},m=s.createTreeWalker(h,NodeFilter.SHOW_ELEMENT,{acceptNode:p}),g=p(h);if(g===NodeFilter.FILTER_ACCEPT&&u(h),g!==NodeFilter.FILTER_REJECT){let y=m.nextNode();for(;y!=null;)u(y),y=m.nextNode()}},u=h=>{let p=nr.get(h)??0;h.getAttribute("aria-hidden")==="true"&&p===0||(p===0&&h.setAttribute("aria-hidden","true"),a.add(h),nr.set(h,p+1))};We.length&&We[We.length-1].disconnect(),c(l);const f=new i.MutationObserver(h=>{for(let p of h)if(!(p.type!=="childList"||p.addedNodes.length===0)&&![...o,...a].some(m=>m.contains(p.target))){for(let m of p.removedNodes)m instanceof i.Element&&(o.delete(m),a.delete(m));for(let m of p.addedNodes)(m instanceof i.HTMLElement||m instanceof i.SVGElement)&&(m.dataset.liveAnnouncer==="true"||m.dataset.zagTopLayer==="true")?o.add(m):m instanceof i.Element&&c(m)}});f.observe(l,{childList:!0,subtree:!0});let d={observe(){f.observe(l,{childList:!0,subtree:!0})},disconnect(){f.disconnect()}};return We.push(d),()=>{f.disconnect();for(let h of a){let p=nr.get(h);p===1?(h.removeAttribute("aria-hidden"),nr.delete(h)):nr.set(h,p-1)}d===We[We.length-1]?(We.pop(),We.length&&We[We.length-1].observe()):We.splice(We.indexOf(d),1)}}function Q1(n,e={}){const{defer:t}=e,r=t?gt:i=>i(),s=[];return s.push(r(()=>{const i=typeof n=="function"?n():n;s.push(X1(i,e))})),()=>{s.forEach(i=>i==null?void 0:i())}}const em=Symbol(),Va=Object.getPrototypeOf,fo=new WeakMap,tm=n=>n&&(fo.has(n)?fo.get(n):Va(n)===Object.prototype||Va(n)===Array.prototype),nm=n=>tm(n)&&n[em]||null,za=(n,e=!0)=>{fo.set(n,e)};var Mi=n=>typeof n=="object"&&n!==null,nn=new WeakMap,ir=new WeakSet,rm=(n=Object.is,e=(c,u)=>new Proxy(c,u),t=c=>Mi(c)&&!ir.has(c)&&(Array.isArray(c)||!(Symbol.iterator in c))&&!(c instanceof WeakMap)&&!(c instanceof WeakSet)&&!(c instanceof Error)&&!(c instanceof Number)&&!(c instanceof Date)&&!(c instanceof String)&&!(c instanceof RegExp)&&!(c instanceof ArrayBuffer),r=c=>{switch(c.status){case"fulfilled":return c.value;case"rejected":throw c.reason;default:throw c}},s=new WeakMap,i=(c,u,f=r)=>{const d=s.get(c);if((d==null?void 0:d[0])===u)return d[1];const h=Array.isArray(c)?[]:Object.create(Object.getPrototypeOf(c));return za(h,!0),s.set(c,[u,h]),Reflect.ownKeys(c).forEach(p=>{const m=Reflect.get(c,p);ir.has(m)?(za(m,!1),h[p]=m):m instanceof Promise?Object.defineProperty(h,p,{get(){return f(m)}}):nn.has(m)?h[p]=Wn(m,f):h[p]=m}),Object.freeze(h)},o=new WeakMap,a=[1,1],l=c=>{if(!Mi(c))throw new Error("object required");const u=o.get(c);if(u)return u;let f=a[0];const d=new Set,h=(T,F=++a[0])=>{f!==F&&(f=F,d.forEach(A=>A(T,F)))};let p=a[1];const m=(T=++a[1])=>(p!==T&&!d.size&&(p=T,y.forEach(([F])=>{const A=F[1](T);A>f&&(f=A)})),f),g=T=>(F,A)=>{const C=[...F];C[1]=[T,...C[1]],h(C,A)},y=new Map,v=(T,F)=>{if(d.size){const A=F[3](g(T));y.set(T,[F,A])}else y.set(T,[F])},w=T=>{var A;const F=y.get(T);F&&(y.delete(T),(A=F[1])==null||A.call(F))},$=T=>(d.add(T),d.size===1&&y.forEach(([A,C],k)=>{const D=A[3](g(k));y.set(k,[A,D])}),()=>{d.delete(T),d.size===0&&y.forEach(([A,C],k)=>{C&&(C(),y.set(k,[A]))})}),B=Array.isArray(c)?[]:Object.create(Object.getPrototypeOf(c)),j=e(B,{deleteProperty(T,F){const A=Reflect.get(T,F);w(F);const C=Reflect.deleteProperty(T,F);return C&&h(["delete",[F],A]),C},set(T,F,A,C){var X;const k=Reflect.has(T,F),D=Reflect.get(T,F,C);if(k&&(n(D,A)||o.has(A)&&n(D,o.get(A))))return!0;w(F),Mi(A)&&(A=nm(A)||A);let U=A;if(!((X=Object.getOwnPropertyDescriptor(T,F))!=null&&X.set))if(A instanceof Promise)A.then(q=>{A.status="fulfilled",A.value=q,h(["resolve",[F],q])}).catch(q=>{A.status="rejected",A.reason=q,h(["reject",[F],q])});else{!nn.has(A)&&t(A)&&(U=Yo(A));const q=!ir.has(U)&&nn.get(U);q&&v(F,q)}return Reflect.set(T,F,U,C),h(["set",[F],A,D]),!0}});o.set(c,j);const se=[B,m,i,$];return nn.set(j,se),Reflect.ownKeys(c).forEach(T=>{const F=Object.getOwnPropertyDescriptor(c,T);F.get||F.set?Object.defineProperty(B,T,F):j[T]=c[T]}),j})=>[l,nn,ir,n,e,t,r,s,i,o,a],[sm]=rm();function Yo(n={}){return sm(n)}function ho(n,e,t){const r=nn.get(n);let s;const i=[],o=r[3];let a=!1;const c=o(u=>{if(i.push(u),t){e(i.splice(0));return}s||(s=Promise.resolve().then(()=>{s=void 0,a&&e(i.splice(0))}))});return a=!0,()=>{a=!1,c()}}function Wn(n,e){const t=nn.get(n),[r,s,i]=t;return i(r,s(),e)}function fr(n){return ir.add(n),n}function im(n,e){Object.keys(e).forEach(s=>{if(Object.getOwnPropertyDescriptor(n,s))throw new Error("object property already defined");const i=e[s],{get:o,set:a}=typeof i=="function"?{get:i}:i,l={};l.get=()=>o(Wn(r)),a&&(l.set=c=>a(r,c)),Object.defineProperty(n,s,l)});const r=Yo(n);return r}var om=(n,e)=>Object.is(n,e);function ja(n,e,t,r,s){let i=Reflect.get(Wn(n),e);const o=s||om;function a(){const l=Wn(n);o(i,l[e])||(t(l[e]),i=Reflect.get(l,e))}return ho(n,a,r)}function Wa(n,e,t){typeof t.value=="object"&&(t.value=Ln(t.value)),!t.enumerable||t.get||t.set||!t.configurable||!t.writable||e==="__proto__"?Object.defineProperty(n,e,t):n[e]=t.value}function Ln(n){if(typeof n!="object")return n;var e=0,t,r,s,i=Object.prototype.toString.call(n);if(i==="[object Object]"?s=Object.create(n.__proto__||null):i==="[object Array]"?s=Array(n.length):i==="[object Set]"?(s=new Set,n.forEach(function(o){s.add(Ln(o))})):i==="[object Map]"?(s=new Map,n.forEach(function(o,a){s.set(Ln(a),Ln(o))})):i==="[object Date]"?s=new Date(+n):i==="[object RegExp]"?s=new RegExp(n.source,n.flags):i==="[object DataView]"?s=new n.constructor(Ln(n.buffer)):i==="[object ArrayBuffer]"?s=n.slice(0):i.slice(-6)==="Array]"&&(s=new n.constructor(n)),s){for(r=Object.getOwnPropertySymbols(n);e<r.length;e++)Wa(s,r[e],Object.getOwnPropertyDescriptor(n,r[e]));for(e=0,r=Object.getOwnPropertyNames(n);e<r.length;e++)Object.hasOwnProperty.call(s,t=r[e])&&s[t]===n[t]||Wa(s,t,Object.getOwnPropertyDescriptor(n,t))}return s||n}var am=Object.defineProperty,lm=(n,e,t)=>e in n?am(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,P=(n,e,t)=>(lm(n,typeof e!="symbol"?e+"":e,t),t);function cm(n){for(;n.length>0;)n.pop();return n}var Ka=(n,...e)=>(typeof n=="function"?n(...e):n)??void 0,Mt=n=>n,Ti=()=>{},um=(...n)=>(...e)=>{n.forEach(function(t){t==null||t(...e)})},Ua=(()=>{let n=0;return()=>(n++,n.toString(36))})(),hr=n=>Array.isArray(n),pr=n=>!(n==null||typeof n!="object"||hr(n)),dm=n=>typeof n=="number"&&!Number.isNaN(n),Qe=n=>typeof n=="string",cs=n=>typeof n=="function";function us(n){if(!fm(n)||n===void 0)return n;const e=Reflect.ownKeys(n).filter(r=>typeof r=="string"),t={};for(const r of e){const s=n[r];s!==void 0&&(t[r]=us(s))}return t}var fm=n=>n&&typeof n=="object"&&n.constructor===Object;function Oi(...n){const e=n.length===1?n[0]:n[1],t=n.length===2?n[0]:!0}function ts(...n){const e=n.length===1?n[0]:n[1],t=n.length===2?n[0]:!0}function Zc(n,...e){for(const t of e){const r=us(t);for(const s in r)pr(t[s])?(n[s]||(n[s]={}),Zc(n[s],t[s])):n[s]=t[s]}return n}function qa(n){return Ln(n)}function Re(n){return Qe(n)?{type:n}:n}function It(n){return n?hr(n)?n.slice():[n]:[]}function Yc(n){return pr(n)&&n.predicate!=null}var hm=()=>!0;function Xo(n,e,t,r){return s=>{var i;return Qe(s)?!!((i=n[s])!=null&&i.call(n,e,t,r)):cs(s)?s(e,t,r):s.predicate(n)(e,t,r)}}function pm(...n){return{predicate:e=>(t,r,s)=>n.map(Xo(e,t,r,s)).some(Boolean)}}function mm(...n){return{predicate:e=>(t,r,s)=>n.map(Xo(e,t,r,s)).every(Boolean)}}function gm(n){return{predicate:e=>(t,r,s)=>!Xo(e,t,r,s)(n)}}function ym(...n){return(e,t,r)=>r.state.matches(...n)}var bm={or:pm,and:mm,not:gm,stateIn:ym};function Xc(n,e){return n=n??hm,(t,r,s)=>{if(Qe(n)){const i=e[n];return cs(i)?i(t,r,s):i}return Yc(n)?n.predicate(e)(t,r,s):n==null?void 0:n(t,r,s)}}function Ai(n,e){return(t,r,s)=>Yc(n)?n.predicate(e)(t,r,s):n}function vm(n){const e=n.computed??Mt({}),t=n.context??Mt({}),r=Yo({value:n.initial??"",previousValue:"",event:Mt({}),previousEvent:Mt({}),context:im(t,e),done:!1,tags:[],hasTag(s){return this.tags.includes(s)},matches(...s){return s.includes(this.value)},can(s){return Mt(this).nextEvents.includes(s)},get nextEvents(){var o,a;const s=((a=(o=n.states)==null?void 0:o[this.value])==null?void 0:a.on)??{},i=(n==null?void 0:n.on)??{};return Object.keys({...s,...i})},get changed(){return this.event.value==="machine.init"||!this.previousValue?!1:this.value!==this.previousValue}});return Mt(r)}function jr(n,e){return(t,r)=>{if(dm(n))return n;if(cs(n))return n(t,r);if(Qe(n)){const s=Number.parseFloat(n);if(!Number.isNaN(s))return s;if(e){const i=e==null?void 0:e[n];return ts(i==null,`[@zag-js/core > determine-delay] Cannot determine delay for \`${n}\`. It doesn't exist in \`options.delays\``),cs(i)?i(t,r):i}}}}function Cm(n){return Qe(n)?{target:n}:n}function km(n,e){return(t,r,s)=>It(n).map(Cm).find(i=>Xc(i.guard,e)(t,r,s)??i.target??i.actions)}var wm=class Qc{constructor(e,t){var s,i,o,a,l,c;P(this,"status","Not Started"),P(this,"state"),P(this,"initialState"),P(this,"initialContext"),P(this,"id"),P(this,"type","machine"),P(this,"activityEvents",new Map),P(this,"delayedEvents",new Map),P(this,"stateListeners",new Set),P(this,"contextListeners",new Set),P(this,"eventListeners",new Set),P(this,"doneListeners",new Set),P(this,"contextWatchers",new Set),P(this,"removeStateListener",Ti),P(this,"removeEventListener",Ti),P(this,"removeContextListener",Ti),P(this,"parent"),P(this,"children",new Map),P(this,"guardMap"),P(this,"actionMap"),P(this,"delayMap"),P(this,"activityMap"),P(this,"sync"),P(this,"options"),P(this,"config"),P(this,"start",u=>{if(this.state.value="",this.status==="Running")return this;this.status="Running",this.removeStateListener=ho(this.state,()=>{this.stateListeners.forEach(g=>{g(this.stateSnapshot)})},this.sync),this.removeEventListener=ja(this.state,"event",g=>{this.executeActions(this.config.onEvent,g),this.eventListeners.forEach(y=>{y(g)})},this.sync),this.removeContextListener=ho(this.state.context,()=>{this.log("Context:",this.contextSnapshot),this.contextListeners.forEach(g=>{g(this.contextSnapshot)})},this.sync||this.options.debug),this.setupContextWatchers(),this.executeActivities(Re("machine.start"),It(this.config.activities),"machine.start"),this.executeActions(this.config.entry,Re("machine.start"));const f=Re("machine.init"),d=pr(u)?u.value:u,h=pr(u)?u.context:void 0;h&&this.setContext(h);const p={target:d??this.config.initial},m=this.getNextStateInfo(p,f);return this.initialState=m,this.performStateChangeEffects(this.state.value,m,f),this}),P(this,"setupContextWatchers",()=>{var u;for(const[f,d]of Object.entries(this.config.watch??{})){const h=(u=this.options.compareFns)==null?void 0:u[f],p=ja(this.state.context,f,()=>{this.executeActions(d,this.state.event)},this.sync,h);this.contextWatchers.add(p)}}),P(this,"stop",()=>{if(this.status!=="Stopped")return this.performExitEffects(this.state.value,Re("machine.stop")),this.executeActions(this.config.exit,Re("machine.stop")),this.setState(""),this.setEvent("machine.stop"),this.stopStateListeners(),this.stopChildren(),this.stopActivities(),this.stopDelayedEvents(),this.stopContextWatchers(),this.stopEventListeners(),this.stopContextListeners(),this.status="Stopped",this}),P(this,"stopEventListeners",()=>{this.eventListeners.clear(),this.removeEventListener()}),P(this,"stopContextListeners",()=>{this.contextListeners.clear(),this.removeContextListener()}),P(this,"stopStateListeners",()=>{this.removeStateListener(),this.stateListeners.clear()}),P(this,"stopContextWatchers",()=>{this.contextWatchers.forEach(u=>u()),this.contextWatchers.clear()}),P(this,"stopDelayedEvents",()=>{this.delayedEvents.forEach(u=>{u.forEach(f=>f())}),this.delayedEvents.clear()}),P(this,"stopActivities",u=>{var f,d;u?((f=this.activityEvents.get(u))==null||f.forEach(h=>h()),(d=this.activityEvents.get(u))==null||d.clear(),this.activityEvents.delete(u)):(this.activityEvents.forEach(h=>{h.forEach(p=>p()),h.clear()}),this.activityEvents.clear())}),P(this,"sendChild",(u,f)=>{const d=Re(u),h=Ka(f,this.contextSnapshot),p=this.children.get(h);p||ts(`[@zag-js/core] Cannot send '${d.type}' event to unknown child`),p.send(d)}),P(this,"stopChild",u=>{this.children.has(u)||ts(`[@zag-js/core > stop-child] Cannot stop unknown child ${u}`),this.children.get(u).stop(),this.children.delete(u)}),P(this,"removeChild",u=>{this.children.delete(u)}),P(this,"stopChildren",()=>{this.children.forEach(u=>u.stop()),this.children.clear()}),P(this,"setParent",u=>{this.parent=u}),P(this,"spawn",(u,f)=>{const d=Ka(u);return f&&(d.id=f),d.type="machine.actor",d.setParent(this),this.children.set(d.id,Mt(d)),d.onDone(()=>{this.removeChild(d.id)}).start(),Mt(fr(d))}),P(this,"stopActivity",u=>{var d;if(!this.state.value)return;const f=this.activityEvents.get(this.state.value);(d=f==null?void 0:f.get(u))==null||d(),f==null||f.delete(u)}),P(this,"addActivityCleanup",(u,f,d)=>{var h;u&&(this.activityEvents.has(u)?(h=this.activityEvents.get(u))==null||h.set(f,d):this.activityEvents.set(u,new Map([[f,d]])))}),P(this,"setState",u=>{this.state.previousValue=this.state.value,this.state.value=u;const f=this.getStateNode(u);u==null?cm(this.state.tags):this.state.tags=It(f==null?void 0:f.tags)}),P(this,"transformContext",u=>{var f,d;return(d=(f=this.options)==null?void 0:f.transformContext)==null||d.call(f,u),u}),P(this,"setContext",u=>{u&&Zc(this.state.context,this.transformContext(u))}),P(this,"withContext",u=>{const f=this.transformContext(u),d={...this.config.context,...us(f)};return new Qc({...this.config,context:d},this.options)}),P(this,"setOptions",u=>{const f=us(u);this.actionMap={...this.actionMap,...f.actions},this.delayMap={...this.delayMap,...f.delays},this.activityMap={...this.activityMap,...f.activities},this.guardMap={...this.guardMap,...f.guards}}),P(this,"getStateNode",u=>{var f;if(u)return(f=this.config.states)==null?void 0:f[u]}),P(this,"getNextStateInfo",(u,f)=>{const d=this.determineTransition(u,f),h=!(d!=null&&d.target),p=(d==null?void 0:d.target)??this.state.value,m=this.state.value!==p,g=this.getStateNode(p),v={reenter:!h&&!m&&!(d!=null&&d.internal),transition:d,stateNode:g,target:p,changed:m};return this.log("NextState:",`[${f.type}]`,this.state.value,"---->",v.target),v}),P(this,"getActionFromDelayedTransition",u=>{const f=Re("machine.after"),h=jr(u.delay,this.delayMap)(this.contextSnapshot,f);let p;return{entry:()=>{p=globalThis.setTimeout(()=>{const m=this.getNextStateInfo(u,f);this.performStateChangeEffects(this.state.value,m,f)},h)},exit:()=>{globalThis.clearTimeout(p)}}}),P(this,"getDelayedEventActions",u=>{const f=this.getStateNode(u),d=Re("machine.after");if(!f||!f.after)return;const h=[],p=[];if(hr(f.after)){const m=this.determineTransition(f.after,d);if(!m)return;const g=this.getActionFromDelayedTransition(m);h.push(g.entry),p.push(g.exit)}else if(pr(f.after))for(const m in f.after){const g=f.after[m];let y={};if(hr(g)){const w=this.determineTransition(g,d);w&&(y=w)}else Qe(g)?y={target:g,delay:m}:y={...g,delay:m};const v=this.getActionFromDelayedTransition(y);h.push(v.entry),p.push(v.exit)}return{entries:h,exits:p}}),P(this,"executeActions",(u,f)=>{var h;const d=Ai(u,this.guardMap)(this.contextSnapshot,f,this.guardMeta);for(const p of It(d)){const m=Qe(p)?(h=this.actionMap)==null?void 0:h[p]:p;Oi(Qe(p)&&!m,`[@zag-js/core > execute-actions] No implementation found for action: \`${p}\``),m==null||m(this.state.context,f,this.meta)}}),P(this,"executeActivities",(u,f,d)=>{var h;for(const p of f){const m=Qe(p)?(h=this.activityMap)==null?void 0:h[p]:p;if(!m){Oi(`[@zag-js/core > execute-activity] No implementation found for activity: \`${p}\``);continue}const g=m(this.state.context,u,this.meta);if(g){const y=Qe(p)?p:p.name||Ua();this.addActivityCleanup(d??this.state.value,y,g)}}}),P(this,"createEveryActivities",(u,f)=>{if(!u)return;const d=Re("machine.every");if(hr(u)){const h=It(u).find(y=>{const v=y.delay,$=jr(v,this.delayMap)(this.contextSnapshot,d);return Xc(y.guard,this.guardMap)(this.contextSnapshot,d,this.guardMeta)??$!=null});if(!h)return;const m=jr(h.delay,this.delayMap)(this.contextSnapshot,d);f(()=>{const y=globalThis.setInterval(()=>{this.executeActions(h.actions,d)},m);return()=>{globalThis.clearInterval(y)}})}else for(const h in u){const p=u==null?void 0:u[h],g=jr(h,this.delayMap)(this.contextSnapshot,d);f(()=>{const v=globalThis.setInterval(()=>{this.executeActions(p,d)},g);return()=>{globalThis.clearInterval(v)}})}}),P(this,"setEvent",u=>{this.state.previousEvent=this.state.event,this.state.event=fr(Re(u))}),P(this,"performExitEffects",(u,f)=>{const d=this.state.value;if(d==="")return;const h=u?this.getStateNode(u):void 0;this.stopActivities(d);const p=Ai(h==null?void 0:h.exit,this.guardMap)(this.contextSnapshot,f,this.guardMeta),m=It(p),g=this.delayedEvents.get(d);g&&m.push(...g),this.executeActions(m,f),this.eventListeners.clear()}),P(this,"performEntryEffects",(u,f)=>{const d=this.getStateNode(u),h=It(d==null?void 0:d.activities);this.createEveryActivities(d==null?void 0:d.every,y=>{h.unshift(y)}),h.length>0&&this.executeActivities(f,h);const p=Ai(d==null?void 0:d.entry,this.guardMap)(this.contextSnapshot,f,this.guardMeta),m=It(p),g=this.getDelayedEventActions(u);d!=null&&d.after&&g&&(this.delayedEvents.set(u,g==null?void 0:g.exits),m.push(...g.entries)),this.executeActions(m,f),(d==null?void 0:d.type)==="final"&&(this.state.done=!0,this.doneListeners.forEach(y=>{y(this.stateSnapshot)}),this.stop())}),P(this,"performTransitionEffects",(u,f)=>{const d=this.determineTransition(u,f);this.executeActions(d==null?void 0:d.actions,f)}),P(this,"performStateChangeEffects",(u,f,d)=>{this.setEvent(d);const h=f.changed||f.reenter;h&&this.performExitEffects(u,d),this.performTransitionEffects(f.transition,d),this.setState(f.target),h&&this.performEntryEffects(f.target,d)}),P(this,"determineTransition",(u,f)=>{const d=km(u,this.guardMap);return d==null?void 0:d(this.contextSnapshot,f,this.guardMeta)}),P(this,"sendParent",u=>{var d;this.parent||ts("[@zag-js/core > send-parent] Cannot send event to an unknown parent");const f=Re(u);(d=this.parent)==null||d.send(f)}),P(this,"log",(...u)=>{}),P(this,"send",u=>{const f=Re(u);this.transition(this.state.value,f)}),P(this,"transition",(u,f)=>{var g,y;const d=Qe(u)?this.getStateNode(u):u==null?void 0:u.stateNode,h=Re(f);if(!d&&!this.config.on){const v=this.status==="Stopped"?"[@zag-js/core > transition] Cannot transition a stopped machine":`[@zag-js/core > transition] State does not have a definition for \`state\`: ${u}, \`event\`: ${h.type}`;Oi(v);return}const p=((g=d==null?void 0:d.on)==null?void 0:g[h.type])??((y=this.config.on)==null?void 0:y[h.type]),m=this.getNextStateInfo(p,h);return this.performStateChangeEffects(this.state.value,m,h),m.stateNode}),P(this,"subscribe",u=>(this.stateListeners.add(u),this.status==="Running"&&u(this.stateSnapshot),()=>{this.stateListeners.delete(u)})),P(this,"onDone",u=>(this.doneListeners.add(u),this)),P(this,"onTransition",u=>(this.stateListeners.add(u),this.status==="Running"&&u(this.stateSnapshot),this)),P(this,"onChange",u=>(this.contextListeners.add(u),this)),P(this,"onEvent",u=>(this.eventListeners.add(u),this)),this.config=qa(e),this.options=qa(t??{}),this.id=this.config.id??`machine-${Ua()}`,this.guardMap=((s=this.options)==null?void 0:s.guards)??{},this.actionMap=((i=this.options)==null?void 0:i.actions)??{},this.delayMap=((o=this.options)==null?void 0:o.delays)??{},this.activityMap=((a=this.options)==null?void 0:a.activities)??{},this.sync=((l=this.options)==null?void 0:l.sync)??!1,this.state=vm(this.config),this.initialContext=Wn(this.state.context),this.transformContext(this.state.context);const r=Re("machine.created");this.executeActions((c=this.config)==null?void 0:c.created,r)}get stateSnapshot(){return Mt(Wn(this.state))}getState(){return this.stateSnapshot}get contextSnapshot(){return this.stateSnapshot.context}get self(){const e=this;return{id:this.id,send:this.send.bind(this),sendParent:this.sendParent.bind(this),sendChild:this.sendChild.bind(this),stop:this.stop.bind(this),stopChild:this.stopChild.bind(this),spawn:this.spawn.bind(this),stopActivity:this.stopActivity.bind(this),get state(){return e.stateSnapshot},get initialContext(){return e.initialContext},get initialState(){var t;return((t=e.initialState)==null?void 0:t.target)??""}}}get meta(){var e;return{state:this.stateSnapshot,guards:this.guardMap,send:this.send.bind(this),self:this.self,initialContext:this.initialContext,initialState:((e=this.initialState)==null?void 0:e.target)??"",getState:()=>this.stateSnapshot,getAction:t=>this.actionMap[t],getGuard:t=>this.guardMap[t]}}get guardMeta(){return{state:this.stateSnapshot}}get[Symbol.toStringTag](){return"Machine"}},eu=(n,e)=>new wm(n,e),Sm=(...n)=>n.map(e=>{var t;return(t=e==null?void 0:e.trim)==null?void 0:t.call(e)}).filter(Boolean).join(" "),Em=/^on[A-Z]/;function xm(...n){let e={};for(let t of n){for(let r in e){if(Em.test(r)&&typeof e[r]=="function"&&typeof t[r]=="function"){e[r]=um(e[r],t[r]);continue}if(r==="className"||r==="class"){e[r]=Sm(e[r],t[r]);continue}if(r==="style"){e[r]=Object.assign({},e[r]??{},t[r]??{});continue}e[r]=t[r]!==void 0?t[r]:e[r]}for(let r in t)e[r]===void 0&&(e[r]=t[r])}return e}var ds=(n,e,t,r)=>{const s=typeof n=="function"?n():n;return s==null||s.addEventListener(e,t,r),()=>{s==null||s.removeEventListener(e,t,r)}},Ni=n=>n.button===0,tu=n=>n.button===2||Tm()&&n.ctrlKey&&n.button===0,Mm=n=>n.ctrlKey||n.altKey||n.metaKey,Tm=()=>/Mac|iPod|iPhone|iPad/.test(window.navigator.platform);function Ga(n,e,t){if(!n)return;const r=n.ownerDocument.defaultView||window,s=new r.CustomEvent(e,t);return n.dispatchEvent(s)}var Om={Up:"ArrowUp",Down:"ArrowDown",Esc:"Escape"," ":"Space",",":"Comma",Left:"ArrowLeft",Right:"ArrowRight"},Ja={ArrowLeft:"ArrowRight",ArrowRight:"ArrowLeft"};function Za(n,e={}){const{dir:t="ltr",orientation:r="horizontal"}=e;let{key:s}=n;return s=Om[s]??s,t==="rtl"&&r==="horizontal"&&s in Ja&&(s=Ja[s]),s}function Am(n,e="client"){const t=n.touches[0]||n.changedTouches[0];return{x:t[`${e}X`],y:t[`${e}Y`]}}function Nm(n,e="client"){return{x:n[`${e}X`],y:n[`${e}Y`]}}var Im=n=>"touches"in n&&n.touches.length>0;function Ii(n,e="client"){return Im(n)?Am(n,e):Nm(n,e)}function Qt(n){return n.nativeEvent??n}function Pm(n){const e={each(t){var r;for(let s=0;s<((r=n.frames)==null?void 0:r.length);s+=1){const i=n.frames[s];i&&t(i)}},addEventListener(t,r,s){return e.each(i=>{try{i.document.addEventListener(t,r,s)}catch{}}),()=>{try{e.removeEventListener(t,r,s)}catch{}}},removeEventListener(t,r,s){e.each(i=>{try{i.document.removeEventListener(t,r,s)}catch{}})}};return e}var Ya="pointerdown.outside",Xa="focus.outside";function Dm(n){const e=n.composedPath()??[n.target];for(const t of e)if(yt(t)&&xr(t))return!0;return!1}var Lm=n=>"clientY"in n;function _m(n,e){if(!Lm(e)||!n)return!1;const t=n.getBoundingClientRect();return t.width===0||t.height===0?!1:t.top<=e.clientY&&e.clientY<=t.top+t.height&&t.left<=e.clientX&&e.clientX<=t.left+t.width}function Rm(n,e){const{exclude:t,onFocusOutside:r,onPointerDownOutside:s,onInteractOutside:i}=e;if(!n)return;const o=Ko(n),a=Uo(n),l=Pm(a);function c(m){const g=Er(m);return!yt(g)||mn(n,g)||_m(n,m)?!1:!(t!=null&&t(g))}let u;function f(m){function g(){if(!(!n||!c(m))){if(s||i){const y=dr(s,i);n.addEventListener(Ya,y,{once:!0})}Ga(n,Ya,{bubbles:!1,cancelable:!0,detail:{originalEvent:m,contextmenu:tu(m),focusable:Dm(m)}})}}m.pointerType==="touch"?(l.removeEventListener("click",g),o.removeEventListener("click",g),u=g,o.addEventListener("click",g,{once:!0}),l.addEventListener("click",g,{once:!0})):g()}const d=new Set,h=setTimeout(()=>{d.add(l.addEventListener("pointerdown",f,!0)),d.add(ds(o,"pointerdown",f,!0))},0);function p(m){if(!(!n||!c(m))){if(r||i){const g=dr(r,i);n.addEventListener(Xa,g,{once:!0})}Ga(n,Xa,{bubbles:!1,cancelable:!0,detail:{originalEvent:m,contextmenu:!1,focusable:xr(Er(m))}})}}return d.add(ds(o,"focusin",p,!0)),d.add(l.addEventListener("focusin",p,!0)),()=>{clearTimeout(h),u&&(l.removeEventListener("click",u),o.removeEventListener("click",u)),d.forEach(m=>m())}}function Fm(n,e){const{defer:t}=e,r=t?gt:i=>i(),s=[];return s.push(r(()=>{const i=typeof n=="function"?n():n;s.push(Rm(i,e))})),()=>{s.forEach(i=>i==null?void 0:i())}}function Bm(n,e){const t=r=>{r.key==="Escape"&&(e==null||e(r))};return ds(Ko(n),"keydown",t)}var Xe={layers:[],branches:[],count(){return this.layers.length},pointerBlockingLayers(){return this.layers.filter(n=>n.pointerBlocking)},topMostPointerBlockingLayer(){return[...this.pointerBlockingLayers()].slice(-1)[0]},hasPointerBlockingLayer(){return this.pointerBlockingLayers().length>0},isBelowPointerBlockingLayer(n){var r;const e=this.indexOf(n),t=this.topMostPointerBlockingLayer()?this.indexOf((r=this.topMostPointerBlockingLayer())==null?void 0:r.node):-1;return e<t},isTopMost(n){const e=this.layers[this.count()-1];return(e==null?void 0:e.node)===n},getNestedLayers(n){return Array.from(this.layers).slice(this.indexOf(n)+1)},isInNestedLayer(n,e){return this.getNestedLayers(n).some(t=>mn(t.node,e))},isInBranch(n){return Array.from(this.branches).some(e=>mn(e,n))},add(n){this.layers.push(n)},addBranch(n){this.branches.push(n)},remove(n){const e=this.indexOf(n);e<0||(e<this.count()-1&&this.getNestedLayers(n).forEach(r=>r.dismiss()),this.layers.splice(e,1))},removeBranch(n){const e=this.branches.indexOf(n);e>=0&&this.branches.splice(e,1)},indexOf(n){return this.layers.findIndex(e=>e.node===n)},dismiss(n){var e;(e=this.layers[this.indexOf(n)])==null||e.dismiss()},clear(){this.remove(this.layers[0].node)}},Qa;function el(){Xe.layers.forEach(({node:n})=>{n.style.pointerEvents=Xe.isBelowPointerBlockingLayer(n)?"none":"auto"})}function $m(n){n.style.pointerEvents=""}var Pi="data-inert";function Hm(n){const e=Ko(n);return Xe.hasPointerBlockingLayer()&&!e.body.hasAttribute(Pi)&&(Qa=document.body.style.pointerEvents,e.body.style.pointerEvents="none",e.body.setAttribute(Pi,"")),()=>{Xe.hasPointerBlockingLayer()||(e.body.style.pointerEvents=Qa,e.body.removeAttribute(Pi),e.body.style.length===0&&e.body.removeAttribute("style"))}}function Vm(n,e){if(!n){S1("[@zag-js/dismissable] node is `null` or `undefined`");return}const{onDismiss:t,pointerBlocking:r,exclude:s,debug:i}=e,o={dismiss:t,node:n,pointerBlocking:r};Xe.add(o),el();function a(d){var p,m;const h=Er(d.detail.originalEvent);Xe.isBelowPointerBlockingLayer(n)||Xe.isInBranch(h)||((p=e.onPointerDownOutside)==null||p.call(e,d),(m=e.onInteractOutside)==null||m.call(e,d),!d.defaultPrevented&&(i&&console.log("onPointerDownOutside:",d.detail.originalEvent),t==null||t()))}function l(d){var p,m;const h=Er(d.detail.originalEvent);Xe.isInBranch(h)||((p=e.onFocusOutside)==null||p.call(e,d),(m=e.onInteractOutside)==null||m.call(e,d),!d.defaultPrevented&&(i&&console.log("onFocusOutside:",d.detail.originalEvent),t==null||t()))}function c(d){var h;Xe.isTopMost(n)&&((h=e.onEscapeKeyDown)==null||h.call(e,d),!d.defaultPrevented&&t&&(d.preventDefault(),t()))}function u(d){if(!n)return!1;const h=typeof s=="function"?s():s;return(Array.isArray(h)?h:[h]).some(m=>mn(m,d))||Xe.isInNestedLayer(n,d)}const f=[r?Hm(n):void 0,Bm(n,c),Fm(n,{exclude:u,onFocusOutside:l,onPointerDownOutside:a})];return()=>{Xe.remove(n),el(),$m(n),f.forEach(d=>d==null?void 0:d())}}function nu(n,e){const{defer:t}=e,r=t?gt:i=>i(),s=[];return s.push(r(()=>{const i=typeof n=="function"?n():n;s.push(Vm(i,e))})),()=>{s.forEach(i=>i==null?void 0:i())}}var Di="data-zag-scroll-lock";function tl(n,e){if(!n)return;const t=n.style.cssText;return Object.assign(n.style,e),()=>{n.style.cssText=t}}function zm(n,e,t){if(!n)return;const r=n.style.getPropertyValue(e);return n.style.setProperty(e,t),()=>{r?n.style.setProperty(e,r):n.style.removeProperty(e)}}function jm(n){const e=n.getBoundingClientRect().left;return Math.round(e)+n.scrollLeft?"paddingLeft":"paddingRight"}function Wm(n){const e=n??document,t=e.defaultView??window,{documentElement:r,body:s}=e;if(s.hasAttribute(Di))return;s.setAttribute(Di,"");const o=t.innerWidth-r.clientWidth,a=()=>zm(r,"--scrollbar-width",`${o}px`),l=jm(r),c=()=>tl(s,{overflow:"hidden",[l]:`${o}px`}),u=()=>{const{scrollX:d,scrollY:h,visualViewport:p}=t,m=(p==null?void 0:p.offsetLeft)??0,g=(p==null?void 0:p.offsetTop)??0,y=tl(s,{position:"fixed",overflow:"hidden",top:`${-(h-Math.floor(g))}px`,left:`${-(d-Math.floor(m))}px`,right:"0",[l]:`${o}px`});return()=>{y==null||y(),t.scrollTo(d,h)}},f=[a(),h1()?u():c()];return()=>{f.forEach(d=>d==null?void 0:d()),s.removeAttribute(Di)}}/*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var ru=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],fs=ru.join(","),su=typeof Element>"u",gn=su?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,hs=!su&&Element.prototype.getRootNode?function(n){var e;return n==null||(e=n.getRootNode)===null||e===void 0?void 0:e.call(n)}:function(n){return n==null?void 0:n.ownerDocument},ps=function n(e,t){var r;t===void 0&&(t=!0);var s=e==null||(r=e.getAttribute)===null||r===void 0?void 0:r.call(e,"inert"),i=s===""||s==="true",o=i||t&&e&&n(e.parentNode);return o},Km=function(e){var t,r=e==null||(t=e.getAttribute)===null||t===void 0?void 0:t.call(e,"contenteditable");return r===""||r==="true"},iu=function(e,t,r){if(ps(e))return[];var s=Array.prototype.slice.apply(e.querySelectorAll(fs));return t&&gn.call(e,fs)&&s.unshift(e),s=s.filter(r),s},ou=function n(e,t,r){for(var s=[],i=Array.from(e);i.length;){var o=i.shift();if(!ps(o,!1))if(o.tagName==="SLOT"){var a=o.assignedElements(),l=a.length?a:o.children,c=n(l,!0,r);r.flatten?s.push.apply(s,c):s.push({scopeParent:o,candidates:c})}else{var u=gn.call(o,fs);u&&r.filter(o)&&(t||!e.includes(o))&&s.push(o);var f=o.shadowRoot||typeof r.getShadowRoot=="function"&&r.getShadowRoot(o),d=!ps(f,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(o));if(f&&d){var h=n(f===!0?o.children:f.children,!0,r);r.flatten?s.push.apply(s,h):s.push({scopeParent:o,candidates:h})}else i.unshift.apply(i,o.children)}}return s},au=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},rn=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||Km(e))&&!au(e)?0:e.tabIndex},Um=function(e,t){var r=rn(e);return r<0&&t&&!au(e)?0:r},qm=function(e,t){return e.tabIndex===t.tabIndex?e.documentOrder-t.documentOrder:e.tabIndex-t.tabIndex},lu=function(e){return e.tagName==="INPUT"},Gm=function(e){return lu(e)&&e.type==="hidden"},Jm=function(e){var t=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(r){return r.tagName==="SUMMARY"});return t},Zm=function(e,t){for(var r=0;r<e.length;r++)if(e[r].checked&&e[r].form===t)return e[r]},Ym=function(e){if(!e.name)return!0;var t=e.form||hs(e),r=function(a){return t.querySelectorAll('input[type="radio"][name="'+a+'"]')},s;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")s=r(window.CSS.escape(e.name));else try{s=r(e.name)}catch(o){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",o.message),!1}var i=Zm(s,e.form);return!i||i===e},Xm=function(e){return lu(e)&&e.type==="radio"},Qm=function(e){return Xm(e)&&!Ym(e)},e0=function(e){var t,r=e&&hs(e),s=(t=r)===null||t===void 0?void 0:t.host,i=!1;if(r&&r!==e){var o,a,l;for(i=!!((o=s)!==null&&o!==void 0&&(a=o.ownerDocument)!==null&&a!==void 0&&a.contains(s)||e!=null&&(l=e.ownerDocument)!==null&&l!==void 0&&l.contains(e));!i&&s;){var c,u,f;r=hs(s),s=(c=r)===null||c===void 0?void 0:c.host,i=!!((u=s)!==null&&u!==void 0&&(f=u.ownerDocument)!==null&&f!==void 0&&f.contains(s))}}return i},nl=function(e){var t=e.getBoundingClientRect(),r=t.width,s=t.height;return r===0&&s===0},t0=function(e,t){var r=t.displayCheck,s=t.getShadowRoot;if(getComputedStyle(e).visibility==="hidden")return!0;var i=gn.call(e,"details>summary:first-of-type"),o=i?e.parentElement:e;if(gn.call(o,"details:not([open]) *"))return!0;if(!r||r==="full"||r==="legacy-full"){if(typeof s=="function"){for(var a=e;e;){var l=e.parentElement,c=hs(e);if(l&&!l.shadowRoot&&s(l)===!0)return nl(e);e.assignedSlot?e=e.assignedSlot:!l&&c!==e.ownerDocument?e=c.host:e=l}e=a}if(e0(e))return!e.getClientRects().length;if(r!=="legacy-full")return!0}else if(r==="non-zero-area")return nl(e);return!1},n0=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var t=e.parentElement;t;){if(t.tagName==="FIELDSET"&&t.disabled){for(var r=0;r<t.children.length;r++){var s=t.children.item(r);if(s.tagName==="LEGEND")return gn.call(t,"fieldset[disabled] *")?!0:!s.contains(e)}return!0}t=t.parentElement}return!1},ms=function(e,t){return!(t.disabled||ps(t)||Gm(t)||t0(t,e)||Jm(t)||n0(t))},po=function(e,t){return!(Qm(t)||rn(t)<0||!ms(e,t))},r0=function(e){var t=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(t)||t>=0)},s0=function n(e){var t=[],r=[];return e.forEach(function(s,i){var o=!!s.scopeParent,a=o?s.scopeParent:s,l=Um(a,o),c=o?n(s.candidates):a;l===0?o?t.push.apply(t,c):t.push(a):r.push({documentOrder:i,tabIndex:l,item:s,isScope:o,content:c})}),r.sort(qm).reduce(function(s,i){return i.isScope?s.push.apply(s,i.content):s.push(i.content),s},[]).concat(t)},i0=function(e,t){t=t||{};var r;return t.getShadowRoot?r=ou([e],t.includeContainer,{filter:po.bind(null,t),flatten:!1,getShadowRoot:t.getShadowRoot,shadowRootFilter:r0}):r=iu(e,t.includeContainer,po.bind(null,t)),s0(r)},o0=function(e,t){t=t||{};var r;return t.getShadowRoot?r=ou([e],t.includeContainer,{filter:ms.bind(null,t),flatten:!0,getShadowRoot:t.getShadowRoot}):r=iu(e,t.includeContainer,ms.bind(null,t)),r},Tn=function(e,t){if(t=t||{},!e)throw new Error("No node provided");return gn.call(e,fs)===!1?!1:po(t,e)},a0=ru.concat("iframe").join(","),Li=function(e,t){if(t=t||{},!e)throw new Error("No node provided");return gn.call(e,a0)===!1?!1:ms(t,e)};/*!
* focus-trap 7.5.4
* @license MIT, https://github.com/focus-trap/focus-trap/blob/master/LICENSE
*/function rl(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),t.push.apply(t,r)}return t}function sl(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?rl(Object(t),!0).forEach(function(r){l0(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):rl(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function l0(n,e,t){return e=u0(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function c0(n,e){if(typeof n!="object"||n===null)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function u0(n){var e=c0(n,"string");return typeof e=="symbol"?e:String(e)}var il={activateTrap:function(e,t){if(e.length>0){var r=e[e.length-1];r!==t&&r.pause()}var s=e.indexOf(t);s===-1||e.splice(s,1),e.push(t)},deactivateTrap:function(e,t){var r=e.indexOf(t);r!==-1&&e.splice(r,1),e.length>0&&e[e.length-1].unpause()}},d0=function(e){return e.tagName&&e.tagName.toLowerCase()==="input"&&typeof e.select=="function"},f0=function(e){return(e==null?void 0:e.key)==="Escape"||(e==null?void 0:e.key)==="Esc"||(e==null?void 0:e.keyCode)===27},mr=function(e){return(e==null?void 0:e.key)==="Tab"||(e==null?void 0:e.keyCode)===9},h0=function(e){return mr(e)&&!e.shiftKey},p0=function(e){return mr(e)&&e.shiftKey},ol=function(e){return setTimeout(e,0)},al=function(e,t){var r=-1;return e.every(function(s,i){return t(s)?(r=i,!1):!0}),r},rr=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),s=1;s<t;s++)r[s-1]=arguments[s];return typeof e=="function"?e.apply(void 0,r):e},Wr=function(e){return e.target.shadowRoot&&typeof e.composedPath=="function"?e.composedPath()[0]:e.target},m0=[],g0=function(e,t){var r=(t==null?void 0:t.document)||document,s=(t==null?void 0:t.trapStack)||m0,i=sl({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0,isKeyForward:h0,isKeyBackward:p0},t),o={containers:[],containerGroups:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,delayInitialFocusTimer:void 0,recentNavEvent:void 0},a,l=function(C,k,D){return C&&C[k]!==void 0?C[k]:i[D||k]},c=function(C,k){var D=typeof(k==null?void 0:k.composedPath)=="function"?k.composedPath():void 0;return o.containerGroups.findIndex(function(U){var X=U.container,q=U.tabbableNodes;return X.contains(C)||(D==null?void 0:D.includes(X))||q.find(function(ie){return ie===C})})},u=function(C){var k=i[C];if(typeof k=="function"){for(var D=arguments.length,U=new Array(D>1?D-1:0),X=1;X<D;X++)U[X-1]=arguments[X];k=k.apply(void 0,U)}if(k===!0&&(k=void 0),!k){if(k===void 0||k===!1)return k;throw new Error("`".concat(C,"` was specified but was not a node, or did not return a node"))}var q=k;if(typeof k=="string"&&(q=r.querySelector(k),!q))throw new Error("`".concat(C,"` as selector refers to no known node"));return q},f=function(){var C=u("initialFocus");if(C===!1)return!1;if(C===void 0||!Li(C,i.tabbableOptions))if(c(r.activeElement)>=0)C=r.activeElement;else{var k=o.tabbableGroups[0],D=k&&k.firstTabbableNode;C=D||u("fallbackFocus")}if(!C)throw new Error("Your focus-trap needs to have at least one focusable element");return C},d=function(){if(o.containerGroups=o.containers.map(function(C){var k=i0(C,i.tabbableOptions),D=o0(C,i.tabbableOptions),U=k.length>0?k[0]:void 0,X=k.length>0?k[k.length-1]:void 0,q=D.find(function(ge){return Tn(ge)}),ie=D.slice().reverse().find(function(ge){return Tn(ge)}),Ce=!!k.find(function(ge){return rn(ge)>0});return{container:C,tabbableNodes:k,focusableNodes:D,posTabIndexesFound:Ce,firstTabbableNode:U,lastTabbableNode:X,firstDomTabbableNode:q,lastDomTabbableNode:ie,nextTabbableNode:function(it){var Zt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,ot=k.indexOf(it);return ot<0?Zt?D.slice(D.indexOf(it)+1).find(function(Yt){return Tn(Yt)}):D.slice(0,D.indexOf(it)).reverse().find(function(Yt){return Tn(Yt)}):k[ot+(Zt?1:-1)]}}}),o.tabbableGroups=o.containerGroups.filter(function(C){return C.tabbableNodes.length>0}),o.tabbableGroups.length<=0&&!u("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times");if(o.containerGroups.find(function(C){return C.posTabIndexesFound})&&o.containerGroups.length>1)throw new Error("At least one node with a positive tabindex was found in one of your focus-trap's multiple containers. Positive tabindexes are only supported in single-container focus-traps.")},h=function A(C){var k=C.activeElement;if(k)return k.shadowRoot&&k.shadowRoot.activeElement!==null?A(k.shadowRoot):k},p=function A(C){if(C!==!1&&C!==h(document)){if(!C||!C.focus){A(f());return}C.focus({preventScroll:!!i.preventScroll}),o.mostRecentlyFocusedNode=C,d0(C)&&C.select()}},m=function(C){var k=u("setReturnFocus",C);return k||(k===!1?!1:C)},g=function(C){var k=C.target,D=C.event,U=C.isBackward,X=U===void 0?!1:U;k=k||Wr(D),d();var q=null;if(o.tabbableGroups.length>0){var ie=c(k,D),Ce=ie>=0?o.containerGroups[ie]:void 0;if(ie<0)X?q=o.tabbableGroups[o.tabbableGroups.length-1].lastTabbableNode:q=o.tabbableGroups[0].firstTabbableNode;else if(X){var ge=al(o.tabbableGroups,function(Xt){var er=Xt.firstTabbableNode;return k===er});if(ge<0&&(Ce.container===k||Li(k,i.tabbableOptions)&&!Tn(k,i.tabbableOptions)&&!Ce.nextTabbableNode(k,!1))&&(ge=ie),ge>=0){var it=ge===0?o.tabbableGroups.length-1:ge-1,Zt=o.tabbableGroups[it];q=rn(k)>=0?Zt.lastTabbableNode:Zt.lastDomTabbableNode}else mr(D)||(q=Ce.nextTabbableNode(k,!1))}else{var ot=al(o.tabbableGroups,function(Xt){var er=Xt.lastTabbableNode;return k===er});if(ot<0&&(Ce.container===k||Li(k,i.tabbableOptions)&&!Tn(k,i.tabbableOptions)&&!Ce.nextTabbableNode(k))&&(ot=ie),ot>=0){var Yt=ot===o.tabbableGroups.length-1?0:ot+1,Qn=o.tabbableGroups[Yt];q=rn(k)>=0?Qn.firstTabbableNode:Qn.firstDomTabbableNode}else mr(D)||(q=Ce.nextTabbableNode(k))}}else q=u("fallbackFocus");return q},y=function(C){var k=Wr(C);if(!(c(k,C)>=0)){if(rr(i.clickOutsideDeactivates,C)){a.deactivate({returnFocus:i.returnFocusOnDeactivate});return}rr(i.allowOutsideClick,C)||C.preventDefault()}},v=function(C){var k=Wr(C),D=c(k,C)>=0;if(D||k instanceof Document)D&&(o.mostRecentlyFocusedNode=k);else{C.stopImmediatePropagation();var U,X=!0;if(o.mostRecentlyFocusedNode)if(rn(o.mostRecentlyFocusedNode)>0){var q=c(o.mostRecentlyFocusedNode),ie=o.containerGroups[q].tabbableNodes;if(ie.length>0){var Ce=ie.findIndex(function(ge){return ge===o.mostRecentlyFocusedNode});Ce>=0&&(i.isKeyForward(o.recentNavEvent)?Ce+1<ie.length&&(U=ie[Ce+1],X=!1):Ce-1>=0&&(U=ie[Ce-1],X=!1))}}else o.containerGroups.some(function(ge){return ge.tabbableNodes.some(function(it){return rn(it)>0})})||(X=!1);else X=!1;X&&(U=g({target:o.mostRecentlyFocusedNode,isBackward:i.isKeyBackward(o.recentNavEvent)})),p(U||o.mostRecentlyFocusedNode||f())}o.recentNavEvent=void 0},w=function(C){var k=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;o.recentNavEvent=C;var D=g({event:C,isBackward:k});D&&(mr(C)&&C.preventDefault(),p(D))},$=function(C){if(f0(C)&&rr(i.escapeDeactivates,C)!==!1){C.preventDefault(),a.deactivate();return}(i.isKeyForward(C)||i.isKeyBackward(C))&&w(C,i.isKeyBackward(C))},B=function(C){var k=Wr(C);c(k,C)>=0||rr(i.clickOutsideDeactivates,C)||rr(i.allowOutsideClick,C)||(C.preventDefault(),C.stopImmediatePropagation())},x=function(){if(o.active)return il.activateTrap(s,a),o.delayInitialFocusTimer=i.delayInitialFocus?ol(function(){p(f())}):p(f()),r.addEventListener("focusin",v,!0),r.addEventListener("mousedown",y,{capture:!0,passive:!1}),r.addEventListener("touchstart",y,{capture:!0,passive:!1}),r.addEventListener("click",B,{capture:!0,passive:!1}),r.addEventListener("keydown",$,{capture:!0,passive:!1}),a},j=function(){if(o.active)return r.removeEventListener("focusin",v,!0),r.removeEventListener("mousedown",y,!0),r.removeEventListener("touchstart",y,!0),r.removeEventListener("click",B,!0),r.removeEventListener("keydown",$,!0),a},se=function(C){var k=C.some(function(D){var U=Array.from(D.removedNodes);return U.some(function(X){return X===o.mostRecentlyFocusedNode})});k&&p(f())},T=typeof window<"u"&&"MutationObserver"in window?new MutationObserver(se):void 0,F=function(){T&&(T.disconnect(),o.active&&!o.paused&&o.containers.map(function(C){T.observe(C,{subtree:!0,childList:!0})}))};return a={get active(){return o.active},get paused(){return o.paused},activate:function(C){if(o.active)return this;var k=l(C,"onActivate"),D=l(C,"onPostActivate"),U=l(C,"checkCanFocusTrap");U||d(),o.active=!0,o.paused=!1,o.nodeFocusedBeforeActivation=r.activeElement,k==null||k();var X=function(){U&&d(),x(),F(),D==null||D()};return U?(U(o.containers.concat()).then(X,X),this):(X(),this)},deactivate:function(C){if(!o.active)return this;var k=sl({onDeactivate:i.onDeactivate,onPostDeactivate:i.onPostDeactivate,checkCanReturnFocus:i.checkCanReturnFocus},C);clearTimeout(o.delayInitialFocusTimer),o.delayInitialFocusTimer=void 0,j(),o.active=!1,o.paused=!1,F(),il.deactivateTrap(s,a);var D=l(k,"onDeactivate"),U=l(k,"onPostDeactivate"),X=l(k,"checkCanReturnFocus"),q=l(k,"returnFocus","returnFocusOnDeactivate");D==null||D();var ie=function(){ol(function(){q&&p(m(o.nodeFocusedBeforeActivation)),U==null||U()})};return q&&X?(X(m(o.nodeFocusedBeforeActivation)).then(ie,ie),this):(ie(),this)},pause:function(C){if(o.paused||!o.active)return this;var k=l(C,"onPause"),D=l(C,"onPostPause");return o.paused=!0,k==null||k(),j(),F(),D==null||D(),this},unpause:function(C){if(!o.paused||!o.active)return this;var k=l(C,"onUnpause"),D=l(C,"onPostUnpause");return o.paused=!1,k==null||k(),d(),x(),F(),D==null||D(),this},updateContainerElements:function(C){var k=[].concat(C).filter(Boolean);return o.containers=k.map(function(D){return typeof D=="string"?r.querySelector(D):D}),o.active&&d(),F(),this}},a.updateContainerElements(e),a};function y0(n){return new Proxy({},{get(){return n}})}function b0(n){return n.charAt(0).toUpperCase()+n.substr(1).toLowerCase()}var ll={htmlFor:"for",className:"class",onDoubleClick:"onDblclick",onChange:"onInput",onFocus:"onFocusin",onBlur:"onFocusout",defaultValue:"value",defaultChecked:"checked"};function v0(n){return n in ll?ll[n]:n.startsWith("on")?`on${b0(n.substr(2))}`:n.toLowerCase()}var Ot=y0(n=>{const e={};for(const t in n){const r=n[t];t==="children"?typeof r=="string"&&(e.innerHTML=r):e[v0(t)]=n[t]}return e});function C0(n,e){const{actions:t,state:r,context:s}=e??{},i=typeof n=="function"?n():n,o=s?i.withContext(s.value):i;return ze(()=>{o.start(r),o.state.can("SETUP")&&o.send("SETUP"),Rr(()=>{o.stop()})}),Fr(()=>{o.setOptions({actions:t})}),s&&Sr(s,o.setContext,{deep:!0}),o}function At(n,e){const t=C0(n,e),r=Ac(t.state);return ze(()=>{const s=t.subscribe(i=>{r.value=i});Rr(()=>{s==null||s()})}),[r,t.send,t]}var k0=ur("dialog").parts("trigger","backdrop","positioner","content","title","description","closeTrigger"),en=k0.build(),le=$c({getPositionerId:n=>{var e;return((e=n.ids)==null?void 0:e.positioner)??`dialog:${n.id}:positioner`},getBackdropId:n=>{var e;return((e=n.ids)==null?void 0:e.backdrop)??`dialog:${n.id}:backdrop`},getContentId:n=>{var e;return((e=n.ids)==null?void 0:e.content)??`dialog:${n.id}:content`},getTriggerId:n=>{var e;return((e=n.ids)==null?void 0:e.trigger)??`dialog:${n.id}:trigger`},getTitleId:n=>{var e;return((e=n.ids)==null?void 0:e.title)??`dialog:${n.id}:title`},getDescriptionId:n=>{var e;return((e=n.ids)==null?void 0:e.description)??`dialog:${n.id}:description`},getCloseTriggerId:n=>{var e;return((e=n.ids)==null?void 0:e.closeTrigger)??`dialog:${n.id}:close`},getContentEl:n=>le.getById(n,le.getContentId(n)),getTriggerEl:n=>le.getById(n,le.getTriggerId(n)),getTitleEl:n=>le.getById(n,le.getTitleId(n)),getDescriptionEl:n=>le.getById(n,le.getDescriptionId(n))});function Sn(n,e,t){const r=n.context["aria-label"],s=n.matches("open"),i=n.context.renderedElements;return{isOpen:s,open(){e("OPEN")},close(){e("CLOSE")},triggerProps:t.button({...en.trigger.attrs,dir:n.context.dir,id:le.getTriggerId(n.context),"aria-haspopup":"dialog",type:"button","aria-expanded":s,"data-state":s?"open":"closed","aria-controls":le.getContentId(n.context),onClick(){e("TOGGLE")}}),backdropProps:t.element({...en.backdrop.attrs,dir:n.context.dir,hidden:!s,id:le.getBackdropId(n.context),"data-state":s?"open":"closed"}),positionerProps:t.element({...en.positioner.attrs,dir:n.context.dir,id:le.getPositionerId(n.context),style:{pointerEvents:s?void 0:"none"}}),contentProps:t.element({...en.content.attrs,dir:n.context.dir,role:n.context.role,hidden:!s,id:le.getContentId(n.context),tabIndex:-1,"data-state":s?"open":"closed","aria-modal":!0,"aria-label":r||void 0,"aria-labelledby":r||!i.title?void 0:le.getTitleId(n.context),"aria-describedby":i.description?le.getDescriptionId(n.context):void 0}),titleProps:t.element({...en.title.attrs,dir:n.context.dir,id:le.getTitleId(n.context)}),descriptionProps:t.element({...en.description.attrs,dir:n.context.dir,id:le.getDescriptionId(n.context)}),closeTriggerProps:t.button({...en.closeTrigger.attrs,dir:n.context.dir,id:le.getCloseTriggerId(n.context),type:"button",onClick(o){o.stopPropagation(),e("CLOSE")}})}}function En(n){const e=ci(n);return eu({id:"dialog",initial:e.open?"open":"closed",context:{role:"dialog",renderedElements:{title:!0,description:!0},modal:!0,trapFocus:!0,preventScroll:!0,closeOnInteractOutside:!0,closeOnEscapeKeyDown:!0,restoreFocus:!0,...e},watch:{open:["toggleVisibility"]},states:{open:{entry:["checkRenderedElements"],activities:["trackDismissableElement","trapFocus","preventScroll","hideContentBelow"],on:{CLOSE:{target:"closed",actions:["invokeOnClose","restoreFocus"]},TOGGLE:{target:"closed",actions:["invokeOnClose","restoreFocus"]}}},closed:{on:{OPEN:{target:"open",actions:["invokeOnOpen"]},TOGGLE:{target:"open",actions:["invokeOnOpen"]}}}}},{activities:{trackDismissableElement(t,r,{send:s}){return nu(()=>le.getContentEl(t),{defer:!0,pointerBlocking:t.modal,exclude:[le.getTriggerEl(t)],onEscapeKeyDown(o){var a;t.closeOnEscapeKeyDown?s({type:"CLOSE",src:"escape-key"}):o.preventDefault(),(a=t.onEscapeKeyDown)==null||a.call(t,o)},onPointerDownOutside(o){var a;t.closeOnInteractOutside||o.preventDefault(),(a=t.onPointerDownOutside)==null||a.call(t,o)},onFocusOutside(o){var a;t.closeOnInteractOutside||o.preventDefault(),(a=t.onFocusOutside)==null||a.call(t,o)},onDismiss(){s({type:"CLOSE",src:"interact-outside"})}})},preventScroll(t){if(t.preventScroll)return Wm(le.getDoc(t))},trapFocus(t){if(!t.trapFocus||!t.modal)return;let r;return m1(()=>{const s=le.getContentEl(t);if(s){r=g0(s,{document:le.getDoc(t),escapeDeactivates:!1,preventScroll:!0,returnFocusOnDeactivate:!1,fallbackFocus:s,allowOutsideClick:!0,initialFocus:co(t.initialFocusEl)});try{r.activate()}catch{}}}),()=>r==null?void 0:r.deactivate()},hideContentBelow(t){return t.modal?Q1(()=>[le.getContentEl(t)],{defer:!0}):void 0}},actions:{checkRenderedElements(t){gt(()=>{t.renderedElements.title=!!le.getTitleEl(t),t.renderedElements.description=!!le.getDescriptionEl(t)})},invokeOnClose(t){var r;(r=t.onOpenChange)==null||r.call(t,{open:!1})},invokeOnOpen(t){var r;(r=t.onOpenChange)==null||r.call(t,{open:!0})},toggleVisibility(t,r,{send:s}){s({type:t.open?"OPEN":"CLOSE",src:"controlled"})},restoreFocus(t){t.restoreFocus&&gt(()=>{const r=co(t.finalFocusEl)??le.getTriggerEl(t);r==null||r.focus({preventScroll:!0})})}}})}const w0=n=>(Ct("data-v-b5679625"),n=n(),kt(),n),S0={key:0},E0=w0(()=>b("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none"},[b("path",{d:"M18 6L6 18",stroke:"#697E8E","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),b("path",{d:"M6 6L18 18",stroke:"#697E8E","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),x0=[E0],M0={class:"attachment-delete-body-container"},T0={class:"attachment-delete-body-content"},O0={class:"attachment-delete-footer"},A0=ee({__name:"AttachmentDelete",props:{fileData:{}},emits:["delete","close"],setup(n,{emit:e}){const t=e,{t:r}=Ve(),[s,i]=At(En({id:crypto.randomUUID(),onClose(){t("close")},onEsc(){t("close")},onOutsideClick(){t("close")}})),o=ce(()=>Sn(s.value,i,Ot));return ze(()=>{console.log(o.value.closeTriggerProps),o.value.open()}),(a,l)=>(E(),ue(Ut,{to:"body"},[o.value.isOpen?(E(),R("div",S0,[b("div",V(o.value.backdropProps,{class:"attachment-delete-backdrop"}),null,16),b("div",V(o.value.positionerProps,{class:"attachment-delete-container"}),[b("div",V(o.value.contentProps,{class:"attachment-delete-content"}),[b("h2",V(o.value.titleProps,{class:"attachment-delete-title"}),Y(N(r)("Delete attachment")),17),b("button",V(o.value.closeTriggerProps,{class:"attachment-delete-close"}),x0,16),b("div",M0,[b("div",T0,[b("span",null,[oi(Y(N(r)("Are you sure you wish to delete ")),1),b("strong",null,Y(a.fileData.name)+"?",1)])])]),b("div",O0,[b("button",V({class:"secondary-btn text-uppercase"},o.value.closeTriggerProps),Y(N(r)("Cancel")),17),b("button",V(o.value.closeTriggerProps,{class:"primary-btn text-uppercase",onClick:l[0]||(l[0]=c=>t("delete",a.fileData.id))}),Y(N(r)("Delete")),17)])],16)],16)])):ne("",!0)]))}}),N0=te(A0,[["__scopeId","data-v-b5679625"]]);function ke(n){this.content=n}ke.prototype={constructor:ke,find:function(n){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===n)return e;return-1},get:function(n){var e=this.find(n);return e==-1?void 0:this.content[e+1]},update:function(n,e,t){var r=t&&t!=n?this.remove(t):this,s=r.find(n),i=r.content.slice();return s==-1?i.push(t||n,e):(i[s+1]=e,t&&(i[s]=t)),new ke(i)},remove:function(n){var e=this.find(n);if(e==-1)return this;var t=this.content.slice();return t.splice(e,2),new ke(t)},addToStart:function(n,e){return new ke([n,e].concat(this.remove(n).content))},addToEnd:function(n,e){var t=this.remove(n).content.slice();return t.push(n,e),new ke(t)},addBefore:function(n,e,t){var r=this.remove(e),s=r.content.slice(),i=r.find(n);return s.splice(i==-1?s.length:i,0,e,t),new ke(s)},forEach:function(n){for(var e=0;e<this.content.length;e+=2)n(this.content[e],this.content[e+1])},prepend:function(n){return n=ke.from(n),n.size?new ke(n.content.concat(this.subtract(n).content)):this},append:function(n){return n=ke.from(n),n.size?new ke(this.subtract(n).content.concat(n.content)):this},subtract:function(n){var e=this;n=ke.from(n);for(var t=0;t<n.content.length;t+=2)e=e.remove(n.content[t]);return e},toObject:function(){var n={};return this.forEach(function(e,t){n[e]=t}),n},get size(){return this.content.length>>1}};ke.from=function(n){if(n instanceof ke)return n;var e=[];if(n)for(var t in n)e.push(t,n[t]);return new ke(e)};function cu(n,e,t){for(let r=0;;r++){if(r==n.childCount||r==e.childCount)return n.childCount==e.childCount?null:t;let s=n.child(r),i=e.child(r);if(s==i){t+=s.nodeSize;continue}if(!s.sameMarkup(i))return t;if(s.isText&&s.text!=i.text){for(let o=0;s.text[o]==i.text[o];o++)t++;return t}if(s.content.size||i.content.size){let o=cu(s.content,i.content,t+1);if(o!=null)return o}t+=s.nodeSize}}function uu(n,e,t,r){for(let s=n.childCount,i=e.childCount;;){if(s==0||i==0)return s==i?null:{a:t,b:r};let o=n.child(--s),a=e.child(--i),l=o.nodeSize;if(o==a){t-=l,r-=l;continue}if(!o.sameMarkup(a))return{a:t,b:r};if(o.isText&&o.text!=a.text){let c=0,u=Math.min(o.text.length,a.text.length);for(;c<u&&o.text[o.text.length-c-1]==a.text[a.text.length-c-1];)c++,t--,r--;return{a:t,b:r}}if(o.content.size||a.content.size){let c=uu(o.content,a.content,t-1,r-1);if(c)return c}t-=l,r-=l}}class S{constructor(e,t){if(this.content=e,this.size=t||0,t==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,t,r,s=0,i){for(let o=0,a=0;a<t;o++){let l=this.content[o],c=a+l.nodeSize;if(c>e&&r(l,s+a,i||null,o)!==!1&&l.content.size){let u=a+1;l.nodesBetween(Math.max(0,e-u),Math.min(l.content.size,t-u),r,s+u)}a=c}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,t,r,s){let i="",o=!0;return this.nodesBetween(e,t,(a,l)=>{let c=a.isText?a.text.slice(Math.max(e,l)-l,t-l):a.isLeaf?s?typeof s=="function"?s(a):s:a.type.spec.leafText?a.type.spec.leafText(a):"":"";a.isBlock&&(a.isLeaf&&c||a.isTextblock)&&r&&(o?o=!1:i+=r),i+=c},0),i}append(e){if(!e.size)return this;if(!this.size)return e;let t=this.lastChild,r=e.firstChild,s=this.content.slice(),i=0;for(t.isText&&t.sameMarkup(r)&&(s[s.length-1]=t.withText(t.text+r.text),i=1);i<e.content.length;i++)s.push(e.content[i]);return new S(s,this.size+e.size)}cut(e,t=this.size){if(e==0&&t==this.size)return this;let r=[],s=0;if(t>e)for(let i=0,o=0;o<t;i++){let a=this.content[i],l=o+a.nodeSize;l>e&&((o<e||l>t)&&(a.isText?a=a.cut(Math.max(0,e-o),Math.min(a.text.length,t-o)):a=a.cut(Math.max(0,e-o-1),Math.min(a.content.size,t-o-1))),r.push(a),s+=a.nodeSize),o=l}return new S(r,s)}cutByIndex(e,t){return e==t?S.empty:e==0&&t==this.content.length?this:new S(this.content.slice(e,t))}replaceChild(e,t){let r=this.content[e];if(r==t)return this;let s=this.content.slice(),i=this.size+t.nodeSize-r.nodeSize;return s[e]=t,new S(s,i)}addToStart(e){return new S([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new S(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t}maybeChild(e){return this.content[e]||null}forEach(e){for(let t=0,r=0;t<this.content.length;t++){let s=this.content[t];e(s,r,t),r+=s.nodeSize}}findDiffStart(e,t=0){return cu(this,e,t)}findDiffEnd(e,t=this.size,r=e.size){return uu(this,e,t,r)}findIndex(e,t=-1){if(e==0)return Kr(0,e);if(e==this.size)return Kr(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let r=0,s=0;;r++){let i=this.child(r),o=s+i.nodeSize;if(o>=e)return o==e||t>0?Kr(r+1,o):Kr(r,s);s=o}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,t){if(!t)return S.empty;if(!Array.isArray(t))throw new RangeError("Invalid input for Fragment.fromJSON");return new S(t.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return S.empty;let t,r=0;for(let s=0;s<e.length;s++){let i=e[s];r+=i.nodeSize,s&&i.isText&&e[s-1].sameMarkup(i)?(t||(t=e.slice(0,s)),t[t.length-1]=i.withText(t[t.length-1].text+i.text)):t&&t.push(i)}return new S(t||e,r)}static from(e){if(!e)return S.empty;if(e instanceof S)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new S([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}S.empty=new S([],0);const _i={index:0,offset:0};function Kr(n,e){return _i.index=n,_i.offset=e,_i}function gs(n,e){if(n===e)return!0;if(!(n&&typeof n=="object")||!(e&&typeof e=="object"))return!1;let t=Array.isArray(n);if(Array.isArray(e)!=t)return!1;if(t){if(n.length!=e.length)return!1;for(let r=0;r<n.length;r++)if(!gs(n[r],e[r]))return!1}else{for(let r in n)if(!(r in e)||!gs(n[r],e[r]))return!1;for(let r in e)if(!(r in n))return!1}return!0}let ae=class mo{constructor(e,t){this.type=e,this.attrs=t}addToSet(e){let t,r=!1;for(let s=0;s<e.length;s++){let i=e[s];if(this.eq(i))return e;if(this.type.excludes(i.type))t||(t=e.slice(0,s));else{if(i.type.excludes(this.type))return e;!r&&i.type.rank>this.type.rank&&(t||(t=e.slice(0,s)),t.push(this),r=!0),t&&t.push(i)}}return t||(t=e.slice()),r||t.push(this),t}removeFromSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e}isInSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1}eq(e){return this==e||this.type==e.type&&gs(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[t.type];if(!r)throw new RangeError(`There is no mark type ${t.type} in this schema`);return r.create(t.attrs)}static sameSet(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(t[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return mo.none;if(e instanceof mo)return[e];let t=e.slice();return t.sort((r,s)=>r.type.rank-s.type.rank),t}};ae.none=[];class ys extends Error{}class I{constructor(e,t,r){this.content=e,this.openStart=t,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,t){let r=fu(this.content,e+this.openStart,t);return r&&new I(r,this.openStart,this.openEnd)}removeBetween(e,t){return new I(du(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,t){if(!t)return I.empty;let r=t.openStart||0,s=t.openEnd||0;if(typeof r!="number"||typeof s!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new I(S.fromJSON(e,t.content),r,s)}static maxOpen(e,t=!0){let r=0,s=0;for(let i=e.firstChild;i&&!i.isLeaf&&(t||!i.type.spec.isolating);i=i.firstChild)r++;for(let i=e.lastChild;i&&!i.isLeaf&&(t||!i.type.spec.isolating);i=i.lastChild)s++;return new I(e,r,s)}}I.empty=new I(S.empty,0,0);function du(n,e,t){let{index:r,offset:s}=n.findIndex(e),i=n.maybeChild(r),{index:o,offset:a}=n.findIndex(t);if(s==e||i.isText){if(a!=t&&!n.child(o).isText)throw new RangeError("Removing non-flat range");return n.cut(0,e).append(n.cut(t))}if(r!=o)throw new RangeError("Removing non-flat range");return n.replaceChild(r,i.copy(du(i.content,e-s-1,t-s-1)))}function fu(n,e,t,r){let{index:s,offset:i}=n.findIndex(e),o=n.maybeChild(s);if(i==e||o.isText)return r&&!r.canReplace(s,s,t)?null:n.cut(0,e).append(t).append(n.cut(e));let a=fu(o.content,e-i-1,t);return a&&n.replaceChild(s,o.copy(a))}function I0(n,e,t){if(t.openStart>n.depth)throw new ys("Inserted content deeper than insertion position");if(n.depth-t.openStart!=e.depth-t.openEnd)throw new ys("Inconsistent open depths");return hu(n,e,t,0)}function hu(n,e,t,r){let s=n.index(r),i=n.node(r);if(s==e.index(r)&&r<n.depth-t.openStart){let o=hu(n,e,t,r+1);return i.copy(i.content.replaceChild(s,o))}else if(t.content.size)if(!t.openStart&&!t.openEnd&&n.depth==r&&e.depth==r){let o=n.parent,a=o.content;return dn(o,a.cut(0,n.parentOffset).append(t.content).append(a.cut(e.parentOffset)))}else{let{start:o,end:a}=P0(t,n);return dn(i,mu(n,o,a,e,r))}else return dn(i,bs(n,e,r))}function pu(n,e){if(!e.type.compatibleContent(n.type))throw new ys("Cannot join "+e.type.name+" onto "+n.type.name)}function go(n,e,t){let r=n.node(t);return pu(r,e.node(t)),r}function un(n,e){let t=e.length-1;t>=0&&n.isText&&n.sameMarkup(e[t])?e[t]=n.withText(e[t].text+n.text):e.push(n)}function gr(n,e,t,r){let s=(e||n).node(t),i=0,o=e?e.index(t):s.childCount;n&&(i=n.index(t),n.depth>t?i++:n.textOffset&&(un(n.nodeAfter,r),i++));for(let a=i;a<o;a++)un(s.child(a),r);e&&e.depth==t&&e.textOffset&&un(e.nodeBefore,r)}function dn(n,e){return n.type.checkContent(e),n.copy(e)}function mu(n,e,t,r,s){let i=n.depth>s&&go(n,e,s+1),o=r.depth>s&&go(t,r,s+1),a=[];return gr(null,n,s,a),i&&o&&e.index(s)==t.index(s)?(pu(i,o),un(dn(i,mu(n,e,t,r,s+1)),a)):(i&&un(dn(i,bs(n,e,s+1)),a),gr(e,t,s,a),o&&un(dn(o,bs(t,r,s+1)),a)),gr(r,null,s,a),new S(a)}function bs(n,e,t){let r=[];if(gr(null,n,t,r),n.depth>t){let s=go(n,e,t+1);un(dn(s,bs(n,e,t+1)),r)}return gr(e,null,t,r),new S(r)}function P0(n,e){let t=e.depth-n.openStart,s=e.node(t).copy(n.content);for(let i=t-1;i>=0;i--)s=e.node(i).copy(S.from(s));return{start:s.resolveNoCache(n.openStart+t),end:s.resolveNoCache(s.content.size-n.openEnd-t)}}class Mr{constructor(e,t,r){this.pos=e,this.path=t,this.parentOffset=r,this.depth=t.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,t=this.index(this.depth);if(t==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],s=e.child(t);return r?e.child(t).cut(r):s}get nodeBefore(){let e=this.index(this.depth),t=this.pos-this.path[this.path.length-1];return t?this.parent.child(e).cut(0,t):e==0?null:this.parent.child(e-1)}posAtIndex(e,t){t=this.resolveDepth(t);let r=this.path[t*3],s=t==0?0:this.path[t*3-1]+1;for(let i=0;i<e;i++)s+=r.child(i).nodeSize;return s}marks(){let e=this.parent,t=this.index();if(e.content.size==0)return ae.none;if(this.textOffset)return e.child(t).marks;let r=e.maybeChild(t-1),s=e.maybeChild(t);if(!r){let a=r;r=s,s=a}let i=r.marks;for(var o=0;o<i.length;o++)i[o].type.spec.inclusive===!1&&(!s||!i[o].isInSet(s.marks))&&(i=i[o--].removeFromSet(i));return i}marksAcross(e){let t=this.parent.maybeChild(this.index());if(!t||!t.isInline)return null;let r=t.marks,s=e.parent.maybeChild(e.index());for(var i=0;i<r.length;i++)r[i].type.spec.inclusive===!1&&(!s||!r[i].isInSet(s.marks))&&(r=r[i--].removeFromSet(r));return r}sharedDepth(e){for(let t=this.depth;t>0;t--)if(this.start(t)<=e&&this.end(t)>=e)return t;return 0}blockRange(e=this,t){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!t||t(this.node(r))))return new vs(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let t=1;t<=this.depth;t++)e+=(e?"/":"")+this.node(t).type.name+"_"+this.index(t-1);return e+":"+this.parentOffset}static resolve(e,t){if(!(t>=0&&t<=e.content.size))throw new RangeError("Position "+t+" out of range");let r=[],s=0,i=t;for(let o=e;;){let{index:a,offset:l}=o.content.findIndex(i),c=i-l;if(r.push(o,a,s+l),!c||(o=o.child(a),o.isText))break;i=c-1,s+=l+1}return new Mr(t,r,i)}static resolveCached(e,t){for(let s=0;s<Ri.length;s++){let i=Ri[s];if(i.pos==t&&i.doc==e)return i}let r=Ri[Fi]=Mr.resolve(e,t);return Fi=(Fi+1)%D0,r}}let Ri=[],Fi=0,D0=12;class vs{constructor(e,t,r){this.$from=e,this.$to=t,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const L0=Object.create(null);let fn=class yo{constructor(e,t,r,s=ae.none){this.type=e,this.attrs=t,this.marks=s,this.content=r||S.empty}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,t,r,s=0){this.content.nodesBetween(e,t,r,s,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,t,r,s){return this.content.textBetween(e,t,r,s)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,t,r){return this.type==e&&gs(this.attrs,t||e.defaultAttrs||L0)&&ae.sameSet(this.marks,r||ae.none)}copy(e=null){return e==this.content?this:new yo(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new yo(this.type,this.attrs,this.content,e)}cut(e,t=this.content.size){return e==0&&t==this.content.size?this:this.copy(this.content.cut(e,t))}slice(e,t=this.content.size,r=!1){if(e==t)return I.empty;let s=this.resolve(e),i=this.resolve(t),o=r?0:s.sharedDepth(t),a=s.start(o),c=s.node(o).content.cut(s.pos-a,i.pos-a);return new I(c,s.depth-o,i.depth-o)}replace(e,t,r){return I0(this.resolve(e),this.resolve(t),r)}nodeAt(e){for(let t=this;;){let{index:r,offset:s}=t.content.findIndex(e);if(t=t.maybeChild(r),!t)return null;if(s==e||t.isText)return t;e-=s+1}}childAfter(e){let{index:t,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(t),index:t,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:t,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(t),index:t,offset:r};let s=this.content.child(t-1);return{node:s,index:t-1,offset:r-s.nodeSize}}resolve(e){return Mr.resolveCached(this,e)}resolveNoCache(e){return Mr.resolve(this,e)}rangeHasMark(e,t,r){let s=!1;return t>e&&this.nodesBetween(e,t,i=>(r.isInSet(i.marks)&&(s=!0),!s)),s}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),gu(this.marks,e)}contentMatchAt(e){let t=this.type.contentMatch.matchFragment(this.content,0,e);if(!t)throw new Error("Called contentMatchAt on a node with invalid content");return t}canReplace(e,t,r=S.empty,s=0,i=r.childCount){let o=this.contentMatchAt(e).matchFragment(r,s,i),a=o&&o.matchFragment(this.content,t);if(!a||!a.validEnd)return!1;for(let l=s;l<i;l++)if(!this.type.allowsMarks(r.child(l).marks))return!1;return!0}canReplaceWith(e,t,r,s){if(s&&!this.type.allowsMarks(s))return!1;let i=this.contentMatchAt(e).matchType(r),o=i&&i.matchFragment(this.content,t);return o?o.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content);let e=ae.none;for(let t=0;t<this.marks.length;t++)e=this.marks[t].addToSet(e);if(!ae.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(t=>t.type.name)}`);this.content.forEach(t=>t.check())}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(t=>t.toJSON())),e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Node.fromJSON");let r=null;if(t.marks){if(!Array.isArray(t.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=t.marks.map(e.markFromJSON)}if(t.type=="text"){if(typeof t.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(t.text,r)}let s=S.fromJSON(e,t.content);return e.nodeType(t.type).create(t.attrs,s,r)}};fn.prototype.text=void 0;class Cs extends fn{constructor(e,t,r,s){if(super(e,t,null,s),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):gu(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,t){return this.text.slice(e,t)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new Cs(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new Cs(this.type,this.attrs,e,this.marks)}cut(e=0,t=this.text.length){return e==0&&t==this.text.length?this:this.withText(this.text.slice(e,t))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function gu(n,e){for(let t=n.length-1;t>=0;t--)e=n[t].type.name+"("+e+")";return e}class yn{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,t){let r=new _0(e,t);if(r.next==null)return yn.empty;let s=yu(r);r.next&&r.err("Unexpected trailing text");let i=z0(V0(s));return j0(i,r),i}matchType(e){for(let t=0;t<this.next.length;t++)if(this.next[t].type==e)return this.next[t].next;return null}matchFragment(e,t=0,r=e.childCount){let s=this;for(let i=t;s&&i<r;i++)s=s.matchType(e.child(i).type);return s}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:t}=this.next[e];if(!(t.isText||t.hasRequiredAttrs()))return t}return null}compatible(e){for(let t=0;t<this.next.length;t++)for(let r=0;r<e.next.length;r++)if(this.next[t].type==e.next[r].type)return!0;return!1}fillBefore(e,t=!1,r=0){let s=[this];function i(o,a){let l=o.matchFragment(e,r);if(l&&(!t||l.validEnd))return S.from(a.map(c=>c.createAndFill()));for(let c=0;c<o.next.length;c++){let{type:u,next:f}=o.next[c];if(!(u.isText||u.hasRequiredAttrs())&&s.indexOf(f)==-1){s.push(f);let d=i(f,a.concat(u));if(d)return d}}return null}return i(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let t=this.computeWrapping(e);return this.wrapCache.push(e,t),t}computeWrapping(e){let t=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let s=r.shift(),i=s.match;if(i.matchType(e)){let o=[];for(let a=s;a.type;a=a.via)o.push(a.type);return o.reverse()}for(let o=0;o<i.next.length;o++){let{type:a,next:l}=i.next[o];!a.isLeaf&&!a.hasRequiredAttrs()&&!(a.name in t)&&(!s.type||l.validEnd)&&(r.push({match:a.contentMatch,type:a,via:s}),t[a.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function t(r){e.push(r);for(let s=0;s<r.next.length;s++)e.indexOf(r.next[s].next)==-1&&t(r.next[s].next)}return t(this),e.map((r,s)=>{let i=s+(r.validEnd?"*":" ")+" ";for(let o=0;o<r.next.length;o++)i+=(o?", ":"")+r.next[o].type.name+"->"+e.indexOf(r.next[o].next);return i}).join(`
`)}}yn.empty=new yn(!0);class _0{constructor(e,t){this.string=e,this.nodeTypes=t,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function yu(n){let e=[];do e.push(R0(n));while(n.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function R0(n){let e=[];do e.push(F0(n));while(n.next&&n.next!=")"&&n.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function F0(n){let e=H0(n);for(;;)if(n.eat("+"))e={type:"plus",expr:e};else if(n.eat("*"))e={type:"star",expr:e};else if(n.eat("?"))e={type:"opt",expr:e};else if(n.eat("{"))e=B0(n,e);else break;return e}function cl(n){/\D/.test(n.next)&&n.err("Expected number, got '"+n.next+"'");let e=Number(n.next);return n.pos++,e}function B0(n,e){let t=cl(n),r=t;return n.eat(",")&&(n.next!="}"?r=cl(n):r=-1),n.eat("}")||n.err("Unclosed braced range"),{type:"range",min:t,max:r,expr:e}}function $0(n,e){let t=n.nodeTypes,r=t[e];if(r)return[r];let s=[];for(let i in t){let o=t[i];o.groups.indexOf(e)>-1&&s.push(o)}return s.length==0&&n.err("No node type or group '"+e+"' found"),s}function H0(n){if(n.eat("(")){let e=yu(n);return n.eat(")")||n.err("Missing closing paren"),e}else if(/\W/.test(n.next))n.err("Unexpected token '"+n.next+"'");else{let e=$0(n,n.next).map(t=>(n.inline==null?n.inline=t.isInline:n.inline!=t.isInline&&n.err("Mixing inline and block content"),{type:"name",value:t}));return n.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function V0(n){let e=[[]];return s(i(n,0),t()),e;function t(){return e.push([])-1}function r(o,a,l){let c={term:l,to:a};return e[o].push(c),c}function s(o,a){o.forEach(l=>l.to=a)}function i(o,a){if(o.type=="choice")return o.exprs.reduce((l,c)=>l.concat(i(c,a)),[]);if(o.type=="seq")for(let l=0;;l++){let c=i(o.exprs[l],a);if(l==o.exprs.length-1)return c;s(c,a=t())}else if(o.type=="star"){let l=t();return r(a,l),s(i(o.expr,l),l),[r(l)]}else if(o.type=="plus"){let l=t();return s(i(o.expr,a),l),s(i(o.expr,l),l),[r(l)]}else{if(o.type=="opt")return[r(a)].concat(i(o.expr,a));if(o.type=="range"){let l=a;for(let c=0;c<o.min;c++){let u=t();s(i(o.expr,l),u),l=u}if(o.max==-1)s(i(o.expr,l),l);else for(let c=o.min;c<o.max;c++){let u=t();r(l,u),s(i(o.expr,l),u),l=u}return[r(l)]}else{if(o.type=="name")return[r(a,void 0,o.value)];throw new Error("Unknown expr type")}}}}function bu(n,e){return e-n}function ul(n,e){let t=[];return r(e),t.sort(bu);function r(s){let i=n[s];if(i.length==1&&!i[0].term)return r(i[0].to);t.push(s);for(let o=0;o<i.length;o++){let{term:a,to:l}=i[o];!a&&t.indexOf(l)==-1&&r(l)}}}function z0(n){let e=Object.create(null);return t(ul(n,0));function t(r){let s=[];r.forEach(o=>{n[o].forEach(({term:a,to:l})=>{if(!a)return;let c;for(let u=0;u<s.length;u++)s[u][0]==a&&(c=s[u][1]);ul(n,l).forEach(u=>{c||s.push([a,c=[]]),c.indexOf(u)==-1&&c.push(u)})})});let i=e[r.join(",")]=new yn(r.indexOf(n.length-1)>-1);for(let o=0;o<s.length;o++){let a=s[o][1].sort(bu);i.next.push({type:s[o][0],next:e[a.join(",")]||t(a)})}return i}}function j0(n,e){for(let t=0,r=[n];t<r.length;t++){let s=r[t],i=!s.validEnd,o=[];for(let a=0;a<s.next.length;a++){let{type:l,next:c}=s.next[a];o.push(l.name),i&&!(l.isText||l.hasRequiredAttrs())&&(i=!1),r.indexOf(c)==-1&&r.push(c)}i&&e.err("Only non-generatable nodes ("+o.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function vu(n){let e=Object.create(null);for(let t in n){let r=n[t];if(!r.hasDefault)return null;e[t]=r.default}return e}function Cu(n,e){let t=Object.create(null);for(let r in n){let s=e&&e[r];if(s===void 0){let i=n[r];if(i.hasDefault)s=i.default;else throw new RangeError("No value supplied for attribute "+r)}t[r]=s}return t}function ku(n){let e=Object.create(null);if(n)for(let t in n)e[t]=new W0(n[t]);return e}let dl=class wu{constructor(e,t,r){this.name=e,this.schema=t,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=ku(r.attrs),this.defaultAttrs=vu(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==yn.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:Cu(this.attrs,e)}create(e=null,t,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new fn(this,this.computeAttrs(e),S.from(t),ae.setFrom(r))}createChecked(e=null,t,r){return t=S.from(t),this.checkContent(t),new fn(this,this.computeAttrs(e),t,ae.setFrom(r))}createAndFill(e=null,t,r){if(e=this.computeAttrs(e),t=S.from(t),t.size){let o=this.contentMatch.fillBefore(t);if(!o)return null;t=o.append(t)}let s=this.contentMatch.matchFragment(t),i=s&&s.fillBefore(S.empty,!0);return i?new fn(this,e,t.append(i),ae.setFrom(r)):null}validContent(e){let t=this.contentMatch.matchFragment(e);if(!t||!t.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let t=0;t<e.length;t++)if(!this.allowsMarkType(e[t].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let t;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?t&&t.push(e[r]):t||(t=e.slice(0,r));return t?t.length?t:ae.none:e}static compile(e,t){let r=Object.create(null);e.forEach((i,o)=>r[i]=new wu(i,t,o));let s=t.spec.topNode||"doc";if(!r[s])throw new RangeError("Schema is missing its top node type ('"+s+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let i in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};class W0{constructor(e){this.hasDefault=Object.prototype.hasOwnProperty.call(e,"default"),this.default=e.default}get isRequired(){return!this.hasDefault}}class ui{constructor(e,t,r,s){this.name=e,this.rank=t,this.schema=r,this.spec=s,this.attrs=ku(s.attrs),this.excluded=null;let i=vu(this.attrs);this.instance=i?new ae(this,i):null}create(e=null){return!e&&this.instance?this.instance:new ae(this,Cu(this.attrs,e))}static compile(e,t){let r=Object.create(null),s=0;return e.forEach((i,o)=>r[i]=new ui(i,s++,t,o)),r}removeFromSet(e){for(var t=0;t<e.length;t++)e[t].type==this&&(e=e.slice(0,t).concat(e.slice(t+1)),t--);return e}isInSet(e){for(let t=0;t<e.length;t++)if(e[t].type==this)return e[t]}excludes(e){return this.excluded.indexOf(e)>-1}}class K0{constructor(e){this.cached=Object.create(null);let t=this.spec={};for(let s in e)t[s]=e[s];t.nodes=ke.from(e.nodes),t.marks=ke.from(e.marks||{}),this.nodes=dl.compile(this.spec.nodes,this),this.marks=ui.compile(this.spec.marks,this);let r=Object.create(null);for(let s in this.nodes){if(s in this.marks)throw new RangeError(s+" can not be both a node and a mark");let i=this.nodes[s],o=i.spec.content||"",a=i.spec.marks;i.contentMatch=r[o]||(r[o]=yn.parse(o,this.nodes)),i.inlineContent=i.contentMatch.inlineContent,i.markSet=a=="_"?null:a?fl(this,a.split(" ")):a==""||!i.inlineContent?[]:null}for(let s in this.marks){let i=this.marks[s],o=i.spec.excludes;i.excluded=o==null?[i]:o==""?[]:fl(this,o.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,t=null,r,s){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof dl){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(t,r,s)}text(e,t){let r=this.nodes.text;return new Cs(r,r.defaultAttrs,e,ae.setFrom(t))}mark(e,t){return typeof e=="string"&&(e=this.marks[e]),e.create(t)}nodeFromJSON(e){return fn.fromJSON(this,e)}markFromJSON(e){return ae.fromJSON(this,e)}nodeType(e){let t=this.nodes[e];if(!t)throw new RangeError("Unknown node type: "+e);return t}}function fl(n,e){let t=[];for(let r=0;r<e.length;r++){let s=e[r],i=n.marks[s],o=i;if(i)t.push(i);else for(let a in n.marks){let l=n.marks[a];(s=="_"||l.spec.group&&l.spec.group.split(" ").indexOf(s)>-1)&&t.push(o=l)}if(!o)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return t}class Kn{constructor(e,t){this.schema=e,this.rules=t,this.tags=[],this.styles=[],t.forEach(r=>{r.tag?this.tags.push(r):r.style&&this.styles.push(r)}),this.normalizeLists=!this.tags.some(r=>{if(!/^(ul|ol)\b/.test(r.tag)||!r.node)return!1;let s=e.nodes[r.node];return s.contentMatch.matchType(s)})}parse(e,t={}){let r=new pl(this,t,!1);return r.addAll(e,t.from,t.to),r.finish()}parseSlice(e,t={}){let r=new pl(this,t,!0);return r.addAll(e,t.from,t.to),I.maxOpen(r.finish())}matchTag(e,t,r){for(let s=r?this.tags.indexOf(r)+1:0;s<this.tags.length;s++){let i=this.tags[s];if(G0(e,i.tag)&&(i.namespace===void 0||e.namespaceURI==i.namespace)&&(!i.context||t.matchesContext(i.context))){if(i.getAttrs){let o=i.getAttrs(e);if(o===!1)continue;i.attrs=o||void 0}return i}}}matchStyle(e,t,r,s){for(let i=s?this.styles.indexOf(s)+1:0;i<this.styles.length;i++){let o=this.styles[i],a=o.style;if(!(a.indexOf(e)!=0||o.context&&!r.matchesContext(o.context)||a.length>e.length&&(a.charCodeAt(e.length)!=61||a.slice(e.length+1)!=t))){if(o.getAttrs){let l=o.getAttrs(t);if(l===!1)continue;o.attrs=l||void 0}return o}}}static schemaRules(e){let t=[];function r(s){let i=s.priority==null?50:s.priority,o=0;for(;o<t.length;o++){let a=t[o];if((a.priority==null?50:a.priority)<i)break}t.splice(o,0,s)}for(let s in e.marks){let i=e.marks[s].spec.parseDOM;i&&i.forEach(o=>{r(o=ml(o)),o.mark||o.ignore||o.clearMark||(o.mark=s)})}for(let s in e.nodes){let i=e.nodes[s].spec.parseDOM;i&&i.forEach(o=>{r(o=ml(o)),o.node||o.ignore||o.mark||(o.node=s)})}return t}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new Kn(e,Kn.schemaRules(e)))}}const Su={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},U0={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},Eu={ol:!0,ul:!0},ks=1,ws=2,yr=4;function hl(n,e,t){return e!=null?(e?ks:0)|(e==="full"?ws:0):n&&n.whitespace=="pre"?ks|ws:t&~yr}class Ur{constructor(e,t,r,s,i,o,a){this.type=e,this.attrs=t,this.marks=r,this.pendingMarks=s,this.solid=i,this.options=a,this.content=[],this.activeMarks=ae.none,this.stashMarks=[],this.match=o||(a&yr?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let t=this.type.contentMatch.fillBefore(S.from(e));if(t)this.match=this.type.contentMatch.matchFragment(t);else{let r=this.type.contentMatch,s;return(s=r.findWrapping(e.type))?(this.match=r,s):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&ks)){let r=this.content[this.content.length-1],s;if(r&&r.isText&&(s=/[ \t\r\n\u000c]+$/.exec(r.text))){let i=r;r.text.length==s[0].length?this.content.pop():this.content[this.content.length-1]=i.withText(i.text.slice(0,i.text.length-s[0].length))}}let t=S.from(this.content);return!e&&this.match&&(t=t.append(this.match.fillBefore(S.empty,!0))),this.type?this.type.create(this.attrs,t,this.marks):t}popFromStashMark(e){for(let t=this.stashMarks.length-1;t>=0;t--)if(e.eq(this.stashMarks[t]))return this.stashMarks.splice(t,1)[0]}applyPending(e){for(let t=0,r=this.pendingMarks;t<r.length;t++){let s=r[t];(this.type?this.type.allowsMarkType(s.type):Z0(s.type,e))&&!s.isInSet(this.activeMarks)&&(this.activeMarks=s.addToSet(this.activeMarks),this.pendingMarks=s.removeFromSet(this.pendingMarks))}}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!Su.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class pl{constructor(e,t,r){this.parser=e,this.options=t,this.isOpen=r,this.open=0;let s=t.topNode,i,o=hl(null,t.preserveWhitespace,0)|(r?yr:0);s?i=new Ur(s.type,s.attrs,ae.none,ae.none,!0,t.topMatch||s.type.contentMatch,o):r?i=new Ur(null,null,ae.none,ae.none,!0,null,o):i=new Ur(e.schema.topNodeType,null,ae.none,ae.none,!0,null,o),this.nodes=[i],this.find=t.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e){e.nodeType==3?this.addTextNode(e):e.nodeType==1&&this.addElement(e)}withStyleRules(e,t){let r=e.getAttribute("style");if(!r)return t();let s=this.readStyles(J0(r));if(!s)return;let[i,o]=s,a=this.top;for(let l=0;l<o.length;l++)this.removePendingMark(o[l],a);for(let l=0;l<i.length;l++)this.addPendingMark(i[l]);t();for(let l=0;l<i.length;l++)this.removePendingMark(i[l],a);for(let l=0;l<o.length;l++)this.addPendingMark(o[l])}addTextNode(e){let t=e.nodeValue,r=this.top;if(r.options&ws||r.inlineContext(e)||/[^ \t\r\n\u000c]/.test(t)){if(r.options&ks)r.options&ws?t=t.replace(/\r\n?/g,`
`):t=t.replace(/\r?\n|\r/g," ");else if(t=t.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(t)&&this.open==this.nodes.length-1){let s=r.content[r.content.length-1],i=e.previousSibling;(!s||i&&i.nodeName=="BR"||s.isText&&/[ \t\r\n\u000c]$/.test(s.text))&&(t=t.slice(1))}t&&this.insertNode(this.parser.schema.text(t)),this.findInText(e)}else this.findInside(e)}addElement(e,t){let r=e.nodeName.toLowerCase(),s;Eu.hasOwnProperty(r)&&this.parser.normalizeLists&&q0(e);let i=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(s=this.parser.matchTag(e,this,t));if(i?i.ignore:U0.hasOwnProperty(r))this.findInside(e),this.ignoreFallback(e);else if(!i||i.skip||i.closeParent){i&&i.closeParent?this.open=Math.max(0,this.open-1):i&&i.skip.nodeType&&(e=i.skip);let o,a=this.top,l=this.needsBlock;if(Su.hasOwnProperty(r))a.content.length&&a.content[0].isInline&&this.open&&(this.open--,a=this.top),o=!0,a.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e);return}i&&i.skip?this.addAll(e):this.withStyleRules(e,()=>this.addAll(e)),o&&this.sync(a),this.needsBlock=l}else this.withStyleRules(e,()=>{this.addElementByRule(e,i,i.consuming===!1?s:void 0)})}leafFallback(e){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`))}ignoreFallback(e){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"))}readStyles(e){let t=ae.none,r=ae.none;for(let s=0;s<e.length;s+=2)for(let i=void 0;;){let o=this.parser.matchStyle(e[s],e[s+1],this,i);if(!o)break;if(o.ignore)return null;if(o.clearMark?this.top.pendingMarks.concat(this.top.activeMarks).forEach(a=>{o.clearMark(a)&&(r=a.addToSet(r))}):t=this.parser.schema.marks[o.mark].create(o.attrs).addToSet(t),o.consuming===!1)i=o;else break}return[t,r]}addElementByRule(e,t,r){let s,i,o;t.node?(i=this.parser.schema.nodes[t.node],i.isLeaf?this.insertNode(i.create(t.attrs))||this.leafFallback(e):s=this.enter(i,t.attrs||null,t.preserveWhitespace)):(o=this.parser.schema.marks[t.mark].create(t.attrs),this.addPendingMark(o));let a=this.top;if(i&&i.isLeaf)this.findInside(e);else if(r)this.addElement(e,r);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach(l=>this.insertNode(l));else{let l=e;typeof t.contentElement=="string"?l=e.querySelector(t.contentElement):typeof t.contentElement=="function"?l=t.contentElement(e):t.contentElement&&(l=t.contentElement),this.findAround(e,l,!0),this.addAll(l)}s&&this.sync(a)&&this.open--,o&&this.removePendingMark(o,a)}addAll(e,t,r){let s=t||0;for(let i=t?e.childNodes[t]:e.firstChild,o=r==null?null:e.childNodes[r];i!=o;i=i.nextSibling,++s)this.findAtPoint(e,s),this.addDOM(i);this.findAtPoint(e,s)}findPlace(e){let t,r;for(let s=this.open;s>=0;s--){let i=this.nodes[s],o=i.findWrapping(e);if(o&&(!t||t.length>o.length)&&(t=o,r=i,!o.length)||i.solid)break}if(!t)return!1;this.sync(r);for(let s=0;s<t.length;s++)this.enterInner(t[s],null,!1);return!0}insertNode(e){if(e.isInline&&this.needsBlock&&!this.top.type){let t=this.textblockFromContext();t&&this.enterInner(t)}if(this.findPlace(e)){this.closeExtra();let t=this.top;t.applyPending(e.type),t.match&&(t.match=t.match.matchType(e.type));let r=t.activeMarks;for(let s=0;s<e.marks.length;s++)(!t.type||t.type.allowsMarkType(e.marks[s].type))&&(r=e.marks[s].addToSet(r));return t.content.push(e.mark(r)),!0}return!1}enter(e,t,r){let s=this.findPlace(e.create(t));return s&&this.enterInner(e,t,!0,r),s}enterInner(e,t=null,r=!1,s){this.closeExtra();let i=this.top;i.applyPending(e),i.match=i.match&&i.match.matchType(e);let o=hl(e,s,i.options);i.options&yr&&i.content.length==0&&(o|=yr),this.nodes.push(new Ur(e,t,i.activeMarks,i.pendingMarks,r,null,o)),this.open++}closeExtra(e=!1){let t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)}sync(e){for(let t=this.open;t>=0;t--)if(this.nodes[t]==e)return this.open=t,!0;return!1}get currentPos(){this.closeExtra();let e=0;for(let t=this.open;t>=0;t--){let r=this.nodes[t].content;for(let s=r.length-1;s>=0;s--)e+=r[s].nodeSize;t&&e++}return e}findAtPoint(e,t){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==t&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].pos==null&&e.nodeType==1&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)}findAround(e,t,r){if(e!=t&&this.find)for(let s=0;s<this.find.length;s++)this.find[s].pos==null&&e.nodeType==1&&e.contains(this.find[s].node)&&t.compareDocumentPosition(this.find[s].node)&(r?2:4)&&(this.find[s].pos=this.currentPos)}findInText(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let t=e.split("/"),r=this.options.context,s=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),i=-(r?r.depth+1:0)+(s?0:1),o=(a,l)=>{for(;a>=0;a--){let c=t[a];if(c==""){if(a==t.length-1||a==0)continue;for(;l>=i;l--)if(o(a-1,l))return!0;return!1}else{let u=l>0||l==0&&s?this.nodes[l].type:r&&l>=i?r.node(l-i).type:null;if(!u||u.name!=c&&u.groups.indexOf(c)==-1)return!1;l--}}return!0};return o(t.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let t=e.depth;t>=0;t--){let r=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let t in this.parser.schema.nodes){let r=this.parser.schema.nodes[t];if(r.isTextblock&&r.defaultAttrs)return r}}addPendingMark(e){let t=Y0(e,this.top.pendingMarks);t&&this.top.stashMarks.push(t),this.top.pendingMarks=e.addToSet(this.top.pendingMarks)}removePendingMark(e,t){for(let r=this.open;r>=0;r--){let s=this.nodes[r];if(s.pendingMarks.lastIndexOf(e)>-1)s.pendingMarks=e.removeFromSet(s.pendingMarks);else{s.activeMarks=e.removeFromSet(s.activeMarks);let o=s.popFromStashMark(e);o&&s.type&&s.type.allowsMarkType(o.type)&&(s.activeMarks=o.addToSet(s.activeMarks))}if(s==t)break}}}function q0(n){for(let e=n.firstChild,t=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&Eu.hasOwnProperty(r)&&t?(t.appendChild(e),e=t):r=="li"?t=e:r&&(t=null)}}function G0(n,e){return(n.matches||n.msMatchesSelector||n.webkitMatchesSelector||n.mozMatchesSelector).call(n,e)}function J0(n){let e=/\s*([\w-]+)\s*:\s*([^;]+)/g,t,r=[];for(;t=e.exec(n);)r.push(t[1],t[2].trim());return r}function ml(n){let e={};for(let t in n)e[t]=n[t];return e}function Z0(n,e){let t=e.schema.nodes;for(let r in t){let s=t[r];if(!s.allowsMarkType(n))continue;let i=[],o=a=>{i.push(a);for(let l=0;l<a.edgeCount;l++){let{type:c,next:u}=a.edge(l);if(c==e||i.indexOf(u)<0&&o(u))return!0}};if(o(s.contentMatch))return!0}}function Y0(n,e){for(let t=0;t<e.length;t++)if(n.eq(e[t]))return e[t]}class pt{constructor(e,t){this.nodes=e,this.marks=t}serializeFragment(e,t={},r){r||(r=Bi(t).createDocumentFragment());let s=r,i=[];return e.forEach(o=>{if(i.length||o.marks.length){let a=0,l=0;for(;a<i.length&&l<o.marks.length;){let c=o.marks[l];if(!this.marks[c.type.name]){l++;continue}if(!c.eq(i[a][0])||c.type.spec.spanning===!1)break;a++,l++}for(;a<i.length;)s=i.pop()[1];for(;l<o.marks.length;){let c=o.marks[l++],u=this.serializeMark(c,o.isInline,t);u&&(i.push([c,s]),s.appendChild(u.dom),s=u.contentDOM||u.dom)}}s.appendChild(this.serializeNodeInner(o,t))}),r}serializeNodeInner(e,t){let{dom:r,contentDOM:s}=pt.renderSpec(Bi(t),this.nodes[e.type.name](e));if(s){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,t,s)}return r}serializeNode(e,t={}){let r=this.serializeNodeInner(e,t);for(let s=e.marks.length-1;s>=0;s--){let i=this.serializeMark(e.marks[s],e.isInline,t);i&&((i.contentDOM||i.dom).appendChild(r),r=i.dom)}return r}serializeMark(e,t,r={}){let s=this.marks[e.type.name];return s&&pt.renderSpec(Bi(r),s(e,t))}static renderSpec(e,t,r=null){if(typeof t=="string")return{dom:e.createTextNode(t)};if(t.nodeType!=null)return{dom:t};if(t.dom&&t.dom.nodeType!=null)return t;let s=t[0],i=s.indexOf(" ");i>0&&(r=s.slice(0,i),s=s.slice(i+1));let o,a=r?e.createElementNS(r,s):e.createElement(s),l=t[1],c=1;if(l&&typeof l=="object"&&l.nodeType==null&&!Array.isArray(l)){c=2;for(let u in l)if(l[u]!=null){let f=u.indexOf(" ");f>0?a.setAttributeNS(u.slice(0,f),u.slice(f+1),l[u]):a.setAttribute(u,l[u])}}for(let u=c;u<t.length;u++){let f=t[u];if(f===0){if(u<t.length-1||u>c)throw new RangeError("Content hole must be the only child of its parent node");return{dom:a,contentDOM:a}}else{let{dom:d,contentDOM:h}=pt.renderSpec(e,f,r);if(a.appendChild(d),h){if(o)throw new RangeError("Multiple content holes");o=h}}}return{dom:a,contentDOM:o}}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new pt(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let t=gl(e.nodes);return t.text||(t.text=r=>r.text),t}static marksFromSchema(e){return gl(e.marks)}}function gl(n){let e={};for(let t in n){let r=n[t].spec.toDOM;r&&(e[t]=r)}return e}function Bi(n){return n.document||window.document}const xu=65535,Mu=Math.pow(2,16);function X0(n,e){return n+e*Mu}function yl(n){return n&xu}function Q0(n){return(n-(n&xu))/Mu}const Tu=1,Ou=2,ns=4,Au=8;class bo{constructor(e,t,r){this.pos=e,this.delInfo=t,this.recover=r}get deleted(){return(this.delInfo&Au)>0}get deletedBefore(){return(this.delInfo&(Tu|ns))>0}get deletedAfter(){return(this.delInfo&(Ou|ns))>0}get deletedAcross(){return(this.delInfo&ns)>0}}class $e{constructor(e,t=!1){if(this.ranges=e,this.inverted=t,!e.length&&$e.empty)return $e.empty}recover(e){let t=0,r=yl(e);if(!this.inverted)for(let s=0;s<r;s++)t+=this.ranges[s*3+2]-this.ranges[s*3+1];return this.ranges[r*3]+t+Q0(e)}mapResult(e,t=1){return this._map(e,t,!1)}map(e,t=1){return this._map(e,t,!0)}_map(e,t,r){let s=0,i=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?s:0);if(l>e)break;let c=this.ranges[a+i],u=this.ranges[a+o],f=l+c;if(e<=f){let d=c?e==l?-1:e==f?1:t:t,h=l+s+(d<0?0:u);if(r)return h;let p=e==(t<0?l:f)?null:X0(a/3,e-l),m=e==l?Ou:e==f?Tu:ns;return(t<0?e!=l:e!=f)&&(m|=Au),new bo(h,m,p)}s+=u-c}return r?e+s:new bo(e+s,0,null)}touches(e,t){let r=0,s=yl(t),i=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?r:0);if(l>e)break;let c=this.ranges[a+i],u=l+c;if(e<=u&&a==s*3)return!0;r+=this.ranges[a+o]-c}return!1}forEach(e){let t=this.inverted?2:1,r=this.inverted?1:2;for(let s=0,i=0;s<this.ranges.length;s+=3){let o=this.ranges[s],a=o-(this.inverted?i:0),l=o+(this.inverted?0:i),c=this.ranges[s+t],u=this.ranges[s+r];e(a,a+c,l,l+u),i+=u-c}}invert(){return new $e(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?$e.empty:new $e(e<0?[0,-e,0]:[0,0,e])}}$e.empty=new $e([]);class Hn{constructor(e=[],t,r=0,s=e.length){this.maps=e,this.mirror=t,this.from=r,this.to=s}slice(e=0,t=this.maps.length){return new Hn(this.maps,this.mirror,e,t)}copy(){return new Hn(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)}appendMap(e,t){this.to=this.maps.push(e),t!=null&&this.setMirror(this.maps.length-1,t)}appendMapping(e){for(let t=0,r=this.maps.length;t<e.maps.length;t++){let s=e.getMirror(t);this.appendMap(e.maps[t],s!=null&&s<t?r+s:void 0)}}getMirror(e){if(this.mirror){for(let t=0;t<this.mirror.length;t++)if(this.mirror[t]==e)return this.mirror[t+(t%2?-1:1)]}}setMirror(e,t){this.mirror||(this.mirror=[]),this.mirror.push(e,t)}appendMappingInverted(e){for(let t=e.maps.length-1,r=this.maps.length+e.maps.length;t>=0;t--){let s=e.getMirror(t);this.appendMap(e.maps[t].invert(),s!=null&&s>t?r-s-1:void 0)}}invert(){let e=new Hn;return e.appendMappingInverted(this),e}map(e,t=1){if(this.mirror)return this._map(e,t,!0);for(let r=this.from;r<this.to;r++)e=this.maps[r].map(e,t);return e}mapResult(e,t=1){return this._map(e,t,!1)}_map(e,t,r){let s=0;for(let i=this.from;i<this.to;i++){let o=this.maps[i],a=o.mapResult(e,t);if(a.recover!=null){let l=this.getMirror(i);if(l!=null&&l>i&&l<this.to){i=l,e=this.maps[l].recover(a.recover);continue}}s|=a.delInfo,e=a.pos}return r?e:new bo(e,s,null)}}const $i=Object.create(null);class Oe{getMap(){return $e.empty}merge(e){return null}static fromJSON(e,t){if(!t||!t.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=$i[t.stepType];if(!r)throw new RangeError(`No step type ${t.stepType} defined`);return r.fromJSON(e,t)}static jsonID(e,t){if(e in $i)throw new RangeError("Duplicate use of step JSON ID "+e);return $i[e]=t,t.prototype.jsonID=e,t}}class me{constructor(e,t){this.doc=e,this.failed=t}static ok(e){return new me(e,null)}static fail(e){return new me(null,e)}static fromReplace(e,t,r,s){try{return me.ok(e.replace(t,r,s))}catch(i){if(i instanceof ys)return me.fail(i.message);throw i}}}function Qo(n,e,t){let r=[];for(let s=0;s<n.childCount;s++){let i=n.child(s);i.content.size&&(i=i.copy(Qo(i.content,e,i))),i.isInline&&(i=e(i,t,s)),r.push(i)}return S.fromArray(r)}class Bt extends Oe{constructor(e,t,r){super(),this.from=e,this.to=t,this.mark=r}apply(e){let t=e.slice(this.from,this.to),r=e.resolve(this.from),s=r.node(r.sharedDepth(this.to)),i=new I(Qo(t.content,(o,a)=>!o.isAtom||!a.type.allowsMarkType(this.mark.type)?o:o.mark(this.mark.addToSet(o.marks)),s),t.openStart,t.openEnd);return me.fromReplace(e,this.from,this.to,i)}invert(){return new mt(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deleted&&r.deleted||t.pos>=r.pos?null:new Bt(t.pos,r.pos,this.mark)}merge(e){return e instanceof Bt&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Bt(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new Bt(t.from,t.to,e.markFromJSON(t.mark))}}Oe.jsonID("addMark",Bt);class mt extends Oe{constructor(e,t,r){super(),this.from=e,this.to=t,this.mark=r}apply(e){let t=e.slice(this.from,this.to),r=new I(Qo(t.content,s=>s.mark(this.mark.removeFromSet(s.marks)),e),t.openStart,t.openEnd);return me.fromReplace(e,this.from,this.to,r)}invert(){return new Bt(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deleted&&r.deleted||t.pos>=r.pos?null:new mt(t.pos,r.pos,this.mark)}merge(e){return e instanceof mt&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new mt(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new mt(t.from,t.to,e.markFromJSON(t.mark))}}Oe.jsonID("removeMark",mt);class $t extends Oe{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return me.fail("No node at mark step's position");let r=t.type.create(t.attrs,null,this.mark.addToSet(t.marks));return me.fromReplace(e,this.pos,this.pos+1,new I(S.from(r),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);if(t){let r=this.mark.addToSet(t.marks);if(r.length==t.marks.length){for(let s=0;s<t.marks.length;s++)if(!t.marks[s].isInSet(r))return new $t(this.pos,t.marks[s]);return new $t(this.pos,this.mark)}}return new Un(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new $t(t.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new $t(t.pos,e.markFromJSON(t.mark))}}Oe.jsonID("addNodeMark",$t);class Un extends Oe{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return me.fail("No node at mark step's position");let r=t.type.create(t.attrs,null,this.mark.removeFromSet(t.marks));return me.fromReplace(e,this.pos,this.pos+1,new I(S.from(r),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);return!t||!this.mark.isInSet(t.marks)?this:new $t(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new Un(t.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new Un(t.pos,e.markFromJSON(t.mark))}}Oe.jsonID("removeNodeMark",Un);class we extends Oe{constructor(e,t,r,s=!1){super(),this.from=e,this.to=t,this.slice=r,this.structure=s}apply(e){return this.structure&&vo(e,this.from,this.to)?me.fail("Structure replace would overwrite content"):me.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new $e([this.from,this.to-this.from,this.slice.size])}invert(e){return new we(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deletedAcross&&r.deletedAcross?null:new we(t.pos,Math.max(t.pos,r.pos),this.slice)}merge(e){if(!(e instanceof we)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let t=this.slice.size+e.slice.size==0?I.empty:new I(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new we(this.from,this.to+(e.to-e.from),t,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let t=this.slice.size+e.slice.size==0?I.empty:new I(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new we(e.from,this.to,t,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new we(t.from,t.to,I.fromJSON(e,t.slice),!!t.structure)}}Oe.jsonID("replace",we);class ye extends Oe{constructor(e,t,r,s,i,o,a=!1){super(),this.from=e,this.to=t,this.gapFrom=r,this.gapTo=s,this.slice=i,this.insert=o,this.structure=a}apply(e){if(this.structure&&(vo(e,this.from,this.gapFrom)||vo(e,this.gapTo,this.to)))return me.fail("Structure gap-replace would overwrite content");let t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return me.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,t.content);return r?me.fromReplace(e,this.from,this.to,r):me.fail("Content does not fit in gap")}getMap(){return new $e([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let t=this.gapTo-this.gapFrom;return new ye(this.from,this.from+this.slice.size+t,this.from+this.insert,this.from+this.insert+t,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),s=e.map(this.gapFrom,-1),i=e.map(this.gapTo,1);return t.deletedAcross&&r.deletedAcross||s<t.pos||i>r.pos?null:new ye(t.pos,r.pos,s,i,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number"||typeof t.gapFrom!="number"||typeof t.gapTo!="number"||typeof t.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new ye(t.from,t.to,t.gapFrom,t.gapTo,I.fromJSON(e,t.slice),t.insert,!!t.structure)}}Oe.jsonID("replaceAround",ye);function vo(n,e,t){let r=n.resolve(e),s=t-e,i=r.depth;for(;s>0&&i>0&&r.indexAfter(i)==r.node(i).childCount;)i--,s--;if(s>0){let o=r.node(i).maybeChild(r.indexAfter(i));for(;s>0;){if(!o||o.isLeaf)return!0;o=o.firstChild,s--}}return!1}function eg(n,e,t,r){let s=[],i=[],o,a;n.doc.nodesBetween(e,t,(l,c,u)=>{if(!l.isInline)return;let f=l.marks;if(!r.isInSet(f)&&u.type.allowsMarkType(r.type)){let d=Math.max(c,e),h=Math.min(c+l.nodeSize,t),p=r.addToSet(f);for(let m=0;m<f.length;m++)f[m].isInSet(p)||(o&&o.to==d&&o.mark.eq(f[m])?o.to=h:s.push(o=new mt(d,h,f[m])));a&&a.to==d?a.to=h:i.push(a=new Bt(d,h,r))}}),s.forEach(l=>n.step(l)),i.forEach(l=>n.step(l))}function tg(n,e,t,r){let s=[],i=0;n.doc.nodesBetween(e,t,(o,a)=>{if(!o.isInline)return;i++;let l=null;if(r instanceof ui){let c=o.marks,u;for(;u=r.isInSet(c);)(l||(l=[])).push(u),c=u.removeFromSet(c)}else r?r.isInSet(o.marks)&&(l=[r]):l=o.marks;if(l&&l.length){let c=Math.min(a+o.nodeSize,t);for(let u=0;u<l.length;u++){let f=l[u],d;for(let h=0;h<s.length;h++){let p=s[h];p.step==i-1&&f.eq(s[h].style)&&(d=p)}d?(d.to=c,d.step=i):s.push({style:f,from:Math.max(a,e),to:c,step:i})}}}),s.forEach(o=>n.step(new mt(o.from,o.to,o.style)))}function ng(n,e,t,r=t.contentMatch){let s=n.doc.nodeAt(e),i=[],o=e+1;for(let a=0;a<s.childCount;a++){let l=s.child(a),c=o+l.nodeSize,u=r.matchType(l.type);if(!u)i.push(new we(o,c,I.empty));else{r=u;for(let f=0;f<l.marks.length;f++)t.allowsMarkType(l.marks[f].type)||n.step(new mt(o,c,l.marks[f]));if(l.isText&&!t.spec.code){let f,d=/\r?\n|\r/g,h;for(;f=d.exec(l.text);)h||(h=new I(S.from(t.schema.text(" ",t.allowedMarks(l.marks))),0,0)),i.push(new we(o+f.index,o+f.index+f[0].length,h))}}o=c}if(!r.validEnd){let a=r.fillBefore(S.empty,!0);n.replace(o,o,new I(a,0,0))}for(let a=i.length-1;a>=0;a--)n.step(i[a])}function rg(n,e,t){return(e==0||n.canReplace(e,n.childCount))&&(t==n.childCount||n.canReplace(0,t))}function Xn(n){let t=n.parent.content.cutByIndex(n.startIndex,n.endIndex);for(let r=n.depth;;--r){let s=n.$from.node(r),i=n.$from.index(r),o=n.$to.indexAfter(r);if(r<n.depth&&s.canReplace(i,o,t))return r;if(r==0||s.type.spec.isolating||!rg(s,i,o))break}return null}function sg(n,e,t){let{$from:r,$to:s,depth:i}=e,o=r.before(i+1),a=s.after(i+1),l=o,c=a,u=S.empty,f=0;for(let p=i,m=!1;p>t;p--)m||r.index(p)>0?(m=!0,u=S.from(r.node(p).copy(u)),f++):l--;let d=S.empty,h=0;for(let p=i,m=!1;p>t;p--)m||s.after(p+1)<s.end(p)?(m=!0,d=S.from(s.node(p).copy(d)),h++):c++;n.step(new ye(l,c,o,a,new I(u.append(d),f,h),u.size-f,!0))}function ea(n,e,t=null,r=n){let s=ig(n,e),i=s&&og(r,e);return i?s.map(bl).concat({type:e,attrs:t}).concat(i.map(bl)):null}function bl(n){return{type:n,attrs:null}}function ig(n,e){let{parent:t,startIndex:r,endIndex:s}=n,i=t.contentMatchAt(r).findWrapping(e);if(!i)return null;let o=i.length?i[0]:e;return t.canReplaceWith(r,s,o)?i:null}function og(n,e){let{parent:t,startIndex:r,endIndex:s}=n,i=t.child(r),o=e.contentMatch.findWrapping(i.type);if(!o)return null;let l=(o.length?o[o.length-1]:e).contentMatch;for(let c=r;l&&c<s;c++)l=l.matchType(t.child(c).type);return!l||!l.validEnd?null:o}function ag(n,e,t){let r=S.empty;for(let o=t.length-1;o>=0;o--){if(r.size){let a=t[o].type.contentMatch.matchFragment(r);if(!a||!a.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=S.from(t[o].type.create(t[o].attrs,r))}let s=e.start,i=e.end;n.step(new ye(s,i,s,i,new I(r,0,0),t.length,!0))}function lg(n,e,t,r,s){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let i=n.steps.length;n.doc.nodesBetween(e,t,(o,a)=>{if(o.isTextblock&&!o.hasMarkup(r,s)&&cg(n.doc,n.mapping.slice(i).map(a),r)){n.clearIncompatible(n.mapping.slice(i).map(a,1),r);let l=n.mapping.slice(i),c=l.map(a,1),u=l.map(a+o.nodeSize,1);return n.step(new ye(c,u,c+1,u-1,new I(S.from(r.create(s,null,o.marks)),0,0),1,!0)),!1}})}function cg(n,e,t){let r=n.resolve(e),s=r.index();return r.parent.canReplaceWith(s,s+1,t)}function ug(n,e,t,r,s){let i=n.doc.nodeAt(e);if(!i)throw new RangeError("No node at given position");t||(t=i.type);let o=t.create(r,null,s||i.marks);if(i.isLeaf)return n.replaceWith(e,e+i.nodeSize,o);if(!t.validContent(i.content))throw new RangeError("Invalid content for node type "+t.name);n.step(new ye(e,e+i.nodeSize,e+1,e+i.nodeSize-1,new I(S.from(o),0,0),1,!0))}function Vn(n,e,t=1,r){let s=n.resolve(e),i=s.depth-t,o=r&&r[r.length-1]||s.parent;if(i<0||s.parent.type.spec.isolating||!s.parent.canReplace(s.index(),s.parent.childCount)||!o.type.validContent(s.parent.content.cutByIndex(s.index(),s.parent.childCount)))return!1;for(let c=s.depth-1,u=t-2;c>i;c--,u--){let f=s.node(c),d=s.index(c);if(f.type.spec.isolating)return!1;let h=f.content.cutByIndex(d,f.childCount),p=r&&r[u+1];p&&(h=h.replaceChild(0,p.type.create(p.attrs)));let m=r&&r[u]||f;if(!f.canReplace(d+1,f.childCount)||!m.type.validContent(h))return!1}let a=s.indexAfter(i),l=r&&r[0];return s.node(i).canReplaceWith(a,a,l?l.type:s.node(i+1).type)}function dg(n,e,t=1,r){let s=n.doc.resolve(e),i=S.empty,o=S.empty;for(let a=s.depth,l=s.depth-t,c=t-1;a>l;a--,c--){i=S.from(s.node(a).copy(i));let u=r&&r[c];o=S.from(u?u.type.create(u.attrs,o):s.node(a).copy(o))}n.step(new we(e,e,new I(i.append(o),t,t),!0))}function qt(n,e){let t=n.resolve(e),r=t.index();return Nu(t.nodeBefore,t.nodeAfter)&&t.parent.canReplace(r,r+1)}function Nu(n,e){return!!(n&&e&&!n.isLeaf&&n.canAppend(e))}function di(n,e,t=-1){let r=n.resolve(e);for(let s=r.depth;;s--){let i,o,a=r.index(s);if(s==r.depth?(i=r.nodeBefore,o=r.nodeAfter):t>0?(i=r.node(s+1),a++,o=r.node(s).maybeChild(a)):(i=r.node(s).maybeChild(a-1),o=r.node(s+1)),i&&!i.isTextblock&&Nu(i,o)&&r.node(s).canReplace(a,a+1))return e;if(s==0)break;e=t<0?r.before(s):r.after(s)}}function fg(n,e,t){let r=new we(e-t,e+t,I.empty,!0);n.step(r)}function hg(n,e,t){let r=n.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),t))return e;if(r.parentOffset==0)for(let s=r.depth-1;s>=0;s--){let i=r.index(s);if(r.node(s).canReplaceWith(i,i,t))return r.before(s+1);if(i>0)return null}if(r.parentOffset==r.parent.content.size)for(let s=r.depth-1;s>=0;s--){let i=r.indexAfter(s);if(r.node(s).canReplaceWith(i,i,t))return r.after(s+1);if(i<r.node(s).childCount)return null}return null}function Iu(n,e,t){let r=n.resolve(e);if(!t.content.size)return e;let s=t.content;for(let i=0;i<t.openStart;i++)s=s.firstChild.content;for(let i=1;i<=(t.openStart==0&&t.size?2:1);i++)for(let o=r.depth;o>=0;o--){let a=o==r.depth?0:r.pos<=(r.start(o+1)+r.end(o+1))/2?-1:1,l=r.index(o)+(a>0?1:0),c=r.node(o),u=!1;if(i==1)u=c.canReplace(l,l,s);else{let f=c.contentMatchAt(l).findWrapping(s.firstChild.type);u=f&&c.canReplaceWith(l,l,f[0])}if(u)return a==0?r.pos:a<0?r.before(o+1):r.after(o+1)}return null}function ta(n,e,t=e,r=I.empty){if(e==t&&!r.size)return null;let s=n.resolve(e),i=n.resolve(t);return Pu(s,i,r)?new we(e,t,r):new pg(s,i,r).fit()}function Pu(n,e,t){return!t.openStart&&!t.openEnd&&n.start()==e.start()&&n.parent.canReplace(n.index(),e.index(),t.content)}class pg{constructor(e,t,r){this.$from=e,this.$to=t,this.unplaced=r,this.frontier=[],this.placed=S.empty;for(let s=0;s<=e.depth;s++){let i=e.node(s);this.frontier.push({type:i.type,match:i.contentMatchAt(e.indexAfter(s))})}for(let s=e.depth;s>0;s--)this.placed=S.from(e.node(s).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let c=this.findFittable();c?this.placeNodes(c):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),t=this.placed.size-this.depth-this.$from.depth,r=this.$from,s=this.close(e<0?this.$to:r.doc.resolve(e));if(!s)return null;let i=this.placed,o=r.depth,a=s.depth;for(;o&&a&&i.childCount==1;)i=i.firstChild.content,o--,a--;let l=new I(i,o,a);return e>-1?new ye(r.pos,e,this.$to.pos,this.$to.end(),l,t):l.size||r.pos!=this.$to.pos?new we(r.pos,s.pos,l):null}findFittable(){let e=this.unplaced.openStart;for(let t=this.unplaced.content,r=0,s=this.unplaced.openEnd;r<e;r++){let i=t.firstChild;if(t.childCount>1&&(s=0),i.type.spec.isolating&&s<=r){e=r;break}t=i.content}for(let t=1;t<=2;t++)for(let r=t==1?e:this.unplaced.openStart;r>=0;r--){let s,i=null;r?(i=Hi(this.unplaced.content,r-1).firstChild,s=i.content):s=this.unplaced.content;let o=s.firstChild;for(let a=this.depth;a>=0;a--){let{type:l,match:c}=this.frontier[a],u,f=null;if(t==1&&(o?c.matchType(o.type)||(f=c.fillBefore(S.from(o),!1)):i&&l.compatibleContent(i.type)))return{sliceDepth:r,frontierDepth:a,parent:i,inject:f};if(t==2&&o&&(u=c.findWrapping(o.type)))return{sliceDepth:r,frontierDepth:a,parent:i,wrap:u};if(i&&c.matchType(i.type))break}}}openMore(){let{content:e,openStart:t,openEnd:r}=this.unplaced,s=Hi(e,t);return!s.childCount||s.firstChild.isLeaf?!1:(this.unplaced=new I(e,t+1,Math.max(r,s.size+t>=e.size-r?t+1:0)),!0)}dropNode(){let{content:e,openStart:t,openEnd:r}=this.unplaced,s=Hi(e,t);if(s.childCount<=1&&t>0){let i=e.size-t<=t+s.size;this.unplaced=new I(or(e,t-1,1),t-1,i?t-1:r)}else this.unplaced=new I(or(e,t,1),t,r)}placeNodes({sliceDepth:e,frontierDepth:t,parent:r,inject:s,wrap:i}){for(;this.depth>t;)this.closeFrontierNode();if(i)for(let m=0;m<i.length;m++)this.openFrontierNode(i[m]);let o=this.unplaced,a=r?r.content:o.content,l=o.openStart-e,c=0,u=[],{match:f,type:d}=this.frontier[t];if(s){for(let m=0;m<s.childCount;m++)u.push(s.child(m));f=f.matchFragment(s)}let h=a.size+e-(o.content.size-o.openEnd);for(;c<a.childCount;){let m=a.child(c),g=f.matchType(m.type);if(!g)break;c++,(c>1||l==0||m.content.size)&&(f=g,u.push(Du(m.mark(d.allowedMarks(m.marks)),c==1?l:0,c==a.childCount?h:-1)))}let p=c==a.childCount;p||(h=-1),this.placed=ar(this.placed,t,S.from(u)),this.frontier[t].match=f,p&&h<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let m=0,g=a;m<h;m++){let y=g.lastChild;this.frontier.push({type:y.type,match:y.contentMatchAt(y.childCount)}),g=y.content}this.unplaced=p?e==0?I.empty:new I(or(o.content,e-1,1),e-1,h<0?o.openEnd:e-1):new I(or(o.content,e,c),o.openStart,o.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],t;if(!e.type.isTextblock||!Vi(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(t=this.findCloseLevel(this.$to))&&t.depth==this.depth)return-1;let{depth:r}=this.$to,s=this.$to.after(r);for(;r>1&&s==this.$to.end(--r);)++s;return s}findCloseLevel(e){e:for(let t=Math.min(this.depth,e.depth);t>=0;t--){let{match:r,type:s}=this.frontier[t],i=t<e.depth&&e.end(t+1)==e.pos+(e.depth-(t+1)),o=Vi(e,t,s,r,i);if(o){for(let a=t-1;a>=0;a--){let{match:l,type:c}=this.frontier[a],u=Vi(e,a,c,l,!0);if(!u||u.childCount)continue e}return{depth:t,fit:o,move:i?e.doc.resolve(e.after(t+1)):e}}}}close(e){let t=this.findCloseLevel(e);if(!t)return null;for(;this.depth>t.depth;)this.closeFrontierNode();t.fit.childCount&&(this.placed=ar(this.placed,t.depth,t.fit)),e=t.move;for(let r=t.depth+1;r<=e.depth;r++){let s=e.node(r),i=s.type.contentMatch.fillBefore(s.content,!0,e.index(r));this.openFrontierNode(s.type,s.attrs,i)}return e}openFrontierNode(e,t=null,r){let s=this.frontier[this.depth];s.match=s.match.matchType(e),this.placed=ar(this.placed,this.depth,S.from(e.create(t,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let t=this.frontier.pop().match.fillBefore(S.empty,!0);t.childCount&&(this.placed=ar(this.placed,this.frontier.length,t))}}function or(n,e,t){return e==0?n.cutByIndex(t,n.childCount):n.replaceChild(0,n.firstChild.copy(or(n.firstChild.content,e-1,t)))}function ar(n,e,t){return e==0?n.append(t):n.replaceChild(n.childCount-1,n.lastChild.copy(ar(n.lastChild.content,e-1,t)))}function Hi(n,e){for(let t=0;t<e;t++)n=n.firstChild.content;return n}function Du(n,e,t){if(e<=0)return n;let r=n.content;return e>1&&(r=r.replaceChild(0,Du(r.firstChild,e-1,r.childCount==1?t-1:0))),e>0&&(r=n.type.contentMatch.fillBefore(r).append(r),t<=0&&(r=r.append(n.type.contentMatch.matchFragment(r).fillBefore(S.empty,!0)))),n.copy(r)}function Vi(n,e,t,r,s){let i=n.node(e),o=s?n.indexAfter(e):n.index(e);if(o==i.childCount&&!t.compatibleContent(i.type))return null;let a=r.fillBefore(i.content,!0,o);return a&&!mg(t,i.content,o)?a:null}function mg(n,e,t){for(let r=t;r<e.childCount;r++)if(!n.allowsMarks(e.child(r).marks))return!0;return!1}function gg(n){return n.spec.defining||n.spec.definingForContent}function yg(n,e,t,r){if(!r.size)return n.deleteRange(e,t);let s=n.doc.resolve(e),i=n.doc.resolve(t);if(Pu(s,i,r))return n.step(new we(e,t,r));let o=_u(s,n.doc.resolve(t));o[o.length-1]==0&&o.pop();let a=-(s.depth+1);o.unshift(a);for(let d=s.depth,h=s.pos-1;d>0;d--,h--){let p=s.node(d).type.spec;if(p.defining||p.definingAsContext||p.isolating)break;o.indexOf(d)>-1?a=d:s.before(d)==h&&o.splice(1,0,-d)}let l=o.indexOf(a),c=[],u=r.openStart;for(let d=r.content,h=0;;h++){let p=d.firstChild;if(c.push(p),h==r.openStart)break;d=p.content}for(let d=u-1;d>=0;d--){let h=c[d],p=gg(h.type);if(p&&!h.sameMarkup(s.node(Math.abs(a)-1)))u=d;else if(p||!h.type.isTextblock)break}for(let d=r.openStart;d>=0;d--){let h=(d+u+1)%(r.openStart+1),p=c[h];if(p)for(let m=0;m<o.length;m++){let g=o[(m+l)%o.length],y=!0;g<0&&(y=!1,g=-g);let v=s.node(g-1),w=s.index(g-1);if(v.canReplaceWith(w,w,p.type,p.marks))return n.replace(s.before(g),y?i.after(g):t,new I(Lu(r.content,0,r.openStart,h),h,r.openEnd))}}let f=n.steps.length;for(let d=o.length-1;d>=0&&(n.replace(e,t,r),!(n.steps.length>f));d--){let h=o[d];h<0||(e=s.before(h),t=i.after(h))}}function Lu(n,e,t,r,s){if(e<t){let i=n.firstChild;n=n.replaceChild(0,i.copy(Lu(i.content,e+1,t,r,i)))}if(e>r){let i=s.contentMatchAt(0),o=i.fillBefore(n).append(n);n=o.append(i.matchFragment(o).fillBefore(S.empty,!0))}return n}function bg(n,e,t,r){if(!r.isInline&&e==t&&n.doc.resolve(e).parent.content.size){let s=hg(n.doc,e,r.type);s!=null&&(e=t=s)}n.replaceRange(e,t,new I(S.from(r),0,0))}function vg(n,e,t){let r=n.doc.resolve(e),s=n.doc.resolve(t),i=_u(r,s);for(let o=0;o<i.length;o++){let a=i[o],l=o==i.length-1;if(l&&a==0||r.node(a).type.contentMatch.validEnd)return n.delete(r.start(a),s.end(a));if(a>0&&(l||r.node(a-1).canReplace(r.index(a-1),s.indexAfter(a-1))))return n.delete(r.before(a),s.after(a))}for(let o=1;o<=r.depth&&o<=s.depth;o++)if(e-r.start(o)==r.depth-o&&t>r.end(o)&&s.end(o)-t!=s.depth-o)return n.delete(r.before(o),t);n.delete(e,t)}function _u(n,e){let t=[],r=Math.min(n.depth,e.depth);for(let s=r;s>=0;s--){let i=n.start(s);if(i<n.pos-(n.depth-s)||e.end(s)>e.pos+(e.depth-s)||n.node(s).type.spec.isolating||e.node(s).type.spec.isolating)break;(i==e.start(s)||s==n.depth&&s==e.depth&&n.parent.inlineContent&&e.parent.inlineContent&&s&&e.start(s-1)==i-1)&&t.push(s)}return t}class zn extends Oe{constructor(e,t,r){super(),this.pos=e,this.attr=t,this.value=r}apply(e){let t=e.nodeAt(this.pos);if(!t)return me.fail("No node at attribute step's position");let r=Object.create(null);for(let i in t.attrs)r[i]=t.attrs[i];r[this.attr]=this.value;let s=t.type.create(r,null,t.marks);return me.fromReplace(e,this.pos,this.pos+1,new I(S.from(s),0,t.isLeaf?0:1))}getMap(){return $e.empty}invert(e){return new zn(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new zn(t.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.pos!="number"||typeof t.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new zn(t.pos,t.attr,t.value)}}Oe.jsonID("attr",zn);class Tr extends Oe{constructor(e,t){super(),this.attr=e,this.value=t}apply(e){let t=Object.create(null);for(let s in e.attrs)t[s]=e.attrs[s];t[this.attr]=this.value;let r=e.type.create(t,e.content,e.marks);return me.ok(r)}getMap(){return $e.empty}invert(e){return new Tr(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new Tr(t.attr,t.value)}}Oe.jsonID("docAttr",Tr);let qn=class extends Error{};qn=function n(e){let t=Error.call(this,e);return t.__proto__=n.prototype,t};qn.prototype=Object.create(Error.prototype);qn.prototype.constructor=qn;qn.prototype.name="TransformError";class Ru{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new Hn}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let t=this.maybeStep(e);if(t.failed)throw new qn(t.failed);return this}maybeStep(e){let t=e.apply(this.doc);return t.failed||this.addStep(e,t.doc),t}get docChanged(){return this.steps.length>0}addStep(e,t){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=t}replace(e,t=e,r=I.empty){let s=ta(this.doc,e,t,r);return s&&this.step(s),this}replaceWith(e,t,r){return this.replace(e,t,new I(S.from(r),0,0))}delete(e,t){return this.replace(e,t,I.empty)}insert(e,t){return this.replaceWith(e,e,t)}replaceRange(e,t,r){return yg(this,e,t,r),this}replaceRangeWith(e,t,r){return bg(this,e,t,r),this}deleteRange(e,t){return vg(this,e,t),this}lift(e,t){return sg(this,e,t),this}join(e,t=1){return fg(this,e,t),this}wrap(e,t){return ag(this,e,t),this}setBlockType(e,t=e,r,s=null){return lg(this,e,t,r,s),this}setNodeMarkup(e,t,r=null,s){return ug(this,e,t,r,s),this}setNodeAttribute(e,t,r){return this.step(new zn(e,t,r)),this}setDocAttribute(e,t){return this.step(new Tr(e,t)),this}addNodeMark(e,t){return this.step(new $t(e,t)),this}removeNodeMark(e,t){if(!(t instanceof ae)){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(t=t.isInSet(r.marks),!t)return this}return this.step(new Un(e,t)),this}split(e,t=1,r){return dg(this,e,t,r),this}addMark(e,t,r){return eg(this,e,t,r),this}removeMark(e,t,r){return tg(this,e,t,r),this}clearIncompatible(e,t,r){return ng(this,e,t,r),this}}const zi=Object.create(null);class Z{constructor(e,t,r){this.$anchor=e,this.$head=t,this.ranges=r||[new Cg(e.min(t),e.max(t))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let t=0;t<e.length;t++)if(e[t].$from.pos!=e[t].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,t=I.empty){let r=t.content.lastChild,s=null;for(let a=0;a<t.openEnd;a++)s=r,r=r.lastChild;let i=e.steps.length,o=this.ranges;for(let a=0;a<o.length;a++){let{$from:l,$to:c}=o[a],u=e.mapping.slice(i);e.replaceRange(u.map(l.pos),u.map(c.pos),a?I.empty:t),a==0&&kl(e,i,(r?r.isInline:s&&s.isTextblock)?-1:1)}}replaceWith(e,t){let r=e.steps.length,s=this.ranges;for(let i=0;i<s.length;i++){let{$from:o,$to:a}=s[i],l=e.mapping.slice(r),c=l.map(o.pos),u=l.map(a.pos);i?e.deleteRange(c,u):(e.replaceRangeWith(c,u,t),kl(e,r,t.isInline?-1:1))}}static findFrom(e,t,r=!1){let s=e.parent.inlineContent?new K(e):In(e.node(0),e.parent,e.pos,e.index(),t,r);if(s)return s;for(let i=e.depth-1;i>=0;i--){let o=t<0?In(e.node(0),e.node(i),e.before(i+1),e.index(i),t,r):In(e.node(0),e.node(i),e.after(i+1),e.index(i)+1,t,r);if(o)return o}return null}static near(e,t=1){return this.findFrom(e,t)||this.findFrom(e,-t)||new nt(e.node(0))}static atStart(e){return In(e,e,0,0,1)||new nt(e)}static atEnd(e){return In(e,e,e.content.size,e.childCount,-1)||new nt(e)}static fromJSON(e,t){if(!t||!t.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=zi[t.type];if(!r)throw new RangeError(`No selection type ${t.type} defined`);return r.fromJSON(e,t)}static jsonID(e,t){if(e in zi)throw new RangeError("Duplicate use of selection JSON ID "+e);return zi[e]=t,t.prototype.jsonID=e,t}getBookmark(){return K.between(this.$anchor,this.$head).getBookmark()}}Z.prototype.visible=!0;class Cg{constructor(e,t){this.$from=e,this.$to=t}}let vl=!1;function Cl(n){!vl&&!n.parent.inlineContent&&(vl=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+n.parent.type.name+")"))}class K extends Z{constructor(e,t=e){Cl(e),Cl(t),super(e,t)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,t){let r=e.resolve(t.map(this.head));if(!r.parent.inlineContent)return Z.near(r);let s=e.resolve(t.map(this.anchor));return new K(s.parent.inlineContent?s:r,r)}replace(e,t=I.empty){if(super.replace(e,t),t==I.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof K&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new fi(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,t){if(typeof t.anchor!="number"||typeof t.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new K(e.resolve(t.anchor),e.resolve(t.head))}static create(e,t,r=t){let s=e.resolve(t);return new this(s,r==t?s:e.resolve(r))}static between(e,t,r){let s=e.pos-t.pos;if((!r||s)&&(r=s>=0?1:-1),!t.parent.inlineContent){let i=Z.findFrom(t,r,!0)||Z.findFrom(t,-r,!0);if(i)t=i.$head;else return Z.near(t,r)}return e.parent.inlineContent||(s==0?e=t:(e=(Z.findFrom(e,-r,!0)||Z.findFrom(e,r,!0)).$anchor,e.pos<t.pos!=s<0&&(e=t))),new K(e,t)}}Z.jsonID("text",K);class fi{constructor(e,t){this.anchor=e,this.head=t}map(e){return new fi(e.map(this.anchor),e.map(this.head))}resolve(e){return K.between(e.resolve(this.anchor),e.resolve(this.head))}}class z extends Z{constructor(e){let t=e.nodeAfter,r=e.node(0).resolve(e.pos+t.nodeSize);super(e,r),this.node=t}map(e,t){let{deleted:r,pos:s}=t.mapResult(this.anchor),i=e.resolve(s);return r?Z.near(i):new z(i)}content(){return new I(S.from(this.node),0,0)}eq(e){return e instanceof z&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new na(this.anchor)}static fromJSON(e,t){if(typeof t.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new z(e.resolve(t.anchor))}static create(e,t){return new z(e.resolve(t))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}z.prototype.visible=!1;Z.jsonID("node",z);class na{constructor(e){this.anchor=e}map(e){let{deleted:t,pos:r}=e.mapResult(this.anchor);return t?new fi(r,r):new na(r)}resolve(e){let t=e.resolve(this.anchor),r=t.nodeAfter;return r&&z.isSelectable(r)?new z(t):Z.near(t)}}class nt extends Z{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,t=I.empty){if(t==I.empty){e.delete(0,e.doc.content.size);let r=Z.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,t)}toJSON(){return{type:"all"}}static fromJSON(e){return new nt(e)}map(e){return new nt(e)}eq(e){return e instanceof nt}getBookmark(){return kg}}Z.jsonID("all",nt);const kg={map(){return this},resolve(n){return new nt(n)}};function In(n,e,t,r,s,i=!1){if(e.inlineContent)return K.create(n,t);for(let o=r-(s>0?0:1);s>0?o<e.childCount:o>=0;o+=s){let a=e.child(o);if(a.isAtom){if(!i&&z.isSelectable(a))return z.create(n,t-(s<0?a.nodeSize:0))}else{let l=In(n,a,t+s,s<0?a.childCount:0,s,i);if(l)return l}t+=a.nodeSize*s}return null}function kl(n,e,t){let r=n.steps.length-1;if(r<e)return;let s=n.steps[r];if(!(s instanceof we||s instanceof ye))return;let i=n.mapping.maps[r],o;i.forEach((a,l,c,u)=>{o==null&&(o=u)}),n.setSelection(Z.near(n.doc.resolve(o),t))}const wl=1,qr=2,Sl=4;class wg extends Ru{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|wl)&~qr,this.storedMarks=null,this}get selectionSet(){return(this.updated&wl)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=qr,this}ensureMarks(e){return ae.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&qr)>0}addStep(e,t){super.addStep(e,t),this.updated=this.updated&~qr,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,t=!0){let r=this.selection;return t&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||ae.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,t,r){let s=this.doc.type.schema;if(t==null)return e?this.replaceSelectionWith(s.text(e),!0):this.deleteSelection();{if(r==null&&(r=t),r=r??t,!e)return this.deleteRange(t,r);let i=this.storedMarks;if(!i){let o=this.doc.resolve(t);i=r==t?o.marks():o.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(t,r,s.text(e,i)),this.selection.empty||this.setSelection(Z.near(this.selection.$to)),this}}setMeta(e,t){return this.meta[typeof e=="string"?e:e.key]=t,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=Sl,this}get scrolledIntoView(){return(this.updated&Sl)>0}}function El(n,e){return!e||!n?n:n.bind(e)}class lr{constructor(e,t,r){this.name=e,this.init=El(t.init,r),this.apply=El(t.apply,r)}}const Sg=[new lr("doc",{init(n){return n.doc||n.schema.topNodeType.createAndFill()},apply(n){return n.doc}}),new lr("selection",{init(n,e){return n.selection||Z.atStart(e.doc)},apply(n){return n.selection}}),new lr("storedMarks",{init(n){return n.storedMarks||null},apply(n,e,t,r){return r.selection.$cursor?n.storedMarks:null}}),new lr("scrollToSelection",{init(){return 0},apply(n,e){return n.scrolledIntoView?e+1:e}})];class ji{constructor(e,t){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=Sg.slice(),t&&t.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new lr(r.key,r.spec.state,r))})}}class _n{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,t=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=t){let s=this.config.plugins[r];if(s.spec.filterTransaction&&!s.spec.filterTransaction.call(s,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let t=[e],r=this.applyInner(e),s=null;for(;;){let i=!1;for(let o=0;o<this.config.plugins.length;o++){let a=this.config.plugins[o];if(a.spec.appendTransaction){let l=s?s[o].n:0,c=s?s[o].state:this,u=l<t.length&&a.spec.appendTransaction.call(a,l?t.slice(l):t,c,r);if(u&&r.filterTransaction(u,o)){if(u.setMeta("appendedTransaction",e),!s){s=[];for(let f=0;f<this.config.plugins.length;f++)s.push(f<o?{state:r,n:t.length}:{state:this,n:0})}t.push(u),r=r.applyInner(u),i=!0}s&&(s[o]={state:r,n:t.length})}}if(!i)return{state:r,transactions:t}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let t=new _n(this.config),r=this.config.fields;for(let s=0;s<r.length;s++){let i=r[s];t[i.name]=i.apply(e,this[i.name],this,t)}return t}get tr(){return new wg(this)}static create(e){let t=new ji(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new _n(t);for(let s=0;s<t.fields.length;s++)r[t.fields[s].name]=t.fields[s].init(e,r);return r}reconfigure(e){let t=new ji(this.schema,e.plugins),r=t.fields,s=new _n(t);for(let i=0;i<r.length;i++){let o=r[i].name;s[o]=this.hasOwnProperty(o)?this[o]:r[i].init(e,s)}return s}toJSON(e){let t={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(t.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let s=e[r],i=s.spec.state;i&&i.toJSON&&(t[r]=i.toJSON.call(s,this[s.key]))}return t}static fromJSON(e,t,r){if(!t)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let s=new ji(e.schema,e.plugins),i=new _n(s);return s.fields.forEach(o=>{if(o.name=="doc")i.doc=fn.fromJSON(e.schema,t.doc);else if(o.name=="selection")i.selection=Z.fromJSON(i.doc,t.selection);else if(o.name=="storedMarks")t.storedMarks&&(i.storedMarks=t.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let a in r){let l=r[a],c=l.spec.state;if(l.key==o.name&&c&&c.fromJSON&&Object.prototype.hasOwnProperty.call(t,a)){i[o.name]=c.fromJSON.call(l,e,t[a],i);return}}i[o.name]=o.init(e,i)}}),i}}function Fu(n,e,t){for(let r in n){let s=n[r];s instanceof Function?s=s.bind(e):r=="handleDOMEvents"&&(s=Fu(s,e,{})),t[r]=s}return t}class Ae{constructor(e){this.spec=e,this.props={},e.props&&Fu(e.props,this,this.props),this.key=e.key?e.key.key:Bu("plugin")}getState(e){return e[this.key]}}const Wi=Object.create(null);function Bu(n){return n in Wi?n+"$"+ ++Wi[n]:(Wi[n]=0,n+"$")}class Ze{constructor(e="key"){this.key=Bu(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const Ie=function(n){for(var e=0;;e++)if(n=n.previousSibling,!n)return e},Or=function(n){let e=n.assignedSlot||n.parentNode;return e&&e.nodeType==11?e.host:e};let xl=null;const xt=function(n,e,t){let r=xl||(xl=document.createRange());return r.setEnd(n,t??n.nodeValue.length),r.setStart(n,e||0),r},bn=function(n,e,t,r){return t&&(Ml(n,e,t,r,-1)||Ml(n,e,t,r,1))},Eg=/^(img|br|input|textarea|hr)$/i;function Ml(n,e,t,r,s){for(;;){if(n==t&&e==r)return!0;if(e==(s<0?0:ht(n))){let i=n.parentNode;if(!i||i.nodeType!=1||ra(n)||Eg.test(n.nodeName)||n.contentEditable=="false")return!1;e=Ie(n)+(s<0?0:1),n=i}else if(n.nodeType==1){if(n=n.childNodes[e+(s<0?-1:0)],n.contentEditable=="false")return!1;e=s<0?ht(n):0}else return!1}}function ht(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function xg(n,e,t){for(let r=e==0,s=e==ht(n);r||s;){if(n==t)return!0;let i=Ie(n);if(n=n.parentNode,!n)return!1;r=r&&i==0,s=s&&i==ht(n)}}function ra(n){let e;for(let t=n;t&&!(e=t.pmViewDesc);t=t.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==n||e.contentDOM==n)}const hi=function(n){return n.focusNode&&bn(n.focusNode,n.focusOffset,n.anchorNode,n.anchorOffset)};function sn(n,e){let t=document.createEvent("Event");return t.initEvent("keydown",!0,!0),t.keyCode=n,t.key=t.code=e,t}function Mg(n){let e=n.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function Tg(n,e,t){if(n.caretPositionFromPoint)try{let r=n.caretPositionFromPoint(e,t);if(r)return{node:r.offsetNode,offset:r.offset}}catch{}if(n.caretRangeFromPoint){let r=n.caretRangeFromPoint(e,t);if(r)return{node:r.startContainer,offset:r.startOffset}}}const bt=typeof navigator<"u"?navigator:null,Tl=typeof document<"u"?document:null,Gt=bt&&bt.userAgent||"",Co=/Edge\/(\d+)/.exec(Gt),$u=/MSIE \d/.exec(Gt),ko=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Gt),Be=!!($u||ko||Co),Vt=$u?document.documentMode:ko?+ko[1]:Co?+Co[1]:0,rt=!Be&&/gecko\/(\d+)/i.test(Gt);rt&&+(/Firefox\/(\d+)/.exec(Gt)||[0,0])[1];const wo=!Be&&/Chrome\/(\d+)/.exec(Gt),Me=!!wo,Og=wo?+wo[1]:0,Pe=!Be&&!!bt&&/Apple Computer/.test(bt.vendor),Gn=Pe&&(/Mobile\/\w+/.test(Gt)||!!bt&&bt.maxTouchPoints>2),qe=Gn||(bt?/Mac/.test(bt.platform):!1),Ag=bt?/Win/.test(bt.platform):!1,et=/Android \d/.test(Gt),Hr=!!Tl&&"webkitFontSmoothing"in Tl.documentElement.style,Ng=Hr?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function Ig(n){return{left:0,right:n.documentElement.clientWidth,top:0,bottom:n.documentElement.clientHeight}}function wt(n,e){return typeof n=="number"?n:n[e]}function Pg(n){let e=n.getBoundingClientRect(),t=e.width/n.offsetWidth||1,r=e.height/n.offsetHeight||1;return{left:e.left,right:e.left+n.clientWidth*t,top:e.top,bottom:e.top+n.clientHeight*r}}function Ol(n,e,t){let r=n.someProp("scrollThreshold")||0,s=n.someProp("scrollMargin")||5,i=n.dom.ownerDocument;for(let o=t||n.dom;o;o=Or(o)){if(o.nodeType!=1)continue;let a=o,l=a==i.body,c=l?Ig(i):Pg(a),u=0,f=0;if(e.top<c.top+wt(r,"top")?f=-(c.top-e.top+wt(s,"top")):e.bottom>c.bottom-wt(r,"bottom")&&(f=e.bottom-e.top>c.bottom-c.top?e.top+wt(s,"top")-c.top:e.bottom-c.bottom+wt(s,"bottom")),e.left<c.left+wt(r,"left")?u=-(c.left-e.left+wt(s,"left")):e.right>c.right-wt(r,"right")&&(u=e.right-c.right+wt(s,"right")),u||f)if(l)i.defaultView.scrollBy(u,f);else{let d=a.scrollLeft,h=a.scrollTop;f&&(a.scrollTop+=f),u&&(a.scrollLeft+=u);let p=a.scrollLeft-d,m=a.scrollTop-h;e={left:e.left-p,top:e.top-m,right:e.right-p,bottom:e.bottom-m}}if(l||/^(fixed|sticky)$/.test(getComputedStyle(o).position))break}}function Dg(n){let e=n.dom.getBoundingClientRect(),t=Math.max(0,e.top),r,s;for(let i=(e.left+e.right)/2,o=t+1;o<Math.min(innerHeight,e.bottom);o+=5){let a=n.root.elementFromPoint(i,o);if(!a||a==n.dom||!n.dom.contains(a))continue;let l=a.getBoundingClientRect();if(l.top>=t-20){r=a,s=l.top;break}}return{refDOM:r,refTop:s,stack:Hu(n.dom)}}function Hu(n){let e=[],t=n.ownerDocument;for(let r=n;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),n!=t);r=Or(r));return e}function Lg({refDOM:n,refTop:e,stack:t}){let r=n?n.getBoundingClientRect().top:0;Vu(t,r==0?0:r-e)}function Vu(n,e){for(let t=0;t<n.length;t++){let{dom:r,top:s,left:i}=n[t];r.scrollTop!=s+e&&(r.scrollTop=s+e),r.scrollLeft!=i&&(r.scrollLeft=i)}}let On=null;function _g(n){if(n.setActive)return n.setActive();if(On)return n.focus(On);let e=Hu(n);n.focus(On==null?{get preventScroll(){return On={preventScroll:!0},!0}}:void 0),On||(On=!1,Vu(e,0))}function zu(n,e){let t,r=2e8,s,i=0,o=e.top,a=e.top,l,c;for(let u=n.firstChild,f=0;u;u=u.nextSibling,f++){let d;if(u.nodeType==1)d=u.getClientRects();else if(u.nodeType==3)d=xt(u).getClientRects();else continue;for(let h=0;h<d.length;h++){let p=d[h];if(p.top<=o&&p.bottom>=a){o=Math.max(p.bottom,o),a=Math.min(p.top,a);let m=p.left>e.left?p.left-e.left:p.right<e.left?e.left-p.right:0;if(m<r){t=u,r=m,s=m&&t.nodeType==3?{left:p.right<e.left?p.right:p.left,top:e.top}:e,u.nodeType==1&&m&&(i=f+(e.left>=(p.left+p.right)/2?1:0));continue}}else p.top>e.top&&!l&&p.left<=e.left&&p.right>=e.left&&(l=u,c={left:Math.max(p.left,Math.min(p.right,e.left)),top:p.top});!t&&(e.left>=p.right&&e.top>=p.top||e.left>=p.left&&e.top>=p.bottom)&&(i=f+1)}}return!t&&l&&(t=l,s=c,r=0),t&&t.nodeType==3?Rg(t,s):!t||r&&t.nodeType==1?{node:n,offset:i}:zu(t,s)}function Rg(n,e){let t=n.nodeValue.length,r=document.createRange();for(let s=0;s<t;s++){r.setEnd(n,s+1),r.setStart(n,s);let i=Pt(r,1);if(i.top!=i.bottom&&sa(e,i))return{node:n,offset:s+(e.left>=(i.left+i.right)/2?1:0)}}return{node:n,offset:0}}function sa(n,e){return n.left>=e.left-1&&n.left<=e.right+1&&n.top>=e.top-1&&n.top<=e.bottom+1}function Fg(n,e){let t=n.parentNode;return t&&/^li$/i.test(t.nodeName)&&e.left<n.getBoundingClientRect().left?t:n}function Bg(n,e,t){let{node:r,offset:s}=zu(e,t),i=-1;if(r.nodeType==1&&!r.firstChild){let o=r.getBoundingClientRect();i=o.left!=o.right&&t.left>(o.left+o.right)/2?1:-1}return n.docView.posFromDOM(r,s,i)}function $g(n,e,t,r){let s=-1;for(let i=e,o=!1;i!=n.dom;){let a=n.docView.nearestDesc(i,!0);if(!a)return null;if(a.dom.nodeType==1&&(a.node.isBlock&&a.parent&&!o||!a.contentDOM)){let l=a.dom.getBoundingClientRect();if(a.node.isBlock&&a.parent&&!o&&(o=!0,l.left>r.left||l.top>r.top?s=a.posBefore:(l.right<r.left||l.bottom<r.top)&&(s=a.posAfter)),!a.contentDOM&&s<0&&!a.node.isText)return(a.node.isBlock?r.top<(l.top+l.bottom)/2:r.left<(l.left+l.right)/2)?a.posBefore:a.posAfter}i=a.dom.parentNode}return s>-1?s:n.docView.posFromDOM(e,t,-1)}function ju(n,e,t){let r=n.childNodes.length;if(r&&t.top<t.bottom)for(let s=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-t.top)/(t.bottom-t.top))-2)),i=s;;){let o=n.childNodes[i];if(o.nodeType==1){let a=o.getClientRects();for(let l=0;l<a.length;l++){let c=a[l];if(sa(e,c))return ju(o,e,c)}}if((i=(i+1)%r)==s)break}return n}function Hg(n,e){let t=n.dom.ownerDocument,r,s=0,i=Tg(t,e.left,e.top);i&&({node:r,offset:s}=i);let o=(n.root.elementFromPoint?n.root:t).elementFromPoint(e.left,e.top),a;if(!o||!n.dom.contains(o.nodeType!=1?o.parentNode:o)){let c=n.dom.getBoundingClientRect();if(!sa(e,c)||(o=ju(n.dom,e,c),!o))return null}if(Pe)for(let c=o;r&&c;c=Or(c))c.draggable&&(r=void 0);if(o=Fg(o,e),r){if(rt&&r.nodeType==1&&(s=Math.min(s,r.childNodes.length),s<r.childNodes.length)){let u=r.childNodes[s],f;u.nodeName=="IMG"&&(f=u.getBoundingClientRect()).right<=e.left&&f.bottom>e.top&&s++}let c;Hr&&s&&r.nodeType==1&&(c=r.childNodes[s-1]).nodeType==1&&c.contentEditable=="false"&&c.getBoundingClientRect().top>=e.top&&s--,r==n.dom&&s==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?a=n.state.doc.content.size:(s==0||r.nodeType!=1||r.childNodes[s-1].nodeName!="BR")&&(a=$g(n,r,s,e))}a==null&&(a=Bg(n,o,e));let l=n.docView.nearestDesc(o,!0);return{pos:a,inside:l?l.posAtStart-l.border:-1}}function Al(n){return n.top<n.bottom||n.left<n.right}function Pt(n,e){let t=n.getClientRects();if(t.length){let r=t[e<0?0:t.length-1];if(Al(r))return r}return Array.prototype.find.call(t,Al)||n.getBoundingClientRect()}const Vg=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function Wu(n,e,t){let{node:r,offset:s,atom:i}=n.docView.domFromPos(e,t<0?-1:1),o=Hr||rt;if(r.nodeType==3)if(o&&(Vg.test(r.nodeValue)||(t<0?!s:s==r.nodeValue.length))){let l=Pt(xt(r,s,s),t);if(rt&&s&&/\s/.test(r.nodeValue[s-1])&&s<r.nodeValue.length){let c=Pt(xt(r,s-1,s-1),-1);if(c.top==l.top){let u=Pt(xt(r,s,s+1),-1);if(u.top!=l.top)return sr(u,u.left<c.left)}}return l}else{let l=s,c=s,u=t<0?1:-1;return t<0&&!s?(c++,u=-1):t>=0&&s==r.nodeValue.length?(l--,u=1):t<0?l--:c++,sr(Pt(xt(r,l,c),u),u<0)}if(!n.state.doc.resolve(e-(i||0)).parent.inlineContent){if(i==null&&s&&(t<0||s==ht(r))){let l=r.childNodes[s-1];if(l.nodeType==1)return Ki(l.getBoundingClientRect(),!1)}if(i==null&&s<ht(r)){let l=r.childNodes[s];if(l.nodeType==1)return Ki(l.getBoundingClientRect(),!0)}return Ki(r.getBoundingClientRect(),t>=0)}if(i==null&&s&&(t<0||s==ht(r))){let l=r.childNodes[s-1],c=l.nodeType==3?xt(l,ht(l)-(o?0:1)):l.nodeType==1&&(l.nodeName!="BR"||!l.nextSibling)?l:null;if(c)return sr(Pt(c,1),!1)}if(i==null&&s<ht(r)){let l=r.childNodes[s];for(;l.pmViewDesc&&l.pmViewDesc.ignoreForCoords;)l=l.nextSibling;let c=l?l.nodeType==3?xt(l,0,o?0:1):l.nodeType==1?l:null:null;if(c)return sr(Pt(c,-1),!0)}return sr(Pt(r.nodeType==3?xt(r):r,-t),t>=0)}function sr(n,e){if(n.width==0)return n;let t=e?n.left:n.right;return{top:n.top,bottom:n.bottom,left:t,right:t}}function Ki(n,e){if(n.height==0)return n;let t=e?n.top:n.bottom;return{top:t,bottom:t,left:n.left,right:n.right}}function Ku(n,e,t){let r=n.state,s=n.root.activeElement;r!=e&&n.updateState(e),s!=n.dom&&n.focus();try{return t()}finally{r!=e&&n.updateState(r),s!=n.dom&&s&&s.focus()}}function zg(n,e,t){let r=e.selection,s=t=="up"?r.$from:r.$to;return Ku(n,e,()=>{let{node:i}=n.docView.domFromPos(s.pos,t=="up"?-1:1);for(;;){let a=n.docView.nearestDesc(i,!0);if(!a)break;if(a.node.isBlock){i=a.contentDOM||a.dom;break}i=a.dom.parentNode}let o=Wu(n,s.pos,1);for(let a=i.firstChild;a;a=a.nextSibling){let l;if(a.nodeType==1)l=a.getClientRects();else if(a.nodeType==3)l=xt(a,0,a.nodeValue.length).getClientRects();else continue;for(let c=0;c<l.length;c++){let u=l[c];if(u.bottom>u.top+1&&(t=="up"?o.top-u.top>(u.bottom-o.top)*2:u.bottom-o.bottom>(o.bottom-u.top)*2))return!1}}return!0})}const jg=/[\u0590-\u08ac]/;function Wg(n,e,t){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let s=r.parentOffset,i=!s,o=s==r.parent.content.size,a=n.domSelection();return!jg.test(r.parent.textContent)||!a.modify?t=="left"||t=="backward"?i:o:Ku(n,e,()=>{let{focusNode:l,focusOffset:c,anchorNode:u,anchorOffset:f}=n.domSelectionRange(),d=a.caretBidiLevel;a.modify("move",t,"character");let h=r.depth?n.docView.domAfterPos(r.before()):n.dom,{focusNode:p,focusOffset:m}=n.domSelectionRange(),g=p&&!h.contains(p.nodeType==1?p:p.parentNode)||l==p&&c==m;try{a.collapse(u,f),l&&(l!=u||c!=f)&&a.extend&&a.extend(l,c)}catch{}return d!=null&&(a.caretBidiLevel=d),g})}let Nl=null,Il=null,Pl=!1;function Kg(n,e,t){return Nl==e&&Il==t?Pl:(Nl=e,Il=t,Pl=t=="up"||t=="down"?zg(n,e,t):Wg(n,e,t))}const Je=0,Dl=1,on=2,vt=3;class Vr{constructor(e,t,r,s){this.parent=e,this.children=t,this.dom=r,this.contentDOM=s,this.dirty=Je,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,t,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let t=0;t<this.children.length;t++)e+=this.children[t].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let t=0,r=this.posAtStart;;t++){let s=this.children[t];if(s==e)return r;r+=s.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,t,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let i,o;if(e==this.contentDOM)i=e.childNodes[t-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;i=e.previousSibling}for(;i&&!((o=i.pmViewDesc)&&o.parent==this);)i=i.previousSibling;return i?this.posBeforeChild(o)+o.size:this.posAtStart}else{let i,o;if(e==this.contentDOM)i=e.childNodes[t];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;i=e.nextSibling}for(;i&&!((o=i.pmViewDesc)&&o.parent==this);)i=i.nextSibling;return i?this.posBeforeChild(o):this.posAtEnd}let s;if(e==this.dom&&this.contentDOM)s=t>Ie(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))s=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(t==0)for(let i=e;;i=i.parentNode){if(i==this.dom){s=!1;break}if(i.previousSibling)break}if(s==null&&t==e.childNodes.length)for(let i=e;;i=i.parentNode){if(i==this.dom){s=!0;break}if(i.nextSibling)break}}return s??r>0?this.posAtEnd:this.posAtStart}nearestDesc(e,t=!1){for(let r=!0,s=e;s;s=s.parentNode){let i=this.getDesc(s),o;if(i&&(!t||i.node))if(r&&(o=i.nodeDOM)&&!(o.nodeType==1?o.contains(e.nodeType==1?e:e.parentNode):o==e))r=!1;else return i}}getDesc(e){let t=e.pmViewDesc;for(let r=t;r;r=r.parent)if(r==this)return t}posFromDOM(e,t,r){for(let s=e;s;s=s.parentNode){let i=this.getDesc(s);if(i)return i.localPosFromDOM(e,t,r)}return-1}descAt(e){for(let t=0,r=0;t<this.children.length;t++){let s=this.children[t],i=r+s.size;if(r==e&&i!=r){for(;!s.border&&s.children.length;)s=s.children[0];return s}if(e<i)return s.descAt(e-r-s.border);r=i}}domFromPos(e,t){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,s=0;for(let i=0;r<this.children.length;r++){let o=this.children[r],a=i+o.size;if(a>e||o instanceof qu){s=e-i;break}i=a}if(s)return this.children[r].domFromPos(s-this.children[r].border,t);for(let i;r&&!(i=this.children[r-1]).size&&i instanceof Uu&&i.side>=0;r--);if(t<=0){let i,o=!0;for(;i=r?this.children[r-1]:null,!(!i||i.dom.parentNode==this.contentDOM);r--,o=!1);return i&&t&&o&&!i.border&&!i.domAtom?i.domFromPos(i.size,t):{node:this.contentDOM,offset:i?Ie(i.dom)+1:0}}else{let i,o=!0;for(;i=r<this.children.length?this.children[r]:null,!(!i||i.dom.parentNode==this.contentDOM);r++,o=!1);return i&&o&&!i.border&&!i.domAtom?i.domFromPos(0,t):{node:this.contentDOM,offset:i?Ie(i.dom):this.contentDOM.childNodes.length}}}parseRange(e,t,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:t,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let s=-1,i=-1;for(let o=r,a=0;;a++){let l=this.children[a],c=o+l.size;if(s==-1&&e<=c){let u=o+l.border;if(e>=u&&t<=c-l.border&&l.node&&l.contentDOM&&this.contentDOM.contains(l.contentDOM))return l.parseRange(e,t,u);e=o;for(let f=a;f>0;f--){let d=this.children[f-1];if(d.size&&d.dom.parentNode==this.contentDOM&&!d.emptyChildAt(1)){s=Ie(d.dom)+1;break}e-=d.size}s==-1&&(s=0)}if(s>-1&&(c>t||a==this.children.length-1)){t=c;for(let u=a+1;u<this.children.length;u++){let f=this.children[u];if(f.size&&f.dom.parentNode==this.contentDOM&&!f.emptyChildAt(-1)){i=Ie(f.dom);break}t+=f.size}i==-1&&(i=this.contentDOM.childNodes.length);break}o=c}return{node:this.contentDOM,from:e,to:t,fromOffset:s,toOffset:i}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let t=this.children[e<0?0:this.children.length-1];return t.size==0||t.emptyChildAt(e)}domAfterPos(e){let{node:t,offset:r}=this.domFromPos(e,0);if(t.nodeType!=1||r==t.childNodes.length)throw new RangeError("No node after pos "+e);return t.childNodes[r]}setSelection(e,t,r,s=!1){let i=Math.min(e,t),o=Math.max(e,t);for(let d=0,h=0;d<this.children.length;d++){let p=this.children[d],m=h+p.size;if(i>h&&o<m)return p.setSelection(e-h-p.border,t-h-p.border,r,s);h=m}let a=this.domFromPos(e,e?-1:1),l=t==e?a:this.domFromPos(t,t?-1:1),c=r.getSelection(),u=!1;if((rt||Pe)&&e==t){let{node:d,offset:h}=a;if(d.nodeType==3){if(u=!!(h&&d.nodeValue[h-1]==`
`),u&&h==d.nodeValue.length)for(let p=d,m;p;p=p.parentNode){if(m=p.nextSibling){m.nodeName=="BR"&&(a=l={node:m.parentNode,offset:Ie(m)+1});break}let g=p.pmViewDesc;if(g&&g.node&&g.node.isBlock)break}}else{let p=d.childNodes[h-1];u=p&&(p.nodeName=="BR"||p.contentEditable=="false")}}if(rt&&c.focusNode&&c.focusNode!=l.node&&c.focusNode.nodeType==1){let d=c.focusNode.childNodes[c.focusOffset];d&&d.contentEditable=="false"&&(s=!0)}if(!(s||u&&Pe)&&bn(a.node,a.offset,c.anchorNode,c.anchorOffset)&&bn(l.node,l.offset,c.focusNode,c.focusOffset))return;let f=!1;if((c.extend||e==t)&&!u){c.collapse(a.node,a.offset);try{e!=t&&c.extend(l.node,l.offset),f=!0}catch{}}if(!f){if(e>t){let h=a;a=l,l=h}let d=document.createRange();d.setEnd(l.node,l.offset),d.setStart(a.node,a.offset),c.removeAllRanges(),c.addRange(d)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,t){for(let r=0,s=0;s<this.children.length;s++){let i=this.children[s],o=r+i.size;if(r==o?e<=o&&t>=r:e<o&&t>r){let a=r+i.border,l=o-i.border;if(e>=a&&t<=l){this.dirty=e==r||t==o?on:Dl,e==a&&t==l&&(i.contentLost||i.dom.parentNode!=this.contentDOM)?i.dirty=vt:i.markDirty(e-a,t-a);return}else i.dirty=i.dom==i.contentDOM&&i.dom.parentNode==this.contentDOM&&!i.children.length?on:vt}r=o}this.dirty=on}markParentsDirty(){let e=1;for(let t=this.parent;t;t=t.parent,e++){let r=e==1?on:Dl;t.dirty<r&&(t.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}}class Uu extends Vr{constructor(e,t,r,s){let i,o=t.type.toDOM;if(typeof o=="function"&&(o=o(r,()=>{if(!i)return s;if(i.parent)return i.parent.posBeforeChild(i)})),!t.type.spec.raw){if(o.nodeType!=1){let a=document.createElement("span");a.appendChild(o),o=a}o.contentEditable="false",o.classList.add("ProseMirror-widget")}super(e,[],o,null),this.widget=t,this.widget=t,i=this}matchesWidget(e){return this.dirty==Je&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let t=this.widget.spec.stopEvent;return t?t(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}}class Ug extends Vr{constructor(e,t,r,s){super(e,[],t,null),this.textDOM=r,this.text=s}get size(){return this.text.length}localPosFromDOM(e,t){return e!=this.textDOM?this.posAtStart+(t?this.size:0):this.posAtStart+t}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class vn extends Vr{constructor(e,t,r,s){super(e,[],r,s),this.mark=t}static create(e,t,r,s){let i=s.nodeViews[t.type.name],o=i&&i(t,s,r);return(!o||!o.dom)&&(o=pt.renderSpec(document,t.type.spec.toDOM(t,r))),new vn(e,t,o.dom,o.contentDOM||o.dom)}parseRule(){return this.dirty&vt||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=vt&&this.mark.eq(e)}markDirty(e,t){if(super.markDirty(e,t),this.dirty!=Je){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=Je}}slice(e,t,r){let s=vn.create(this.parent,this.mark,!0,r),i=this.children,o=this.size;t<o&&(i=xo(i,t,o,r)),e>0&&(i=xo(i,0,e,r));for(let a=0;a<i.length;a++)i[a].parent=s;return s.children=i,s}}class zt extends Vr{constructor(e,t,r,s,i,o,a,l,c){super(e,[],i,o),this.node=t,this.outerDeco=r,this.innerDeco=s,this.nodeDOM=a}static create(e,t,r,s,i,o){let a=i.nodeViews[t.type.name],l,c=a&&a(t,i,()=>{if(!l)return o;if(l.parent)return l.parent.posBeforeChild(l)},r,s),u=c&&c.dom,f=c&&c.contentDOM;if(t.isText){if(!u)u=document.createTextNode(t.text);else if(u.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else u||({dom:u,contentDOM:f}=pt.renderSpec(document,t.type.spec.toDOM(t)));!f&&!t.isText&&u.nodeName!="BR"&&(u.hasAttribute("contenteditable")||(u.contentEditable="false"),t.type.spec.draggable&&(u.draggable=!0));let d=u;return u=Zu(u,r,t),c?l=new qg(e,t,r,s,u,f||null,d,c,i,o+1):t.isText?new pi(e,t,r,s,u,d,i):new zt(e,t,r,s,u,f||null,d,i,o+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let t=this.children.length-1;t>=0;t--){let r=this.children[t];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>S.empty)}return e}matchesNode(e,t,r){return this.dirty==Je&&e.eq(this.node)&&Eo(t,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,t){let r=this.node.inlineContent,s=t,i=e.composing?this.localCompositionInfo(e,t):null,o=i&&i.pos>-1?i:null,a=i&&i.pos<0,l=new Jg(this,o&&o.node,e);Xg(this.node,this.innerDeco,(c,u,f)=>{c.spec.marks?l.syncToMarks(c.spec.marks,r,e):c.type.side>=0&&!f&&l.syncToMarks(u==this.node.childCount?ae.none:this.node.child(u).marks,r,e),l.placeWidget(c,e,s)},(c,u,f,d)=>{l.syncToMarks(c.marks,r,e);let h;l.findNodeMatch(c,u,f,d)||a&&e.state.selection.from>s&&e.state.selection.to<s+c.nodeSize&&(h=l.findIndexWithChild(i.node))>-1&&l.updateNodeAt(c,u,f,h,e)||l.updateNextNode(c,u,f,e,d,s)||l.addNode(c,u,f,e,s),s+=c.nodeSize}),l.syncToMarks([],r,e),this.node.isTextblock&&l.addTextblockHacks(),l.destroyRest(),(l.changed||this.dirty==on)&&(o&&this.protectLocalComposition(e,o),Gu(this.contentDOM,this.children,e),Gn&&Qg(this.dom))}localCompositionInfo(e,t){let{from:r,to:s}=e.state.selection;if(!(e.state.selection instanceof K)||r<t||s>t+this.node.content.size)return null;let i=e.domSelectionRange(),o=e9(i.focusNode,i.focusOffset);if(!o||!this.dom.contains(o.parentNode))return null;if(this.node.inlineContent){let a=o.nodeValue,l=t9(this.node.content,a,r-t,s-t);return l<0?null:{node:o,pos:l,text:a}}else return{node:o,pos:-1,text:""}}protectLocalComposition(e,{node:t,pos:r,text:s}){if(this.getDesc(t))return;let i=t;for(;i.parentNode!=this.contentDOM;i=i.parentNode){for(;i.previousSibling;)i.parentNode.removeChild(i.previousSibling);for(;i.nextSibling;)i.parentNode.removeChild(i.nextSibling);i.pmViewDesc&&(i.pmViewDesc=void 0)}let o=new Ug(this,i,t,s);e.input.compositionNodes.push(o),this.children=xo(this.children,r,r+s.length,e,o)}update(e,t,r,s){return this.dirty==vt||!e.sameMarkup(this.node)?!1:(this.updateInner(e,t,r,s),!0)}updateInner(e,t,r,s){this.updateOuterDeco(t),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(s,this.posAtStart),this.dirty=Je}updateOuterDeco(e){if(Eo(e,this.outerDeco))return;let t=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=Ju(this.dom,this.nodeDOM,So(this.outerDeco,this.node,t),So(e,this.node,t)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable")}get domAtom(){return this.node.isAtom}}function Ll(n,e,t,r,s){Zu(r,e,n);let i=new zt(void 0,n,e,t,r,r,r,s,0);return i.contentDOM&&i.updateChildren(s,0),i}class pi extends zt{constructor(e,t,r,s,i,o,a){super(e,t,r,s,i,null,o,a,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,t,r,s){return this.dirty==vt||this.dirty!=Je&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(t),(this.dirty!=Je||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,s.trackWrites==this.nodeDOM&&(s.trackWrites=null)),this.node=e,this.dirty=Je,!0)}inParent(){let e=this.parent.contentDOM;for(let t=this.nodeDOM;t;t=t.parentNode)if(t==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,t,r){return e==this.nodeDOM?this.posAtStart+Math.min(t,this.node.text.length):super.localPosFromDOM(e,t,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,t,r){let s=this.node.cut(e,t),i=document.createTextNode(s.text);return new pi(this.parent,s,this.outerDeco,this.innerDeco,i,i,r)}markDirty(e,t){super.markDirty(e,t),this.dom!=this.nodeDOM&&(e==0||t==this.nodeDOM.nodeValue.length)&&(this.dirty=vt)}get domAtom(){return!1}}class qu extends Vr{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==Je&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class qg extends zt{constructor(e,t,r,s,i,o,a,l,c,u){super(e,t,r,s,i,o,a,c,u),this.spec=l}update(e,t,r,s){if(this.dirty==vt)return!1;if(this.spec.update){let i=this.spec.update(e,t,r);return i&&this.updateInner(e,t,r,s),i}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,t,r,s)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,t,r,s){this.spec.setSelection?this.spec.setSelection(e,t,r):super.setSelection(e,t,r,s)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function Gu(n,e,t){let r=n.firstChild,s=!1;for(let i=0;i<e.length;i++){let o=e[i],a=o.dom;if(a.parentNode==n){for(;a!=r;)r=_l(r),s=!0;r=r.nextSibling}else s=!0,n.insertBefore(a,r);if(o instanceof vn){let l=r?r.previousSibling:n.lastChild;Gu(o.contentDOM,o.children,t),r=l?l.nextSibling:n.firstChild}}for(;r;)r=_l(r),s=!0;s&&t.trackWrites==n&&(t.trackWrites=null)}const br=function(n){n&&(this.nodeName=n)};br.prototype=Object.create(null);const an=[new br];function So(n,e,t){if(n.length==0)return an;let r=t?an[0]:new br,s=[r];for(let i=0;i<n.length;i++){let o=n[i].type.attrs;if(o){o.nodeName&&s.push(r=new br(o.nodeName));for(let a in o){let l=o[a];l!=null&&(t&&s.length==1&&s.push(r=new br(e.isInline?"span":"div")),a=="class"?r.class=(r.class?r.class+" ":"")+l:a=="style"?r.style=(r.style?r.style+";":"")+l:a!="nodeName"&&(r[a]=l))}}}return s}function Ju(n,e,t,r){if(t==an&&r==an)return e;let s=e;for(let i=0;i<r.length;i++){let o=r[i],a=t[i];if(i){let l;a&&a.nodeName==o.nodeName&&s!=n&&(l=s.parentNode)&&l.nodeName.toLowerCase()==o.nodeName||(l=document.createElement(o.nodeName),l.pmIsDeco=!0,l.appendChild(s),a=an[0]),s=l}Gg(s,a||an[0],o)}return s}function Gg(n,e,t){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in t)&&n.removeAttribute(r);for(let r in t)r!="class"&&r!="style"&&r!="nodeName"&&t[r]!=e[r]&&n.setAttribute(r,t[r]);if(e.class!=t.class){let r=e.class?e.class.split(" ").filter(Boolean):[],s=t.class?t.class.split(" ").filter(Boolean):[];for(let i=0;i<r.length;i++)s.indexOf(r[i])==-1&&n.classList.remove(r[i]);for(let i=0;i<s.length;i++)r.indexOf(s[i])==-1&&n.classList.add(s[i]);n.classList.length==0&&n.removeAttribute("class")}if(e.style!=t.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,s;for(;s=r.exec(e.style);)n.style.removeProperty(s[1])}t.style&&(n.style.cssText+=t.style)}}function Zu(n,e,t){return Ju(n,n,an,So(e,t,n.nodeType!=1))}function Eo(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(!n[t].type.eq(e[t].type))return!1;return!0}function _l(n){let e=n.nextSibling;return n.parentNode.removeChild(n),e}class Jg{constructor(e,t,r){this.lock=t,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=Zg(e.node.content,e)}destroyBetween(e,t){if(e!=t){for(let r=e;r<t;r++)this.top.children[r].destroy();this.top.children.splice(e,t-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,t,r){let s=0,i=this.stack.length>>1,o=Math.min(i,e.length);for(;s<o&&(s==i-1?this.top:this.stack[s+1<<1]).matchesMark(e[s])&&e[s].type.spec.spanning!==!1;)s++;for(;s<i;)this.destroyRest(),this.top.dirty=Je,this.index=this.stack.pop(),this.top=this.stack.pop(),i--;for(;i<e.length;){this.stack.push(this.top,this.index+1);let a=-1;for(let l=this.index;l<Math.min(this.index+3,this.top.children.length);l++){let c=this.top.children[l];if(c.matchesMark(e[i])&&!this.isLocked(c.dom)){a=l;break}}if(a>-1)a>this.index&&(this.changed=!0,this.destroyBetween(this.index,a)),this.top=this.top.children[this.index];else{let l=vn.create(this.top,e[i],t,r);this.top.children.splice(this.index,0,l),this.top=l,this.changed=!0}this.index=0,i++}}findNodeMatch(e,t,r,s){let i=-1,o;if(s>=this.preMatch.index&&(o=this.preMatch.matches[s-this.preMatch.index]).parent==this.top&&o.matchesNode(e,t,r))i=this.top.children.indexOf(o,this.index);else for(let a=this.index,l=Math.min(this.top.children.length,a+5);a<l;a++){let c=this.top.children[a];if(c.matchesNode(e,t,r)&&!this.preMatch.matched.has(c)){i=a;break}}return i<0?!1:(this.destroyBetween(this.index,i),this.index++,!0)}updateNodeAt(e,t,r,s,i){let o=this.top.children[s];return o.dirty==vt&&o.dom==o.contentDOM&&(o.dirty=on),o.update(e,t,r,i)?(this.destroyBetween(this.index,s),this.index++,!0):!1}findIndexWithChild(e){for(;;){let t=e.parentNode;if(!t)return-1;if(t==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let s=this.index;s<this.top.children.length;s++)if(this.top.children[s]==r)return s}return-1}e=t}}updateNextNode(e,t,r,s,i,o){for(let a=this.index;a<this.top.children.length;a++){let l=this.top.children[a];if(l instanceof zt){let c=this.preMatch.matched.get(l);if(c!=null&&c!=i)return!1;let u=l.dom,f,d=this.isLocked(u)&&!(e.isText&&l.node&&l.node.isText&&l.nodeDOM.nodeValue==e.text&&l.dirty!=vt&&Eo(t,l.outerDeco));if(!d&&l.update(e,t,r,s))return this.destroyBetween(this.index,a),l.dom!=u&&(this.changed=!0),this.index++,!0;if(!d&&(f=this.recreateWrapper(l,e,t,r,s,o)))return this.top.children[this.index]=f,f.contentDOM&&(f.dirty=on,f.updateChildren(s,o+1),f.dirty=Je),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,t,r,s,i,o){if(e.dirty||t.isAtom||!e.children.length||!e.node.content.eq(t.content))return null;let a=zt.create(this.top,t,r,s,i,o);if(a.contentDOM){a.children=e.children,e.children=[];for(let l of a.children)l.parent=a}return e.destroy(),a}addNode(e,t,r,s,i){let o=zt.create(this.top,e,t,r,s,i);o.contentDOM&&o.updateChildren(s,i+1),this.top.children.splice(this.index++,0,o),this.changed=!0}placeWidget(e,t,r){let s=this.index<this.top.children.length?this.top.children[this.index]:null;if(s&&s.matchesWidget(e)&&(e==s.widget||!s.widget.type.toDOM.parentNode))this.index++;else{let i=new Uu(this.top,e,t,r);this.top.children.splice(this.index++,0,i),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],t=this.top;for(;e instanceof vn;)t=e,e=t.children[t.children.length-1];(!e||!(e instanceof pi)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((Pe||Me)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",t),this.addHackNode("BR",this.top))}addHackNode(e,t){if(t==this.top&&this.index<t.children.length&&t.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let s=new qu(this.top,[],r,null);t!=this.top?t.children.push(s):t.children.splice(this.index++,0,s),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function Zg(n,e){let t=e,r=t.children.length,s=n.childCount,i=new Map,o=[];e:for(;s>0;){let a;for(;;)if(r){let c=t.children[r-1];if(c instanceof vn)t=c,r=c.children.length;else{a=c,r--;break}}else{if(t==e)break e;r=t.parent.children.indexOf(t),t=t.parent}let l=a.node;if(l){if(l!=n.child(s-1))break;--s,i.set(a,s),o.push(a)}}return{index:s,matched:i,matches:o.reverse()}}function Yg(n,e){return n.type.side-e.type.side}function Xg(n,e,t,r){let s=e.locals(n),i=0;if(s.length==0){for(let c=0;c<n.childCount;c++){let u=n.child(c);r(u,s,e.forChild(i,u),c),i+=u.nodeSize}return}let o=0,a=[],l=null;for(let c=0;;){let u,f;for(;o<s.length&&s[o].to==i;){let g=s[o++];g.widget&&(u?(f||(f=[u])).push(g):u=g)}if(u)if(f){f.sort(Yg);for(let g=0;g<f.length;g++)t(f[g],c,!!l)}else t(u,c,!!l);let d,h;if(l)h=-1,d=l,l=null;else if(c<n.childCount)h=c,d=n.child(c++);else break;for(let g=0;g<a.length;g++)a[g].to<=i&&a.splice(g--,1);for(;o<s.length&&s[o].from<=i&&s[o].to>i;)a.push(s[o++]);let p=i+d.nodeSize;if(d.isText){let g=p;o<s.length&&s[o].from<g&&(g=s[o].from);for(let y=0;y<a.length;y++)a[y].to<g&&(g=a[y].to);g<p&&(l=d.cut(g-i),d=d.cut(0,g-i),p=g,h=-1)}else for(;o<s.length&&s[o].to<p;)o++;let m=d.isInline&&!d.isLeaf?a.filter(g=>!g.inline):a.slice();r(d,m,e.forChild(i,d),h),i=p}}function Qg(n){if(n.nodeName=="UL"||n.nodeName=="OL"){let e=n.style.cssText;n.style.cssText=e+"; list-style: square !important",window.getComputedStyle(n).listStyle,n.style.cssText=e}}function e9(n,e){for(;;){if(n.nodeType==3)return n;if(n.nodeType==1&&e>0){if(n.childNodes.length>e&&n.childNodes[e].nodeType==3)return n.childNodes[e];n=n.childNodes[e-1],e=ht(n)}else if(n.nodeType==1&&e<n.childNodes.length)n=n.childNodes[e],e=0;else return null}}function t9(n,e,t,r){for(let s=0,i=0;s<n.childCount&&i<=r;){let o=n.child(s++),a=i;if(i+=o.nodeSize,!o.isText)continue;let l=o.text;for(;s<n.childCount;){let c=n.child(s++);if(i+=c.nodeSize,!c.isText)break;l+=c.text}if(i>=t){if(i>=r&&l.slice(r-e.length-a,r-a)==e)return r-e.length;let c=a<r?l.lastIndexOf(e,r-a-1):-1;if(c>=0&&c+e.length+a>=t)return a+c;if(t==r&&l.length>=r+e.length-a&&l.slice(r-a,r-a+e.length)==e)return r}}return-1}function xo(n,e,t,r,s){let i=[];for(let o=0,a=0;o<n.length;o++){let l=n[o],c=a,u=a+=l.size;c>=t||u<=e?i.push(l):(c<e&&i.push(l.slice(0,e-c,r)),s&&(i.push(s),s=void 0),u>t&&i.push(l.slice(t-c,l.size,r)))}return i}function ia(n,e=null){let t=n.domSelectionRange(),r=n.state.doc;if(!t.focusNode)return null;let s=n.docView.nearestDesc(t.focusNode),i=s&&s.size==0,o=n.docView.posFromDOM(t.focusNode,t.focusOffset,1);if(o<0)return null;let a=r.resolve(o),l,c;if(hi(t)){for(l=a;s&&!s.node;)s=s.parent;let u=s.node;if(s&&u.isAtom&&z.isSelectable(u)&&s.parent&&!(u.isInline&&xg(t.focusNode,t.focusOffset,s.dom))){let f=s.posBefore;c=new z(o==f?a:r.resolve(f))}}else{let u=n.docView.posFromDOM(t.anchorNode,t.anchorOffset,1);if(u<0)return null;l=r.resolve(u)}if(!c){let u=e=="pointer"||n.state.selection.head<a.pos&&!i?1:-1;c=oa(n,l,a,u)}return c}function Yu(n){return n.editable?n.hasFocus():Qu(n)&&document.activeElement&&document.activeElement.contains(n.dom)}function Tt(n,e=!1){let t=n.state.selection;if(Xu(n,t),!!Yu(n)){if(!e&&n.input.mouseDown&&n.input.mouseDown.allowDefault&&Me){let r=n.domSelectionRange(),s=n.domObserver.currentSelection;if(r.anchorNode&&s.anchorNode&&bn(r.anchorNode,r.anchorOffset,s.anchorNode,s.anchorOffset)){n.input.mouseDown.delayedSelectionSync=!0,n.domObserver.setCurSelection();return}}if(n.domObserver.disconnectSelection(),n.cursorWrapper)r9(n);else{let{anchor:r,head:s}=t,i,o;Rl&&!(t instanceof K)&&(t.$from.parent.inlineContent||(i=Fl(n,t.from)),!t.empty&&!t.$from.parent.inlineContent&&(o=Fl(n,t.to))),n.docView.setSelection(r,s,n.root,e),Rl&&(i&&Bl(i),o&&Bl(o)),t.visible?n.dom.classList.remove("ProseMirror-hideselection"):(n.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&n9(n))}n.domObserver.setCurSelection(),n.domObserver.connectSelection()}}const Rl=Pe||Me&&Og<63;function Fl(n,e){let{node:t,offset:r}=n.docView.domFromPos(e,0),s=r<t.childNodes.length?t.childNodes[r]:null,i=r?t.childNodes[r-1]:null;if(Pe&&s&&s.contentEditable=="false")return Ui(s);if((!s||s.contentEditable=="false")&&(!i||i.contentEditable=="false")){if(s)return Ui(s);if(i)return Ui(i)}}function Ui(n){return n.contentEditable="true",Pe&&n.draggable&&(n.draggable=!1,n.wasDraggable=!0),n}function Bl(n){n.contentEditable="false",n.wasDraggable&&(n.draggable=!0,n.wasDraggable=null)}function n9(n){let e=n.dom.ownerDocument;e.removeEventListener("selectionchange",n.input.hideSelectionGuard);let t=n.domSelectionRange(),r=t.anchorNode,s=t.anchorOffset;e.addEventListener("selectionchange",n.input.hideSelectionGuard=()=>{(t.anchorNode!=r||t.anchorOffset!=s)&&(e.removeEventListener("selectionchange",n.input.hideSelectionGuard),setTimeout(()=>{(!Yu(n)||n.state.selection.visible)&&n.dom.classList.remove("ProseMirror-hideselection")},20))})}function r9(n){let e=n.domSelection(),t=document.createRange(),r=n.cursorWrapper.dom,s=r.nodeName=="IMG";s?t.setEnd(r.parentNode,Ie(r)+1):t.setEnd(r,0),t.collapse(!1),e.removeAllRanges(),e.addRange(t),!s&&!n.state.selection.visible&&Be&&Vt<=11&&(r.disabled=!0,r.disabled=!1)}function Xu(n,e){if(e instanceof z){let t=n.docView.descAt(e.from);t!=n.lastSelectedViewDesc&&($l(n),t&&t.selectNode(),n.lastSelectedViewDesc=t)}else $l(n)}function $l(n){n.lastSelectedViewDesc&&(n.lastSelectedViewDesc.parent&&n.lastSelectedViewDesc.deselectNode(),n.lastSelectedViewDesc=void 0)}function oa(n,e,t,r){return n.someProp("createSelectionBetween",s=>s(n,e,t))||K.between(e,t,r)}function Hl(n){return n.editable&&!n.hasFocus()?!1:Qu(n)}function Qu(n){let e=n.domSelectionRange();if(!e.anchorNode)return!1;try{return n.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(n.editable||n.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function s9(n){let e=n.docView.domFromPos(n.state.selection.anchor,0),t=n.domSelectionRange();return bn(e.node,e.offset,t.anchorNode,t.anchorOffset)}function Mo(n,e){let{$anchor:t,$head:r}=n.selection,s=e>0?t.max(r):t.min(r),i=s.parent.inlineContent?s.depth?n.doc.resolve(e>0?s.after():s.before()):null:s;return i&&Z.findFrom(i,e)}function Dt(n,e){return n.dispatch(n.state.tr.setSelection(e).scrollIntoView()),!0}function Vl(n,e,t){let r=n.state.selection;if(r instanceof K)if(t.indexOf("s")>-1){let{$head:s}=r,i=s.textOffset?null:e<0?s.nodeBefore:s.nodeAfter;if(!i||i.isText||!i.isLeaf)return!1;let o=n.state.doc.resolve(s.pos+i.nodeSize*(e<0?-1:1));return Dt(n,new K(r.$anchor,o))}else if(r.empty){if(n.endOfTextblock(e>0?"forward":"backward")){let s=Mo(n.state,e);return s&&s instanceof z?Dt(n,s):!1}else if(!(qe&&t.indexOf("m")>-1)){let s=r.$head,i=s.textOffset?null:e<0?s.nodeBefore:s.nodeAfter,o;if(!i||i.isText)return!1;let a=e<0?s.pos-i.nodeSize:s.pos;return i.isAtom||(o=n.docView.descAt(a))&&!o.contentDOM?z.isSelectable(i)?Dt(n,new z(e<0?n.state.doc.resolve(s.pos-i.nodeSize):s)):Hr?Dt(n,new K(n.state.doc.resolve(e<0?a:a+i.nodeSize))):!1:!1}}else return!1;else{if(r instanceof z&&r.node.isInline)return Dt(n,new K(e>0?r.$to:r.$from));{let s=Mo(n.state,e);return s?Dt(n,s):!1}}}function Ss(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function vr(n,e){let t=n.pmViewDesc;return t&&t.size==0&&(e<0||n.nextSibling||n.nodeName!="BR")}function An(n,e){return e<0?i9(n):o9(n)}function i9(n){let e=n.domSelectionRange(),t=e.focusNode,r=e.focusOffset;if(!t)return;let s,i,o=!1;for(rt&&t.nodeType==1&&r<Ss(t)&&vr(t.childNodes[r],-1)&&(o=!0);;)if(r>0){if(t.nodeType!=1)break;{let a=t.childNodes[r-1];if(vr(a,-1))s=t,i=--r;else if(a.nodeType==3)t=a,r=t.nodeValue.length;else break}}else{if(ed(t))break;{let a=t.previousSibling;for(;a&&vr(a,-1);)s=t.parentNode,i=Ie(a),a=a.previousSibling;if(a)t=a,r=Ss(t);else{if(t=t.parentNode,t==n.dom)break;r=0}}}o?To(n,t,r):s&&To(n,s,i)}function o9(n){let e=n.domSelectionRange(),t=e.focusNode,r=e.focusOffset;if(!t)return;let s=Ss(t),i,o;for(;;)if(r<s){if(t.nodeType!=1)break;let a=t.childNodes[r];if(vr(a,1))i=t,o=++r;else break}else{if(ed(t))break;{let a=t.nextSibling;for(;a&&vr(a,1);)i=a.parentNode,o=Ie(a)+1,a=a.nextSibling;if(a)t=a,r=0,s=Ss(t);else{if(t=t.parentNode,t==n.dom)break;r=s=0}}}i&&To(n,i,o)}function ed(n){let e=n.pmViewDesc;return e&&e.node&&e.node.isBlock}function a9(n,e){for(;n&&e==n.childNodes.length&&!ra(n);)e=Ie(n)+1,n=n.parentNode;for(;n&&e<n.childNodes.length;){let t=n.childNodes[e];if(t.nodeType==3)return t;if(t.nodeType==1&&t.contentEditable=="false")break;n=t,e=0}}function l9(n,e){for(;n&&!e&&!ra(n);)e=Ie(n),n=n.parentNode;for(;n&&e;){let t=n.childNodes[e-1];if(t.nodeType==3)return t;if(t.nodeType==1&&t.contentEditable=="false")break;n=t,e=n.childNodes.length}}function To(n,e,t){if(e.nodeType!=3){let i,o;(o=a9(e,t))?(e=o,t=0):(i=l9(e,t))&&(e=i,t=i.nodeValue.length)}let r=n.domSelection();if(hi(r)){let i=document.createRange();i.setEnd(e,t),i.setStart(e,t),r.removeAllRanges(),r.addRange(i)}else r.extend&&r.extend(e,t);n.domObserver.setCurSelection();let{state:s}=n;setTimeout(()=>{n.state==s&&Tt(n)},50)}function zl(n,e){let t=n.state.doc.resolve(e);if(!(Me||Ag)&&t.parent.inlineContent){let s=n.coordsAtPos(e);if(e>t.start()){let i=n.coordsAtPos(e-1),o=(i.top+i.bottom)/2;if(o>s.top&&o<s.bottom&&Math.abs(i.left-s.left)>1)return i.left<s.left?"ltr":"rtl"}if(e<t.end()){let i=n.coordsAtPos(e+1),o=(i.top+i.bottom)/2;if(o>s.top&&o<s.bottom&&Math.abs(i.left-s.left)>1)return i.left>s.left?"ltr":"rtl"}}return getComputedStyle(n.dom).direction=="rtl"?"rtl":"ltr"}function jl(n,e,t){let r=n.state.selection;if(r instanceof K&&!r.empty||t.indexOf("s")>-1||qe&&t.indexOf("m")>-1)return!1;let{$from:s,$to:i}=r;if(!s.parent.inlineContent||n.endOfTextblock(e<0?"up":"down")){let o=Mo(n.state,e);if(o&&o instanceof z)return Dt(n,o)}if(!s.parent.inlineContent){let o=e<0?s:i,a=r instanceof nt?Z.near(o,e):Z.findFrom(o,e);return a?Dt(n,a):!1}return!1}function Wl(n,e){if(!(n.state.selection instanceof K))return!0;let{$head:t,$anchor:r,empty:s}=n.state.selection;if(!t.sameParent(r))return!0;if(!s)return!1;if(n.endOfTextblock(e>0?"forward":"backward"))return!0;let i=!t.textOffset&&(e<0?t.nodeBefore:t.nodeAfter);if(i&&!i.isText){let o=n.state.tr;return e<0?o.delete(t.pos-i.nodeSize,t.pos):o.delete(t.pos,t.pos+i.nodeSize),n.dispatch(o),!0}return!1}function Kl(n,e,t){n.domObserver.stop(),e.contentEditable=t,n.domObserver.start()}function c9(n){if(!Pe||n.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:t}=n.domSelectionRange();if(e&&e.nodeType==1&&t==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;Kl(n,r,"true"),setTimeout(()=>Kl(n,r,"false"),20)}return!1}function u9(n){let e="";return n.ctrlKey&&(e+="c"),n.metaKey&&(e+="m"),n.altKey&&(e+="a"),n.shiftKey&&(e+="s"),e}function d9(n,e){let t=e.keyCode,r=u9(e);if(t==8||qe&&t==72&&r=="c")return Wl(n,-1)||An(n,-1);if(t==46&&!e.shiftKey||qe&&t==68&&r=="c")return Wl(n,1)||An(n,1);if(t==13||t==27)return!0;if(t==37||qe&&t==66&&r=="c"){let s=t==37?zl(n,n.state.selection.from)=="ltr"?-1:1:-1;return Vl(n,s,r)||An(n,s)}else if(t==39||qe&&t==70&&r=="c"){let s=t==39?zl(n,n.state.selection.from)=="ltr"?1:-1:1;return Vl(n,s,r)||An(n,s)}else{if(t==38||qe&&t==80&&r=="c")return jl(n,-1,r)||An(n,-1);if(t==40||qe&&t==78&&r=="c")return c9(n)||jl(n,1,r)||An(n,1);if(r==(qe?"m":"c")&&(t==66||t==73||t==89||t==90))return!0}return!1}function td(n,e){n.someProp("transformCopied",h=>{e=h(e,n)});let t=[],{content:r,openStart:s,openEnd:i}=e;for(;s>1&&i>1&&r.childCount==1&&r.firstChild.childCount==1;){s--,i--;let h=r.firstChild;t.push(h.type.name,h.attrs!=h.type.defaultAttrs?h.attrs:null),r=h.content}let o=n.someProp("clipboardSerializer")||pt.fromSchema(n.state.schema),a=ad(),l=a.createElement("div");l.appendChild(o.serializeFragment(r,{document:a}));let c=l.firstChild,u,f=0;for(;c&&c.nodeType==1&&(u=od[c.nodeName.toLowerCase()]);){for(let h=u.length-1;h>=0;h--){let p=a.createElement(u[h]);for(;l.firstChild;)p.appendChild(l.firstChild);l.appendChild(p),f++}c=l.firstChild}c&&c.nodeType==1&&c.setAttribute("data-pm-slice",`${s} ${i}${f?` -${f}`:""} ${JSON.stringify(t)}`);let d=n.someProp("clipboardTextSerializer",h=>h(e,n))||e.content.textBetween(0,e.content.size,`

`);return{dom:l,text:d}}function nd(n,e,t,r,s){let i=s.parent.type.spec.code,o,a;if(!t&&!e)return null;let l=e&&(r||i||!t);if(l){if(n.someProp("transformPastedText",d=>{e=d(e,i||r,n)}),i)return e?new I(S.from(n.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0):I.empty;let f=n.someProp("clipboardTextParser",d=>d(e,s,r,n));if(f)a=f;else{let d=s.marks(),{schema:h}=n.state,p=pt.fromSchema(h);o=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(m=>{let g=o.appendChild(document.createElement("p"));m&&g.appendChild(p.serializeNode(h.text(m,d)))})}}else n.someProp("transformPastedHTML",f=>{t=f(t,n)}),o=p9(t),Hr&&m9(o);let c=o&&o.querySelector("[data-pm-slice]"),u=c&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(c.getAttribute("data-pm-slice")||"");if(u&&u[3])for(let f=+u[3];f>0;f--){let d=o.firstChild;for(;d&&d.nodeType!=1;)d=d.nextSibling;if(!d)break;o=d}if(a||(a=(n.someProp("clipboardParser")||n.someProp("domParser")||Kn.fromSchema(n.state.schema)).parseSlice(o,{preserveWhitespace:!!(l||u),context:s,ruleFromNode(d){return d.nodeName=="BR"&&!d.nextSibling&&d.parentNode&&!f9.test(d.parentNode.nodeName)?{ignore:!0}:null}})),u)a=g9(Ul(a,+u[1],+u[2]),u[4]);else if(a=I.maxOpen(h9(a.content,s),!0),a.openStart||a.openEnd){let f=0,d=0;for(let h=a.content.firstChild;f<a.openStart&&!h.type.spec.isolating;f++,h=h.firstChild);for(let h=a.content.lastChild;d<a.openEnd&&!h.type.spec.isolating;d++,h=h.lastChild);a=Ul(a,f,d)}return n.someProp("transformPasted",f=>{a=f(a,n)}),a}const f9=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function h9(n,e){if(n.childCount<2)return n;for(let t=e.depth;t>=0;t--){let s=e.node(t).contentMatchAt(e.index(t)),i,o=[];if(n.forEach(a=>{if(!o)return;let l=s.findWrapping(a.type),c;if(!l)return o=null;if(c=o.length&&i.length&&sd(l,i,a,o[o.length-1],0))o[o.length-1]=c;else{o.length&&(o[o.length-1]=id(o[o.length-1],i.length));let u=rd(a,l);o.push(u),s=s.matchType(u.type),i=l}}),o)return S.from(o)}return n}function rd(n,e,t=0){for(let r=e.length-1;r>=t;r--)n=e[r].create(null,S.from(n));return n}function sd(n,e,t,r,s){if(s<n.length&&s<e.length&&n[s]==e[s]){let i=sd(n,e,t,r.lastChild,s+1);if(i)return r.copy(r.content.replaceChild(r.childCount-1,i));if(r.contentMatchAt(r.childCount).matchType(s==n.length-1?t.type:n[s+1]))return r.copy(r.content.append(S.from(rd(t,n,s+1))))}}function id(n,e){if(e==0)return n;let t=n.content.replaceChild(n.childCount-1,id(n.lastChild,e-1)),r=n.contentMatchAt(n.childCount).fillBefore(S.empty,!0);return n.copy(t.append(r))}function Oo(n,e,t,r,s,i){let o=e<0?n.firstChild:n.lastChild,a=o.content;return n.childCount>1&&(i=0),s<r-1&&(a=Oo(a,e,t,r,s+1,i)),s>=t&&(a=e<0?o.contentMatchAt(0).fillBefore(a,i<=s).append(a):a.append(o.contentMatchAt(o.childCount).fillBefore(S.empty,!0))),n.replaceChild(e<0?0:n.childCount-1,o.copy(a))}function Ul(n,e,t){return e<n.openStart&&(n=new I(Oo(n.content,-1,e,n.openStart,0,n.openEnd),e,n.openEnd)),t<n.openEnd&&(n=new I(Oo(n.content,1,t,n.openEnd,0,0),n.openStart,t)),n}const od={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let ql=null;function ad(){return ql||(ql=document.implementation.createHTMLDocument("title"))}function p9(n){let e=/^(\s*<meta [^>]*>)*/.exec(n);e&&(n=n.slice(e[0].length));let t=ad().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(n),s;if((s=r&&od[r[1].toLowerCase()])&&(n=s.map(i=>"<"+i+">").join("")+n+s.map(i=>"</"+i+">").reverse().join("")),t.innerHTML=n,s)for(let i=0;i<s.length;i++)t=t.querySelector(s[i])||t;return t}function m9(n){let e=n.querySelectorAll(Me?"span:not([class]):not([style])":"span.Apple-converted-space");for(let t=0;t<e.length;t++){let r=e[t];r.childNodes.length==1&&r.textContent==" "&&r.parentNode&&r.parentNode.replaceChild(n.ownerDocument.createTextNode(" "),r)}}function g9(n,e){if(!n.size)return n;let t=n.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return n}let{content:s,openStart:i,openEnd:o}=n;for(let a=r.length-2;a>=0;a-=2){let l=t.nodes[r[a]];if(!l||l.hasRequiredAttrs())break;s=S.from(l.create(r[a+1],s)),i++,o++}return new I(s,i,o)}const De={},Le={},y9={touchstart:!0,touchmove:!0};class b9{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastAndroidDelete=0,this.composing=!1,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function v9(n){for(let e in De){let t=De[e];n.dom.addEventListener(e,n.input.eventHandlers[e]=r=>{k9(n,r)&&!aa(n,r)&&(n.editable||!(r.type in Le))&&t(n,r)},y9[e]?{passive:!0}:void 0)}Pe&&n.dom.addEventListener("input",()=>null),Ao(n)}function Ht(n,e){n.input.lastSelectionOrigin=e,n.input.lastSelectionTime=Date.now()}function C9(n){n.domObserver.stop();for(let e in n.input.eventHandlers)n.dom.removeEventListener(e,n.input.eventHandlers[e]);clearTimeout(n.input.composingTimeout),clearTimeout(n.input.lastIOSEnterFallbackTimeout)}function Ao(n){n.someProp("handleDOMEvents",e=>{for(let t in e)n.input.eventHandlers[t]||n.dom.addEventListener(t,n.input.eventHandlers[t]=r=>aa(n,r))})}function aa(n,e){return n.someProp("handleDOMEvents",t=>{let r=t[e.type];return r?r(n,e)||e.defaultPrevented:!1})}function k9(n,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target;t!=n.dom;t=t.parentNode)if(!t||t.nodeType==11||t.pmViewDesc&&t.pmViewDesc.stopEvent(e))return!1;return!0}function w9(n,e){!aa(n,e)&&De[e.type]&&(n.editable||!(e.type in Le))&&De[e.type](n,e)}Le.keydown=(n,e)=>{let t=e;if(n.input.shiftKey=t.keyCode==16||t.shiftKey,!cd(n,t)&&(n.input.lastKeyCode=t.keyCode,n.input.lastKeyCodeTime=Date.now(),!(et&&Me&&t.keyCode==13)))if(t.keyCode!=229&&n.domObserver.forceFlush(),Gn&&t.keyCode==13&&!t.ctrlKey&&!t.altKey&&!t.metaKey){let r=Date.now();n.input.lastIOSEnter=r,n.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{n.input.lastIOSEnter==r&&(n.someProp("handleKeyDown",s=>s(n,sn(13,"Enter"))),n.input.lastIOSEnter=0)},200)}else n.someProp("handleKeyDown",r=>r(n,t))||d9(n,t)?t.preventDefault():Ht(n,"key")};Le.keyup=(n,e)=>{e.keyCode==16&&(n.input.shiftKey=!1)};Le.keypress=(n,e)=>{let t=e;if(cd(n,t)||!t.charCode||t.ctrlKey&&!t.altKey||qe&&t.metaKey)return;if(n.someProp("handleKeyPress",s=>s(n,t))){t.preventDefault();return}let r=n.state.selection;if(!(r instanceof K)||!r.$from.sameParent(r.$to)){let s=String.fromCharCode(t.charCode);!/[\r\n]/.test(s)&&!n.someProp("handleTextInput",i=>i(n,r.$from.pos,r.$to.pos,s))&&n.dispatch(n.state.tr.insertText(s).scrollIntoView()),t.preventDefault()}};function mi(n){return{left:n.clientX,top:n.clientY}}function S9(n,e){let t=e.x-n.clientX,r=e.y-n.clientY;return t*t+r*r<100}function la(n,e,t,r,s){if(r==-1)return!1;let i=n.state.doc.resolve(r);for(let o=i.depth+1;o>0;o--)if(n.someProp(e,a=>o>i.depth?a(n,t,i.nodeAfter,i.before(o),s,!0):a(n,t,i.node(o),i.before(o),s,!1)))return!0;return!1}function jn(n,e,t){n.focused||n.focus();let r=n.state.tr.setSelection(e);t=="pointer"&&r.setMeta("pointer",!0),n.dispatch(r)}function E9(n,e){if(e==-1)return!1;let t=n.state.doc.resolve(e),r=t.nodeAfter;return r&&r.isAtom&&z.isSelectable(r)?(jn(n,new z(t),"pointer"),!0):!1}function x9(n,e){if(e==-1)return!1;let t=n.state.selection,r,s;t instanceof z&&(r=t.node);let i=n.state.doc.resolve(e);for(let o=i.depth+1;o>0;o--){let a=o>i.depth?i.nodeAfter:i.node(o);if(z.isSelectable(a)){r&&t.$from.depth>0&&o>=t.$from.depth&&i.before(t.$from.depth+1)==t.$from.pos?s=i.before(t.$from.depth):s=i.before(o);break}}return s!=null?(jn(n,z.create(n.state.doc,s),"pointer"),!0):!1}function M9(n,e,t,r,s){return la(n,"handleClickOn",e,t,r)||n.someProp("handleClick",i=>i(n,e,r))||(s?x9(n,t):E9(n,t))}function T9(n,e,t,r){return la(n,"handleDoubleClickOn",e,t,r)||n.someProp("handleDoubleClick",s=>s(n,e,r))}function O9(n,e,t,r){return la(n,"handleTripleClickOn",e,t,r)||n.someProp("handleTripleClick",s=>s(n,e,r))||A9(n,t,r)}function A9(n,e,t){if(t.button!=0)return!1;let r=n.state.doc;if(e==-1)return r.inlineContent?(jn(n,K.create(r,0,r.content.size),"pointer"),!0):!1;let s=r.resolve(e);for(let i=s.depth+1;i>0;i--){let o=i>s.depth?s.nodeAfter:s.node(i),a=s.before(i);if(o.inlineContent)jn(n,K.create(r,a+1,a+1+o.content.size),"pointer");else if(z.isSelectable(o))jn(n,z.create(r,a),"pointer");else continue;return!0}}function ca(n){return Es(n)}const ld=qe?"metaKey":"ctrlKey";De.mousedown=(n,e)=>{let t=e;n.input.shiftKey=t.shiftKey;let r=ca(n),s=Date.now(),i="singleClick";s-n.input.lastClick.time<500&&S9(t,n.input.lastClick)&&!t[ld]&&(n.input.lastClick.type=="singleClick"?i="doubleClick":n.input.lastClick.type=="doubleClick"&&(i="tripleClick")),n.input.lastClick={time:s,x:t.clientX,y:t.clientY,type:i};let o=n.posAtCoords(mi(t));o&&(i=="singleClick"?(n.input.mouseDown&&n.input.mouseDown.done(),n.input.mouseDown=new N9(n,o,t,!!r)):(i=="doubleClick"?T9:O9)(n,o.pos,o.inside,t)?t.preventDefault():Ht(n,"pointer"))};class N9{constructor(e,t,r,s){this.view=e,this.pos=t,this.event=r,this.flushed=s,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[ld],this.allowDefault=r.shiftKey;let i,o;if(t.inside>-1)i=e.state.doc.nodeAt(t.inside),o=t.inside;else{let u=e.state.doc.resolve(t.pos);i=u.parent,o=u.depth?u.before():0}const a=s?null:r.target,l=a?e.docView.nearestDesc(a,!0):null;this.target=l?l.dom:null;let{selection:c}=e.state;(r.button==0&&i.type.spec.draggable&&i.type.spec.selectable!==!1||c instanceof z&&c.from<=o&&c.to>o)&&(this.mightDrag={node:i,pos:o,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&rt&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),Ht(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>Tt(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let t=this.pos;this.view.state.doc!=this.startDoc&&(t=this.view.posAtCoords(mi(e))),this.updateAllowDefault(e),this.allowDefault||!t?Ht(this.view,"pointer"):M9(this.view,t.pos,t.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||Pe&&this.mightDrag&&!this.mightDrag.node.isAtom||Me&&!this.view.state.selection.visible&&Math.min(Math.abs(t.pos-this.view.state.selection.from),Math.abs(t.pos-this.view.state.selection.to))<=2)?(jn(this.view,Z.near(this.view.state.doc.resolve(t.pos)),"pointer"),e.preventDefault()):Ht(this.view,"pointer")}move(e){this.updateAllowDefault(e),Ht(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}De.touchstart=n=>{n.input.lastTouch=Date.now(),ca(n),Ht(n,"pointer")};De.touchmove=n=>{n.input.lastTouch=Date.now(),Ht(n,"pointer")};De.contextmenu=n=>ca(n);function cd(n,e){return n.composing?!0:Pe&&Math.abs(e.timeStamp-n.input.compositionEndedAt)<500?(n.input.compositionEndedAt=-2e8,!0):!1}const I9=et?5e3:-1;Le.compositionstart=Le.compositionupdate=n=>{if(!n.composing){n.domObserver.flush();let{state:e}=n,t=e.selection.$from;if(e.selection.empty&&(e.storedMarks||!t.textOffset&&t.parentOffset&&t.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)))n.markCursor=n.state.storedMarks||t.marks(),Es(n,!0),n.markCursor=null;else if(Es(n),rt&&e.selection.empty&&t.parentOffset&&!t.textOffset&&t.nodeBefore.marks.length){let r=n.domSelectionRange();for(let s=r.focusNode,i=r.focusOffset;s&&s.nodeType==1&&i!=0;){let o=i<0?s.lastChild:s.childNodes[i-1];if(!o)break;if(o.nodeType==3){n.domSelection().collapse(o,o.nodeValue.length);break}else s=o,i=-1}}n.input.composing=!0}ud(n,I9)};Le.compositionend=(n,e)=>{n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=e.timeStamp,n.input.compositionPendingChanges=n.domObserver.pendingRecords().length?n.input.compositionID:0,n.input.compositionPendingChanges&&Promise.resolve().then(()=>n.domObserver.flush()),n.input.compositionID++,ud(n,20))};function ud(n,e){clearTimeout(n.input.composingTimeout),e>-1&&(n.input.composingTimeout=setTimeout(()=>Es(n),e))}function dd(n){for(n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=P9());n.input.compositionNodes.length>0;)n.input.compositionNodes.pop().markParentsDirty()}function P9(){let n=document.createEvent("Event");return n.initEvent("event",!0,!0),n.timeStamp}function Es(n,e=!1){if(!(et&&n.domObserver.flushingSoon>=0)){if(n.domObserver.forceFlush(),dd(n),e||n.docView&&n.docView.dirty){let t=ia(n);return t&&!t.eq(n.state.selection)?n.dispatch(n.state.tr.setSelection(t)):n.updateState(n.state),!0}return!1}}function D9(n,e){if(!n.dom.parentNode)return;let t=n.dom.parentNode.appendChild(document.createElement("div"));t.appendChild(e),t.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),s=document.createRange();s.selectNodeContents(e),n.dom.blur(),r.removeAllRanges(),r.addRange(s),setTimeout(()=>{t.parentNode&&t.parentNode.removeChild(t),n.focus()},50)}const Ar=Be&&Vt<15||Gn&&Ng<604;De.copy=Le.cut=(n,e)=>{let t=e,r=n.state.selection,s=t.type=="cut";if(r.empty)return;let i=Ar?null:t.clipboardData,o=r.content(),{dom:a,text:l}=td(n,o);i?(t.preventDefault(),i.clearData(),i.setData("text/html",a.innerHTML),i.setData("text/plain",l)):D9(n,a),s&&n.dispatch(n.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function L9(n){return n.openStart==0&&n.openEnd==0&&n.content.childCount==1?n.content.firstChild:null}function _9(n,e){if(!n.dom.parentNode)return;let t=n.input.shiftKey||n.state.selection.$from.parent.type.spec.code,r=n.dom.parentNode.appendChild(document.createElement(t?"textarea":"div"));t||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let s=n.input.shiftKey&&n.input.lastKeyCode!=45;setTimeout(()=>{n.focus(),r.parentNode&&r.parentNode.removeChild(r),t?Nr(n,r.value,null,s,e):Nr(n,r.textContent,r.innerHTML,s,e)},50)}function Nr(n,e,t,r,s){let i=nd(n,e,t,r,n.state.selection.$from);if(n.someProp("handlePaste",l=>l(n,s,i||I.empty)))return!0;if(!i)return!1;let o=L9(i),a=o?n.state.tr.replaceSelectionWith(o,r):n.state.tr.replaceSelection(i);return n.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function fd(n){let e=n.getData("text/plain")||n.getData("Text");if(e)return e;let t=n.getData("text/uri-list");return t?t.replace(/\r?\n/g," "):""}Le.paste=(n,e)=>{let t=e;if(n.composing&&!et)return;let r=Ar?null:t.clipboardData,s=n.input.shiftKey&&n.input.lastKeyCode!=45;r&&Nr(n,fd(r),r.getData("text/html"),s,t)?t.preventDefault():_9(n,t)};class hd{constructor(e,t,r){this.slice=e,this.move=t,this.node=r}}const pd=qe?"altKey":"ctrlKey";De.dragstart=(n,e)=>{let t=e,r=n.input.mouseDown;if(r&&r.done(),!t.dataTransfer)return;let s=n.state.selection,i=s.empty?null:n.posAtCoords(mi(t)),o;if(!(i&&i.pos>=s.from&&i.pos<=(s instanceof z?s.to-1:s.to))){if(r&&r.mightDrag)o=z.create(n.state.doc,r.mightDrag.pos);else if(t.target&&t.target.nodeType==1){let u=n.docView.nearestDesc(t.target,!0);u&&u.node.type.spec.draggable&&u!=n.docView&&(o=z.create(n.state.doc,u.posBefore))}}let a=(o||n.state.selection).content(),{dom:l,text:c}=td(n,a);t.dataTransfer.clearData(),t.dataTransfer.setData(Ar?"Text":"text/html",l.innerHTML),t.dataTransfer.effectAllowed="copyMove",Ar||t.dataTransfer.setData("text/plain",c),n.dragging=new hd(a,!t[pd],o)};De.dragend=n=>{let e=n.dragging;window.setTimeout(()=>{n.dragging==e&&(n.dragging=null)},50)};Le.dragover=Le.dragenter=(n,e)=>e.preventDefault();Le.drop=(n,e)=>{let t=e,r=n.dragging;if(n.dragging=null,!t.dataTransfer)return;let s=n.posAtCoords(mi(t));if(!s)return;let i=n.state.doc.resolve(s.pos),o=r&&r.slice;o?n.someProp("transformPasted",p=>{o=p(o,n)}):o=nd(n,fd(t.dataTransfer),Ar?null:t.dataTransfer.getData("text/html"),!1,i);let a=!!(r&&!t[pd]);if(n.someProp("handleDrop",p=>p(n,t,o||I.empty,a))){t.preventDefault();return}if(!o)return;t.preventDefault();let l=o?Iu(n.state.doc,i.pos,o):i.pos;l==null&&(l=i.pos);let c=n.state.tr;if(a){let{node:p}=r;p?p.replace(c):c.deleteSelection()}let u=c.mapping.map(l),f=o.openStart==0&&o.openEnd==0&&o.content.childCount==1,d=c.doc;if(f?c.replaceRangeWith(u,u,o.content.firstChild):c.replaceRange(u,u,o),c.doc.eq(d))return;let h=c.doc.resolve(u);if(f&&z.isSelectable(o.content.firstChild)&&h.nodeAfter&&h.nodeAfter.sameMarkup(o.content.firstChild))c.setSelection(new z(h));else{let p=c.mapping.map(l);c.mapping.maps[c.mapping.maps.length-1].forEach((m,g,y,v)=>p=v),c.setSelection(oa(n,h,c.doc.resolve(p)))}n.focus(),n.dispatch(c.setMeta("uiEvent","drop"))};De.focus=n=>{n.input.lastFocus=Date.now(),n.focused||(n.domObserver.stop(),n.dom.classList.add("ProseMirror-focused"),n.domObserver.start(),n.focused=!0,setTimeout(()=>{n.docView&&n.hasFocus()&&!n.domObserver.currentSelection.eq(n.domSelectionRange())&&Tt(n)},20))};De.blur=(n,e)=>{let t=e;n.focused&&(n.domObserver.stop(),n.dom.classList.remove("ProseMirror-focused"),n.domObserver.start(),t.relatedTarget&&n.dom.contains(t.relatedTarget)&&n.domObserver.currentSelection.clear(),n.focused=!1)};De.beforeinput=(n,e)=>{if(Me&&et&&e.inputType=="deleteContentBackward"){n.domObserver.flushSoon();let{domChangeCount:r}=n.input;setTimeout(()=>{if(n.input.domChangeCount!=r||(n.dom.blur(),n.focus(),n.someProp("handleKeyDown",i=>i(n,sn(8,"Backspace")))))return;let{$cursor:s}=n.state.selection;s&&s.pos>0&&n.dispatch(n.state.tr.delete(s.pos-1,s.pos).scrollIntoView())},50)}};for(let n in Le)De[n]=Le[n];function Ir(n,e){if(n==e)return!0;for(let t in n)if(n[t]!==e[t])return!1;for(let t in e)if(!(t in n))return!1;return!0}class xs{constructor(e,t){this.toDOM=e,this.spec=t||hn,this.side=this.spec.side||0}map(e,t,r,s){let{pos:i,deleted:o}=e.mapResult(t.from+s,this.side<0?-1:1);return o?null:new He(i-r,i-r,this)}valid(){return!0}eq(e){return this==e||e instanceof xs&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&Ir(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class jt{constructor(e,t){this.attrs=e,this.spec=t||hn}map(e,t,r,s){let i=e.map(t.from+s,this.spec.inclusiveStart?-1:1)-r,o=e.map(t.to+s,this.spec.inclusiveEnd?1:-1)-r;return i>=o?null:new He(i,o,this)}valid(e,t){return t.from<t.to}eq(e){return this==e||e instanceof jt&&Ir(this.attrs,e.attrs)&&Ir(this.spec,e.spec)}static is(e){return e.type instanceof jt}destroy(){}}class ua{constructor(e,t){this.attrs=e,this.spec=t||hn}map(e,t,r,s){let i=e.mapResult(t.from+s,1);if(i.deleted)return null;let o=e.mapResult(t.to+s,-1);return o.deleted||o.pos<=i.pos?null:new He(i.pos-r,o.pos-r,this)}valid(e,t){let{index:r,offset:s}=e.content.findIndex(t.from),i;return s==t.from&&!(i=e.child(r)).isText&&s+i.nodeSize==t.to}eq(e){return this==e||e instanceof ua&&Ir(this.attrs,e.attrs)&&Ir(this.spec,e.spec)}destroy(){}}class He{constructor(e,t,r){this.from=e,this.to=t,this.type=r}copy(e,t){return new He(e,t,this.type)}eq(e,t=0){return this.type.eq(e.type)&&this.from+t==e.from&&this.to+t==e.to}map(e,t,r){return this.type.map(e,this,t,r)}static widget(e,t,r){return new He(e,e,new xs(t,r))}static inline(e,t,r,s){return new He(e,t,new jt(r,s))}static node(e,t,r,s){return new He(e,t,new ua(r,s))}get spec(){return this.type.spec}get inline(){return this.type instanceof jt}get widget(){return this.type instanceof xs}}const Pn=[],hn={};class pe{constructor(e,t){this.local=e.length?e:Pn,this.children=t.length?t:Pn}static create(e,t){return t.length?Ms(t,e,0,hn):xe}find(e,t,r){let s=[];return this.findInner(e??0,t??1e9,s,0,r),s}findInner(e,t,r,s,i){for(let o=0;o<this.local.length;o++){let a=this.local[o];a.from<=t&&a.to>=e&&(!i||i(a.spec))&&r.push(a.copy(a.from+s,a.to+s))}for(let o=0;o<this.children.length;o+=3)if(this.children[o]<t&&this.children[o+1]>e){let a=this.children[o]+1;this.children[o+2].findInner(e-a,t-a,r,s+a,i)}}map(e,t,r){return this==xe||e.maps.length==0?this:this.mapInner(e,t,0,0,r||hn)}mapInner(e,t,r,s,i){let o;for(let a=0;a<this.local.length;a++){let l=this.local[a].map(e,r,s);l&&l.type.valid(t,l)?(o||(o=[])).push(l):i.onRemove&&i.onRemove(this.local[a].spec)}return this.children.length?R9(this.children,o||[],e,t,r,s,i):o?new pe(o.sort(pn),Pn):xe}add(e,t){return t.length?this==xe?pe.create(e,t):this.addInner(e,t,0):this}addInner(e,t,r){let s,i=0;e.forEach((a,l)=>{let c=l+r,u;if(u=gd(t,a,c)){for(s||(s=this.children.slice());i<s.length&&s[i]<l;)i+=3;s[i]==l?s[i+2]=s[i+2].addInner(a,u,c+1):s.splice(i,0,l,l+a.nodeSize,Ms(u,a,c+1,hn)),i+=3}});let o=md(i?yd(t):t,-r);for(let a=0;a<o.length;a++)o[a].type.valid(e,o[a])||o.splice(a--,1);return new pe(o.length?this.local.concat(o).sort(pn):this.local,s||this.children)}remove(e){return e.length==0||this==xe?this:this.removeInner(e,0)}removeInner(e,t){let r=this.children,s=this.local;for(let i=0;i<r.length;i+=3){let o,a=r[i]+t,l=r[i+1]+t;for(let u=0,f;u<e.length;u++)(f=e[u])&&f.from>a&&f.to<l&&(e[u]=null,(o||(o=[])).push(f));if(!o)continue;r==this.children&&(r=this.children.slice());let c=r[i+2].removeInner(o,a+1);c!=xe?r[i+2]=c:(r.splice(i,3),i-=3)}if(s.length){for(let i=0,o;i<e.length;i++)if(o=e[i])for(let a=0;a<s.length;a++)s[a].eq(o,t)&&(s==this.local&&(s=this.local.slice()),s.splice(a--,1))}return r==this.children&&s==this.local?this:s.length||r.length?new pe(s,r):xe}forChild(e,t){if(this==xe)return this;if(t.isLeaf)return pe.empty;let r,s;for(let a=0;a<this.children.length;a+=3)if(this.children[a]>=e){this.children[a]==e&&(r=this.children[a+2]);break}let i=e+1,o=i+t.content.size;for(let a=0;a<this.local.length;a++){let l=this.local[a];if(l.from<o&&l.to>i&&l.type instanceof jt){let c=Math.max(i,l.from)-i,u=Math.min(o,l.to)-i;c<u&&(s||(s=[])).push(l.copy(c,u))}}if(s){let a=new pe(s.sort(pn),Pn);return r?new Rt([a,r]):a}return r||xe}eq(e){if(this==e)return!0;if(!(e instanceof pe)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let t=0;t<this.local.length;t++)if(!this.local[t].eq(e.local[t]))return!1;for(let t=0;t<this.children.length;t+=3)if(this.children[t]!=e.children[t]||this.children[t+1]!=e.children[t+1]||!this.children[t+2].eq(e.children[t+2]))return!1;return!0}locals(e){return da(this.localsInner(e))}localsInner(e){if(this==xe)return Pn;if(e.inlineContent||!this.local.some(jt.is))return this.local;let t=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof jt||t.push(this.local[r]);return t}}pe.empty=new pe([],[]);pe.removeOverlap=da;const xe=pe.empty;class Rt{constructor(e){this.members=e}map(e,t){const r=this.members.map(s=>s.map(e,t,hn));return Rt.from(r)}forChild(e,t){if(t.isLeaf)return pe.empty;let r=[];for(let s=0;s<this.members.length;s++){let i=this.members[s].forChild(e,t);i!=xe&&(i instanceof Rt?r=r.concat(i.members):r.push(i))}return Rt.from(r)}eq(e){if(!(e instanceof Rt)||e.members.length!=this.members.length)return!1;for(let t=0;t<this.members.length;t++)if(!this.members[t].eq(e.members[t]))return!1;return!0}locals(e){let t,r=!0;for(let s=0;s<this.members.length;s++){let i=this.members[s].localsInner(e);if(i.length)if(!t)t=i;else{r&&(t=t.slice(),r=!1);for(let o=0;o<i.length;o++)t.push(i[o])}}return t?da(r?t:t.sort(pn)):Pn}static from(e){switch(e.length){case 0:return xe;case 1:return e[0];default:return new Rt(e.every(t=>t instanceof pe)?e:e.reduce((t,r)=>t.concat(r instanceof pe?r:r.members),[]))}}}function R9(n,e,t,r,s,i,o){let a=n.slice();for(let c=0,u=i;c<t.maps.length;c++){let f=0;t.maps[c].forEach((d,h,p,m)=>{let g=m-p-(h-d);for(let y=0;y<a.length;y+=3){let v=a[y+1];if(v<0||d>v+u-f)continue;let w=a[y]+u-f;h>=w?a[y+1]=d<=w?-2:-1:d>=u&&g&&(a[y]+=g,a[y+1]+=g)}f+=g}),u=t.maps[c].map(u,-1)}let l=!1;for(let c=0;c<a.length;c+=3)if(a[c+1]<0){if(a[c+1]==-2){l=!0,a[c+1]=-1;continue}let u=t.map(n[c]+i),f=u-s;if(f<0||f>=r.content.size){l=!0;continue}let d=t.map(n[c+1]+i,-1),h=d-s,{index:p,offset:m}=r.content.findIndex(f),g=r.maybeChild(p);if(g&&m==f&&m+g.nodeSize==h){let y=a[c+2].mapInner(t,g,u+1,n[c]+i+1,o);y!=xe?(a[c]=f,a[c+1]=h,a[c+2]=y):(a[c+1]=-2,l=!0)}else l=!0}if(l){let c=F9(a,n,e,t,s,i,o),u=Ms(c,r,0,o);e=u.local;for(let f=0;f<a.length;f+=3)a[f+1]<0&&(a.splice(f,3),f-=3);for(let f=0,d=0;f<u.children.length;f+=3){let h=u.children[f];for(;d<a.length&&a[d]<h;)d+=3;a.splice(d,0,u.children[f],u.children[f+1],u.children[f+2])}}return new pe(e.sort(pn),a)}function md(n,e){if(!e||!n.length)return n;let t=[];for(let r=0;r<n.length;r++){let s=n[r];t.push(new He(s.from+e,s.to+e,s.type))}return t}function F9(n,e,t,r,s,i,o){function a(l,c){for(let u=0;u<l.local.length;u++){let f=l.local[u].map(r,s,c);f?t.push(f):o.onRemove&&o.onRemove(l.local[u].spec)}for(let u=0;u<l.children.length;u+=3)a(l.children[u+2],l.children[u]+c+1)}for(let l=0;l<n.length;l+=3)n[l+1]==-1&&a(n[l+2],e[l]+i+1);return t}function gd(n,e,t){if(e.isLeaf)return null;let r=t+e.nodeSize,s=null;for(let i=0,o;i<n.length;i++)(o=n[i])&&o.from>t&&o.to<r&&((s||(s=[])).push(o),n[i]=null);return s}function yd(n){let e=[];for(let t=0;t<n.length;t++)n[t]!=null&&e.push(n[t]);return e}function Ms(n,e,t,r){let s=[],i=!1;e.forEach((a,l)=>{let c=gd(n,a,l+t);if(c){i=!0;let u=Ms(c,a,t+l+1,r);u!=xe&&s.push(l,l+a.nodeSize,u)}});let o=md(i?yd(n):n,-t).sort(pn);for(let a=0;a<o.length;a++)o[a].type.valid(e,o[a])||(r.onRemove&&r.onRemove(o[a].spec),o.splice(a--,1));return o.length||s.length?new pe(o,s):xe}function pn(n,e){return n.from-e.from||n.to-e.to}function da(n){let e=n;for(let t=0;t<e.length-1;t++){let r=e[t];if(r.from!=r.to)for(let s=t+1;s<e.length;s++){let i=e[s];if(i.from==r.from){i.to!=r.to&&(e==n&&(e=n.slice()),e[s]=i.copy(i.from,r.to),Gl(e,s+1,i.copy(r.to,i.to)));continue}else{i.from<r.to&&(e==n&&(e=n.slice()),e[t]=r.copy(r.from,i.from),Gl(e,s,r.copy(i.from,r.to)));break}}}return e}function Gl(n,e,t){for(;e<n.length&&pn(t,n[e])>0;)e++;n.splice(e,0,t)}function qi(n){let e=[];return n.someProp("decorations",t=>{let r=t(n.state);r&&r!=xe&&e.push(r)}),n.cursorWrapper&&e.push(pe.create(n.state.doc,[n.cursorWrapper.deco])),Rt.from(e)}const B9={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},$9=Be&&Vt<=11;class H9{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class V9{constructor(e,t){this.view=e,this.handleDOMChange=t,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new H9,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let s=0;s<r.length;s++)this.queue.push(r[s]);Be&&Vt<=11&&r.some(s=>s.type=="childList"&&s.removedNodes.length||s.type=="characterData"&&s.oldValue.length>s.target.nodeValue.length)?this.flushSoon():this.flush()}),$9&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,B9)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let t=0;t<e.length;t++)this.queue.push(e[t]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(Hl(this.view)){if(this.suppressingSelectionUpdates)return Tt(this.view);if(Be&&Vt<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&bn(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let t=new Set,r;for(let i=e.focusNode;i;i=Or(i))t.add(i);for(let i=e.anchorNode;i;i=Or(i))if(t.has(i)){r=i;break}let s=r&&this.view.docView.nearestDesc(r);if(s&&s.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let t=this.pendingRecords();t.length&&(this.queue=[]);let r=e.domSelectionRange(),s=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&Hl(e)&&!this.ignoreSelectionChange(r),i=-1,o=-1,a=!1,l=[];if(e.editable)for(let u=0;u<t.length;u++){let f=this.registerMutation(t[u],l);f&&(i=i<0?f.from:Math.min(f.from,i),o=o<0?f.to:Math.max(f.to,o),f.typeOver&&(a=!0))}if(rt&&l.length>1){let u=l.filter(f=>f.nodeName=="BR");if(u.length==2){let f=u[0],d=u[1];f.parentNode&&f.parentNode.parentNode==d.parentNode?d.remove():f.remove()}}let c=null;i<0&&s&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&hi(r)&&(c=ia(e))&&c.eq(Z.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,Tt(e),this.currentSelection.set(r),e.scrollToSelection()):(i>-1||s)&&(i>-1&&(e.docView.markDirty(i,o),z9(e)),this.handleDOMChange(i,o,a,l),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||Tt(e),this.currentSelection.set(r))}registerMutation(e,t){if(t.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let u=0;u<e.addedNodes.length;u++)t.push(e.addedNodes[u]);if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let s=e.previousSibling,i=e.nextSibling;if(Be&&Vt<=11&&e.addedNodes.length)for(let u=0;u<e.addedNodes.length;u++){let{previousSibling:f,nextSibling:d}=e.addedNodes[u];(!f||Array.prototype.indexOf.call(e.addedNodes,f)<0)&&(s=f),(!d||Array.prototype.indexOf.call(e.addedNodes,d)<0)&&(i=d)}let o=s&&s.parentNode==e.target?Ie(s)+1:0,a=r.localPosFromDOM(e.target,o,-1),l=i&&i.parentNode==e.target?Ie(i):e.target.childNodes.length,c=r.localPosFromDOM(e.target,l,1);return{from:a,to:c}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}}}let Jl=new WeakMap,Zl=!1;function z9(n){if(!Jl.has(n)&&(Jl.set(n,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(n.dom).whiteSpace)!==-1)){if(n.requiresGeckoHackNode=rt,Zl)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),Zl=!0}}function j9(n){let e;function t(l){l.preventDefault(),l.stopImmediatePropagation(),e=l.getTargetRanges()[0]}n.dom.addEventListener("beforeinput",t,!0),document.execCommand("indent"),n.dom.removeEventListener("beforeinput",t,!0);let r=e.startContainer,s=e.startOffset,i=e.endContainer,o=e.endOffset,a=n.domAtPos(n.state.selection.anchor);return bn(a.node,a.offset,i,o)&&([r,s,i,o]=[i,o,r,s]),{anchorNode:r,anchorOffset:s,focusNode:i,focusOffset:o}}function W9(n,e,t){let{node:r,fromOffset:s,toOffset:i,from:o,to:a}=n.docView.parseRange(e,t),l=n.domSelectionRange(),c,u=l.anchorNode;if(u&&n.dom.contains(u.nodeType==1?u:u.parentNode)&&(c=[{node:u,offset:l.anchorOffset}],hi(l)||c.push({node:l.focusNode,offset:l.focusOffset})),Me&&n.input.lastKeyCode===8)for(let g=i;g>s;g--){let y=r.childNodes[g-1],v=y.pmViewDesc;if(y.nodeName=="BR"&&!v){i=g;break}if(!v||v.size)break}let f=n.state.doc,d=n.someProp("domParser")||Kn.fromSchema(n.state.schema),h=f.resolve(o),p=null,m=d.parse(r,{topNode:h.parent,topMatch:h.parent.contentMatchAt(h.index()),topOpen:!0,from:s,to:i,preserveWhitespace:h.parent.type.whitespace=="pre"?"full":!0,findPositions:c,ruleFromNode:K9,context:h});if(c&&c[0].pos!=null){let g=c[0].pos,y=c[1]&&c[1].pos;y==null&&(y=g),p={anchor:g+o,head:y+o}}return{doc:m,sel:p,from:o,to:a}}function K9(n){let e=n.pmViewDesc;if(e)return e.parseRule();if(n.nodeName=="BR"&&n.parentNode){if(Pe&&/^(ul|ol)$/i.test(n.parentNode.nodeName)){let t=document.createElement("div");return t.appendChild(document.createElement("li")),{skip:t}}else if(n.parentNode.lastChild==n||Pe&&/^(tr|table)$/i.test(n.parentNode.nodeName))return{ignore:!0}}else if(n.nodeName=="IMG"&&n.getAttribute("mark-placeholder"))return{ignore:!0};return null}const U9=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function q9(n,e,t,r,s){let i=n.input.compositionPendingChanges||(n.composing?n.input.compositionID:0);if(n.input.compositionPendingChanges=0,e<0){let T=n.input.lastSelectionTime>Date.now()-50?n.input.lastSelectionOrigin:null,F=ia(n,T);if(F&&!n.state.selection.eq(F)){if(Me&&et&&n.input.lastKeyCode===13&&Date.now()-100<n.input.lastKeyCodeTime&&n.someProp("handleKeyDown",C=>C(n,sn(13,"Enter"))))return;let A=n.state.tr.setSelection(F);T=="pointer"?A.setMeta("pointer",!0):T=="key"&&A.scrollIntoView(),i&&A.setMeta("composition",i),n.dispatch(A)}return}let o=n.state.doc.resolve(e),a=o.sharedDepth(t);e=o.before(a+1),t=n.state.doc.resolve(t).after(a+1);let l=n.state.selection,c=W9(n,e,t),u=n.state.doc,f=u.slice(c.from,c.to),d,h;n.input.lastKeyCode===8&&Date.now()-100<n.input.lastKeyCodeTime?(d=n.state.selection.to,h="end"):(d=n.state.selection.from,h="start"),n.input.lastKeyCode=null;let p=Z9(f.content,c.doc.content,c.from,d,h);if((Gn&&n.input.lastIOSEnter>Date.now()-225||et)&&s.some(T=>T.nodeType==1&&!U9.test(T.nodeName))&&(!p||p.endA>=p.endB)&&n.someProp("handleKeyDown",T=>T(n,sn(13,"Enter")))){n.input.lastIOSEnter=0;return}if(!p)if(r&&l instanceof K&&!l.empty&&l.$head.sameParent(l.$anchor)&&!n.composing&&!(c.sel&&c.sel.anchor!=c.sel.head))p={start:l.from,endA:l.to,endB:l.to};else{if(c.sel){let T=Yl(n,n.state.doc,c.sel);if(T&&!T.eq(n.state.selection)){let F=n.state.tr.setSelection(T);i&&F.setMeta("composition",i),n.dispatch(F)}}return}if(Me&&n.cursorWrapper&&c.sel&&c.sel.anchor==n.cursorWrapper.deco.from&&c.sel.head==c.sel.anchor){let T=p.endB-p.start;c.sel={anchor:c.sel.anchor+T,head:c.sel.anchor+T}}n.input.domChangeCount++,n.state.selection.from<n.state.selection.to&&p.start==p.endB&&n.state.selection instanceof K&&(p.start>n.state.selection.from&&p.start<=n.state.selection.from+2&&n.state.selection.from>=c.from?p.start=n.state.selection.from:p.endA<n.state.selection.to&&p.endA>=n.state.selection.to-2&&n.state.selection.to<=c.to&&(p.endB+=n.state.selection.to-p.endA,p.endA=n.state.selection.to)),Be&&Vt<=11&&p.endB==p.start+1&&p.endA==p.start&&p.start>c.from&&c.doc.textBetween(p.start-c.from-1,p.start-c.from+1)=="  "&&(p.start--,p.endA--,p.endB--);let m=c.doc.resolveNoCache(p.start-c.from),g=c.doc.resolveNoCache(p.endB-c.from),y=u.resolve(p.start),v=m.sameParent(g)&&m.parent.inlineContent&&y.end()>=p.endA,w;if((Gn&&n.input.lastIOSEnter>Date.now()-225&&(!v||s.some(T=>T.nodeName=="DIV"||T.nodeName=="P"))||!v&&m.pos<c.doc.content.size&&!m.sameParent(g)&&(w=Z.findFrom(c.doc.resolve(m.pos+1),1,!0))&&w.head==g.pos)&&n.someProp("handleKeyDown",T=>T(n,sn(13,"Enter")))){n.input.lastIOSEnter=0;return}if(n.state.selection.anchor>p.start&&J9(u,p.start,p.endA,m,g)&&n.someProp("handleKeyDown",T=>T(n,sn(8,"Backspace")))){et&&Me&&n.domObserver.suppressSelectionUpdates();return}Me&&et&&p.endB==p.start&&(n.input.lastAndroidDelete=Date.now()),et&&!v&&m.start()!=g.start()&&g.parentOffset==0&&m.depth==g.depth&&c.sel&&c.sel.anchor==c.sel.head&&c.sel.head==p.endA&&(p.endB-=2,g=c.doc.resolveNoCache(p.endB-c.from),setTimeout(()=>{n.someProp("handleKeyDown",function(T){return T(n,sn(13,"Enter"))})},20));let $=p.start,B=p.endA,x,j,se;if(v){if(m.pos==g.pos)Be&&Vt<=11&&m.parentOffset==0&&(n.domObserver.suppressSelectionUpdates(),setTimeout(()=>Tt(n),20)),x=n.state.tr.delete($,B),j=u.resolve(p.start).marksAcross(u.resolve(p.endA));else if(p.endA==p.endB&&(se=G9(m.parent.content.cut(m.parentOffset,g.parentOffset),y.parent.content.cut(y.parentOffset,p.endA-y.start()))))x=n.state.tr,se.type=="add"?x.addMark($,B,se.mark):x.removeMark($,B,se.mark);else if(m.parent.child(m.index()).isText&&m.index()==g.index()-(g.textOffset?0:1)){let T=m.parent.textBetween(m.parentOffset,g.parentOffset);if(n.someProp("handleTextInput",F=>F(n,$,B,T)))return;x=n.state.tr.insertText(T,$,B)}}if(x||(x=n.state.tr.replace($,B,c.doc.slice(p.start-c.from,p.endB-c.from))),c.sel){let T=Yl(n,x.doc,c.sel);T&&!(Me&&et&&n.composing&&T.empty&&(p.start!=p.endB||n.input.lastAndroidDelete<Date.now()-100)&&(T.head==$||T.head==x.mapping.map(B)-1)||Be&&T.empty&&T.head==$)&&x.setSelection(T)}j&&x.ensureMarks(j),i&&x.setMeta("composition",i),n.dispatch(x.scrollIntoView())}function Yl(n,e,t){return Math.max(t.anchor,t.head)>e.content.size?null:oa(n,e.resolve(t.anchor),e.resolve(t.head))}function G9(n,e){let t=n.firstChild.marks,r=e.firstChild.marks,s=t,i=r,o,a,l;for(let u=0;u<r.length;u++)s=r[u].removeFromSet(s);for(let u=0;u<t.length;u++)i=t[u].removeFromSet(i);if(s.length==1&&i.length==0)a=s[0],o="add",l=u=>u.mark(a.addToSet(u.marks));else if(s.length==0&&i.length==1)a=i[0],o="remove",l=u=>u.mark(a.removeFromSet(u.marks));else return null;let c=[];for(let u=0;u<e.childCount;u++)c.push(l(e.child(u)));if(S.from(c).eq(n))return{mark:a,type:o}}function J9(n,e,t,r,s){if(!r.parent.isTextblock||t-e<=s.pos-r.pos||Gi(r,!0,!1)<s.pos)return!1;let i=n.resolve(e);if(i.parentOffset<i.parent.content.size||!i.parent.isTextblock)return!1;let o=n.resolve(Gi(i,!0,!0));return!o.parent.isTextblock||o.pos>t||Gi(o,!0,!1)<t?!1:r.parent.content.cut(r.parentOffset).eq(o.parent.content)}function Gi(n,e,t){let r=n.depth,s=e?n.end():n.pos;for(;r>0&&(e||n.indexAfter(r)==n.node(r).childCount);)r--,s++,e=!1;if(t){let i=n.node(r).maybeChild(n.indexAfter(r));for(;i&&!i.isLeaf;)i=i.firstChild,s++}return s}function Z9(n,e,t,r,s){let i=n.findDiffStart(e,t);if(i==null)return null;let{a:o,b:a}=n.findDiffEnd(e,t+n.size,t+e.size);if(s=="end"){let l=Math.max(0,i-Math.min(o,a));r-=o+l-i}if(o<i&&n.size<e.size){let l=r<=i&&r>=o?i-r:0;i-=l,i&&i<e.size&&Xl(e.textBetween(i-1,i+1))&&(i+=l?1:-1),a=i+(a-o),o=i}else if(a<i){let l=r<=i&&r>=a?i-r:0;i-=l,i&&i<n.size&&Xl(n.textBetween(i-1,i+1))&&(i+=l?1:-1),o=i+(o-a),a=i}return{start:i,endA:o,endB:a}}function Xl(n){if(n.length!=2)return!1;let e=n.charCodeAt(0),t=n.charCodeAt(1);return e>=56320&&e<=57343&&t>=55296&&t<=56319}class Y9{constructor(e,t){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new b9,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=t,this.state=t.state,this.directPlugins=t.plugins||[],this.directPlugins.forEach(rc),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=tc(this),ec(this),this.nodeViews=nc(this),this.docView=Ll(this.state.doc,Ql(this),qi(this),this.dom,this),this.domObserver=new V9(this,(r,s,i,o)=>q9(this,r,s,i,o)),this.domObserver.start(),v9(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let t in e)this._props[t]=e[t];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&Ao(this);let t=this._props;this._props=e,e.plugins&&(e.plugins.forEach(rc),this.directPlugins=e.plugins),this.updateStateInner(e.state,t)}setProps(e){let t={};for(let r in this._props)t[r]=this._props[r];t.state=this.state;for(let r in e)t[r]=e[r];this.update(t)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,t){var r;let s=this.state,i=!1,o=!1;e.storedMarks&&this.composing&&(dd(this),o=!0),this.state=e;let a=s.plugins!=e.plugins||this._props.plugins!=t.plugins;if(a||this._props.plugins!=t.plugins||this._props.nodeViews!=t.nodeViews){let h=nc(this);Q9(h,this.nodeViews)&&(this.nodeViews=h,i=!0)}(a||t.handleDOMEvents!=this._props.handleDOMEvents)&&Ao(this),this.editable=tc(this),ec(this);let l=qi(this),c=Ql(this),u=s.plugins!=e.plugins&&!s.doc.eq(e.doc)?"reset":e.scrollToSelection>s.scrollToSelection?"to selection":"preserve",f=i||!this.docView.matchesNode(e.doc,c,l);(f||!e.selection.eq(s.selection))&&(o=!0);let d=u=="preserve"&&o&&this.dom.style.overflowAnchor==null&&Dg(this);if(o){this.domObserver.stop();let h=f&&(Be||Me)&&!this.composing&&!s.selection.empty&&!e.selection.empty&&X9(s.selection,e.selection);if(f){let p=Me?this.trackWrites=this.domSelectionRange().focusNode:null;(i||!this.docView.update(e.doc,c,l,this))&&(this.docView.updateOuterDeco([]),this.docView.destroy(),this.docView=Ll(e.doc,c,l,this.dom,this)),p&&!this.trackWrites&&(h=!0)}h||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&s9(this))?Tt(this,h):(Xu(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(s),!((r=this.dragging)===null||r===void 0)&&r.node&&!s.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,s),u=="reset"?this.dom.scrollTop=0:u=="to selection"?this.scrollToSelection():d&&Lg(d)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!this.someProp("handleScrollToSelection",t=>t(this)))if(this.state.selection instanceof z){let t=this.docView.domAfterPos(this.state.selection.from);t.nodeType==1&&Ol(this,t.getBoundingClientRect(),e)}else Ol(this,this.coordsAtPos(this.state.selection.head,1),e)}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let t=0;t<this.directPlugins.length;t++){let r=this.directPlugins[t];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let t=0;t<this.state.plugins.length;t++){let r=this.state.plugins[t];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let t=0;t<this.pluginViews.length;t++){let r=this.pluginViews[t];r.update&&r.update(this,e)}}updateDraggedNode(e,t){let r=e.node,s=-1;if(this.state.doc.nodeAt(r.from)==r.node)s=r.from;else{let i=r.from+(this.state.doc.content.size-t.doc.content.size);(i>0&&this.state.doc.nodeAt(i))==r.node&&(s=i)}this.dragging=new hd(e.slice,e.move,s<0?void 0:z.create(this.state.doc,s))}someProp(e,t){let r=this._props&&this._props[e],s;if(r!=null&&(s=t?t(r):r))return s;for(let o=0;o<this.directPlugins.length;o++){let a=this.directPlugins[o].props[e];if(a!=null&&(s=t?t(a):a))return s}let i=this.state.plugins;if(i)for(let o=0;o<i.length;o++){let a=i[o].props[e];if(a!=null&&(s=t?t(a):a))return s}}hasFocus(){if(Be){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&_g(this.dom),Tt(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let t=this.dom.parentNode;t;t=t.parentNode)if(t.nodeType==9||t.nodeType==11&&t.host)return t.getSelection||(Object.getPrototypeOf(t).getSelection=()=>t.ownerDocument.getSelection()),this._root=t}return e||document}updateRoot(){this._root=null}posAtCoords(e){return Hg(this,e)}coordsAtPos(e,t=1){return Wu(this,e,t)}domAtPos(e,t=0){return this.docView.domFromPos(e,t)}nodeDOM(e){let t=this.docView.descAt(e);return t?t.nodeDOM:null}posAtDOM(e,t,r=-1){let s=this.docView.posFromDOM(e,t,r);if(s==null)throw new RangeError("DOM position not inside the editor");return s}endOfTextblock(e,t){return Kg(this,t||this.state,e)}pasteHTML(e,t){return Nr(this,"",e,!1,t||new ClipboardEvent("paste"))}pasteText(e,t){return Nr(this,e,null,!0,t||new ClipboardEvent("paste"))}destroy(){this.docView&&(C9(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],qi(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null)}get isDestroyed(){return this.docView==null}dispatchEvent(e){return w9(this,e)}dispatch(e){let t=this._props.dispatchTransaction;t?t.call(this,e):this.updateState(this.state.apply(e))}domSelectionRange(){return Pe&&this.root.nodeType===11&&Mg(this.dom.ownerDocument)==this.dom?j9(this):this.domSelection()}domSelection(){return this.root.getSelection()}}function Ql(n){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(n.editable),n.someProp("attributes",t=>{if(typeof t=="function"&&(t=t(n.state)),t)for(let r in t)r=="class"?e.class+=" "+t[r]:r=="style"?e.style=(e.style?e.style+";":"")+t[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(t[r]))}),e.translate||(e.translate="no"),[He.node(0,n.state.doc.content.size,e)]}function ec(n){if(n.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),n.cursorWrapper={dom:e,deco:He.widget(n.state.selection.head,e,{raw:!0,marks:n.markCursor})}}else n.cursorWrapper=null}function tc(n){return!n.someProp("editable",e=>e(n.state)===!1)}function X9(n,e){let t=Math.min(n.$anchor.sharedDepth(n.head),e.$anchor.sharedDepth(e.head));return n.$anchor.start(t)!=e.$anchor.start(t)}function nc(n){let e=Object.create(null);function t(r){for(let s in r)Object.prototype.hasOwnProperty.call(e,s)||(e[s]=r[s])}return n.someProp("nodeViews",t),n.someProp("markViews",t),e}function Q9(n,e){let t=0,r=0;for(let s in n){if(n[s]!=e[s])return!0;t++}for(let s in e)r++;return t!=r}function rc(n){if(n.spec.state||n.spec.filterTransaction||n.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var Kt={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Ts={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},e4=typeof navigator<"u"&&/Mac/.test(navigator.platform),t4=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Se=0;Se<10;Se++)Kt[48+Se]=Kt[96+Se]=String(Se);for(var Se=1;Se<=24;Se++)Kt[Se+111]="F"+Se;for(var Se=65;Se<=90;Se++)Kt[Se]=String.fromCharCode(Se+32),Ts[Se]=String.fromCharCode(Se);for(var Ji in Kt)Ts.hasOwnProperty(Ji)||(Ts[Ji]=Kt[Ji]);function n4(n){var e=e4&&n.metaKey&&n.shiftKey&&!n.ctrlKey&&!n.altKey||t4&&n.shiftKey&&n.key&&n.key.length==1||n.key=="Unidentified",t=!e&&n.key||(n.shiftKey?Ts:Kt)[n.keyCode]||n.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}const r4=typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):!1;function s4(n){let e=n.split(/-(?!$)/),t=e[e.length-1];t=="Space"&&(t=" ");let r,s,i,o;for(let a=0;a<e.length-1;a++){let l=e[a];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))s=!0;else if(/^s(hift)?$/i.test(l))i=!0;else if(/^mod$/i.test(l))r4?o=!0:s=!0;else throw new Error("Unrecognized modifier name: "+l)}return r&&(t="Alt-"+t),s&&(t="Ctrl-"+t),o&&(t="Meta-"+t),i&&(t="Shift-"+t),t}function i4(n){let e=Object.create(null);for(let t in n)e[s4(t)]=n[t];return e}function Zi(n,e,t=!0){return e.altKey&&(n="Alt-"+n),e.ctrlKey&&(n="Ctrl-"+n),e.metaKey&&(n="Meta-"+n),t&&e.shiftKey&&(n="Shift-"+n),n}function o4(n){return new Ae({props:{handleKeyDown:bd(n)}})}function bd(n){let e=i4(n);return function(t,r){let s=n4(r),i,o=e[Zi(s,r)];if(o&&o(t.state,t.dispatch,t))return!0;if(s.length==1&&s!=" "){if(r.shiftKey){let a=e[Zi(s,r,!1)];if(a&&a(t.state,t.dispatch,t))return!0}if((r.shiftKey||r.altKey||r.metaKey||s.charCodeAt(0)>127)&&(i=Kt[r.keyCode])&&i!=s){let a=e[Zi(i,r)];if(a&&a(t.state,t.dispatch,t))return!0}}return!1}}const a4=(n,e)=>n.selection.empty?!1:(e&&e(n.tr.deleteSelection().scrollIntoView()),!0);function l4(n,e){let{$cursor:t}=n.selection;return!t||(e?!e.endOfTextblock("backward",n):t.parentOffset>0)?null:t}const c4=(n,e,t)=>{let r=l4(n,t);if(!r)return!1;let s=vd(r);if(!s){let o=r.blockRange(),a=o&&Xn(o);return a==null?!1:(e&&e(n.tr.lift(o,a).scrollIntoView()),!0)}let i=s.nodeBefore;if(!i.type.spec.isolating&&wd(n,s,e))return!0;if(r.parent.content.size==0&&(Jn(i,"end")||z.isSelectable(i))){let o=ta(n.doc,r.before(),r.after(),I.empty);if(o&&o.slice.size<o.to-o.from){if(e){let a=n.tr.step(o);a.setSelection(Jn(i,"end")?Z.findFrom(a.doc.resolve(a.mapping.map(s.pos,-1)),-1):z.create(a.doc,s.pos-i.nodeSize)),e(a.scrollIntoView())}return!0}}return i.isAtom&&s.depth==r.depth-1?(e&&e(n.tr.delete(s.pos-i.nodeSize,s.pos).scrollIntoView()),!0):!1};function Jn(n,e,t=!1){for(let r=n;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(t&&r.childCount!=1)return!1}return!1}const u4=(n,e,t)=>{let{$head:r,empty:s}=n.selection,i=r;if(!s)return!1;if(r.parent.isTextblock){if(t?!t.endOfTextblock("backward",n):r.parentOffset>0)return!1;i=vd(r)}let o=i&&i.nodeBefore;return!o||!z.isSelectable(o)?!1:(e&&e(n.tr.setSelection(z.create(n.doc,i.pos-o.nodeSize)).scrollIntoView()),!0)};function vd(n){if(!n.parent.type.spec.isolating)for(let e=n.depth-1;e>=0;e--){if(n.index(e)>0)return n.doc.resolve(n.before(e+1));if(n.node(e).type.spec.isolating)break}return null}function d4(n,e){let{$cursor:t}=n.selection;return!t||(e?!e.endOfTextblock("forward",n):t.parentOffset<t.parent.content.size)?null:t}const f4=(n,e,t)=>{let r=d4(n,t);if(!r)return!1;let s=Cd(r);if(!s)return!1;let i=s.nodeAfter;if(wd(n,s,e))return!0;if(r.parent.content.size==0&&(Jn(i,"start")||z.isSelectable(i))){let o=ta(n.doc,r.before(),r.after(),I.empty);if(o&&o.slice.size<o.to-o.from){if(e){let a=n.tr.step(o);a.setSelection(Jn(i,"start")?Z.findFrom(a.doc.resolve(a.mapping.map(s.pos)),1):z.create(a.doc,a.mapping.map(s.pos))),e(a.scrollIntoView())}return!0}}return i.isAtom&&s.depth==r.depth-1?(e&&e(n.tr.delete(s.pos,s.pos+i.nodeSize).scrollIntoView()),!0):!1},h4=(n,e,t)=>{let{$head:r,empty:s}=n.selection,i=r;if(!s)return!1;if(r.parent.isTextblock){if(t?!t.endOfTextblock("forward",n):r.parentOffset<r.parent.content.size)return!1;i=Cd(r)}let o=i&&i.nodeAfter;return!o||!z.isSelectable(o)?!1:(e&&e(n.tr.setSelection(z.create(n.doc,i.pos)).scrollIntoView()),!0)};function Cd(n){if(!n.parent.type.spec.isolating)for(let e=n.depth-1;e>=0;e--){let t=n.node(e);if(n.index(e)+1<t.childCount)return n.doc.resolve(n.after(e+1));if(t.type.spec.isolating)break}return null}const p4=(n,e)=>{let t=n.selection,r=t instanceof z,s;if(r){if(t.node.isTextblock||!qt(n.doc,t.from))return!1;s=t.from}else if(s=di(n.doc,t.from,-1),s==null)return!1;if(e){let i=n.tr.join(s);r&&i.setSelection(z.create(i.doc,s-n.doc.resolve(s).nodeBefore.nodeSize)),e(i.scrollIntoView())}return!0},m4=(n,e)=>{let t=n.selection,r;if(t instanceof z){if(t.node.isTextblock||!qt(n.doc,t.to))return!1;r=t.to}else if(r=di(n.doc,t.to,1),r==null)return!1;return e&&e(n.tr.join(r).scrollIntoView()),!0},g4=(n,e)=>{let{$from:t,$to:r}=n.selection,s=t.blockRange(r),i=s&&Xn(s);return i==null?!1:(e&&e(n.tr.lift(s,i).scrollIntoView()),!0)},y4=(n,e)=>{let{$head:t,$anchor:r}=n.selection;return!t.parent.type.spec.code||!t.sameParent(r)?!1:(e&&e(n.tr.insertText(`
`).scrollIntoView()),!0)};function kd(n){for(let e=0;e<n.edgeCount;e++){let{type:t}=n.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}const b4=(n,e)=>{let{$head:t,$anchor:r}=n.selection;if(!t.parent.type.spec.code||!t.sameParent(r))return!1;let s=t.node(-1),i=t.indexAfter(-1),o=kd(s.contentMatchAt(i));if(!o||!s.canReplaceWith(i,i,o))return!1;if(e){let a=t.after(),l=n.tr.replaceWith(a,a,o.createAndFill());l.setSelection(Z.near(l.doc.resolve(a),1)),e(l.scrollIntoView())}return!0},v4=(n,e)=>{let t=n.selection,{$from:r,$to:s}=t;if(t instanceof nt||r.parent.inlineContent||s.parent.inlineContent)return!1;let i=kd(s.parent.contentMatchAt(s.indexAfter()));if(!i||!i.isTextblock)return!1;if(e){let o=(!r.parentOffset&&s.index()<s.parent.childCount?r:s).pos,a=n.tr.insert(o,i.createAndFill());a.setSelection(K.create(a.doc,o+1)),e(a.scrollIntoView())}return!0},C4=(n,e)=>{let{$cursor:t}=n.selection;if(!t||t.parent.content.size)return!1;if(t.depth>1&&t.after()!=t.end(-1)){let i=t.before();if(Vn(n.doc,i))return e&&e(n.tr.split(i).scrollIntoView()),!0}let r=t.blockRange(),s=r&&Xn(r);return s==null?!1:(e&&e(n.tr.lift(r,s).scrollIntoView()),!0)},k4=(n,e)=>{let{$from:t,to:r}=n.selection,s,i=t.sharedDepth(r);return i==0?!1:(s=t.before(i),e&&e(n.tr.setSelection(z.create(n.doc,s))),!0)};function w4(n,e,t){let r=e.nodeBefore,s=e.nodeAfter,i=e.index();return!r||!s||!r.type.compatibleContent(s.type)?!1:!r.content.size&&e.parent.canReplace(i-1,i)?(t&&t(n.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(i,i+1)||!(s.isTextblock||qt(n.doc,e.pos))?!1:(t&&t(n.tr.clearIncompatible(e.pos,r.type,r.contentMatchAt(r.childCount)).join(e.pos).scrollIntoView()),!0)}function wd(n,e,t){let r=e.nodeBefore,s=e.nodeAfter,i,o;if(r.type.spec.isolating||s.type.spec.isolating)return!1;if(w4(n,e,t))return!0;let a=e.parent.canReplace(e.index(),e.index()+1);if(a&&(i=(o=r.contentMatchAt(r.childCount)).findWrapping(s.type))&&o.matchType(i[0]||s.type).validEnd){if(t){let f=e.pos+s.nodeSize,d=S.empty;for(let m=i.length-1;m>=0;m--)d=S.from(i[m].create(null,d));d=S.from(r.copy(d));let h=n.tr.step(new ye(e.pos-1,f,e.pos,f,new I(d,1,0),i.length,!0)),p=f+2*i.length;qt(h.doc,p)&&h.join(p),t(h.scrollIntoView())}return!0}let l=Z.findFrom(e,1),c=l&&l.$from.blockRange(l.$to),u=c&&Xn(c);if(u!=null&&u>=e.depth)return t&&t(n.tr.lift(c,u).scrollIntoView()),!0;if(a&&Jn(s,"start",!0)&&Jn(r,"end")){let f=r,d=[];for(;d.push(f),!f.isTextblock;)f=f.lastChild;let h=s,p=1;for(;!h.isTextblock;h=h.firstChild)p++;if(f.canReplace(f.childCount,f.childCount,h.content)){if(t){let m=S.empty;for(let y=d.length-1;y>=0;y--)m=S.from(d[y].copy(m));let g=n.tr.step(new ye(e.pos-d.length,e.pos+s.nodeSize,e.pos+p,e.pos+s.nodeSize-p,new I(m,d.length,0),0,!0));t(g.scrollIntoView())}return!0}}return!1}function Sd(n){return function(e,t){let r=e.selection,s=n<0?r.$from:r.$to,i=s.depth;for(;s.node(i).isInline;){if(!i)return!1;i--}return s.node(i).isTextblock?(t&&t(e.tr.setSelection(K.create(e.doc,n<0?s.start(i):s.end(i)))),!0):!1}}const S4=Sd(-1),E4=Sd(1);function x4(n,e=null){return function(t,r){let{$from:s,$to:i}=t.selection,o=s.blockRange(i),a=o&&ea(o,n,e);return a?(r&&r(t.tr.wrap(o,a).scrollIntoView()),!0):!1}}function sc(n,e=null){return function(t,r){let s=!1;for(let i=0;i<t.selection.ranges.length&&!s;i++){let{$from:{pos:o},$to:{pos:a}}=t.selection.ranges[i];t.doc.nodesBetween(o,a,(l,c)=>{if(s)return!1;if(!(!l.isTextblock||l.hasMarkup(n,e)))if(l.type==n)s=!0;else{let u=t.doc.resolve(c),f=u.index();s=u.parent.canReplaceWith(f,f+1,n)}})}if(!s)return!1;if(r){let i=t.tr;for(let o=0;o<t.selection.ranges.length;o++){let{$from:{pos:a},$to:{pos:l}}=t.selection.ranges[o];i.setBlockType(a,l,n,e)}r(i.scrollIntoView())}return!0}}typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function M4(n,e=null){return function(t,r){let{$from:s,$to:i}=t.selection,o=s.blockRange(i),a=!1,l=o;if(!o)return!1;if(o.depth>=2&&s.node(o.depth-1).type.compatibleContent(n)&&o.startIndex==0){if(s.index(o.depth-1)==0)return!1;let u=t.doc.resolve(o.start-2);l=new vs(u,u,o.depth),o.endIndex<o.parent.childCount&&(o=new vs(s,t.doc.resolve(i.end(o.depth)),o.depth)),a=!0}let c=ea(l,n,e,o);return c?(r&&r(T4(t.tr,o,c,a,n).scrollIntoView()),!0):!1}}function T4(n,e,t,r,s){let i=S.empty;for(let u=t.length-1;u>=0;u--)i=S.from(t[u].type.create(t[u].attrs,i));n.step(new ye(e.start-(r?2:0),e.end,e.start,e.end,new I(i,0,0),t.length,!0));let o=0;for(let u=0;u<t.length;u++)t[u].type==s&&(o=u+1);let a=t.length-o,l=e.start+t.length-(r?2:0),c=e.parent;for(let u=e.startIndex,f=e.endIndex,d=!0;u<f;u++,d=!1)!d&&Vn(n.doc,l,a)&&(n.split(l,a),l+=2*a),l+=c.child(u).nodeSize;return n}function O4(n){return function(e,t){let{$from:r,$to:s}=e.selection,i=r.blockRange(s,o=>o.childCount>0&&o.firstChild.type==n);return i?t?r.node(i.depth-1).type==n?A4(e,t,n,i):N4(e,t,i):!0:!1}}function A4(n,e,t,r){let s=n.tr,i=r.end,o=r.$to.end(r.depth);i<o&&(s.step(new ye(i-1,o,i,o,new I(S.from(t.create(null,r.parent.copy())),1,0),1,!0)),r=new vs(s.doc.resolve(r.$from.pos),s.doc.resolve(o),r.depth));const a=Xn(r);if(a==null)return!1;s.lift(r,a);let l=s.mapping.map(i,-1)-1;return qt(s.doc,l)&&s.join(l),e(s.scrollIntoView()),!0}function N4(n,e,t){let r=n.tr,s=t.parent;for(let h=t.end,p=t.endIndex-1,m=t.startIndex;p>m;p--)h-=s.child(p).nodeSize,r.delete(h-1,h+1);let i=r.doc.resolve(t.start),o=i.nodeAfter;if(r.mapping.map(t.end)!=t.start+i.nodeAfter.nodeSize)return!1;let a=t.startIndex==0,l=t.endIndex==s.childCount,c=i.node(-1),u=i.index(-1);if(!c.canReplace(u+(a?0:1),u+1,o.content.append(l?S.empty:S.from(s))))return!1;let f=i.pos,d=f+o.nodeSize;return r.step(new ye(f-(a?1:0),d+(l?1:0),f+1,d-1,new I((a?S.empty:S.from(s.copy(S.empty))).append(l?S.empty:S.from(s.copy(S.empty))),a?0:1,l?0:1),a?0:1)),e(r.scrollIntoView()),!0}function I4(n){return function(e,t){let{$from:r,$to:s}=e.selection,i=r.blockRange(s,c=>c.childCount>0&&c.firstChild.type==n);if(!i)return!1;let o=i.startIndex;if(o==0)return!1;let a=i.parent,l=a.child(o-1);if(l.type!=n)return!1;if(t){let c=l.lastChild&&l.lastChild.type==a.type,u=S.from(c?n.create():null),f=new I(S.from(n.create(null,S.from(a.type.create(null,u)))),c?3:1,0),d=i.start,h=i.end;t(e.tr.step(new ye(d-(c?3:1),h,d,h,f,1,!0)).scrollIntoView())}return!0}}function gi(n){const{state:e,transaction:t}=n;let{selection:r}=t,{doc:s}=t,{storedMarks:i}=t;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),filterTransaction:e.filterTransaction,plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return i},get selection(){return r},get doc(){return s},get tr(){return r=t.selection,s=t.doc,i=t.storedMarks,t}}}class yi{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:t,state:r}=this,{view:s}=t,{tr:i}=r,o=this.buildProps(i);return Object.fromEntries(Object.entries(e).map(([a,l])=>[a,(...u)=>{const f=l(...u)(o);return!i.getMeta("preventDispatch")&&!this.hasCustomState&&s.dispatch(i),f}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,t=!0){const{rawCommands:r,editor:s,state:i}=this,{view:o}=s,a=[],l=!!e,c=e||i.tr,u=()=>(!l&&t&&!c.getMeta("preventDispatch")&&!this.hasCustomState&&o.dispatch(c),a.every(d=>d===!0)),f={...Object.fromEntries(Object.entries(r).map(([d,h])=>[d,(...m)=>{const g=this.buildProps(c,t),y=h(...m)(g);return a.push(y),f}])),run:u};return f}createCan(e){const{rawCommands:t,state:r}=this,s=!1,i=e||r.tr,o=this.buildProps(i,s);return{...Object.fromEntries(Object.entries(t).map(([l,c])=>[l,(...u)=>c(...u)({...o,dispatch:void 0})])),chain:()=>this.createChain(i,s)}}buildProps(e,t=!0){const{rawCommands:r,editor:s,state:i}=this,{view:o}=s,a={tr:e,editor:s,view:o,state:gi({state:i,transaction:e}),dispatch:t?()=>{}:void 0,chain:()=>this.createChain(e,t),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(r).map(([l,c])=>[l,(...u)=>c(...u)(a)]))}};return a}}class P4{constructor(){this.callbacks={}}on(e,t){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(t),this}emit(e,...t){const r=this.callbacks[e];return r&&r.forEach(s=>s.apply(this,t)),this}off(e,t){const r=this.callbacks[e];return r&&(t?this.callbacks[e]=r.filter(s=>s!==t):delete this.callbacks[e]),this}removeAllListeners(){this.callbacks={}}}function _(n,e,t){return n.config[e]===void 0&&n.parent?_(n.parent,e,t):typeof n.config[e]=="function"?n.config[e].bind({...t,parent:n.parent?_(n.parent,e,t):null}):n.config[e]}function bi(n){const e=n.filter(s=>s.type==="extension"),t=n.filter(s=>s.type==="node"),r=n.filter(s=>s.type==="mark");return{baseExtensions:e,nodeExtensions:t,markExtensions:r}}function Ed(n){const e=[],{nodeExtensions:t,markExtensions:r}=bi(n),s=[...t,...r],i={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return n.forEach(o=>{const a={name:o.name,options:o.options,storage:o.storage},l=_(o,"addGlobalAttributes",a);if(!l)return;l().forEach(u=>{u.types.forEach(f=>{Object.entries(u.attributes).forEach(([d,h])=>{e.push({type:f,name:d,attribute:{...i,...h}})})})})}),s.forEach(o=>{const a={name:o.name,options:o.options,storage:o.storage},l=_(o,"addAttributes",a);if(!l)return;const c=l();Object.entries(c).forEach(([u,f])=>{const d={...i,...f};typeof(d==null?void 0:d.default)=="function"&&(d.default=d.default()),d!=null&&d.isRequired&&(d==null?void 0:d.default)===void 0&&delete d.default,e.push({type:o.name,name:u,attribute:d})})}),e}function ve(n,e){if(typeof n=="string"){if(!e.nodes[n])throw Error(`There is no node type named '${n}'. Maybe you forgot to add the extension?`);return e.nodes[n]}return n}function he(...n){return n.filter(e=>!!e).reduce((e,t)=>{const r={...e};return Object.entries(t).forEach(([s,i])=>{if(!r[s]){r[s]=i;return}if(s==="class"){const a=i?i.split(" "):[],l=r[s]?r[s].split(" "):[],c=a.filter(u=>!l.includes(u));r[s]=[...l,...c].join(" ")}else s==="style"?r[s]=[r[s],i].join("; "):r[s]=i}),r},{})}function No(n,e){return e.filter(t=>t.attribute.rendered).map(t=>t.attribute.renderHTML?t.attribute.renderHTML(n.attrs)||{}:{[t.name]:n.attrs[t.name]}).reduce((t,r)=>he(t,r),{})}function xd(n){return typeof n=="function"}function J(n,e=void 0,...t){return xd(n)?e?n.bind(e)(...t):n(...t):n}function D4(n={}){return Object.keys(n).length===0&&n.constructor===Object}function L4(n){return typeof n!="string"?n:n.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(n):n==="true"?!0:n==="false"?!1:n}function ic(n,e){return n.style?n:{...n,getAttrs:t=>{const r=n.getAttrs?n.getAttrs(t):n.attrs;if(r===!1)return!1;const s=e.reduce((i,o)=>{const a=o.attribute.parseHTML?o.attribute.parseHTML(t):L4(t.getAttribute(o.name));return a==null?i:{...i,[o.name]:a}},{});return{...r,...s}}}}function oc(n){return Object.fromEntries(Object.entries(n).filter(([e,t])=>e==="attrs"&&D4(t)?!1:t!=null))}function _4(n,e){var t;const r=Ed(n),{nodeExtensions:s,markExtensions:i}=bi(n),o=(t=s.find(c=>_(c,"topNode")))===null||t===void 0?void 0:t.name,a=Object.fromEntries(s.map(c=>{const u=r.filter(y=>y.type===c.name),f={name:c.name,options:c.options,storage:c.storage,editor:e},d=n.reduce((y,v)=>{const w=_(v,"extendNodeSchema",f);return{...y,...w?w(c):{}}},{}),h=oc({...d,content:J(_(c,"content",f)),marks:J(_(c,"marks",f)),group:J(_(c,"group",f)),inline:J(_(c,"inline",f)),atom:J(_(c,"atom",f)),selectable:J(_(c,"selectable",f)),draggable:J(_(c,"draggable",f)),code:J(_(c,"code",f)),defining:J(_(c,"defining",f)),isolating:J(_(c,"isolating",f)),attrs:Object.fromEntries(u.map(y=>{var v;return[y.name,{default:(v=y==null?void 0:y.attribute)===null||v===void 0?void 0:v.default}]}))}),p=J(_(c,"parseHTML",f));p&&(h.parseDOM=p.map(y=>ic(y,u)));const m=_(c,"renderHTML",f);m&&(h.toDOM=y=>m({node:y,HTMLAttributes:No(y,u)}));const g=_(c,"renderText",f);return g&&(h.toText=g),[c.name,h]})),l=Object.fromEntries(i.map(c=>{const u=r.filter(g=>g.type===c.name),f={name:c.name,options:c.options,storage:c.storage,editor:e},d=n.reduce((g,y)=>{const v=_(y,"extendMarkSchema",f);return{...g,...v?v(c):{}}},{}),h=oc({...d,inclusive:J(_(c,"inclusive",f)),excludes:J(_(c,"excludes",f)),group:J(_(c,"group",f)),spanning:J(_(c,"spanning",f)),code:J(_(c,"code",f)),attrs:Object.fromEntries(u.map(g=>{var y;return[g.name,{default:(y=g==null?void 0:g.attribute)===null||y===void 0?void 0:y.default}]}))}),p=J(_(c,"parseHTML",f));p&&(h.parseDOM=p.map(g=>ic(g,u)));const m=_(c,"renderHTML",f);return m&&(h.toDOM=g=>m({mark:g,HTMLAttributes:No(g,u)})),[c.name,h]}));return new K0({topNode:o,nodes:a,marks:l})}function Yi(n,e){return e.nodes[n]||e.marks[n]||null}function ac(n,e){return Array.isArray(e)?e.some(t=>(typeof t=="string"?t:t.name)===n.name):e}const R4=(n,e=500)=>{let t="";const r=n.parentOffset;return n.parent.nodesBetween(Math.max(0,r-e),r,(s,i,o,a)=>{var l,c;const u=((c=(l=s.type.spec).toText)===null||c===void 0?void 0:c.call(l,{node:s,pos:i,parent:o,index:a}))||s.textContent||"%leaf%";t+=u.slice(0,Math.max(0,r-i))}),t};function fa(n){return Object.prototype.toString.call(n)==="[object RegExp]"}class vi{constructor(e){this.find=e.find,this.handler=e.handler}}const F4=(n,e)=>{if(fa(e))return e.exec(n);const t=e(n);if(!t)return null;const r=[t.text];return r.index=t.index,r.input=n,r.data=t.data,t.replaceWith&&(t.text.includes(t.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(t.replaceWith)),r};function Xi(n){var e;const{editor:t,from:r,to:s,text:i,rules:o,plugin:a}=n,{view:l}=t;if(l.composing)return!1;const c=l.state.doc.resolve(r);if(c.parent.type.spec.code||!((e=c.nodeBefore||c.nodeAfter)===null||e===void 0)&&e.marks.find(d=>d.type.spec.code))return!1;let u=!1;const f=R4(c)+i;return o.forEach(d=>{if(u)return;const h=F4(f,d.find);if(!h)return;const p=l.state.tr,m=gi({state:l.state,transaction:p}),g={from:r-(h[0].length-i.length),to:s},{commands:y,chain:v,can:w}=new yi({editor:t,state:m});d.handler({state:m,range:g,match:h,commands:y,chain:v,can:w})===null||!p.steps.length||(p.setMeta(a,{transform:p,from:r,to:s,text:i}),l.dispatch(p),u=!0)}),u}function B4(n){const{editor:e,rules:t}=n,r=new Ae({state:{init(){return null},apply(s,i){const o=s.getMeta(r);return o||(s.selectionSet||s.docChanged?null:i)}},props:{handleTextInput(s,i,o,a){return Xi({editor:e,from:i,to:o,text:a,rules:t,plugin:r})},handleDOMEvents:{compositionend:s=>(setTimeout(()=>{const{$cursor:i}=s.state.selection;i&&Xi({editor:e,from:i.pos,to:i.pos,text:"",rules:t,plugin:r})}),!1)},handleKeyDown(s,i){if(i.key!=="Enter")return!1;const{$cursor:o}=s.state.selection;return o?Xi({editor:e,from:o.pos,to:o.pos,text:`
`,rules:t,plugin:r}):!1}},isInputRules:!0});return r}function $4(n){return typeof n=="number"}class H4{constructor(e){this.find=e.find,this.handler=e.handler}}const V4=(n,e)=>{if(fa(e))return[...n.matchAll(e)];const t=e(n);return t?t.map(r=>{const s=[r.text];return s.index=r.index,s.input=n,s.data=r.data,r.replaceWith&&(r.text.includes(r.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),s.push(r.replaceWith)),s}):[]};function z4(n){const{editor:e,state:t,from:r,to:s,rule:i,pasteEvent:o,dropEvent:a}=n,{commands:l,chain:c,can:u}=new yi({editor:e,state:t}),f=[];return t.doc.nodesBetween(r,s,(h,p)=>{if(!h.isTextblock||h.type.spec.code)return;const m=Math.max(r,p),g=Math.min(s,p+h.content.size),y=h.textBetween(m-p,g-p,void 0,"￼");V4(y,i.find).forEach(w=>{if(w.index===void 0)return;const $=m+w.index+1,B=$+w[0].length,x={from:t.tr.mapping.map($),to:t.tr.mapping.map(B)},j=i.handler({state:t,range:x,match:w,commands:l,chain:c,can:u,pasteEvent:o,dropEvent:a});f.push(j)})}),f.every(h=>h!==null)}function j4(n){const{editor:e,rules:t}=n;let r=null,s=!1,i=!1,o=new ClipboardEvent("paste"),a=new DragEvent("drop");return t.map(c=>new Ae({view(u){const f=d=>{var h;r=!((h=u.dom.parentElement)===null||h===void 0)&&h.contains(d.target)?u.dom.parentElement:null};return window.addEventListener("dragstart",f),{destroy(){window.removeEventListener("dragstart",f)}}},props:{handleDOMEvents:{drop:(u,f)=>(i=r===u.dom.parentElement,a=f,!1),paste:(u,f)=>{var d;const h=(d=f.clipboardData)===null||d===void 0?void 0:d.getData("text/html");return o=f,s=!!(h!=null&&h.includes("data-pm-slice")),!1}}},appendTransaction:(u,f,d)=>{const h=u[0],p=h.getMeta("uiEvent")==="paste"&&!s,m=h.getMeta("uiEvent")==="drop"&&!i;if(!p&&!m)return;const g=f.doc.content.findDiffStart(d.doc.content),y=f.doc.content.findDiffEnd(d.doc.content);if(!$4(g)||!y||g===y.b)return;const v=d.tr,w=gi({state:d,transaction:v});if(!(!z4({editor:e,state:w,from:Math.max(g-1,0),to:y.b-1,rule:c,pasteEvent:o,dropEvent:a})||!v.steps.length))return a=new DragEvent("drop"),o=new ClipboardEvent("paste"),v}}))}function W4(n){const e=n.filter((t,r)=>n.indexOf(t)!==r);return[...new Set(e)]}class Rn{constructor(e,t){this.splittableMarks=[],this.editor=t,this.extensions=Rn.resolve(e),this.schema=_4(this.extensions,t),this.extensions.forEach(r=>{var s;this.editor.extensionStorage[r.name]=r.storage;const i={name:r.name,options:r.options,storage:r.storage,editor:this.editor,type:Yi(r.name,this.schema)};r.type==="mark"&&(!((s=J(_(r,"keepOnSplit",i)))!==null&&s!==void 0)||s)&&this.splittableMarks.push(r.name);const o=_(r,"onBeforeCreate",i);o&&this.editor.on("beforeCreate",o);const a=_(r,"onCreate",i);a&&this.editor.on("create",a);const l=_(r,"onUpdate",i);l&&this.editor.on("update",l);const c=_(r,"onSelectionUpdate",i);c&&this.editor.on("selectionUpdate",c);const u=_(r,"onTransaction",i);u&&this.editor.on("transaction",u);const f=_(r,"onFocus",i);f&&this.editor.on("focus",f);const d=_(r,"onBlur",i);d&&this.editor.on("blur",d);const h=_(r,"onDestroy",i);h&&this.editor.on("destroy",h)})}static resolve(e){const t=Rn.sort(Rn.flatten(e)),r=W4(t.map(s=>s.name));return r.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${r.map(s=>`'${s}'`).join(", ")}]. This can lead to issues.`),t}static flatten(e){return e.map(t=>{const r={name:t.name,options:t.options,storage:t.storage},s=_(t,"addExtensions",r);return s?[t,...this.flatten(s())]:t}).flat(10)}static sort(e){return e.sort((r,s)=>{const i=_(r,"priority")||100,o=_(s,"priority")||100;return i>o?-1:i<o?1:0})}get commands(){return this.extensions.reduce((e,t)=>{const r={name:t.name,options:t.options,storage:t.storage,editor:this.editor,type:Yi(t.name,this.schema)},s=_(t,"addCommands",r);return s?{...e,...s()}:e},{})}get plugins(){const{editor:e}=this,t=Rn.sort([...this.extensions].reverse()),r=[],s=[],i=t.map(o=>{const a={name:o.name,options:o.options,storage:o.storage,editor:e,type:Yi(o.name,this.schema)},l=[],c=_(o,"addKeyboardShortcuts",a);let u={};if(o.type==="mark"&&o.config.exitable&&(u.ArrowRight=()=>st.handleExit({editor:e,mark:o})),c){const m=Object.fromEntries(Object.entries(c()).map(([g,y])=>[g,()=>y({editor:e})]));u={...u,...m}}const f=o4(u);l.push(f);const d=_(o,"addInputRules",a);ac(o,e.options.enableInputRules)&&d&&r.push(...d());const h=_(o,"addPasteRules",a);ac(o,e.options.enablePasteRules)&&h&&s.push(...h());const p=_(o,"addProseMirrorPlugins",a);if(p){const m=p();l.push(...m)}return l}).flat();return[B4({editor:e,rules:r}),...j4({editor:e,rules:s}),...i]}get attributes(){return Ed(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:t}=bi(this.extensions);return Object.fromEntries(t.filter(r=>!!_(r,"addNodeView")).map(r=>{const s=this.attributes.filter(l=>l.type===r.name),i={name:r.name,options:r.options,storage:r.storage,editor:e,type:ve(r.name,this.schema)},o=_(r,"addNodeView",i);if(!o)return[];const a=(l,c,u,f)=>{const d=No(l,s);return o()({editor:e,node:l,getPos:u,decorations:f,HTMLAttributes:d,extension:r})};return[r.name,a]}))}}function K4(n){return Object.prototype.toString.call(n).slice(8,-1)}function Qi(n){return K4(n)!=="Object"?!1:n.constructor===Object&&Object.getPrototypeOf(n)===Object.prototype}function Ci(n,e){const t={...n};return Qi(n)&&Qi(e)&&Object.keys(e).forEach(r=>{Qi(e[r])?r in n?t[r]=Ci(n[r],e[r]):Object.assign(t,{[r]:e[r]}):Object.assign(t,{[r]:e[r]})}),t}class Te{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=J(_(this,"addOptions",{name:this.name}))),this.storage=J(_(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Te(e)}configure(e={}){const t=this.extend();return t.options=Ci(this.options,e),t.storage=J(_(t,"addStorage",{name:t.name,options:t.options})),t}extend(e={}){const t=new Te(e);return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=J(_(t,"addOptions",{name:t.name})),t.storage=J(_(t,"addStorage",{name:t.name,options:t.options})),t}}function Md(n,e,t){const{from:r,to:s}=e,{blockSeparator:i=`

`,textSerializers:o={}}=t||{};let a="",l=!0;return n.nodesBetween(r,s,(c,u,f,d)=>{var h;const p=o==null?void 0:o[c.type.name];p?(c.isBlock&&!l&&(a+=i,l=!0),f&&(a+=p({node:c,pos:u,parent:f,index:d,range:e}))):c.isText?(a+=(h=c==null?void 0:c.text)===null||h===void 0?void 0:h.slice(Math.max(r,u)-u,s-u),l=!1):c.isBlock&&!l&&(a+=i,l=!0)}),a}function Td(n){return Object.fromEntries(Object.entries(n.nodes).filter(([,e])=>e.spec.toText).map(([e,t])=>[e,t.spec.toText]))}const U4=Te.create({name:"clipboardTextSerializer",addProseMirrorPlugins(){return[new Ae({key:new Ze("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:n}=this,{state:e,schema:t}=n,{doc:r,selection:s}=e,{ranges:i}=s,o=Math.min(...i.map(u=>u.$from.pos)),a=Math.max(...i.map(u=>u.$to.pos)),l=Td(t);return Md(r,{from:o,to:a},{textSerializers:l})}}})]}}),q4=()=>({editor:n,view:e})=>(requestAnimationFrame(()=>{var t;n.isDestroyed||(e.dom.blur(),(t=window==null?void 0:window.getSelection())===null||t===void 0||t.removeAllRanges())}),!0),G4=(n=!1)=>({commands:e})=>e.setContent("",n),J4=()=>({state:n,tr:e,dispatch:t})=>{const{selection:r}=e,{ranges:s}=r;return t&&s.forEach(({$from:i,$to:o})=>{n.doc.nodesBetween(i.pos,o.pos,(a,l)=>{if(a.type.isText)return;const{doc:c,mapping:u}=e,f=c.resolve(u.map(l)),d=c.resolve(u.map(l+a.nodeSize)),h=f.blockRange(d);if(!h)return;const p=Xn(h);if(a.type.isTextblock){const{defaultType:m}=f.parent.contentMatchAt(f.index());e.setNodeMarkup(h.start,m)}(p||p===0)&&e.lift(h,p)})}),!0},Z4=n=>e=>n(e),Y4=()=>({state:n,dispatch:e})=>v4(n,e),X4=(n,e)=>({editor:t,tr:r})=>{const{state:s}=t,i=s.doc.slice(n.from,n.to);r.deleteRange(n.from,n.to);const o=r.mapping.map(e);return r.insert(o,i.content),r.setSelection(new K(r.doc.resolve(o-1))),!0},Q4=()=>({tr:n,dispatch:e})=>{const{selection:t}=n,r=t.$anchor.node();if(r.content.size>0)return!1;const s=n.selection.$anchor;for(let i=s.depth;i>0;i-=1)if(s.node(i).type===r.type){if(e){const a=s.before(i),l=s.after(i);n.delete(a,l).scrollIntoView()}return!0}return!1},e2=n=>({tr:e,state:t,dispatch:r})=>{const s=ve(n,t.schema),i=e.selection.$anchor;for(let o=i.depth;o>0;o-=1)if(i.node(o).type===s){if(r){const l=i.before(o),c=i.after(o);e.delete(l,c).scrollIntoView()}return!0}return!1},t2=n=>({tr:e,dispatch:t})=>{const{from:r,to:s}=n;return t&&e.delete(r,s),!0},n2=()=>({state:n,dispatch:e})=>a4(n,e),r2=()=>({commands:n})=>n.keyboardShortcut("Enter"),s2=()=>({state:n,dispatch:e})=>b4(n,e);function Os(n,e,t={strict:!0}){const r=Object.keys(e);return r.length?r.every(s=>t.strict?e[s]===n[s]:fa(e[s])?e[s].test(n[s]):e[s]===n[s]):!0}function Io(n,e,t={}){return n.find(r=>r.type===e&&Os(r.attrs,t))}function i2(n,e,t={}){return!!Io(n,e,t)}function ha(n,e,t={}){if(!n||!e)return;let r=n.parent.childAfter(n.parentOffset);if(n.parentOffset===r.offset&&r.offset!==0&&(r=n.parent.childBefore(n.parentOffset)),!r.node)return;const s=Io([...r.node.marks],e,t);if(!s)return;let i=r.index,o=n.start()+r.offset,a=i+1,l=o+r.node.nodeSize;for(Io([...r.node.marks],e,t);i>0&&s.isInSet(n.parent.child(i-1).marks);)i-=1,o-=n.parent.child(i).nodeSize;for(;a<n.parent.childCount&&i2([...n.parent.child(a).marks],e,t);)l+=n.parent.child(a).nodeSize,a+=1;return{from:o,to:l}}function Jt(n,e){if(typeof n=="string"){if(!e.marks[n])throw Error(`There is no mark type named '${n}'. Maybe you forgot to add the extension?`);return e.marks[n]}return n}const o2=(n,e={})=>({tr:t,state:r,dispatch:s})=>{const i=Jt(n,r.schema),{doc:o,selection:a}=t,{$from:l,from:c,to:u}=a;if(s){const f=ha(l,i,e);if(f&&f.from<=c&&f.to>=u){const d=K.create(o,f.from,f.to);t.setSelection(d)}}return!0},a2=n=>e=>{const t=typeof n=="function"?n(e):n;for(let r=0;r<t.length;r+=1)if(t[r](e))return!0;return!1};function Od(n){return n instanceof K}function ln(n=0,e=0,t=0){return Math.min(Math.max(n,e),t)}function Ad(n,e=null){if(!e)return null;const t=Z.atStart(n),r=Z.atEnd(n);if(e==="start"||e===!0)return t;if(e==="end")return r;const s=t.from,i=r.to;return e==="all"?K.create(n,ln(0,s,i),ln(n.content.size,s,i)):K.create(n,ln(e,s,i),ln(e,s,i))}function pa(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const l2=(n=null,e={})=>({editor:t,view:r,tr:s,dispatch:i})=>{e={scrollIntoView:!0,...e};const o=()=>{pa()&&r.dom.focus(),requestAnimationFrame(()=>{t.isDestroyed||(r.focus(),e!=null&&e.scrollIntoView&&t.commands.scrollIntoView())})};if(r.hasFocus()&&n===null||n===!1)return!0;if(i&&n===null&&!Od(t.state.selection))return o(),!0;const a=Ad(s.doc,n)||t.state.selection,l=t.state.selection.eq(a);return i&&(l||s.setSelection(a),l&&s.storedMarks&&s.setStoredMarks(s.storedMarks),o()),!0},c2=(n,e)=>t=>n.every((r,s)=>e(r,{...t,index:s})),u2=(n,e)=>({tr:t,commands:r})=>r.insertContentAt({from:t.selection.from,to:t.selection.to},n,e);function lc(n){const e=`<body>${n}</body>`;return new window.DOMParser().parseFromString(e,"text/html").body}function As(n,e,t){if(t={slice:!0,parseOptions:{},...t},typeof n=="object"&&n!==null)try{return Array.isArray(n)&&n.length>0?S.fromArray(n.map(r=>e.nodeFromJSON(r))):e.nodeFromJSON(n)}catch(r){return console.warn("[tiptap warn]: Invalid content.","Passed value:",n,"Error:",r),As("",e,t)}if(typeof n=="string"){const r=Kn.fromSchema(e);return t.slice?r.parseSlice(lc(n),t.parseOptions).content:r.parse(lc(n),t.parseOptions)}return As("",e,t)}function d2(n,e,t){const r=n.steps.length-1;if(r<e)return;const s=n.steps[r];if(!(s instanceof we||s instanceof ye))return;const i=n.mapping.maps[r];let o=0;i.forEach((a,l,c,u)=>{o===0&&(o=u)}),n.setSelection(Z.near(n.doc.resolve(o),t))}const f2=n=>n.toString().startsWith("<"),h2=(n,e,t)=>({tr:r,dispatch:s,editor:i})=>{if(s){t={parseOptions:{},updateSelection:!0,...t};const o=As(e,i.schema,{parseOptions:{preserveWhitespace:"full",...t.parseOptions}});if(o.toString()==="<>")return!0;let{from:a,to:l}=typeof n=="number"?{from:n,to:n}:{from:n.from,to:n.to},c=!0,u=!0;if((f2(o)?o:[o]).forEach(d=>{d.check(),c=c?d.isText&&d.marks.length===0:!1,u=u?d.isBlock:!1}),a===l&&u){const{parent:d}=r.doc.resolve(a);d.isTextblock&&!d.type.spec.code&&!d.childCount&&(a-=1,l+=1)}c?Array.isArray(e)?r.insertText(e.map(d=>d.text||"").join(""),a,l):typeof e=="object"&&e&&e.text?r.insertText(e.text,a,l):r.insertText(e,a,l):r.replaceWith(a,l,o),t.updateSelection&&d2(r,r.steps.length-1,-1)}return!0},p2=()=>({state:n,dispatch:e})=>p4(n,e),m2=()=>({state:n,dispatch:e})=>m4(n,e),g2=()=>({state:n,dispatch:e})=>c4(n,e),y2=()=>({state:n,dispatch:e})=>f4(n,e),b2=()=>({tr:n,state:e,dispatch:t})=>{try{const r=di(e.doc,e.selection.$from.pos,-1);return r==null?!1:(n.join(r,2),t&&t(n),!0)}catch{return!1}},v2=()=>({state:n,dispatch:e,tr:t})=>{try{const r=di(n.doc,n.selection.$from.pos,1);return r==null?!1:(t.join(r,2),e&&e(t),!0)}catch{return!1}};function ma(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function C2(n){const e=n.split(/-(?!$)/);let t=e[e.length-1];t==="Space"&&(t=" ");let r,s,i,o;for(let a=0;a<e.length-1;a+=1){const l=e[a];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))s=!0;else if(/^s(hift)?$/i.test(l))i=!0;else if(/^mod$/i.test(l))pa()||ma()?o=!0:s=!0;else throw new Error(`Unrecognized modifier name: ${l}`)}return r&&(t=`Alt-${t}`),s&&(t=`Ctrl-${t}`),o&&(t=`Meta-${t}`),i&&(t=`Shift-${t}`),t}const k2=n=>({editor:e,view:t,tr:r,dispatch:s})=>{const i=C2(n).split(/-(?!$)/),o=i.find(c=>!["Alt","Ctrl","Meta","Shift"].includes(c)),a=new KeyboardEvent("keydown",{key:o==="Space"?" ":o,altKey:i.includes("Alt"),ctrlKey:i.includes("Ctrl"),metaKey:i.includes("Meta"),shiftKey:i.includes("Shift"),bubbles:!0,cancelable:!0}),l=e.captureTransaction(()=>{t.someProp("handleKeyDown",c=>c(t,a))});return l==null||l.steps.forEach(c=>{const u=c.map(r.mapping);u&&s&&r.maybeStep(u)}),!0};function Pr(n,e,t={}){const{from:r,to:s,empty:i}=n.selection,o=e?ve(e,n.schema):null,a=[];n.doc.nodesBetween(r,s,(f,d)=>{if(f.isText)return;const h=Math.max(r,d),p=Math.min(s,d+f.nodeSize);a.push({node:f,from:h,to:p})});const l=s-r,c=a.filter(f=>o?o.name===f.node.type.name:!0).filter(f=>Os(f.node.attrs,t,{strict:!1}));return i?!!c.length:c.reduce((f,d)=>f+d.to-d.from,0)>=l}const w2=(n,e={})=>({state:t,dispatch:r})=>{const s=ve(n,t.schema);return Pr(t,s,e)?g4(t,r):!1},S2=()=>({state:n,dispatch:e})=>C4(n,e),E2=n=>({state:e,dispatch:t})=>{const r=ve(n,e.schema);return O4(r)(e,t)},x2=()=>({state:n,dispatch:e})=>y4(n,e);function ki(n,e){return e.nodes[n]?"node":e.marks[n]?"mark":null}function cc(n,e){const t=typeof e=="string"?[e]:e;return Object.keys(n).reduce((r,s)=>(t.includes(s)||(r[s]=n[s]),r),{})}const M2=(n,e)=>({tr:t,state:r,dispatch:s})=>{let i=null,o=null;const a=ki(typeof n=="string"?n:n.name,r.schema);return a?(a==="node"&&(i=ve(n,r.schema)),a==="mark"&&(o=Jt(n,r.schema)),s&&t.selection.ranges.forEach(l=>{r.doc.nodesBetween(l.$from.pos,l.$to.pos,(c,u)=>{i&&i===c.type&&t.setNodeMarkup(u,void 0,cc(c.attrs,e)),o&&c.marks.length&&c.marks.forEach(f=>{o===f.type&&t.addMark(u,u+c.nodeSize,o.create(cc(f.attrs,e)))})})}),!0):!1},T2=()=>({tr:n,dispatch:e})=>(e&&n.scrollIntoView(),!0),O2=()=>({tr:n,commands:e})=>e.setTextSelection({from:0,to:n.doc.content.size}),A2=()=>({state:n,dispatch:e})=>u4(n,e),N2=()=>({state:n,dispatch:e})=>h4(n,e),I2=()=>({state:n,dispatch:e})=>k4(n,e),P2=()=>({state:n,dispatch:e})=>E4(n,e),D2=()=>({state:n,dispatch:e})=>S4(n,e);function Nd(n,e,t={}){return As(n,e,{slice:!1,parseOptions:t})}const L2=(n,e=!1,t={})=>({tr:r,editor:s,dispatch:i})=>{const{doc:o}=r,a=Nd(n,s.schema,t);return i&&r.replaceWith(0,o.content.size,a).setMeta("preventUpdate",!e),!0};function wi(n,e){const t=Jt(e,n.schema),{from:r,to:s,empty:i}=n.selection,o=[];i?(n.storedMarks&&o.push(...n.storedMarks),o.push(...n.selection.$head.marks())):n.doc.nodesBetween(r,s,l=>{o.push(...l.marks)});const a=o.find(l=>l.type.name===t.name);return a?{...a.attrs}:{}}function _2(n,e){const t=new Ru(n);return e.forEach(r=>{r.steps.forEach(s=>{t.step(s)})}),t}function R2(n){for(let e=0;e<n.edgeCount;e+=1){const{type:t}=n.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}function F2(n,e,t){const r=[];return n.nodesBetween(e.from,e.to,(s,i)=>{t(s)&&r.push({node:s,pos:i})}),r}function B2(n,e){for(let t=n.depth;t>0;t-=1){const r=n.node(t);if(e(r))return{pos:t>0?n.before(t):0,start:n.start(t),depth:t,node:r}}}function ga(n){return e=>B2(e.$from,n)}function $2(n,e){const t=pt.fromSchema(e).serializeFragment(n),s=document.implementation.createHTMLDocument().createElement("div");return s.appendChild(t),s.innerHTML}function H2(n,e){const t={from:0,to:n.content.size};return Md(n,t,e)}function V2(n,e){const t=ve(e,n.schema),{from:r,to:s}=n.selection,i=[];n.doc.nodesBetween(r,s,a=>{i.push(a)});const o=i.reverse().find(a=>a.type.name===t.name);return o?{...o.attrs}:{}}function Id(n,e){const t=ki(typeof e=="string"?e:e.name,n.schema);return t==="node"?V2(n,e):t==="mark"?wi(n,e):{}}function z2(n,e=JSON.stringify){const t={};return n.filter(r=>{const s=e(r);return Object.prototype.hasOwnProperty.call(t,s)?!1:t[s]=!0})}function j2(n){const e=z2(n);return e.length===1?e:e.filter((t,r)=>!e.filter((i,o)=>o!==r).some(i=>t.oldRange.from>=i.oldRange.from&&t.oldRange.to<=i.oldRange.to&&t.newRange.from>=i.newRange.from&&t.newRange.to<=i.newRange.to))}function W2(n){const{mapping:e,steps:t}=n,r=[];return e.maps.forEach((s,i)=>{const o=[];if(s.ranges.length)s.forEach((a,l)=>{o.push({from:a,to:l})});else{const{from:a,to:l}=t[i];if(a===void 0||l===void 0)return;o.push({from:a,to:l})}o.forEach(({from:a,to:l})=>{const c=e.slice(i).map(a,-1),u=e.slice(i).map(l),f=e.invert().map(c,-1),d=e.invert().map(u);r.push({oldRange:{from:f,to:d},newRange:{from:c,to:u}})})}),j2(r)}function ya(n,e,t){const r=[];return n===e?t.resolve(n).marks().forEach(s=>{const i=t.resolve(n-1),o=ha(i,s.type);o&&r.push({mark:s,...o})}):t.nodesBetween(n,e,(s,i)=>{r.push(...s.marks.map(o=>({from:i,to:i+s.nodeSize,mark:o})))}),r}function rs(n,e,t){return Object.fromEntries(Object.entries(t).filter(([r])=>{const s=n.find(i=>i.type===e&&i.name===r);return s?s.attribute.keepOnSplit:!1}))}function Po(n,e,t={}){const{empty:r,ranges:s}=n.selection,i=e?Jt(e,n.schema):null;if(r)return!!(n.storedMarks||n.selection.$from.marks()).filter(f=>i?i.name===f.type.name:!0).find(f=>Os(f.attrs,t,{strict:!1}));let o=0;const a=[];if(s.forEach(({$from:f,$to:d})=>{const h=f.pos,p=d.pos;n.doc.nodesBetween(h,p,(m,g)=>{if(!m.isText&&!m.marks.length)return;const y=Math.max(h,g),v=Math.min(p,g+m.nodeSize),w=v-y;o+=w,a.push(...m.marks.map($=>({mark:$,from:y,to:v})))})}),o===0)return!1;const l=a.filter(f=>i?i.name===f.mark.type.name:!0).filter(f=>Os(f.mark.attrs,t,{strict:!1})).reduce((f,d)=>f+d.to-d.from,0),c=a.filter(f=>i?f.mark.type!==i&&f.mark.type.excludes(i):!0).reduce((f,d)=>f+d.to-d.from,0);return(l>0?l+c:l)>=o}function K2(n,e,t={}){if(!e)return Pr(n,null,t)||Po(n,null,t);const r=ki(e,n.schema);return r==="node"?Pr(n,e,t):r==="mark"?Po(n,e,t):!1}function uc(n,e){const{nodeExtensions:t}=bi(e),r=t.find(o=>o.name===n);if(!r)return!1;const s={name:r.name,options:r.options,storage:r.storage},i=J(_(r,"group",s));return typeof i!="string"?!1:i.split(" ").includes("list")}function U2(n){var e;const t=(e=n.type.createAndFill())===null||e===void 0?void 0:e.toJSON(),r=n.toJSON();return JSON.stringify(t)===JSON.stringify(r)}function q2(n,e,t){var r;const{selection:s}=e;let i=null;if(Od(s)&&(i=s.$cursor),i){const a=(r=n.storedMarks)!==null&&r!==void 0?r:i.marks();return!!t.isInSet(a)||!a.some(l=>l.type.excludes(t))}const{ranges:o}=s;return o.some(({$from:a,$to:l})=>{let c=a.depth===0?n.doc.inlineContent&&n.doc.type.allowsMarkType(t):!1;return n.doc.nodesBetween(a.pos,l.pos,(u,f,d)=>{if(c)return!1;if(u.isInline){const h=!d||d.type.allowsMarkType(t),p=!!t.isInSet(u.marks)||!u.marks.some(m=>m.type.excludes(t));c=h&&p}return!c}),c})}const G2=(n,e={})=>({tr:t,state:r,dispatch:s})=>{const{selection:i}=t,{empty:o,ranges:a}=i,l=Jt(n,r.schema);if(s)if(o){const c=wi(r,l);t.addStoredMark(l.create({...c,...e}))}else a.forEach(c=>{const u=c.$from.pos,f=c.$to.pos;r.doc.nodesBetween(u,f,(d,h)=>{const p=Math.max(h,u),m=Math.min(h+d.nodeSize,f);d.marks.find(y=>y.type===l)?d.marks.forEach(y=>{l===y.type&&t.addMark(p,m,l.create({...y.attrs,...e}))}):t.addMark(p,m,l.create(e))})});return q2(r,t,l)},J2=(n,e)=>({tr:t})=>(t.setMeta(n,e),!0),Z2=(n,e={})=>({state:t,dispatch:r,chain:s})=>{const i=ve(n,t.schema);return i.isTextblock?s().command(({commands:o})=>sc(i,e)(t)?!0:o.clearNodes()).command(({state:o})=>sc(i,e)(o,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},Y2=n=>({tr:e,dispatch:t})=>{if(t){const{doc:r}=e,s=ln(n,0,r.content.size),i=z.create(r,s);e.setSelection(i)}return!0},X2=n=>({tr:e,dispatch:t})=>{if(t){const{doc:r}=e,{from:s,to:i}=typeof n=="number"?{from:n,to:n}:n,o=K.atStart(r).from,a=K.atEnd(r).to,l=ln(s,o,a),c=ln(i,o,a),u=K.create(r,l,c);e.setSelection(u)}return!0},Q2=n=>({state:e,dispatch:t})=>{const r=ve(n,e.schema);return I4(r)(e,t)};function dc(n,e){const t=n.storedMarks||n.selection.$to.parentOffset&&n.selection.$from.marks();if(t){const r=t.filter(s=>e==null?void 0:e.includes(s.type.name));n.tr.ensureMarks(r)}}const e5=({keepMarks:n=!0}={})=>({tr:e,state:t,dispatch:r,editor:s})=>{const{selection:i,doc:o}=e,{$from:a,$to:l}=i,c=s.extensionManager.attributes,u=rs(c,a.node().type.name,a.node().attrs);if(i instanceof z&&i.node.isBlock)return!a.parentOffset||!Vn(o,a.pos)?!1:(r&&(n&&dc(t,s.extensionManager.splittableMarks),e.split(a.pos).scrollIntoView()),!0);if(!a.parent.isBlock)return!1;if(r){const f=l.parentOffset===l.parent.content.size;i instanceof K&&e.deleteSelection();const d=a.depth===0?void 0:R2(a.node(-1).contentMatchAt(a.indexAfter(-1)));let h=f&&d?[{type:d,attrs:u}]:void 0,p=Vn(e.doc,e.mapping.map(a.pos),1,h);if(!h&&!p&&Vn(e.doc,e.mapping.map(a.pos),1,d?[{type:d}]:void 0)&&(p=!0,h=d?[{type:d,attrs:u}]:void 0),p&&(e.split(e.mapping.map(a.pos),1,h),d&&!f&&!a.parentOffset&&a.parent.type!==d)){const m=e.mapping.map(a.before()),g=e.doc.resolve(m);a.node(-1).canReplaceWith(g.index(),g.index()+1,d)&&e.setNodeMarkup(e.mapping.map(a.before()),d)}n&&dc(t,s.extensionManager.splittableMarks),e.scrollIntoView()}return!0},t5=n=>({tr:e,state:t,dispatch:r,editor:s})=>{var i;const o=ve(n,t.schema),{$from:a,$to:l}=t.selection,c=t.selection.node;if(c&&c.isBlock||a.depth<2||!a.sameParent(l))return!1;const u=a.node(-1);if(u.type!==o)return!1;const f=s.extensionManager.attributes;if(a.parent.content.size===0&&a.node(-1).childCount===a.indexAfter(-1)){if(a.depth===2||a.node(-3).type!==o||a.index(-2)!==a.node(-2).childCount-1)return!1;if(r){let g=S.empty;const y=a.index(-1)?1:a.index(-2)?2:3;for(let j=a.depth-y;j>=a.depth-3;j-=1)g=S.from(a.node(j).copy(g));const v=a.indexAfter(-1)<a.node(-2).childCount?1:a.indexAfter(-2)<a.node(-3).childCount?2:3,w=rs(f,a.node().type.name,a.node().attrs),$=((i=o.contentMatch.defaultType)===null||i===void 0?void 0:i.createAndFill(w))||void 0;g=g.append(S.from(o.createAndFill(null,$)||void 0));const B=a.before(a.depth-(y-1));e.replace(B,a.after(-v),new I(g,4-y,0));let x=-1;e.doc.nodesBetween(B,e.doc.content.size,(j,se)=>{if(x>-1)return!1;j.isTextblock&&j.content.size===0&&(x=se+1)}),x>-1&&e.setSelection(K.near(e.doc.resolve(x))),e.scrollIntoView()}return!0}const d=l.pos===a.end()?u.contentMatchAt(0).defaultType:null,h=rs(f,u.type.name,u.attrs),p=rs(f,a.node().type.name,a.node().attrs);e.delete(a.pos,l.pos);const m=d?[{type:o,attrs:h},{type:d,attrs:p}]:[{type:o,attrs:h}];if(!Vn(e.doc,a.pos,2))return!1;if(r){const{selection:g,storedMarks:y}=t,{splittableMarks:v}=s.extensionManager,w=y||g.$to.parentOffset&&g.$from.marks();if(e.split(a.pos,2,m).scrollIntoView(),!w||!r)return!0;const $=w.filter(B=>v.includes(B.type.name));e.ensureMarks($)}return!0},eo=(n,e)=>{const t=ga(o=>o.type===e)(n.selection);if(!t)return!0;const r=n.doc.resolve(Math.max(0,t.pos-1)).before(t.depth);if(r===void 0)return!0;const s=n.doc.nodeAt(r);return t.node.type===(s==null?void 0:s.type)&&qt(n.doc,t.pos)&&n.join(t.pos),!0},to=(n,e)=>{const t=ga(o=>o.type===e)(n.selection);if(!t)return!0;const r=n.doc.resolve(t.start).after(t.depth);if(r===void 0)return!0;const s=n.doc.nodeAt(r);return t.node.type===(s==null?void 0:s.type)&&qt(n.doc,r)&&n.join(r),!0},n5=(n,e,t,r={})=>({editor:s,tr:i,state:o,dispatch:a,chain:l,commands:c,can:u})=>{const{extensions:f,splittableMarks:d}=s.extensionManager,h=ve(n,o.schema),p=ve(e,o.schema),{selection:m,storedMarks:g}=o,{$from:y,$to:v}=m,w=y.blockRange(v),$=g||m.$to.parentOffset&&m.$from.marks();if(!w)return!1;const B=ga(x=>uc(x.type.name,f))(m);if(w.depth>=1&&B&&w.depth-B.depth<=1){if(B.node.type===h)return c.liftListItem(p);if(uc(B.node.type.name,f)&&h.validContent(B.node.content)&&a)return l().command(()=>(i.setNodeMarkup(B.pos,h),!0)).command(()=>eo(i,h)).command(()=>to(i,h)).run()}return!t||!$||!a?l().command(()=>u().wrapInList(h,r)?!0:c.clearNodes()).wrapInList(h,r).command(()=>eo(i,h)).command(()=>to(i,h)).run():l().command(()=>{const x=u().wrapInList(h,r),j=$.filter(se=>d.includes(se.type.name));return i.ensureMarks(j),x?!0:c.clearNodes()}).wrapInList(h,r).command(()=>eo(i,h)).command(()=>to(i,h)).run()},r5=(n,e={},t={})=>({state:r,commands:s})=>{const{extendEmptyMarkRange:i=!1}=t,o=Jt(n,r.schema);return Po(r,o,e)?s.unsetMark(o,{extendEmptyMarkRange:i}):s.setMark(o,e)},s5=(n,e,t={})=>({state:r,commands:s})=>{const i=ve(n,r.schema),o=ve(e,r.schema);return Pr(r,i,t)?s.setNode(o):s.setNode(i,t)},i5=(n,e={})=>({state:t,commands:r})=>{const s=ve(n,t.schema);return Pr(t,s,e)?r.lift(s):r.wrapIn(s,e)},o5=()=>({state:n,dispatch:e})=>{const t=n.plugins;for(let r=0;r<t.length;r+=1){const s=t[r];let i;if(s.spec.isInputRules&&(i=s.getState(n))){if(e){const o=n.tr,a=i.transform;for(let l=a.steps.length-1;l>=0;l-=1)o.step(a.steps[l].invert(a.docs[l]));if(i.text){const l=o.doc.resolve(i.from).marks();o.replaceWith(i.from,i.to,n.schema.text(i.text,l))}else o.delete(i.from,i.to)}return!0}}return!1},a5=()=>({tr:n,dispatch:e})=>{const{selection:t}=n,{empty:r,ranges:s}=t;return r||e&&s.forEach(i=>{n.removeMark(i.$from.pos,i.$to.pos)}),!0},l5=(n,e={})=>({tr:t,state:r,dispatch:s})=>{var i;const{extendEmptyMarkRange:o=!1}=e,{selection:a}=t,l=Jt(n,r.schema),{$from:c,empty:u,ranges:f}=a;if(!s)return!0;if(u&&o){let{from:d,to:h}=a;const p=(i=c.marks().find(g=>g.type===l))===null||i===void 0?void 0:i.attrs,m=ha(c,l,p);m&&(d=m.from,h=m.to),t.removeMark(d,h,l)}else f.forEach(d=>{t.removeMark(d.$from.pos,d.$to.pos,l)});return t.removeStoredMark(l),!0},c5=(n,e={})=>({tr:t,state:r,dispatch:s})=>{let i=null,o=null;const a=ki(typeof n=="string"?n:n.name,r.schema);return a?(a==="node"&&(i=ve(n,r.schema)),a==="mark"&&(o=Jt(n,r.schema)),s&&t.selection.ranges.forEach(l=>{const c=l.$from.pos,u=l.$to.pos;r.doc.nodesBetween(c,u,(f,d)=>{i&&i===f.type&&t.setNodeMarkup(d,void 0,{...f.attrs,...e}),o&&f.marks.length&&f.marks.forEach(h=>{if(o===h.type){const p=Math.max(d,c),m=Math.min(d+f.nodeSize,u);t.addMark(p,m,o.create({...h.attrs,...e}))}})})}),!0):!1},u5=(n,e={})=>({state:t,dispatch:r})=>{const s=ve(n,t.schema);return x4(s,e)(t,r)},d5=(n,e={})=>({state:t,dispatch:r})=>{const s=ve(n,t.schema);return M4(s,e)(t,r)};var f5=Object.freeze({__proto__:null,blur:q4,clearContent:G4,clearNodes:J4,command:Z4,createParagraphNear:Y4,cut:X4,deleteCurrentNode:Q4,deleteNode:e2,deleteRange:t2,deleteSelection:n2,enter:r2,exitCode:s2,extendMarkRange:o2,first:a2,focus:l2,forEach:c2,insertContent:u2,insertContentAt:h2,joinUp:p2,joinDown:m2,joinBackward:g2,joinForward:y2,joinItemBackward:b2,joinItemForward:v2,keyboardShortcut:k2,lift:w2,liftEmptyBlock:S2,liftListItem:E2,newlineInCode:x2,resetAttributes:M2,scrollIntoView:T2,selectAll:O2,selectNodeBackward:A2,selectNodeForward:N2,selectParentNode:I2,selectTextblockEnd:P2,selectTextblockStart:D2,setContent:L2,setMark:G2,setMeta:J2,setNode:Z2,setNodeSelection:Y2,setTextSelection:X2,sinkListItem:Q2,splitBlock:e5,splitListItem:t5,toggleList:n5,toggleMark:r5,toggleNode:s5,toggleWrap:i5,undoInputRule:o5,unsetAllMarks:a5,unsetMark:l5,updateAttributes:c5,wrapIn:u5,wrapInList:d5});const h5=Te.create({name:"commands",addCommands(){return{...f5}}}),p5=Te.create({name:"editable",addProseMirrorPlugins(){return[new Ae({key:new Ze("editable"),props:{editable:()=>this.editor.options.editable}})]}}),m5=Te.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:n}=this;return[new Ae({key:new Ze("focusEvents"),props:{handleDOMEvents:{focus:(e,t)=>{n.isFocused=!0;const r=n.state.tr.setMeta("focus",{event:t}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,t)=>{n.isFocused=!1;const r=n.state.tr.setMeta("blur",{event:t}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),g5=Te.create({name:"keymap",addKeyboardShortcuts(){const n=()=>this.editor.commands.first(({commands:o})=>[()=>o.undoInputRule(),()=>o.command(({tr:a})=>{const{selection:l,doc:c}=a,{empty:u,$anchor:f}=l,{pos:d,parent:h}=f,p=f.parent.isTextblock?a.doc.resolve(d-1):f,m=p.parent.type.spec.isolating,g=f.pos-f.parentOffset,y=m&&p.parent.childCount===1?g===f.pos:Z.atStart(c).from===d;return!u||!y||!h.type.isTextblock||h.textContent.length?!1:o.clearNodes()}),()=>o.deleteSelection(),()=>o.joinBackward(),()=>o.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:o})=>[()=>o.deleteSelection(),()=>o.deleteCurrentNode(),()=>o.joinForward(),()=>o.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:o})=>[()=>o.newlineInCode(),()=>o.createParagraphNear(),()=>o.liftEmptyBlock(),()=>o.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:n,"Mod-Backspace":n,"Shift-Backspace":n,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},s={...r},i={...r,"Ctrl-h":n,"Alt-Backspace":n,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return pa()||ma()?i:s},addProseMirrorPlugins(){return[new Ae({key:new Ze("clearDocument"),appendTransaction:(n,e,t)=>{if(!(n.some(p=>p.docChanged)&&!e.doc.eq(t.doc)))return;const{empty:s,from:i,to:o}=e.selection,a=Z.atStart(e.doc).from,l=Z.atEnd(e.doc).to;if(s||!(i===a&&o===l)||!(t.doc.textBetween(0,t.doc.content.size," "," ").length===0))return;const f=t.tr,d=gi({state:t,transaction:f}),{commands:h}=new yi({editor:this.editor,state:d});if(h.clearNodes(),!!f.steps.length)return f}})]}}),y5=Te.create({name:"tabindex",addProseMirrorPlugins(){return[new Ae({key:new Ze("tabindex"),props:{attributes:this.editor.isEditable?{tabindex:"0"}:{}}})]}});var b5=Object.freeze({__proto__:null,ClipboardTextSerializer:U4,Commands:h5,Editable:p5,FocusEvents:m5,Keymap:g5,Tabindex:y5});const v5=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 1px !important;
  height: 1px !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}

.tippy-box[data-animation=fade][data-state=hidden] {
  opacity: 0
}`;function C5(n,e,t){const r=document.querySelector(`style[data-tiptap-style${t?`-${t}`:""}]`);if(r!==null)return r;const s=document.createElement("style");return e&&s.setAttribute("nonce",e),s.setAttribute(`data-tiptap-style${t?`-${t}`:""}`,""),s.innerHTML=n,document.getElementsByTagName("head")[0].appendChild(s),s}let k5=class extends P4{constructor(e={}){super(),this.isFocused=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}))},0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=C5(v5,this.options.injectNonce))}setOptions(e={}){this.options={...this.options,...e},!(!this.view||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e,t=!0){this.setOptions({editable:e}),t&&this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(e,t){const r=xd(t)?t(e,[...this.state.plugins]):[...this.state.plugins,e],s=this.state.reconfigure({plugins:r});this.view.updateState(s)}unregisterPlugin(e){if(this.isDestroyed)return;const t=typeof e=="string"?`${e}$`:e.key,r=this.state.reconfigure({plugins:this.state.plugins.filter(s=>!s.key.startsWith(t))});this.view.updateState(r)}createExtensionManager(){const t=[...this.options.enableCoreExtensions?Object.values(b5):[],...this.options.extensions].filter(r=>["extension","node","mark"].includes(r==null?void 0:r.type));this.extensionManager=new Rn(t,this)}createCommandManager(){this.commandManager=new yi({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){const e=Nd(this.options.content,this.schema,this.options.parseOptions),t=Ad(e,this.options.autofocus);this.view=new Y9(this.options.element,{...this.options.editorProps,dispatchTransaction:this.dispatchTransaction.bind(this),state:_n.create({doc:e,selection:t||void 0})});const r=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(r),this.createNodeViews(),this.prependClass();const s=this.view.dom;s.editor=this}createNodeViews(){this.view.setProps({nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const t=this.capturedTransaction;return this.capturedTransaction=null,t}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=e;return}e.steps.forEach(o=>{var a;return(a=this.capturedTransaction)===null||a===void 0?void 0:a.step(o)});return}const t=this.state.apply(e),r=!this.state.selection.eq(t.selection);this.view.updateState(t),this.emit("transaction",{editor:this,transaction:e}),r&&this.emit("selectionUpdate",{editor:this,transaction:e});const s=e.getMeta("focus"),i=e.getMeta("blur");s&&this.emit("focus",{editor:this,event:s.event,transaction:e}),i&&this.emit("blur",{editor:this,event:i.event,transaction:e}),!(!e.docChanged||e.getMeta("preventUpdate"))&&this.emit("update",{editor:this,transaction:e})}getAttributes(e){return Id(this.state,e)}isActive(e,t){const r=typeof e=="string"?e:null,s=typeof e=="string"?t:e;return K2(this.state,r,s)}getJSON(){return this.state.doc.toJSON()}getHTML(){return $2(this.state.doc.content,this.schema)}getText(e){const{blockSeparator:t=`

`,textSerializers:r={}}=e||{};return H2(this.state.doc,{blockSeparator:t,textSerializers:{...Td(this.schema),...r}})}get isEmpty(){return U2(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){this.emit("destroy"),this.view&&this.view.destroy(),this.removeAllListeners()}get isDestroyed(){var e;return!(!((e=this.view)===null||e===void 0)&&e.docView)}};function Zn(n){return new vi({find:n.find,handler:({state:e,range:t,match:r})=>{const s=J(n.getAttributes,void 0,r);if(s===!1||s===null)return null;const{tr:i}=e,o=r[r.length-1],a=r[0];if(o){const l=a.search(/\S/),c=t.from+a.indexOf(o),u=c+o.length;if(ya(t.from,t.to,e.doc).filter(h=>h.mark.type.excluded.find(m=>m===n.type&&m!==h.mark.type)).filter(h=>h.to>c).length)return null;u<t.to&&i.delete(u,t.to),c>t.from&&i.delete(t.from+l,c);const d=t.from+l+o.length;i.addMark(t.from+l,d,n.type.create(s||{})),i.removeStoredMark(n.type)}}})}function w5(n){return new vi({find:n.find,handler:({state:e,range:t,match:r})=>{const s=J(n.getAttributes,void 0,r)||{},{tr:i}=e,o=t.from;let a=t.to;const l=n.type.create(s);if(r[1]){const c=r[0].lastIndexOf(r[1]);let u=o+c;u>a?u=a:a=u+r[1].length;const f=r[0][r[0].length-1];i.insertText(f,o+r[0].length-1),i.replaceWith(u,a,l)}else r[0]&&i.insert(o-1,n.type.create(s)).delete(i.mapping.map(o),i.mapping.map(a));i.scrollIntoView()}})}function Do(n){return new vi({find:n.find,handler:({state:e,range:t,match:r})=>{const s=e.doc.resolve(t.from),i=J(n.getAttributes,void 0,r)||{};if(!s.node(-1).canReplaceWith(s.index(-1),s.indexAfter(-1),n.type))return null;e.tr.delete(t.from,t.to).setBlockType(t.from,t.from,n.type,i)}})}function Dr(n){return new vi({find:n.find,handler:({state:e,range:t,match:r,chain:s})=>{const i=J(n.getAttributes,void 0,r)||{},o=e.tr.delete(t.from,t.to),l=o.doc.resolve(t.from).blockRange(),c=l&&ea(l,n.type,i);if(!c)return null;if(o.wrap(l,c),n.keepMarks&&n.editor){const{selection:f,storedMarks:d}=e,{splittableMarks:h}=n.editor.extensionManager,p=d||f.$to.parentOffset&&f.$from.marks();if(p){const m=p.filter(g=>h.includes(g.type.name));o.ensureMarks(m)}}if(n.keepAttributes){const f=n.type.name==="bulletList"||n.type.name==="orderedList"?"listItem":"taskList";s().updateAttributes(f,i).run()}const u=o.doc.resolve(t.from-1).nodeBefore;u&&u.type===n.type&&qt(o.doc,t.from-1)&&(!n.joinPredicate||n.joinPredicate(r,u))&&o.join(t.from-1)}})}class st{constructor(e={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=J(_(this,"addOptions",{name:this.name}))),this.storage=J(_(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new st(e)}configure(e={}){const t=this.extend();return t.options=Ci(this.options,e),t.storage=J(_(t,"addStorage",{name:t.name,options:t.options})),t}extend(e={}){const t=new st(e);return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=J(_(t,"addOptions",{name:t.name})),t.storage=J(_(t,"addStorage",{name:t.name,options:t.options})),t}static handleExit({editor:e,mark:t}){const{tr:r}=e.state,s=e.state.selection.$from;if(s.pos===s.end()){const o=s.marks();if(!!!o.find(c=>(c==null?void 0:c.type.name)===t.name))return!1;const l=o.find(c=>(c==null?void 0:c.type.name)===t.name);return l&&r.removeStoredMark(l),r.insertText(" ",s.pos),e.view.dispatch(r),!0}return!1}}let je=class Lo{constructor(e={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=J(_(this,"addOptions",{name:this.name}))),this.storage=J(_(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Lo(e)}configure(e={}){const t=this.extend();return t.options=Ci(this.options,e),t.storage=J(_(t,"addStorage",{name:t.name,options:t.options})),t}extend(e={}){const t=new Lo(e);return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=J(_(t,"addOptions",{name:t.name})),t.storage=J(_(t,"addStorage",{name:t.name,options:t.options})),t}};function Cn(n){return new H4({find:n.find,handler:({state:e,range:t,match:r,pasteEvent:s})=>{const i=J(n.getAttributes,void 0,r,s);if(i===!1||i===null)return null;const{tr:o}=e,a=r[r.length-1],l=r[0];let c=t.to;if(a){const u=l.search(/\S/),f=t.from+l.indexOf(a),d=f+a.length;if(ya(t.from,t.to,e.doc).filter(p=>p.mark.type.excluded.find(g=>g===n.type&&g!==p.mark.type)).filter(p=>p.to>f).length)return null;d<t.to&&o.delete(d,t.to),f>t.from&&o.delete(t.from+u,f),c=t.from+u+a.length,o.addMark(t.from+u,c,n.type.create(i||{})),o.removeStoredMark(n.type)}}})}function fc(n){return Sf((e,t)=>({get(){return e(),n},set(r){n=r,requestAnimationFrame(()=>{requestAnimationFrame(()=>{t()})})}}))}class S5 extends k5{constructor(e={}){return super(e),this.vueRenderers=kf(new Map),this.contentComponent=null,this.reactiveState=fc(this.view.state),this.reactiveExtensionStorage=fc(this.extensionStorage),this.on("transaction",()=>{this.reactiveState.value=this.view.state,this.reactiveExtensionStorage.value=this.extensionStorage}),wf(this)}get state(){return this.reactiveState?this.reactiveState.value:this.view.state}get storage(){return this.reactiveExtensionStorage?this.reactiveExtensionStorage.value:super.storage}registerPlugin(e,t){super.registerPlugin(e,t),this.reactiveState.value=this.view.state}unregisterPlugin(e){super.unregisterPlugin(e),this.reactiveState.value=this.view.state}}const E5=ee({name:"EditorContent",props:{editor:{default:null,type:Object}},setup(n){const e=re(),t=vf();return Fr(()=>{const r=n.editor;r&&r.options.element&&e.value&&Cf(()=>{if(!e.value||!r.options.element.firstChild)return;const s=N(e.value);e.value.append(...r.options.element.childNodes),r.contentComponent=t.ctx._,r.setOptions({element:s}),r.createNodeViews()})}),Rr(()=>{const r=n.editor;if(!r||(r.isDestroyed||r.view.setProps({nodeViews:{}}),r.contentComponent=null,!r.options.element.firstChild))return;const s=document.createElement("div");s.append(...r.options.element.childNodes),r.setOptions({element:s})}),{rootEl:e}},render(){const n=[];return this.editor&&this.editor.vueRenderers.forEach(e=>{const t=Ei(Ut,{to:e.teleportElement,key:e.id},Ei(e.component,{ref:e.id,...e.props}));n.push(t)}),Ei("div",{ref:e=>{this.rootEl=e}},...n)}}),x5=(n={})=>{const e=Ac();return ze(()=>{e.value=new S5(n)}),Rr(()=>{var t;(t=e.value)===null||t===void 0||t.destroy()}),e},M5=/^\s*>\s$/,Pd=je.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:n}){return["blockquote",he(this.options.HTMLAttributes,n),0]},addCommands(){return{setBlockquote:()=>({commands:n})=>n.wrapIn(this.name),toggleBlockquote:()=>({commands:n})=>n.toggleWrap(this.name),unsetBlockquote:()=>({commands:n})=>n.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[Dr({find:M5,type:this.type})]}}),T5=/(?:^|\s)((?:\*\*)((?:[^*]+))(?:\*\*))$/,O5=/(?:^|\s)((?:\*\*)((?:[^*]+))(?:\*\*))/g,A5=/(?:^|\s)((?:__)((?:[^__]+))(?:__))$/,N5=/(?:^|\s)((?:__)((?:[^__]+))(?:__))/g,Dd=st.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:n=>n.style.fontWeight!=="normal"&&null},{style:"font-weight",getAttrs:n=>/^(bold(er)?|[5-9]\d{2,})$/.test(n)&&null}]},renderHTML({HTMLAttributes:n}){return["strong",he(this.options.HTMLAttributes,n),0]},addCommands(){return{setBold:()=>({commands:n})=>n.setMark(this.name),toggleBold:()=>({commands:n})=>n.toggleMark(this.name),unsetBold:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[Zn({find:T5,type:this.type}),Zn({find:A5,type:this.type})]},addPasteRules(){return[Cn({find:O5,type:this.type}),Cn({find:N5,type:this.type})]}}),I5=je.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:n}){return["li",he(this.options.HTMLAttributes,n),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),hc=st.create({name:"textStyle",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"span",getAttrs:n=>n.hasAttribute("style")?{}:!1}]},renderHTML({HTMLAttributes:n}){return["span",he(this.options.HTMLAttributes,n),0]},addCommands(){return{removeEmptyTextStyle:()=>({state:n,commands:e})=>{const t=wi(n,this.type);return Object.entries(t).some(([,s])=>!!s)?!0:e.unsetMark(this.name)}}}}),pc=/^\s*([-+*])\s$/,Ld=je.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:n}){return["ul",he(this.options.HTMLAttributes,n),0]},addCommands(){return{toggleBulletList:()=>({commands:n,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(I5.name,this.editor.getAttributes(hc.name)).run():n.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let n=Dr({find:pc,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(n=Dr({find:pc,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(hc.name),editor:this.editor})),[n]}}),P5=/(?:^|\s)((?:`)((?:[^`]+))(?:`))$/,D5=/(?:^|\s)((?:`)((?:[^`]+))(?:`))/g,L5=st.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:n}){return["code",he(this.options.HTMLAttributes,n),0]},addCommands(){return{setCode:()=>({commands:n})=>n.setMark(this.name),toggleCode:()=>({commands:n})=>n.toggleMark(this.name),unsetCode:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[Zn({find:P5,type:this.type})]},addPasteRules(){return[Cn({find:D5,type:this.type})]}}),_5=/^```([a-z]+)?[\s\n]$/,R5=/^~~~([a-z]+)?[\s\n]$/,_d=je.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:null,parseHTML:n=>{var e;const{languageClassPrefix:t}=this.options,i=[...((e=n.firstElementChild)===null||e===void 0?void 0:e.classList)||[]].filter(o=>o.startsWith(t)).map(o=>o.replace(t,""))[0];return i||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:n,HTMLAttributes:e}){return["pre",he(this.options.HTMLAttributes,e),["code",{class:n.attrs.language?this.options.languageClassPrefix+n.attrs.language:null},0]]},addCommands(){return{setCodeBlock:n=>({commands:e})=>e.setNode(this.name,n),toggleCodeBlock:n=>({commands:e})=>e.toggleNode(this.name,"paragraph",n)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:n,$anchor:e}=this.editor.state.selection,t=e.pos===1;return!n||e.parent.type.name!==this.name?!1:t||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Enter:({editor:n})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=n,{selection:t}=e,{$from:r,empty:s}=t;if(!s||r.parent.type!==this.type)return!1;const i=r.parentOffset===r.parent.nodeSize-2,o=r.parent.textContent.endsWith(`

`);return!i||!o?!1:n.chain().command(({tr:a})=>(a.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:n})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=n,{selection:t,doc:r}=e,{$from:s,empty:i}=t;if(!i||s.parent.type!==this.type||!(s.parentOffset===s.parent.nodeSize-2))return!1;const a=s.after();return a===void 0||r.nodeAt(a)?!1:n.commands.exitCode()}}},addInputRules(){return[Do({find:_5,type:this.type,getAttributes:n=>({language:n[1]})}),Do({find:R5,type:this.type,getAttributes:n=>({language:n[1]})})]},addProseMirrorPlugins(){return[new Ae({key:new Ze("codeBlockVSCodeHandler"),props:{handlePaste:(n,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const t=e.clipboardData.getData("text/plain"),r=e.clipboardData.getData("vscode-editor-data"),s=r?JSON.parse(r):void 0,i=s==null?void 0:s.mode;if(!t||!i)return!1;const{tr:o}=n.state;return o.replaceSelectionWith(this.type.create({language:i})),o.setSelection(K.near(o.doc.resolve(Math.max(0,o.selection.from-2)))),o.insertText(t.replace(/\r\n?/g,`
`)),o.setMeta("paste",!0),n.dispatch(o),!0}}})]}}),Rd=je.create({name:"doc",topNode:!0,content:"block+"});function F5(n={}){return new Ae({view(e){return new B5(e,n)}})}class B5{constructor(e,t){var r;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=t.width)!==null&&r!==void 0?r:1,this.color=t.color===!1?void 0:t.color||"black",this.class=t.class,this.handlers=["dragover","dragend","drop","dragleave"].map(s=>{let i=o=>{this[s](o)};return e.dom.addEventListener(s,i),{name:s,handler:i}})}destroy(){this.handlers.forEach(({name:e,handler:t})=>this.editorView.dom.removeEventListener(e,t))}update(e,t){this.cursorPos!=null&&t.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),t=!e.parent.inlineContent,r;if(t){let a=e.nodeBefore,l=e.nodeAfter;if(a||l){let c=this.editorView.nodeDOM(this.cursorPos-(a?a.nodeSize:0));if(c){let u=c.getBoundingClientRect(),f=a?u.bottom:u.top;a&&l&&(f=(f+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),r={left:u.left,right:u.right,top:f-this.width/2,bottom:f+this.width/2}}}}if(!r){let a=this.editorView.coordsAtPos(this.cursorPos);r={left:a.left-this.width/2,right:a.left+this.width/2,top:a.top,bottom:a.bottom}}let s=this.editorView.dom.offsetParent;this.element||(this.element=s.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",t),this.element.classList.toggle("prosemirror-dropcursor-inline",!t);let i,o;if(!s||s==document.body&&getComputedStyle(s).position=="static")i=-pageXOffset,o=-pageYOffset;else{let a=s.getBoundingClientRect();i=a.left-s.scrollLeft,o=a.top-s.scrollTop}this.element.style.left=r.left-i+"px",this.element.style.top=r.top-o+"px",this.element.style.width=r.right-r.left+"px",this.element.style.height=r.bottom-r.top+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let t=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=t&&t.inside>=0&&this.editorView.state.doc.nodeAt(t.inside),s=r&&r.type.spec.disableDropCursor,i=typeof s=="function"?s(this.editorView,t,e):s;if(t&&!i){let o=t.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let a=Iu(this.editorView.state.doc,o,this.editorView.dragging.slice);a!=null&&(o=a)}this.setCursor(o),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){(e.target==this.editorView.dom||!this.editorView.dom.contains(e.relatedTarget))&&this.setCursor(null)}}const $5=Te.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[F5(this.options)]}});class fe extends Z{constructor(e){super(e,e)}map(e,t){let r=e.resolve(t.map(this.head));return fe.valid(r)?new fe(r):Z.near(r)}content(){return I.empty}eq(e){return e instanceof fe&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new fe(e.resolve(t.pos))}getBookmark(){return new ba(this.anchor)}static valid(e){let t=e.parent;if(t.isTextblock||!H5(e)||!V5(e))return!1;let r=t.type.spec.allowGapCursor;if(r!=null)return r;let s=t.contentMatchAt(e.index()).defaultType;return s&&s.isTextblock}static findGapCursorFrom(e,t,r=!1){e:for(;;){if(!r&&fe.valid(e))return e;let s=e.pos,i=null;for(let o=e.depth;;o--){let a=e.node(o);if(t>0?e.indexAfter(o)<a.childCount:e.index(o)>0){i=a.child(t>0?e.indexAfter(o):e.index(o)-1);break}else if(o==0)return null;s+=t;let l=e.doc.resolve(s);if(fe.valid(l))return l}for(;;){let o=t>0?i.firstChild:i.lastChild;if(!o){if(i.isAtom&&!i.isText&&!z.isSelectable(i)){e=e.doc.resolve(s+i.nodeSize*t),r=!1;continue e}break}i=o,s+=t;let a=e.doc.resolve(s);if(fe.valid(a))return a}return null}}}fe.prototype.visible=!1;fe.findFrom=fe.findGapCursorFrom;Z.jsonID("gapcursor",fe);class ba{constructor(e){this.pos=e}map(e){return new ba(e.map(this.pos))}resolve(e){let t=e.resolve(this.pos);return fe.valid(t)?new fe(t):Z.near(t)}}function H5(n){for(let e=n.depth;e>=0;e--){let t=n.index(e),r=n.node(e);if(t==0){if(r.type.spec.isolating)return!0;continue}for(let s=r.child(t-1);;s=s.lastChild){if(s.childCount==0&&!s.inlineContent||s.isAtom||s.type.spec.isolating)return!0;if(s.inlineContent)return!1}}return!0}function V5(n){for(let e=n.depth;e>=0;e--){let t=n.indexAfter(e),r=n.node(e);if(t==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let s=r.child(t);;s=s.firstChild){if(s.childCount==0&&!s.inlineContent||s.isAtom||s.type.spec.isolating)return!0;if(s.inlineContent)return!1}}return!0}function z5(){return new Ae({props:{decorations:U5,createSelectionBetween(n,e,t){return e.pos==t.pos&&fe.valid(t)?new fe(t):null},handleClick:W5,handleKeyDown:j5,handleDOMEvents:{beforeinput:K5}}})}const j5=bd({ArrowLeft:Gr("horiz",-1),ArrowRight:Gr("horiz",1),ArrowUp:Gr("vert",-1),ArrowDown:Gr("vert",1)});function Gr(n,e){const t=n=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,s,i){let o=r.selection,a=e>0?o.$to:o.$from,l=o.empty;if(o instanceof K){if(!i.endOfTextblock(t)||a.depth==0)return!1;l=!1,a=r.doc.resolve(e>0?a.after():a.before())}let c=fe.findGapCursorFrom(a,e,l);return c?(s&&s(r.tr.setSelection(new fe(c))),!0):!1}}function W5(n,e,t){if(!n||!n.editable)return!1;let r=n.state.doc.resolve(e);if(!fe.valid(r))return!1;let s=n.posAtCoords({left:t.clientX,top:t.clientY});return s&&s.inside>-1&&z.isSelectable(n.state.doc.nodeAt(s.inside))?!1:(n.dispatch(n.state.tr.setSelection(new fe(r))),!0)}function K5(n,e){if(e.inputType!="insertCompositionText"||!(n.state.selection instanceof fe))return!1;let{$from:t}=n.state.selection,r=t.parent.contentMatchAt(t.index()).findWrapping(n.state.schema.nodes.text);if(!r)return!1;let s=S.empty;for(let o=r.length-1;o>=0;o--)s=S.from(r[o].createAndFill(null,s));let i=n.state.tr.replace(t.pos,t.pos,new I(s,0,0));return i.setSelection(K.near(i.doc.resolve(t.pos+1))),n.dispatch(i),!1}function U5(n){if(!(n.selection instanceof fe))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",pe.create(n.doc,[He.widget(n.selection.head,e,{key:"gapcursor"})])}const q5=Te.create({name:"gapCursor",addProseMirrorPlugins(){return[z5()]},extendNodeSchema(n){var e;const t={name:n.name,options:n.options,storage:n.storage};return{allowGapCursor:(e=J(_(n,"allowGapCursor",t)))!==null&&e!==void 0?e:null}}}),G5=je.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:n}){return["br",he(this.options.HTMLAttributes,n)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:n,chain:e,state:t,editor:r})=>n.first([()=>n.exitCode(),()=>n.command(()=>{const{selection:s,storedMarks:i}=t;if(s.$from.parent.type.spec.isolating)return!1;const{keepMarks:o}=this.options,{splittableMarks:a}=r.extensionManager,l=i||s.$to.parentOffset&&s.$from.marks();return e().insertContent({type:this.name}).command(({tr:c,dispatch:u})=>{if(u&&l&&o){const f=l.filter(d=>a.includes(d.type.name));c.ensureMarks(f)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),J5=je.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(n=>({tag:`h${n}`,attrs:{level:n}}))},renderHTML({node:n,HTMLAttributes:e}){return[`h${this.options.levels.includes(n.attrs.level)?n.attrs.level:this.options.levels[0]}`,he(this.options.HTMLAttributes,e),0]},addCommands(){return{setHeading:n=>({commands:e})=>this.options.levels.includes(n.level)?e.setNode(this.name,n):!1,toggleHeading:n=>({commands:e})=>this.options.levels.includes(n.level)?e.toggleNode(this.name,"paragraph",n):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((n,e)=>({...n,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(n=>Do({find:new RegExp(`^(#{1,${n}})\\s$`),type:this.type,getAttributes:{level:n}}))}});var Ns=200,be=function(){};be.prototype.append=function(e){return e.length?(e=be.from(e),!this.length&&e||e.length<Ns&&this.leafAppend(e)||this.length<Ns&&e.leafPrepend(this)||this.appendInner(e)):this};be.prototype.prepend=function(e){return e.length?be.from(e).append(this):this};be.prototype.appendInner=function(e){return new Z5(this,e)};be.prototype.slice=function(e,t){return e===void 0&&(e=0),t===void 0&&(t=this.length),e>=t?be.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,t))};be.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};be.prototype.forEach=function(e,t,r){t===void 0&&(t=0),r===void 0&&(r=this.length),t<=r?this.forEachInner(e,t,r,0):this.forEachInvertedInner(e,t,r,0)};be.prototype.map=function(e,t,r){t===void 0&&(t=0),r===void 0&&(r=this.length);var s=[];return this.forEach(function(i,o){return s.push(e(i,o))},t,r),s};be.from=function(e){return e instanceof be?e:e&&e.length?new Fd(e):be.empty};var Fd=function(n){function e(r){n.call(this),this.values=r}n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e;var t={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(s,i){return s==0&&i==this.length?this:new e(this.values.slice(s,i))},e.prototype.getInner=function(s){return this.values[s]},e.prototype.forEachInner=function(s,i,o,a){for(var l=i;l<o;l++)if(s(this.values[l],a+l)===!1)return!1},e.prototype.forEachInvertedInner=function(s,i,o,a){for(var l=i-1;l>=o;l--)if(s(this.values[l],a+l)===!1)return!1},e.prototype.leafAppend=function(s){if(this.length+s.length<=Ns)return new e(this.values.concat(s.flatten()))},e.prototype.leafPrepend=function(s){if(this.length+s.length<=Ns)return new e(s.flatten().concat(this.values))},t.length.get=function(){return this.values.length},t.depth.get=function(){return 0},Object.defineProperties(e.prototype,t),e}(be);be.empty=new Fd([]);var Z5=function(n){function e(t,r){n.call(this),this.left=t,this.right=r,this.length=t.length+r.length,this.depth=Math.max(t.depth,r.depth)+1}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},e.prototype.forEachInner=function(r,s,i,o){var a=this.left.length;if(s<a&&this.left.forEachInner(r,s,Math.min(i,a),o)===!1||i>a&&this.right.forEachInner(r,Math.max(s-a,0),Math.min(this.length,i)-a,o+a)===!1)return!1},e.prototype.forEachInvertedInner=function(r,s,i,o){var a=this.left.length;if(s>a&&this.right.forEachInvertedInner(r,s-a,Math.max(i,a)-a,o+a)===!1||i<a&&this.left.forEachInvertedInner(r,Math.min(s,a),i,o)===!1)return!1},e.prototype.sliceInner=function(r,s){if(r==0&&s==this.length)return this;var i=this.left.length;return s<=i?this.left.slice(r,s):r>=i?this.right.slice(r-i,s-i):this.left.slice(r,i).append(this.right.slice(0,s-i))},e.prototype.leafAppend=function(r){var s=this.right.leafAppend(r);if(s)return new e(this.left,s)},e.prototype.leafPrepend=function(r){var s=this.left.leafPrepend(r);if(s)return new e(s,this.right)},e.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new e(this.left,new e(this.right,r)):new e(this,r)},e}(be);const Y5=500;class tt{constructor(e,t){this.items=e,this.eventCount=t}popEvent(e,t){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let s,i;t&&(s=this.remapping(r,this.items.length),i=s.maps.length);let o=e.tr,a,l,c=[],u=[];return this.items.forEach((f,d)=>{if(!f.step){s||(s=this.remapping(r,d+1),i=s.maps.length),i--,u.push(f);return}if(s){u.push(new at(f.map));let h=f.step.map(s.slice(i)),p;h&&o.maybeStep(h).doc&&(p=o.mapping.maps[o.mapping.maps.length-1],c.push(new at(p,void 0,void 0,c.length+u.length))),i--,p&&s.appendMap(p,i)}else o.maybeStep(f.step);if(f.selection)return a=s?f.selection.map(s.slice(i)):f.selection,l=new tt(this.items.slice(0,r).append(u.reverse().concat(c)),this.eventCount-1),!1},this.items.length,0),{remaining:l,transform:o,selection:a}}addTransform(e,t,r,s){let i=[],o=this.eventCount,a=this.items,l=!s&&a.length?a.get(a.length-1):null;for(let u=0;u<e.steps.length;u++){let f=e.steps[u].invert(e.docs[u]),d=new at(e.mapping.maps[u],f,t),h;(h=l&&l.merge(d))&&(d=h,u?i.pop():a=a.slice(0,a.length-1)),i.push(d),t&&(o++,t=void 0),s||(l=d)}let c=o-r.depth;return c>Q5&&(a=X5(a,c),o-=c),new tt(a.append(i),o)}remapping(e,t){let r=new Hn;return this.items.forEach((s,i)=>{let o=s.mirrorOffset!=null&&i-s.mirrorOffset>=e?r.maps.length-s.mirrorOffset:void 0;r.appendMap(s.map,o)},e,t),r}addMaps(e){return this.eventCount==0?this:new tt(this.items.append(e.map(t=>new at(t))),this.eventCount)}rebased(e,t){if(!this.eventCount)return this;let r=[],s=Math.max(0,this.items.length-t),i=e.mapping,o=e.steps.length,a=this.eventCount;this.items.forEach(d=>{d.selection&&a--},s);let l=t;this.items.forEach(d=>{let h=i.getMirror(--l);if(h==null)return;o=Math.min(o,h);let p=i.maps[h];if(d.step){let m=e.steps[h].invert(e.docs[h]),g=d.selection&&d.selection.map(i.slice(l+1,h));g&&a++,r.push(new at(p,m,g))}else r.push(new at(p))},s);let c=[];for(let d=t;d<o;d++)c.push(new at(i.maps[d]));let u=this.items.slice(0,s).append(c).append(r),f=new tt(u,a);return f.emptyItemCount()>Y5&&(f=f.compress(this.items.length-r.length)),f}emptyItemCount(){let e=0;return this.items.forEach(t=>{t.step||e++}),e}compress(e=this.items.length){let t=this.remapping(0,e),r=t.maps.length,s=[],i=0;return this.items.forEach((o,a)=>{if(a>=e)s.push(o),o.selection&&i++;else if(o.step){let l=o.step.map(t.slice(r)),c=l&&l.getMap();if(r--,c&&t.appendMap(c,r),l){let u=o.selection&&o.selection.map(t.slice(r));u&&i++;let f=new at(c.invert(),l,u),d,h=s.length-1;(d=s.length&&s[h].merge(f))?s[h]=d:s.push(f)}}else o.map&&r--},this.items.length,0),new tt(be.from(s.reverse()),i)}}tt.empty=new tt(be.empty,0);function X5(n,e){let t;return n.forEach((r,s)=>{if(r.selection&&e--==0)return t=s,!1}),n.slice(t)}class at{constructor(e,t,r,s){this.map=e,this.step=t,this.selection=r,this.mirrorOffset=s}merge(e){if(this.step&&e.step&&!e.selection){let t=e.step.merge(this.step);if(t)return new at(t.getMap().invert(),t,this.selection)}}}class Lt{constructor(e,t,r,s,i){this.done=e,this.undone=t,this.prevRanges=r,this.prevTime=s,this.prevComposition=i}}const Q5=20;function e3(n,e,t,r){let s=t.getMeta(Wt),i;if(s)return s.historyState;t.getMeta(n3)&&(n=new Lt(n.done,n.undone,null,0,-1));let o=t.getMeta("appendedTransaction");if(t.steps.length==0)return n;if(o&&o.getMeta(Wt))return o.getMeta(Wt).redo?new Lt(n.done.addTransform(t,void 0,r,ss(e)),n.undone,mc(t.mapping.maps[t.steps.length-1]),n.prevTime,n.prevComposition):new Lt(n.done,n.undone.addTransform(t,void 0,r,ss(e)),null,n.prevTime,n.prevComposition);if(t.getMeta("addToHistory")!==!1&&!(o&&o.getMeta("addToHistory")===!1)){let a=t.getMeta("composition"),l=n.prevTime==0||!o&&n.prevComposition!=a&&(n.prevTime<(t.time||0)-r.newGroupDelay||!t3(t,n.prevRanges)),c=o?no(n.prevRanges,t.mapping):mc(t.mapping.maps[t.steps.length-1]);return new Lt(n.done.addTransform(t,l?e.selection.getBookmark():void 0,r,ss(e)),tt.empty,c,t.time,a??n.prevComposition)}else return(i=t.getMeta("rebased"))?new Lt(n.done.rebased(t,i),n.undone.rebased(t,i),no(n.prevRanges,t.mapping),n.prevTime,n.prevComposition):new Lt(n.done.addMaps(t.mapping.maps),n.undone.addMaps(t.mapping.maps),no(n.prevRanges,t.mapping),n.prevTime,n.prevComposition)}function t3(n,e){if(!e)return!1;if(!n.docChanged)return!0;let t=!1;return n.mapping.maps[0].forEach((r,s)=>{for(let i=0;i<e.length;i+=2)r<=e[i+1]&&s>=e[i]&&(t=!0)}),t}function mc(n){let e=[];return n.forEach((t,r,s,i)=>e.push(s,i)),e}function no(n,e){if(!n)return null;let t=[];for(let r=0;r<n.length;r+=2){let s=e.map(n[r],1),i=e.map(n[r+1],-1);s<=i&&t.push(s,i)}return t}function Bd(n,e,t,r){let s=ss(e),i=Wt.get(e).spec.config,o=(r?n.undone:n.done).popEvent(e,s);if(!o)return;let a=o.selection.resolve(o.transform.doc),l=(r?n.done:n.undone).addTransform(o.transform,e.selection.getBookmark(),i,s),c=new Lt(r?l:o.remaining,r?o.remaining:l,null,0,-1);t(o.transform.setSelection(a).setMeta(Wt,{redo:r,historyState:c}).scrollIntoView())}let ro=!1,gc=null;function ss(n){let e=n.plugins;if(gc!=e){ro=!1,gc=e;for(let t=0;t<e.length;t++)if(e[t].spec.historyPreserveItems){ro=!0;break}}return ro}const Wt=new Ze("history"),n3=new Ze("closeHistory");function r3(n={}){return n={depth:n.depth||100,newGroupDelay:n.newGroupDelay||500},new Ae({key:Wt,state:{init(){return new Lt(tt.empty,tt.empty,null,0,-1)},apply(e,t,r){return e3(t,r,e,n)}},config:n,props:{handleDOMEvents:{beforeinput(e,t){let r=t.inputType,s=r=="historyUndo"?$d:r=="historyRedo"?Hd:null;return s?(t.preventDefault(),s(e.state,e.dispatch)):!1}}}})}const $d=(n,e)=>{let t=Wt.getState(n);return!t||t.done.eventCount==0?!1:(e&&Bd(t,n,e,!1),!0)},Hd=(n,e)=>{let t=Wt.getState(n);return!t||t.undone.eventCount==0?!1:(e&&Bd(t,n,e,!0),!0)},s3=Te.create({name:"history",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:n,dispatch:e})=>$d(n,e),redo:()=>({state:n,dispatch:e})=>Hd(n,e)}},addProseMirrorPlugins(){return[r3(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Mod-Z":()=>this.editor.commands.undo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-Y":()=>this.editor.commands.redo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Shift-Mod-Z":()=>this.editor.commands.redo(),"Mod-я":()=>this.editor.commands.undo(),"Shift-Mod-я":()=>this.editor.commands.redo()}}}),i3=je.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:n}){return["hr",he(this.options.HTMLAttributes,n)]},addCommands(){return{setHorizontalRule:()=>({chain:n,state:e})=>{const{$to:t}=e.selection,r=n();return t.parentOffset===0?r.insertContentAt(Math.max(t.pos-2,0),{type:this.name}):r.insertContent({type:this.name}),r.command(({tr:s,dispatch:i})=>{var o;if(i){const{$to:a}=s.selection,l=a.end();if(a.nodeAfter)a.nodeAfter.isTextblock?s.setSelection(K.create(s.doc,a.pos+1)):a.nodeAfter.isBlock?s.setSelection(z.create(s.doc,a.pos)):s.setSelection(K.create(s.doc,a.pos));else{const c=(o=a.parent.type.contentMatch.defaultType)===null||o===void 0?void 0:o.create();c&&(s.insert(l,c),s.setSelection(K.create(s.doc,l+1)))}s.scrollIntoView()}return!0}).run()}}},addInputRules(){return[w5({find:/^(?:---|—-|___\s|\*\*\*\s)$/,type:this.type})]}}),o3=/(?:^|\s)((?:\*)((?:[^*]+))(?:\*))$/,a3=/(?:^|\s)((?:\*)((?:[^*]+))(?:\*))/g,l3=/(?:^|\s)((?:_)((?:[^_]+))(?:_))$/,c3=/(?:^|\s)((?:_)((?:[^_]+))(?:_))/g,Vd=st.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:n=>n.style.fontStyle!=="normal"&&null},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:n}){return["em",he(this.options.HTMLAttributes,n),0]},addCommands(){return{setItalic:()=>({commands:n})=>n.setMark(this.name),toggleItalic:()=>({commands:n})=>n.toggleMark(this.name),unsetItalic:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[Zn({find:o3,type:this.type}),Zn({find:l3,type:this.type})]},addPasteRules(){return[Cn({find:a3,type:this.type}),Cn({find:c3,type:this.type})]}}),zd=je.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:n}){return["li",he(this.options.HTMLAttributes,n),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),u3=je.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:n}){return["li",he(this.options.HTMLAttributes,n),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),yc=st.create({name:"textStyle",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"span",getAttrs:n=>n.hasAttribute("style")?{}:!1}]},renderHTML({HTMLAttributes:n}){return["span",he(this.options.HTMLAttributes,n),0]},addCommands(){return{removeEmptyTextStyle:()=>({state:n,commands:e})=>{const t=wi(n,this.type);return Object.entries(t).some(([,s])=>!!s)?!0:e.unsetMark(this.name)}}}}),bc=/^(\d+)\.\s$/,jd=je.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:n=>n.hasAttribute("start")?parseInt(n.getAttribute("start")||"",10):1}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:n}){const{start:e,...t}=n;return e===1?["ol",he(this.options.HTMLAttributes,t),0]:["ol",he(this.options.HTMLAttributes,n),0]},addCommands(){return{toggleOrderedList:()=>({commands:n,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(u3.name,this.editor.getAttributes(yc.name)).run():n.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let n=Dr({find:bc,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(n=Dr({find:bc,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(yc.name)}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1],editor:this.editor})),[n]}}),Wd=je.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:n}){return["p",he(this.options.HTMLAttributes,n),0]},addCommands(){return{setParagraph:()=>({commands:n})=>n.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),d3=/(?:^|\s)((?:~~)((?:[^~]+))(?:~~))$/,f3=/(?:^|\s)((?:~~)((?:[^~]+))(?:~~))/g,Kd=st.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:n=>n.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:n}){return["s",he(this.options.HTMLAttributes,n),0]},addCommands(){return{setStrike:()=>({commands:n})=>n.setMark(this.name),toggleStrike:()=>({commands:n})=>n.toggleMark(this.name),unsetStrike:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){const n={};return ma()?n["Mod-Shift-s"]=()=>this.editor.commands.toggleStrike():n["Ctrl-Shift-s"]=()=>this.editor.commands.toggleStrike(),n},addInputRules(){return[Zn({find:d3,type:this.type})]},addPasteRules(){return[Cn({find:f3,type:this.type})]}}),Ud=je.create({name:"text",group:"inline"}),h3=Te.create({name:"starterKit",addExtensions(){var n,e,t,r,s,i,o,a,l,c,u,f,d,h,p,m,g,y;const v=[];return this.options.blockquote!==!1&&v.push(Pd.configure((n=this.options)===null||n===void 0?void 0:n.blockquote)),this.options.bold!==!1&&v.push(Dd.configure((e=this.options)===null||e===void 0?void 0:e.bold)),this.options.bulletList!==!1&&v.push(Ld.configure((t=this.options)===null||t===void 0?void 0:t.bulletList)),this.options.code!==!1&&v.push(L5.configure((r=this.options)===null||r===void 0?void 0:r.code)),this.options.codeBlock!==!1&&v.push(_d.configure((s=this.options)===null||s===void 0?void 0:s.codeBlock)),this.options.document!==!1&&v.push(Rd.configure((i=this.options)===null||i===void 0?void 0:i.document)),this.options.dropcursor!==!1&&v.push($5.configure((o=this.options)===null||o===void 0?void 0:o.dropcursor)),this.options.gapcursor!==!1&&v.push(q5.configure((a=this.options)===null||a===void 0?void 0:a.gapcursor)),this.options.hardBreak!==!1&&v.push(G5.configure((l=this.options)===null||l===void 0?void 0:l.hardBreak)),this.options.heading!==!1&&v.push(J5.configure((c=this.options)===null||c===void 0?void 0:c.heading)),this.options.history!==!1&&v.push(s3.configure((u=this.options)===null||u===void 0?void 0:u.history)),this.options.horizontalRule!==!1&&v.push(i3.configure((f=this.options)===null||f===void 0?void 0:f.horizontalRule)),this.options.italic!==!1&&v.push(Vd.configure((d=this.options)===null||d===void 0?void 0:d.italic)),this.options.listItem!==!1&&v.push(zd.configure((h=this.options)===null||h===void 0?void 0:h.listItem)),this.options.orderedList!==!1&&v.push(jd.configure((p=this.options)===null||p===void 0?void 0:p.orderedList)),this.options.paragraph!==!1&&v.push(Wd.configure((m=this.options)===null||m===void 0?void 0:m.paragraph)),this.options.strike!==!1&&v.push(Kd.configure((g=this.options)===null||g===void 0?void 0:g.strike)),this.options.text!==!1&&v.push(Ud.configure((y=this.options)===null||y===void 0?void 0:y.text)),v}}),p3=Te.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",placeholder:"Write something …",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){return[new Ae({key:new Ze("placeholder"),props:{decorations:({doc:n,selection:e})=>{const t=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:r}=e,s=[];if(!t)return null;const i=n.type.createAndFill(),o=(i==null?void 0:i.sameMarkup(n))&&i.content.findDiffStart(n.content)===null;return n.descendants((a,l)=>{const c=r>=l&&r<=l+a.nodeSize,u=!a.isLeaf&&!a.childCount;if((c||!this.options.showOnlyCurrent)&&u){const f=[this.options.emptyNodeClass];o&&f.push(this.options.emptyEditorClass);const d=He.node(l,l+a.nodeSize,{class:f.join(" "),"data-placeholder":typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:a,pos:l,hasAnchor:c}):this.options.placeholder});s.push(d)}return this.options.includeChildren}),pe.create(n,s)}}})]}}),m3="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4vianca6w0s2x0a2z0ure5ba0by2idu3namex3narepublic11d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2ntley5rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0cast4mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dabur3d1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0ardian6cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6logistics9properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3ncaster6d0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2psy3ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2tura4vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9dnavy5lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0america6xi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0a1b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp2w2ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mögensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4finity6ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",g3="ελ1υ2бг1ел3дети4ею2католик6ом3мкд2он1сква6онлайн5рг3рус2ф2сайт3рб3укр3қаз3հայ3ישראל5קום3ابوظبي5رامكو5لاردن4بحرين5جزائر5سعودية6عليان5مغرب5مارات5یران5بارت2زار4يتك3ھارت5تونس4سودان3رية5شبكة4عراق2ب2مان4فلسطين6قطر3كاثوليك6وم3مصر2ليسيا5وريتانيا7قع4همراه5پاکستان7ڀارت4कॉम3नेट3भारत0म्3ोत5संगठन5বাংলা5ভারত2ৰত4ਭਾਰਤ4ભારત4ଭାରତ4இந்தியா6லங்கை6சிங்கப்பூர்11భారత్5ಭಾರತ4ഭാരതം5ලංකා4คอม3ไทย3ລາວ3გე2みんな3アマゾン4クラウド4グーグル4コム2ストア3セール3ファッション6ポイント4世界2中信1国1國1文网3亚马逊3企业2佛山2信息2健康2八卦2公司1益2台湾1灣2商城1店1标2嘉里0大酒店5在线2大拿2天主教3娱乐2家電2广东2微博2慈善2我爱你3手机2招聘2政务1府2新加坡2闻2时尚2書籍2机构2淡马锡3游戏2澳門2点看2移动2组织机构4网址1店1站1络2联通2谷歌2购物2通販2集团2電訊盈科4飞利浦3食品2餐厅2香格里拉3港2닷넷1컴2삼성2한국2",Yn=(n,e)=>{for(const t in e)n[t]=e[t];return n},_o="numeric",Ro="ascii",Fo="alpha",is="asciinumeric",Jr="alphanumeric",Bo="domain",qd="emoji",y3="scheme",b3="slashscheme",vc="whitespace";function v3(n,e){return n in e||(e[n]=[]),e[n]}function cn(n,e,t){e[_o]&&(e[is]=!0,e[Jr]=!0),e[Ro]&&(e[is]=!0,e[Fo]=!0),e[is]&&(e[Jr]=!0),e[Fo]&&(e[Jr]=!0),e[Jr]&&(e[Bo]=!0),e[qd]&&(e[Bo]=!0);for(const r in e){const s=v3(r,t);s.indexOf(n)<0&&s.push(n)}}function C3(n,e){const t={};for(const r in e)e[r].indexOf(n)>=0&&(t[r]=!0);return t}function Fe(n){n===void 0&&(n=null),this.j={},this.jr=[],this.jd=null,this.t=n}Fe.groups={};Fe.prototype={accepts(){return!!this.t},go(n){const e=this,t=e.j[n];if(t)return t;for(let r=0;r<e.jr.length;r++){const s=e.jr[r][0],i=e.jr[r][1];if(i&&s.test(n))return i}return e.jd},has(n,e){return e===void 0&&(e=!1),e?n in this.j:!!this.go(n)},ta(n,e,t,r){for(let s=0;s<n.length;s++)this.tt(n[s],e,t,r)},tr(n,e,t,r){r=r||Fe.groups;let s;return e&&e.j?s=e:(s=new Fe(e),t&&r&&cn(e,t,r)),this.jr.push([n,s]),s},ts(n,e,t,r){let s=this;const i=n.length;if(!i)return s;for(let o=0;o<i-1;o++)s=s.tt(n[o]);return s.tt(n[i-1],e,t,r)},tt(n,e,t,r){r=r||Fe.groups;const s=this;if(e&&e.j)return s.j[n]=e,e;const i=e;let o,a=s.go(n);if(a?(o=new Fe,Yn(o.j,a.j),o.jr.push.apply(o.jr,a.jr),o.jd=a.jd,o.t=a.t):o=new Fe,i){if(r)if(o.t&&typeof o.t=="string"){const l=Yn(C3(o.t,r),t);cn(i,l,r)}else t&&cn(i,t,r);o.t=i}return s.j[n]=o,o}};const G=(n,e,t,r,s)=>n.ta(e,t,r,s),Ke=(n,e,t,r,s)=>n.tr(e,t,r,s),Cc=(n,e,t,r,s)=>n.ts(e,t,r,s),M=(n,e,t,r,s)=>n.tt(e,t,r,s),St="WORD",$o="UWORD",Lr="LOCALHOST",Ho="TLD",Vo="UTLD",as="SCHEME",Dn="SLASH_SCHEME",va="NUM",Gd="WS",Ca="NL",Cr="OPENBRACE",kr="CLOSEBRACE",Is="OPENBRACKET",Ps="CLOSEBRACKET",Ds="OPENPAREN",Ls="CLOSEPAREN",_s="OPENANGLEBRACKET",Rs="CLOSEANGLEBRACKET",Fs="FULLWIDTHLEFTPAREN",Bs="FULLWIDTHRIGHTPAREN",$s="LEFTCORNERBRACKET",Hs="RIGHTCORNERBRACKET",Vs="LEFTWHITECORNERBRACKET",zs="RIGHTWHITECORNERBRACKET",js="FULLWIDTHLESSTHAN",Ws="FULLWIDTHGREATERTHAN",Ks="AMPERSAND",Us="APOSTROPHE",qs="ASTERISK",_t="AT",Gs="BACKSLASH",Js="BACKTICK",Zs="CARET",Ft="COLON",ka="COMMA",Ys="DOLLAR",lt="DOT",Xs="EQUALS",wa="EXCLAMATION",ct="HYPHEN",Qs="PERCENT",ei="PIPE",ti="PLUS",ni="POUND",ri="QUERY",Sa="QUOTE",Ea="SEMI",ut="SLASH",wr="TILDE",si="UNDERSCORE",Jd="EMOJI",ii="SYM";var Zd=Object.freeze({__proto__:null,WORD:St,UWORD:$o,LOCALHOST:Lr,TLD:Ho,UTLD:Vo,SCHEME:as,SLASH_SCHEME:Dn,NUM:va,WS:Gd,NL:Ca,OPENBRACE:Cr,CLOSEBRACE:kr,OPENBRACKET:Is,CLOSEBRACKET:Ps,OPENPAREN:Ds,CLOSEPAREN:Ls,OPENANGLEBRACKET:_s,CLOSEANGLEBRACKET:Rs,FULLWIDTHLEFTPAREN:Fs,FULLWIDTHRIGHTPAREN:Bs,LEFTCORNERBRACKET:$s,RIGHTCORNERBRACKET:Hs,LEFTWHITECORNERBRACKET:Vs,RIGHTWHITECORNERBRACKET:zs,FULLWIDTHLESSTHAN:js,FULLWIDTHGREATERTHAN:Ws,AMPERSAND:Ks,APOSTROPHE:Us,ASTERISK:qs,AT:_t,BACKSLASH:Gs,BACKTICK:Js,CARET:Zs,COLON:Ft,COMMA:ka,DOLLAR:Ys,DOT:lt,EQUALS:Xs,EXCLAMATION:wa,HYPHEN:ct,PERCENT:Qs,PIPE:ei,PLUS:ti,POUND:ni,QUERY:ri,QUOTE:Sa,SEMI:Ea,SLASH:ut,TILDE:wr,UNDERSCORE:si,EMOJI:Jd,SYM:ii});const Nn=/[a-z]/,so=new RegExp("\\p{L}","u"),io=new RegExp("\\p{Emoji}","u"),oo=/\d/,kc=/\s/,wc=`
`,k3="️",w3="‍";let Zr=null,Yr=null;function S3(n){n===void 0&&(n=[]);const e={};Fe.groups=e;const t=new Fe;Zr==null&&(Zr=Sc(m3)),Yr==null&&(Yr=Sc(g3)),M(t,"'",Us),M(t,"{",Cr),M(t,"}",kr),M(t,"[",Is),M(t,"]",Ps),M(t,"(",Ds),M(t,")",Ls),M(t,"<",_s),M(t,">",Rs),M(t,"（",Fs),M(t,"）",Bs),M(t,"「",$s),M(t,"」",Hs),M(t,"『",Vs),M(t,"』",zs),M(t,"＜",js),M(t,"＞",Ws),M(t,"&",Ks),M(t,"*",qs),M(t,"@",_t),M(t,"`",Js),M(t,"^",Zs),M(t,":",Ft),M(t,",",ka),M(t,"$",Ys),M(t,".",lt),M(t,"=",Xs),M(t,"!",wa),M(t,"-",ct),M(t,"%",Qs),M(t,"|",ei),M(t,"+",ti),M(t,"#",ni),M(t,"?",ri),M(t,'"',Sa),M(t,"/",ut),M(t,";",Ea),M(t,"~",wr),M(t,"_",si),M(t,"\\",Gs);const r=Ke(t,oo,va,{[_o]:!0});Ke(r,oo,r);const s=Ke(t,Nn,St,{[Ro]:!0});Ke(s,Nn,s);const i=Ke(t,so,$o,{[Fo]:!0});Ke(i,Nn),Ke(i,so,i);const o=Ke(t,kc,Gd,{[vc]:!0});M(t,wc,Ca,{[vc]:!0}),M(o,wc),Ke(o,kc,o);const a=Ke(t,io,Jd,{[qd]:!0});Ke(a,io,a),M(a,k3,a);const l=M(a,w3);Ke(l,io,a);const c=[[Nn,s]],u=[[Nn,null],[so,i]];for(let f=0;f<Zr.length;f++)Nt(t,Zr[f],Ho,St,c);for(let f=0;f<Yr.length;f++)Nt(t,Yr[f],Vo,$o,u);cn(Ho,{tld:!0,ascii:!0},e),cn(Vo,{utld:!0,alpha:!0},e),Nt(t,"file",as,St,c),Nt(t,"mailto",as,St,c),Nt(t,"http",Dn,St,c),Nt(t,"https",Dn,St,c),Nt(t,"ftp",Dn,St,c),Nt(t,"ftps",Dn,St,c),cn(as,{scheme:!0,ascii:!0},e),cn(Dn,{slashscheme:!0,ascii:!0},e),n=n.sort((f,d)=>f[0]>d[0]?1:-1);for(let f=0;f<n.length;f++){const d=n[f][0],p=n[f][1]?{[y3]:!0}:{[b3]:!0};d.indexOf("-")>=0?p[Bo]=!0:Nn.test(d)?oo.test(d)?p[is]=!0:p[Ro]=!0:p[_o]=!0,Cc(t,d,d,p)}return Cc(t,"localhost",Lr,{ascii:!0}),t.jd=new Fe(ii),{start:t,tokens:Yn({groups:e},Zd)}}function E3(n,e){const t=x3(e.replace(/[A-Z]/g,a=>a.toLowerCase())),r=t.length,s=[];let i=0,o=0;for(;o<r;){let a=n,l=null,c=0,u=null,f=-1,d=-1;for(;o<r&&(l=a.go(t[o]));)a=l,a.accepts()?(f=0,d=0,u=a):f>=0&&(f+=t[o].length,d++),c+=t[o].length,i+=t[o].length,o++;i-=f,o-=d,c-=f,s.push({t:u.t,v:e.slice(i-c,i),s:i-c,e:i})}return s}function x3(n){const e=[],t=n.length;let r=0;for(;r<t;){let s=n.charCodeAt(r),i,o=s<55296||s>56319||r+1===t||(i=n.charCodeAt(r+1))<56320||i>57343?n[r]:n.slice(r,r+2);e.push(o),r+=o.length}return e}function Nt(n,e,t,r,s){let i;const o=e.length;for(let a=0;a<o-1;a++){const l=e[a];n.j[l]?i=n.j[l]:(i=new Fe(r),i.jr=s.slice(),n.j[l]=i),n=i}return i=new Fe(t),i.jr=s.slice(),n.j[e[o-1]]=i,i}function Sc(n){const e=[],t=[];let r=0,s="0123456789";for(;r<n.length;){let i=0;for(;s.indexOf(n[r+i])>=0;)i++;if(i>0){e.push(t.join(""));for(let o=parseInt(n.substring(r,r+i),10);o>0;o--)t.pop();r+=i}else t.push(n[r]),r++}return e}const _r={defaultProtocol:"http",events:null,format:Ec,formatHref:Ec,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function xa(n,e){e===void 0&&(e=null);let t=Yn({},_r);n&&(t=Yn(t,n instanceof xa?n.o:n));const r=t.ignoreTags,s=[];for(let i=0;i<r.length;i++)s.push(r[i].toUpperCase());this.o=t,e&&(this.defaultRender=e),this.ignoreTags=s}xa.prototype={o:_r,ignoreTags:[],defaultRender(n){return n},check(n){return this.get("validate",n.toString(),n)},get(n,e,t){const r=e!=null;let s=this.o[n];return s&&(typeof s=="object"?(s=t.t in s?s[t.t]:_r[n],typeof s=="function"&&r&&(s=s(e,t))):typeof s=="function"&&r&&(s=s(e,t.t,t)),s)},getObj(n,e,t){let r=this.o[n];return typeof r=="function"&&e!=null&&(r=r(e,t.t,t)),r},render(n){const e=n.render(this);return(this.get("render",null,n)||this.defaultRender)(e,n.t,n)}};function Ec(n){return n}function Yd(n,e){this.t="token",this.v=n,this.tk=e}Yd.prototype={isLink:!1,toString(){return this.v},toHref(n){return this.toString()},toFormattedString(n){const e=this.toString(),t=n.get("truncate",e,this),r=n.get("format",e,this);return t&&r.length>t?r.substring(0,t)+"…":r},toFormattedHref(n){return n.get("formatHref",this.toHref(n.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(n){return n===void 0&&(n=_r.defaultProtocol),{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(n),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(n){return{type:this.t,value:this.toFormattedString(n),isLink:this.isLink,href:this.toFormattedHref(n),start:this.startIndex(),end:this.endIndex()}},validate(n){return n.get("validate",this.toString(),this)},render(n){const e=this,t=this.toHref(n.get("defaultProtocol")),r=n.get("formatHref",t,this),s=n.get("tagName",t,e),i=this.toFormattedString(n),o={},a=n.get("className",t,e),l=n.get("target",t,e),c=n.get("rel",t,e),u=n.getObj("attributes",t,e),f=n.getObj("events",t,e);return o.href=r,a&&(o.class=a),l&&(o.target=l),c&&(o.rel=c),u&&Yn(o,u),{tagName:s,attributes:o,content:i,eventListeners:f}}};function Si(n,e){class t extends Yd{constructor(s,i){super(s,i),this.t=n}}for(const r in e)t.prototype[r]=e[r];return t.t=n,t}const xc=Si("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),Mc=Si("text"),M3=Si("nl"),Xr=Si("url",{isLink:!0,toHref(n){return n===void 0&&(n=_r.defaultProtocol),this.hasProtocol()?this.v:`${n}://${this.v}`},hasProtocol(){const n=this.tk;return n.length>=2&&n[0].t!==Lr&&n[1].t===Ft}}),Ue=n=>new Fe(n);function T3(n){let{groups:e}=n;const t=e.domain.concat([Ks,qs,_t,Gs,Js,Zs,Ys,Xs,ct,va,Qs,ei,ti,ni,ut,ii,wr,si]),r=[Us,Ft,ka,lt,wa,ri,Sa,Ea,_s,Rs,Cr,kr,Ps,Is,Ds,Ls,Fs,Bs,$s,Hs,Vs,zs,js,Ws],s=[Ks,Us,qs,Gs,Js,Zs,Ys,Xs,ct,Cr,kr,Qs,ei,ti,ni,ri,ut,ii,wr,si],i=Ue(),o=M(i,wr);G(o,s,o),G(o,e.domain,o);const a=Ue(),l=Ue(),c=Ue();G(i,e.domain,a),G(i,e.scheme,l),G(i,e.slashscheme,c),G(a,s,o),G(a,e.domain,a);const u=M(a,_t);M(o,_t,u),M(l,_t,u),M(c,_t,u);const f=M(o,lt);G(f,s,o),G(f,e.domain,o);const d=Ue();G(u,e.domain,d),G(d,e.domain,d);const h=M(d,lt);G(h,e.domain,d);const p=Ue(xc);G(h,e.tld,p),G(h,e.utld,p),M(u,Lr,p);const m=M(d,ct);G(m,e.domain,d),G(p,e.domain,d),M(p,lt,h),M(p,ct,m);const g=M(p,Ft);G(g,e.numeric,xc);const y=M(a,ct),v=M(a,lt);G(y,e.domain,a),G(v,s,o),G(v,e.domain,a);const w=Ue(Xr);G(v,e.tld,w),G(v,e.utld,w),G(w,e.domain,a),G(w,s,o),M(w,lt,v),M(w,ct,y),M(w,_t,u);const $=M(w,Ft),B=Ue(Xr);G($,e.numeric,B);const x=Ue(Xr),j=Ue();G(x,t,x),G(x,r,j),G(j,t,x),G(j,r,j),M(w,ut,x),M(B,ut,x);const se=M(l,Ft),T=M(c,Ft),F=M(T,ut),A=M(F,ut);G(l,e.domain,a),M(l,lt,v),M(l,ct,y),G(c,e.domain,a),M(c,lt,v),M(c,ct,y),G(se,e.domain,x),M(se,ut,x),G(A,e.domain,x),G(A,t,x),M(A,ut,x);const C=[[Cr,kr],[Is,Ps],[Ds,Ls],[_s,Rs],[Fs,Bs],[$s,Hs],[Vs,zs],[js,Ws]];for(let k=0;k<C.length;k++){const[D,U]=C[k],X=M(x,D);M(j,D,X),M(X,U,x);const q=Ue(Xr);G(X,t,q);const ie=Ue();G(X,r),G(q,t,q),G(q,r,ie),G(ie,t,q),G(ie,r,ie),M(q,U,x),M(ie,U,x)}return M(i,Lr,w),M(i,Ca,M3),{start:i,tokens:Zd}}function O3(n,e,t){let r=t.length,s=0,i=[],o=[];for(;s<r;){let a=n,l=null,c=null,u=0,f=null,d=-1;for(;s<r&&!(l=a.go(t[s].t));)o.push(t[s++]);for(;s<r&&(c=l||a.go(t[s].t));)l=null,a=c,a.accepts()?(d=0,f=a):d>=0&&d++,s++,u++;if(d<0)s-=u,s<r&&(o.push(t[s]),s++);else{o.length>0&&(i.push(ao(Mc,e,o)),o=[]),s-=d,u-=d;const h=f.t,p=t.slice(s-u,s);i.push(ao(h,e,p))}}return o.length>0&&i.push(ao(Mc,e,o)),i}function ao(n,e,t){const r=t[0].s,s=t[t.length-1].e,i=e.slice(r,s);return new n(i,t)}const A3=typeof console<"u"&&console&&console.warn||(()=>{}),N3="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",de={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function I3(){Fe.groups={},de.scanner=null,de.parser=null,de.tokenQueue=[],de.pluginQueue=[],de.customSchemes=[],de.initialized=!1}function Tc(n,e){if(e===void 0&&(e=!1),de.initialized&&A3(`linkifyjs: already initialized - will not register custom scheme "${n}" ${N3}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(n))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);de.customSchemes.push([n,e])}function P3(){de.scanner=S3(de.customSchemes);for(let n=0;n<de.tokenQueue.length;n++)de.tokenQueue[n][1]({scanner:de.scanner});de.parser=T3(de.scanner.tokens);for(let n=0;n<de.pluginQueue.length;n++)de.pluginQueue[n][1]({scanner:de.scanner,parser:de.parser});de.initialized=!0}function D3(n){return de.initialized||P3(),O3(de.parser.start,n,E3(de.scanner.start,n))}function Ma(n,e,t){if(e===void 0&&(e=null),t===void 0&&(t=null),e&&typeof e=="object"){if(t)throw Error(`linkifyjs: Invalid link type ${e}; must be a string`);t=e,e=null}const r=new xa(t),s=D3(n),i=[];for(let o=0;o<s.length;o++){const a=s[o];a.isLink&&(!e||a.t===e)&&r.check(a)&&i.push(a.toFormattedObject(r))}return i}function L3(n){return new Ae({key:new Ze("autolink"),appendTransaction:(e,t,r)=>{const s=e.some(c=>c.docChanged)&&!t.doc.eq(r.doc),i=e.some(c=>c.getMeta("preventAutolink"));if(!s||i)return;const{tr:o}=r,a=_2(t.doc,[...e]);if(W2(a).forEach(({newRange:c})=>{const u=F2(r.doc,c,h=>h.isTextblock);let f,d;if(u.length>1?(f=u[0],d=r.doc.textBetween(f.pos,f.pos+f.node.nodeSize,void 0," ")):u.length&&r.doc.textBetween(c.from,c.to," "," ").endsWith(" ")&&(f=u[0],d=r.doc.textBetween(f.pos,c.to,void 0," ")),f&&d){const h=d.split(" ").filter(g=>g!=="");if(h.length<=0)return!1;const p=h[h.length-1],m=f.pos+d.lastIndexOf(p);if(!p)return!1;Ma(p).filter(g=>g.isLink).map(g=>({...g,from:m+g.start+1,to:m+g.end+1})).filter(g=>r.schema.marks.code?!r.doc.rangeHasMark(g.from,g.to,r.schema.marks.code):!0).filter(g=>n.validate?n.validate(g.value):!0).forEach(g=>{ya(g.from,g.to,r.doc).some(y=>y.mark.type===n.type)||o.addMark(g.from,g.to,n.type.create({href:g.href}))})}}),!!o.steps.length)return o}})}function _3(n){return new Ae({key:new Ze("handleClickLink"),props:{handleClick:(e,t,r)=>{var s,i;if(r.button!==0||r.target.nodeName!=="A")return!1;const a=Id(e.state,n.type.name),l=r.target,c=(s=l==null?void 0:l.href)!==null&&s!==void 0?s:a.href,u=(i=l==null?void 0:l.target)!==null&&i!==void 0?i:a.target;return l&&c?(e.editable&&window.open(c,u),!0):!1}}})}function R3(n){return new Ae({key:new Ze("handlePasteLink"),props:{handlePaste:(e,t,r)=>{var s;const{state:i}=e,{selection:o}=i,{empty:a}=o;if(a)return!1;let l="";r.content.forEach(p=>{l+=p.textContent});const c=Ma(l).find(p=>p.isLink&&p.value===l);if(!l||!c)return!1;const u=(s=t.clipboardData)===null||s===void 0?void 0:s.getData("text/html"),f=/href="([^"]*)"/,d=u==null?void 0:u.match(f),h=d?d[1]:c.href;return n.editor.commands.setMark(n.type,{href:h}),!0}}})}const F3=st.create({name:"link",priority:1e3,keepOnSplit:!1,onCreate(){this.options.protocols.forEach(n=>{if(typeof n=="string"){Tc(n);return}Tc(n.scheme,n.optionalSlashes)})},onDestroy(){I3()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,linkOnPaste:!0,autolink:!0,protocols:[],HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},validate:void 0}},addAttributes(){return{href:{default:null},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:'a[href]:not([href *= "javascript:" i])'}]},renderHTML({HTMLAttributes:n}){var e;return!((e=n.href)===null||e===void 0)&&e.startsWith("javascript:")?["a",he(this.options.HTMLAttributes,{...n,href:""}),0]:["a",he(this.options.HTMLAttributes,n),0]},addCommands(){return{setLink:n=>({chain:e})=>e().setMark(this.name,n).setMeta("preventAutolink",!0).run(),toggleLink:n=>({chain:e})=>e().toggleMark(this.name,n,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run(),unsetLink:()=>({chain:n})=>n().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[Cn({find:n=>Ma(n).filter(e=>this.options.validate?this.options.validate(e.value):!0).filter(e=>e.isLink).map(e=>({text:e.value,index:e.start,data:e})),type:this.type,getAttributes:(n,e)=>{var t,r;const s=(t=e==null?void 0:e.clipboardData)===null||t===void 0?void 0:t.getData("text/html"),i=/href="([^"]*)"/,o=s==null?void 0:s.match(i);return o?{href:o[1]}:{href:(r=n.data)===null||r===void 0?void 0:r.href}}})]},addProseMirrorPlugins(){const n=[];return this.options.autolink&&n.push(L3({type:this.type,validate:this.options.validate})),this.options.openOnClick&&n.push(_3({type:this.type})),this.options.linkOnPaste&&n.push(R3({editor:this.editor,type:this.type})),n}}),B3={class:"editor-footer-container"},$3={class:"editor-footer-button-left"},H3=["disabled"],V3=["disabled"],z3=["disabled"],j3=b("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[b("path",{d:"M2.2832 12.9336V9.71681L7.2664 8.00001L2.2832 6.28321V3.06641L14.5664 8.00001L2.2832 12.9336Z",fill:"white"})],-1),W3=ee({__name:"EditorFooter",props:{chatDisabled:{type:Boolean},smsDisabled:{type:Boolean},sendDisabled:{type:Boolean},smsIsActive:{type:Boolean}},emits:["send-message","send-sms"],setup(n,{emit:e}){const t=e,{t:r}=Ve(),s=Br(),{smsButtonIsDisabled:i,isUS:o}=Wo(),{numbersFrom:a,numbersTo:l}=$r(),c=kn();function u(){s.chatIsActiveIsTruthy()}function f(){s.chatIsActiveIsFalsy()}function d(){if(s.chatIsActive){t("send-message");return}t("send-sms")}const h=Nc("chatDisabled"),p=ce(()=>m=>{const g=c.name,y=!!c.query.number;return g===W.SendSms||g===W.FavoritePhone||y?!1:g===W.Directory||g===W.FavoriteDirectory?o.value?!0:a.value.length===0||l.value.length===0:g===W.Group||g===W.FavoriteGroup?!0:m||i.value});return(m,g)=>(E(),R("div",B3,[b("div",$3,[b("button",{class:Fn(["editor-footer-button-chat",{"chat-is-not-active":!N(s).chatIsActive}]),disabled:m.chatDisabled||N(h),onClick:u}," CHAT ",10,H3),b("button",{class:Fn(["editor-footer-button-sms",{"chat-is-active":N(s).chatIsActive}]),disabled:p.value(m.smsDisabled),onClick:f}," SMS ",10,V3)]),b("button",{disabled:m.sendDisabled,class:Fn(["editor-footer-button-send",{"chat-is-not-active":!N(s).chatIsActive}]),onClick:d,onKeydown:Ic(d,["enter"])},[b("span",null,Y(N(r)("Send")),1),j3],42,z3)]))}}),K3=n=>(Ct("data-v-5e4ba8ab"),n=n(),kt(),n),U3=["title"],q3=K3(()=>b("svg",{width:"16",height:"17",viewBox:"0 0 16 17",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[b("path",{d:"M0.799805 14.1L7.9998 2.10001L15.1998 14.1H0.799805ZM2.91647 12.9H13.0831L7.9998 4.43334L2.91647 12.9ZM7.99629 12.1C8.1653 12.1 8.30814 12.0428 8.4248 11.9285C8.54147 11.8142 8.5998 11.6725 8.5998 11.5035C8.5998 11.3345 8.54264 11.1917 8.42832 11.075C8.31399 10.9583 8.17232 10.9 8.00332 10.9C7.83431 10.9 7.69147 10.9572 7.5748 11.0715C7.45814 11.1858 7.3998 11.3275 7.3998 11.4965C7.3998 11.6655 7.45697 11.8083 7.57129 11.925C7.68562 12.0417 7.82729 12.1 7.99629 12.1ZM7.3998 10.1H8.5998V6.90001H7.3998V10.1Z",fill:"#DC001E"})],-1)),G3=[q3],J3=ee({__name:"UploadFailed",props:{title:{},index:{},file:{}},emits:["try-again"],setup(n,{emit:e}){const t=e;function r(s,i){s.tryAgain&&t("try-again",i)}return(s,i)=>{const o=Ef("tippy");return es((E(),R("button",{type:"button",class:"upload-failed-button","data-bs-toggle":"tooltip","data-bs-placement":"top",title:s.title,onClick:i[0]||(i[0]=a=>r(s.file,s.index))},G3,8,U3)),[[o,{}]])}}}),Z3=te(J3,[["__scopeId","data-v-5e4ba8ab"]]),Y3={class:"progress-bar attachment-progress"},X3=["value"],Q3=ee({__name:"AttachmentProgress",props:{progress:{}},setup(n){ai(t=>({ee98e318:e.progress}));const e=n;return(t,r)=>(E(),R("div",Y3,[b("progress",{min:"0",max:"100",value:t.progress},null,8,X3)]))}}),e8=te(Q3,[["__scopeId","data-v-3f23e4f6"]]),t8=n=>(Ct("data-v-6cbd1252"),n=n(),kt(),n),n8={class:"attachments-description-text"},r8={key:0,class:"attachments-action"},s8=t8(()=>b("svg",{width:"16",height:"17",viewBox:"0 0 16 17",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[b("path",{d:"M5.2002 14.1C4.8702 14.1 4.5877 13.9825 4.3527 13.7475C4.1177 13.5125 4.0002 13.23 4.0002 12.9V4.89999H3.2002V3.69999H6.4002V2.89999H9.6002V3.69999H12.8002V4.89999H12.0002V12.8928C12.0002 13.2309 11.8827 13.5167 11.6477 13.75C11.4127 13.9833 11.1302 14.1 10.8002 14.1H5.2002ZM10.8002 4.89999H5.2002V12.9H10.8002V4.89999ZM6.4002 11.7H7.6002V6.09999H6.4002V11.7ZM8.4002 11.7H9.6002V6.09999H8.4002V11.7Z",fill:"#0676C5"})],-1)),i8=[s8],o8=ee({__name:"AttachmentsItem",props:{file:{},index:{}},emits:["remove-item","upload-finished","try-again"],setup(n,{emit:e}){const t=n,r=e,{findIconByName:s}=_e(),i=re(!1);function o(){i.value=!0}function a(){i.value=!1}return Fr(()=>{t.file.progress===100&&r("upload-finished",t.file.id)}),(l,c)=>(E(),R("div",{class:"attachments-item",onMouseover:o,onMouseleave:a},[b("div",{class:Fn(["attachments-description",{"upload-progress":l.file.progress<100}])},[(E(),ue(Pc(N(s)(l.file.name)),{progress:l.file.progress},null,8,["progress"])),b("span",n8,Y(l.file.name),1)],2),i.value||l.file.progress<100?(E(),R("div",r8,[l.file.progress===100?(E(),R(wn,{key:0},[b("button",{class:"attachments-button",onClick:c[0]||(c[0]=u=>r("remove-item",l.file.id))},i8),!l.file.success&&l.file.message?(E(),ue(Z3,{key:0,title:l.file.message,index:l.index,file:l.file,onTryAgain:c[1]||(c[1]=u=>r("try-again",u))},null,8,["title","index","file"])):ne("",!0)],64)):ne("",!0),l.file.progress<100?(E(),ue(e8,{key:1,progress:l.file.progress},null,8,["progress"])):ne("",!0)])):ne("",!0)],32))}}),a8=te(o8,[["__scopeId","data-v-6cbd1252"]]),l8={class:"attachments-container"},c8={class:"attachments-list"},u8=ee({__name:"BaseAttachments",props:{filesData:{}},emits:["remove-item","try-again"],setup(n,{emit:e}){const t=n,r=e,s=re();function i(a){r("remove-item",a)}function o(a){const l=t.filesData.findIndex(c=>c.id===a);l!==-1&&(s.value.$el.scrollTop=28*(l+1))}return Sr(()=>t.filesData,a=>{const l=a.find(u=>u.progress<100),c=t.filesData.findIndex(u=>u.id===(l==null?void 0:l.id));c!==-1&&(s.value.$el.scrollTop=28*(c+1))},{deep:!0}),(a,l)=>{const c=Lc("PerfectScrollbar");return E(),R("div",l8,[Ge(c,{ref_key:"scrollbar",ref:s},{default:Dc(()=>[b("div",c8,[(E(!0),R(wn,null,li(a.filesData,(u,f)=>(E(),ue(a8,{key:u.id,index:f,file:u,onRemoveItem:i,onUploadFinished:o,onTryAgain:l[0]||(l[0]=d=>r("try-again",d))},null,8,["index","file"]))),128))])]),_:1},512)])}}}),d8=te(u8,[["__scopeId","data-v-e355e03e"]]),f8=n=>(Ct("data-v-c1e02734"),n=n(),kt(),n),h8={key:0},p8=f8(()=>b("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none"},[b("path",{d:"M18 6L6 18",stroke:"#697E8E","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),b("path",{d:"M6 6L18 18",stroke:"#697E8E","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),m8=[p8],g8={class:"attachment-limit-reached-body-container"},y8={class:"attachment-limit-reached-body-content"},b8={class:"attachment-limit-reached-footer"},v8=ee({__name:"AttachmentLimitReached",emits:["close"],setup(n,{emit:e}){const t=e,{t:r}=Ve(),[s,i]=At(En({id:crypto.randomUUID(),onClose(){t("close")},onEsc(){t("close")},onOutsideClick(){t("close")}})),o=ce(()=>Sn(s.value,i,Ot));return ze(()=>{o.value.open()}),(a,l)=>(E(),ue(Ut,{to:"body"},[o.value.isOpen?(E(),R("div",h8,[b("div",V(o.value.backdropProps,{class:"attachment-limit-reached-backdrop"}),null,16),b("div",V(o.value.positionerProps,{class:"attachment-limit-reached-container"}),[b("div",V(o.value.contentProps,{class:"attachment-limit-reached-content"}),[b("h2",V(o.value.titleProps,{class:"attachment-limit-reached-title"}),Y(N(r)("Attachment limit reached")),17),b("button",V(o.value.closeTriggerProps,{class:"attachment-limit-reached-close"}),m8,16),b("div",g8,[b("div",y8,[b("span",null,Y(N(r)("You can send up to 10 attachments at once.")),1)])]),b("div",b8,[b("button",V(o.value.closeTriggerProps,{class:"primary-btn text-uppercase"}),Y(N(r)("Close")),17)])],16)],16)])):ne("",!0)]))}}),C8=te(v8,[["__scopeId","data-v-c1e02734"]]),k8=n=>(Ct("data-v-692b9fee"),n=n(),kt(),n),w8={key:0},S8=k8(()=>b("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none"},[b("path",{d:"M18 6L6 18",stroke:"#697E8E","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),b("path",{d:"M6 6L18 18",stroke:"#697E8E","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),E8=[S8],x8={class:"attachment-file-size-exceeded-body-container"},M8={class:"attachment-file-size-exceeded-body-content"},T8={class:"attachment-file-size-exceeded-footer"},O8=ee({__name:"AttachmentFileSizeExceeded",props:{fileData:{}},emits:["close"],setup(n,{emit:e}){const t=e,{t:r}=Ve(),s=jo(),[i,o]=At(En({id:crypto.randomUUID(),onClose(){t("close")},onEsc(){t("close")},onOutsideClick(){t("close")}})),a=ce(()=>Sn(i.value,o,Ot));return ze(()=>{a.value.open()}),(l,c)=>(E(),ue(Ut,{to:"body"},[a.value.isOpen?(E(),R("div",w8,[b("div",V(a.value.backdropProps,{class:"attachment-file-size-exceeded-backdrop"}),null,16),b("div",V(a.value.positionerProps,{class:"attachment-file-size-exceeded-container"}),[b("div",V(a.value.contentProps,{class:"attachment-file-size-exceeded-content"}),[b("h2",V(a.value.titleProps,{class:"attachment-file-size-exceeded-title"}),Y(N(r)("File size exceeded")),17),b("button",V(a.value.closeTriggerProps,{class:"attachment-file-size-exceeded-close"}),E8,16),b("div",x8,[b("div",M8,[b("span",null,[b("strong",null,Y(l.fileData.name),1),oi(Y(N(r)(` exceeds the maximum file size of ${N(xf)(N(s).maxSizeFileBytes)} per attachment`)),1)])])]),b("div",T8,[b("button",V(a.value.closeTriggerProps,{class:"primary-btn text-uppercase"}),Y(N(r)("Close")),17)])],16)],16)])):ne("",!0)]))}}),A8=te(O8,[["__scopeId","data-v-692b9fee"]]),N8=n=>(Ct("data-v-6f7681e8"),n=n(),kt(),n),I8={key:0},P8=N8(()=>b("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none"},[b("path",{d:"M18 6L6 18",stroke:"#697E8E","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),b("path",{d:"M6 6L18 18",stroke:"#697E8E","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),D8=[P8],L8={class:"attachment-not-allowed-body-container"},_8={class:"attachment-not-allowed-body-content"},R8={class:"attachment-not-allowed-footer"},F8=ee({__name:"AttachmentNotAllowed",props:{fileData:{}},emits:["close"],setup(n,{emit:e}){const t=e,{t:r}=Ve(),[s,i]=At(En({id:crypto.randomUUID(),onClose(){t("close")},onEsc(){t("close")},onOutsideClick(){t("close")}})),o=ce(()=>Sn(s.value,i,Ot));return ze(()=>{o.value.open()}),(a,l)=>(E(),ue(Ut,{to:"body"},[o.value.isOpen?(E(),R("div",I8,[b("div",V(o.value.backdropProps,{class:"attachment-not-allowed-backdrop"}),null,16),b("div",V(o.value.positionerProps,{class:"attachment-not-allowed-container"}),[b("div",V(o.value.contentProps,{class:"attachment-not-allowed-content"}),[b("h2",V(o.value.titleProps,{class:"attachment-not-allowed-title"}),Y(N(r)("File not allowed")),17),b("button",V(o.value.closeTriggerProps,{class:"attachment-not-allowed-close"}),D8,16),b("div",L8,[b("div",_8,[b("span",null,[b("strong",null,Y(a.fileData.name),1),oi(Y(N(r)(" is not allowed to be sent as an attachment.")),1)])])]),b("div",R8,[b("button",V(o.value.closeTriggerProps,{class:"primary-btn text-uppercase"}),Y(N(r)("Close")),17)])],16)],16)])):ne("",!0)]))}}),B8=te(F8,[["__scopeId","data-v-6f7681e8"]]),$8={class:"drop-zone-container"},H8={class:"drop-zone-main"},V8=Mf('<svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-d1ff7d70><g clip-path="url(#clip0_4135_25604)" data-v-d1ff7d70><path d="M6 28C5.45 28 4.97917 27.8042 4.5875 27.4125C4.19583 27.0208 4 26.55 4 26V11.3333C4 10.7833 4.19583 10.3125 4.5875 9.92083C4.97917 9.52917 5.45 9.33333 6 9.33333H13V11.3333H6V26H26V11.3333H19V9.33333H26C26.55 9.33333 27.0208 9.52917 27.4125 9.92083C27.8042 10.3125 28 10.7833 28 11.3333V26C28 26.55 27.8042 27.0208 27.4125 27.4125C27.0208 27.8042 26.55 28 26 28H6ZM16 21.2333L10.6 15.8333L12.0333 14.4L15 17.3667V0H17V17.3667L19.9667 14.4L21.4 15.8333L16 21.2333Z" fill="#0676C5" data-v-d1ff7d70></path></g><defs data-v-d1ff7d70><clipPath id="clip0_4135_25604" data-v-d1ff7d70><rect width="32" height="32" fill="white" data-v-d1ff7d70></rect></clipPath></defs></svg>',1),z8={class:"drop-zone-text"},j8=ee({__name:"DropZone",setup(n){const{t:e}=Ve();return(t,r)=>(E(),R("div",$8,[b("div",H8,[V8,b("span",z8,Y(N(e)("Drop your files here")),1)])]))}}),W8=te(j8,[["__scopeId","data-v-d1ff7d70"]]),K8=["disabled"],U8={inheritAttrs:!1},q8=ee({...U8,__name:"BaseFormat",props:{icon:{},formatName:{},editor:{}},setup(n){const e=kn(),t=ce(()=>e.name===W.Sms||e.name===W.FavoriteContact||e.name===W.Contact);return(r,s)=>(E(),R("button",V(r.$attrs,{class:["base-format-button",{active:r.editor.isActive(r.formatName)}],disabled:t.value}),[(E(),ue(Pc(r.icon)))],16,K8))}}),G8=te(q8,[["__scopeId","data-v-4e566730"]]),J8={},Z8={width:"22",height:"22",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Y8=b("rect",{width:"18",height:"18",fill:"transparent"},null,-1),X8=b("path",{d:"M7.92 5.78V8.13C7.92 11.81 5.14 12.75 5.03 12.79C4.95 12.82 4.87 12.83 4.79 12.83C4.46 12.83 4.15 12.62 4.04 12.29C3.91 11.88 4.13 11.44 4.54 11.3C4.6 11.28 5.97 10.77 6.28 8.91H4.78C4.35 8.91 4 8.56 4 8.13V5.78C4 5.35 4.35 5 4.78 5H7.13C7.56 5 7.91 5.35 7.91 5.78H7.92ZM12.62 5H10.27C9.84 5 9.49 5.35 9.49 5.78V8.13C9.49 8.56 9.84 8.91 10.27 8.91H11.77C11.46 10.77 10.09 11.28 10.03 11.3C9.62 11.43 9.39 11.87 9.53 12.29C9.64 12.62 9.94 12.83 10.28 12.83C10.36 12.83 10.44 12.82 10.52 12.79C10.64 12.75 13.41 11.81 13.41 8.13V5.78C13.41 5.35 13.06 5 12.63 5H12.62Z",fill:"#444444"},null,-1),Q8=[Y8,X8];function ey(n,e){return E(),R("svg",Z8,Q8)}const ty=te(J8,[["render",ey]]),ny={},ry={width:"22",height:"22",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg"},sy=b("rect",{width:"18",height:"18",fill:"transparent"},null,-1),iy=b("path",{d:"M11.53 8.33C11.85 7.88 12.05 7.33 12.05 6.74C12.05 5.23 10.82 4 9.31 4H5.78C5.35 4 5 4.35 5 4.78V12.61C5 13.04 5.35 13.39 5.78 13.39H10.09C11.6 13.39 12.83 12.16 12.83 10.65C12.83 9.67 12.31 8.81 11.53 8.33ZM6.57 5.56H9.31C9.96 5.56 10.48 6.09 10.48 6.73C10.48 7.37 9.95 7.9 9.31 7.9H6.57V5.56ZM10.09 11.83H6.57V9.48H10.09C10.74 9.48 11.26 10.01 11.26 10.65C11.26 11.29 10.73 11.82 10.09 11.82V11.83Z",fill:"#444444"},null,-1),oy=[sy,iy];function ay(n,e){return E(),R("svg",ry,oy)}const ly=te(ny,[["render",ay]]),cy={},uy={width:"22",height:"22",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg"},dy=b("rect",{width:"18",height:"18",fill:"transparent"},null,-1),fy=b("path",{d:"M12.05 4H7.35C6.92 4 6.57 4.35 6.57 4.78C6.57 5.21 6.92 5.56 7.35 5.56H8.74L7.49 11.83H5.78C5.35 11.83 5 12.18 5 12.61C5 13.04 5.35 13.39 5.78 13.39H10.48C10.91 13.39 11.26 13.04 11.26 12.61C11.26 12.18 10.91 11.83 10.48 11.83H9.09L10.34 5.56H12.05C12.48 5.56 12.83 5.21 12.83 4.78C12.83 4.35 12.48 4 12.05 4Z",fill:"#444444"},null,-1),hy=[dy,fy];function py(n,e){return E(),R("svg",uy,hy)}const my=te(cy,[["render",py]]),gy={},yy={width:"22",height:"22",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg"},by=b("rect",{width:"18",height:"18",fill:"transparent"},null,-1),vy=b("path",{d:"M4.39169 9.47C4.19169 9.47 4.01169 9.31 4.00169 9.11C3.98169 8.89 4.14169 8.71 4.36169 8.69L14.5417 7.91C14.7717 7.89 14.9417 8.06 14.9617 8.27C14.9817 8.49 14.8217 8.67 14.6017 8.69L4.42169 9.47C4.42169 9.47 4.40169 9.47 4.39169 9.47ZM9.49169 7.9C7.56169 7.74 7.13169 7.52 7.13169 6.73C7.13169 6.18 8.14169 5.56 9.48169 5.56C10.7117 5.56 11.6417 6.09 11.8017 6.59C11.9517 6.98 12.3817 7.19 12.7717 7.06C13.1617 6.93 13.3917 6.51 13.2817 6.11C12.8817 4.87 11.3117 4 9.47169 4C7.28169 4 5.55169 5.2 5.55169 6.74C5.53169 7.25 5.67169 7.75 5.94169 8.18L9.47169 7.91L9.49169 7.9ZM9.47169 9.47C11.4117 9.63 11.8317 9.85 11.8317 10.65C11.8317 11.2 10.8217 11.82 9.48169 11.82C8.25169 11.82 7.31169 11.29 7.15169 10.79C7.07169 10.51 6.85169 10.3 6.57169 10.23C6.29169 10.16 5.99169 10.26 5.80169 10.48C5.61169 10.7 5.56169 11 5.66169 11.27C6.06169 12.51 7.63169 13.38 9.47169 13.38C11.6617 13.38 13.3917 12.18 13.3917 10.64C13.4117 10.13 13.2717 9.63 13.0017 9.2L9.46169 9.47H9.47169Z",fill:"#444444"},null,-1),Cy=[by,vy];function ky(n,e){return E(),R("svg",yy,Cy)}const wy=te(gy,[["render",ky]]),Sy={},Ey={width:"22",height:"22",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg"},xy=b("rect",{width:"18",height:"18",fill:"transparent"},null,-1),My=b("path",{d:"M6.3525 11.272C6.1525 11.272 5.9525 11.192 5.8025 11.042L4.2325 9.47198C3.9225 9.16198 3.9225 8.67198 4.2325 8.36198L5.8025 6.79198C6.1125 6.48198 6.6025 6.48198 6.9125 6.79198C7.2225 7.10198 7.2225 7.59198 6.9125 7.90198L5.90251 8.91198L6.9125 9.92198C7.2225 10.232 7.2225 10.722 6.9125 11.032C6.7625 11.182 6.56251 11.262 6.3625 11.262L6.3525 11.272ZM13.1725 11.042L14.7425 9.47198C15.0525 9.16198 15.0525 8.67198 14.7425 8.36198L13.1725 6.79198C12.8625 6.48198 12.3725 6.48198 12.0625 6.79198C11.7525 7.10198 11.7525 7.59198 12.0625 7.90198L13.0725 8.91198L12.0625 9.92198C11.7525 10.232 11.7525 10.722 12.0625 11.032C12.2125 11.182 12.4125 11.262 12.6125 11.262C12.8125 11.262 13.0125 11.182 13.1625 11.032L13.1725 11.042ZM9.4625 12.242L11.0325 5.97198C11.1325 5.55198 10.8825 5.13198 10.4625 5.02198C10.0525 4.92198 9.6225 5.17198 9.5125 5.59198L7.9425 11.862C7.8425 12.282 8.0925 12.702 8.5125 12.812C8.5725 12.832 8.6425 12.832 8.7025 12.832C9.0525 12.832 9.3725 12.592 9.4625 12.242Z",fill:"#444444"},null,-1),Ty=[xy,My];function Oy(n,e){return E(),R("svg",Ey,Ty)}const Ay=te(Sy,[["render",Oy]]),Ny={},Iy={width:"22",height:"22",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Py=b("rect",{width:"18",height:"18",fill:"transparent"},null,-1),Dy=b("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M6.35001 4.78C6.35001 4.35 6.7 4 7.13 4H14.18C14.61 4 14.96 4.35 14.96 4.78C14.96 5.21 14.61 5.56 14.18 5.56H7.13C6.7 5.56 6.35001 5.21 6.35001 4.78ZM14.18 7.91H7.13C6.7 7.91 6.35001 8.26 6.35001 8.69C6.35001 9.12 6.7 9.47 7.13 9.47H14.18C14.61 9.47 14.96 9.12 14.96 8.69C14.96 8.26 14.61 7.91 14.18 7.91ZM14.18 11.83H7.13C6.7 11.83 6.35001 12.18 6.35001 12.61C6.35001 13.04 6.7 13.39 7.13 13.39H14.18C14.61 13.39 14.96 13.04 14.96 12.61C14.96 12.18 14.61 11.83 14.18 11.83ZM4.78 4C4.35 4 4 4.35 4 4.78C4 5.21 4.35 5.56 4.78 5.56C5.21 5.56 5.56001 5.21 5.56001 4.78C5.56001 4.35 5.21 4 4.78 4ZM4.78 7.92C4.35 7.92 4 8.27 4 8.7C4 9.13 4.35 9.48 4.78 9.48C5.21 9.48 5.56001 9.13 5.56001 8.7C5.56001 8.27 5.21 7.92 4.78 7.92ZM4.78 11.84C4.35 11.84 4 12.19 4 12.62C4 13.05 4.35 13.4 4.78 13.4C5.21 13.4 5.56001 13.05 5.56001 12.62C5.56001 12.19 5.21 11.84 4.78 11.84Z",fill:"#444444"},null,-1),Ly=[Py,Dy];function _y(n,e){return E(),R("svg",Iy,Ly)}const Ry=te(Ny,[["render",_y]]),Fy={},By={width:"22",height:"22",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg"},$y=b("rect",{width:"18",height:"18",fill:"transparent"},null,-1),Hy=b("path",{d:"M7.13105 4.5694C7.13105 4.1394 7.48105 3.7894 7.91105 3.7894H14.181C14.611 3.7894 14.961 4.1394 14.961 4.5694C14.961 4.9994 14.611 5.3494 14.181 5.3494H7.91105C7.48105 5.3494 7.13105 4.9994 7.13105 4.5694ZM14.181 7.6994H7.91105C7.48105 7.6994 7.13105 8.0494 7.13105 8.4794C7.13105 8.9094 7.48105 9.2594 7.91105 9.2594H14.181C14.611 9.2594 14.961 8.9094 14.961 8.4794C14.961 8.0494 14.611 7.6994 14.181 7.6994ZM14.181 11.6194H7.91105C7.48105 11.6194 7.13105 11.9694 7.13105 12.3994C7.13105 12.8294 7.48105 13.1794 7.91105 13.1794H14.181C14.611 13.1794 14.961 12.8294 14.961 12.3994C14.961 11.9694 14.611 11.6194 14.181 11.6194ZM5.96103 5.3494H5.57103V3.3894C5.57103 3.2494 5.50105 3.1294 5.38105 3.0594C5.26105 2.9894 5.12104 2.9794 5.00104 3.0394L4.22104 3.4294C4.03104 3.5294 3.95104 3.5894 4.04104 3.7794C4.14104 3.9694 4.37103 4.0494 4.57103 3.9494L4.79104 3.8394V5.3394H4.40104C4.18104 5.3394 4.01104 5.5194 4.01104 5.7294C4.01104 5.9394 4.19104 6.1194 4.40104 6.1194H5.18104H5.96103C6.18103 6.1194 6.35103 5.9394 6.35103 5.7294C6.35103 5.5194 6.17103 5.3394 5.96103 5.3394V5.3494ZM5.96103 9.2694H5.47104C5.86104 8.9194 6.23104 8.4494 6.23104 7.8294C6.13104 7.3194 5.69104 6.9494 5.18104 6.9194C4.67104 6.8794 4.19104 7.2094 4.03104 7.6994C3.96104 7.9094 4.07104 8.1294 4.28104 8.1894C4.48104 8.2594 4.71105 8.1494 4.77105 7.9394C4.82105 7.7894 4.95105 7.6894 5.13105 7.6894C5.29105 7.6894 5.43104 7.8194 5.45104 7.8994C5.45104 8.3294 4.85103 8.7694 4.49103 9.0294C4.18103 9.2494 4.00104 9.3894 4.00104 9.6494C4.00104 9.8694 4.18104 10.0394 4.39104 10.0394H5.96103C6.18103 10.0394 6.35103 9.8594 6.35103 9.6494C6.35103 9.4394 6.17103 9.2594 5.96103 9.2594V9.2694ZM6.23104 11.7494C6.13104 11.2494 5.69104 10.8694 5.18104 10.8394C4.67104 10.7994 4.19104 11.1294 4.03104 11.6194C3.96104 11.8294 4.07104 12.0494 4.28104 12.1094C4.48104 12.1794 4.71105 12.0694 4.77105 11.8594C4.82105 11.6994 4.97105 11.6094 5.13105 11.6094C5.29105 11.6094 5.43103 11.7394 5.46103 11.8494C5.46103 11.9294 5.41104 11.9994 5.33104 12.0094C5.14104 12.0294 4.99103 12.1994 4.99103 12.3894C4.99103 12.5894 5.13103 12.7494 5.32103 12.7794C5.40103 12.7894 5.46103 12.8594 5.46103 12.8894C5.43103 13.0494 5.29105 13.1694 5.13105 13.1794C4.96105 13.1794 4.82105 13.0894 4.77105 12.9294C4.70105 12.7194 4.48105 12.6094 4.27105 12.6794C4.06105 12.7494 3.95105 12.9694 4.02105 13.1794C4.18105 13.6494 4.62104 13.9594 5.11104 13.9594C5.13104 13.9594 5.15104 13.9594 5.18104 13.9594C5.70104 13.9294 6.13103 13.5494 6.24103 12.9994C6.25103 12.7794 6.19103 12.5694 6.07103 12.3994C6.19103 12.2194 6.26103 11.9894 6.24103 11.7394L6.23104 11.7494Z",fill:"#444444"},null,-1),Vy=[$y,Hy];function zy(n,e){return E(),R("svg",By,Vy)}const jy=te(Fy,[["render",zy]]),Wy={class:"editor-header-container"},Ky=ee({__name:"EditorHeader",props:{editor:{}},setup(n){const e=n,t=[{formatName:"bold",icon:ly,onClick:()=>e.editor.chain().focus().toggleBold().run()},{formatName:"italic",icon:my,onClick:()=>e.editor.chain().focus().toggleItalic().run()},{formatName:"strike",icon:wy,onClick:()=>e.editor.chain().focus().toggleStrike().run()},{formatName:"blockquote",icon:ty,onClick:()=>e.editor.chain().focus().toggleBlockquote().run()},{formatName:"codeBlock",icon:Ay,onClick:()=>e.editor.chain().focus().toggleCodeBlock().run()},{formatName:"bulletList",icon:Ry,onClick:()=>e.editor.chain().focus().toggleBulletList().run()},{formatName:"orderedList",icon:jy,onClick:()=>e.editor.chain().focus().toggleOrderedList().run()}];return(r,s)=>(E(),R("div",Wy,[(E(),R(wn,null,li(t,(i,o)=>Ge(G8,V({key:o},i,{editor:r.editor}),null,16,["editor"])),64))]))}}),Uy=te(Ky,[["__scopeId","data-v-1fa19262"]]),qy=n=>(Ct("data-v-c2cdbc08"),n=n(),kt(),n),Gy=qy(()=>b("svg",{width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[b("path",{d:"M8.55025 16.3692C7.35025 16.3692 6.34705 15.9441 5.54066 15.0939C4.73425 14.2437 4.33105 13.2249 4.33105 12.0375V4.6692C4.33105 3.819 4.62805 3.0939 5.22205 2.4939C5.81605 1.8939 6.53785 1.5939 7.38745 1.5939C8.26286 1.5939 8.99425 1.9095 9.58165 2.5407C10.1691 3.1719 10.4628 3.9186 10.4628 4.7808V11.6811C10.4628 12.2061 10.2723 12.6531 9.89125 13.0221C9.50965 13.3905 9.06265 13.5747 8.55025 13.5747C8.00005 13.5747 7.54375 13.3749 7.18135 12.9753C6.81895 12.5751 6.63775 12.1125 6.63775 11.5875V4.4253H8.13805V11.6811C8.13805 11.7939 8.17855 11.8908 8.25955 11.9718C8.34055 12.0534 8.43745 12.0942 8.55025 12.0942C8.66305 12.0942 8.75995 12.0534 8.84095 11.9718C8.92195 11.8908 8.96245 11.7939 8.96245 11.6811V4.6692C8.96245 4.2312 8.80945 3.8562 8.50345 3.5442C8.19745 3.2316 7.82545 3.0753 7.38745 3.0753C6.95005 3.0753 6.57835 3.2346 6.27235 3.5532C5.96575 3.8718 5.81245 4.2561 5.81245 4.7061V12.1689C5.81245 12.9315 6.08125 13.5753 6.61885 14.1003C7.15645 14.6253 7.80025 14.8878 8.55025 14.8878C9.33745 14.8878 9.99055 14.6097 10.5096 14.0535C11.0286 13.4973 11.2881 12.8379 11.2881 12.0753V4.4253H12.7695V12.1689C12.7695 13.3437 12.363 14.3373 11.55 15.1497C10.7376 15.9627 9.73765 16.3692 8.55025 16.3692Z",fill:"#444444"})],-1)),Jy={key:0,class:"attachment-file-button-text"},Zy=ee({__name:"AttachmentFile",props:{filesLength:{}},emits:["on-change"],setup(n,{emit:e}){const t=e,{open:r,files:s,reset:i}=Tf();return Fr(()=>{var o;s.value&&((o=s.value)==null?void 0:o.length)>0&&(t("on-change",Array.from(s.value)),i())}),(o,a)=>(E(),R("button",{class:Fn(["attachment-file-button",{"attachment-file-button-items":o.filesLength>0}]),onClick:a[0]||(a[0]=()=>N(r)())},[Gy,o.filesLength>0?(E(),R("span",Jy,Y(o.filesLength),1)):ne("",!0)],2))}}),Yy=te(Zy,[["__scopeId","data-v-c2cdbc08"]]),Xy=n=>(Ct("data-v-80007709"),n=n(),kt(),n),Qy={key:0},e7=Xy(()=>b("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[b("path",{d:"M18 6L6 18",stroke:"#808080","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),b("path",{d:"M6 6L18 18",stroke:"#808080","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),t7=[e7],n7={class:"attachment-try-again-body-container"},r7={class:"attachment-try-again-body-content"},s7={class:"font-weight-700"},i7={class:"attachment-try-again-footer"},o7=["disabled"],a7=["disabled"],l7=ee({__name:"AttachmentTryAgain",props:{name:{},isLoading:{type:Boolean}},emits:["try-again","close"],setup(n,{emit:e}){const t=e,{t:r}=Ve(),[s,i]=At(En({id:crypto.randomUUID(),onClose(){t("close")},onEsc(){t("close")},onOutsideClick(){t("close")}})),o=ce(()=>Sn(s.value,i,Ot));function a(){t("try-again")}return ze(()=>{o.value.open()}),(l,c)=>(E(),ue(Ut,{to:"body"},[o.value.isOpen?(E(),R("div",Qy,[b("div",V(o.value.backdropProps,{class:"attachment-try-again-backdrop"}),null,16),b("div",V(o.value.positionerProps,{class:"attachment-try-again-container"}),[b("div",V(o.value.contentProps,{class:"attachment-try-again-content"}),[b("h2",V(o.value.titleProps,{class:"attachment-try-again-title"}),Y(N(r)("Upload failed")),17),b("button",V(o.value.closeTriggerProps,{class:"attachment-try-again-close"}),t7,16),b("div",n7,[b("div",r7,[b("span",s7,Y(l.name),1),b("span",null,Y(N(r)(" could not be added as an attachment to your message.")),1)])]),b("div",i7,[b("button",V(o.value.closeTriggerProps,{class:"secondary-btn text-uppercase",disabled:l.isLoading}),Y(N(r)("Cancel")),17,o7),b("button",{disabled:l.isLoading,class:"primary-btn text-uppercase",onClick:a},[l.isLoading?(E(),ue(Kf,{key:0,name:"fa-solid fa-spinner",class:"spin me-1",library:"fontawesome","font-size":"1rem"})):ne("",!0),oi(" "+Y(N(r)("Try Again")),1)],8,a7)])],16)],16)])):ne("",!0)]))}}),c7=te(l7,[["__scopeId","data-v-80007709"]]),u7={key:0,class:"opacity-container"},d7=ee({__name:"FooterOpacity",setup(n){const e=kn(),t=ce(()=>e.name===W.Contact||e.name===W.FavoriteContact);return(r,s)=>t.value?(E(),R("div",u7)):ne("",!0)}}),f7=te(d7,[["__scopeId","data-v-709c915d"]]),h7={class:"base-editor-footer"},p7=ee({__name:"BaseEditor",props:{headerIsVisible:{type:Boolean}},emits:["send-sms","send-message","send-message-attachment","height"],setup(n,{emit:e}){const r=kn(),s=Br(),i=Of(),{putFile:o,putGroupFile:a}=If(),l=jo(),{number:c}=$r(),u=e,{t:f}=Ve(),d=Te.create({addKeyboardShortcuts(){return{Enter:()=>!0}}}),h=Te.create({addKeyboardShortcuts(){return{"Shift-Enter":({editor:L})=>L.commands.first(({commands:O})=>[()=>O.newlineInCode(),()=>O.splitListItem("listItem"),()=>O.createParagraphNear(),()=>O.liftEmptyBlock(),()=>O.splitBlock()])}}}),p=x5({extensions:[h3,p3.configure({placeholder:f("Type your message here")}),Dd,Vd,Kd,Pd,F3.configure({HTMLAttributes:{style:"cursor: pointer;"}}),d,h,_d,Ld,Rd,zd,jd,Wd,Ud],editorProps:{handleDOMEvents:{drop:(L,O)=>O.preventDefault()}},editable:r.name!==W.FavoriteContact&&r.name!==W.Contact}),m=re(),g=re(!0),y=re([]),v=re([]),w=re([]),$=re(),B=re(!1),x=re(!1),j=re(!1),se=re(!1),T=re(!1),F=re(),A=re(!1),C=new AbortController,k=ce(()=>s.chatIsActive?af.value:!1),D=re(),U=re(0);function X(L,O){y.value[O]={...y.value[O],size:L.size,hash:L.hash,filetype:L.fileType,progress:100,success:L.success,message:L.message,tryAgain:!1}}function q(L,O){y.value[O].progress=L.progress?Number((L.progress*100).toFixed(0)):100}function ie(L,O){const Q=L;if(y.value[O]={...y.value[O],progress:100,success:!1,message:"Failed",tryAgain:!1},Q.response){const oe="This type of file it's not allowed",Ee="Files have to be under";if(Q.response.data.message===oe){w.value.push(y.value[O]),y.value.splice(O,1);return}if(Q.response.data.message.startsWith(Ee)){v.value.push(y.value[O]),y.value.splice(O,1);return}y.value[O].tryAgain=!0;return}y.value[O].tryAgain=!0}async function Ce(L,O){try{const Q=await o({file:L,to:String(r.params.id),onProgress:oe=>{q(oe,O)},signal:C.signal});X(Q,O)}catch(Q){ie(Q,O)}}async function ge(L,O){const Q=String(r.params.id);try{const oe=await a({file:L,groupId:Q,onProgress:Ee=>{q(Ee,O)},signal:C.signal});X(oe,O)}catch(oe){ie(oe,O)}}async function it(L,O){switch(r.name){case W.Group:case W.FavoriteGroup:await ge(L.file,O);break;case W.Directory:case W.FavoriteDirectory:default:await Ce(L.file,O)}}function Zt(L){v.value.push({id:window.crypto.randomUUID(),size:L.size,name:L.name,type:L.type,lastModified:L.lastModified}),setTimeout(()=>{se.value=!0},500)}function ot(L){w.value.push(L),setTimeout(()=>{T.value=!0},500)}async function Yt(L){if(s.chatIsActive&&(v.value=[],L)){L.length+y.value.length>10&&setTimeout(()=>{j.value=!0},500);for await(const O of L){if(y.value.length>=10)break;const Q={id:window.crypto.randomUUID(),name:O.name,size:O.size,type:O.type,lastModified:O.lastModified,hash:"",filetype:"",progress:0,success:!1,message:"",file:O,tryAgain:!1};if(O.size>l.maxSizeFileBytes){Zt(O);continue}if(l.isForbiddenFileTypes(O.name)){ot(Q);continue}y.value.push(Q)}for await(const[O,Q]of y.value.entries())Q.progress!==0&&Q.progress<=100||await it(Q,O)}}function Qn(){setTimeout(()=>{if(y.value.some(O=>O.success)&&!B.value&&(g.value=!1),w.value.length>0){T.value=!0;return}v.value.length>0&&(se.value=!0)},500)}async function Xt(L){g.value=!0,B.value=!0,await Yt(L),B.value=!1,Qn()}function er(L){const O=y.value.findIndex(Q=>Q.id===L);O!==-1&&($.value=y.value[O],x.value=!0)}function tf(L){var oe;const O=y.value.findIndex(Ee=>Ee.id===L);O!==-1&&y.value.splice(O,1);const Q=(oe=p.value)==null?void 0:oe.getText();y.value.length===0&&!Q&&(g.value=!0)}function Ta(){var O,Q,oe;const L=(O=p.value)==null?void 0:O.getText();L&&(u("send-sms",String(L)),(Q=p.value)==null||Q.commands.clearContent(),(oe=p.value)==null||oe.commands.focus(),g.value=!0,D.value.$el.scrollTop=0)}function Oa(){var Q,oe,Ee,zr,Na,Ia;if(B.value)return;const L=(Q=p.value)==null?void 0:Q.getHTML(),O=(oe=p.value)==null?void 0:oe.getText();if(y.value.length>0){const mf=y.value.filter(gf=>gf.success);u("send-message-attachment",mf,L),(Ee=p.value)==null||Ee.commands.clearContent(),(zr=p.value)==null||zr.commands.focus(),y.value=[],g.value=!0,D.value.$el.scrollTop=0;return}O&&(u("send-message",L),(Na=p.value)==null||Na.commands.clearContent(),(Ia=p.value)==null||Ia.commands.focus(),g.value=!0,D.value.$el.scrollTop=0)}function nf(L){if(!(L.shiftKey||!c.value&&r.name===W.Sms||g.value)){if(s.chatIsActive){Oa(),g.value=!0;return}Ta()}}function rf(){var L;(L=p.value)==null||L.on("update",()=>{var Ee;const O=(Ee=p.value)==null?void 0:Ee.getText();if(String(r.name)===W.Sms&&!c.value)return;if(O&&O.length>0&&!B.value){g.value=!1;return}const oe=y.value.some(zr=>zr.success);!O&&!oe&&(g.value=!0)})}function sf(){se.value=!1,setTimeout(()=>{if(v.value.length>1){v.value.shift(),se.value=!0;return}v.value=[]},50)}function of(){T.value=!1,setTimeout(()=>{if(w.value.length>1){w.value.shift(),T.value=!0;return}v.value.length>0&&se.value,w.value=[]},50)}const{isOverDropZone:af}=Af(m,Xt);function lf(L){var Q;L.preventDefault();const O=(Q=L.clipboardData)==null?void 0:Q.items;if(O){const oe=[];for(const Ee of O)Ee.kind==="file"&&oe.push(Ee.getAsFile());oe.length>0&&Xt(oe)}}function cf(){j.value=!1,v.value.length>0&&(se.value=!0)}function uf(){new ResizeObserver(function(O){const oe=O[0].contentRect.height;if(oe===0)return;const Ee=oe>U.value;D.value&&Ee&&u("height",oe-U.value),U.value=oe}).observe(m.value)}function Aa(){var O;r.name!==W.Sms&&((O=p.value)==null||O.commands.focus())}function df(){y.value=[],w.value=[],v.value=[]}function ff(L){A.value=!1,F.value=L}async function hf(){if(typeof F.value!="number")return;A.value=!0;const L=F.value,O=y.value[L];g.value=!0,B.value=!0,O.progress=0;try{await it(O,L)}finally{B.value=!1,F.value=void 0,Qn()}}function pf(){F.value=void 0}return Sr(()=>r.params.id,()=>{var L;(L=p.value)==null||L.commands.clearContent(),Aa(),df(),C.abort()}),Sr(()=>r.query,L=>{var Q;const O=(Q=p.value)==null?void 0:Q.getText();L&&O&&O.length>0&&(g.value=!1)}),ze(()=>{rf(),uf(),setTimeout(()=>{m.value&&(U.value=m.value.getBoundingClientRect().height-2),i.handleKeydownTyping(),Aa()},200)}),Rr(()=>{C.abort()}),(L,O)=>{const Q=Lc("PerfectScrollbar");return E(),R(wn,null,[L.headerIsVisible&&N(p)?(E(),ue(Uy,{key:0,editor:N(p)},null,8,["editor"])):ne("",!0),b("div",{ref_key:"containerRef",ref:m,class:"base-editor-container",onPaste:lf},[es(Ge(W8,null,null,512),[[xi,k.value]]),Ge(Q,{ref_key:"scrollbarRef",ref:D,class:"w-100"},{default:Dc(()=>[es(Ge(N(E5),{id:"tip-tap",editor:N(p),onKeydown:Ic(nf,["enter"])},null,8,["editor"]),[[xi,!k.value]])]),_:1},512),y.value.length>0&&N(s).chatIsActive?es((E(),ue(d8,{key:0,"files-data":y.value,onRemoveItem:er,onTryAgain:ff},null,8,["files-data"])),[[xi,!k.value]]):ne("",!0)],544),b("footer",h7,[Ge(f7),b("div",null,[Ge(Yy,{disabled:!N(s).chatIsActive,"files-length":y.value.length,onOnChange:Xt},null,8,["disabled","files-length"])]),Ge(W3,{"send-disabled":g.value,"change-chat-to-sms":N(Nf)(),onSendSms:Ta,onSendMessage:Oa},null,8,["send-disabled","change-chat-to-sms"])]),x.value?(E(),ue(N0,{key:1,"file-data":$.value,onDelete:tf,onClose:O[0]||(O[0]=oe=>x.value=!1)},null,8,["file-data"])):ne("",!0),j.value?(E(),ue(C8,{key:2,onClose:cf})):ne("",!0),se.value?(E(),ue(A8,{key:3,"file-data":v.value[0],onClose:sf},null,8,["file-data"])):ne("",!0),T.value?(E(),ue(B8,{key:4,"file-data":w.value[0],onClose:of},null,8,["file-data"])):ne("",!0),typeof F.value=="number"?(E(),ue(c7,{key:5,name:y.value[F.value].name,"is-loading":A.value,onClose:pf,onTryAgain:hf},null,8,["name","is-loading"])):ne("",!0)],64)}}}),m7=te(p7,[["__scopeId","data-v-01037afa"]]);function g7(n,e,t){if(!n)return;const r=n.ownerDocument.defaultView||window,s=new r.MutationObserver(i=>{for(const o of i)o.type==="attributes"&&o.attributeName&&e.includes(o.attributeName)&&t(o)});return s.observe(n,{attributes:!0,attributeFilter:e}),()=>s.disconnect()}var cr=(n,e)=>({x:n,y:e});function y7(n){const{x:e,y:t,width:r,height:s}=n,i=e+r/2,o=t+s/2;return{x:e,y:t,width:r,height:s,minX:e,minY:t,maxX:e+r,maxY:t+s,midX:i,midY:o,center:cr(i,o)}}function b7(n){const e=cr(n.minX,n.minY),t=cr(n.maxX,n.minY),r=cr(n.maxX,n.maxY),s=cr(n.minX,n.maxY);return{top:e,right:t,bottom:r,left:s}}function v7(n,e){const t=y7(n),{top:r,right:s,left:i,bottom:o}=b7(t),[a]=e.split("-");return{top:[i,r,s,o],right:[r,s,o,i],bottom:[r,i,o,s],left:[s,r,i,o]}[a]}function C7(n,e){const{x:t,y:r}=e;let s=!1;for(let i=0,o=n.length-1;i<n.length;o=i++){const a=n[i].x,l=n[i].y,c=n[o].x,u=n[o].y;l>r!=u>r&&t<(c-a)*(r-l)/(u-l)+a&&(s=!s)}return s}var k7=ur("menu").parts("contextTrigger","trigger","triggerItem","indicator","positioner","arrow","arrowTip","content","separator","item","optionItem","optionItemIndicator","optionItemText","itemGroupLabel","itemGroup"),Ne=k7.build(),H=$c({getTriggerId:n=>{var e;return((e=n.ids)==null?void 0:e.trigger)??`menu:${n.id}:trigger`},getContextTriggerId:n=>{var e;return((e=n.ids)==null?void 0:e.contextTrigger)??`menu:${n.id}:ctx-trigger`},getContentId:n=>{var e;return((e=n.ids)==null?void 0:e.content)??`menu:${n.id}:content`},getArrowId:n=>{var e;return((e=n.ids)==null?void 0:e.arrow)??`menu:${n.id}:arrow`},getPositionerId:n=>{var e;return((e=n.ids)==null?void 0:e.positioner)??`menu:${n.id}:popper`},getGroupId:(n,e)=>{var t,r;return((r=(t=n.ids)==null?void 0:t.group)==null?void 0:r.call(t,e))??`menu:${n.id}:group:${e}`},getGroupLabelId:(n,e)=>{var t,r;return((r=(t=n.ids)==null?void 0:t.label)==null?void 0:r.call(t,e))??`menu:${n.id}:label:${e}`},getContentEl:n=>H.getById(n,H.getContentId(n)),getPositionerEl:n=>H.getById(n,H.getPositionerId(n)),getTriggerEl:n=>H.getById(n,H.getTriggerId(n)),getFocusedItem:n=>n.highlightedId?H.getById(n,n.highlightedId):null,getArrowEl:n=>H.getById(n,H.getArrowId(n)),getElements:n=>{const t=`[role^="menuitem"][data-ownedby=${CSS.escape(H.getContentId(n))}]:not([data-disabled])`;return p1(H.getContentEl(n),t)},getFirstEl:n=>g1(H.getElements(n)),getLastEl:n=>y1(H.getElements(n)),getNextEl:(n,e)=>t1(H.getElements(n),n.highlightedId,e??n.loop),getPrevEl:(n,e)=>n1(H.getElements(n),n.highlightedId,e??n.loop),getElemByKey:(n,e)=>Vc(H.getElements(n),{state:n.typeahead,key:e,activeId:n.highlightedId}),isTargetDisabled:n=>yt(n)&&(n.dataset.disabled===""||n.hasAttribute("disabled")),isTriggerItem:n=>{var e;return!!((e=n==null?void 0:n.getAttribute("role"))!=null&&e.startsWith("menuitem"))&&!!(n!=null&&n.hasAttribute("aria-controls"))},getHighlightedOptionEl(n){return n.highlightedId?H.getById(n,n.highlightedId):null}});function Xd(n,e,t){const r=n.context.isSubmenu,s=n.context.value,i=n.context.isTypingAhead,o=n.hasTag("visible"),a=K1({...n.context.positioning,placement:n.context.currentPlacement});function l(d){return{isDisabled:!!d.disabled,isHighlighted:n.context.highlightedId===d.id}}function c(d){const h=d.id??d.value,p=d.valueText??d.value;return{...d,id:h,valueText:p}}function u(d){return{...l(c(d)),isChecked:!!Kc(d.type,{radio:()=>(s==null?void 0:s[d.name])===d.value,checkbox:()=>s==null?void 0:s[d.name].includes(d.value)})}}function f(d){const{id:h,closeOnSelect:p,valueText:m}=d,g=l(d);return t.element({...Ne.item.attrs,id:h,role:"menuitem","aria-disabled":g.isDisabled,"data-disabled":Mn(g.isDisabled),"data-ownedby":H.getContentId(n.context),"data-highlighted":Mn(g.isHighlighted),"data-valuetext":m,onDragStart(y){y.currentTarget.matches("a[href]")&&y.preventDefault()},onPointerLeave(y){if(g.isDisabled||y.pointerType!=="mouse")return;const v=y.currentTarget;e({type:"ITEM_POINTERLEAVE",id:h,target:v,closeOnSelect:p})},onPointerMove(y){if(g.isDisabled||y.pointerType!=="mouse")return;const v=y.currentTarget;e({type:"ITEM_POINTERMOVE",id:h,target:v,closeOnSelect:p})},onPointerDown(y){if(g.isDisabled)return;const v=y.currentTarget;e({type:"ITEM_POINTERDOWN",target:v,id:h,closeOnSelect:p})},onPointerUp(y){const v=Qt(y);if(!Ni(v)||g.isDisabled)return;const w=y.currentTarget;e({type:"ITEM_CLICK",src:"pointerup",target:w,id:h,closeOnSelect:p}),w.matches("a[href]")&&y.pointerType==="touch"&&w.click()}})}return{highlightedId:n.context.highlightedId,isOpen:o,open(){e("OPEN")},close(){e("CLOSE")},setHighlightedId(d){e({type:"SET_HIGHLIGHTED_ID",id:d})},setParent(d){e({type:"SET_PARENT",value:d,id:d.state.context.id})},setChild(d){e({type:"SET_CHILD",value:d,id:d.state.context.id})},value:s,setValue(d,h){e({type:"SET_VALUE",name:d,value:h})},reposition(d={}){e({type:"SET_POSITIONING",options:d})},contextTriggerProps:t.element({...Ne.contextTrigger.attrs,dir:n.context.dir,id:H.getContextTriggerId(n.context),onPointerDown(d){if(d.pointerType==="mouse")return;const h=Qt(d),p=Ii(h);e({type:"CONTEXT_MENU_START",point:p})},onPointerCancel(d){d.pointerType!=="mouse"&&e("CONTEXT_MENU_CANCEL")},onPointerMove(d){d.pointerType!=="mouse"&&e("CONTEXT_MENU_CANCEL")},onPointerUp(d){d.pointerType!=="mouse"&&e("CONTEXT_MENU_CANCEL")},onContextMenu(d){const h=Qt(d),p=Ii(h);e({type:"CONTEXT_MENU",point:p}),d.preventDefault()},style:{WebkitTouchCallout:"none",userSelect:"none"}}),getTriggerItemProps(d){return xm(f({id:d.triggerProps.id}),d.triggerProps)},triggerProps:t.button({...r?Ne.triggerItem.attrs:Ne.trigger.attrs,"data-placement":n.context.currentPlacement,type:"button",dir:n.context.dir,id:H.getTriggerId(n.context),"data-uid":n.context.id,"aria-haspopup":"menu","aria-controls":H.getContentId(n.context),"aria-expanded":o||void 0,"data-state":o?"open":"closed",onPointerMove(d){d.pointerType!=="mouse"||H.isTargetDisabled(d.currentTarget)||!r||e({type:"TRIGGER_POINTERMOVE",target:d.currentTarget})},onPointerLeave(d){if(d.pointerType!=="mouse")return;const h=Qt(d);if(H.isTargetDisabled(d.currentTarget)||!r)return;const m=Ii(h);e({type:"TRIGGER_POINTERLEAVE",target:d.currentTarget,point:m})},onClick(d){H.isTriggerItem(d.currentTarget)&&e({type:"TRIGGER_CLICK",target:d.currentTarget})},onPointerDown(d){const h=H.isTargetDisabled(d.currentTarget),p=Qt(d);!Ni(p)||h||tu(d)||(d.preventDefault(),H.isTriggerItem(d.currentTarget)||e({type:"TRIGGER_CLICK",target:d.currentTarget}))},onBlur(){e("TRIGGER_BLUR")},onFocus(){e("TRIGGER_FOCUS")},onKeyDown(d){const h={ArrowDown(){e("ARROW_DOWN")},ArrowUp(){e("ARROW_UP")},Enter(){e({type:"ARROW_DOWN"})},Space(){e({type:"ARROW_DOWN"})}},p=Za(d,n.context),m=h[p];m&&(d.preventDefault(),m(d))}}),indicatorProps:t.element({...Ne.indicator.attrs,dir:n.context.dir,"data-state":o?"open":"closed"}),positionerProps:t.element({...Ne.positioner.attrs,dir:n.context.dir,id:H.getPositionerId(n.context),style:a.floating}),arrowProps:t.element({id:H.getArrowId(n.context),...Ne.arrow.attrs,dir:n.context.dir,style:a.arrow}),arrowTipProps:t.element({...Ne.arrowTip.attrs,dir:n.context.dir,style:a.arrowTip}),contentProps:t.element({...Ne.content.attrs,id:H.getContentId(n.context),"aria-label":n.context["aria-label"],hidden:!o,"data-state":o?"open":"closed",role:"menu",tabIndex:0,dir:n.context.dir,"aria-activedescendant":n.context.highlightedId??void 0,"aria-labelledby":H.getTriggerId(n.context),"data-placement":n.context.currentPlacement,onPointerEnter(d){d.pointerType==="mouse"&&e("MENU_POINTERENTER")},onKeyDown(d){const h=Er(Qt(d)),p=(h==null?void 0:h.closest("[role=menu]"))===d.currentTarget;if(!Zp(d)||!p)return;const m=H.getFocusedItem(n.context),g=!!(m!=null&&m.matches("a[href]")),y={ArrowDown(){e("ARROW_DOWN")},ArrowUp(){e("ARROW_UP")},ArrowLeft(){e("ARROW_LEFT")},ArrowRight(){e("ARROW_RIGHT")},Enter(){g&&(m==null||m.click()),e("ENTER")},Space($){var B;i?e({type:"TYPEAHEAD",key:$.key}):(B=y.Enter)==null||B.call(y,$)},Home(){e("HOME")},End(){e("END")},Tab($){e({type:"TAB",shiftKey:$.shiftKey,loop:!1})}},v=Za(d,{dir:n.context.dir}),w=y[v];if(w){const $=g&&v==="Enter";w(d),$||d.preventDefault()}else{if(!(d.key.length===1&&!Mm(d)&&!zc(m)))return;e({type:"TYPEAHEAD",key:d.key}),d.preventDefault()}}}),separatorProps:t.element({...Ne.separator.attrs,role:"separator",dir:n.context.dir,"aria-orientation":"horizontal"}),getItemState:l,getItemProps:f,getOptionItemState:u,getOptionItemProps(d){const{name:h,type:p,disabled:m,onCheckedChange:g,closeOnSelect:y}=d,v=c(d),w=u(d);return Object.assign(f(v),t.element({"data-type":p,"data-name":h,...Ne.optionItem.attrs,dir:n.context.dir,"data-value":v.value,role:`menuitem${p}`,"aria-checked":!!w.isChecked,"data-state":w.isChecked?"checked":"unchecked",onPointerUp($){const B=Qt($);if(!Ni(B)||m)return;const x=$.currentTarget;e({type:"ITEM_CLICK",src:"pointerup",target:x,option:v,closeOnSelect:y}),g==null||g(!w.isChecked)}}))},getOptionItemIndicatorProps(d){const h=u(d);return t.element({...Ne.optionItemIndicator.attrs,dir:n.context.dir,"data-disabled":Mn(h.isDisabled),"data-highlighted":Mn(h.isHighlighted),"data-state":h.isChecked?"checked":"unchecked",hidden:!h.isChecked})},getOptionItemTextProps(d){const h=u(d);return t.element({...Ne.optionItemText.attrs,dir:n.context.dir,"data-disabled":Mn(h.isDisabled),"data-highlighted":Mn(h.isHighlighted),"data-state":h.isChecked?"checked":"unchecked"})},getItemGroupLabelProps(d){return t.element({id:H.getGroupLabelId(n.context,d.htmlFor),dir:n.context.dir,...Ne.itemGroupLabel.attrs})},getItemGroupProps(d){return t.element({id:H.getGroupId(n.context,d.id),...Ne.itemGroup.attrs,dir:n.context.dir,"aria-labelledby":H.getGroupLabelId(n.context,d.id),role:"group"})}}}var{not:Ye,and:Qr}=bm;function Qd(n){const e=ci(n);return eu({id:"menu",initial:e.open?"open":"idle",context:{highlightedId:null,hoverId:null,parent:null,children:C1(fr({})),intentPolygon:null,loop:!1,suspendPointer:!1,anchorPoint:null,closeOnSelect:!0,focusTriggerOnClose:!0,...e,typeahead:Vc.defaultOptions,positioning:{placement:"bottom-start",gutter:8,...e.positioning}},computed:{isSubmenu:t=>t.parent!==null,isRtl:t=>t.dir==="rtl",isTypingAhead:t=>t.typeahead.keysSoFar!==""},watch:{isSubmenu:"setSubmenuPlacement",anchorPoint:"reposition",open:"toggleVisibility"},on:{SET_PARENT:{actions:"setParentMenu"},SET_CHILD:{actions:"setChildMenu"},OPEN:{target:"open",actions:"invokeOnOpen"},OPEN_AUTOFOCUS:{internal:!0,target:"open",actions:["focusFirstItem","invokeOnOpen"]},CLOSE:{target:"closed",actions:"invokeOnClose"},RESTORE_FOCUS:{actions:"restoreFocus"},SET_VALUE:{actions:["setOptionValue","invokeOnValueChange"]},SET_HIGHLIGHTED_ID:{actions:"setFocusedItem"}},states:{idle:{on:{CONTEXT_MENU_START:{target:"opening:contextmenu",actions:"setAnchorPoint"},CONTEXT_MENU:{target:"open",actions:["setAnchorPoint","invokeOnOpen"]},TRIGGER_CLICK:{target:"open",actions:"invokeOnOpen"},TRIGGER_FOCUS:{guard:Ye("isSubmenu"),target:"closed"},TRIGGER_POINTERMOVE:{guard:"isSubmenu",target:"opening"}}},"opening:contextmenu":{after:{LONG_PRESS_DELAY:{target:"open",actions:"invokeOnOpen"}},on:{CONTEXT_MENU_CANCEL:{target:"closed",actions:"invokeOnClose"}}},opening:{after:{SUBMENU_OPEN_DELAY:{target:"open",actions:"invokeOnOpen"}},on:{BLUR:{target:"closed",actions:"invokeOnClose"},TRIGGER_POINTERLEAVE:{target:"closed",actions:"invokeOnClose"}}},closing:{tags:["visible"],activities:["trackPointerMove","trackInteractOutside"],after:{SUBMENU_CLOSE_DELAY:{target:"closed",actions:["focusParentMenu","restoreParentFocus","invokeOnClose"]}},on:{MENU_POINTERENTER:{target:"open",actions:"clearIntentPolygon"},POINTER_MOVED_AWAY_FROM_SUBMENU:{target:"closed",actions:["focusParentMenu","restoreParentFocus"]}}},closed:{entry:["clearFocusedItem","focusTrigger","clearAnchorPoint","resumePointer"],on:{CONTEXT_MENU_START:{target:"opening:contextmenu",actions:"setAnchorPoint"},CONTEXT_MENU:{target:"open",actions:["setAnchorPoint","invokeOnOpen"]},TRIGGER_CLICK:{target:"open",actions:"invokeOnOpen"},TRIGGER_POINTERMOVE:{guard:"isTriggerItem",target:"opening"},TRIGGER_BLUR:"idle",ARROW_DOWN:{target:"open",actions:["focusFirstItem","invokeOnOpen"]},ARROW_UP:{target:"open",actions:["focusLastItem","invokeOnOpen"]}}},open:{tags:["visible"],activities:["trackInteractOutside","trackPositioning","scrollToHighlightedItem"],entry:["focusMenu","resumePointer"],on:{TRIGGER_CLICK:{guard:Ye("isTriggerItem"),target:"closed",actions:"invokeOnClose"},TAB:[{guard:"isForwardTabNavigation",actions:["focusNextItem"]},{actions:["focusPrevItem"]}],ARROW_UP:{actions:["focusPrevItem","focusMenu"]},ARROW_DOWN:{actions:["focusNextItem","focusMenu"]},ARROW_LEFT:{guard:"isSubmenu",target:"closed",actions:["focusParentMenu","invokeOnClose"]},HOME:{actions:["focusFirstItem","focusMenu"]},END:{actions:["focusLastItem","focusMenu"]},REQUEST_CLOSE:{target:"closed",actions:"invokeOnClose"},ARROW_RIGHT:{guard:"isTriggerItemFocused",actions:"openSubmenu"},ENTER:[{guard:"isTriggerItemFocused",actions:"openSubmenu"},{guard:"closeOnSelect",target:"closed",actions:"clickFocusedItem"},{actions:"clickFocusedItem"}],ITEM_POINTERMOVE:[{guard:Qr(Ye("suspendPointer"),Ye("isTargetFocused")),actions:["focusItem","focusMenu"]},{guard:Ye("isTargetFocused"),actions:"setHoveredItem"}],ITEM_POINTERLEAVE:{guard:Qr(Ye("suspendPointer"),Ye("isTriggerItem")),actions:"clearFocusedItem"},ITEM_CLICK:[{guard:Qr(Ye("isTriggerItemFocused"),Ye("isFocusedItemEditable"),"closeOnSelect"),target:"closed",actions:["invokeOnSelect","changeOptionValue","invokeOnValueChange","closeRootMenu","invokeOnClose"]},{guard:Qr(Ye("isTriggerItemFocused"),Ye("isFocusedItemEditable")),actions:["invokeOnSelect","changeOptionValue","invokeOnValueChange"]},{actions:"focusItem"}],TRIGGER_POINTERLEAVE:{target:"closing",actions:"setIntentPolygon"},ITEM_POINTERDOWN:{actions:"focusItem"},TYPEAHEAD:{actions:"focusMatchedItem"},FOCUS_MENU:{actions:"focusMenu"},SET_POSITIONING:{actions:"reposition"}}}}},{delays:{LONG_PRESS_DELAY:700,SUBMENU_OPEN_DELAY:100,SUBMENU_CLOSE_DELAY:100},guards:{closeOnSelect:(t,r)=>!!((r==null?void 0:r.closeOnSelect)??t.closeOnSelect),isMenuFocused:t=>mn(H.getContentEl(t),H.getActiveElement(t)),isTargetFocused:(t,r)=>t.highlightedId===r.target.id,isTriggerItem:(t,r)=>H.isTriggerItem(r.target),isTriggerItemFocused:(t,r)=>{const s=r.target??H.getFocusedItem(t);return!!(s!=null&&s.hasAttribute("aria-controls"))},isForwardTabNavigation:(t,r)=>!r.shiftKey,isSubmenu:t=>t.isSubmenu,suspendPointer:t=>t.suspendPointer,isFocusedItemEditable:t=>zc(H.getFocusedItem(t)),isWithinPolygon:(t,r)=>t.intentPolygon?C7(t.intentPolygon,r.point):!1},activities:{trackPositioning(t){if(t.anchorPoint)return;t.currentPlacement=t.positioning.placement;const r=()=>H.getPositionerEl(t);return $a(H.getTriggerEl(t),r,{...t.positioning,defer:!0,onComplete(s){t.currentPlacement=s.placement}})},trackInteractOutside(t,r,{send:s}){return nu(()=>H.getContentEl(t),{defer:!0,exclude:[H.getTriggerEl(t)],onInteractOutside:t.onInteractOutside,onFocusOutside:t.onFocusOutside,onEscapeKeyDown(o){t.isSubmenu&&o.preventDefault(),Oc(t)},onPointerDownOutside(o){var a;t.focusTriggerOnClose=!o.detail.focusable,(a=t.onPointerDownOutside)==null||a.call(t,o)},onDismiss(){s({type:"REQUEST_CLOSE",src:"interact-outside"})}})},trackPointerMove(t,r,{guards:s,send:i}){const{isWithinPolygon:o}=s;t.parent.state.context.suspendPointer=!0;const a=H.getDoc(t);return ds(a,"pointermove",l=>{const c={x:l.clientX,y:l.clientY};o(t,{point:c})||(i("POINTER_MOVED_AWAY_FROM_SUBMENU"),t.parent.state.context.suspendPointer=!1)})},scrollToHighlightedItem(t,r,{getState:s}){const i=()=>{if(s().event.type.startsWith("ITEM_POINTER"))return;const a=H.getHighlightedOptionEl(t);a==null||a.scrollIntoView({block:"nearest"})};return gt(()=>i()),g7(H.getContentEl(t),["aria-activedescendant"],i)}},actions:{setAnchorPoint(t,r){t.anchorPoint=r.point},clearAnchorPoint(t){t.anchorPoint=null},setSubmenuPlacement(t){t.isSubmenu&&(t.positioning.placement=t.isRtl?"left-start":"right-start",t.positioning.gutter=0)},reposition(t,r){const s=()=>H.getPositionerEl(t),i=t.anchorPoint?()=>({width:0,height:0,...t.anchorPoint}):void 0;$a(H.getTriggerEl(t),s,{...t.positioning,getAnchorRect:i,...r.options??{},listeners:!1,onComplete(o){t.currentPlacement=o.placement}})},invokeOnValueChange(t,r){var a,l;if(!t.value)return;const s=r.name??((a=r.option)==null?void 0:a.name);if(!s)return;const i=t.value[s],o=La(i)?Array.from(i):i;(l=t.onValueChange)==null||l.call(t,{name:s,value:o})},setOptionValue(t,r){t.value&&(t.value[r.name]=r.value)},changeOptionValue(t,r){if(!r.option||!t.value)return;const{value:s,type:i,name:o}=r.option,a=t.value[o];i==="checkbox"&&La(a)?t.value[o]=a.includes(s)?v1(a,s):b1(a,s):t.value[o]=s},clickFocusedItem(t,r,{send:s}){const i=H.getFocusedItem(t);if(!i||i.dataset.disabled)return;const{id:o}=i;s({type:"ITEM_CLICK",src:"pointerup",target:i,id:o})},setIntentPolygon(t,r){const s=H.getContentEl(t),i=t.currentPlacement;if(!s||!i)return;const o=s.getBoundingClientRect(),a=v7(o,i);if(!a)return;const c=R1(i)==="right"?-5:5;t.intentPolygon=[{...r.point,x:r.point.x+c},...a]},clearIntentPolygon(t){t.intentPolygon=null},resumePointer(t){t.parent&&(t.parent.state.context.suspendPointer=!1)},setFocusedItem(t,r){t.highlightedId=r.id},clearFocusedItem(t){t.highlightedId=null},focusMenu(t){gt(()=>{const r=H.getActiveElement(t),s=H.getContentEl(t);mn(s,r)||s==null||s.focus({preventScroll:!0})})},focusFirstItem(t){const r=H.getFirstEl(t);r&&(t.highlightedId=r.id)},focusLastItem(t){const r=H.getLastEl(t);r&&(t.highlightedId=r.id)},focusNextItem(t,r){const s=H.getNextEl(t,r.loop);t.highlightedId=(s==null?void 0:s.id)??null},focusPrevItem(t,r){const s=H.getPrevEl(t,r.loop);t.highlightedId=(s==null?void 0:s.id)??null},invokeOnSelect(t){var r;t.highlightedId&&((r=t.onSelect)==null||r.call(t,{value:t.highlightedId}))},focusItem(t,r){t.highlightedId=r.id},focusTrigger(t){t.isSubmenu||t.anchorPoint||!t.focusTriggerOnClose||gt(()=>{var r;return(r=H.getTriggerEl(t))==null?void 0:r.focus({preventScroll:!0})})},focusMatchedItem(t,r){const s=H.getElemByKey(t,r.key);s&&(t.highlightedId=s.id)},setParentMenu(t,r){t.parent=fr(r.value)},setChildMenu(t,r){t.children[r.id]=fr(r.value)},closeRootMenu(t){Oc(t)},openSubmenu(t){const r=H.getFocusedItem(t),s=r==null?void 0:r.getAttribute("data-uid"),i=s?t.children[s]:null;i==null||i.send("OPEN_AUTOFOCUS")},focusParentMenu(t){var r;(r=t.parent)==null||r.send("FOCUS_MENU")},setHoveredItem(t,r){t.hoverId=r.id},restoreFocus(t){t.hoverId&&(t.highlightedId=t.hoverId,t.hoverId=null)},restoreParentFocus(t){var r;(r=t.parent)==null||r.send("RESTORE_FOCUS")},invokeOnOpen(t){var r;(r=t.onOpenChange)==null||r.call(t,{open:!0})},invokeOnClose(t){var r;(r=t.onOpenChange)==null||r.call(t,{open:!1})},toggleVisibility(t,r,{send:s}){s({type:t.open?"OPEN":"CLOSE"})}}})}function Oc(n){let e=n.parent;for(;e&&e.state.context.isSubmenu;)e=e.state.context.parent;e==null||e.send("CLOSE")}const w7={style:{"z-index":"3"}},S7={class:"to-number"},E7={class:"to-sms-number"},x7=ee({__name:"ToSms",emits:["dst-number"],setup(n,{emit:e}){ai(p=>({"05872035":c.value}));const t=e,{t:r}=Ve(),{numbersTo:s}=$r(),i=kn(),o=_c(),a=re(s.value[0]),l=re(),c=ce(()=>l.value?`${l.value.offsetHeight-8}px`:"99px"),[u,f]=At(Qd({id:"to-sms",positioning:{placement:"top-start",offset:{crossAxis:52}},onSelect(p){a.value=p.value,t("dst-number",a.value)}})),d=ce(()=>Xd(u.value,f,Ot));function h(p){return s?s.value.findIndex(m=>m===p):-1}return Fr(()=>{const p=String(i.name),m=i.query.number?String(i.query.number):"";switch(p){case W.SendSms:case W.FavoritePhone:{a.value=String(i.params.id);break}case W.Directory:case W.FavoriteDirectory:{const g=h(m);if(m)g!==-1?a.value=s.value[g]:a.value=s.value[0];else break;break}case W.Sms:{a.value=i.query.number?String(i.query.number):"";break}default:a.value=String(i.params.id)}if(t("dst-number",a.value),i.name!==W.Sms){const g=i.query;delete i.query.number,o.replace({path:i.path,query:g})}}),(p,m)=>(E(),R("div",w7,[b("button",V(d.value.triggerProps,{class:"to-sms"}),[b("span",null,Y(N(r)("To")),1),b("span",S7,[b("span",null,Y(N(lo)(a.value)),1)])],16),d.value.isOpen&&N(s).length>1?(E(),R("div",Bn(V({key:0},d.value.positionerProps)),[b("div",Bn(ls(d.value.arrowProps)),[b("div",Bn(ls(d.value.arrowTipProps)),null,16)],16),b("ul",V(d.value.contentProps,{ref_key:"contentRef",ref:l,class:"to-sms-numbers"}),[(E(!0),R(wn,null,li(N(s),g=>(E(),R("li",V({key:g},d.value.getItemProps({id:g})),[b("div",E7,[a.value===g?(E(),ue(Bc,{key:0,size:"16",class:"to-sms-check"})):ne("",!0),b("span",null,Y(N(lo)(g)),1)])],16))),128))],16)],16)):ne("",!0)]))}}),M7=te(x7,[["__scopeId","data-v-f53cb097"]]),T7={style:{"z-index":"3"}},O7={class:"from-number"},A7={key:0,class:"from-number-name"},N7={class:"from-sms-number"},I7={key:1,class:"from-sms-number-tag"},P7=ee({__name:"FromSms",emits:["src-number"],setup(n,{emit:e}){ai(d=>({"1b367ff6":a.value}));const t=e,{t:r}=Ve(),{numbersFrom:s}=$r(),i=re(s.value[0]),o=re(),a=ce(()=>o.value?`${o.value.offsetHeight-8}px`:"99px");function l(d){return s.value.findIndex(h=>h.numbersUnmasked===d)}const[c,u]=At(Qd({id:"from-sms",positioning:{placement:"top-start",offset:{crossAxis:52}},onSelect(d){const h=l(d.value);h!==-1&&(i.value=s.value[h],t("src-number",i.value.numbersUnmasked))}})),f=ce(()=>Xd(c.value,u,Ot));return ze(()=>{t("src-number",i.value.numbersUnmasked)}),(d,h)=>(E(),R("div",T7,[b("button",V(f.value.triggerProps,{class:"from-sms"}),[b("span",null,Y(N(r)("From")),1),b("span",O7,[i.value.name?(E(),R("span",A7,Y(i.value.name),1)):ne("",!0),b("span",null,Y(i.value.number),1)])],16),f.value.isOpen&&N(s).length>1?(E(),R("div",Bn(V({key:0},f.value.positionerProps)),[b("div",Bn(ls(f.value.arrowProps)),[b("div",Bn(ls(f.value.arrowTipProps)),null,16)],16),b("ul",V(f.value.contentProps,{ref_key:"contentRef",ref:o,class:"from-sms-numbers"}),[(E(!0),R(wn,null,li(N(s),p=>(E(),R("li",V({key:p.numbersUnmasked},f.value.getItemProps({id:p.numbersUnmasked})),[b("div",N7,[i.value.numbersUnmasked===p.numbersUnmasked?(E(),ue(Bc,{key:0,size:"16",class:"from-sms-check"})):ne("",!0),p.name?(E(),R("span",I7,Y(p.name),1)):ne("",!0),b("span",null,Y(p.number),1)])],16))),128))],16)],16)):ne("",!0)]))}}),D7=te(P7,[["__scopeId","data-v-6c7108d0"]]),ef=n=>(Ct("data-v-4efbad5d"),n=n(),kt(),n),L7={key:0},_7=ef(()=>b("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none"},[b("path",{d:"M18 6L6 18",stroke:"#697E8E","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),b("path",{d:"M6 6L18 18",stroke:"#697E8E","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),R7=[_7],F7={class:"enabling-sms-body-container"},B7={class:"enabling-sms-body-content"},$7=["innerHTML"],H7={key:0,class:"enabling-sms-help"},V7=ef(()=>b("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"17",viewBox:"0 0 16 17",fill:"none"},[b("path",{d:"M8.0001 12.5001C8.22232 12.5001 8.41121 12.4223 8.56676 12.2668C8.72232 12.1112 8.8001 11.9223 8.8001 11.7001C8.8001 11.4779 8.72232 11.289 8.56676 11.1334C8.41121 10.9779 8.22232 10.9001 8.0001 10.9001C7.77788 10.9001 7.58899 10.9779 7.43343 11.1334C7.27788 11.289 7.2001 11.4779 7.2001 11.7001C7.2001 11.9223 7.27788 12.1112 7.43343 12.2668C7.58899 12.4223 7.77788 12.5001 8.0001 12.5001ZM7.4001 9.9501H8.61676C8.61676 9.53899 8.65288 9.24732 8.7251 9.0751C8.79732 8.90288 8.97232 8.68343 9.2501 8.41676C9.63899 8.03899 9.90843 7.71676 10.0584 7.4501C10.2084 7.18343 10.2834 6.88899 10.2834 6.56676C10.2834 5.95565 10.0751 5.45843 9.65843 5.0751C9.24176 4.69176 8.71121 4.5001 8.06676 4.5001C7.5001 4.5001 7.00843 4.6501 6.59176 4.9501C6.1751 5.2501 5.88343 5.65565 5.71676 6.16676L6.8001 6.61676C6.9001 6.30565 7.05843 6.06399 7.2751 5.89176C7.49176 5.71954 7.74454 5.63343 8.03343 5.63343C8.34454 5.63343 8.6001 5.72232 8.8001 5.9001C9.0001 6.07788 9.1001 6.31121 9.1001 6.6001C9.1001 6.85565 9.01399 7.08343 8.84176 7.28343C8.66954 7.48343 8.47788 7.67788 8.26676 7.86676C7.87788 8.22232 7.63621 8.51399 7.54176 8.74176C7.44732 8.96954 7.4001 9.37232 7.4001 9.9501ZM8.0001 14.9001C7.12232 14.9001 6.29454 14.7334 5.51676 14.4001C4.73899 14.0668 4.05843 13.6084 3.4751 13.0251C2.89176 12.4418 2.43343 11.7612 2.1001 10.9834C1.76676 10.2057 1.6001 9.37788 1.6001 8.5001C1.6001 7.61121 1.76676 6.78065 2.1001 6.00843C2.43343 5.23621 2.89176 4.55843 3.4751 3.9751C4.05843 3.39176 4.73899 2.93343 5.51676 2.6001C6.29454 2.26676 7.12232 2.1001 8.0001 2.1001C8.88899 2.1001 9.71954 2.26676 10.4918 2.6001C11.264 2.93343 11.9418 3.39176 12.5251 3.9751C13.1084 4.55843 13.5668 5.23621 13.9001 6.00843C14.2334 6.78065 14.4001 7.61121 14.4001 8.5001C14.4001 9.37788 14.2334 10.2057 13.9001 10.9834C13.5668 11.7612 13.1084 12.4418 12.5251 13.0251C11.9418 13.6084 11.264 14.0668 10.4918 14.4001C9.71954 14.7334 8.88899 14.9001 8.0001 14.9001ZM8.0001 13.7001C9.44454 13.7001 10.6723 13.1945 11.6834 12.1834C12.6945 11.1723 13.2001 9.94454 13.2001 8.5001C13.2001 7.05565 12.6945 5.82788 11.6834 4.81676C10.6723 3.80565 9.44454 3.3001 8.0001 3.3001C6.55565 3.3001 5.32788 3.80565 4.31676 4.81676C3.30565 5.82788 2.8001 7.05565 2.8001 8.5001C2.8001 9.94454 3.30565 11.1723 4.31676 12.1834C5.32788 13.1945 6.55565 13.7001 8.0001 13.7001Z",fill:"#67748E"})],-1)),z7={class:"enabling-sms-help-content"},j7=ee({__name:"EnablingSms",props:{number:{}},setup(n){const e=n,{t}=Ve(),{isUS:r}=Wo(),s=zo(),i=Br(),[o,a]=At(En({id:crypto.randomUUID(),onClose(){i.hasErrorEnablingSms=!1},onEsc(){i.hasErrorEnablingSms=!1},onOutsideClick(){i.hasErrorEnablingSms=!1}})),l=ce(()=>Sn(o.value,a,Ot)),c=ce(()=>Pf[s.currentLevel]==="Account Admin"),u={us:{admin:`SMS is not available for the number <span class="enabling-sms-number">${e.number}</span>. To enable SMS features, request SMS activation for this account.`,user:`SMS is not available for the number <span class="enabling-sms-number">${e.number}</span>. Ask an account Admin to request SMS activation.`},au:{admin:`SMS is not available for the number <span class="enabling-sms-number">${e.number}</span>. To enable SMS features, add a mobile number to your account.`,user:`SMS is not available for the number <span class="enabling-sms-number">${e.number}</span>. To enable SMS features, ask an account Admin to add a mobile number.`}},f=ce(()=>u[r.value?"us":"au"][c.value?"admin":"user"]);return ze(()=>{console.log("mounted"),l.value.open()}),(d,h)=>(E(),ue(Ut,{to:"body"},[l.value.isOpen?(E(),R("div",L7,[b("div",V(l.value.backdropProps,{class:"enabling-sms-backdrop"}),null,16),b("div",V(l.value.positionerProps,{class:"enabling-sms-container"}),[b("div",V(l.value.contentProps,{class:"enabling-sms-content"}),[b("h2",V(l.value.titleProps,{class:"enabling-sms-title"}),Y(N(t)("Enabling SMS")),17),b("button",V(l.value.closeTriggerProps,{class:"enabling-sms-close"}),R7,16),b("div",F7,[b("div",B7,[b("span",{innerHTML:f.value},null,8,$7)])]),b("div",{class:Fn(["enabling-sms-footer",{"justify-content-between":c.value}])},[c.value?(E(),R("div",H7,[V7,b("span",z7,Y(N(t)("How to enable SMS")),1)])):ne("",!0),b("button",V({class:"primary-btn text-uppercase"},l.value.closeTriggerProps),Y(N(t)("Close")),17)],2)],16)],16)])):ne("",!0)]))}}),W7=te(j7,[["__scopeId","data-v-4efbad5d"]]),K7=n=>(Ct("data-v-30d9c695"),n=n(),kt(),n),U7={key:0},q7=K7(()=>b("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none"},[b("path",{d:"M18 6L6 18",stroke:"#697E8E","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),b("path",{d:"M6 6L18 18",stroke:"#697E8E","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),G7=[q7],J7={class:"failed-sms-body-container"},Z7={class:"failed-sms-body-content"},Y7={class:"failed-sms-footer"},X7=ee({__name:"FailedSms",setup(n){const{t:e}=Ve(),t=Br(),[r,s]=At(En({id:crypto.randomUUID(),onClose(){t.hasErrorFailedSms=!1},onEsc(){t.hasErrorFailedSms=!1},onOutsideClick(){t.hasErrorFailedSms=!1}})),i=ce(()=>Sn(r.value,s,Ot));return ze(()=>{i.value.open()}),(o,a)=>(E(),ue(Ut,{to:"body"},[i.value.isOpen?(E(),R("div",U7,[b("div",V(i.value.backdropProps,{class:"failed-sms-backdrop"}),null,16),b("div",V(i.value.positionerProps,{class:"failed-sms-container"}),[b("div",V(i.value.contentProps,{class:"failed-sms-content"}),[b("h2",V(i.value.titleProps,{class:"failed-sms-title"}),Y(N(e)("Message failed")),17),b("button",V(i.value.closeTriggerProps,{class:"failed-sms-close"}),G7,16),b("div",J7,[b("div",Z7,[b("span",null,Y(N(e)("This message failed to send.")),1)])]),b("div",Y7,[b("button",V({class:"primary-btn text-uppercase"},i.value.closeTriggerProps),Y(N(e)("Close")),17)])],16)],16)])):ne("",!0)]))}}),Q7=te(X7,[["__scopeId","data-v-30d9c695"]]),e6={class:"base-footer-sms-container"},t6={key:0,class:"base-footer-number"},n6=ee({__name:"BaseSmsFooter",emits:["dst-number","height"],setup(n,{emit:e}){ai(x=>({"020e664d":N(t)}));const t=Nc("width"),r=e,s=kn(),i=_c(),o=Br(),a=Df(),l=Lf(),c=zo(),u=jo(),{number:f,numbersTo:d}=$r(),h=re(""),p=re(""),m=ce(()=>{const x=s.name;return o.chatIsActive||x===W.Contact||x===W.FavoriteContact?!1:x===W.Directory||x===W.FavoriteDirectory||x===W.SendSms||x===W.FavoritePhone?!0:!!s.query.number});function g(x){h.value=x}function y(x){p.value=x,r("dst-number",x)}function v(x){o.sendSms({content:x,srcNumber:h.value,dstNumber:p.value})}function w(x){const j=String(s.params.id);if(s.name===W.Directory||s.name===W.FavoriteDirectory){a.newMessage(parseInt(j,10),x);return}if(s.name===W.Group||s.name===W.FavoriteGroup){l.newGroupMessage(x,c.groupUsersById(Number(j)));return}}function $(x,j){const se=String(s.params.id);if(j=j==="<p></p>"?void 0:j,s.name===W.Directory||s.name===W.FavoriteDirectory){u.postAttachment({dstUser:parseInt(se,10),message:j,files:x});return}if(s.name===W.Group||s.name===W.FavoriteGroup){l.newGroupMessageAttachment({users:c.groupUsersById(Number(se)),message:j,files:x});return}}function B(){if(s.name===W.Sms||s.name===W.SendSms||d.value.some(x=>x===f.value)){o.chatIsActiveIsFalsy();return}o.chatIsActiveIsTruthy(),s.name!==W.Sms&&i.replace(s.path)}return ze(()=>{B()}),(x,j)=>(E(),R(wn,null,[b("div",e6,[m.value?(E(),R("div",t6,[Ge(D7,{onSrcNumber:g}),Ge(N(Wf),{orientation:"vertical",class:"SeparatorRoot"}),Ge(M7,{onDstNumber:y})])):ne("",!0),Ge(m7,{"header-is-visible":!m.value,onSendSms:v,onSendMessage:w,onSendMessageAttachment:$,onHeight:j[0]||(j[0]=se=>r("height",se))},null,8,["header-is-visible"])]),N(o).hasErrorEnablingSms?(E(),ue(W7,{key:0,number:N(lo)(N(o).number)},null,8,["number"])):ne("",!0),N(o).hasErrorFailedSms?(E(),ue(Q7,{key:1})):ne("",!0)],64))}}),P6=te(n6,[["__scopeId","data-v-d202c435"]]),r6={},s6={width:"16",height:"14",viewBox:"0 0 16 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i6=b("path",{d:"M15.5 5.35306H9.76125L8 -6.10352e-05L6.23875 5.35306H0.5L5.19406 8.64681L3.36594 13.9999L8 10.6824L12.6341 13.9999L10.8025 8.64681L15.5 5.35306Z",fill:"#ffb325"},null,-1),o6=[i6];function a6(n,e){return E(),R("svg",s6,o6)}const D6=te(r6,[["render",a6]]),l6={},c6={width:"16",height:"14",viewBox:"0 0 16 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},u6=b("path",{d:"M15.5 5.35306H9.76125L8 -6.10352e-05L6.23875 5.35306H0.5L5.19406 8.64681L3.36594 13.9999L8 10.6824L12.6341 13.9999L10.8025 8.64681L15.5 5.35306Z",fill:"#0676C5"},null,-1),d6=[u6];function f6(n,e){return E(),R("svg",c6,d6)}const L6=te(l6,[["render",f6]]),h6={},p6={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},m6=b("path",{d:"M14.9668 11.5666C14.8037 11.3929 14.2278 10.8791 13.169 10.1994C12.1025 9.5138 11.3159 9.0863 11.0903 8.98661C11.0704 8.97779 11.0485 8.97456 11.0269 8.97726C11.0053 8.97995 10.9849 8.98848 10.9678 9.00192C10.6044 9.28536 9.99247 9.80599 9.95966 9.83411C9.74779 10.0157 9.74779 10.0157 9.57435 9.95911C9.26935 9.85911 8.32185 9.35599 7.49623 8.52849C6.6706 7.70099 6.14154 6.73005 6.04154 6.42536C5.98435 6.25161 5.98435 6.25161 6.16654 6.03974C6.19466 6.00692 6.7156 5.39505 6.99904 5.03192C7.01248 5.01482 7.02101 4.99438 7.02371 4.9728C7.02641 4.95122 7.02317 4.92931 7.01435 4.90942C6.91466 4.68349 6.48716 3.89724 5.80154 2.83067C5.12091 1.77224 4.60779 1.1963 4.43404 1.03317C4.41809 1.01813 4.39839 1.00766 4.37699 1.00288C4.3556 0.998092 4.33331 0.999167 4.31248 1.00599C3.70512 1.2147 3.11912 1.48102 2.56248 1.8013C2.02511 2.11368 1.51636 2.47289 1.04216 2.87474C1.02561 2.88881 1.0132 2.90712 1.00626 2.92771C0.999327 2.9483 0.998126 2.97039 1.00279 2.99161C1.0681 3.29599 1.38029 4.56661 2.34904 6.32661C3.33748 8.12286 4.02248 9.04317 5.47404 10.4897C6.9256 11.9363 7.87498 12.6625 9.6731 13.651C11.4331 14.6197 12.7044 14.9322 13.0081 14.9969C13.0294 15.0015 13.0515 15.0003 13.0721 14.9934C13.0928 14.9865 13.1111 14.9741 13.1253 14.9575C13.5271 14.4834 13.8862 13.9746 14.1984 13.4372C14.5186 12.8806 14.7849 12.2946 14.9937 11.6872C15.0004 11.6666 15.0014 11.6445 14.9967 11.6233C14.992 11.6021 14.9817 11.5825 14.9668 11.5666Z",fill:"#0676C5"},null,-1),g6=[m6];function y6(n,e){return E(),R("svg",p6,g6)}const _6=te(h6,[["render",y6]]),b6={},v6={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},C6=b("path",{d:"M10.4995 6.5V4C10.4995 3.86739 10.4468 3.74021 10.3531 3.64645C10.2593 3.55268 10.1321 3.5 9.99951 3.5H0.999512C0.866903 3.5 0.739726 3.55268 0.645958 3.64645C0.55219 3.74021 0.499512 3.86739 0.499512 4V12C0.499512 12.1326 0.55219 12.2598 0.645958 12.3536C0.739726 12.4473 0.866903 12.5 0.999512 12.5H9.99951C10.1321 12.5 10.2593 12.4473 10.3531 12.3536C10.4468 12.2598 10.4995 12.1326 10.4995 12V9.5L15.4995 12.5V3.5L10.4995 6.5Z",fill:"#0676C5"},null,-1),k6=[C6];function w6(n,e){return E(),R("svg",v6,k6)}const R6=te(b6,[["render",w6]]);export{N0 as A,A6 as B,D6 as C,L6 as a,_6 as b,R6 as c,P6 as d,_e as e,ur as f,$c as g,G1 as h,K1 as i,Mn as j,ci as k,eu as l,$a as m,Q1 as n,Wm as o,N6 as p,m1 as q,co as r,gt as s,nu as t,$r as u,g0 as v,At as w,Ot as x,En as y,Sn as z};
//# sourceMappingURL=ChatMeeting-8plBbq7X.js.map
