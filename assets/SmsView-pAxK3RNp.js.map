{"version":3,"file":"SmsView-pAxK3RNp.js","sources":["../../node_modules/date-fns/isEqual.mjs","../../src/components/SMS/Header/SmsHeaderRightContent.vue","../../src/components/SMS/Header/SmsNumber.vue","../../src/components/SMS/Header/SmsHeaderLeftContent.vue","../../src/components/SMS/Header/BaseSMSHeader.vue","../../src/components/SMS/Content/NewSms.vue","../../src/components/SMS/Content/ChatSms/BaseChatSms.vue","../../src/components/SMS/Content/NewSmsUnknown.vue","../../src/components/SMS/Content/BaseSmsContent.vue","../../src/views/SmsView.vue"],"sourcesContent":["import { toDate } from \"./toDate.mjs\";\n\n/**\n * @name isEqual\n * @category Common Helpers\n * @summary Are the given dates equal?\n *\n * @description\n * Are the given dates equal?\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n *\n * @param dateLeft - The first date to compare\n * @param dateRight - The second date to compare\n *\n * @returns The dates are equal\n *\n * @example\n * // Are 2 July 2014 06:30:45.000 and 2 July 2014 06:30:45.500 equal?\n * const result = isEqual(\n *   new Date(2014, 6, 2, 6, 30, 45, 0),\n *   new Date(2014, 6, 2, 6, 30, 45, 500)\n * )\n * //=> false\n */\nexport function isEqual(leftDate, rightDate) {\n  const _dateLeft = toDate(leftDate);\n  const _dateRight = toDate(rightDate);\n  return +_dateLeft === +_dateRight;\n}\n\n// Fallback for modularized imports:\nexport default isEqual;\n","<template>\n  <div class=\"sms-header-right-container\">\n    <button\n      class=\"favorite-container\"\n      :class=\"{'is-favorite': smsMessageStore.unknownNumberIsFavorite(dstNumber as string)}\"\n      :disabled=\"favoriteIAndCallsDisabled\"\n      @click=\"handleToggleFavorite\"\n    >\n      <ChatStarYellow class=\"yellow\" />\n      <ChatStar class=\"blue\" />\n    </button>\n    <button\n      class=\"call-container\"\n      :disabled=\"favoriteIAndCallsDisabled\"\n      @click=\"handleNewCall\"\n    >\n      <ChatPhone />\n    </button>\n    <button class=\"meeting-container\" disabled>\n      <ChatMeeting />\n    </button>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { useI18n } from 'vue-i18n';\nimport { computed, inject } from 'vue';\nimport type { Ref } from 'vue';\nimport {\n  useUserAgent,\n  useSetFavorite,\n  useDeleteFavoritePhone,\n} from '@/composables';\nimport { useRoute, useRouter } from 'vue-router';\nimport { RouteName } from '@/enums';\nimport { useSmsMessageStore, useWebrtcStore } from '@/stores';\nimport { toastError } from '@/utils';\nimport ChatStarYellow from '@/components/Chat/ChatStarYellow.vue';\nimport ChatStar from '@/components/Chat/ChatStar.vue';\nimport ChatPhone from '@/components/Chat/ChatPhone.vue';\nimport ChatMeeting from '@/components/Chat/ChatMeeting.vue';\n\nconst { t } = useI18n();\nconst route = useRoute();\nconst router = useRouter();\nconst { newCall } = useUserAgent();\nconst smsMessageStore = useSmsMessageStore();\nconst webrtcStore = useWebrtcStore();\n\nconst dstNumber = inject<Ref<string>>('dstNumber');\n\nfunction handleNewCall() {\n  if (webrtcStore.userAgentArray.length === 0) {\n    return toastError(t('No active number'));\n  }\n\n  if (dstNumber) {\n    newCall(dstNumber.value);\n  }\n}\n\nasync function handleToggleFavorite() {\n  if (smsMessageStore.unknownNumberIsFavorite(dstNumber?.value as string)) {\n    await useDeleteFavoritePhone(dstNumber?.value as string);\n    if (route.name === RouteName.FavoritePhone) {\n      await router.replace({\n        name: RouteName.SendSms,\n        params: { id: dstNumber?.value },\n      });\n    }\n    return;\n  }\n\n  await useSetFavorite(dstNumber?.value as string, 'phone');\n  return;\n}\n\nconst favoriteIAndCallsDisabled = computed(() => {\n  return route.name === RouteName.Sms;\n});\n</script>\n\n<style scoped>\n.sms-header-right-container {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n</style>\n","<template>\n  <GlobalText as=\"h2\" :size=\"16\" class=\"m-0\">{{\n    phoneMasked(String(number))\n  }}</GlobalText>\n</template>\n\n<script setup lang=\"ts\">\nimport { inject } from 'vue';\nimport type { Ref } from 'vue';\nimport { phoneMasked } from '@/utils';\nimport { GlobalText } from '@/components/Global/Text';\n\nconst number = inject<Ref<string>>('dstNumber');\n</script>\n","<template>\n  <div class=\"d-flex gap-2\">\n    <SidebarToogle />\n    <div\n      v-on-click-outside=\"isOpenFalsy\"\n      class=\"sms-header-left-container\"\n      @focusin=\"isOpenTruthy\"\n    >\n      <div>\n        <GlobalContainerAvatar\n          v-if=\"\n            route.name === RouteName.SendSms ||\n            route.name === RouteName.FavoritePhone ||\n            hasNumber\n          \"\n          background-color=\"type-unknown\"\n          radius=\"5\"\n          container-size=\"24\"\n        >\n          <IPerson size=\"14.4\" />\n        </GlobalContainerAvatar>\n        <GlobalContainerAvatar\n          v-else\n          background-color=\"bg-subtle\"\n          radius=\"5\"\n          container-size=\"24\"\n        >\n          <IPerson size=\"14.4\" color=\"type-directory\" />\n        </GlobalContainerAvatar>\n      </div>\n      <template v-if=\"route.name === RouteName.Sms\">\n        <GlobalText color=\"text-secondary\" :size=\"16\">\n          {{ t('To') }}:\n        </GlobalText>\n        <div class=\"sms-header-left-input-container\">\n          <input\n            ref=\"inputRef\"\n            type=\"text\"\n            class=\"sms-header-left-input\"\n            @input=\"handleSearch\"\n            @blur=\"blurSearchContact\"\n          />\n          <DroddownContacts\n            v-if=\"isOpen && users.length > 0\"\n            class=\"sms-header-left-dropdown\"\n            :match-contacts-length=\"matchContacts.length\"\n            :users=\"users\"\n            @contact-selected=\"handleSelectedContact\"\n            @load-more=\"handleLoadMore\"\n          />\n        </div>\n      </template>\n      <SmsNumber v-else />\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { useI18n } from 'vue-i18n';\nimport { useFocus } from '@vueuse/core';\nimport { computed, onMounted, ref } from 'vue';\nimport type { SearchContact } from '@/types';\nimport { search } from '@/composables';\nimport DroddownContacts from '@/components/Search/DroddownContacts.vue';\nimport { vOnClickOutside } from '@vueuse/components';\nimport { useRoute, useRouter } from 'vue-router';\nimport { RouteName } from '@/enums';\nimport { extractNumber, isNumeric, phoneMasked } from '@/utils';\nimport { useSmsMessageStore, useUserStore } from '@/stores';\nimport SmsNumber from '@/components/SMS/Header/SmsNumber.vue';\nimport { GlobalText } from '@/components/Global/Text';\nimport GlobalContainerAvatar from '@/components/Global/GlobalContainerAvatar.vue';\nimport IPerson from '@/components/Icons/IPerson.vue';\nimport SidebarToogle from '@/components/Sidebar/SidebarToogle.vue';\n\nconst { t } = useI18n();\nconst router = useRouter();\nconst route = useRoute();\nconst userStore = useUserStore();\nconst smsMessageStore = useSmsMessageStore();\n\nconst inputRef = ref<HTMLInputElement>();\nuseFocus(inputRef, { initialValue: true });\n\nconst steps = ref(3);\nconst start = ref(0);\nconst end = ref(steps.value);\nconst isOpen = ref(false);\n\nconst matchContacts = ref<SearchContact[]>([]);\nconst users = ref<SearchContact[]>([]);\n\nconst hasNumber = computed(() => !!route.query.number);\n\nfunction isOpenTruthy() {\n  isOpen.value = true;\n}\n\nfunction isOpenFalsy() {\n  isOpen.value = false;\n}\n\nasync function handleSearch(event: Event) {\n  const minLength = 3;\n\n  matchContacts.value = [];\n  users.value = [];\n\n  start.value = 0;\n  end.value = steps.value;\n\n  const contact = (event.target as HTMLInputElement).value;\n  const world = isNumeric(extractNumber(contact))\n    ? extractNumber(contact)\n    : contact;\n  if (world.length < minLength) {\n    isOpenFalsy();\n    return;\n  }\n  try {\n    const response = await search(world);\n    if (response) {\n      matchContacts.value = [];\n      users.value = [];\n      for await (const row of response) {\n        matchContacts.value.push({\n          name: row.user_name,\n          number: row.number,\n          userId: row.user_id,\n        });\n      }\n      users.value = matchContacts.value.slice(start.value, end.value);\n    }\n  } finally {\n    isOpenTruthy();\n  }\n}\n\nasync function handleSelectedContact(contact: SearchContact) {\n  if (contact.userId === userStore.user.userId) {\n    await router.push({ name: RouteName.Home });\n    return;\n  }\n\n  await router.push({\n    name: RouteName.Directory,\n    params: { id: contact.userId },\n    query: { number: contact.number },\n  });\n}\n\nfunction handleLoadMore() {\n  start.value += steps.value;\n  end.value += steps.value;\n  users.value = [\n    ...users.value,\n    ...matchContacts.value.slice(start.value, end.value),\n  ];\n}\n\nasync function blurSearchContact(event: Event) {\n  const value = (event.target as HTMLInputElement).value;\n  if (!value) {\n    await router.push({\n      name: RouteName.Sms,\n      query: {},\n    });\n  }\n  const isNumber = isNumeric(extractNumber(value));\n  const world = isNumber ? extractNumber(phoneMasked(value)) : value;\n\n  if (\n    matchContacts.value.length === 1 &&\n    world === matchContacts.value[0].number\n  ) {\n    const contact = matchContacts.value[0];\n    await handleSelectedContact(contact);\n  } else if (smsMessageStore.getContactUnknownSmsByNumber(world)) {\n    smsMessageStore.chatIsActiveIsFalsy();\n    await router.push({\n      name: RouteName.SendSms,\n      params: {\n        id: world,\n      },\n    });\n  } else if (isNumber) {\n    smsMessageStore.chatIsActiveIsFalsy();\n    await router.push({\n      name: RouteName.Sms,\n      query: { number: world },\n    });\n  }\n}\n\nonMounted(() => {\n  const queryNumber = route.query.number;\n  const number = queryNumber ? String(queryNumber) : null;\n\n  if (number) {\n    (inputRef.value as HTMLInputElement).value = number;\n  }\n});\n</script>\n\n<style scoped>\n.sms-header-left-container {\n  display: flex;\n  gap: 11px;\n  align-items: center;\n  border-radius: 0.375em;\n  padding: 0.3125em;\n  transition: 0.2s;\n}\n\n.sms-header-left-input-container {\n  position: relative;\n  margin-left: -8px;\n  width: 100%;\n}\n\n.sms-header-left-input {\n  border: none;\n  color: var(--text-primary);\n  width: 262px;\n}\n\n.sms-header-left-dropdown {\n  border: 1px solid var(--line);\n  border-radius: 8px;\n  top: 30px;\n}\n</style>\n","<template>\n  <div class=\"sms-header-container\">\n    <SmsHeaderLeftContent />\n    <SmsHeaderRightContent />\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport SmsHeaderRightContent from '@/components/SMS/Header/SmsHeaderRightContent.vue';\nimport SmsHeaderLeftContent from '@/components/SMS/Header/SmsHeaderLeftContent.vue';\nimport type { Ref } from 'vue';\nimport { inject } from 'vue';\n\nconst width = inject<Ref<string>>('width');\n</script>\n\n<style scoped>\n.sms-header-container {\n  display: flex;\n  flex: 1;\n  align-items: center;\n  justify-content: space-between;\n  padding: 0 16px;\n  background-color: #fff;\n  height: 60px;\n  width: v-bind('width');\n}\n</style>\n","<template>\n  <div class=\"new-sms-container\">\n    <svg\n      xmlns=\"http://www.w3.org/2000/svg\"\n      width=\"248\"\n      height=\"201\"\n      viewBox=\"0 0 248 201\"\n      fill=\"none\"\n    >\n      <path\n        d=\"M123.567 200.503C191.811 200.503 247.134 155.619 247.134 100.252C247.134 44.8842 191.811 0 123.567 0C55.3227 0 0 44.8842 0 100.252C0 155.619 55.3227 200.503 123.567 200.503Z\"\n        fill=\"url(#paint0_linear_4109_78028)\"\n      />\n      <g style=\"mix-blend-mode: multiply\" opacity=\"0.3\">\n        <path\n          fill-rule=\"evenodd\"\n          clip-rule=\"evenodd\"\n          d=\"M137.181 199.874C137.176 199.884 137.172 199.894 137.167 199.903L138.947 199.704C138.358 199.764 137.77 199.821 137.181 199.874ZM138.176 197.762C137.825 198.509 137.481 199.241 137.181 199.874C132.655 200.286 128.112 200.495 123.566 200.503C120.171 200.503 116.83 200.376 113.507 200.158C113.531 198.15 113.593 196.221 113.634 194.973C113.655 194.314 113.67 193.845 113.67 193.657C113.95 191.349 114.92 189.178 116.452 187.429C117.984 185.68 120.008 184.433 122.259 183.852C124.536 183.382 126.907 183.745 128.939 184.875C130.972 186.004 132.531 187.825 133.335 190.007C134.062 181.473 134.97 172.557 139.509 165.294C141.567 161.992 144.334 159.19 147.61 157.092C150.886 154.994 154.589 153.652 158.448 153.164C162.983 152.69 167.559 153.528 171.631 155.579L171.468 155.688C165.106 160.873 159.267 166.669 154.036 172.993C148.809 179.32 144.206 186.137 140.29 193.348C139.883 194.125 139.011 195.983 138.176 197.762ZM172.739 156.233C175.191 157.619 177.35 159.469 179.094 161.681C181.487 164.745 182.996 168.405 183.457 172.265C183.918 176.126 183.313 180.038 181.709 183.58C180.26 186.458 178.269 189.029 175.844 191.152C163.978 195.615 151.58 198.509 138.965 199.759C146.918 184.433 159.302 167.51 172.503 156.76C172.585 156.7 172.649 156.62 172.691 156.528C172.732 156.436 172.749 156.334 172.739 156.233Z\"\n          fill=\"#0676C5\"\n        />\n      </g>\n      <path\n        fill-rule=\"evenodd\"\n        clip-rule=\"evenodd\"\n        d=\"M239.278 65C232.949 51.3313 223.046 39.0816 210.492 29H62C59.7909 29 58 30.7909 58 33V61C58 63.2091 59.7909 65 62 65H239.278Z\"\n        fill=\"white\"\n      />\n      <path d=\"M208 44H126V50H208V44Z\" fill=\"#CBD5DB\" />\n      <path d=\"M119 44H96V50H119V44Z\" fill=\"#CBD5DB\" />\n      <rect x=\"66\" y=\"37\" width=\"20\" height=\"20\" rx=\"4\" fill=\"#0676C5\" />\n      <circle cx=\"76\" cy=\"47\" r=\"4\" fill=\"white\" />\n      <rect x=\"94\" y=\"61\" width=\"126\" height=\"62\" rx=\"4\" fill=\"white\" />\n      <rect x=\"100\" y=\"68\" width=\"12\" height=\"12\" rx=\"2\" fill=\"#0676C5\" />\n      <circle cx=\"106\" cy=\"74\" r=\"2\" fill=\"white\" />\n      <path d=\"M208 71H116V77H208V71Z\" fill=\"#CBD5DB\" />\n      <rect x=\"100\" y=\"86\" width=\"12\" height=\"12\" rx=\"2\" fill=\"#0676C5\" />\n      <circle cx=\"106\" cy=\"92\" r=\"2\" fill=\"white\" />\n      <path d=\"M188 89H116V95H188V89Z\" fill=\"#CBD5DB\" />\n      <rect x=\"100\" y=\"104\" width=\"12\" height=\"12\" rx=\"2\" fill=\"#0676C5\" />\n      <circle cx=\"106\" cy=\"110\" r=\"2\" fill=\"white\" />\n      <path d=\"M201 107H116V113H201V107Z\" fill=\"#CBD5DB\" />\n      <path\n        d=\"M89.164 83.5224L79.1038 95.5947L84.4692 56.6953L86.4588 57.6901C88.5333 58.7273 89.8581 60.8328 89.8955 63.1518L89.164 83.5224Z\"\n        fill=\"#2F2E41\"\n      />\n      <path\n        d=\"M125.599 80.2832L149.868 108.725L162.574 101.927L133.111 73.6169C133.329 72.1661 133.146 70.6385 132.488 69.2057C130.687 65.2808 126.046 63.5589 122.121 65.3598C118.196 67.1605 116.474 71.8021 118.275 75.7269C119.622 78.6638 122.561 80.3663 125.599 80.2832Z\"\n        fill=\"#FFB8B8\"\n      />\n      <path\n        d=\"M95.3515 134.532L90.6568 123.13C90.6568 123.13 91.3274 115.082 105.412 113.07C119.496 111.058 146.235 109.046 146.235 109.046L137.001 94.6219L149.917 88.1641L155.316 92.5L163.147 100.742C168.133 108.675 165.115 120.943 158.307 124.471C151.5 128 145.565 129.166 145.565 129.166L95.3515 134.532Z\"\n        fill=\"#0676C5\"\n      />\n      <path\n        fill-rule=\"evenodd\"\n        clip-rule=\"evenodd\"\n        d=\"M101.209 198.866V189.584L96.4093 170.27C100.974 160.228 100.182 153.195 99.1569 144.087C98.8211 141.104 98.4603 137.898 98.2544 134.291L103.584 114.038L86.8167 112.398L81.4512 95.9297H60.1084L55.2948 110.685L25.1143 124.769L31.821 156.291L36.1593 171.113C53.5221 185.21 76.0334 195.133 101.209 198.866Z\"\n        fill=\"#0676C5\"\n      />\n      <path\n        fill-rule=\"evenodd\"\n        clip-rule=\"evenodd\"\n        d=\"M36.9386 171.741L40.8754 127.452L29.4739 122.757C29.4739 122.757 21.4257 123.428 19.4137 137.512C18.8865 141.202 18.3592 146.459 17.8682 152.207C23.2154 159.353 29.6323 165.912 36.9386 171.741Z\"\n        fill=\"#0676C5\"\n      />\n      <path\n        d=\"M72.0123 94.7419C60.9147 94.7419 51.9182 85.7455 51.9182 74.6478C51.9182 63.5502 60.9147 54.5537 72.0123 54.5537C83.11 54.5537 92.1064 63.5502 92.1064 74.6478C92.1064 85.7455 83.11 94.7419 72.0123 94.7419Z\"\n        fill=\"#FFB8B8\"\n      />\n      <path\n        d=\"M33.8305 115.836C36.9975 115.836 39.9218 115.569 42.8991 116.759C45.4542 119.093 49 120 51.6633 120.744C52.1926 120.744 53.6279 120.699 55.4364 120.919C65.0492 120.596 76.6549 114.997 88.1218 110.605C91 109.5 93.5 110 95.8716 111.02C91.3602 104.498 92.1814 95.3556 86.6921 90.4385C77.9558 82.6245 85.3267 71.2495 88.98 60.6495C89.0908 57.9003 87.4025 55.391 84.8101 54.4592L77.7157 51.913C54.8188 43.6952 38.3245 57.5668 35 78C34.1144 83.4431 34.7161 91.2134 35.9801 96.601C37.4008 102.662 34.8174 112.948 33.8305 115.836Z\"\n        fill=\"#2F2E41\"\n      />\n      <defs>\n        <linearGradient\n          id=\"paint0_linear_4109_78028\"\n          x1=\"123.567\"\n          y1=\"0\"\n          x2=\"123.567\"\n          y2=\"200.503\"\n          gradientUnits=\"userSpaceOnUse\"\n        >\n          <stop stop-color=\"#0676C5\" stop-opacity=\"0.5\" />\n          <stop offset=\"1\" stop-color=\"#0676C5\" stop-opacity=\"0\" />\n        </linearGradient>\n      </defs>\n    </svg>\n    <span class=\"new-sms-content\">{{\n      t('Enter a number or contact name to get started.')\n    }}</span>\n  </div>\n</template>\n\n<script lang=\"ts\" setup>\nimport { useI18n } from 'vue-i18n';\n\nconst { t } = useI18n();\n</script>\n\n<style scoped>\n.new-sms-container {\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  gap: 28px;\n  max-width: 248px;\n}\n\n.new-sms-content {\n  line-height: 22px;\n  text-align: center;\n  letter-spacing: -0.24px;\n  color: var(--text-primary);\n}\n</style>\n","<template>\n  <div ref=\"containerRef\" class=\"base-chat-sms-container\">\n    <template v-for=\"(message, index) in unknownSmsMessages\" :key=\"index\">\n      <BaseDayDivider\n        v-if=\"isFirstMessageOfTheDay(index)\"\n        :key=\"message.id\"\n        :date-string=\"message.createdAt\"\n      />\n      <MessageSms\n        :id=\"message.id\"\n        ref=\"messageSmsRef\"\n        :date=\"message.createdAt\"\n        :me=\"userStore.user.userId === message.srcUser\"\n        :message=\"message.content\"\n        :src-user=\"message.srcUser\"\n        :status=\"message.status\"\n        :src-number=\"message.srcNumber\"\n        :dst-number=\"message.dstNumber\"\n      />\n    </template>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport BaseDayDivider from '@/components/Chat/BaseDayDivider.vue';\nimport MessageSms from '@/components/SMS/Content/ChatSms/MessageSms.vue';\nimport { computed, inject, onMounted, ref, toRefs, watch } from 'vue';\nimport type { Ref } from 'vue';\nimport { format, isEqual } from 'date-fns';\nimport { useSmsMessageStore, useUserStore } from '@/stores';\nimport { useScroll, useEventListener } from '@vueuse/core';\nimport { useRoute } from 'vue-router';\nimport type { UnknownSmsMessage } from '@/types';\n\nconst heightMinimum = 100;\nconst diffHeight = inject<Ref<number>>('diffHeight');\n\nconst smsMessageStore = useSmsMessageStore();\nconst userStore = useUserStore();\nconst route = useRoute();\n\nconst unknownSmsMessages = ref<UnknownSmsMessage[]>([]);\n\nfunction filterUnknownSmsMessages(message: UnknownSmsMessage) {\n  const lastElementIndex = message.status.length - 1;\n  const hasFailed = message.status[lastElementIndex].status === 'failed';\n\n  const me = userStore.user.userId === message.srcUser;\n\n  return !(hasFailed && !me);\n}\n\nconst containerRef = ref<HTMLDivElement>();\nconst messageSmsRef = ref<any[]>([]);\nconst { y, directions } = useScroll(containerRef);\nconst { top: toTop } = toRefs(directions);\nconst loadMessages = ref(false);\n\nconst isFirstMessageOfTheDay = computed(() => {\n  return (index: number) => {\n    const messages = unknownSmsMessages;\n    const indexFirstElement = 0;\n\n    if (messages.value.length === 1 || index === indexFirstElement) return true;\n    const currentDateFormatted = format(\n      new Date(messages.value[index].createdAt),\n      'dd-MM-yyyy'\n    );\n    const previousDateFormatted = format(\n      new Date(messages.value[index - 1].createdAt),\n      'dd-MM-yyyy'\n    );\n    return currentDateFormatted !== previousDateFormatted;\n  };\n});\n\nfunction scrollByDataMessage(dataMessageId: string | null) {\n  const element = containerRef.value?.querySelector<HTMLDivElement>(\n    `[data-message=\"${dataMessageId}\"]`\n  );\n\n  if (dataMessageId && element) {\n    const offsetTop = element.offsetTop;\n    const offsetHeight = element.offsetHeight;\n    const scrollTop = offsetTop - offsetHeight;\n    containerRef.value?.scrollTo({ top: scrollTop });\n    window.history.pushState({}, document.title, window.location.pathname);\n    return;\n  }\n\n  containerRef.value?.scrollTo({\n    top: containerRef.value.scrollHeight,\n  });\n}\n\nasync function scrollUp() {\n  const number = String(route.params.id);\n\n  const firstMessageDate =\n    await smsMessageStore.getFirstMessageDateDateByNumber(number);\n  const contactUnknownSms =\n    smsMessageStore.getContactUnknownSmsByNumber(number);\n\n  if (\n    contactUnknownSms &&\n    isEqual(contactUnknownSms.firstMessageDate, new Date(firstMessageDate))\n  ) {\n    return;\n  }\n  const containerElement = containerRef.value as HTMLDivElement;\n  if (!loadMessages.value && y.value <= heightMinimum) {\n    loadMessages.value = true;\n    containerElement.style.overflowY = 'hidden';\n    const oldScrollHeight = containerElement.scrollHeight;\n    const scrollTop = y.value;\n    await smsMessageStore.syncGetUnknownBatch({\n      date: firstMessageDate,\n      number,\n    });\n    setTimeout(() => {\n      loadMessages.value = false;\n      containerElement.style.overflowY = 'auto';\n      const newScrollHeight = containerElement.scrollHeight;\n      containerElement.scrollTo({\n        top: newScrollHeight - oldScrollHeight + scrollTop,\n      });\n    }, 50);\n  }\n}\n\nwatch(\n  [() => route.params.id, () => smsMessageStore.unknownSmsMessages],\n  ([number]) => {\n    smsMessageStore.checkSmsUnknownRead(String(number));\n    unknownSmsMessages.value = smsMessageStore.unknownSmsMessages.filter(\n      filterUnknownSmsMessages\n    );\n\n    setTimeout(() => {\n      scrollByDataMessage(null);\n    }, 100);\n  },\n  { deep: true }\n);\n\nwatch(\n  () => diffHeight?.value,\n  (diff) => {\n    if (diff && containerRef.value) {\n      const scrollTop = containerRef.value.scrollTop;\n      containerRef.value.scrollTop = scrollTop + diff;\n    }\n  }\n);\n\nonMounted(() => {\n  const number = String(route.params.id);\n  smsMessageStore.checkSmsUnknownRead(number);\n\n  unknownSmsMessages.value = smsMessageStore.unknownSmsMessages.filter(\n    filterUnknownSmsMessages\n  );\n\n  setTimeout(() => {\n    const dataMessageQuery = route.query.dataMessage\n      ? String(route.query.dataMessage)\n      : null;\n\n    scrollByDataMessage(dataMessageQuery);\n  }, 100);\n\n  useEventListener(containerRef.value as any, 'scroll' as any, () => {\n    if (toTop.value) {\n      scrollUp();\n    }\n  });\n});\n</script>\n\n<style scoped>\n.base-chat-sms-container {\n  display: flex;\n  height: 100%;\n  flex-direction: column;\n  width: 100%;\n  background-color: var(--brand-blue-100);\n  padding: 20px 0;\n  overflow-y: auto;\n  border-top: 1px solid var(--line);\n  border-bottom: 1px solid var(--line);\n}\n</style>\n","<template>\n  <div class=\"new-sms-unknown-container\">\n    <div class=\"new-sms-unknown-icon-container\">\n      <svg\n        xmlns=\"http://www.w3.org/2000/svg\"\n        width=\"248\"\n        height=\"201\"\n        viewBox=\"0 0 248 201\"\n        fill=\"none\"\n      >\n        <g clip-path=\"url(#clip0_4114_78891)\">\n          <path\n            d=\"M123.567 200.503C191.811 200.503 247.134 155.619 247.134 100.252C247.134 44.8842 191.811 0 123.567 0C55.3227 0 0 44.8842 0 100.252C0 155.619 55.3227 200.503 123.567 200.503Z\"\n            fill=\"url(#paint0_linear_4114_78891)\"\n          />\n          <g style=\"mix-blend-mode: multiply\" opacity=\"0.3\">\n            <path\n              d=\"M137.167 199.903C138.184 197.761 139.709 194.456 140.29 193.348C144.206 186.137 148.809 179.32 154.036 172.993C159.267 166.669 165.106 160.873 171.468 155.688L171.631 155.579C167.559 153.528 162.983 152.69 158.448 153.164C154.589 153.652 150.886 154.994 147.61 157.092C144.334 159.19 141.567 161.992 139.509 165.294C134.97 172.557 134.062 181.473 133.335 190.007C132.531 187.825 130.972 186.004 128.939 184.875C126.907 183.745 124.536 183.382 122.259 183.852C120.008 184.433 117.984 185.68 116.452 187.429C114.92 189.178 113.95 191.349 113.67 193.657C113.67 194.202 113.543 197.089 113.507 200.158C116.83 200.376 120.171 200.503 123.566 200.503C128.703 200.494 133.836 200.228 138.947 199.704L137.167 199.903Z\"\n              fill=\"#0676C5\"\n            />\n          </g>\n          <g style=\"mix-blend-mode: multiply\" opacity=\"0.3\">\n            <path\n              d=\"M179.095 161.681C177.35 159.469 175.191 157.619 172.739 156.233C172.749 156.334 172.732 156.436 172.691 156.528C172.65 156.62 172.585 156.7 172.503 156.76C159.302 167.51 146.918 184.433 138.965 199.759C151.58 198.509 163.978 195.615 175.844 191.152C178.269 189.029 180.26 186.458 181.709 183.58C183.313 180.038 183.918 176.126 183.457 172.265C182.996 168.405 181.487 164.745 179.095 161.681Z\"\n              fill=\"#0676C5\"\n            />\n          </g>\n          <path d=\"M120 77H85V83H120V77Z\" fill=\"#67748E\" fill-opacity=\"0.3\" />\n          <rect\n            x=\"61\"\n            y=\"26\"\n            width=\"20\"\n            height=\"20\"\n            rx=\"4\"\n            fill=\"url(#paint1_linear_4114_78891)\"\n          />\n          <rect x=\"85\" y=\"26\" width=\"150\" height=\"47\" rx=\"4\" fill=\"white\" />\n          <path d=\"M226 34H94V40H226V34Z\" fill=\"#67748E\" fill-opacity=\"0.25\" />\n          <path d=\"M209 47H94V53H209V47Z\" fill=\"#67748E\" fill-opacity=\"0.25\" />\n          <path d=\"M218 60H94V66H218V60Z\" fill=\"#67748E\" fill-opacity=\"0.25\" />\n          <circle cx=\"71\" cy=\"36\" r=\"4\" fill=\"white\" />\n          <path\n            d=\"M211 140H176V146H211V140Z\"\n            fill=\"#67748E\"\n            fill-opacity=\"0.3\"\n          />\n          <rect x=\"215\" y=\"101\" width=\"20\" height=\"20\" rx=\"4\" fill=\"#0676C5\" />\n          <rect x=\"61\" y=\"101\" width=\"150\" height=\"35\" rx=\"4\" fill=\"white\" />\n          <path\n            d=\"M193 109H70V115H193V109Z\"\n            fill=\"#67748E\"\n            fill-opacity=\"0.25\"\n          />\n          <path\n            d=\"M198 122H70V128H198V122Z\"\n            fill=\"#67748E\"\n            fill-opacity=\"0.25\"\n          />\n          <circle cx=\"225\" cy=\"111\" r=\"4\" fill=\"white\" />\n          <path\n            d=\"M149.169 76.4819C149.06 76.966 148.987 77.4576 148.951 77.9527L110.238 100.287L100.832 94.8398L90.8086 107.968L106.533 119.172C107.807 120.067 109.335 120.528 110.891 120.489C112.447 120.45 113.95 119.912 115.177 118.954L155.125 87.4676C156.291 87.9002 157.531 88.0987 158.774 88.0518C160.016 88.0048 161.238 87.7132 162.368 87.1937C163.498 86.6743 164.514 85.9371 165.359 85.0245C166.204 84.1118 166.86 83.0415 167.291 81.8748C168.159 79.5222 168.058 76.9212 167.009 74.6433C165.96 72.3654 164.05 70.5971 161.698 69.7269C160.533 69.2946 159.295 69.0963 158.053 69.1435C156.812 69.1907 155.592 69.4826 154.464 70.0021C153.335 70.5217 152.32 71.2588 151.477 72.1713C150.634 73.0838 149.979 74.1537 149.55 75.3197C149.408 75.6861 149.293 76.0623 149.205 76.4455L149.169 76.4819Z\"\n            fill=\"#FFB8B8\"\n          />\n          <path\n            d=\"M109.712 98.1274C109.598 97.5551 109.36 97.0147 109.015 96.5441C108.67 96.0735 108.226 95.6842 107.714 95.4037L89.9559 85.4711C88.7853 84.5668 87.4478 83.9019 86.0201 83.5147C84.5925 83.1274 83.1026 83.0254 81.6355 83.2142C80.1684 83.4031 78.7529 83.8792 77.4699 84.6154C76.1869 85.3516 75.0615 86.3335 74.1581 87.5049C72.3418 89.8617 71.5307 92.8409 71.9014 95.7932C72.2721 98.7455 73.7946 101.432 76.1373 103.266L90.3008 117.956C90.6698 118.341 91.1112 118.649 91.5997 118.863C92.0882 119.077 92.614 119.193 93.1471 119.203C93.6803 119.213 94.2102 119.118 94.7065 118.922C95.2027 118.727 95.6555 118.436 96.0389 118.065C96.1856 117.933 96.3194 117.787 96.4383 117.629L99.1984 113.998L100.143 112.781L108.949 101.36C109.275 100.947 109.51 100.471 109.639 99.9614C109.808 99.3644 109.833 98.7359 109.712 98.1274Z\"\n            fill=\"#0676C5\"\n          />\n          <path\n            d=\"M68.3468 74.2483C80.5716 74.2483 90.4817 64.3382 90.4817 52.1134C90.4817 39.8886 80.5716 29.9785 68.3468 29.9785C56.122 29.9785 46.2119 39.8886 46.2119 52.1134C46.2119 64.3382 56.122 74.2483 68.3468 74.2483Z\"\n            fill=\"#FFB8B8\"\n          />\n          <path\n            d=\"M93.8047 147.699L48.8268 147.899C47.9752 147.768 47.1039 147.914 46.342 148.316C45.58 148.719 44.9678 149.355 44.5957 150.132C43.8694 151.64 43.1432 153.201 42.4532 154.763C40.7463 158.54 38.3313 165.004 36.1523 171.105C54.6919 186.158 79.1328 196.436 106.388 199.505L97.3092 151.24V150.895C97.1352 150.062 96.703 149.304 96.0739 148.73C95.4447 148.157 94.6507 147.796 93.8047 147.699Z\"\n            fill=\"#2F2E41\"\n          />\n          <path\n            d=\"M96.329 135.896C97.2188 134.553 102.866 125.582 100.723 115.069C100.575 114.289 100.381 113.519 100.142 112.763C99.1295 109.6 97.5209 106.66 95.4032 104.101C95.4032 103.393 95.4032 102.703 95.4032 102.013C95.0771 97.2263 93.0389 92.7168 89.6614 89.3092C86.2838 85.9017 81.7926 83.8236 77.0089 83.4553L52.2592 81.6394C49.0663 81.3892 45.8604 81.9198 42.9183 83.1852C39.9762 84.4506 37.3863 86.4128 35.3719 88.9027C34.8982 89.4798 34.4616 90.0863 34.0646 90.7185C32.5045 93.0749 31.4685 95.7387 31.0268 98.5299C30.5851 101.321 30.7479 104.175 31.5042 106.898L31.7221 107.824L34.355 119.39L38.7675 138.765L42.3992 154.962L42.7804 156.669C42.9857 157.566 43.489 158.367 44.2079 158.94C44.9268 159.514 45.8191 159.827 46.739 159.829H47.3927L95.2941 151.966C95.9554 151.852 96.5788 151.578 97.11 151.167C97.4297 150.906 97.7108 150.6 97.9452 150.259C98.2577 149.809 98.474 149.3 98.5802 148.762C98.6865 148.225 98.6805 147.671 98.5627 147.136L96.329 135.896Z\"\n            fill=\"#0676C5\"\n          />\n          <path\n            d=\"M60.6845 177.57C59.7548 175.162 57.9069 173.222 55.5471 172.177C53.1873 171.131 50.5089 171.066 48.1009 171.995L25.494 163.733L43.7793 113.707L27.9635 106.208L8.22552 166.911C7.65513 168.741 7.83123 170.722 8.7156 172.423C9.59997 174.124 11.1209 175.406 12.9466 175.99L42.7986 185.233C43.0366 185.754 43.3225 186.253 43.6523 186.722C45.1303 188.821 47.3806 190.249 49.9099 190.691C52.4391 191.134 55.0406 190.555 57.1437 189.082C58.9379 187.837 60.2621 186.026 60.9041 183.938C61.5462 181.851 61.4687 179.608 60.6845 177.57Z\"\n            fill=\"#FFB8B8\"\n          />\n          <path\n            d=\"M48.809 83.2552C45.8859 82.3757 42.7382 82.636 39.9992 83.9836C37.2603 85.3311 35.1334 87.6661 34.0464 90.5185C33.9367 90.778 33.8456 91.045 33.774 91.3174L31.4678 96.202L24.477 111.019C23.9913 112.06 23.9364 113.251 24.324 114.332C24.7117 115.414 25.5106 116.298 26.547 116.794L27.1462 117.029L28.508 117.429L34.337 119.245L44.6871 122.368L48.1372 123.421C48.6856 123.589 49.2617 123.647 49.8327 123.592C50.4036 123.537 50.958 123.369 51.4641 123.1C51.9701 122.83 52.4179 122.462 52.7818 122.019C53.1457 121.576 53.4186 121.065 53.5847 120.516C53.5847 120.316 53.6935 120.098 53.7298 119.898L56.9075 98.2721C57.3628 96.7543 57.5144 95.1616 57.3537 93.5852C57.193 92.0088 56.7232 90.4796 55.971 89.0849C55.2189 87.6902 54.1991 86.4576 52.9702 85.4573C51.7413 84.4569 50.3273 83.7086 48.809 83.2552Z\"\n            fill=\"#0676C5\"\n          />\n          <path\n            d=\"M88.6666 44.0702C84.6547 47.4683 79.7504 49.6413 74.5381 50.3303C69.3259 51.0193 64.0256 50.1951 59.2685 47.9561C63.4994 52.9678 71.5254 77.7175 71.5254 77.7175C71.5254 77.7175 48.8457 75.3388 45.6499 74.6487C26.729 70.6176 33.6109 21.6267 53.7665 21.8809C57.1803 21.8809 60.1583 22.3348 62.4281 24.877C63.3199 22.8086 64.8441 21.0759 66.7819 19.9276C68.7197 18.7792 70.9714 18.2744 73.2139 18.4853C75.4458 18.755 77.6023 19.4633 79.5594 20.5696C81.5164 21.6759 83.2354 23.1583 84.6174 24.9315C86.916 27.7188 88.5755 30.9762 89.479 34.4743C90.3825 37.9724 90.5082 41.6261 89.847 45.178L88.6666 44.0702Z\"\n            fill=\"#2F2E41\"\n          />\n        </g>\n        <defs>\n          <linearGradient\n            id=\"paint0_linear_4114_78891\"\n            x1=\"123.567\"\n            y1=\"0\"\n            x2=\"123.567\"\n            y2=\"200.503\"\n            gradientUnits=\"userSpaceOnUse\"\n          >\n            <stop stop-color=\"#0676C5\" stop-opacity=\"0.5\" />\n            <stop offset=\"1\" stop-color=\"#0676C5\" stop-opacity=\"0\" />\n          </linearGradient>\n          <linearGradient\n            id=\"paint1_linear_4114_78891\"\n            x1=\"62.8421\"\n            y1=\"27.3158\"\n            x2=\"79.1579\"\n            y2=\"46\"\n            gradientUnits=\"userSpaceOnUse\"\n          >\n            <stop stop-color=\"#344767\" />\n            <stop offset=\"1\" stop-color=\"#141727\" />\n          </linearGradient>\n          <clipPath id=\"clip0_4114_78891\">\n            <rect width=\"247.134\" height=\"200.503\" fill=\"white\" />\n          </clipPath>\n        </defs>\n      </svg>\n    </div>\n\n    <span class=\"new-sms-unknown-content\"\n      >{{ phoneMasked(number) }} {{ t('is not a') }} {{ appName }}\n      {{ t('user.') }}</span\n    >\n    <span class=\"new-sms-unknown-subtitle\">{{\n      t(\n        'You can only call and text via SMS with numbers outside your organization.'\n      )\n    }}</span>\n  </div>\n</template>\n\n<script lang=\"ts\" setup>\nimport { useI18n } from 'vue-i18n';\nimport { phoneMasked } from '@/utils';\n\ninterface Props {\n  number: string;\n}\n\ndefineProps<Props>();\n\nconst { t } = useI18n();\n\nconst appName = import.meta.env.VITE_APP_NAME;\n</script>\n\n<style scoped>\n.new-sms-unknown-container {\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  gap: 28px;\n  width: 100%;\n}\n\n.new-sms-unknown-icon-container {\n  display: flex;\n  justify-content: center;\n}\n\n.new-sms-unknown-content {\n  color: var(--text-primary);\n  line-height: 22px;\n  text-align: center;\n  letter-spacing: -0.24px;\n}\n\n.new-sms-unknown-subtitle {\n  margin-top: -18px;\n  color: var(--text-secondary);\n  font-size: 14px;\n  letter-spacing: -0.21px;\n  text-align: center;\n  max-width: 258px;\n}\n</style>\n","<template>\n  <div\n    v-if=\"\n      route.name === RouteName.Sms ||\n      smsMessageStore.unknownSmsMessages.length === 0\n    \"\n    class=\"base-content-container\"\n  >\n    <NewSms v-if=\"!number\" />\n    <NewSmsUnknown v-else :number=\"number\" />\n  </div>\n  <BaseChatSms v-else />\n</template>\n\n<script setup lang=\"ts\">\nimport NewSms from '@/components/SMS/Content/NewSms.vue';\nimport { useRoute } from 'vue-router';\nimport { RouteName } from '@/enums';\nimport BaseChatSms from '@/components/SMS/Content/ChatSms/BaseChatSms.vue';\nimport { useSmsMessageStore } from '@/stores';\nimport NewSmsUnknown from '@/components/SMS/Content/NewSmsUnknown.vue';\nimport { useChat } from '@/composables';\nimport type { Ref } from 'vue';\nimport { inject } from 'vue';\n\nconst width = inject<Ref<string>>('width');\n\nconst smsMessageStore = useSmsMessageStore();\nconst route = useRoute();\nconst { number } = useChat();\n</script>\n\n<style scoped>\n.base-content-container {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 100%;\n  background-color: var(--brand-blue-100);\n  width: v-bind('width');\n}\n</style>\n","<template>\n  <div ref=\"containerRef\" class=\"sms-main\">\n    <BaseSMSHeader />\n    <BaseSmsContent />\n    <BaseSmsFooter @dst-number=\"changeDstNumber\" @height=\"changeDiffHeight\" />\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport BaseSMSHeader from '@/components/SMS/Header/BaseSMSHeader.vue';\nimport BaseSmsContent from '@/components/SMS/Content/BaseSmsContent.vue';\nimport BaseSmsFooter from '@/components/SMS/Fotter/BaseSmsFooter.vue';\nimport { onBeforeMount, onMounted, provide, ref, watchEffect } from 'vue';\nimport { useRoute, useRouter } from 'vue-router';\nimport { RouteName } from '@/enums';\nimport { useSmsMessageStore, useUserStore } from '@/stores';\nimport { useApp, useChat } from '@/composables';\n\nconst route = useRoute();\nconst router = useRouter();\nconst userStore = useUserStore();\nconst smsMessageStore = useSmsMessageStore();\nconst { smsButtonIsDisabled } = useApp();\nconst { resizeSms } = useChat();\n\nconst dstNumber = ref('');\nconst diffHeight = ref(0);\nconst width = ref('0p');\n\nconst containerRef = ref<HTMLDivElement>();\n\nfunction changeDstNumber(number: string) {\n  dstNumber.value = number;\n}\n\nfunction changeDiffHeight(diff: number) {\n  diffHeight.value = diff;\n}\n\nfunction resize() {\n  const resizeObserver = new ResizeObserver(function (entries) {\n    const rect = entries[0].contentRect;\n\n    width.value = `${rect.width}px`;\n  });\n\n  resizeObserver.observe(containerRef.value as HTMLDivElement);\n}\n\nprovide('chatDisabled', true);\nprovide('dstNumber', dstNumber);\nprovide('diffHeight', diffHeight);\nprovide('width', width);\n\nwatchEffect(() => {\n  const number = route.query.number ? String(route.query.number) : null;\n\n  if (number && userStore.myNumbers.some((n) => n.numbersUnmasked === number)) {\n    router.push({ name: RouteName.Home });\n  }\n});\n\nonMounted(async () => {\n  resize();\n  resizeSms();\n\n  if (\n    route.name === RouteName.SendSms ||\n    route.name === RouteName.FavoritePhone\n  ) {\n    const number = String(route.params.id);\n    dstNumber.value = number;\n    smsMessageStore.chatIsActiveIsFalsy();\n    smsMessageStore.checkSmsUnknownRead(number);\n    await smsMessageStore.getSmsMessages(number);\n\n    if (smsMessageStore.unknownSmsMessages.length === 0) {\n      await router.push({ name: RouteName.Home });\n    }\n  }\n});\n</script>\n\n<style scoped>\n.sms-main {\n  display: grid;\n  grid-template-rows: 60px auto 172px;\n  height: calc(100dvh - 84px);\n  width: auto;\n}\n</style>\n\n<style lang=\"scss\">\n@import '@/assets/sass/container-chat.scss';\nbody {\n  overflow: hidden;\n}\n</style>\n"],"names":["isEqual","leftDate","rightDate","_dateLeft","toDate","_dateRight","t","useI18n","route","useRoute","router","useRouter","newCall","useUserAgent","smsMessageStore","useSmsMessageStore","webrtcStore","useWebrtcStore","dstNumber","inject","handleNewCall","toastError","handleToggleFavorite","useDeleteFavoritePhone","RouteName","useSetFavorite","favoriteIAndCallsDisabled","computed","number","userStore","useUserStore","inputRef","ref","useFocus","steps","start","end","isOpen","matchContacts","users","hasNumber","isOpenTruthy","isOpenFalsy","handleSearch","event","contact","world","isNumeric","extractNumber","response","search","row","handleSelectedContact","handleLoadMore","blurSearchContact","value","isNumber","phoneMasked","onMounted","queryNumber","width","heightMinimum","diffHeight","unknownSmsMessages","filterUnknownSmsMessages","message","lastElementIndex","hasFailed","me","containerRef","messageSmsRef","directions","useScroll","toTop","toRefs","loadMessages","isFirstMessageOfTheDay","index","messages","currentDateFormatted","format","previousDateFormatted","scrollByDataMessage","dataMessageId","element","_a","offsetTop","offsetHeight","scrollTop","_b","_c","scrollUp","firstMessageDate","contactUnknownSms","containerElement","oldScrollHeight","newScrollHeight","watch","diff","dataMessageQuery","useEventListener","appName","useChat","useApp","resizeSms","changeDstNumber","changeDiffHeight","resize","entries","rect","provide","watchEffect","n"],"mappings":"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","x_google_ignoreList":[0]}