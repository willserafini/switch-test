import{S as aw,_ as lw,a as Ye,h as Mi,E as Js,B as Pn,K as Gr,L as kr,r as x,l as te,M as Mt,u as Vg,N as Bg,O as Ze,P as tt,b as Ug,Q as $n,d as X,j as ve,c as S,m as O,q as R,f as v,n as m,t as L,D as ue,e as H,T as rt,g as lt,C as D,G as de,U as qe,V as ti,s as Ne,W as Vi,X as Ul,p as Bi,y as Z,w as Oe,x as Fe,Y as cw,z as he,Z as jl,$ as ea,A as jo,a0 as jg,a1 as ot,a2 as Hr,a3 as fn,a4 as Ut,a5 as uw,a6 as Wg,a7 as xd,k as ri,a8 as zg,a9 as Rc,R as Me,aa as Si,ab as Th,ac as dw,I as Oo,J as Po,ad as Ui,ae as Ho,af as ji,ag as pw,ah as hw,ai as Wi,aj as ta,ak as Wu,al as $g,F as il,am as Kg,an as fw,ao as zi,ap as gw,aq as Yg,ar as qg,as as Qg,at as vw,au as Fd,av as Lt,aw as $i,ax as Ht,ay as mw,az as yw,aA as Ti,aB as Cw,aC as Nd,aD as Xg,aE as ww,aF as Wl,aG as Tc,aH as _w,aI as bh,aJ as Sw,aK as Zg,aL as Ew,aM as Rw,aN as Tw,aO as oa,aP as Ah,aQ as bw,aR as Aw,aS as Jg,aT as ev,aU as Gd,aV as kd,aW as tv,aX as ov,aY as nv,aZ as Ow,a_ as Pw,a$ as Iw,b0 as ui,b1 as di,b2 as Ji,b3 as Oh,b4 as Dw,b5 as bc,b6 as Ac,b7 as Mw,b8 as Lw,b9 as iv,ba as rv,bb as Ph,bc as xw,bd as Fw,be as Nw,bf as Gw,bg as kw,bh as Hw,bi as Vw,H as Bw,o as Uw,bj as Oc,bk as jw,bl as Ww,bm as zw,bn as $w}from"./main-A7BwrMDB.js";import{u as Ki,a as Rt,o as Za}from"./use-user-agent-gNSz9J2a.js";import{_ as Te}from"./BaseIcon.vue_vue_type_script_setup_true_lang-io_05Ke-.js";import{C as se}from"./color-Ih_vWK5s.js";import{_ as oe}from"./_plugin-vue_export-helper-x3n3nnut.js";import{_ as Wt}from"./BaseModal.vue_vue_type_style_index_0_lang-fG62cZ1v.js";import{G as Dn}from"./GlobalInput-_b9BFpf9.js";import{G as Us}from"./GlobalTable-zZH7TUnX.js";import{_ as ze}from"./index-yeKH0v8d.js";import{I as Sr,G as an,B as js}from"./BaseAvatar-cLayq0TK.js";import{u as Kw,Z as Vr,Q as Br,X as Ur,J as na,I as Hd,Y as Yw,a as jr,r as Vd,b as zl,l as Bd,i as Ud,c as sv,s as av,o as lv,G as qw,d as Qw,q as Xw}from"./index-Gr4YhlML.js";import{L as zu,a as Zw,B as Jw,c as e_}from"./BaseContactTag-YcQXm1ts.js";import{v as ia,D as t_,s as cv,u as ra}from"./DroddownContacts-lrXkBHej.js";import{P as uv,a as dv}from"./PresenceVideo-m2skjI0f.js";import{_ as $8,a as o_}from"./logo_au-qIb2iIvG.js";import{g as ke}from"./index-35H_NU9g.js";import{I as pv}from"./IPhone-TdHhqDC-.js";import{u as jd}from"./use-typing-AKUAkgng.js";import{_ as $l}from"./IGroupV1.vue_vue_type_script_setup_true_lang-O-Dolldc.js";function qr(r,t){return aw.fire({icon:t,text:r})}const n_={success:r=>qr(r,"success"),error:r=>qr(r,"error"),warning:r=>qr(r,"warning"),info:r=>qr(r,"info"),question:r=>qr(r,"question")};function i_(r,t){const e=new Uint8Array(r).subarray(0,4);let o="";for(let n=0;n<e.length;n++)o+=e[n].toString(16);switch(o){case"89504e47":return"image/png";case"47494638":return"image/gif";case"ffd8ffe0":case"ffd8ffe1":case"ffd8ffe2":case"ffd8ffe3":case"ffd8ffe8":return"image/jpeg";default:return t}}const r_="/assets/dtmf0-dcRCrVFG.mp3",s_=Object.freeze(Object.defineProperty({__proto__:null,default:r_},Symbol.toStringTag,{value:"Module"})),a_="/assets/dtmf1-3TVrR0R2.mp3",l_=Object.freeze(Object.defineProperty({__proto__:null,default:a_},Symbol.toStringTag,{value:"Module"})),c_="/assets/dtmf2-DJOtP45R.mp3",u_=Object.freeze(Object.defineProperty({__proto__:null,default:c_},Symbol.toStringTag,{value:"Module"})),d_="/assets/dtmf3-bNWZVsvz.mp3",p_=Object.freeze(Object.defineProperty({__proto__:null,default:d_},Symbol.toStringTag,{value:"Module"})),h_="/assets/dtmf4--GbqCRBr.mp3",f_=Object.freeze(Object.defineProperty({__proto__:null,default:h_},Symbol.toStringTag,{value:"Module"})),g_="/assets/dtmf5-EIQEvqro.mp3",v_=Object.freeze(Object.defineProperty({__proto__:null,default:g_},Symbol.toStringTag,{value:"Module"})),m_="/assets/dtmf6-5X5s0O2o.mp3",y_=Object.freeze(Object.defineProperty({__proto__:null,default:m_},Symbol.toStringTag,{value:"Module"})),C_="/assets/dtmf7-OW7DRyei.mp3",w_=Object.freeze(Object.defineProperty({__proto__:null,default:C_},Symbol.toStringTag,{value:"Module"})),__="/assets/dtmf8-HucJm17X.mp3",S_=Object.freeze(Object.defineProperty({__proto__:null,default:__},Symbol.toStringTag,{value:"Module"})),E_="/assets/dtmf9-LxsyoA3n.mp3",R_=Object.freeze(Object.defineProperty({__proto__:null,default:E_},Symbol.toStringTag,{value:"Module"})),T_="/assets/dtmfhash-9engqZRo.mp3",b_=Object.freeze(Object.defineProperty({__proto__:null,default:T_},Symbol.toStringTag,{value:"Module"})),A_="/assets/dtmfstar-emm4J43i.mp3",O_=Object.freeze(Object.defineProperty({__proto__:null,default:A_},Symbol.toStringTag,{value:"Module"})),P_="/assets/callingtone-C3V14Jbu.mp3",I_=Object.freeze(Object.defineProperty({__proto__:null,default:P_},Symbol.toStringTag,{value:"Module"})),D_="/assets/ringtone-old-BU6uNjrw.mp3",M_=Object.freeze(Object.defineProperty({__proto__:null,default:D_},Symbol.toStringTag,{value:"Module"})),L_="/assets/ringtone-jEpCvhEF.mp3",x_=Object.freeze(Object.defineProperty({__proto__:null,default:L_},Symbol.toStringTag,{value:"Module"})),F_="/assets/waiting_tone-AY6o99JM.mp3",N_=Object.freeze(Object.defineProperty({__proto__:null,default:F_},Symbol.toStringTag,{value:"Module"}));function vo(r){const t=`../assets/dtmf/${r}.mp3`;return Object.assign({"../assets/dtmf/dtmf0.mp3":s_,"../assets/dtmf/dtmf1.mp3":l_,"../assets/dtmf/dtmf2.mp3":u_,"../assets/dtmf/dtmf3.mp3":p_,"../assets/dtmf/dtmf4.mp3":f_,"../assets/dtmf/dtmf5.mp3":v_,"../assets/dtmf/dtmf6.mp3":y_,"../assets/dtmf/dtmf7.mp3":w_,"../assets/dtmf/dtmf8.mp3":S_,"../assets/dtmf/dtmf9.mp3":R_,"../assets/dtmf/dtmfhash.mp3":b_,"../assets/dtmf/dtmfstar.mp3":O_})[t].default}function $u(r){const t=`../assets/sounds/${r}.mp3`;return Object.assign({"../assets/sounds/callingtone.mp3":I_,"../assets/sounds/notificatiion.mp3":lw,"../assets/sounds/ringtone-old.mp3":M_,"../assets/sounds/ringtone.mp3":x_,"../assets/sounds/waiting_tone.mp3":N_})[t].default}async function G_(r){const t=Ye();return await Mi.post(Js.Invite,{name:r.name,email:r.email,type:r.type,number:r.number,password:t.user.password})}async function k_(r,t){try{return(await Mi.post(`${Js.Numbers}/${r}/dnd`,{enable:t})).data}catch(e){throw e}}async function H_(r,t){try{return(await Mi.post(`${Js.Numbers}/${r}/active`,{enable:t})).data}catch(e){throw e}}async function hv(r){try{return(await Mi.post(Js.Profile,{full_name:r.fullName,user_type:r.userType,job_title:r.jobTitle,company:r.company,birthday:r.birthday,email_type:r.emailType,email:r.email,address_type:r.addressType,address1:r.address1,address2:r.address2,city:r.city,state:r.state})).data}catch(t){throw t}}async function V_(r){try{return(await Mi.post(Js.Avatar,r,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(t){const e=t;throw Pn(e.message),e}}function B_(){const r=Gr(),{img:t}=kr(r);async function e(o){var n,i;try{const{files:s}=o.target;if(s&&s[0]){(n=t.value)!=null&&n.src&&URL.revokeObjectURL((i=t.value)==null?void 0:i.src);const a=URL.createObjectURL(s[0]),l=new FileReader;l.onload=c=>{var u;r.setImageSrc(a),r.setImageType(i_((u=c.target)==null?void 0:u.result,s[0].type))},l.readAsArrayBuffer(s[0])}}catch{r.setImageSrc(""),r.setImageType("")}}return{onLoadImage:e}}function Wr(){const r=x("");function t(n){r.value+=n}function e(n){r.value=n}const o=[{number:"1",soundFile:vo("dtmf1"),code:[49,97]},{number:"2",label:"ABC",soundFile:vo("dtmf2"),code:[50,98]},{number:"3",label:"DEF",soundFile:vo("dtmf3"),code:[51,99]},{number:"4",label:"GHI",soundFile:vo("dtmf4"),code:[52,100]},{number:"5",label:"JKL",soundFile:vo("dtmf5"),code:[53,101]},{number:"6",label:"MNO",soundFile:vo("dtmf6"),code:[54,102]},{number:"7",label:"PQRS",soundFile:vo("dtmf7"),code:[55,103]},{number:"8",label:"TUV",soundFile:vo("dtmf8"),code:[56,104]},{number:"9",label:"WXYZ",soundFile:vo("dtmf9"),code:[57,105]},{number:"*",soundFile:vo("dtmfstar"),code:[42,106]},{number:"0",label:"+",soundFile:vo("dtmf0"),code:[48,96]},{number:"#",soundFile:vo("dtmfhash")}];return{number:r,onClickKeyboard:t,setNumber:e,keys:o}}function sa({remoteName:r,remoteNumber:t}){return{title:te(()=>{const o="*89";t=t!=null&&t.startsWith(o)?t==null?void 0:t.replace(o,""):t;let n="";return r&&r.toLowerCase()==="anonymous"||(r==null?void 0:r.toLowerCase())==="unavailable"?n=Mt(t):r===t?n=Mt(t):r?n=r:n=Mt(t),n})}}function fv(){const r=Vg(),{videoInputs:t,audioInputs:e,audioOutputs:o,permissionGranted:n}=Bg({requestPermissions:!0,onUpdated:()=>{t.value.find(i=>{var s;return i.deviceId===((s=r.currentCamera)==null?void 0:s.deviceId)})||r.setCurrentCamera(t.value[0]),e.value.find(i=>{var s;return i.deviceId===((s=r.currentMicrophone)==null?void 0:s.deviceId)})||r.setCurrentMicrophone(e.value[0]),o.value.find(i=>{var s;return i.deviceId===((s=r.currentSpeaker)==null?void 0:s.deviceId)})||r.setCurrentSpeaker(o.value[0])}});return{cameras:te(()=>n.value?t.value:[]),microphones:te(()=>n.value?e.value:[]),speakers:te(()=>n.value?o.value:[])}}function Wd(){const r=Ye(),t=Gr(),{onLoadImage:e}=B_(),o=x({fullName:r.settings.fullName,userType:r.settings.userType,company:r.settings.company,jobTitle:r.settings.jobTitle,birthday:r.settings.birthday,emailType:r.settings.emailType,email:r.user.email,addressType:r.settings.addressType,address1:r.settings.address1,address2:r.settings.address2,city:r.settings.city,state:r.settings.state}),n=x({fullName:"",userType:"",company:"",jobTitle:"",birthday:"",emailType:"work",email:"",addressType:"work",address1:"",address2:"",city:"",state:""}),i=["work","home","other"],s=x(!1),a=x(),l=x(!0),c=te(()=>{const f=`${`avatar/${r.user.userId}`}_128x128.jpg`;return`${r.publicStorage}/${f}?${Date.now()}`}),u=x();async function d(h){await e(h),setTimeout(()=>{t.img.src&&t.setModalCropperIsActive(!0)},50)}function p(){var h,f;if((h=t.result)!=null&&h.canvas){const g=(f=t.result)==null?void 0:f.canvas,_=new FormData;g.toBlob(C=>{_.append("image",C),V_(_)},t.img.type)}}return Ze(()=>{var h,f;(h=a.value)==null||h.addEventListener("load",()=>{l.value=!0}),(f=a.value)==null||f.addEventListener("error",()=>{l.value=!1})}),tt(()=>{var h,f;(h=a.value)==null||h.removeEventListener("load",()=>{l.value=!0}),(f=a.value)==null||f.removeEventListener("error",()=>{l.value=!0})}),{form:o,formDefault:n,optionAddress:i,isSubmitForm:s,imageProfile:c,hasImageProfile:l,imgRef:a,file:u,addImageProfile:d,uploadImage:p}}function gv(){const r=Ug();return{unreadMessages:te(()=>(e,o)=>{const n=parseInt(r.params.id,10);return Object.values(e).reduce((i,s)=>$n.value(o,n)?i:i+s,0)})}}const U_={class:"loading_profile d-flex justify-content-center align-items-center flex-column min-vh-100"},j_=X({__name:"BaseLoadingProfile",setup(r){const{t}=ve();return(e,o)=>(S(),O("div",U_,[R(Te,{name:"loader",class:"feather feather-loader spin",size:"xl",color:v(se).LineIcon},null,8,["color"]),m("h2",{style:ue({color:v(se).LineIcon})},L(v(t)("Loading Profile")),5)]))}}),W_=oe(j_,[["__scopeId","data-v-7fa9f042"]]);function Ih(r,t){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(r);t&&(o=o.filter(function(n){return Object.getOwnPropertyDescriptor(r,n).enumerable})),e.push.apply(e,o)}return e}function Be(r){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?Ih(Object(e),!0).forEach(function(o){So(r,o,e[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):Ih(Object(e)).forEach(function(o){Object.defineProperty(r,o,Object.getOwnPropertyDescriptor(e,o))})}return r}function So(r,t,e){return t in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e,r}function z_(r,t){if(r==null)return{};var e,o,n=function(s,a){if(s==null)return{};var l,c,u={},d=Object.keys(s);for(c=0;c<d.length;c++)l=d[c],a.indexOf(l)>=0||(u[l]=s[l]);return u}(r,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);for(o=0;o<i.length;o++)e=i[o],t.indexOf(e)>=0||Object.prototype.propertyIsEnumerable.call(r,e)&&(n[e]=r[e])}return n}function Li(r){return function(t){if(Array.isArray(t))return Pc(t)}(r)||function(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}(r)||function(t,e){if(t){if(typeof t=="string")return Pc(t,e);var o=Object.prototype.toString.call(t).slice(8,-1);if(o==="Object"&&t.constructor&&(o=t.constructor.name),o==="Map"||o==="Set")return Array.from(t);if(o==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return Pc(t,e)}}(r)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Pc(r,t){(t==null||t>r.length)&&(t=r.length);for(var e=0,o=new Array(t);e<t;e++)o[e]=r[e];return o}var Dh,$_,fa,gt=(Dh=function(r){/*!
  Copyright (c) 2018 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/(function(){var t={}.hasOwnProperty;function e(){for(var o=[],n=0;n<arguments.length;n++){var i=arguments[n];if(i){var s=typeof i;if(s==="string"||s==="number")o.push(i);else if(Array.isArray(i)){if(i.length){var a=e.apply(null,i);a&&o.push(a)}}else if(s==="object")if(i.toString===Object.prototype.toString)for(var l in i)t.call(i,l)&&i[l]&&o.push(l);else o.push(i.toString())}}return o.join(" ")}r.exports?(e.default=e,r.exports=e):window.classNames=e})()},Dh(fa={path:$_,exports:{},require:function(r,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(t==null&&fa.path)}},fa.exports),fa.exports),zo=function(r){return function(t,e){if(!t)return r;var o;typeof t=="string"?o=t:e=t;var n=r;return o&&(n+="__"+o),n+(e?Object.keys(e).reduce(function(i,s){var a=e[s];return a&&(i+=" "+(typeof a=="boolean"?n+"--"+s:n+"--"+s+"_"+a)),i},""):"")}};function Ku(r,t,e){var o,n,i,s,a;function l(){var u=Date.now()-s;u<t&&u>=0?o=setTimeout(l,t-u):(o=null,e||(a=r.apply(i,n),i=n=null))}t==null&&(t=100);var c=function(){i=this,n=arguments,s=Date.now();var u=e&&!o;return o||(o=setTimeout(l,t)),u&&(a=r.apply(i,n),i=n=null),a};return c.clear=function(){o&&(clearTimeout(o),o=null)},c.flush=function(){o&&(a=r.apply(i,n),i=n=null,clearTimeout(o),o=null)},c}Ku.debounce=Ku;var Yu=Ku,ge=function(){return ge=Object.assign||function(r){for(var t,e=1,o=arguments.length;e<o;e++)for(var n in t=arguments[e])Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n]);return r},ge.apply(this,arguments)};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function vv(r,t){var e,o;return r&&t?(e=""+r+t[0].toUpperCase()+t.slice(1),o=r+"-"+t):(e=r||t,o=r||t),{name:e,classname:o}}function mv(r){return/^blob:/.test(r)}function Mh(r){return mv(r)||function(t){return/^data:/.test(t)}(r)}function er(r){return!!(r&&r.constructor&&r.call&&r.apply)}function wt(r){return r===void 0}function Ja(r){return typeof r=="object"&&r!==null}function qu(r,t,e){var o={};return Ja(r)?(Object.keys(t).forEach(function(n){wt(r[n])?o[n]=t[n]:Ja(t[n])?Ja(r[n])?o[n]=qu(r[n],t[n],e[n]):o[n]=r[n]?t[n]:e[n]:t[n]===!0||t[n]===!1?o[n]=!!r[n]:o[n]=r[n]}),o):r?t:e}function ga(r){var t=Number(r);return Number.isNaN(t)?r:t}function Lh(r){return typeof(r=="number"||function(t){return typeof t=="object"&&t!==null}(r)&&toString.call(r)=="[object Number]")&&!yv(r)}function yv(r){return r!=r}function Cv(r,t){return Math.sqrt(Math.pow(r.x-t.x,2)+Math.pow(r.y-t.y,2))}var Ls=function(r,t){r===void 0&&(r={}),t===void 0&&(t={}),this.type="manipulateImage",this.move=r,this.scale=t},K_=function(r,t){t===void 0&&(t={}),this.type="resize",this.directions=r,this.params=t},zd=function(r){this.type="move",this.directions=r},Y_=function(){function r(t,e,o,n,i){this.type="drag",this.nativeEvent=t,this.position=o,this.previousPosition=n,this.element=e,this.anchor=i}return r.prototype.shift=function(){var t=this,e=t.element,o=t.anchor,n=t.position;if(e){var i=e.getBoundingClientRect(),s=i.left,a=i.top;return{left:n.left-s-o.left,top:n.top-a-o.top}}return{left:0,top:0}},r}(),$d={name:"DraggableElement",props:{classname:{type:String}},beforeMount:function(){window.addEventListener("mouseup",this.onMouseUp,{passive:!1}),window.addEventListener("mousemove",this.onMouseMove,{passive:!1}),window.addEventListener("touchmove",this.onTouchMove,{passive:!1}),window.addEventListener("touchend",this.onTouchEnd,{passive:!1})},beforeUnmount:function(){window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("touchend",this.onTouchEnd)},mounted:function(){if(!this.$refs.draggable)throw new Error('You should add ref "draggable" to your root element to use draggable mixin');this.touches=[],this.hovered=!1},methods:{onMouseOver:function(){this.hovered||(this.hovered=!0,this.$emit("enter"))},onMouseLeave:function(){this.hovered&&!this.touches.length&&(this.hovered=!1,this.$emit("leave"))},onTouchStart:function(r){r.cancelable&&!this.disabled&&r.touches.length===1&&(this.touches=Li(r.touches),this.hovered||(this.$emit("enter"),this.hovered=!0),r.touches.length&&this.initAnchor(this.touches.reduce(function(t,e){return{clientX:t.clientX+e.clientX/r.touches.length,clientY:t.clientY+e.clientY/r.touches.length}},{clientX:0,clientY:0})),r.preventDefault&&r.preventDefault(),r.stopPropagation())},onTouchEnd:function(){this.processEnd()},onTouchMove:function(r){this.touches.length&&(this.processMove(r,r.touches),r.preventDefault&&r.preventDefault(),r.stopPropagation&&r.stopPropagation())},onMouseDown:function(r){if(!this.disabled){var t={fake:!0,clientX:r.clientX,clientY:r.clientY};this.touches=[t],this.initAnchor(t),r.stopPropagation()}},onMouseMove:function(r){this.touches.length&&(this.processMove(r,[{fake:!0,clientX:r.clientX,clientY:r.clientY}]),r.preventDefault&&r.preventDefault())},onMouseUp:function(){this.processEnd()},initAnchor:function(r){var t=this.$refs.draggable.getBoundingClientRect(),e=t.left,o=t.right,n=t.bottom,i=t.top;this.anchor={left:r.clientX-e,top:r.clientY-i,bottom:n-r.clientY,right:o-r.clientX}},processMove:function(r,t){var e=Li(t);if(this.touches.length){if(this.touches.length===1&&e.length===1){var o=this.$refs.draggable;this.$emit("drag",new Y_(r,o,{left:e[0].clientX,top:e[0].clientY},{left:this.touches[0].clientX,top:this.touches[0].clientY},this.anchor))}this.touches=e}},processEnd:function(){this.touches.length&&this.$emit("drag-end"),this.hovered&&(this.$emit("leave"),this.hovered=!1),this.touches=[]}},emits:["drag","drag-end","leave","enter"]};$d.render=function(r,t,e,o,n,i){return S(),H("div",{ref:"draggable",class:e.classname,onTouchstart:t[1]||(t[1]=function(){return i.onTouchStart&&i.onTouchStart.apply(i,arguments)}),onMousedown:t[2]||(t[2]=function(){return i.onMouseDown&&i.onMouseDown.apply(i,arguments)}),onMouseover:t[3]||(t[3]=function(){return i.onMouseOver&&i.onMouseOver.apply(i,arguments)}),onMouseleave:t[4]||(t[4]=function(){return i.onMouseLeave&&i.onMouseLeave.apply(i,arguments)})},[rt(r.$slots,"default")],34)};var Ic=zo("vue-handler-wrapper"),wv={name:"HandlerWrapper",components:{DraggableElement:$d},props:{horizontalPosition:{type:String},verticalPosition:{type:String},disabled:{type:Boolean,default:!1}},computed:{classes:function(){var r;if(this.horizontalPosition||this.verticalPosition){var t,e=vv(this.horizontalPosition,this.verticalPosition);r=Ic((So(t={},e.classname,!0),So(t,"disabled",this.disabled),t))}else r=Ic({disabled:this.disabled});return{root:r,draggable:Ic("draggable")}}},emits:["leave","enter","drag","drag-end"]};wv.render=function(r,t,e,o,n,i){var s=lt("DraggableElement");return S(),H("div",{class:i.classes.root},[R(s,{class:i.classes.draggable,onDrag:t[1]||(t[1]=function(a){return r.$emit("drag",a)}),onDragEnd:t[2]||(t[2]=function(a){return r.$emit("drag-end")}),onLeave:t[3]||(t[3]=function(a){return r.$emit("leave")}),onEnter:t[4]||(t[4]=function(a){return r.$emit("enter")})},{default:D(function(){return[rt(r.$slots,"default")]}),_:3},8,["class"])],2)};var q_=zo("vue-line-wrapper"),_v={name:"LineWrapper",components:{DraggableElement:$d},props:{position:{type:String,required:!0},disabled:{type:Boolean,default:!1}},computed:{classname:function(){var r;return q_((So(r={},this.position,!0),So(r,"disabled",this.disabled),r))}},emits:["leave","enter","drag","drag-end"]};_v.render=function(r,t,e,o,n,i){var s=lt("DraggableElement");return S(),H(s,{class:i.classname,onDrag:t[1]||(t[1]=function(a){return r.$emit("drag",a)}),onDragEnd:t[2]||(t[2]=function(a){return r.$emit("drag-end")}),onLeave:t[3]||(t[3]=function(a){return r.$emit("leave")}),onEnter:t[4]||(t[4]=function(a){return r.$emit("enter")})},{default:D(function(){return[rt(r.$slots,"default")]}),_:3},8,["class"])};var en=["left","right","top","bottom"],Q_=["left","right"],X_=["top","bottom"],Z_=["left","top"],J_=["fill-area","fit-area","stencil","none"],xh={left:0,top:0,width:0,height:0};function Fh(r,t,e){return!(e=e||["width","height","left","top"]).some(function(o){return r[o]!==t[o]})}function pn(r){return{left:r.left,top:r.top,right:r.left+r.width,bottom:r.top+r.height}}function Er(r,t){return{left:r.left-t.left,top:r.top-t.top}}function It(r){return{left:r.left+r.width/2,top:r.top+r.height/2}}function Ws(r,t){var e={left:0,top:0,right:0,bottom:0};return en.forEach(function(o){var n=t[o],i=pn(r)[o];e[o]=n!==void 0&&i!==void 0?o==="left"||o==="top"?Math.max(0,n-i):Math.max(0,i-n):0}),e}function Zo(r,t){return{left:r.left-t.left,top:r.top-t.top,width:r.width+t.left+t.right,height:r.height+t.top+t.bottom}}function Kl(r){return{left:-r.left,top:-r.top}}function oo(r,t){return ge(ge({},r),{left:r.left+t.left,top:r.top+t.top})}function Ro(r,t,e,o){if(t!==1){if(e){var n=It(r);return{width:r.width*t,height:r.height*t,left:r.left+r.width*(1-t)/2+(e.left-n.left)*(o||1-t),top:r.top+r.height*(1-t)/2+(e.top-n.top)*(o||1-t)}}return{width:r.width*t,height:r.height*t,left:r.left+r.width*(1-t)/2,top:r.top+r.height*(1-t)/2}}return r}function Ue(r){return r.width/r.height}function Rr(r,t){return Math.min(t.right!==void 0&&t.left!==void 0?(t.right-t.left)/r.width:1/0,t.bottom!==void 0&&t.top!==void 0?(t.bottom-t.top)/r.height:1/0)}function Tr(r,t){var e={left:0,top:0},o=Ws(r,t);return o.left&&o.left>0?e.left=o.left:o.right&&o.right>0&&(e.left=-o.right),o.top&&o.top>0?e.top=o.top:o.bottom&&o.bottom>0&&(e.top=-o.bottom),e}function Dc(r,t){var e;return t.minimum&&r<t.minimum?e=t.minimum:t.maximum&&r>t.maximum&&(e=t.maximum),e}function Sv(r,t){var e=Ue(r),o=Ue(t);return t.width<1/0&&t.height<1/0?e>o?{width:t.width,height:t.width/e}:{width:t.height*e,height:t.height}:t.width<1/0?{width:t.width,height:t.width/e}:t.height<1/0?{width:t.height*e,height:t.height}:r}function Ev(r,t){var e=t*Math.PI/180;return{width:Math.abs(r.width*Math.cos(e))+Math.abs(r.height*Math.sin(e)),height:Math.abs(r.width*Math.sin(e))+Math.abs(r.height*Math.cos(e))}}function qn(r,t){var e=t*Math.PI/180;return{left:r.left*Math.cos(e)-r.top*Math.sin(e),top:r.left*Math.sin(e)+r.top*Math.cos(e)}}function Yl(r,t){var e=Ws(Dt(r,t),t);return e.left+e.right+e.top+e.bottom?e.left+e.right>e.top+e.bottom?Math.min((r.width+e.left+e.right)/r.width,Rr(r,t)):Math.min((r.height+e.top+e.bottom)/r.height,Rr(r,t)):1}function Dt(r,t,e){e===void 0&&(e=!1);var o=Tr(r,t);return oo(r,e?Kl(o):o)}function Qu(r){return{width:r.right!==void 0&&r.left!==void 0?r.right-r.left:1/0,height:r.bottom!==void 0&&r.top!==void 0?r.bottom-r.top:1/0}}function eS(r,t){return ge(ge({},r),{minWidth:Math.min(t.width,r.minWidth),minHeight:Math.min(t.height,r.minHeight),maxWidth:Math.min(t.width,r.maxWidth),maxHeight:Math.min(t.height,r.maxHeight)})}function Rv(r,t,e){e===void 0&&(e=!0);var o={};return en.forEach(function(n){var i=r[n],s=t[n];i!==void 0&&s!==void 0?o[n]=n==="left"||n==="top"?e?Math.max(i,s):Math.min(i,s):e?Math.min(i,s):Math.max(i,s):s!==void 0?o[n]=s:i!==void 0&&(o[n]=i)}),o}function ql(r,t){return Rv(r,t,!0)}function Nh(r){var t=r.size,e=r.aspectRatio,o=r.ignoreMinimum,n=r.sizeRestrictions;return!!((t.correctRatio||Ue(t)>=e.minimum&&Ue(t)<=e.maximum)&&t.height<=n.maxHeight&&t.width<=n.maxWidth&&t.width&&t.height&&(o||t.height>=n.minHeight&&t.width>=n.minWidth))}function Gh(r,t){return Math.pow(r.width-t.width,2)+Math.pow(r.height-t.height,2)}function En(r){var t=r.width,e=r.height,o=r.sizeRestrictions,n={minimum:r.aspectRatio&&r.aspectRatio.minimum||0,maximum:r.aspectRatio&&r.aspectRatio.maximum||1/0},i={width:Math.max(o.minWidth,Math.min(o.maxWidth,t)),height:Math.max(o.minHeight,Math.min(o.maxHeight,e))};function s(c,u){return u===void 0&&(u=!1),c.reduce(function(d,p){return Nh({size:p,aspectRatio:n,sizeRestrictions:o,ignoreMinimum:u})&&(!d||Gh(p,{width:t,height:e})<Gh(d,{width:t,height:e}))?p:d},null)}var a=[];n&&[n.minimum,n.maximum].forEach(function(c){c&&a.push({width:i.width,height:i.width/c,correctRatio:!0},{width:i.height*c,height:i.height,correctRatio:!0})}),Nh({size:i,aspectRatio:n,sizeRestrictions:o})&&a.push(i);var l=s(a)||s(a,!0);return l&&{width:l.width,height:l.height}}function Xu(r){var t=r.event,e=r.coordinates,o=r.positionRestrictions,n=o===void 0?{}:o,i=oo(e,t.directions);return oo(i,Tr(i,n))}function tS(r){var t=r.coordinates,e=r.transform,o=r.imageSize,n=r.sizeRestrictions,i=r.positionRestrictions,s=r.aspectRatio,a=r.visibleArea,l=function(u,d){return Xu({coordinates:u,positionRestrictions:i,event:new zd({left:d.left-u.left,top:d.top-u.top})})},c=ge({},t);return(Array.isArray(e)?e:[e]).forEach(function(u){var d={};wt((d=typeof u=="function"?u({coordinates:c,imageSize:o,visibleArea:a}):u).width)&&wt(d.height)||(c=function(p,h){var f=ge(ge(ge({},p),En({width:h.width,height:h.height,sizeRestrictions:n,aspectRatio:s})),{left:0,top:0});return l(f,{left:p.left,top:p.top})}(c,ge(ge({},c),d))),wt(d.left)&&wt(d.top)||(c=l(c,ge(ge({},c),d)))}),c}function oS(r){r.event;var t=r.getAreaRestrictions,e=r.boundaries,o=r.coordinates,n=r.visibleArea;r.aspectRatio;var i=r.stencilSize,s=r.sizeRestrictions,a=r.positionRestrictions;r.stencilReference;var l,c,u,d=ge({},o),p=ge({},n),h=ge({},i);l=Ue(h),c=Ue(d),u===void 0&&(u=.001),(l===0||c===0?Math.abs(c-l)<u:Math.abs(c/l)<1+u&&Math.abs(c/l)>1-u)||(d=ge(ge({},d),En({sizeRestrictions:s,width:d.width,height:d.height,aspectRatio:{minimum:Ue(h),maximum:Ue(h)}})));var f=Yl(p=Ro(p,d.width*e.width/(p.width*h.width)),t({visibleArea:p,type:"resize"}));return f!==1&&(p=Ro(p,f),d=Ro(d,f)),p=Dt(p=oo(p,Er(It(d),It(p))),t({visibleArea:p,type:"move"})),{coordinates:d=Dt(d,ql(pn(p),a)),visibleArea:p}}function nS(r){var t=r.event,e=r.getAreaRestrictions,o=r.boundaries,n=r.coordinates,i=r.visibleArea;r.aspectRatio,r.stencilSize,r.sizeRestrictions;var s=r.positionRestrictions;r.stencilReference;var a=ge({},n),l=ge({},i);if(n&&i&&t.type!=="manipulateImage"){var c={width:0,height:0};l.width,o.width,Ue(o)>Ue(a)?(c.height=.8*o.height,c.width=c.height*Ue(a)):(c.width=.8*o.width,c.height=c.width*Ue(a));var u=Yl(l=Ro(l,a.width*o.width/(l.width*c.width)),e({visibleArea:l,type:"resize"}));l=Ro(l,u),u!==1&&(c.height/=u,c.width/=u),l=Dt(l=oo(l,Er(It(a),It(l))),e({visibleArea:l,type:"move"})),a=Dt(a,ql(pn(l),s))}return{coordinates:a,visibleArea:l}}function iS(r){var t=r.event,e=r.coordinates,o=r.visibleArea,n=r.getAreaRestrictions,i=ge({},o),s=ge({},e);if(t.type==="setCoordinates"){var a=Math.max(0,s.width-i.width),l=Math.max(0,s.height-i.height);a>l?i=Ro(i,Math.min(s.width/i.width,Rr(i,n({visibleArea:i,type:"resize"})))):l>a&&(i=Ro(i,Math.min(s.height/i.height,Rr(i,n({visibleArea:i,type:"resize"}))))),i=Dt(i=oo(i,Kl(Tr(s,pn(i)))),n({visibleArea:i,type:"move"}))}return{visibleArea:i,coordinates:s}}function rS(r){var t=r.imageSize,e=r.visibleArea,o=r.coordinates,n=e||t;return{left:(e?e.left:0)+n.width/2-o.width/2,top:(e?e.top:0)+n.height/2-o.height/2}}function sS(r){var t=r.imageSize,e=r.visibleArea,o=r.aspectRatio,n=r.sizeRestrictions,i=e||t,s=Math.min(o.maximum||1/0,Math.max(o.minimum||0,Ue(i))),a=i.width<i.height?{width:.8*i.width,height:.8*i.width/s}:{height:.8*i.height,width:.8*i.height*s};return En(ge(ge({},a),{aspectRatio:o,sizeRestrictions:n}))}function aS(r){var t,e,o=r.imageSize,n=r.visibleArea,i=r.boundaries,s=r.aspectRatio,a=r.sizeRestrictions,l=r.stencilSize,c=n||o;return Ue(c)>Ue(i)?e=(t=l.height*c.height/i.height)*Ue(l):t=(e=l.width*c.width/i.width)/Ue(l),En({width:e,height:t,aspectRatio:s,sizeRestrictions:a})}function lS(r){var t=r.getAreaRestrictions,e=r.coordinates,o=r.imageSize,n=Ue(r.boundaries);if(e){var i={height:Math.max(e.height,o.height),width:Math.max(e.width,o.width)},s=Sv({width:Ue(i)>n?i.width:i.height*n,height:Ue(i)>n?i.width/n:i.height},Qu(t())),a={left:e.left+e.width/2-s.width/2,top:e.top+e.height/2-s.height/2,width:s.width,height:s.height},l=Ws(e,pn(ge({left:0,top:0},o))),c={};return!l.left&&!l.right&&a.width<=o.width&&(c.left=0,c.right=o.width),!l.top&&!l.bottom&&a.height<=o.height&&(c.top=0,c.bottom=o.height),Dt(a,c)}var u=Ue(o);return s={height:u>n?o.height:o.width/n,width:u>n?o.height*n:o.width},{left:o.width/2-s.width/2,top:o.height/2-s.height/2,width:s.width,height:s.height}}function va(r,t){return Rv(r,pn(t))}function cS(r){var t=r.event,e=r.coordinates,o=r.visibleArea,n=r.sizeRestrictions,i=r.getAreaRestrictions,s=r.positionRestrictions,a=r.adjustStencil,l=t.scale,c=t.move,u=ge({},o),d=ge({},e),p=1,h=1,f=l.factor&&Math.abs(l.factor-1)>.001;u=oo(u,{left:c.left||0,top:c.top||0});var g={stencil:{minimum:Math.max(n.minWidth?n.minWidth/d.width:0,n.minHeight?n.minHeight/d.height:0),maximum:Math.min(n.maxWidth?n.maxWidth/d.width:1/0,n.maxHeight?n.maxHeight/d.height:1/0,Rr(d,s))},area:{maximum:Rr(u,i({visibleArea:u,type:"resize"}))}};l.factor&&f&&(l.factor<1?(h=Math.max(l.factor,g.stencil.minimum))>1&&(h=1):l.factor>1&&(h=Math.min(l.factor,Math.min(g.area.maximum,g.stencil.maximum)))<1&&(h=1)),h&&(u=Ro(u,h,l.center));var _=e.left-o.left,C=o.width+o.left-(e.width+e.left),E=e.top-o.top,T=o.height+o.top-(e.height+e.top);return u=Dt(u=oo(u,Tr(u,{left:s.left!==void 0?s.left-_*h:void 0,top:s.top!==void 0?s.top-E*h:void 0,bottom:s.bottom!==void 0?s.bottom+T*h:void 0,right:s.right!==void 0?s.right+C*h:void 0})),i({visibleArea:u,type:"move"})),d.width=d.width*h,d.height=d.height*h,d.left=u.left+_*h,d.top=u.top+E*h,d=Dt(d,ql(pn(u),s)),l.factor&&f&&a&&(l.factor>1?p=Math.min(g.area.maximum,l.factor)/h:l.factor<1&&(p=Math.max(d.height/u.height,d.width/u.width,l.factor/h)),p!==1&&(u=oo(u=Dt(u=Ro(u,p,l.factor>1?l.center:It(d)),i({visibleArea:u,type:"move"})),Kl(Tr(d,pn(u)))))),{coordinates:d,visibleArea:u}}function uS(r){var t=r.aspectRatio,e=r.getAreaRestrictions,o=r.coordinates,n=r.visibleArea,i=r.sizeRestrictions,s=r.positionRestrictions,a=r.imageSize,l=r.previousImageSize,c=r.angle,u=ge({},o),d=ge({},n),p=qn(It(ge({left:0,top:0},l)),c);return(u=ge(ge({},En({sizeRestrictions:i,aspectRatio:t,width:u.width,height:u.height})),qn(It(u),c))).left-=p.left-a.width/2+u.width/2,u.top-=p.top-a.height/2+u.height/2,d=Ro(d,Yl(d,e({visibleArea:d,type:"resize"}))),{coordinates:u=Dt(u,s),visibleArea:d=Dt(d=oo(d,Er(It(u),It(o))),e({visibleArea:d,type:"move"}))}}function dS(r){var t=r.flip,e=r.previousFlip,o=r.rotate;r.aspectRatio;var n=r.getAreaRestrictions,i=r.coordinates,s=r.visibleArea,a=r.imageSize,l=ge({},i),c=ge({},s),u=e.horizontal!==t.horizontal,d=e.vertical!==t.vertical;if(u||d){var p=qn({left:a.width/2,top:a.height/2},-o),h=qn(It(l),-o),f=qn({left:u?p.left-(h.left-p.left):h.left,top:d?p.top-(h.top-p.top):h.top},o);l=oo(l,Er(f,It(l))),h=qn(It(c),-o),c=Dt(c=oo(c,Er(f=qn({left:u?p.left-(h.left-p.left):h.left,top:d?p.top-(h.top-p.top):h.top},o),It(c))),n({visibleArea:c,type:"move"}))}return{coordinates:l,visibleArea:c}}function kh(r){var t=r.directions,e=r.coordinates,o=r.positionRestrictions,n=o===void 0?{}:o,i=r.sizeRestrictions,s=r.preserveRatio,a=r.compensate,l=ge({},t),c=Zo(e,l).width,u=Zo(e,l).height;c<0&&(l.left<0&&l.right<0?(l.left=-(e.width-i.minWidth)/(l.left/l.right),l.right=-(e.width-i.minWidth)/(l.right/l.left)):l.left<0?l.left=-(e.width-i.minWidth):l.right<0&&(l.right=-(e.width-i.minWidth))),u<0&&(l.top<0&&l.bottom<0?(l.top=-(e.height-i.minHeight)/(l.top/l.bottom),l.bottom=-(e.height-i.minHeight)/(l.bottom/l.top)):l.top<0?l.top=-(e.height-i.minHeight):l.bottom<0&&(l.bottom=-(e.height-i.minHeight)));var d=Ws(Zo(e,l),n);a&&(d.left&&d.left>0&&d.right===0?(l.right+=d.left,l.left-=d.left):d.right&&d.right>0&&d.left===0&&(l.left+=d.right,l.right-=d.right),d.top&&d.top>0&&d.bottom===0?(l.bottom+=d.top,l.top-=d.top):d.bottom&&d.bottom>0&&d.top===0&&(l.top+=d.bottom,l.bottom-=d.bottom),d=Ws(Zo(e,l),n));var p={width:1/0,height:1/0,left:1/0,right:1/0,top:1/0,bottom:1/0};if(en.forEach(function(g){var _=d[g];_&&l[g]&&(p[g]=Math.max(0,1-_/l[g]))}),s){var h=Math.min.apply(null,en.map(function(g){return p[g]}));h!==1/0&&en.forEach(function(g){l[g]*=h})}else en.forEach(function(g){p[g]!==1/0&&(l[g]*=p[g])});if(c=Zo(e,l).width,u=Zo(e,l).height,l.right+l.left&&(c>i.maxWidth?p.width=(i.maxWidth-e.width)/(l.right+l.left):c<i.minWidth&&(p.width=(i.minWidth-e.width)/(l.right+l.left))),l.bottom+l.top&&(u>i.maxHeight?p.height=(i.maxHeight-e.height)/(l.bottom+l.top):u<i.minHeight&&(p.height=(i.minHeight-e.height)/(l.bottom+l.top))),s){var f=Math.min(p.width,p.height);f!==1/0&&en.forEach(function(g){l[g]*=f})}else p.width!==1/0&&Q_.forEach(function(g){l[g]*=p.width}),p.height!==1/0&&X_.forEach(function(g){l[g]*=p.height});return l}function ma(r,t,e){return t==0&&e==0?r/2:t==0?0:e==0?r:r*Math.abs(t/(t+e))}var pS=zo("vue-simple-handler"),hS=zo("vue-simple-handler-wrapper"),Kd={name:"SimpleHandler",components:{HandlerWrapper:wv},props:{defaultClass:{type:String},hoverClass:{type:String},wrapperClass:{type:String},horizontalPosition:{type:String},verticalPosition:{type:String},disabled:{type:Boolean,default:!1}},data:function(){return{hover:!1}},computed:{classes:function(){var r,t=(So(r={},this.horizontalPosition,!!this.horizontalPosition),So(r,this.verticalPosition,!!this.verticalPosition),So(r,"".concat(this.horizontalPosition,"-").concat(this.verticalPosition),!!(this.verticalPosition&&this.horizontalPosition)),So(r,"hover",this.hover),r);return{default:gt(pS(t),this.defaultClass,this.hover&&this.hoverClass),wrapper:gt(hS(t),this.wrapperClass)}}},methods:{onDrag:function(r){this.$emit("drag",r)},onEnter:function(){this.hover=!0},onLeave:function(){this.hover=!1},onDragEnd:function(){this.$emit("drag-end")}},emits:["drag","drag-end"]};Kd.render=function(r,t,e,o,n,i){var s=lt("HandlerWrapper");return S(),H(s,{class:i.classes.wrapper,"vertical-position":e.verticalPosition,"horizontal-position":e.horizontalPosition,disabled:e.disabled,onDrag:i.onDrag,onDragEnd:i.onDragEnd,onEnter:i.onEnter,onLeave:i.onLeave},{default:D(function(){return[R("div",{class:i.classes.default},null,2)]}),_:1},8,["class","vertical-position","horizontal-position","disabled","onDrag","onDragEnd","onEnter","onLeave"])};var fS=zo("vue-simple-line"),gS=zo("vue-simple-line-wrapper"),Yd={name:"SimpleLine",components:{LineWrapper:_v},props:{defaultClass:{type:String},hoverClass:{type:String},wrapperClass:{type:String},position:{type:String},disabled:{type:Boolean,default:!1}},data:function(){return{hover:!1}},computed:{classes:function(){return{root:gt(fS(So({},this.position,!0)),this.defaultClass,this.hover&&this.hoverClass),wrapper:gt(gS(So({},this.position,!0)),this.wrapperClass)}}},methods:{onDrag:function(r){this.$emit("drag",r)},onEnter:function(){this.hover=!0},onLeave:function(){this.hover=!1},onDragEnd:function(){this.$emit("drag-end")}},emits:["drag","drag-end"]};Yd.render=function(r,t,e,o,n,i){var s=lt("LineWrapper");return S(),H(s,{class:i.classes.wrapper,position:e.position,disabled:e.disabled,onDrag:i.onDrag,onDragEnd:i.onDragEnd,onEnter:i.onEnter,onLeave:i.onLeave},{default:D(function(){return[R("div",{class:i.classes.root},null,2)]}),_:1},8,["class","position","disabled","onDrag","onDragEnd","onEnter","onLeave"])};var Mc=zo("vue-bounding-box"),vS=["east","west",null],mS=["south","north",null],Tv={name:"BoundingBox",props:{width:{type:Number},height:{type:Number},transitions:{type:Object},handlers:{type:Object,default:function(){return{eastNorth:!0,north:!0,westNorth:!0,west:!0,westSouth:!0,south:!0,eastSouth:!0,east:!0}}},handlersComponent:{type:[Object,String],default:function(){return Kd}},handlersClasses:{type:Object,default:function(){return{}}},handlersWrappersClasses:{type:Object,default:function(){return{}}},lines:{type:Object,default:function(){return{west:!0,north:!0,east:!0,south:!0}}},linesComponent:{type:[Object,String],default:function(){return Yd}},linesClasses:{type:Object,default:function(){return{}}},linesWrappersClasses:{type:Object,default:function(){return{}}},resizable:{type:Boolean,default:!0}},data:function(){var r=[];return vS.forEach(function(t){mS.forEach(function(e){if(t!==e){var o=vv(t,e),n=o.name,i=o.classname;r.push({name:n,classname:i,verticalDirection:e,horizontalDirection:t})}})}),{points:r}},computed:{style:function(){var r={};return this.width&&this.height&&(r.width="".concat(this.width,"px"),r.height="".concat(this.height,"px"),this.transitions&&this.transitions.enabled&&(r.transition="".concat(this.transitions.time,"ms ").concat(this.transitions.timingFunction))),r},classes:function(){var r=this.handlersClasses,t=this.handlersWrappersClasses,e=this.linesClasses,o=this.linesWrappersClasses;return{root:Mc(),handlers:r,handlersWrappers:t,lines:e,linesWrappers:o}},lineNodes:function(){var r=this,t=[];return this.points.forEach(function(e){e.horizontalDirection&&e.verticalDirection||!r.lines[e.name]||t.push({name:e.name,component:r.linesComponent,class:gt(r.classes.lines.default,r.classes.lines[e.name],!r.resizable&&r.classes.lines.disabled),wrapperClass:gt(r.classes.linesWrappers.default,r.classes.linesWrappers[e.name],!r.resizable&&r.classes.linesWrappers.disabled),hoverClass:r.classes.lines.hover,verticalDirection:e.verticalDirection,horizontalDirection:e.horizontalDirection,disabled:!r.resizable})}),t},handlerNodes:function(){var r=this,t=[],e=this.width,o=this.height;return this.points.forEach(function(n){if(r.handlers[n.name]){var i={name:n.name,component:r.handlersComponent,class:gt(r.classes.handlers.default,r.classes.handlers[n.name]),wrapperClass:gt(r.classes.handlersWrappers.default,r.classes.handlersWrappers[n.name]),hoverClass:r.classes.handlers.hover,verticalDirection:n.verticalDirection,horizontalDirection:n.horizontalDirection,disabled:!r.resizable};if(e&&o){var s=n.horizontalDirection,a=n.verticalDirection,l=s==="east"?e:s==="west"?0:e/2,c=a==="south"?o:a==="north"?0:o/2;i.wrapperClass=Mc("handler"),i.wrapperStyle={transform:"translate(".concat(l,"px, ").concat(c,"px)")},r.transitions&&r.transitions.enabled&&(i.wrapperStyle.transition="".concat(r.transitions.time,"ms ").concat(r.transitions.timingFunction))}else i.wrapperClass=Mc("handler",So({},n.classname,!0));t.push(i)}}),t}},beforeMount:function(){window.addEventListener("mouseup",this.onMouseUp,{passive:!1}),window.addEventListener("mousemove",this.onMouseMove,{passive:!1}),window.addEventListener("touchmove",this.onTouchMove,{passive:!1}),window.addEventListener("touchend",this.onTouchEnd,{passive:!1})},beforeUnmount:function(){window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("touchend",this.onTouchEnd)},mounted:function(){this.touches=[]},methods:{onEnd:function(){this.$emit("resize-end")},onHandlerDrag:function(r,t,e){var o,n=r.shift(),i=n.left,s=n.top,a={left:0,right:0,top:0,bottom:0};t==="west"?a.left-=i:t==="east"&&(a.right+=i),e==="north"?a.top-=s:e==="south"&&(a.bottom+=s),!e&&t?o="width":e&&!t&&(o="height"),this.resizable&&this.$emit("resize",new K_(a,{allowedDirections:{left:t==="west"||!t,right:t==="east"||!t,bottom:e==="south"||!e,top:e==="north"||!e},preserveAspectRatio:r.nativeEvent&&r.nativeEvent.shiftKey,respectDirection:o}))}},emits:["resize","resize-end"]};Tv.render=function(r,t,e,o,n,i){return S(),H("div",{ref:"box",class:i.classes.root,style:i.style},[rt(r.$slots,"default"),R("div",null,[(S(!0),H(de,null,qe(i.lineNodes,function(s){return S(),H(ti(s.component),{key:s.name,"default-class":s.class,"hover-class":s.hoverClass,"wrapper-class":s.wrapperClass,position:s.name,disabled:s.disabled,onDrag:function(a){return i.onHandlerDrag(a,s.horizontalDirection,s.verticalDirection)},onDragEnd:t[1]||(t[1]=function(a){return i.onEnd()})},null,8,["default-class","hover-class","wrapper-class","position","disabled","onDrag"])}),128))]),(S(!0),H(de,null,qe(i.handlerNodes,function(s){return S(),H("div",{key:s.name,style:s.wrapperStyle,class:s.wrapperClass},[(S(),H(ti(s.component),{"default-class":s.class,"hover-class":s.hoverClass,"wrapper-class":s.wrapperClass,"horizontal-position":s.horizontalDirection,"vertical-position":s.verticalDirection,disabled:s.disabled,onDrag:function(a){return i.onHandlerDrag(a,s.horizontalDirection,s.verticalDirection)},onDragEnd:t[2]||(t[2]=function(a){return i.onEnd()})},null,8,["default-class","hover-class","wrapper-class","horizontal-position","vertical-position","disabled","onDrag"]))],6)}),128))],6)};var yS=zo("vue-draggable-area"),bv={name:"DraggableArea",props:{movable:{type:Boolean,default:!0},activationDistance:{type:Number,default:20}},computed:{classnames:function(){return{default:yS()}}},beforeMount:function(){window.addEventListener("mouseup",this.onMouseUp,{passive:!1}),window.addEventListener("mousemove",this.onMouseMove,{passive:!1}),window.addEventListener("touchmove",this.onTouchMove,{passive:!1}),window.addEventListener("touchend",this.onTouchEnd,{passive:!1})},beforeUnmount:function(){window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("touchend",this.onTouchEnd)},mounted:function(){this.touches=[],this.touchStarted=!1},methods:{onTouchStart:function(r){if(r.cancelable){var t=this.movable&&r.touches.length===1;t&&(this.touches=Li(r.touches)),(this.touchStarted||t)&&(r.preventDefault(),r.stopPropagation())}},onTouchEnd:function(){this.touchStarted=!1,this.processEnd()},onTouchMove:function(r){this.touches.length>=1&&(this.touchStarted?(this.processMove(r,r.touches),r.preventDefault(),r.stopPropagation()):Cv({x:this.touches[0].clientX,y:this.touches[0].clientY},{x:r.touches[0].clientX,y:r.touches[0].clientY})>this.activationDistance&&(this.initAnchor({clientX:r.touches[0].clientX,clientY:r.touches[0].clientY}),this.touchStarted=!0))},onMouseDown:function(r){if(this.movable&&r.button===0){var t={fake:!0,clientX:r.clientX,clientY:r.clientY};this.touches=[t],this.initAnchor(t),r.stopPropagation()}},onMouseMove:function(r){this.touches.length&&(this.processMove(r,[{fake:!0,clientX:r.clientX,clientY:r.clientY}]),r.preventDefault&&r.cancelable&&r.preventDefault(),r.stopPropagation())},onMouseUp:function(){this.processEnd()},initAnchor:function(r){var t=this.$refs.container.getBoundingClientRect(),e=t.left,o=t.top;this.anchor={x:r.clientX-e,y:r.clientY-o}},processMove:function(r,t){var e=Li(t);if(this.touches.length){var o=this.$refs.container.getBoundingClientRect(),n=o.left,i=o.top;this.touches.length===1&&e.length===1&&this.$emit("move",new zd({left:e[0].clientX-(n+this.anchor.x),top:e[0].clientY-(i+this.anchor.y)}))}},processEnd:function(){this.touches.length&&this.$emit("move-end"),this.touches=[]}},emits:["move","move-end"]};bv.render=function(r,t,e,o,n,i){return S(),H("div",{ref:"container",onTouchstart:t[1]||(t[1]=function(){return i.onTouchStart&&i.onTouchStart.apply(i,arguments)}),onMousedown:t[2]||(t[2]=function(){return i.onMouseDown&&i.onMouseDown.apply(i,arguments)})},[rt(r.$slots,"default")],544)};function Lc(r){var t,e;return{rotate:r.rotate||0,flip:{horizontal:((t=r==null?void 0:r.flip)===null||t===void 0?void 0:t.horizontal)||!1,vertical:((e=r==null?void 0:r.flip)===null||e===void 0?void 0:e.vertical)||!1}}}function CS(r){return new Promise(function(t,e){try{if(r)if(/^data:/i.test(r))t(function(l){l=l.replace(/^data:([^;]+);base64,/gim,"");for(var c=atob(l),u=c.length,d=new ArrayBuffer(u),p=new Uint8Array(d),h=0;h<u;h++)p[h]=c.charCodeAt(h);return d}(r));else if(/^blob:/i.test(r)){var o=new FileReader;o.onload=function(l){t(l.target.result)},i=r,s=function(l){o.readAsArrayBuffer(l)},(a=new XMLHttpRequest).open("GET",i,!0),a.responseType="blob",a.onload=function(){this.status!=200&&this.status!==0||s(this.response)},a.send()}else{var n=new XMLHttpRequest;n.onreadystatechange=function(){n.readyState===4&&(n.status===200||n.status===0?t(n.response):e("Warning: could not load an image to parse its orientation"),n=null)},n.onprogress=function(){n.getResponseHeader("content-type")!=="image/jpeg"&&n.abort()},n.withCredentials=!1,n.open("GET",r,!0),n.responseType="arraybuffer",n.send(null)}else e("Error: the image is empty")}catch(l){e(l)}var i,s,a})}function Av(r){var t=r.rotate,e=r.flip,o=r.scaleX,n=r.scaleY,i="";return i+=" rotate("+t+"deg) ",i+=" scaleX("+o*(e.horizontal?-1:1)+") ",i+=" scaleY("+n*(e.vertical?-1:1)+") "}function wS(r){try{var t,e=new DataView(r),o=void 0,n=void 0,i=void 0,s=void 0;if(e.getUint8(0)===255&&e.getUint8(1)===216)for(var a=e.byteLength,l=2;l+1<a;){if(e.getUint8(l)===255&&e.getUint8(l+1)===225){i=l;break}l++}if(i&&(o=i+10,function(h,f,g){var _,C="";for(_=f,g+=f;_<g;_++)C+=String.fromCharCode(h.getUint8(_));return C}(e,i+4,4)==="Exif")){var c=e.getUint16(o);if(((n=c===18761)||c===19789)&&e.getUint16(o+2,n)===42){var u=e.getUint32(o+4,n);u>=8&&(s=o+u)}}if(s){for(var d=e.getUint16(s,n),p=0;p<d;p++)if(l=s+12*p+2,e.getUint16(l,n)===274){l+=8,t=e.getUint16(l,n),e.setUint16(l,1,n);break}}return t}catch{return null}}function Hh(r,t){var e=t.getBoundingClientRect(),o=e.left,n=e.top,i={left:0,top:0},s=0;return r.forEach(function(a){i.left+=(a.clientX-o)/r.length,i.top+=(a.clientY-n)/r.length}),r.forEach(function(a){s+=Cv({x:i.left,y:i.top},{x:a.clientX-o,y:a.clientY-n})}),{centerMass:i,spread:s,count:r.length}}var Ov={props:{touchMove:{type:Boolean,required:!0},mouseMove:{type:Boolean,required:!0},touchResize:{type:Boolean,required:!0},wheelResize:{type:[Boolean,Object],required:!0},eventsFilter:{type:Function,required:!1}},beforeMount:function(){window.addEventListener("mouseup",this.onMouseUp,{passive:!1}),window.addEventListener("mousemove",this.onMouseMove,{passive:!1}),window.addEventListener("touchmove",this.onTouchMove,{passive:!1}),window.addEventListener("touchend",this.onTouchEnd,{passive:!1})},beforeUnmount:function(){window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("touchend",this.onTouchEnd)},created:function(){this.transforming=!1,this.debouncedProcessEnd=Yu(this.processEnd),this.touches=[]},methods:{processMove:function(r,t){if(this.touches.length){if(this.touches.length===1&&t.length===1)this.$emit("move",new Ls({left:this.touches[0].clientX-t[0].clientX,top:this.touches[0].clientY-t[0].clientY}));else if(this.touches.length>1&&this.touchResize){var e=Hh(t,this.$refs.container),o=this.oldGeometricProperties;o.count===e.count&&o.count>1&&this.$emit("resize",new Ls({left:o.centerMass.left-e.centerMass.left,top:o.centerMass.top-e.centerMass.top},{factor:o.spread/e.spread,center:e.centerMass})),this.oldGeometricProperties=e}this.touches=t}},processEnd:function(){this.transforming&&(this.transforming=!1,this.$emit("transform-end"))},processStart:function(){this.transforming=!0,this.debouncedProcessEnd.clear()},processEvent:function(r){return this.eventsFilter?this.eventsFilter(r,this.transforming)!==!1:(r.preventDefault(),r.stopPropagation(),!0)},onTouchStart:function(r){if(r.cancelable&&(this.touchMove||this.touchResize&&r.touches.length>1)&&this.processEvent(r)){var t=this.$refs.container,e=t.getBoundingClientRect(),o=e.left,n=e.top,i=e.bottom,s=e.right;this.touches=Li(r.touches).filter(function(a){return a.clientX>o&&a.clientX<s&&a.clientY>n&&a.clientY<i}),this.oldGeometricProperties=Hh(this.touches,t)}},onTouchEnd:function(r){r.touches.length===0&&(this.touches=[],this.processEnd())},onTouchMove:function(r){var t=this;if(this.touches.length){var e=Li(r.touches).filter(function(o){return!o.identifier||t.touches.find(function(n){return n.identifier===o.identifier})});this.processEvent(r)&&(this.processMove(r,e),this.processStart())}},onMouseDown:function(r){if(this.mouseMove&&"buttons"in r&&r.buttons===1&&this.processEvent(r)){var t={fake:!0,clientX:r.clientX,clientY:r.clientY};this.touches=[t],this.processStart()}},onMouseMove:function(r){this.touches.length&&this.processEvent(r)&&this.processMove(r,[{clientX:r.clientX,clientY:r.clientY}])},onMouseUp:function(){this.touches=[],this.processEnd()},onWheel:function(r){if(this.wheelResize&&this.processEvent(r)){var t=this.$refs.container.getBoundingClientRect(),e=t.left,o=t.top,n=1+this.wheelResize.ratio*(s=r.deltaY||r.detail||r.wheelDelta,(a=+s)==0||yv(a)?a:a>0?1:-1),i={left:r.clientX-e,top:r.clientY-o};this.$emit("resize",new Ls({},{factor:n,center:i})),this.touches.length||this.debouncedProcessEnd()}var s,a}},emits:["resize","move","transform-end"]};Ov.render=function(r,t,e,o,n,i){return S(),H("div",{ref:"container",onTouchstart:t[1]||(t[1]=function(){return i.onTouchStart&&i.onTouchStart.apply(i,arguments)}),onMousedown:t[2]||(t[2]=function(){return i.onMouseDown&&i.onMouseDown.apply(i,arguments)}),onWheel:t[3]||(t[3]=function(){return i.onWheel&&i.onWheel.apply(i,arguments)})},[rt(r.$slots,"default")],544)};var Zu={components:{TransformableImage:Ov},props:{touchMove:{type:Boolean,required:!0},mouseMove:{type:Boolean,required:!0},touchResize:{type:Boolean,required:!0},wheelResize:{type:[Boolean,Object],required:!0}},emits:["resize","move"]};Zu.render=function(r,t,e,o,n,i){var s=lt("transformable-image");return S(),H(s,{"touch-move":e.touchMove,"touch-resize":e.touchResize,"mouse-move":e.mouseMove,"wheel-resize":e.wheelResize,onMove:t[1]||(t[1]=function(a){return r.$emit("move",a)}),onResize:t[2]||(t[2]=function(a){return r.$emit("resize",a)})},{default:D(function(){return[rt(r.$slots,"default")]}),_:3},8,["touch-move","touch-resize","mouse-move","wheel-resize"])};var ya=zo("vue-preview"),qd={props:{coordinates:{type:Object},transitions:{type:Object},image:{type:Object,default:function(){return{}}},imageClass:{type:String},width:{type:Number},height:{type:Number},fill:{type:Boolean}},data:function(){return{calculatedImageSize:{width:0,height:0},calculatedSize:{width:0,height:0}}},computed:{classes:function(){return{root:ya({fill:this.fill}),wrapper:ya("wrapper"),imageWrapper:ya("image-wrapper"),image:gt(ya("image"),this.imageClass)}},style:function(){if(this.fill)return{};var r={};return this.width&&(r.width="".concat(this.size.width,"px")),this.height&&(r.height="".concat(this.size.height,"px")),this.transitions&&this.transitions.enabled&&(r.transition="".concat(this.transitions.time,"ms ").concat(this.transitions.timingFunction)),r},wrapperStyle:function(){var r={width:"".concat(this.size.width,"px"),height:"".concat(this.size.height,"px"),left:"calc(50% - ".concat(this.size.width/2,"px)"),top:"calc(50% - ".concat(this.size.height/2,"px)")};return this.transitions&&this.transitions.enabled&&(r.transition="".concat(this.transitions.time,"ms ").concat(this.transitions.timingFunction)),r},imageStyle:function(){if(this.coordinates&&this.image){var r=this.coordinates.width/this.size.width,t=Be(Be({rotate:0,flip:{horizontal:!1,vertical:!1}},this.image.transforms),{},{scaleX:1/r,scaleY:1/r}),e=this.imageSize.width,o=this.imageSize.height,n=Ev({width:e,height:o},t.rotate),i={width:"".concat(e,"px"),height:"".concat(o,"px"),left:"0px",top:"0px"},s={rotate:{left:(e-n.width)*t.scaleX/2,top:(o-n.height)*t.scaleY/2},scale:{left:(1-t.scaleX)*e/2,top:(1-t.scaleY)*o/2}};return i.transform=`translate(
				`.concat(-this.coordinates.left/r-s.rotate.left-s.scale.left,"px,").concat(-this.coordinates.top/r-s.rotate.top-s.scale.top,"px) ")+Av(t),this.transitions&&this.transitions.enabled&&(i.transition="".concat(this.transitions.time,"ms ").concat(this.transitions.timingFunction)),i}return{}},size:function(){return{width:this.width||this.calculatedSize.width,height:this.height||this.calculatedSize.height}},imageSize:function(){return{width:this.image.width||this.calculatedImageSize.width,height:this.image.height||this.calculatedImageSize.height}}},watch:{image:function(r){(r.width||r.height)&&this.onChangeImage()}},mounted:function(){var r=this;this.onChangeImage(),this.$refs.image.addEventListener("load",function(){r.refreshImage()}),window.addEventListener("resize",this.refresh),window.addEventListener("orientationchange",this.refresh)},unmounted:function(){window.removeEventListener("resize",this.refresh),window.removeEventListener("orientationchange",this.refresh)},methods:{refreshImage:function(){var r=this.$refs.image;this.calculatedImageSize.height=r.naturalHeight,this.calculatedImageSize.width=r.naturalWidth},refresh:function(){var r=this.$refs.root;this.width||(this.calculatedSize.width=r.clientWidth),this.height||(this.calculatedSize.height=r.clientHeight)},onChangeImage:function(){var r=this.$refs.image;r&&r.complete&&this.refreshImage(),this.refresh()}}};qd.render=function(r,t,e,o,n,i){return S(),H("div",{ref:"root",class:i.classes.root,style:i.style},[R("div",{ref:"wrapper",class:i.classes.wrapper,style:i.wrapperStyle},[Ne(R("img",{ref:"image",src:e.image&&e.image.src,class:i.classes.image,style:i.imageStyle},null,14,["src"]),[[Vi,e.image&&e.image.src]])],6)],6)};var Pv={components:{Preview:qd},inheritAttrs:!1};Pv.render=function(r,t,e,o,n,i){var s=lt("preview");return S(),H(s,Ul(r.$attrs,{fill:!0}),null,16)};var xc=zo("vue-rectangle-stencil"),Iv={name:"RectangleStencil",components:{StencilPreview:Pv,BoundingBox:Tv,DraggableArea:bv},props:{image:{type:Object},coordinates:{type:Object},stencilCoordinates:{type:Object},handlers:{type:Object},handlersComponent:{type:[Object,String],default:function(){return Kd}},lines:{type:Object},linesComponent:{type:[Object,String],default:function(){return Yd}},aspectRatio:{type:[Number,String]},minAspectRatio:{type:[Number,String]},maxAspectRatio:{type:[Number,String]},movable:{type:Boolean,default:!0},resizable:{type:Boolean,default:!0},transitions:{type:Object},movingClass:{type:String},resizingClass:{type:String},previewClass:{type:String},boundingBoxClass:{type:String},linesClasses:{type:Object,default:function(){return{}}},linesWrappersClasses:{type:Object,default:function(){return{}}},handlersClasses:{type:Object,default:function(){return{}}},handlersWrappersClasses:{type:Object,default:function(){return{}}}},data:function(){return{moving:!1,resizing:!1}},computed:{classes:function(){return{stencil:gt(xc({movable:this.movable,moving:this.moving,resizing:this.resizing}),this.moving&&this.movingClass,this.resizing&&this.resizingClass),preview:gt(xc("preview"),this.previewClass),boundingBox:gt(xc("bounding-box"),this.boundingBoxClass)}},style:function(){var r=this.stencilCoordinates,t=r.height,e=r.width,o=r.left,n=r.top,i={width:"".concat(e,"px"),height:"".concat(t,"px"),transform:"translate(".concat(o,"px, ").concat(n,"px)")};return this.transitions&&this.transitions.enabled&&(i.transition="".concat(this.transitions.time,"ms ").concat(this.transitions.timingFunction)),i}},methods:{onMove:function(r){this.$emit("move",r),this.moving=!0},onMoveEnd:function(){this.$emit("move-end"),this.moving=!1},onResize:function(r){this.$emit("resize",r),this.resizing=!0},onResizeEnd:function(){this.$emit("resize-end"),this.resizing=!1},aspectRatios:function(){return{minimum:this.aspectRatio||this.minAspectRatio,maximum:this.aspectRatio||this.maxAspectRatio}}},emits:["resize","resize-end","move","move-end"]};Iv.render=function(r,t,e,o,n,i){var s=lt("stencil-preview"),a=lt("draggable-area"),l=lt("bounding-box");return S(),H("div",{class:i.classes.stencil,style:i.style},[R(l,{width:e.stencilCoordinates.width,height:e.stencilCoordinates.height,transitions:e.transitions,class:i.classes.boundingBox,handlers:e.handlers,"handlers-component":e.handlersComponent,"handlers-classes":e.handlersClasses,"handlers-wrappers-classes":e.handlersWrappersClasses,lines:e.lines,"lines-component":e.linesComponent,"lines-classes":e.linesClasses,"lines-wrappers-classes":e.linesWrappersClasses,resizable:e.resizable,onResize:i.onResize,onResizeEnd:i.onResizeEnd},{default:D(function(){return[R(a,{movable:e.movable,onMove:i.onMove,onMoveEnd:i.onMoveEnd},{default:D(function(){return[R(s,{image:e.image,coordinates:e.coordinates,width:e.stencilCoordinates.width,height:e.stencilCoordinates.height,class:i.classes.preview,transitions:e.transitions},null,8,["image","coordinates","width","height","class","transitions"])]}),_:1},8,["movable","onMove","onMoveEnd"])]}),_:1},8,["width","height","transitions","class","handlers","handlers-component","handlers-classes","handlers-wrappers-classes","lines","lines-component","lines-classes","lines-wrappers-classes","resizable","onResize","onResizeEnd"])],6)};var _S=["transitions"],vn=zo("vue-advanced-cropper"),Dv={name:"Cropper",components:{BackgroundWrapper:Zu},props:{src:{type:String,default:null},stencilComponent:{type:[Object,String],default:function(){return Iv}},backgroundWrapperComponent:{type:[Object,String],default:function(){return Zu}},stencilProps:{type:Object,default:function(){return{}}},autoZoom:{type:Boolean,default:!1},imageClass:{type:String},boundariesClass:{type:String},backgroundClass:{type:String},foregroundClass:{type:String},minWidth:{type:[Number,String]},minHeight:{type:[Number,String]},maxWidth:{type:[Number,String]},maxHeight:{type:[Number,String]},debounce:{type:[Boolean,Number],default:500},transitions:{type:Boolean,default:!0},checkOrientation:{type:Boolean,default:!0},canvas:{type:[Object,Boolean],default:!0},crossOrigin:{type:[Boolean,String],default:void 0},transitionTime:{type:Number,default:300},imageRestriction:{type:String,default:"fit-area",validator:function(r){return J_.indexOf(r)!==-1}},roundResult:{type:Boolean,default:!0},defaultSize:{type:[Function,Object]},defaultPosition:{type:[Function,Object]},defaultVisibleArea:{type:[Function,Object]},defaultTransforms:{type:[Function,Object]},defaultBoundaries:{type:[Function,String],validator:function(r){return!(typeof r=="string"&&r!=="fill"&&r!=="fit")}},priority:{type:String,default:"coordinates"},stencilSize:{type:[Object,Function]},resizeImage:{type:[Boolean,Object],default:!0},moveImage:{type:[Boolean,Object],default:!0},autoZoomAlgorithm:{type:Function},resizeAlgorithm:{type:Function,default:function(r){var t=r.event,e=r.coordinates,o=r.aspectRatio,n=r.positionRestrictions,i=r.sizeRestrictions,s=ge(ge({},e),{right:e.left+e.width,bottom:e.top+e.height}),a=t.params||{},l=ge({},t.directions),c=a.allowedDirections||{left:!0,right:!0,bottom:!0,top:!0};i.widthFrozen&&(l.left=0,l.right=0),i.heightFrozen&&(l.top=0,l.bottom=0),en.forEach(function(P){c[P]||(l[P]=0)});var u=Zo(s,l=kh({coordinates:s,directions:l,sizeRestrictions:i,positionRestrictions:n})).width,d=Zo(s,l).height,p=a.preserveRatio?Ue(s):Dc(u/d,o);if(p){var h=a.respectDirection;if(h||(h=s.width>=s.height||p===1?"width":"height"),h==="width"){var f=u/p-s.height;if(c.top&&c.bottom){var g=l.top,_=l.bottom;l.bottom=ma(f,_,g),l.top=ma(f,g,_)}else c.bottom?l.bottom=f:c.top?l.top=f:c.right?l.right=0:c.left&&(l.left=0)}else if(h==="height"){var C=s.width-d*p;if(c.left&&c.right){var E=l.left,T=l.right;l.left=-ma(C,E,T),l.right=-ma(C,T,E)}else c.left?l.left=-C:c.right?l.right=-C:c.top?l.top=0:c.bottom&&(l.bottom=0)}l=kh({directions:l,coordinates:s,sizeRestrictions:i,positionRestrictions:n,preserveRatio:!0,compensate:a.compensate})}return u=Zo(s,l).width,d=Zo(s,l).height,(p=a.preserveRatio?Ue(s):Dc(u/d,o))&&Math.abs(p-u/d)>.001&&en.forEach(function(P){c[P]||(l[P]=0)}),Xu({event:new zd({left:-l.left,top:-l.top}),coordinates:{width:e.width+l.right+l.left,height:e.height+l.top+l.bottom,left:e.left,top:e.top},positionRestrictions:n})}},moveAlgorithm:{type:Function,default:Xu},initStretcher:{type:Function,default:function(r){var t=r.stretcher,e=r.imageSize,o=Ue(e);t.style.width=e.width+"px",t.style.height=t.clientWidth/o+"px",t.style.width=t.clientWidth+"px"}},fitCoordinates:{type:Function,default:function(r){var t=r.visibleArea,e=r.coordinates,o=r.aspectRatio,n=r.sizeRestrictions,i=r.positionRestrictions,s=ge(ge({},e),En({width:e.width,height:e.height,aspectRatio:o,sizeRestrictions:{maxWidth:t.width,maxHeight:t.height,minHeight:Math.min(t.height,n.minHeight),minWidth:Math.min(t.width,n.minWidth)}}));return s=Dt(s=oo(s,Er(It(e),It(s))),ql(pn(t),i))}},fitVisibleArea:{type:Function,default:function(r){var t=r.visibleArea,e=r.boundaries,o=r.getAreaRestrictions,n=r.coordinates,i=ge({},t);i.height=i.width/Ue(e),i.top+=(t.height-i.height)/2,(n.height-i.height>0||n.width-i.width>0)&&(i=Ro(i,Math.max(n.height/i.height,n.width/i.width)));var s=Kl(Tr(n,pn(i=Ro(i,Yl(i,o({visibleArea:i,type:"resize"}))))));return i.width<n.width&&(s.left=0),i.height<n.height&&(s.top=0),i=Dt(i=oo(i,s),o({visibleArea:i,type:"move"}))}},areaRestrictionsAlgorithm:{type:Function,default:function(r){var t=r.visibleArea,e=r.boundaries,o=r.imageSize,n=r.imageRestriction,i=r.type,s={};return n==="fill-area"?s={left:0,top:0,right:o.width,bottom:o.height}:n==="fit-area"&&(Ue(e)>Ue(o)?(s={top:0,bottom:o.height},t&&i==="move"&&(t.width>o.width?(s.left=-(t.width-o.width)/2,s.right=o.width-s.left):(s.left=0,s.right=o.width))):(s={left:0,right:o.width},t&&i==="move"&&(t.height>o.height?(s.top=-(t.height-o.height)/2,s.bottom=o.height-s.top):(s.top=0,s.bottom=o.height)))),s}},sizeRestrictionsAlgorithm:{type:Function,default:function(r){return{minWidth:r.minWidth,minHeight:r.minHeight,maxWidth:r.maxWidth,maxHeight:r.maxHeight}}},positionRestrictionsAlgorithm:{type:Function,default:function(r){var t=r.imageSize,e={};return r.imageRestriction!=="none"&&(e={left:0,top:0,right:t.width,bottom:t.height}),e}}},data:function(){return{transitionsActive:!1,imageLoaded:!1,imageAttributes:{width:null,height:null,crossOrigin:null,src:null},defaultImageTransforms:{rotate:0,flip:{horizontal:!1,vertical:!1}},appliedImageTransforms:{rotate:0,flip:{horizontal:!1,vertical:!1}},boundaries:{width:0,height:0},visibleArea:null,coordinates:Be({},xh)}},computed:{image:function(){return{src:this.imageAttributes.src,width:this.imageAttributes.width,height:this.imageAttributes.height,transforms:this.imageTransforms}},imageTransforms:function(){return{rotate:this.appliedImageTransforms.rotate,flip:{horizontal:this.appliedImageTransforms.flip.horizontal,vertical:this.appliedImageTransforms.flip.vertical},translateX:this.visibleArea?this.visibleArea.left/this.coefficient:0,translateY:this.visibleArea?this.visibleArea.top/this.coefficient:0,scaleX:1/this.coefficient,scaleY:1/this.coefficient}},imageSize:function(){var r=function(t){return t*Math.PI/180}(this.imageTransforms.rotate);return{width:Math.abs(this.imageAttributes.width*Math.cos(r))+Math.abs(this.imageAttributes.height*Math.sin(r)),height:Math.abs(this.imageAttributes.width*Math.sin(r))+Math.abs(this.imageAttributes.height*Math.cos(r))}},initialized:function(){return!!(this.visibleArea&&this.imageLoaded)},settings:function(){var r=qu(this.resizeImage,{touch:!0,wheel:{ratio:.1},adjustStencil:!0},{touch:!1,wheel:!1,adjustStencil:!1});return{moveImage:qu(this.moveImage,{touch:!0,mouse:!0},{touch:!1,mouse:!1}),resizeImage:r}},coefficient:function(){return this.visibleArea?this.visibleArea.width/this.boundaries.width:0},areaRestrictions:function(){return this.imageLoaded?this.areaRestrictionsAlgorithm({imageSize:this.imageSize,imageRestriction:this.imageRestriction,boundaries:this.boundaries}):{}},transitionsOptions:function(){return{enabled:this.transitionsActive,timingFunction:"ease-in-out",time:350}},sizeRestrictions:function(){if(this.boundaries.width&&this.boundaries.height&&this.imageSize.width&&this.imageSize.height){var r=this.sizeRestrictionsAlgorithm({imageSize:this.imageSize,minWidth:wt(this.minWidth)?0:ga(this.minWidth),minHeight:wt(this.minHeight)?0:ga(this.minHeight),maxWidth:wt(this.maxWidth)?1/0:ga(this.maxWidth),maxHeight:wt(this.maxHeight)?1/0:ga(this.maxHeight)});if(r=function(o){var n=o.areaRestrictions,i=o.sizeRestrictions;o.imageSize;var s=o.boundaries,a=o.positionRestrictions;o.imageRestriction;var l=ge(ge({},i),{minWidth:i.minWidth!==void 0?i.minWidth:0,minHeight:i.minHeight!==void 0?i.minHeight:0,maxWidth:i.maxWidth!==void 0?i.maxWidth:1/0,maxHeight:i.maxHeight!==void 0?i.maxHeight:1/0});a.left!==void 0&&a.right!==void 0&&(l.maxWidth=Math.min(l.maxWidth,a.right-a.left)),a.bottom!==void 0&&a.top!==void 0&&(l.maxHeight=Math.min(l.maxHeight,a.bottom-a.top));var c=Qu(n),u=Sv(s,c);return c.width<1/0&&(!l.maxWidth||l.maxWidth>u.width)&&(l.maxWidth=Math.min(l.maxWidth,u.width)),c.height<1/0&&(!l.maxHeight||l.maxHeight>u.height)&&(l.maxHeight=Math.min(l.maxHeight,u.height)),l.minWidth>l.maxWidth&&(l.minWidth=l.maxWidth,l.widthFrozen=!0),l.minHeight>l.maxHeight&&(l.minHeight=l.maxHeight,l.heightFrozen=!0),l}({sizeRestrictions:r,areaRestrictions:this.getAreaRestrictions({visibleArea:this.visibleArea,type:"resize"}),imageSize:this.imageSize,boundaries:this.boundaries,positionRestrictions:this.positionRestrictions,imageRestriction:this.imageRestriction,visibleArea:this.visibleArea,stencilSize:this.getStencilSize()}),this.visibleArea&&this.stencilSize){var t=this.getStencilSize(),e=Qu(this.getAreaRestrictions({visibleArea:this.visibleArea,type:"resize"}));r.maxWidth=Math.min(r.maxWidth,e.width*t.width/this.boundaries.width),r.maxHeight=Math.min(r.maxHeight,e.height*t.height/this.boundaries.height),r.maxWidth<r.minWidth&&(r.minWidth=r.maxWidth),r.maxHeight<r.minHeight&&(r.minHeight=r.maxHeight)}return r}return{minWidth:0,minHeight:0,maxWidth:0,maxHeight:0}},positionRestrictions:function(){return this.positionRestrictionsAlgorithm({imageSize:this.imageSize,imageRestriction:this.imageRestriction})},classes:function(){return{cropper:vn(),image:gt(vn("image"),this.imageClass),stencil:vn("stencil"),boundaries:gt(vn("boundaries"),this.boundariesClass),stretcher:gt(vn("stretcher")),background:gt(vn("background"),this.backgroundClass),foreground:gt(vn("foreground"),this.foregroundClass),imageWrapper:gt(vn("image-wrapper")),cropperWrapper:gt(vn("cropper-wrapper"))}},stencilCoordinates:function(){if(this.initialized){var r=this.coordinates,t=r.width,e=r.height,o=r.left,n=r.top;return{width:t/this.coefficient,height:e/this.coefficient,left:(o-this.visibleArea.left)/this.coefficient,top:(n-this.visibleArea.top)/this.coefficient}}return this.defaultCoordinates()},boundariesStyle:function(){var r={width:this.boundaries.width?"".concat(Math.round(this.boundaries.width),"px"):"auto",height:this.boundaries.height?"".concat(Math.round(this.boundaries.height),"px"):"auto",transition:"opacity ".concat(this.transitionTime,"ms"),pointerEvents:this.imageLoaded?"all":"none"};return this.imageLoaded||(r.opacity="0"),r},imageStyle:function(){var r=this.imageAttributes.width>this.imageAttributes.height?{width:Math.min(1024,this.imageAttributes.width),height:Math.min(1024,this.imageAttributes.width)/(this.imageAttributes.width/this.imageAttributes.height)}:{height:Math.min(1024,this.imageAttributes.height),width:Math.min(1024,this.imageAttributes.height)*(this.imageAttributes.width/this.imageAttributes.height)},t={left:(r.width-this.imageSize.width)/(2*this.coefficient),top:(r.height-this.imageSize.height)/(2*this.coefficient)},e={left:(1-1/this.coefficient)*r.width/2,top:(1-1/this.coefficient)*r.height/2},o=Be(Be({},this.imageTransforms),{},{scaleX:this.imageTransforms.scaleX*(this.imageAttributes.width/r.width),scaleY:this.imageTransforms.scaleY*(this.imageAttributes.height/r.height)}),n={width:"".concat(r.width,"px"),height:"".concat(r.height,"px"),left:"0px",top:"0px",transform:"translate(".concat(-t.left-e.left-this.imageTransforms.translateX,"px, ").concat(-t.top-e.top-this.imageTransforms.translateY,"px)")+Av(o)};return this.transitionsOptions.enabled&&(n.transition="".concat(this.transitionsOptions.time,"ms ").concat(this.transitionsOptions.timingFunction)),n}},watch:{src:function(){this.onChangeImage()},stencilComponent:function(){var r=this;this.$nextTick(function(){r.resetCoordinates(),r.runAutoZoom("setCoordinates"),r.onChange()})},minWidth:function(){this.onPropsChange()},maxWidth:function(){this.onPropsChange()},minHeight:function(){this.onPropsChange()},maxHeight:function(){this.onPropsChange()},imageRestriction:function(){this.reset()},stencilProps:function(r,t){["aspectRatio","minAspectRatio","maxAspectRatio"].find(function(e){return r[e]!==t[e]})&&this.$nextTick(this.onPropsChange)}},created:function(){this.debouncedUpdate=Yu(this.update,this.debounce),this.debouncedDisableTransitions=Yu(this.disableTransitions,this.transitionsOptions.time),this.awaiting=!1},mounted:function(){this.$refs.image.addEventListener("load",this.onSuccessLoadImage),this.$refs.image.addEventListener("error",this.onFailLoadImage),this.onChangeImage(),window.addEventListener("resize",this.refresh),window.addEventListener("orientationchange",this.refresh)},unmounted:function(){window.removeEventListener("resize",this.refresh),window.removeEventListener("orientationchange",this.refresh),this.imageAttributes.revoke&&this.imageAttributes.src&&URL.revokeObjectURL(this.imageAttributes.src),this.debouncedUpdate.clear(),this.debouncedDisableTransitions.clear()},methods:{getResult:function(){var r=this.initialized?this.prepareResult(Be({},this.coordinates)):this.defaultCoordinates(),t={rotate:this.imageTransforms.rotate%360,flip:Be({},this.imageTransforms.flip)};if(this.src&&this.imageLoaded){var e=this;return{image:this.image,coordinates:r,visibleArea:this.visibleArea?Be({},this.visibleArea):null,imageTransforms:t,get canvas(){return e.canvas?e.getCanvas():void 0}}}return{image:this.image,coordinates:r,visibleArea:this.visibleArea?Be({},this.visibleArea):null,canvas:void 0,imageTransforms:t}},zoom:function(r,t){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=e.transitions,n=o===void 0||o;this.onManipulateImage(new Ls({},{factor:1/r,center:t}),{normalize:!1,transitions:n})},move:function(r,t){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=e.transitions,n=o===void 0||o;this.onManipulateImage(new Ls({left:r||0,top:t||0}),{normalize:!1,transitions:n})},setCoordinates:function(r){var t=this,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=e.autoZoom,n=o===void 0||o,i=e.transitions,s=i===void 0||i;this.$nextTick(function(){t.imageLoaded?(t.transitionsActive||(s&&t.enableTransitions(),t.coordinates=t.applyTransform(r),n&&t.runAutoZoom("setCoordinates"),s&&t.debouncedDisableTransitions()),t.onChange()):t.delayedTransforms=r})},refresh:function(){var r=this,t=this.$refs.image;if(this.src&&t)return this.initialized?this.updateVisibleArea().then(function(){r.onChange()}):this.resetVisibleArea().then(function(){r.onChange()})},reset:function(){var r=this;return this.resetVisibleArea().then(function(){r.onChange(!1)})},awaitRender:function(r){var t=this;this.awaiting||(this.awaiting=!0,this.$nextTick(function(){r(),t.awaiting=!1}))},prepareResult:function(r){return this.roundResult?function(t){var e=t.coordinates,o=t.sizeRestrictions,n=t.positionRestrictions,i={width:Math.round(e.width),height:Math.round(e.height),left:Math.round(e.left),top:Math.round(e.top)};return i.width>o.maxWidth?i.width=Math.floor(e.width):i.width<o.minWidth&&(i.width=Math.ceil(e.width)),i.height>o.maxHeight?i.height=Math.floor(e.height):i.height<o.minHeight&&(i.height=Math.ceil(e.height)),Dt(i,n)}(Be(Be({},this.getPublicProperties()),{},{positionRestrictions:va(this.positionRestrictions,this.visibleArea),coordinates:r})):r},processAutoZoom:function(r,t,e,o){var n=this.autoZoomAlgorithm;n||(n=this.stencilSize?oS:this.autoZoom?nS:iS);var i=n({event:{type:r,params:o},visibleArea:t,coordinates:e,boundaries:this.boundaries,aspectRatio:this.getAspectRatio(),positionRestrictions:this.positionRestrictions,getAreaRestrictions:this.getAreaRestrictions,sizeRestrictions:this.sizeRestrictions,stencilSize:this.getStencilSize()});return Be(Be({},i),{},{changed:!Fh(i.visibleArea,t)||!Fh(i.coordinates,e)})},runAutoZoom:function(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},e=t.transitions,o=e!==void 0&&e,n=z_(t,_S),i=this.processAutoZoom(r,this.visibleArea,this.coordinates,n),s=i.visibleArea,a=i.coordinates,l=i.changed;o&&l&&this.enableTransitions(),this.visibleArea=s,this.coordinates=a,o&&l&&this.debouncedDisableTransitions()},normalizeEvent:function(r){return function(t){var e=t.event,o=t.visibleArea,n=t.coefficient;if(e.type==="manipulateImage")return ge(ge({},e),{move:{left:e.move&&e.move.left?n*e.move.left:0,top:e.move&&e.move.top?n*e.move.top:0},scale:{factor:e.scale&&e.scale.factor?e.scale.factor:1,center:e.scale&&e.scale.center?{left:e.scale.center.left*n+o.left,top:e.scale.center.top*n+o.top}:null}});if(e.type==="resize"){var i=ge(ge({},e),{directions:ge({},e.directions)});return en.forEach(function(a){i.directions[a]*=n}),i}if(e.type==="move"){var s=ge(ge({},e),{directions:ge({},e.directions)});return Z_.forEach(function(a){s.directions[a]*=n}),s}return e}(Be(Be({},this.getPublicProperties()),{},{event:r}))},getCanvas:function(){if(this.$refs.canvas){var r=this.$refs.canvas,t=this.$refs.image,e=this.imageTransforms.rotate!==0||this.imageTransforms.flip.horizontal||this.imageTransforms.flip.vertical?function(a,l,c){var u=c.rotate,d=c.flip,p={width:l.naturalWidth,height:l.naturalHeight},h=Ev(p,u),f=a.getContext("2d");a.height=h.height,a.width=h.width,f.save();var g=qn(It(ge({left:0,top:0},p)),u);return f.translate(-(g.left-h.width/2),-(g.top-h.height/2)),f.rotate(u*Math.PI/180),f.translate(d.horizontal?p.width:0,d.vertical?p.height:0),f.scale(d.horizontal?-1:1,d.vertical?-1:1),f.drawImage(l,0,0,p.width,p.height),f.restore(),a}(this.$refs.sourceCanvas,t,this.imageTransforms):t,o=Be({minWidth:0,minHeight:0,maxWidth:1/0,maxHeight:1/0,maxArea:this.maxCanvasSize,imageSmoothingEnabled:!0,imageSmoothingQuality:"high",fillColor:"transparent"},this.canvas),n=function(a){return a.find(function(l){return c=l,!Number.isNaN(parseFloat(c))&&isFinite(c);var c})},i=En({sizeRestrictions:{minWidth:n([o.width,o.minWidth])||0,minHeight:n([o.height,o.minHeight])||0,maxWidth:n([o.width,o.maxWidth])||1/0,maxHeight:n([o.height,o.maxHeight])||1/0},width:this.coordinates.width,height:this.coordinates.height,aspectRatio:{minimum:this.coordinates.width/this.coordinates.height,maximum:this.coordinates.width/this.coordinates.height}});if(o.maxArea&&i.width*i.height>o.maxArea){var s=Math.sqrt(o.maxArea/(i.width*i.height));i={width:Math.round(s*i.width),height:Math.round(s*i.height)}}return function(a,l,c,u,d){a.width=u?u.width:c.width,a.height=u?u.height:c.height;var p=a.getContext("2d");p.clearRect(0,0,a.width,a.height),d&&(d.imageSmoothingEnabled&&(p.imageSmoothingEnabled=d.imageSmoothingEnabled),d.imageSmoothingQuality&&(p.imageSmoothingQuality=d.imageSmoothingQuality),d.fillColor&&(p.fillStyle=d.fillColor,p.fillRect(0,0,a.width,a.height),p.save()));var h=c.left<0?-c.left:0,f=c.top<0?-c.top:0;p.drawImage(l,c.left+h,c.top+f,c.width,c.height,h,f,a.width,a.height)}(r,e,this.coordinates,i,o),r}},update:function(){this.$emit("change",this.getResult())},applyTransform:function(r){var t=arguments.length>1&&arguments[1]!==void 0&&arguments[1],e=this.visibleArea&&t?eS(this.sizeRestrictions,this.visibleArea):this.sizeRestrictions,o=this.visibleArea&&t?va(this.positionRestrictions,this.visibleArea):this.positionRestrictions;return tS({transform:r,coordinates:this.coordinates,imageSize:this.imageSize,sizeRestrictions:e,positionRestrictions:o,aspectRatio:this.getAspectRatio(),visibleArea:this.visibleArea})},resetCoordinates:function(){var r=this;if(this.$refs.image){this.$refs.cropper,this.$refs.image;var t=this.defaultSize;t||(t=this.stencilSize?aS:sS);var e=this.sizeRestrictions;e.minWidth,e.minHeight,e.maxWidth,e.maxHeight;var o=er(t)?t({boundaries:this.boundaries,imageSize:this.imageSize,aspectRatio:this.getAspectRatio(),sizeRestrictions:this.sizeRestrictions,stencilSize:this.getStencilSize(),visibleArea:this.visibleArea}):t,n=this.defaultPosition||rS,i=[o,function(s){var a=s.coordinates;return Be({},er(n)?n({coordinates:a,imageSize:r.imageSize,visibleArea:r.visibleArea}):r.defaultPosition)}];this.delayedTransforms&&i.push.apply(i,Li(Array.isArray(this.delayedTransforms)?this.delayedTransforms:[this.delayedTransforms])),this.coordinates=this.applyTransform(i,!0),this.delayedTransforms=null}},clearImage:function(){var r=this;this.imageLoaded=!1,setTimeout(function(){var t=r.$refs.stretcher;t&&(t.style.height="auto",t.style.width="auto"),r.coordinates=r.defaultCoordinates(),r.boundaries={width:0,height:0}},this.transitionTime)},enableTransitions:function(){this.transitions&&(this.transitionsActive=!0)},disableTransitions:function(){this.transitionsActive=!1},updateBoundaries:function(){var r=this,t=this.$refs.stretcher,e=this.$refs.cropper;return this.initStretcher({cropper:e,stretcher:t,imageSize:this.imageSize}),this.$nextTick().then(function(){var o={cropper:e,imageSize:r.imageSize};if(er(r.defaultBoundaries)?r.boundaries=r.defaultBoundaries(o):r.defaultBoundaries==="fit"?r.boundaries=function(n){var i=n.cropper,s=n.imageSize,a=i.clientHeight,l=i.clientWidth,c=a,u=s.width*a/s.height;return u>l&&(u=l,c=s.height*l/s.width),{width:u,height:c}}(o):r.boundaries=function(n){var i=n.cropper;return{width:i.clientWidth,height:i.clientHeight}}(o),!r.boundaries.width||!r.boundaries.height)throw new Error("It's impossible to fit the cropper in the current container")})},resetVisibleArea:function(){var r=this;return this.appliedImageTransforms=Be(Be({},this.defaultImageTransforms),{},{flip:Be({},this.defaultImageTransforms.flip)}),this.updateBoundaries().then(function(){r.priority!=="visible-area"&&(r.visibleArea=null,r.resetCoordinates());var t,e,o,n,i,s,a=r.defaultVisibleArea||lS;r.visibleArea=er(a)?a({imageSize:r.imageSize,boundaries:r.boundaries,coordinates:r.priority!=="visible-area"?r.coordinates:null,getAreaRestrictions:r.getAreaRestrictions,stencilSize:r.getStencilSize()}):r.defaultVisibleArea,r.visibleArea=(t={visibleArea:r.visibleArea,boundaries:r.boundaries,getAreaRestrictions:r.getAreaRestrictions},e=t.visibleArea,o=t.boundaries,n=t.getAreaRestrictions,i=ge({},e),s=Ue(o),i.width/i.height!==s&&(i.height=i.width/s),Dt(i,n({visibleArea:i,type:"move"}))),r.priority==="visible-area"?r.resetCoordinates():r.coordinates=r.fitCoordinates({visibleArea:r.visibleArea,coordinates:r.coordinates,aspectRatio:r.getAspectRatio(),positionRestrictions:r.positionRestrictions,sizeRestrictions:r.sizeRestrictions}),r.runAutoZoom("resetVisibleArea")}).catch(function(){r.visibleArea=null})},updateVisibleArea:function(){var r=this;return this.updateBoundaries().then(function(){r.visibleArea=r.fitVisibleArea({imageSize:r.imageSize,boundaries:r.boundaries,visibleArea:r.visibleArea,coordinates:r.coordinates,getAreaRestrictions:r.getAreaRestrictions}),r.coordinates=r.fitCoordinates({visibleArea:r.visibleArea,coordinates:r.coordinates,aspectRatio:r.getAspectRatio(),positionRestrictions:r.positionRestrictions,sizeRestrictions:r.sizeRestrictions}),r.runAutoZoom("updateVisibleArea")}).catch(function(){r.visibleArea=null})},onChange:function(){var r=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];r&&this.debounce?this.debouncedUpdate():this.update()},onChangeImage:function(){var r,t=this;if(this.imageLoaded=!1,this.delayedTransforms=null,this.src){if(function(n){if(Mh(n))return!1;var i=window.location,s=/(\w+:)?(?:\/\/)([\w.-]+)?(?::(\d+))?\/?/.exec(n)||[],a={protocol:s[1]||"",host:s[2]||"",port:s[3]||""},l=function(c){return c.port||((c.protocol||i.protocol)==="http"?80:433)};return!(!a.protocol&&!a.host&&!a.port||a.protocol&&a.protocol==i.protocol&&a.host&&a.host==i.host&&a.host&&l(a)==l(i))}(this.src)){var e=wt(this.crossOrigin)?this.canvas:this.crossOrigin;e===!0&&(e="anonymous"),this.imageAttributes.crossOrigin=e||null}if(this.checkOrientation){var o=(r=this.src,new Promise(function(n){CS(r).then(function(i){var s=wS(i);n(i?{source:r,arrayBuffer:i,orientation:s}:{source:r,arrayBuffer:null,orientation:null})}).catch(function(i){console.warn(i),n({source:r,arrayBuffer:null,orientation:null})})}));setTimeout(function(){o.then(t.onParseImage)},this.transitionTime)}else setTimeout(function(){t.onParseImage({source:t.src})},this.transitionTime)}else this.clearImage()},onFailLoadImage:function(){this.imageAttributes.src&&(this.clearImage(),this.$emit("error"))},onSuccessLoadImage:function(){var r=this,t=this.$refs.image;t&&!this.imageLoaded&&(this.imageAttributes.height=t.naturalHeight,this.imageAttributes.width=t.naturalWidth,this.imageLoaded=!0,this.resetVisibleArea().then(function(){r.$emit("ready"),r.onChange(!1)}))},onParseImage:function(r){var t=this,e=r.source,o=r.arrayBuffer,n=r.orientation;this.imageAttributes.revoke&&this.imageAttributes.src&&URL.revokeObjectURL(this.imageAttributes.src),this.imageAttributes.revoke=!1,o&&n&&n>1?mv(e)||!Mh(e)?(this.imageAttributes.src=URL.createObjectURL(new Blob([o])),this.imageAttributes.revoke=!0):this.imageAttributes.src=function(i){for(var s=[],a=new Uint8Array(i);a.length>0;){var l=a.subarray(0,8192);s.push(String.fromCharCode.apply(null,Array.from?Array.from(l):l.slice())),a=a.subarray(8192)}return"data:image/jpeg;base64,"+btoa(s.join(""))}(o):this.imageAttributes.src=e,er(this.defaultTransforms)?this.appliedImageTransforms=Lc(this.defaultTransforms()):Ja(this.defaultTransforms)?this.appliedImageTransforms=Lc(this.defaultTransforms):this.appliedImageTransforms=function(i){var s=Lc({});if(i)switch(i){case 2:s.flip.horizontal=!0;break;case 3:s.rotate=-180;break;case 4:s.flip.vertical=!0;break;case 5:s.rotate=90,s.flip.vertical=!0;break;case 6:s.rotate=90;break;case 7:s.rotate=90,s.flip.horizontal=!0;break;case 8:s.rotate=-90}return s}(n),this.defaultImageTransforms=Be(Be({},this.appliedImageTransforms),{},{flip:Be({},this.appliedImageTransforms.flip)}),this.$nextTick(function(){var i=t.$refs.image;i&&i.complete&&(function(s){return!!s.naturalWidth}(i)?t.onSuccessLoadImage():t.onFailLoadImage())})},onResizeEnd:function(){this.runAutoZoom("resize",{transitions:!0})},onMoveEnd:function(){this.runAutoZoom("move",{transitions:!0})},onMove:function(r){var t=this;this.transitionsOptions.enabled||this.awaitRender(function(){t.coordinates=t.moveAlgorithm(Be(Be({},t.getPublicProperties()),{},{positionRestrictions:va(t.positionRestrictions,t.visibleArea),coordinates:t.coordinates,event:t.normalizeEvent(r)})),t.onChange()})},onResize:function(r){var t=this;this.transitionsOptions.enabled||this.stencilSize&&!this.autoZoom||this.awaitRender(function(){var e=t.sizeRestrictions,o=Math.min(t.coordinates.width,t.coordinates.height,20*t.coefficient);t.coordinates=t.resizeAlgorithm(Be(Be({},t.getPublicProperties()),{},{positionRestrictions:va(t.positionRestrictions,t.visibleArea),sizeRestrictions:{maxWidth:Math.min(e.maxWidth,t.visibleArea.width),maxHeight:Math.min(e.maxHeight,t.visibleArea.height),minWidth:Math.max(e.minWidth,o),minHeight:Math.max(e.minHeight,o)},event:t.normalizeEvent(r)})),t.onChange(),t.ticking=!1})},onManipulateImage:function(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.transitionsOptions.enabled){var e=t.transitions,o=e!==void 0&&e,n=t.normalize,i=n===void 0||n;o&&this.enableTransitions();var s=cS(Be(Be({},this.getPublicProperties()),{},{event:i?this.normalizeEvent(r):r,getAreaRestrictions:this.getAreaRestrictions,imageRestriction:this.imageRestriction,adjustStencil:!this.stencilSize&&this.settings.resizeImage.adjustStencil})),a=s.visibleArea,l=s.coordinates;this.visibleArea=a,this.coordinates=l,this.runAutoZoom("manipulateImage"),this.onChange(),o&&this.debouncedDisableTransitions()}},onPropsChange:function(){this.coordinates=this.applyTransform(this.coordinates,!0),this.onChange(!1)},getAreaRestrictions:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=r.visibleArea,e=r.type,o=e===void 0?"move":e;return this.areaRestrictionsAlgorithm({boundaries:this.boundaries,imageSize:this.imageSize,imageRestriction:this.imageRestriction,visibleArea:t,type:o})},getAspectRatio:function(r){var t,e,o=this.stencilProps,n=o.aspectRatio,i=o.minAspectRatio,s=o.maxAspectRatio;if(this.$refs.stencil&&this.$refs.stencil.aspectRatios){var a=this.$refs.stencil.aspectRatios();t=a.minimum,e=a.maximum}if(wt(t)&&(t=wt(n)?i:n),wt(e)&&(e=wt(n)?s:n),!r&&(wt(t)||wt(e))){var l=this.getStencilSize(),c=l?Ue(l):null;wt(t)&&(t=Lh(c)?c:void 0),wt(e)&&(e=Lh(c)?c:void 0)}return{minimum:t,maximum:e}},getStencilSize:function(){if(this.stencilSize)return r={currentStencilSize:{width:this.stencilCoordinates.width,height:this.stencilCoordinates.height},stencilSize:this.stencilSize,boundaries:this.boundaries,coefficient:this.coefficient,coordinates:this.coordinates,aspectRatio:this.getAspectRatio(!0)},t=r.boundaries,e=r.stencilSize,o=r.aspectRatio,Dc(Ue(n=er(e)?e({boundaries:t,aspectRatio:o}):e),o)&&(n=En({sizeRestrictions:{maxWidth:t.width,maxHeight:t.height,minWidth:0,minHeight:0},width:n.width,height:n.height,aspectRatio:{minimum:o.minimum,maximum:o.maximum}})),(n.width>t.width||n.height>t.height)&&(n=En({sizeRestrictions:{maxWidth:t.width,maxHeight:t.height,minWidth:0,minHeight:0},width:n.width,height:n.height,aspectRatio:{minimum:Ue(n),maximum:Ue(n)}})),n;var r,t,e,o,n},getPublicProperties:function(){return{coefficient:this.coefficient,visibleArea:this.visibleArea,coordinates:this.coordinates,boundaries:this.boundaries,sizeRestrictions:this.sizeRestrictions,positionRestrictions:this.positionRestrictions,aspectRatio:this.getAspectRatio(),imageRestriction:this.imageRestriction}},defaultCoordinates:function(){return Be({},xh)},flip:function(r,t){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=e.transitions,n=o===void 0||o;if(!this.transitionsActive){n&&this.enableTransitions();var i=Be({},this.imageTransforms.flip),s=dS({flip:{horizontal:r?!i.horizontal:i.horizontal,vertical:t?!i.vertical:i.vertical},previousFlip:i,rotate:this.imageTransforms.rotate,visibleArea:this.visibleArea,coordinates:this.coordinates,imageSize:this.imageSize,positionRestrictions:this.positionRestrictions,sizeRestrictions:this.sizeRestrictions,getAreaRestrictions:this.getAreaRestrictions,aspectRatio:this.getAspectRatio()}),a=s.visibleArea,l=s.coordinates;r&&(this.appliedImageTransforms.flip.horizontal=!this.appliedImageTransforms.flip.horizontal),t&&(this.appliedImageTransforms.flip.vertical=!this.appliedImageTransforms.flip.vertical),this.visibleArea=a,this.coordinates=l,this.onChange(),n&&this.debouncedDisableTransitions()}},rotate:function(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},e=t.transitions,o=e===void 0||e;if(!this.transitionsActive){o&&this.enableTransitions();var n=Be({},this.imageSize);this.appliedImageTransforms.rotate+=r;var i=uS({visibleArea:this.visibleArea,coordinates:this.coordinates,previousImageSize:n,imageSize:this.imageSize,angle:r,positionRestrictions:this.positionRestrictions,sizeRestrictions:this.sizeRestrictions,getAreaRestrictions:this.getAreaRestrictions,aspectRatio:this.getAspectRatio()}),s=i.visibleArea,a=i.coordinates,l=this.processAutoZoom("rotateImage",s,a);s=l.visibleArea,a=l.coordinates,this.visibleArea=s,this.coordinates=a,this.onChange(),o&&this.debouncedDisableTransitions()}}},emits:["change","error","ready"]},SS={key:0,ref:"canvas",style:{display:"none"}},ES={key:1,ref:"sourceCanvas",style:{display:"none"}};Dv.render=function(r,t,e,o,n,i){return S(),H("div",{ref:"cropper",class:i.classes.cropper},[R("div",{ref:"stretcher",class:i.classes.stretcher},null,2),R("div",{class:i.classes.boundaries,style:i.boundariesStyle},[(S(),H(ti(e.backgroundWrapperComponent),{class:i.classes.cropperWrapper,"wheel-resize":i.settings.resizeImage.wheel,"touch-resize":i.settings.resizeImage.touch,"touch-move":i.settings.moveImage.touch,"mouse-move":i.settings.moveImage.mouse,onMove:i.onManipulateImage,onResize:i.onManipulateImage},{default:D(function(){return[R("div",{class:i.classes.background,style:i.boundariesStyle},null,6),R("div",{class:i.classes.imageWrapper},[R("img",{ref:"image",crossorigin:n.imageAttributes.crossOrigin,src:n.imageAttributes.src,class:i.classes.image,style:i.imageStyle,onMousedown:t[1]||(t[1]=Bi(function(){},["prevent"]))},null,46,["crossorigin","src"])],2),R("div",{class:i.classes.foreground,style:i.boundariesStyle},null,6),Ne((S(),H(ti(e.stencilComponent),Ul({ref:"stencil",image:i.image,coordinates:n.coordinates,"stencil-coordinates":i.stencilCoordinates,transitions:i.transitionsOptions},e.stencilProps,{onResize:i.onResize,onResizeEnd:i.onResizeEnd,onMove:i.onMove,onMoveEnd:i.onMoveEnd}),null,16,["image","coordinates","stencil-coordinates","transitions","onResize","onResizeEnd","onMove","onMoveEnd"])),[[Vi,n.imageLoaded]]),e.canvas?(S(),H("canvas",SS,null,512)):Z("",!0),e.canvas?(S(),H("canvas",ES,null,512)):Z("",!0)]}),_:1},8,["class","wheel-resize","touch-resize","touch-move","mouse-move","onMove","onResize"]))],6)],2)};const RS=X({__name:"BasePreviewCropper",setup(r){const t=Gr();return(e,o)=>{var n,i;return S(),H(v(qd),{class:"preview-result-example__preview",image:(n=v(t).result)==null?void 0:n.image,coordinates:(i=v(t).result)==null?void 0:i.coordinates,width:128,height:128},null,8,["image","coordinates"])}}}),TS={class:"form-group mb-0 px-4"},bS={class:"d-flex gap-4"},AS={class:"d-flex flex-column gap-3"},OS=["src"],PS={class:"d-flex gap-2"},IS={class:"text-uppercase"},DS={class:"d-flex flex-column w-100"},MS={class:"d-flex gap-4 w-100"},LS={class:"d-flex gap-4 w-100"},xS=["innerHTML"],FS={class:"d-flex gap-4 w-100"},NS={class:"d-flex gap-4 w-100"},Mv=X({__name:"FormProfile",props:{formError:{},isSubmitProfile:{type:Boolean}},emits:["submit","change"],setup(r,{emit:t}){const{form:e,optionAddress:o,hasImageProfile:n,imageProfile:i,imgRef:s,file:a,addImageProfile:l}=Wd(),c=Gr(),{result:u}=kr(c),{t:d}=ve(),p=r,h=t;return Oe(e,()=>h("change"),{deep:!0}),Oe(()=>p.isSubmitProfile,f=>{f&&h("submit",e.value)}),(f,g)=>{const _=lt("MultiSelect");return S(),O("div",TS,[m("div",bS,[m("div",AS,[!v(n)||v(u)?(S(),O(de,{key:0},[v(u)?(S(),H(RS,{key:1})):(S(),O("div",{key:0,class:"d-flex justify-content-center align-items-center rounded-2",style:ue({width:" 128px",height:"128px",backgroundColor:v(se).BgSutle,border:`1px solid ${v(se).Line}`})},[R(Te,{name:"fa-solid fa-user","font-size":"4.14em",library:"fontawesome",color:v(se).LineIcon},null,8,["color"])],4))],64)):(S(),O("img",{key:1,ref_key:"imgRef",ref:s,src:v(i),class:"profile-avatar"},null,8,OS)),m("div",PS,[m("button",{type:"button",class:"secondary-btn py-1 rounded-2 px-0",style:{fontSize:"14px",width:"128px"},onClick:g[1]||(g[1]=(...C)=>{var E,T;return((E=v(a))==null?void 0:E.click)&&((T=v(a))==null?void 0:T.click(...C))})},[m("span",IS,L(!v(u)&&!v(n)?v(d)("Add picture"):v(d)("Change")),1),m("input",{ref_key:"file",ref:a,type:"file",accept:"image/*",class:"d-none",onChange:g[0]||(g[0]=C=>v(l)(C))},null,544)])])]),m("div",DS,[m("div",MS,[R(Dn,{modelValue:v(e).fullName,"onUpdate:modelValue":g[2]||(g[2]=C=>v(e).fullName=C),placeholder:v(d)("Name"),"error-text":f.formError.fullName,class:"w-50"},null,8,["modelValue","placeholder","error-text"]),R(Dn,{modelValue:v(e).email,"onUpdate:modelValue":g[3]||(g[3]=C=>v(e).email=C),type:"email",placeholder:v(d)("Email"),"error-text":f.formError.email,disabled:"",class:"w-50"},null,8,["modelValue","placeholder","error-text"])]),m("div",LS,[m("div",{class:Fe(["select2",[f.formError.addressType?"invalid-select-message":""]]),style:{width:"38%"}},[R(_,{modelValue:v(e).addressType,"onUpdate:modelValue":g[4]||(g[4]=C=>v(e).addressType=C),options:v(o),"selected-label":"","select-label":"","deselect-label":"","max-height":125,"custom-label":v(cw),class:Fe([f.formError.addressType?"invalid-select":""]),placeholder:v(d)("Select an option")},null,8,["modelValue","options","custom-label","class","placeholder"]),m("div",{class:"invalid-feedback",innerHTML:f.formError.addressType},null,8,xS)],2),R(Dn,{modelValue:v(e).address1,"onUpdate:modelValue":g[5]||(g[5]=C=>v(e).address1=C),placeholder:v(d)("addressline1"),"error-text":f.formError.address1,style:{width:"62%"}},null,8,["modelValue","placeholder","error-text"])]),m("div",FS,[R(Dn,{modelValue:v(e).address2,"onUpdate:modelValue":g[6]||(g[6]=C=>v(e).address2=C),placeholder:v(d)("addressline2"),"error-text":f.formError.address2,style:{width:"40%"}},null,8,["modelValue","placeholder","error-text"]),R(Dn,{modelValue:v(e).city,"onUpdate:modelValue":g[7]||(g[7]=C=>v(e).city=C),placeholder:v(d)("City"),"error-text":f.formError.city,style:{width:"40%"}},null,8,["modelValue","placeholder","error-text"]),R(Dn,{modelValue:v(e).state,"onUpdate:modelValue":g[8]||(g[8]=C=>v(e).state=C),placeholder:v(d)("State"),"error-text":f.formError.state,form:"",style:{width:"20%"}},null,8,["modelValue","placeholder","error-text"])]),m("div",NS,[R(Dn,{modelValue:v(e).company,"onUpdate:modelValue":g[9]||(g[9]=C=>v(e).company=C),placeholder:v(d)("Company"),"error-text":f.formError.company,class:"w-50"},null,8,["modelValue","placeholder","error-text"]),R(Dn,{modelValue:v(e).jobTitle,"onUpdate:modelValue":g[10]||(g[10]=C=>v(e).jobTitle=C),"error-text":f.formError.jobTitle,placeholder:v(d)("Position"),class:"w-50"},null,8,["modelValue","error-text","placeholder"])])])])])}}}),GS={class:"needs-validation pt-3",novalidate:""},kS={class:"d-flex justify-content-end align-items-center gap-3 border-top border-1 p-4"},HS={inheritAttrs:!1},VS=X({...HS,__name:"ContentProfile",setup(r){const{t}=ve(),{form:e,uploadImage:o}=Wd(),n=x(!1),i=x(!1),s=x(!1),a=x({fullName:"",userType:"",company:"",jobTitle:"",email:"",addressType:"",address1:"",address2:"",city:"",state:""});function l(){for(const f of Object.keys(a.value))a.value[f]=""}function c(){l()}function u(f){i.value=f,s.value=!1}async function d(){const f=Ye(),g=ea();await hv(e.value).then(async()=>{i.value=!1,s.value=!1,n.value=!1,jo(t("Profile updated")),f.setUserName(e.value.fullName),g.updateTeam()}).catch(_=>{var E,T;i.value=!1,s.value=!1,n.value=!1;const C=(E=_.response)==null?void 0:E.data;if(Pn(C==null?void 0:C.message),((T=_.response)==null?void 0:T.status)===422){const P=C==null?void 0:C.form_errors;if(console.log({formErrors:P}),Object.keys(P).length>0)for(const A of Object.keys(P)){const b=jg.camelCase(A),F=P[A];if(typeof F!="string"){a.value[b]=[];for(const U of F)a.value[b]+=U,a.value[b]+="<br>"}else a.value[b]=F}throw _}})}function p(f){e.value=f,s.value=!1}function h(){s.value=!0,setTimeout(async()=>{n.value=!0,i.value?(i.value=!1,s.value=!1,n.value=!1):(await o(),d().then(async()=>{await jl()}))},100)}return(f,g)=>(S(),O("form",GS,[R(Mv,{"form-error":a.value,"is-submit-profile":s.value,onHasError:u,onSubmit:p,onChange:c},null,8,["form-error","is-submit-profile"]),m("div",kS,[m("button",{class:"primary-btn text-uppercase",onClick:Bi(h,["prevent"])},[n.value?(S(),H(Te,{key:0,name:"fa-solid fa-spinner",class:"spin",library:"fontawesome","font-size":"1rem"})):Z("",!0),he(" "+L(v(t)("Save")),1)])])]))}}),BS={class:"form-check form-switch m-0 s"},US=["checked"],jS=X({__name:"GlobalSwitcher",props:{modelValue:{type:Boolean},rounded:{type:Boolean},outline:{type:Boolean},icon:{type:Boolean},variant:{}},emits:["update:modelValue","change"],setup(r,{emit:t}){const e=t;function o(n){const i=n.target.checked;e("update:modelValue",i),e("change",i)}return(n,i)=>(S(),O("div",BS,[m("input",{class:"form-check-input",type:"checkbox",role:"switch",checked:n.modelValue,onChange:i[0]||(i[0]=s=>o(s))},null,40,US)]))}}),WS=oe(jS,[["__scopeId","data-v-7226b8e4"]]),zS={style:{height:"235px"},class:"px-4"},$S={class:"d-flex gap-1 align-items-center"},KS=["title"],YS=["disabled","onClick"],qS={key:1,class:"d-flex justify-content-center align-items-center h-100"},QS={class:"header"},XS={class:"d-flex gap-5 flex-column m-4 body"},ZS={class:"d-flex justify-content-end gap-3"},JS={inheritAttrs:!1},eE=X({...JS,__name:"ContentPhone",setup(r){const{t}=ve(),{register:e,unregister:o}=Ki(),n=Ye(),i=ot(),s=Hr(),a=x(!1),l=x(""),c=x(!1),u=x(),d=x(),p=te(()=>{var C;return(C=d.value)!=null&&C.dnd?t("Disable"):t("Enable")}),h=[{headerName:t("Name"),field:"name",sorted:!0},{headerName:t("Number"),field:"number",sorted:!0},{headerName:t("Active"),field:"active",sorted:!0},{headerName:t("Registration"),field:"registered",sorted:!0},{headerName:t("DND"),field:"dnd",sorted:!0}];function f(C,E){H_(E.numbersUnmasked,C).then(()=>{if(t("Number")+` <br><strong>${E.number}</strong>`,s.newPhone({title:E.number,id:window.crypto.randomUUID(),message:t(C?"Number is active":"Number is deactivated"),variant:"phone"}),!C)return o(E.numbersUnmasked),E.registered=i.hasUserAgentByNumber(E.numbersUnmasked);e(E.numbersUnmasked,E.password,E.name),E.registered=i.hasUserAgentByNumber(E.numbersUnmasked)}).catch(()=>E.active=!E.active)}function g(C,E){a.value=!0,l.value=C.number,u.value=E,d.value=C}function _(){c.value=!0;const C=n.myNumbers[u.value];k_(C.numbersUnmasked,!(C!=null&&C.dnd)).then(()=>{C.dnd=!C.dnd;const E="Do Not Disturb";s.newPhone({title:C.number,id:window.crypto.randomUUID(),message:C.dnd?t(`${E} enabled`):t(`${E} disabled`),variant:"phone"})}).finally(()=>{c.value=!1,a.value=!1})}return(C,E)=>{const T=lt("perfect-scrollbar"),P=fn("tippy");return S(),O(de,null,[R(T,null,{default:D(()=>[m("article",zS,[v(n).myNumbers.length>0?(S(),H(Us,{key:0,columns:h,rows:v(n).myNumbers},{"row-active":D(({row:A})=>[R(WS,{modelValue:A.active,"onUpdate:modelValue":b=>A.active=b,rounded:"",outline:"",variant:"success",onChange:b=>f(b,A)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),"row-registered":D(({row:A})=>[m("div",$S,[A.registered?(S(),O(de,{key:0},[R(Te,{name:"check-circle",size:"xs",color:v(se).Success},null,8,["color"]),R(v(ze),{size:14},{default:D(()=>[he(L(v(t)("Registered")),1)]),_:1})],64)):Ne((S(),O("button",{key:1,"data-toggle":"tooltip","data-placement":"top",title:A.registrationFailed,class:"p-0 d-flex gap-1 align-items-center",style:{border:"none","background-color":"transparent",cursor:"default"}},[R(Te,{name:"x-circle",size:"xs",color:v(se).Error},null,8,["color"]),R(v(ze),{size:14},{default:D(()=>[he(L(v(t)("Unregistered")),1)]),_:1})],8,KS)),[[P,{}]])])]),"row-dnd":D(({row:A,index:b})=>[m("button",{style:{border:"none","background-color":"transparent"},disabled:!A.active,onClick:I=>g(A,b)},[A.dnd?(S(),H(Te,{key:1,name:"fa-regular fa-bell-slash",color:v(se).Error,library:"fontawesome","font-size":"1rem"},null,8,["color"])):(S(),H(Te,{key:0,name:"fa-regular fa-bell",color:A.active?v(se).TextPrimary:v(se).Disabled,library:"fontawesome","font-size":"1rem"},null,8,["color"]))],8,YS)]),_:1},8,["rows"])):(S(),O("div",qS,[R(v(ze),{color:"text-secondary",size:14},{default:D(()=>[he(L(v(t)("There are no numbers assigned to your user.")),1)]),_:1})]))])]),_:1}),R(Wt,{modelValue:a.value,"onUpdate:modelValue":E[1]||(E[1]=A=>a.value=A),"z-index":1056,persist:"",size:"sm"},{header:D(()=>[m("span",QS,L(v(t)("Do Not Disturb")),1)]),body:D(()=>{var A;return[m("div",XS,[m("span",null,[he(L(v(t)(`You will ${(A=d.value)!=null&&A.dnd?"":"not"} receive alerts for incoming calls for the number`))+" ",1),m("strong",null,L(l.value),1),he(". "+L(v(t)("Are you sure?")),1)])])]}),footer:D(()=>[m("div",ZS,[m("button",{class:"text-uppercase secondary-btn",onClick:E[0]||(E[0]=A=>a.value=!1)},L(v(t)("Cancel")),1),m("button",{class:"text-uppercase primary-btn d-flex gap-2",onClick:_},[c.value?(S(),H(Te,{key:0,name:"fa-solid fa-spinner",class:"spin",library:"fontawesome","font-size":"1rem"})):Z("",!0),he(" "+L(p.value),1)])])]),_:1},8,["modelValue"])],64)}}}),tE=oe(eE,[["__scopeId","data-v-2de1794a"]]),oE={class:"d-flex gap-4 mt-3 mb-3 mx-4"},nE={key:0,class:"d-flex flex-column",style:{width:"38%"}},iE={class:"d-flex justify-content-between mb-2"},rE={class:"d-flex gap-1"},sE={class:"d-flex justify-content-between mb-2"},aE={class:"d-flex gap-1"},lE={inheritAttrs:!1},cE=X({...lE,__name:"ContentSettings",props:{hideCamera:{type:Boolean}},setup(r){const{t}=ve(),e=Vg(),{microphones:o}=fv(),n=x([]),i=x({camera:e.currentCamera,microphone:e.currentMicrophone,speaker:e.currentSpeaker}),s=x(!1),a=x(),l=x(null),c=x(null),u=x(null);function d(){uw(async()=>{var z;l.value&&(l.value.getTracks().forEach(V=>{V.enabled=!1,V.stop()}),(z=a.value)==null||z.load(),l.value=null);const M=document.getElementById("video");if(M){const V=M.srcObject;(V==null?void 0:V.getTracks()).forEach($=>{$.stop()}),M.srcObject=null}await p()})}async function p(){var M;try{const z={audio:!1,video:{deviceId:(M=i.value.camera)==null?void 0:M.deviceId,minWidth:1280,maxWidth:1280,minHeight:720,maxHeight:720}};l.value=await navigator.mediaDevices.getUserMedia(z),a.value&&(a.value.srcObject=l.value,a.value.onloadedmetadata=function(V){var q;(q=a.value)==null||q.play()})}catch(z){console.log(z.message)}}async function h(){var z;let M;try{u.value=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,deviceId:{exact:(z=i.value.microphone)==null?void 0:z.deviceId}}});const V=new AudioContext,q=V.createMediaStreamSource(u.value),$=V.createAnalyser();$.fftSize=32;const ce=$.frequencyBinCount,me=new Uint8Array(ce);return q.connect($),M=()=>{$.getByteTimeDomainData(me);let Ve=0;for(let nt=0;nt<ce;nt++){const fe=me[nt]-128;Ve+=fe*fe}const Qe=Math.sqrt(Ve/ce);E(Qe/128*10)},{volumeCallback:M}}catch(V){throw n_.error("Failed to initialize volume visualizer, simulating instead..."),V}}async function f(){const{volumeCallback:M}=await h();M!==null&&c.value===null&&(c.value=setInterval(M,100))}function g(){var M;if(c.value!==null){clearInterval(c.value);for(const z of((M=u.value)==null?void 0:M.getTracks())??[])z.stop();u.value=null,c.value=null}}function _(){var M;(M=e.currentMicrophone)!=null&&M.deviceId&&g()}function C(){if(u.value){const M=[...document.querySelectorAll(".pid")];for(const z of M)z.style.backgroundColor=se.LightDark;return g()}f()}function E(M){const z=[...document.querySelectorAll(".pid")],V=Math.round(M),q=z.slice(0,V);for(const $ of z)$.style.backgroundColor=se.BgSutle;for(const $ of q)$.style.backgroundColor=se.Success}async function T(){try{await navigator.mediaDevices.getUserMedia({audio:!0,video:!0})}catch(z){console.log("error on getting the medias",z)}const M=await navigator.mediaDevices.enumerateDevices();n.value=M.filter(z=>["audioinput","audiooutput","videoinput"].includes(z.kind))}async function P(){if(g(),l.value){for await(const M of l.value.getTracks())M.stop();l.value=null}}Ze(()=>{i.value.camera&&(s.value=!0),T(),F(),p()});const A=te(()=>n.value.filter(M=>M.kind==="videoinput"&&M.label!=="")),b=te(()=>n.value.filter(M=>M.kind==="audioinput"&&M.label!=="")),I=te(()=>n.value.filter(M=>M.kind==="audiooutput"&&M.label!==""));function F(){navigator.mediaDevices.ondevicechange=M=>{M.type==="devicechange"&&T()}}function U(){i.value.camera&&e.setCurrentCamera(i.value.camera),i.value.microphone&&e.setCurrentMicrophone(i.value.microphone),i.value.speaker&&e.setCurrentSpeaker(i.value.speaker),jo(t("Devices saved successfully"))}const k=Ut("modalIsActive");return Oe(k,M=>{M||P()}),tt(()=>{P()}),(M,z)=>{const V=lt("MultiSelect");return S(),O(de,null,[m("div",oE,[M.hideCamera?Z("",!0):(S(),O("div",nE,[m("span",{class:"font-size-12 mb-1",style:ue({color:v(se).TextPrimary})},L(v(t)("Webcam Preview")),5),s.value?(S(),O("video",{key:0,id:"video",ref_key:"video",ref:a,autoplay:"",muted:"",class:"video-on",onClick:z[0]||(z[0]=q=>s.value=!1)},null,512)):(S(),O("div",{key:1,class:"video-off mb-2",onClick:z[1]||(z[1]=q=>s.value=!0)},[R(Te,{size:"md",name:"video-off",fill:v(se).LineIcon,color:v(se).LineIcon},null,8,["fill","color"])])),m("div",iE,[m("span",{class:"font-size-12",style:ue({color:v(se).TextPrimary})},L(v(t)("Microphone Audio")),5),v(o).length?(S(),O("button",{key:0,class:"secondary-btn",onClick:C},L(u.value?"Stop":"Test"),1)):Z("",!0)]),m("div",rE,[(S(),O(de,null,qe(10,q=>m("div",{key:q,class:"pid"})),64))])])),m("div",{class:"d-flex flex-column gap-3",style:ue([M.hideCamera?"":"width: 62%"])},[M.hideCamera?Z("",!0):(S(),H(V,{key:0,modelValue:i.value.camera,"onUpdate:modelValue":z[2]||(z[2]=q=>i.value.camera=q),options:A.value,"selected-label":"","select-label":"","deselect-label":"",label:"label","track-by":"deviceId","max-height":125,placeholder:A.value.length===0?v(t)("No camera detected"):v(t)("Select an camera"),disabled:A.value.length===0,onSelect:d},null,8,["modelValue","options","placeholder","disabled"])),R(V,{modelValue:i.value.microphone,"onUpdate:modelValue":z[3]||(z[3]=q=>i.value.microphone=q),options:b.value,"selected-label":"","select-label":"","deselect-label":"",label:"label","track-by":"deviceId","max-height":125,placeholder:b.value.length===0?v(t)("No microphone detected"):v(t)("Select an microphone"),disabled:b.value.length===0,onSelect:_},{default:D(()=>[he(" > ")]),_:1},8,["modelValue","options","placeholder","disabled"]),M.hideCamera?(S(),O(de,{key:1},[m("div",sE,[m("span",{class:"font-size-12",style:ue({color:v(se).TextPrimary})},L(v(t)("Microphone Audio")),5),v(o).length?(S(),O("button",{key:0,class:"secondary-btn",onClick:C},L(u.value?"Stop":"Test"),1)):Z("",!0)]),m("div",aE,[(S(),O(de,null,qe(10,q=>m("div",{key:q,class:"pid"})),64))])],64)):Z("",!0),R(V,{modelValue:i.value.speaker,"onUpdate:modelValue":z[4]||(z[4]=q=>i.value.speaker=q),options:I.value,"selected-label":"","select-label":"","deselect-label":"",label:"label","track-by":"deviceId","max-height":125,placeholder:I.value.length===0?v(t)("No speaker detected"):v(t)("Select an speaker"),disabled:I.value.length===0},null,8,["modelValue","options","placeholder","disabled"])],4)]),m("div",{class:Fe([{"border-top":!M.hideCamera,"border-1":!M.hideCamera},"d-flex justify-content-end align-items-center gap-3 p-4"])},[m("button",{class:"primary-btn text-uppercase",onClick:U},L(v(t)("Save")),1)],2)],64)}}}),uE=oe(cE,[["__scopeId","data-v-5e57b204"]]);/*! @azure/msal-common v14.5.0 2023-12-01 */const B={LIBRARY_NAME:"MSAL.JS",SKU:"msal.js.common",CACHE_PREFIX:"msal",DEFAULT_AUTHORITY:"https://login.microsoftonline.com/common/",DEFAULT_AUTHORITY_HOST:"login.microsoftonline.com",DEFAULT_COMMON_TENANT:"common",ADFS:"adfs",DSTS:"dstsv2",AAD_INSTANCE_DISCOVERY_ENDPT:"https://login.microsoftonline.com/common/discovery/instance?api-version=1.1&authorization_endpoint=",CIAM_AUTH_URL:".ciamlogin.com",AAD_TENANT_DOMAIN_SUFFIX:".onmicrosoft.com",RESOURCE_DELIM:"|",NO_ACCOUNT:"NO_ACCOUNT",CLAIMS:"claims",CONSUMER_UTID:"9188040d-6c67-4c5b-b112-36a304b66dad",OPENID_SCOPE:"openid",PROFILE_SCOPE:"profile",OFFLINE_ACCESS_SCOPE:"offline_access",EMAIL_SCOPE:"email",CODE_RESPONSE_TYPE:"code",CODE_GRANT_TYPE:"authorization_code",RT_GRANT_TYPE:"refresh_token",FRAGMENT_RESPONSE_MODE:"fragment",S256_CODE_CHALLENGE_METHOD:"S256",URL_FORM_CONTENT_TYPE:"application/x-www-form-urlencoded;charset=utf-8",AUTHORIZATION_PENDING:"authorization_pending",NOT_DEFINED:"not_defined",EMPTY_STRING:"",NOT_APPLICABLE:"N/A",FORWARD_SLASH:"/",IMDS_ENDPOINT:"http://169.254.169.254/metadata/instance/compute/location",IMDS_VERSION:"2020-06-01",IMDS_TIMEOUT:2e3,AZURE_REGION_AUTO_DISCOVER_FLAG:"TryAutoDetect",REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX:"login.microsoft.com",KNOWN_PUBLIC_CLOUDS:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"],TOKEN_RESPONSE_TYPE:"token",ID_TOKEN_RESPONSE_TYPE:"id_token",SHR_NONCE_VALIDITY:240,INVALID_INSTANCE:"invalid_instance"},Ca={SUCCESS_RANGE_START:200,SUCCESS_RANGE_END:299,REDIRECT:302,CLIENT_ERROR_RANGE_START:400,CLIENT_ERROR_RANGE_END:499,SERVER_ERROR_RANGE_START:500,SERVER_ERROR_RANGE_END:599},aa=[B.OPENID_SCOPE,B.PROFILE_SCOPE,B.OFFLINE_ACCESS_SCOPE],Vh=[...aa,B.EMAIL_SCOPE],nn={CONTENT_TYPE:"Content-Type",RETRY_AFTER:"Retry-After",CCS_HEADER:"X-AnchorMailbox",WWWAuthenticate:"WWW-Authenticate",AuthenticationInfo:"Authentication-Info",X_MS_REQUEST_ID:"x-ms-request-id",X_MS_HTTP_VERSION:"x-ms-httpver"},Tt={ID_TOKEN:"idtoken",CLIENT_INFO:"client.info",ADAL_ID_TOKEN:"adal.idtoken",ERROR:"error",ERROR_DESC:"error.description",ACTIVE_ACCOUNT:"active-account",ACTIVE_ACCOUNT_FILTERS:"active-account-filters"},Jn={COMMON:"common",ORGANIZATIONS:"organizations",CONSUMERS:"consumers"},wa={ACCESS_TOKEN:"access_token",XMS_CC:"xms_cc"},kt={LOGIN:"login",SELECT_ACCOUNT:"select_account",CONSENT:"consent",NONE:"none",CREATE:"create",NO_SESSION:"no_session"},Bh={PLAIN:"plain",S256:"S256"},la={QUERY:"query",FRAGMENT:"fragment"},dE={...la,FORM_POST:"form_post"},Lv={IMPLICIT_GRANT:"implicit",AUTHORIZATION_CODE_GRANT:"authorization_code",CLIENT_CREDENTIALS_GRANT:"client_credentials",RESOURCE_OWNER_PASSWORD_GRANT:"password",REFRESH_TOKEN_GRANT:"refresh_token",DEVICE_CODE_GRANT:"device_code",JWT_BEARER:"urn:ietf:params:oauth:grant-type:jwt-bearer"},_a={MSSTS_ACCOUNT_TYPE:"MSSTS",ADFS_ACCOUNT_TYPE:"ADFS",MSAV1_ACCOUNT_TYPE:"MSA",GENERIC_ACCOUNT_TYPE:"Generic"},Nt={CACHE_KEY_SEPARATOR:"-",CLIENT_INFO_SEPARATOR:"."},Ce={ID_TOKEN:"IdToken",ACCESS_TOKEN:"AccessToken",ACCESS_TOKEN_WITH_AUTH_SCHEME:"AccessToken_With_AuthScheme",REFRESH_TOKEN:"RefreshToken"},Ju="appmetadata",pE="client_info",xs="1",Fs={CACHE_KEY:"authority-metadata",REFRESH_TIME_SECONDS:3600*24},co={CONFIG:"config",CACHE:"cache",NETWORK:"network",HARDCODED_VALUES:"hardcoded_values"},At={SCHEMA_VERSION:5,MAX_CUR_HEADER_BYTES:80,MAX_LAST_HEADER_BYTES:330,MAX_CACHED_ERRORS:50,CACHE_KEY:"server-telemetry",CATEGORY_SEPARATOR:"|",VALUE_SEPARATOR:",",OVERFLOW_TRUE:"1",OVERFLOW_FALSE:"0",UNKNOWN_ERROR:"unknown_error"},$e={BEARER:"Bearer",POP:"pop",SSH:"ssh-cert"},Ns={DEFAULT_THROTTLE_TIME_SECONDS:60,DEFAULT_MAX_THROTTLE_TIME_SECONDS:3600,THROTTLING_PREFIX:"throttling",X_MS_LIB_CAPABILITY_VALUE:"retry-after, h429"},Uh={INVALID_GRANT_ERROR:"invalid_grant",CLIENT_MISMATCH_ERROR:"client_mismatch"},jh={username:"username",password:"password"},Sa={httpSuccess:200,httpBadRequest:400},tr={FAILED_AUTO_DETECTION:"1",INTERNAL_CACHE:"2",ENVIRONMENT_VARIABLE:"3",IMDS:"4"},Fc={CONFIGURED_MATCHES_DETECTED:"1",CONFIGURED_NO_AUTO_DETECTION:"2",CONFIGURED_NOT_DETECTED:"3",AUTO_DETECTION_REQUESTED_SUCCESSFUL:"4",AUTO_DETECTION_REQUESTED_FAILED:"5"},zn={NOT_APPLICABLE:"0",FORCE_REFRESH_OR_CLAIMS:"1",NO_CACHED_ACCESS_TOKEN:"2",CACHED_ACCESS_TOKEN_EXPIRED:"3",PROACTIVELY_REFRESHED:"4"},hE={Jwt:"JWT",Jwk:"JWK",Pop:"pop"};/*! @azure/msal-common v14.5.0 2023-12-01 */const Qd="unexpected_error",fE="post_request_failed";/*! @azure/msal-common v14.5.0 2023-12-01 */const Wh={[Qd]:"Unexpected error in authentication.",[fE]:"Post request failed from the network, could be a 4xx/5xx or a network unavailability. Please check the exact error code for details."};class et extends Error{constructor(t,e,o){const n=e?`${t}: ${e}`:t;super(n),Object.setPrototypeOf(this,et.prototype),this.errorCode=t||B.EMPTY_STRING,this.errorMessage=e||B.EMPTY_STRING,this.subError=o||B.EMPTY_STRING,this.name="AuthError"}setCorrelationId(t){this.correlationId=t}}function xv(r,t){return new et(r,t?`${Wh[r]} ${t}`:Wh[r])}/*! @azure/msal-common v14.5.0 2023-12-01 */const Xd="client_info_decoding_error",Fv="client_info_empty_error",Zd="token_parsing_error",Nv="null_or_empty_token",wn="endpoints_resolution_error",Gv="network_error",kv="openid_config_error",Hv="hash_not_deserialized",br="invalid_state",Vv="state_mismatch",rl="state_not_found",Bv="nonce_mismatch",Jd="auth_time_not_found",Uv="max_age_transpired",gE="multiple_matching_tokens",vE="multiple_matching_accounts",jv="multiple_matching_appMetadata",Wv="request_cannot_be_made",zv="cannot_remove_empty_scope",$v="cannot_append_scopeset",ed="empty_input_scopeset",mE="device_code_polling_cancelled",yE="device_code_expired",CE="device_code_unknown_error",ep="no_account_in_silent_request",Kv="invalid_cache_record",tp="invalid_cache_environment",td="no_account_found",od="no_crypto_object",nd="unexpected_credential_type",wE="invalid_assertion",_E="invalid_client_credential",Xn="token_refresh_required",SE="user_timeout_reached",Yv="token_claims_cnf_required_for_signedjwt",qv="authorization_code_missing_from_server_response",Qv="binding_key_not_removed",Xv="end_session_endpoint_not_supported",op="key_id_missing",EE="no_network_connectivity",RE="user_canceled",TE="missing_tenant_id_error",De="method_not_implemented",bE="nested_app_auth_bridge_disabled";/*! @azure/msal-common v14.5.0 2023-12-01 */const zh={[Xd]:"The client info could not be parsed/decoded correctly",[Fv]:"The client info was empty",[Zd]:"Token cannot be parsed",[Nv]:"The token is null or empty",[wn]:"Endpoints cannot be resolved",[Gv]:"Network request failed",[kv]:"Could not retrieve endpoints. Check your authority and verify the .well-known/openid-configuration endpoint returns the required endpoints.",[Hv]:"The hash parameters could not be deserialized",[br]:"State was not the expected format",[Vv]:"State mismatch error",[rl]:"State not found",[Bv]:"Nonce mismatch error",[Jd]:"Max Age was requested and the ID token is missing the auth_time variable. auth_time is an optional claim and is not enabled by default - it must be enabled. See https://aka.ms/msaljs/optional-claims for more information.",[Uv]:"Max Age is set to 0, or too much time has elapsed since the last end-user authentication.",[gE]:"The cache contains multiple tokens satisfying the requirements. Call AcquireToken again providing more requirements such as authority or account.",[vE]:"The cache contains multiple accounts satisfying the given parameters. Please pass more info to obtain the correct account",[jv]:"The cache contains multiple appMetadata satisfying the given parameters. Please pass more info to obtain the correct appMetadata",[Wv]:"Token request cannot be made without authorization code or refresh token.",[zv]:"Cannot remove null or empty scope from ScopeSet",[$v]:"Cannot append ScopeSet",[ed]:"Empty input ScopeSet cannot be processed",[mE]:"Caller has cancelled token endpoint polling during device code flow by setting DeviceCodeRequest.cancel = true.",[yE]:"Device code is expired.",[CE]:"Device code stopped polling for unknown reasons.",[ep]:"Please pass an account object, silent flow is not supported without account information",[Kv]:"Cache record object was null or undefined.",[tp]:"Invalid environment when attempting to create cache entry",[td]:"No account found in cache for given key.",[od]:"No crypto object detected.",[nd]:"Unexpected credential type.",[wE]:"Client assertion must meet requirements described in https://tools.ietf.org/html/rfc7515",[_E]:"Client credential (secret, certificate, or assertion) must not be empty when creating a confidential client. An application should at most have one credential",[Xn]:"Cannot return token from cache because it must be refreshed. This may be due to one of the following reasons: forceRefresh parameter is set to true, claims have been requested, there is no cached access token or it is expired.",[SE]:"User defined timeout for device code polling reached",[Yv]:"Cannot generate a POP jwt if the token_claims are not populated",[qv]:"Server response does not contain an authorization code to proceed",[Qv]:"Could not remove the credential's binding key from storage.",[Xv]:"The provided authority does not support logout",[op]:"A keyId value is missing from the requested bound token's cache record and is required to match the token to it's stored binding key.",[EE]:"No network connectivity. Check your internet connection.",[RE]:"User cancelled the flow.",[TE]:"A tenant id - not common, organizations, or consumers - must be specified when using the client_credentials flow.",[De]:"This method has not been implemented",[bE]:"The nested app auth bridge is disabled"};class Ql extends et{constructor(t,e){super(t,e?`${zh[t]}: ${e}`:zh[t]),this.name="ClientAuthError",Object.setPrototypeOf(this,Ql.prototype)}}function J(r,t){return new Ql(r,t)}/*! @azure/msal-common v14.5.0 2023-12-01 */const sl={createNewGuid:()=>{throw J(De)},base64Decode:()=>{throw J(De)},base64Encode:()=>{throw J(De)},async getPublicKeyThumbprint(){throw J(De)},async removeTokenBindingKey(){throw J(De)},async clearKeystore(){throw J(De)},async signJwt(){throw J(De)},async hashString(){throw J(De)}};/*! @azure/msal-common v14.5.0 2023-12-01 */var Ct;(function(r){r[r.Error=0]="Error",r[r.Warning=1]="Warning",r[r.Info=2]="Info",r[r.Verbose=3]="Verbose",r[r.Trace=4]="Trace"})(Ct||(Ct={}));let Xl=class id{constructor(t,e,o){this.level=Ct.Info;const n=()=>{},i=t||id.createDefaultLoggerOptions();this.localCallback=i.loggerCallback||n,this.piiLoggingEnabled=i.piiLoggingEnabled||!1,this.level=typeof i.logLevel=="number"?i.logLevel:Ct.Info,this.correlationId=i.correlationId||B.EMPTY_STRING,this.packageName=e||B.EMPTY_STRING,this.packageVersion=o||B.EMPTY_STRING}static createDefaultLoggerOptions(){return{loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:Ct.Info}}clone(t,e,o){return new id({loggerCallback:this.localCallback,piiLoggingEnabled:this.piiLoggingEnabled,logLevel:this.level,correlationId:o||this.correlationId},t,e)}logMessage(t,e){if(e.logLevel>this.level||!this.piiLoggingEnabled&&e.containsPii)return;const i=`${`[${new Date().toUTCString()}] : [${e.correlationId||this.correlationId||""}]`} : ${this.packageName}@${this.packageVersion} : ${Ct[e.logLevel]} - ${t}`;this.executeCallback(e.logLevel,i,e.containsPii||!1)}executeCallback(t,e,o){this.localCallback&&this.localCallback(t,e,o)}error(t,e){this.logMessage(t,{logLevel:Ct.Error,containsPii:!1,correlationId:e||B.EMPTY_STRING})}errorPii(t,e){this.logMessage(t,{logLevel:Ct.Error,containsPii:!0,correlationId:e||B.EMPTY_STRING})}warning(t,e){this.logMessage(t,{logLevel:Ct.Warning,containsPii:!1,correlationId:e||B.EMPTY_STRING})}warningPii(t,e){this.logMessage(t,{logLevel:Ct.Warning,containsPii:!0,correlationId:e||B.EMPTY_STRING})}info(t,e){this.logMessage(t,{logLevel:Ct.Info,containsPii:!1,correlationId:e||B.EMPTY_STRING})}infoPii(t,e){this.logMessage(t,{logLevel:Ct.Info,containsPii:!0,correlationId:e||B.EMPTY_STRING})}verbose(t,e){this.logMessage(t,{logLevel:Ct.Verbose,containsPii:!1,correlationId:e||B.EMPTY_STRING})}verbosePii(t,e){this.logMessage(t,{logLevel:Ct.Verbose,containsPii:!0,correlationId:e||B.EMPTY_STRING})}trace(t,e){this.logMessage(t,{logLevel:Ct.Trace,containsPii:!1,correlationId:e||B.EMPTY_STRING})}tracePii(t,e){this.logMessage(t,{logLevel:Ct.Trace,containsPii:!0,correlationId:e||B.EMPTY_STRING})}isPiiLoggingEnabled(){return this.piiLoggingEnabled||!1}};/*! @azure/msal-common v14.5.0 2023-12-01 */const Zv="@azure/msal-common",np="14.5.0";/*! @azure/msal-common v14.5.0 2023-12-01 */const ip={None:"none",AzurePublic:"https://login.microsoftonline.com",AzurePpe:"https://login.windows-ppe.net",AzureChina:"https://login.chinacloudapi.cn",AzureGermany:"https://login.microsoftonline.de",AzureUsGovernment:"https://login.microsoftonline.us"};/*! @azure/msal-common v14.5.0 2023-12-01 */function Yi(r,t){const e=AE(r);try{const o=t(e);return JSON.parse(o)}catch{throw J(Zd)}}function AE(r){if(!r)throw J(Nv);const e=/^([^\.\s]*)\.([^\.\s]+)\.([^\.\s]*)$/.exec(r);if(!e||e.length<4)throw J(Zd);return e[2]}function Jv(r,t){if(t===0||Date.now()-3e5>r+t)throw J(Uv)}/*! @azure/msal-common v14.5.0 2023-12-01 */class jt{static nowSeconds(){return Math.round(new Date().getTime()/1e3)}static isTokenExpired(t,e){const o=Number(t)||0;return jt.nowSeconds()+e>o}static wasClockTurnedBack(t){return Number(t)>jt.nowSeconds()}static delay(t,e){return new Promise(o=>setTimeout(()=>o(e),t))}}/*! @azure/msal-common v14.5.0 2023-12-01 */function Ps(r){return[OE(r),PE(r),IE(r),DE(r),ME(r)].join(Nt.CACHE_KEY_SEPARATOR).toLowerCase()}function Zl(r,t,e,o,n){return{credentialType:Ce.ID_TOKEN,homeAccountId:r,environment:t,clientId:o,secret:e,realm:n}}function Jl(r,t,e,o,n,i,s,a,l,c,u,d,p,h,f){var _,C;const g={homeAccountId:r,credentialType:Ce.ACCESS_TOKEN,secret:e,cachedAt:jt.nowSeconds().toString(),expiresOn:s.toString(),extendedExpiresOn:a.toString(),environment:t,clientId:o,realm:n,target:i,tokenType:u||$e.BEARER};if(d&&(g.userAssertionHash=d),c&&(g.refreshOn=c.toString()),h&&(g.requestedClaims=h,g.requestedClaimsHash=f),((_=g.tokenType)==null?void 0:_.toLowerCase())!==$e.BEARER.toLowerCase())switch(g.credentialType=Ce.ACCESS_TOKEN_WITH_AUTH_SCHEME,g.tokenType){case $e.POP:const E=Yi(e,l);if(!((C=E==null?void 0:E.cnf)!=null&&C.kid))throw J(Yv);g.keyId=E.cnf.kid;break;case $e.SSH:g.keyId=p}return g}function em(r,t,e,o,n,i){const s={credentialType:Ce.REFRESH_TOKEN,homeAccountId:r,environment:t,clientId:o,secret:e};return i&&(s.userAssertionHash=i),n&&(s.familyId=n),s}function rp(r){return r.hasOwnProperty("homeAccountId")&&r.hasOwnProperty("environment")&&r.hasOwnProperty("credentialType")&&r.hasOwnProperty("clientId")&&r.hasOwnProperty("secret")}function $h(r){return r?rp(r)&&r.hasOwnProperty("realm")&&r.hasOwnProperty("target")&&(r.credentialType===Ce.ACCESS_TOKEN||r.credentialType===Ce.ACCESS_TOKEN_WITH_AUTH_SCHEME):!1}function Kh(r){return r?rp(r)&&r.hasOwnProperty("realm")&&r.credentialType===Ce.ID_TOKEN:!1}function Yh(r){return r?rp(r)&&r.credentialType===Ce.REFRESH_TOKEN:!1}function OE(r){return[r.homeAccountId,r.environment].join(Nt.CACHE_KEY_SEPARATOR).toLowerCase()}function PE(r){const t=r.credentialType===Ce.REFRESH_TOKEN&&r.familyId||r.clientId;return[r.credentialType,t,r.realm||""].join(Nt.CACHE_KEY_SEPARATOR).toLowerCase()}function IE(r){return(r.target||"").toLowerCase()}function DE(r){return(r.requestedClaimsHash||"").toLowerCase()}function ME(r){return r.tokenType&&r.tokenType.toLowerCase()!==$e.BEARER.toLowerCase()?r.tokenType.toLowerCase():""}function LE(r,t){const e=r.indexOf(At.CACHE_KEY)===0;let o=!0;return t&&(o=t.hasOwnProperty("failedRequests")&&t.hasOwnProperty("errors")&&t.hasOwnProperty("cacheHits")),e&&o}/*! @azure/msal-common v14.5.0 2023-12-01 */const tm="redirect_uri_empty",xE="claims_request_parsing_error",om="authority_uri_insecure",Is="url_parse_error",sp="empty_url_error",nm="empty_input_scopes_error",im="invalid_prompt_value",ap="invalid_claims",rm="token_request_empty",sm="logout_request_empty",am="invalid_code_challenge_method",lp="pkce_params_missing",cp="invalid_cloud_discovery_metadata",lm="invalid_authority_metadata",cm="untrusted_authority",ec="missing_ssh_jwk",um="missing_ssh_kid",FE="missing_nonce_authentication_header",NE="invalid_authentication_header",dm="cannot_set_OIDCOptions",pm="cannot_allow_native_broker",hm="authority_mismatch";/*! @azure/msal-common v14.5.0 2023-12-01 */const GE={[tm]:"A redirect URI is required for all calls, and none has been set.",[xE]:"Could not parse the given claims request object.",[om]:"Authority URIs must use https.  Please see here for valid authority configuration options: https://docs.microsoft.com/en-us/azure/active-directory/develop/msal-js-initializing-client-applications#configuration-options",[Is]:"URL could not be parsed into appropriate segments.",[sp]:"URL was empty or null.",[nm]:"Scopes cannot be passed as null, undefined or empty array because they are required to obtain an access token.",[im]:"Please see here for valid configuration options: https://azuread.github.io/microsoft-authentication-library-for-js/ref/modules/_azure_msal_common.html#commonauthorizationurlrequest",[ap]:"Given claims parameter must be a stringified JSON object.",[rm]:"Token request was empty and not found in cache.",[sm]:"The logout request was null or undefined.",[am]:'code_challenge_method passed is invalid. Valid values are "plain" and "S256".',[lp]:"Both params: code_challenge and code_challenge_method are to be passed if to be sent in the request",[cp]:"Invalid cloudDiscoveryMetadata provided. Must be a stringified JSON object containing tenant_discovery_endpoint and metadata fields",[lm]:"Invalid authorityMetadata provided. Must by a stringified JSON object containing authorization_endpoint, token_endpoint, issuer fields.",[cm]:"The provided authority is not a trusted authority. Please include this authority in the knownAuthorities config parameter.",[ec]:"Missing sshJwk in SSH certificate request. A stringified JSON Web Key is required when using the SSH authentication scheme.",[um]:"Missing sshKid in SSH certificate request. A string that uniquely identifies the public SSH key is required when using the SSH authentication scheme.",[FE]:"Unable to find an authentication header containing server nonce. Either the Authentication-Info or WWW-Authenticate headers must be present in order to obtain a server nonce.",[NE]:"Invalid authentication header provided",[dm]:"Cannot set OIDCOptions parameter. Please change the protocol mode to OIDC or use a non-Microsoft authority.",[pm]:"Cannot set allowNativeBroker parameter to true when not in AAD protocol mode.",[hm]:"Authority mismatch error. Authority provided in login request or PublicClientApplication config does not match the environment of the provided account. Please use a matching account or make an interactive request to login to this authority."};class up extends et{constructor(t){super(t,GE[t]),this.name="ClientConfigurationError",Object.setPrototypeOf(this,up.prototype)}}function Ke(r){return new up(r)}/*! @azure/msal-common v14.5.0 2023-12-01 */let Vo=class{static isEmptyObj(t){if(t)try{const e=JSON.parse(t);return Object.keys(e).length===0}catch{}return!0}static startsWith(t,e){return t.indexOf(e)===0}static endsWith(t,e){return t.length>=e.length&&t.lastIndexOf(e)===t.length-e.length}static queryStringToObject(t){const e={},o=t.split("&"),n=i=>decodeURIComponent(i.replace(/\+/g," "));return o.forEach(i=>{if(i.trim()){const[s,a]=i.split(/=(.+)/g,2);s&&a&&(e[n(s)]=n(a))}}),e}static trimArrayEntries(t){return t.map(e=>e.trim())}static removeEmptyStringsFromArray(t){return t.filter(e=>!!e)}static jsonParseHelper(t){try{return JSON.parse(t)}catch{return null}}static matchPattern(t,e){return new RegExp(t.replace(/\\/g,"\\\\").replace(/\*/g,"[^ ]*").replace(/\?/g,"\\?")).test(e)}};/*! @azure/msal-common v14.5.0 2023-12-01 */class dt{constructor(t){const e=t?Vo.trimArrayEntries([...t]):[],o=e?Vo.removeEmptyStringsFromArray(e):[];this.validateInputScopes(o),this.scopes=new Set,o.forEach(n=>this.scopes.add(n))}static fromString(t){const o=(t||B.EMPTY_STRING).split(" ");return new dt(o)}static createSearchScopes(t){const e=new dt(t);return e.containsOnlyOIDCScopes()?e.removeScope(B.OFFLINE_ACCESS_SCOPE):e.removeOIDCScopes(),e}validateInputScopes(t){if(!t||t.length<1)throw Ke(nm)}containsScope(t){const e=this.printScopesLowerCase().split(" "),o=new dt(e);return t?o.scopes.has(t.toLowerCase()):!1}containsScopeSet(t){return!t||t.scopes.size<=0?!1:this.scopes.size>=t.scopes.size&&t.asArray().every(e=>this.containsScope(e))}containsOnlyOIDCScopes(){let t=0;return Vh.forEach(e=>{this.containsScope(e)&&(t+=1)}),this.scopes.size===t}appendScope(t){t&&this.scopes.add(t.trim())}appendScopes(t){try{t.forEach(e=>this.appendScope(e))}catch{throw J($v)}}removeScope(t){if(!t)throw J(zv);this.scopes.delete(t.trim())}removeOIDCScopes(){Vh.forEach(t=>{this.scopes.delete(t)})}unionScopeSets(t){if(!t)throw J(ed);const e=new Set;return t.scopes.forEach(o=>e.add(o.toLowerCase())),this.scopes.forEach(o=>e.add(o.toLowerCase())),e}intersectingScopeSets(t){if(!t)throw J(ed);t.containsOnlyOIDCScopes()||t.removeOIDCScopes();const e=this.unionScopeSets(t),o=t.getScopeCount(),n=this.getScopeCount();return e.size<n+o}getScopeCount(){return this.scopes.size}asArray(){const t=[];return this.scopes.forEach(e=>t.push(e)),t}printScopes(){return this.scopes?this.asArray().join(" "):B.EMPTY_STRING}printScopesLowerCase(){return this.printScopes().toLowerCase()}}/*! @azure/msal-common v14.5.0 2023-12-01 */function al(r,t){if(!r)throw J(Fv);try{const e=t(r);return JSON.parse(e)}catch{throw J(Xd)}}function ur(r){if(!r)throw J(Xd);const t=r.split(Nt.CLIENT_INFO_SEPARATOR,2);return{uid:t[0],utid:t.length<2?B.EMPTY_STRING:t[1]}}/*! @azure/msal-common v14.5.0 2023-12-01 */function rd(r,t){return!!r&&!!t&&r===t.split(".")[1]}function dp(r,t){const{oid:e,sub:o,tid:n,name:i,tfp:s,acr:a}=t,l=n||s||a||"";return{tenantId:l,localAccountId:e||o||"",name:i,isHomeTenant:rd(l,r)}}function pp(r,t,e){let o=r;if(t){const{isHomeTenant:n,...i}=t;o={...r,...i}}if(e){const{isHomeTenant:n,...i}=dp(r.homeAccountId,e);return o={...o,...i,idTokenClaims:e},o}return o}/*! @azure/msal-common v14.5.0 2023-12-01 */const No={Default:0,Adfs:1,Dsts:2,Ciam:3};/*! @azure/msal-common v14.5.0 2023-12-01 */function fm(r){return r&&(r.tid||r.tfp||r.acr)||null}/*! @azure/msal-common v14.5.0 2023-12-01 */const An={AAD:"AAD",OIDC:"OIDC"};/*! @azure/msal-common v14.5.0 2023-12-01 */class mt{generateAccountId(){return[this.homeAccountId,this.environment].join(Nt.CACHE_KEY_SEPARATOR).toLowerCase()}generateAccountKey(){return mt.generateAccountCacheKey({homeAccountId:this.homeAccountId,environment:this.environment,tenantId:this.realm,username:this.username,localAccountId:this.localAccountId})}getAccountInfo(){return{homeAccountId:this.homeAccountId,environment:this.environment,tenantId:this.realm,username:this.username,localAccountId:this.localAccountId,name:this.name,nativeAccountId:this.nativeAccountId,authorityType:this.authorityType,tenantProfiles:new Map((this.tenantProfiles||[]).map(t=>[t.tenantId,t]))}}isSingleTenant(){return!this.tenantProfiles}static generateAccountCacheKey(t){const e=t.homeAccountId.split(".")[1];return[t.homeAccountId,t.environment||"",e||t.tenantId||""].join(Nt.CACHE_KEY_SEPARATOR).toLowerCase()}static createAccount(t,e,o){const n=new mt;e.authorityType===No.Adfs?n.authorityType=_a.ADFS_ACCOUNT_TYPE:e.protocolMode===An.AAD?n.authorityType=_a.MSSTS_ACCOUNT_TYPE:n.authorityType=_a.GENERIC_ACCOUNT_TYPE;let i;t.clientInfo&&o&&(i=al(t.clientInfo,o)),n.clientInfo=t.clientInfo,n.homeAccountId=t.homeAccountId,n.nativeAccountId=t.nativeAccountId;const s=t.environment||e&&e.getPreferredCache();if(!s)throw J(tp);n.environment=s,n.realm=(i==null?void 0:i.utid)||fm(t.idTokenClaims)||"",n.localAccountId=(i==null?void 0:i.uid)||t.idTokenClaims.oid||t.idTokenClaims.sub||"";const a=t.idTokenClaims.preferred_username||t.idTokenClaims.upn,l=t.idTokenClaims.emails?t.idTokenClaims.emails[0]:null;if(n.username=a||l||"",n.name=t.idTokenClaims.name,n.cloudGraphHostName=t.cloudGraphHostName,n.msGraphHost=t.msGraphHost,t.tenantProfiles)n.tenantProfiles=t.tenantProfiles;else{const c=[];if(t.idTokenClaims){const u=dp(t.homeAccountId,t.idTokenClaims);c.push(u)}n.tenantProfiles=c}return n}static createFromAccountInfo(t,e,o){var i;const n=new mt;return n.authorityType=t.authorityType||_a.GENERIC_ACCOUNT_TYPE,n.homeAccountId=t.homeAccountId,n.localAccountId=t.localAccountId,n.nativeAccountId=t.nativeAccountId,n.realm=t.tenantId,n.environment=t.environment,n.username=t.username,n.name=t.name,n.cloudGraphHostName=e,n.msGraphHost=o,n.tenantProfiles=Array.from(((i=t.tenantProfiles)==null?void 0:i.values())||[]),n}static generateHomeAccountId(t,e,o,n,i){if(!(e===No.Adfs||e===No.Dsts)){if(t)try{const s=al(t,n.base64Decode);if(s.uid&&s.utid)return`${s.uid}.${s.utid}`}catch{}o.warning("No client info in response")}return(i==null?void 0:i.sub)||""}static isAccountEntity(t){return t?t.hasOwnProperty("homeAccountId")&&t.hasOwnProperty("environment")&&t.hasOwnProperty("realm")&&t.hasOwnProperty("localAccountId")&&t.hasOwnProperty("username")&&t.hasOwnProperty("authorityType"):!1}static accountInfoIsEqual(t,e,o){if(!t||!e)return!1;let n=!0;if(o){const i=t.idTokenClaims||{},s=e.idTokenClaims||{};n=i.iat===s.iat&&i.nonce===s.nonce}return t.homeAccountId===e.homeAccountId&&t.localAccountId===e.localAccountId&&t.username===e.username&&t.tenantId===e.tenantId&&t.environment===e.environment&&t.nativeAccountId===e.nativeAccountId&&n}}/*! @azure/msal-common v14.5.0 2023-12-01 */function kE(r){return r.hasOwnProperty("authorization_endpoint")&&r.hasOwnProperty("token_endpoint")&&r.hasOwnProperty("issuer")&&r.hasOwnProperty("jwks_uri")}/*! @azure/msal-common v14.5.0 2023-12-01 */function gm(r){return r.startsWith("#/")?r.substring(2):r.startsWith("#")||r.startsWith("?")?r.substring(1):r}function ll(r){if(!r||r.indexOf("=")<0)return null;try{const t=gm(r),e=Object.fromEntries(new URLSearchParams(t));if(e.code||e.error||e.error_description||e.state)return e}catch{throw J(Hv)}return null}/*! @azure/msal-common v14.5.0 2023-12-01 */class He{get urlString(){return this._urlString}constructor(t){if(this._urlString=t,!this._urlString)throw Ke(sp);t.includes("#")||(this._urlString=He.canonicalizeUri(t))}static canonicalizeUri(t){if(t){let e=t.toLowerCase();return Vo.endsWith(e,"?")?e=e.slice(0,-1):Vo.endsWith(e,"?/")&&(e=e.slice(0,-2)),Vo.endsWith(e,"/")||(e+="/"),e}return t}validateAsUri(){let t;try{t=this.getUrlComponents()}catch{throw Ke(Is)}if(!t.HostNameAndPort||!t.PathSegments)throw Ke(Is);if(!t.Protocol||t.Protocol.toLowerCase()!=="https:")throw Ke(om)}static appendQueryString(t,e){return e?t.indexOf("?")<0?`${t}?${e}`:`${t}&${e}`:t}static removeHashFromUrl(t){return He.canonicalizeUri(t.split("#")[0])}replaceTenantPath(t){const e=this.getUrlComponents(),o=e.PathSegments;return t&&o.length!==0&&(o[0]===Jn.COMMON||o[0]===Jn.ORGANIZATIONS)&&(o[0]=t),He.constructAuthorityUriFromObject(e)}getUrlComponents(){const t=RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?"),e=this.urlString.match(t);if(!e)throw Ke(Is);const o={Protocol:e[1],HostNameAndPort:e[4],AbsolutePath:e[5],QueryString:e[7]};let n=o.AbsolutePath.split("/");return n=n.filter(i=>i&&i.length>0),o.PathSegments=n,o.QueryString&&o.QueryString.endsWith("/")&&(o.QueryString=o.QueryString.substring(0,o.QueryString.length-1)),o}static getDomainFromUrl(t){const e=RegExp("^([^:/?#]+://)?([^/?#]*)"),o=t.match(e);if(!o)throw Ke(Is);return o[2]}static getAbsoluteUrl(t,e){if(t[0]===B.FORWARD_SLASH){const n=new He(e).getUrlComponents();return n.Protocol+"//"+n.HostNameAndPort+t}return t}static constructAuthorityUriFromObject(t){return new He(t.Protocol+"//"+t.HostNameAndPort+"/"+t.PathSegments.join("/"))}static hashContainsKnownProperties(t){return!!ll(t)}}/*! @azure/msal-common v14.5.0 2023-12-01 */const vm={endpointMetadata:{"https://login.microsoftonline.com/common/":{token_endpoint:"https://login.microsoftonline.com/common/oauth2/v2.0/token",token_endpoint_auth_methods_supported:["client_secret_post","private_key_jwt","client_secret_basic"],jwks_uri:"https://login.microsoftonline.com/common/discovery/v2.0/keys",response_modes_supported:["query","fragment","form_post"],subject_types_supported:["pairwise"],id_token_signing_alg_values_supported:["RS256"],response_types_supported:["code","id_token","code id_token","id_token token"],scopes_supported:["openid","profile","email","offline_access"],issuer:"https://login.microsoftonline.com/{tenantid}/v2.0",request_uri_parameter_supported:!1,userinfo_endpoint:"https://graph.microsoft.com/oidc/userinfo",authorization_endpoint:"https://login.microsoftonline.com/common/oauth2/v2.0/authorize",device_authorization_endpoint:"https://login.microsoftonline.com/common/oauth2/v2.0/devicecode",http_logout_supported:!0,frontchannel_logout_supported:!0,end_session_endpoint:"https://login.microsoftonline.com/common/oauth2/v2.0/logout",claims_supported:["sub","iss","cloud_instance_name","cloud_instance_host_name","cloud_graph_host_name","msgraph_host","aud","exp","iat","auth_time","acr","nonce","preferred_username","name","tid","ver","at_hash","c_hash","email"],kerberos_endpoint:"https://login.microsoftonline.com/common/kerberos",tenant_region_scope:null,cloud_instance_name:"microsoftonline.com",cloud_graph_host_name:"graph.windows.net",msgraph_host:"graph.microsoft.com",rbac_url:"https://pas.windows.net"},"https://login.chinacloudapi.cn/common/":{token_endpoint:"https://login.chinacloudapi.cn/common/oauth2/v2.0/token",token_endpoint_auth_methods_supported:["client_secret_post","private_key_jwt","client_secret_basic"],jwks_uri:"https://login.chinacloudapi.cn/common/discovery/v2.0/keys",response_modes_supported:["query","fragment","form_post"],subject_types_supported:["pairwise"],id_token_signing_alg_values_supported:["RS256"],response_types_supported:["code","id_token","code id_token","id_token token"],scopes_supported:["openid","profile","email","offline_access"],issuer:"https://login.partner.microsoftonline.cn/{tenantid}/v2.0",request_uri_parameter_supported:!1,userinfo_endpoint:"https://microsoftgraph.chinacloudapi.cn/oidc/userinfo",authorization_endpoint:"https://login.chinacloudapi.cn/common/oauth2/v2.0/authorize",device_authorization_endpoint:"https://login.chinacloudapi.cn/common/oauth2/v2.0/devicecode",http_logout_supported:!0,frontchannel_logout_supported:!0,end_session_endpoint:"https://login.chinacloudapi.cn/common/oauth2/v2.0/logout",claims_supported:["sub","iss","cloud_instance_name","cloud_instance_host_name","cloud_graph_host_name","msgraph_host","aud","exp","iat","auth_time","acr","nonce","preferred_username","name","tid","ver","at_hash","c_hash","email"],kerberos_endpoint:"https://login.chinacloudapi.cn/common/kerberos",tenant_region_scope:null,cloud_instance_name:"partner.microsoftonline.cn",cloud_graph_host_name:"graph.chinacloudapi.cn",msgraph_host:"microsoftgraph.chinacloudapi.cn",rbac_url:"https://pas.chinacloudapi.cn"},"https://login.microsoftonline.us/common/":{token_endpoint:"https://login.microsoftonline.us/common/oauth2/v2.0/token",token_endpoint_auth_methods_supported:["client_secret_post","private_key_jwt","client_secret_basic"],jwks_uri:"https://login.microsoftonline.us/common/discovery/v2.0/keys",response_modes_supported:["query","fragment","form_post"],subject_types_supported:["pairwise"],id_token_signing_alg_values_supported:["RS256"],response_types_supported:["code","id_token","code id_token","id_token token"],scopes_supported:["openid","profile","email","offline_access"],issuer:"https://login.microsoftonline.us/{tenantid}/v2.0",request_uri_parameter_supported:!1,userinfo_endpoint:"https://graph.microsoft.com/oidc/userinfo",authorization_endpoint:"https://login.microsoftonline.us/common/oauth2/v2.0/authorize",device_authorization_endpoint:"https://login.microsoftonline.us/common/oauth2/v2.0/devicecode",http_logout_supported:!0,frontchannel_logout_supported:!0,end_session_endpoint:"https://login.microsoftonline.us/common/oauth2/v2.0/logout",claims_supported:["sub","iss","cloud_instance_name","cloud_instance_host_name","cloud_graph_host_name","msgraph_host","aud","exp","iat","auth_time","acr","nonce","preferred_username","name","tid","ver","at_hash","c_hash","email"],kerberos_endpoint:"https://login.microsoftonline.us/common/kerberos",tenant_region_scope:null,cloud_instance_name:"microsoftonline.us",cloud_graph_host_name:"graph.windows.net",msgraph_host:"graph.microsoft.com",rbac_url:"https://pasff.usgovcloudapi.net"},"https://login.microsoftonline.com/consumers/":{token_endpoint:"https://login.microsoftonline.com/consumers/oauth2/v2.0/token",token_endpoint_auth_methods_supported:["client_secret_post","private_key_jwt","client_secret_basic"],jwks_uri:"https://login.microsoftonline.com/consumers/discovery/v2.0/keys",response_modes_supported:["query","fragment","form_post"],subject_types_supported:["pairwise"],id_token_signing_alg_values_supported:["RS256"],response_types_supported:["code","id_token","code id_token","id_token token"],scopes_supported:["openid","profile","email","offline_access"],issuer:"https://login.microsoftonline.com/9188040d-6c67-4c5b-b112-36a304b66dad/v2.0",request_uri_parameter_supported:!1,userinfo_endpoint:"https://graph.microsoft.com/oidc/userinfo",authorization_endpoint:"https://login.microsoftonline.com/consumers/oauth2/v2.0/authorize",device_authorization_endpoint:"https://login.microsoftonline.com/consumers/oauth2/v2.0/devicecode",http_logout_supported:!0,frontchannel_logout_supported:!0,end_session_endpoint:"https://login.microsoftonline.com/consumers/oauth2/v2.0/logout",claims_supported:["sub","iss","cloud_instance_name","cloud_instance_host_name","cloud_graph_host_name","msgraph_host","aud","exp","iat","auth_time","acr","nonce","preferred_username","name","tid","ver","at_hash","c_hash","email"],kerberos_endpoint:"https://login.microsoftonline.com/consumers/kerberos",tenant_region_scope:null,cloud_instance_name:"microsoftonline.com",cloud_graph_host_name:"graph.windows.net",msgraph_host:"graph.microsoft.com",rbac_url:"https://pas.windows.net"},"https://login.chinacloudapi.cn/consumers/":{token_endpoint:"https://login.chinacloudapi.cn/consumers/oauth2/v2.0/token",token_endpoint_auth_methods_supported:["client_secret_post","private_key_jwt","client_secret_basic"],jwks_uri:"https://login.chinacloudapi.cn/consumers/discovery/v2.0/keys",response_modes_supported:["query","fragment","form_post"],subject_types_supported:["pairwise"],id_token_signing_alg_values_supported:["RS256"],response_types_supported:["code","id_token","code id_token","id_token token"],scopes_supported:["openid","profile","email","offline_access"],issuer:"https://login.partner.microsoftonline.cn/9188040d-6c67-4c5b-b112-36a304b66dad/v2.0",request_uri_parameter_supported:!1,userinfo_endpoint:"https://microsoftgraph.chinacloudapi.cn/oidc/userinfo",authorization_endpoint:"https://login.chinacloudapi.cn/consumers/oauth2/v2.0/authorize",device_authorization_endpoint:"https://login.chinacloudapi.cn/consumers/oauth2/v2.0/devicecode",http_logout_supported:!0,frontchannel_logout_supported:!0,end_session_endpoint:"https://login.chinacloudapi.cn/consumers/oauth2/v2.0/logout",claims_supported:["sub","iss","cloud_instance_name","cloud_instance_host_name","cloud_graph_host_name","msgraph_host","aud","exp","iat","auth_time","acr","nonce","preferred_username","name","tid","ver","at_hash","c_hash","email"],kerberos_endpoint:"https://login.chinacloudapi.cn/consumers/kerberos",tenant_region_scope:null,cloud_instance_name:"partner.microsoftonline.cn",cloud_graph_host_name:"graph.chinacloudapi.cn",msgraph_host:"microsoftgraph.chinacloudapi.cn",rbac_url:"https://pas.chinacloudapi.cn"},"https://login.microsoftonline.us/consumers/":{token_endpoint:"https://login.microsoftonline.us/consumers/oauth2/v2.0/token",token_endpoint_auth_methods_supported:["client_secret_post","private_key_jwt","client_secret_basic"],jwks_uri:"https://login.microsoftonline.us/consumers/discovery/v2.0/keys",response_modes_supported:["query","fragment","form_post"],subject_types_supported:["pairwise"],id_token_signing_alg_values_supported:["RS256"],response_types_supported:["code","id_token","code id_token","id_token token"],scopes_supported:["openid","profile","email","offline_access"],issuer:"https://login.microsoftonline.us/9188040d-6c67-4c5b-b112-36a304b66dad/v2.0",request_uri_parameter_supported:!1,userinfo_endpoint:"https://graph.microsoft.com/oidc/userinfo",authorization_endpoint:"https://login.microsoftonline.us/consumers/oauth2/v2.0/authorize",device_authorization_endpoint:"https://login.microsoftonline.us/consumers/oauth2/v2.0/devicecode",http_logout_supported:!0,frontchannel_logout_supported:!0,end_session_endpoint:"https://login.microsoftonline.us/consumers/oauth2/v2.0/logout",claims_supported:["sub","iss","cloud_instance_name","cloud_instance_host_name","cloud_graph_host_name","msgraph_host","aud","exp","iat","auth_time","acr","nonce","preferred_username","name","tid","ver","at_hash","c_hash","email"],kerberos_endpoint:"https://login.microsoftonline.us/consumers/kerberos",tenant_region_scope:null,cloud_instance_name:"microsoftonline.us",cloud_graph_host_name:"graph.windows.net",msgraph_host:"graph.microsoft.com",rbac_url:"https://pasff.usgovcloudapi.net"},"https://login.microsoftonline.com/organizations/":{token_endpoint:"https://login.microsoftonline.com/organizations/oauth2/v2.0/token",token_endpoint_auth_methods_supported:["client_secret_post","private_key_jwt","client_secret_basic"],jwks_uri:"https://login.microsoftonline.com/organizations/discovery/v2.0/keys",response_modes_supported:["query","fragment","form_post"],subject_types_supported:["pairwise"],id_token_signing_alg_values_supported:["RS256"],response_types_supported:["code","id_token","code id_token","id_token token"],scopes_supported:["openid","profile","email","offline_access"],issuer:"https://login.microsoftonline.com/{tenantid}/v2.0",request_uri_parameter_supported:!1,userinfo_endpoint:"https://graph.microsoft.com/oidc/userinfo",authorization_endpoint:"https://login.microsoftonline.com/organizations/oauth2/v2.0/authorize",device_authorization_endpoint:"https://login.microsoftonline.com/organizations/oauth2/v2.0/devicecode",http_logout_supported:!0,frontchannel_logout_supported:!0,end_session_endpoint:"https://login.microsoftonline.com/organizations/oauth2/v2.0/logout",claims_supported:["sub","iss","cloud_instance_name","cloud_instance_host_name","cloud_graph_host_name","msgraph_host","aud","exp","iat","auth_time","acr","nonce","preferred_username","name","tid","ver","at_hash","c_hash","email"],kerberos_endpoint:"https://login.microsoftonline.com/organizations/kerberos",tenant_region_scope:null,cloud_instance_name:"microsoftonline.com",cloud_graph_host_name:"graph.windows.net",msgraph_host:"graph.microsoft.com",rbac_url:"https://pas.windows.net"},"https://login.chinacloudapi.cn/organizations/":{token_endpoint:"https://login.chinacloudapi.cn/organizations/oauth2/v2.0/token",token_endpoint_auth_methods_supported:["client_secret_post","private_key_jwt","client_secret_basic"],jwks_uri:"https://login.chinacloudapi.cn/organizations/discovery/v2.0/keys",response_modes_supported:["query","fragment","form_post"],subject_types_supported:["pairwise"],id_token_signing_alg_values_supported:["RS256"],response_types_supported:["code","id_token","code id_token","id_token token"],scopes_supported:["openid","profile","email","offline_access"],issuer:"https://login.partner.microsoftonline.cn/{tenantid}/v2.0",request_uri_parameter_supported:!1,userinfo_endpoint:"https://microsoftgraph.chinacloudapi.cn/oidc/userinfo",authorization_endpoint:"https://login.chinacloudapi.cn/organizations/oauth2/v2.0/authorize",device_authorization_endpoint:"https://login.chinacloudapi.cn/organizations/oauth2/v2.0/devicecode",http_logout_supported:!0,frontchannel_logout_supported:!0,end_session_endpoint:"https://login.chinacloudapi.cn/organizations/oauth2/v2.0/logout",claims_supported:["sub","iss","cloud_instance_name","cloud_instance_host_name","cloud_graph_host_name","msgraph_host","aud","exp","iat","auth_time","acr","nonce","preferred_username","name","tid","ver","at_hash","c_hash","email"],kerberos_endpoint:"https://login.chinacloudapi.cn/organizations/kerberos",tenant_region_scope:null,cloud_instance_name:"partner.microsoftonline.cn",cloud_graph_host_name:"graph.chinacloudapi.cn",msgraph_host:"microsoftgraph.chinacloudapi.cn",rbac_url:"https://pas.chinacloudapi.cn"},"https://login.microsoftonline.us/organizations/":{token_endpoint:"https://login.microsoftonline.us/organizations/oauth2/v2.0/token",token_endpoint_auth_methods_supported:["client_secret_post","private_key_jwt","client_secret_basic"],jwks_uri:"https://login.microsoftonline.us/organizations/discovery/v2.0/keys",response_modes_supported:["query","fragment","form_post"],subject_types_supported:["pairwise"],id_token_signing_alg_values_supported:["RS256"],response_types_supported:["code","id_token","code id_token","id_token token"],scopes_supported:["openid","profile","email","offline_access"],issuer:"https://login.microsoftonline.us/{tenantid}/v2.0",request_uri_parameter_supported:!1,userinfo_endpoint:"https://graph.microsoft.com/oidc/userinfo",authorization_endpoint:"https://login.microsoftonline.us/organizations/oauth2/v2.0/authorize",device_authorization_endpoint:"https://login.microsoftonline.us/organizations/oauth2/v2.0/devicecode",http_logout_supported:!0,frontchannel_logout_supported:!0,end_session_endpoint:"https://login.microsoftonline.us/organizations/oauth2/v2.0/logout",claims_supported:["sub","iss","cloud_instance_name","cloud_instance_host_name","cloud_graph_host_name","msgraph_host","aud","exp","iat","auth_time","acr","nonce","preferred_username","name","tid","ver","at_hash","c_hash","email"],kerberos_endpoint:"https://login.microsoftonline.us/organizations/kerberos",tenant_region_scope:null,cloud_instance_name:"microsoftonline.us",cloud_graph_host_name:"graph.windows.net",msgraph_host:"graph.microsoft.com",rbac_url:"https://pasff.usgovcloudapi.net"}},instanceDiscoveryMetadata:{tenant_discovery_endpoint:"https://{canonicalAuthority}/v2.0/.well-known/openid-configuration","api-version":"1.1",metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}]}},qh=vm.endpointMetadata,hp=vm.instanceDiscoveryMetadata,mm=new Set;hp.metadata.forEach(r=>{r.aliases.forEach(t=>{mm.add(t)})});function HE(r,t){var n;let e;const o=r.canonicalAuthority;if(o){const i=new He(o).getUrlComponents().HostNameAndPort;e=Qh(i,(n=r.cloudDiscoveryMetadata)==null?void 0:n.metadata,co.CONFIG,t)||Qh(i,hp.metadata,co.HARDCODED_VALUES,t)||r.knownAuthorities}return e||[]}function Qh(r,t,e,o){if(o==null||o.trace(`getAliasesFromMetadata called with source: ${e}`),r&&t){const n=cl(t,r);if(n)return o==null||o.trace(`getAliasesFromMetadata: found cloud discovery metadata in ${e}, returning aliases`),n.aliases;o==null||o.trace(`getAliasesFromMetadata: did not find cloud discovery metadata in ${e}`)}return null}function VE(r){return cl(hp.metadata,r)}function cl(r,t){for(let e=0;e<r.length;e++){const o=r[e];if(o.aliases.includes(t))return o}return null}/*! @azure/msal-common v14.5.0 2023-12-01 */class sd{constructor(){this.expiresAt=jt.nowSeconds()+Fs.REFRESH_TIME_SECONDS}updateCloudDiscoveryMetadata(t,e){this.aliases=t.aliases,this.preferred_cache=t.preferred_cache,this.preferred_network=t.preferred_network,this.aliasesFromNetwork=e}updateEndpointMetadata(t,e){this.authorization_endpoint=t.authorization_endpoint,this.token_endpoint=t.token_endpoint,this.end_session_endpoint=t.end_session_endpoint,this.issuer=t.issuer,this.endpointsFromNetwork=e,this.jwks_uri=t.jwks_uri}updateCanonicalAuthority(t){this.canonical_authority=t}resetExpiresAt(){this.expiresAt=jt.nowSeconds()+Fs.REFRESH_TIME_SECONDS}isExpired(){return this.expiresAt<=jt.nowSeconds()}static isAuthorityMetadataEntity(t,e){return e?t.indexOf(Fs.CACHE_KEY)===0&&e.hasOwnProperty("aliases")&&e.hasOwnProperty("preferred_cache")&&e.hasOwnProperty("preferred_network")&&e.hasOwnProperty("canonical_authority")&&e.hasOwnProperty("authorization_endpoint")&&e.hasOwnProperty("token_endpoint")&&e.hasOwnProperty("issuer")&&e.hasOwnProperty("aliasesFromNetwork")&&e.hasOwnProperty("endpointsFromNetwork")&&e.hasOwnProperty("expiresAt")&&e.hasOwnProperty("jwks_uri"):!1}}/*! @azure/msal-common v14.5.0 2023-12-01 */function BE(r){return r.hasOwnProperty("tenant_discovery_endpoint")&&r.hasOwnProperty("metadata")}/*! @azure/msal-common v14.5.0 2023-12-01 */function UE(r){return r.hasOwnProperty("error")&&r.hasOwnProperty("error_description")}/*! @azure/msal-common v14.5.0 2023-12-01 */const G={AcquireTokenByCode:"acquireTokenByCode",AcquireTokenByRefreshToken:"acquireTokenByRefreshToken",AcquireTokenSilent:"acquireTokenSilent",AcquireTokenSilentAsync:"acquireTokenSilentAsync",AcquireTokenPopup:"acquireTokenPopup",CryptoOptsGetPublicKeyThumbprint:"cryptoOptsGetPublicKeyThumbprint",CryptoOptsSignJwt:"cryptoOptsSignJwt",SilentCacheClientAcquireToken:"silentCacheClientAcquireToken",SilentIframeClientAcquireToken:"silentIframeClientAcquireToken",SilentRefreshClientAcquireToken:"silentRefreshClientAcquireToken",SsoSilent:"ssoSilent",StandardInteractionClientGetDiscoveredAuthority:"standardInteractionClientGetDiscoveredAuthority",FetchAccountIdWithNativeBroker:"fetchAccountIdWithNativeBroker",NativeInteractionClientAcquireToken:"nativeInteractionClientAcquireToken",BaseClientCreateTokenRequestHeaders:"baseClientCreateTokenRequestHeaders",RefreshTokenClientExecutePostToTokenEndpoint:"refreshTokenClientExecutePostToTokenEndpoint",AuthorizationCodeClientExecutePostToTokenEndpoint:"authorizationCodeClientExecutePostToTokenEndpoint",BrokerHandhshake:"brokerHandshake",AcquireTokenByRefreshTokenInBroker:"acquireTokenByRefreshTokenInBroker",AcquireTokenByBroker:"acquireTokenByBroker",RefreshTokenClientExecuteTokenRequest:"refreshTokenClientExecuteTokenRequest",RefreshTokenClientAcquireToken:"refreshTokenClientAcquireToken",RefreshTokenClientAcquireTokenWithCachedRefreshToken:"refreshTokenClientAcquireTokenWithCachedRefreshToken",RefreshTokenClientAcquireTokenByRefreshToken:"refreshTokenClientAcquireTokenByRefreshToken",RefreshTokenClientCreateTokenRequestBody:"refreshTokenClientCreateTokenRequestBody",AcquireTokenFromCache:"acquireTokenFromCache",SilentFlowClientAcquireCachedToken:"silentFlowClientAcquireCachedToken",SilentFlowClientGenerateResultFromCacheRecord:"silentFlowClientGenerateResultFromCacheRecord",AcquireTokenBySilentIframe:"acquireTokenBySilentIframe",InitializeBaseRequest:"initializeBaseRequest",InitializeSilentRequest:"initializeSilentRequest",InitializeClientApplication:"initializeClientApplication",SilentIframeClientTokenHelper:"silentIframeClientTokenHelper",SilentHandlerInitiateAuthRequest:"silentHandlerInitiateAuthRequest",SilentHandlerMonitorIframeForHash:"silentHandlerMonitorIframeForHash",SilentHandlerLoadFrame:"silentHandlerLoadFrame",SilentHandlerLoadFrameSync:"silentHandlerLoadFrameSync",StandardInteractionClientCreateAuthCodeClient:"standardInteractionClientCreateAuthCodeClient",StandardInteractionClientGetClientConfiguration:"standardInteractionClientGetClientConfiguration",StandardInteractionClientInitializeAuthorizationRequest:"standardInteractionClientInitializeAuthorizationRequest",StandardInteractionClientInitializeAuthorizationCodeRequest:"standardInteractionClientInitializeAuthorizationCodeRequest",GetAuthCodeUrl:"getAuthCodeUrl",HandleCodeResponseFromServer:"handleCodeResponseFromServer",HandleCodeResponse:"handleCodeResponse",UpdateTokenEndpointAuthority:"updateTokenEndpointAuthority",AuthClientAcquireToken:"authClientAcquireToken",AuthClientExecuteTokenRequest:"authClientExecuteTokenRequest",AuthClientCreateTokenRequestBody:"authClientCreateTokenRequestBody",AuthClientCreateQueryString:"authClientCreateQueryString",PopTokenGenerateCnf:"popTokenGenerateCnf",PopTokenGenerateKid:"popTokenGenerateKid",HandleServerTokenResponse:"handleServerTokenResponse",DeserializeResponse:"deserializeResponse",AuthorityFactoryCreateDiscoveredInstance:"authorityFactoryCreateDiscoveredInstance",AuthorityResolveEndpointsAsync:"authorityResolveEndpointsAsync",AuthorityResolveEndpointsFromLocalSources:"authorityResolveEndpointsFromLocalSources",AuthorityGetCloudDiscoveryMetadataFromNetwork:"authorityGetCloudDiscoveryMetadataFromNetwork",AuthorityUpdateCloudDiscoveryMetadata:"authorityUpdateCloudDiscoveryMetadata",AuthorityGetEndpointMetadataFromNetwork:"authorityGetEndpointMetadataFromNetwork",AuthorityUpdateEndpointMetadata:"authorityUpdateEndpointMetadata",AuthorityUpdateMetadataWithRegionalInformation:"authorityUpdateMetadataWithRegionalInformation",RegionDiscoveryDetectRegion:"regionDiscoveryDetectRegion",RegionDiscoveryGetRegionFromIMDS:"regionDiscoveryGetRegionFromIMDS",RegionDiscoveryGetCurrentVersion:"regionDiscoveryGetCurrentVersion",AcquireTokenByCodeAsync:"acquireTokenByCodeAsync",GetEndpointMetadataFromNetwork:"getEndpointMetadataFromNetwork",GetCloudDiscoveryMetadataFromNetworkMeasurement:"getCloudDiscoveryMetadataFromNetworkMeasurement",HandleRedirectPromiseMeasurement:"handleRedirectPromiseMeasurement",UpdateCloudDiscoveryMetadataMeasurement:"updateCloudDiscoveryMetadataMeasurement",UsernamePasswordClientAcquireToken:"usernamePasswordClientAcquireToken",NativeMessageHandlerHandshake:"nativeMessageHandlerHandshake",NativeGenerateAuthResult:"nativeGenerateAuthResult",RemoveHiddenIframe:"removeHiddenIframe",ClearTokensAndKeysWithClaims:"clearTokensAndKeysWithClaims",CacheManagerGetRefreshToken:"cacheManagerGetRefreshToken",GeneratePkceCodes:"generatePkceCodes",GenerateCodeVerifier:"generateCodeVerifier",GenerateCodeChallengeFromVerifier:"generateCodeChallengeFromVerifier",Sha256Digest:"sha256Digest",GetRandomValues:"getRandomValues"},jE={NotStarted:0,InProgress:1,Completed:2};/*! @azure/msal-common v14.5.0 2023-12-01 */const qi=(r,t,e,o,n)=>(...i)=>{e.trace(`Executing function ${t}`);const s=o==null?void 0:o.startMeasurement(t,n);try{const a=r(...i);return s==null||s.end({success:!0}),e.trace(`Returning result from ${t}`),a}catch(a){e.trace(`Error occurred in ${t}`);try{e.trace(JSON.stringify(a))}catch{e.trace("Unable to print error message.")}throw s==null||s.end({success:!1}),a}},re=(r,t,e,o,n)=>(...i)=>{e.trace(`Executing function ${t}`);const s=o==null?void 0:o.startMeasurement(t,n);return o==null||o.setPreQueueTime(t,n),r(...i).then(a=>(e.trace(`Returning result from ${t}`),s==null||s.end({success:!0}),a)).catch(a=>{e.trace(`Error occurred in ${t}`);try{e.trace(JSON.stringify(a))}catch{e.trace("Unable to print error message.")}throw s==null||s.end({success:!1}),a})};/*! @azure/msal-common v14.5.0 2023-12-01 */class tc{constructor(t,e,o,n){this.networkInterface=t,this.logger=e,this.performanceClient=o,this.correlationId=n}async detectRegion(t,e){var n;(n=this.performanceClient)==null||n.addQueueMeasurement(G.RegionDiscoveryDetectRegion,this.correlationId);let o=t;if(o)e.region_source=tr.ENVIRONMENT_VARIABLE;else{const i=tc.IMDS_OPTIONS;try{const s=await re(this.getRegionFromIMDS.bind(this),G.RegionDiscoveryGetRegionFromIMDS,this.logger,this.performanceClient,this.correlationId)(B.IMDS_VERSION,i);if(s.status===Sa.httpSuccess&&(o=s.body,e.region_source=tr.IMDS),s.status===Sa.httpBadRequest){const a=await re(this.getCurrentVersion.bind(this),G.RegionDiscoveryGetCurrentVersion,this.logger,this.performanceClient,this.correlationId)(i);if(!a)return e.region_source=tr.FAILED_AUTO_DETECTION,null;const l=await re(this.getRegionFromIMDS.bind(this),G.RegionDiscoveryGetRegionFromIMDS,this.logger,this.performanceClient,this.correlationId)(a,i);l.status===Sa.httpSuccess&&(o=l.body,e.region_source=tr.IMDS)}}catch{return e.region_source=tr.FAILED_AUTO_DETECTION,null}}return o||(e.region_source=tr.FAILED_AUTO_DETECTION),o||null}async getRegionFromIMDS(t,e){var o;return(o=this.performanceClient)==null||o.addQueueMeasurement(G.RegionDiscoveryGetRegionFromIMDS,this.correlationId),this.networkInterface.sendGetRequestAsync(`${B.IMDS_ENDPOINT}?api-version=${t}&format=text`,e,B.IMDS_TIMEOUT)}async getCurrentVersion(t){var e;(e=this.performanceClient)==null||e.addQueueMeasurement(G.RegionDiscoveryGetCurrentVersion,this.correlationId);try{const o=await this.networkInterface.sendGetRequestAsync(`${B.IMDS_ENDPOINT}?format=json`,t);return o.status===Sa.httpBadRequest&&o.body&&o.body["newest-versions"]&&o.body["newest-versions"].length>0?o.body["newest-versions"][0]:null}catch{return null}}}tc.IMDS_OPTIONS={headers:{Metadata:"true"}};/*! @azure/msal-common v14.5.0 2023-12-01 */class Ft{constructor(t,e,o,n,i,s,a){this.canonicalAuthority=t,this._canonicalAuthority.validateAsUri(),this.networkInterface=e,this.cacheManager=o,this.authorityOptions=n,this.regionDiscoveryMetadata={region_used:void 0,region_source:void 0,region_outcome:void 0},this.logger=i,this.performanceClient=s,this.correlationId=a,this.regionDiscovery=new tc(e,this.logger,this.performanceClient,this.correlationId)}getAuthorityType(t){if(t.HostNameAndPort.endsWith(B.CIAM_AUTH_URL))return No.Ciam;const e=t.PathSegments;if(e.length)switch(e[0].toLowerCase()){case B.ADFS:return No.Adfs;case B.DSTS:return No.Dsts}return No.Default}get authorityType(){return this.getAuthorityType(this.canonicalAuthorityUrlComponents)}get protocolMode(){return this.authorityOptions.protocolMode}get options(){return this.authorityOptions}get canonicalAuthority(){return this._canonicalAuthority.urlString}set canonicalAuthority(t){this._canonicalAuthority=new He(t),this._canonicalAuthority.validateAsUri(),this._canonicalAuthorityUrlComponents=null}get canonicalAuthorityUrlComponents(){return this._canonicalAuthorityUrlComponents||(this._canonicalAuthorityUrlComponents=this._canonicalAuthority.getUrlComponents()),this._canonicalAuthorityUrlComponents}get hostnameAndPort(){return this.canonicalAuthorityUrlComponents.HostNameAndPort.toLowerCase()}get tenant(){return this.canonicalAuthorityUrlComponents.PathSegments[0]}get authorizationEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.authorization_endpoint);throw J(wn)}get tokenEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint);throw J(wn)}get deviceCodeEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint.replace("/token","/devicecode"));throw J(wn)}get endSessionEndpoint(){if(this.discoveryComplete()){if(!this.metadata.end_session_endpoint)throw J(Xv);return this.replacePath(this.metadata.end_session_endpoint)}else throw J(wn)}get selfSignedJwtAudience(){if(this.discoveryComplete())return this.replacePath(this.metadata.issuer);throw J(wn)}get jwksUri(){if(this.discoveryComplete())return this.replacePath(this.metadata.jwks_uri);throw J(wn)}canReplaceTenant(t){return t.PathSegments.length===1&&!Ft.reservedTenantDomains.has(t.PathSegments[0])&&this.getAuthorityType(t)===No.Default&&this.protocolMode===An.AAD}replaceTenant(t){return t.replace(/{tenant}|{tenantid}/g,this.tenant)}replacePath(t){let e=t;const n=new He(this.metadata.canonical_authority).getUrlComponents(),i=n.PathSegments;return this.canonicalAuthorityUrlComponents.PathSegments.forEach((a,l)=>{let c=i[l];if(l===0&&this.canReplaceTenant(n)){const u=new He(this.metadata.authorization_endpoint).getUrlComponents().PathSegments[0];c!==u&&(this.logger.verbose(`Replacing tenant domain name ${c} with id ${u}`),c=u)}a!==c&&(e=e.replace(`/${c}/`,`/${a}/`))}),this.replaceTenant(e)}get defaultOpenIdConfigurationEndpoint(){const t=this.hostnameAndPort;return this.canonicalAuthority.endsWith("v2.0/")||this.authorityType===No.Adfs||this.protocolMode!==An.AAD&&!this.isAliasOfKnownMicrosoftAuthority(t)?`${this.canonicalAuthority}.well-known/openid-configuration`:`${this.canonicalAuthority}v2.0/.well-known/openid-configuration`}discoveryComplete(){return!!this.metadata}async resolveEndpointsAsync(){var n;(n=this.performanceClient)==null||n.addQueueMeasurement(G.AuthorityResolveEndpointsAsync,this.correlationId);const t=this.getCurrentMetadataEntity(),e=await re(this.updateCloudDiscoveryMetadata.bind(this),G.AuthorityUpdateCloudDiscoveryMetadata,this.logger,this.performanceClient,this.correlationId)(t);this.canonicalAuthority=this.canonicalAuthority.replace(this.hostnameAndPort,t.preferred_network);const o=await re(this.updateEndpointMetadata.bind(this),G.AuthorityUpdateEndpointMetadata,this.logger,this.performanceClient,this.correlationId)(t);this.updateCachedMetadata(t,e,{source:o})}getCurrentMetadataEntity(){let t=this.cacheManager.getAuthorityMetadataByAlias(this.hostnameAndPort);return t||(t=new sd,t.updateCanonicalAuthority(this.canonicalAuthority)),t}updateCachedMetadata(t,e,o){e!==co.CACHE&&(o==null?void 0:o.source)!==co.CACHE&&(t.resetExpiresAt(),t.updateCanonicalAuthority(this.canonicalAuthority));const n=this.cacheManager.generateAuthorityMetadataCacheKey(t.preferred_cache);this.cacheManager.setAuthorityMetadata(n,t),this.metadata=t}async updateEndpointMetadata(t){var n,i,s;(n=this.performanceClient)==null||n.addQueueMeasurement(G.AuthorityUpdateEndpointMetadata,this.correlationId);const e=this.updateEndpointMetadataFromLocalSources(t);if(e){if(e.source===co.HARDCODED_VALUES&&(i=this.authorityOptions.azureRegionConfiguration)!=null&&i.azureRegion&&e.metadata){const a=await re(this.updateMetadataWithRegionalInformation.bind(this),G.AuthorityUpdateMetadataWithRegionalInformation,this.logger,this.performanceClient,this.correlationId)(e.metadata);t.updateEndpointMetadata(a,!1)}return e.source}let o=await re(this.getEndpointMetadataFromNetwork.bind(this),G.AuthorityGetEndpointMetadataFromNetwork,this.logger,this.performanceClient,this.correlationId)();if(o)return(s=this.authorityOptions.azureRegionConfiguration)!=null&&s.azureRegion&&(o=await re(this.updateMetadataWithRegionalInformation.bind(this),G.AuthorityUpdateMetadataWithRegionalInformation,this.logger,this.performanceClient,this.correlationId)(o)),t.updateEndpointMetadata(o,!0),co.NETWORK;throw J(kv,this.defaultOpenIdConfigurationEndpoint)}updateEndpointMetadataFromLocalSources(t){this.logger.verbose("Attempting to get endpoint metadata from authority configuration");const e=this.getEndpointMetadataFromConfig();if(e)return this.logger.verbose("Found endpoint metadata in authority configuration"),t.updateEndpointMetadata(e,!1),{source:co.CONFIG};if(this.logger.verbose("Did not find endpoint metadata in the config... Attempting to get endpoint metadata from the hardcoded values."),this.authorityOptions.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get endpoint metadata from the network metadata cache.");else{const n=this.getEndpointMetadataFromHardcodedValues();if(n)return t.updateEndpointMetadata(n,!1),{source:co.HARDCODED_VALUES,metadata:n};this.logger.verbose("Did not find endpoint metadata in hardcoded values... Attempting to get endpoint metadata from the network metadata cache.")}const o=t.isExpired();return this.isAuthoritySameType(t)&&t.endpointsFromNetwork&&!o?(this.logger.verbose("Found endpoint metadata in the cache."),{source:co.CACHE}):(o&&this.logger.verbose("The metadata entity is expired."),null)}isAuthoritySameType(t){return new He(t.canonical_authority).getUrlComponents().PathSegments.length===this.canonicalAuthorityUrlComponents.PathSegments.length}getEndpointMetadataFromConfig(){if(this.authorityOptions.authorityMetadata)try{return JSON.parse(this.authorityOptions.authorityMetadata)}catch{throw Ke(lm)}return null}async getEndpointMetadataFromNetwork(){var o;(o=this.performanceClient)==null||o.addQueueMeasurement(G.AuthorityGetEndpointMetadataFromNetwork,this.correlationId);const t={},e=this.defaultOpenIdConfigurationEndpoint;this.logger.verbose(`Authority.getEndpointMetadataFromNetwork: attempting to retrieve OAuth endpoints from ${e}`);try{const n=await this.networkInterface.sendGetRequestAsync(e,t);return kE(n.body)?n.body:(this.logger.verbose("Authority.getEndpointMetadataFromNetwork: could not parse response as OpenID configuration"),null)}catch(n){return this.logger.verbose(`Authority.getEndpointMetadataFromNetwork: ${n}`),null}}getEndpointMetadataFromHardcodedValues(){return this.canonicalAuthority in qh?qh[this.canonicalAuthority]:null}async updateMetadataWithRegionalInformation(t){var o,n,i;(o=this.performanceClient)==null||o.addQueueMeasurement(G.AuthorityUpdateMetadataWithRegionalInformation,this.correlationId);const e=(n=this.authorityOptions.azureRegionConfiguration)==null?void 0:n.azureRegion;if(e){if(e!==B.AZURE_REGION_AUTO_DISCOVER_FLAG)return this.regionDiscoveryMetadata.region_outcome=Fc.CONFIGURED_NO_AUTO_DETECTION,this.regionDiscoveryMetadata.region_used=e,Ft.replaceWithRegionalInformation(t,e);const s=await re(this.regionDiscovery.detectRegion.bind(this.regionDiscovery),G.RegionDiscoveryDetectRegion,this.logger,this.performanceClient,this.correlationId)((i=this.authorityOptions.azureRegionConfiguration)==null?void 0:i.environmentRegion,this.regionDiscoveryMetadata);if(s)return this.regionDiscoveryMetadata.region_outcome=Fc.AUTO_DETECTION_REQUESTED_SUCCESSFUL,this.regionDiscoveryMetadata.region_used=s,Ft.replaceWithRegionalInformation(t,s);this.regionDiscoveryMetadata.region_outcome=Fc.AUTO_DETECTION_REQUESTED_FAILED}return t}async updateCloudDiscoveryMetadata(t){var n;(n=this.performanceClient)==null||n.addQueueMeasurement(G.AuthorityUpdateCloudDiscoveryMetadata,this.correlationId);const e=this.updateCloudDiscoveryMetadataFromLocalSources(t);if(e)return e;const o=await re(this.getCloudDiscoveryMetadataFromNetwork.bind(this),G.AuthorityGetCloudDiscoveryMetadataFromNetwork,this.logger,this.performanceClient,this.correlationId)();if(o)return t.updateCloudDiscoveryMetadata(o,!0),co.NETWORK;throw Ke(cm)}updateCloudDiscoveryMetadataFromLocalSources(t){this.logger.verbose("Attempting to get cloud discovery metadata  from authority configuration"),this.logger.verbosePii(`Known Authorities: ${this.authorityOptions.knownAuthorities||B.NOT_APPLICABLE}`),this.logger.verbosePii(`Authority Metadata: ${this.authorityOptions.authorityMetadata||B.NOT_APPLICABLE}`),this.logger.verbosePii(`Canonical Authority: ${t.canonical_authority||B.NOT_APPLICABLE}`);const e=this.getCloudDiscoveryMetadataFromConfig();if(e)return this.logger.verbose("Found cloud discovery metadata in authority configuration"),t.updateCloudDiscoveryMetadata(e,!1),co.CONFIG;if(this.logger.verbose("Did not find cloud discovery metadata in the config... Attempting to get cloud discovery metadata from the hardcoded values."),this.options.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded cloud discovery metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get cloud discovery metadata from the network metadata cache.");else{const n=VE(this.hostnameAndPort);if(n)return this.logger.verbose("Found cloud discovery metadata from hardcoded values."),t.updateCloudDiscoveryMetadata(n,!1),co.HARDCODED_VALUES;this.logger.verbose("Did not find cloud discovery metadata in hardcoded values... Attempting to get cloud discovery metadata from the network metadata cache.")}const o=t.isExpired();return this.isAuthoritySameType(t)&&t.aliasesFromNetwork&&!o?(this.logger.verbose("Found cloud discovery metadata in the cache."),co.CACHE):(o&&this.logger.verbose("The metadata entity is expired."),null)}getCloudDiscoveryMetadataFromConfig(){if(this.authorityType===No.Ciam)return this.logger.verbose("CIAM authorities do not support cloud discovery metadata, generate the aliases from authority host."),Ft.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort);if(this.authorityOptions.cloudDiscoveryMetadata){this.logger.verbose("The cloud discovery metadata has been provided as a network response, in the config.");try{this.logger.verbose("Attempting to parse the cloud discovery metadata.");const t=JSON.parse(this.authorityOptions.cloudDiscoveryMetadata),e=cl(t.metadata,this.hostnameAndPort);if(this.logger.verbose("Parsed the cloud discovery metadata."),e)return this.logger.verbose("There is returnable metadata attached to the parsed cloud discovery metadata."),e;this.logger.verbose("There is no metadata attached to the parsed cloud discovery metadata.")}catch{throw this.logger.verbose("Unable to parse the cloud discovery metadata. Throwing Invalid Cloud Discovery Metadata Error."),Ke(cp)}}return this.isInKnownAuthorities()?(this.logger.verbose("The host is included in knownAuthorities. Creating new cloud discovery metadata from the host."),Ft.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)):null}async getCloudDiscoveryMetadataFromNetwork(){var n;(n=this.performanceClient)==null||n.addQueueMeasurement(G.AuthorityGetCloudDiscoveryMetadataFromNetwork,this.correlationId);const t=`${B.AAD_INSTANCE_DISCOVERY_ENDPT}${this.canonicalAuthority}oauth2/v2.0/authorize`,e={};let o=null;try{const i=await this.networkInterface.sendGetRequestAsync(t,e);let s,a;if(BE(i.body))s=i.body,a=s.metadata,this.logger.verbosePii(`tenant_discovery_endpoint is: ${s.tenant_discovery_endpoint}`);else if(UE(i.body)){if(this.logger.warning(`A CloudInstanceDiscoveryErrorResponse was returned. The cloud instance discovery network request's status code is: ${i.status}`),s=i.body,s.error===B.INVALID_INSTANCE)return this.logger.error("The CloudInstanceDiscoveryErrorResponse error is invalid_instance."),null;this.logger.warning(`The CloudInstanceDiscoveryErrorResponse error is ${s.error}`),this.logger.warning(`The CloudInstanceDiscoveryErrorResponse error description is ${s.error_description}`),this.logger.warning("Setting the value of the CloudInstanceDiscoveryMetadata (returned from the network) to []"),a=[]}else return this.logger.error("AAD did not return a CloudInstanceDiscoveryResponse or CloudInstanceDiscoveryErrorResponse"),null;this.logger.verbose("Attempting to find a match between the developer's authority and the CloudInstanceDiscoveryMetadata returned from the network request."),o=cl(a,this.hostnameAndPort)}catch(i){if(i instanceof et)this.logger.error(`There was a network error while attempting to get the cloud discovery instance metadata.
Error: ${i.errorCode}
Error Description: ${i.errorMessage}`);else{const s=i;this.logger.error(`A non-MSALJS error was thrown while attempting to get the cloud instance discovery metadata.
Error: ${s.name}
Error Description: ${s.message}`)}return null}return o||(this.logger.warning("The developer's authority was not found within the CloudInstanceDiscoveryMetadata returned from the network request."),this.logger.verbose("Creating custom Authority for custom domain scenario."),o=Ft.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)),o}isInKnownAuthorities(){return this.authorityOptions.knownAuthorities.filter(e=>e&&He.getDomainFromUrl(e).toLowerCase()===this.hostnameAndPort).length>0}static generateAuthority(t,e){let o;if(e&&e.azureCloudInstance!==ip.None){const n=e.tenant?e.tenant:B.DEFAULT_COMMON_TENANT;o=`${e.azureCloudInstance}/${n}/`}return o||t}static createCloudDiscoveryMetadataFromHost(t){return{preferred_network:t,preferred_cache:t,aliases:[t]}}getPreferredCache(){if(this.discoveryComplete())return this.metadata.preferred_cache;throw J(wn)}isAlias(t){return this.metadata.aliases.indexOf(t)>-1}isAliasOfKnownMicrosoftAuthority(t){return mm.has(t)}static isPublicCloudAuthority(t){return B.KNOWN_PUBLIC_CLOUDS.indexOf(t)>=0}static buildRegionalAuthorityString(t,e,o){const n=new He(t);n.validateAsUri();const i=n.getUrlComponents();let s=`${e}.${i.HostNameAndPort}`;this.isPublicCloudAuthority(i.HostNameAndPort)&&(s=`${e}.${B.REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX}`);const a=He.constructAuthorityUriFromObject({...n.getUrlComponents(),HostNameAndPort:s}).urlString;return o?`${a}?${o}`:a}static replaceWithRegionalInformation(t,e){const o={...t};return o.authorization_endpoint=Ft.buildRegionalAuthorityString(o.authorization_endpoint,e),o.token_endpoint=Ft.buildRegionalAuthorityString(o.token_endpoint,e),o.end_session_endpoint&&(o.end_session_endpoint=Ft.buildRegionalAuthorityString(o.end_session_endpoint,e)),o}static transformCIAMAuthority(t){let e=t;const n=new He(t).getUrlComponents();if(n.PathSegments.length===0&&n.HostNameAndPort.endsWith(B.CIAM_AUTH_URL)){const i=n.HostNameAndPort.split(".")[0];e=`${e}${i}${B.AAD_TENANT_DOMAIN_SUFFIX}`}return e}}Ft.reservedTenantDomains=new Set(["{tenant}","{tenantid}",Jn.COMMON,Jn.CONSUMERS,Jn.ORGANIZATIONS]);function WE(r){const o=new He(r).getUrlComponents().PathSegments.slice(-1)[0].toLowerCase();switch(o){case Jn.COMMON:case Jn.ORGANIZATIONS:case Jn.CONSUMERS:return;default:return o}}function ym(r){return r.endsWith(B.FORWARD_SLASH)?r:`${r}${B.FORWARD_SLASH}`}function zE(r){const t=r.cloudDiscoveryMetadata;let e;if(t)try{e=JSON.parse(t)}catch{throw Ke(cp)}return{canonicalAuthority:r.authority?ym(r.authority):void 0,knownAuthorities:r.knownAuthorities,cloudDiscoveryMetadata:e}}/*! @azure/msal-common v14.5.0 2023-12-01 */class _n{constructor(t,e,o,n){this.clientId=t,this.cryptoImpl=e,this.commonLogger=o.clone(Zv,np),this.staticAuthorityOptions=n}getAllAccounts(t){return this.buildTenantProfiles(this.getAccountsFilteredBy(t||{}),t)}getAccountInfoFilteredBy(t){const e=this.getAllAccounts(t);return e.length>1?e.sort(n=>n.idTokenClaims?-1:1)[0]:e.length===1?e[0]:null}getBaseAccountInfo(t){const e=this.getAccountsFilteredBy(t);return e.length>0?e[0].getAccountInfo():null}buildTenantProfiles(t,e){return t.flatMap(o=>this.getAccountInfoForTenantProfiles(o,e))}getAccountInfoForTenantProfiles(t,e){return this.getTenantProfilesFromAccountEntity(t,e==null?void 0:e.tenantId,e)}getTenantedAccountInfoByFilter(t,e,o,n){let i=null,s;if(n&&!this.tenantProfileMatchesFilter(o,n))return null;const a=this.getIdToken(t,e,o.tenantId);return a&&(s=Yi(a.secret,this.cryptoImpl.base64Decode),!this.idTokenClaimsMatchTenantProfileFilter(s,n))?null:(i=pp(t,o,s),i)}getTenantProfilesFromAccountEntity(t,e,o){const n=t.getAccountInfo();let i=n.tenantProfiles||new Map;const s=this.getTokenKeys();if(e){const l=i.get(e);if(l)i=new Map([[e,l]]);else return[]}const a=[];return i.forEach(l=>{const c=this.getTenantedAccountInfoByFilter(n,s,l,o);c&&a.push(c)}),a}tenantProfileMatchesFilter(t,e){return!(e.localAccountId&&!this.matchLocalAccountIdFromTenantProfile(t,e.localAccountId)||e.name&&t.name!==e.name||e.isHomeTenant!==void 0&&t.isHomeTenant!==e.isHomeTenant)}idTokenClaimsMatchTenantProfileFilter(t,e){return!(e&&(e.localAccountId&&!this.matchLocalAccountIdFromTokenClaims(t,e.localAccountId)||e.loginHint&&!this.matchLoginHintFromTokenClaims(t,e.loginHint)||e.username&&!this.matchUsername(t.preferred_username,e.username)||e.name&&!this.matchName(t,e.name)||e.sid&&!this.matchSid(t,e.sid)))}async saveCacheRecord(t,e){if(!t)throw J(Kv);t.account&&this.setAccount(t.account),t.idToken&&(e==null?void 0:e.idToken)!==!1&&this.setIdTokenCredential(t.idToken),t.accessToken&&(e==null?void 0:e.accessToken)!==!1&&await this.saveAccessToken(t.accessToken),t.refreshToken&&(e==null?void 0:e.refreshToken)!==!1&&this.setRefreshTokenCredential(t.refreshToken),t.appMetadata&&this.setAppMetadata(t.appMetadata)}async saveAccessToken(t){const e={clientId:t.clientId,credentialType:t.credentialType,environment:t.environment,homeAccountId:t.homeAccountId,realm:t.realm,tokenType:t.tokenType,requestedClaimsHash:t.requestedClaimsHash},o=this.getTokenKeys(),n=dt.fromString(t.target),i=[];o.accessToken.forEach(s=>{if(!this.accessTokenKeyMatchesFilter(s,e,!1))return;const a=this.getAccessTokenCredential(s);a&&this.credentialMatchesFilter(a,e)&&dt.fromString(a.target).intersectingScopeSets(n)&&i.push(this.removeAccessToken(s))}),await Promise.all(i),this.setAccessTokenCredential(t)}getAccountsFilteredBy(t){const e=this.getAccountKeys(),o=[];return e.forEach(n=>{var l;if(!this.isAccountKey(n,t.homeAccountId))return;const i=this.getAccount(n,this.commonLogger);if(!i||t.homeAccountId&&!this.matchHomeAccountId(i,t.homeAccountId)||t.username&&!this.matchUsername(i.username,t.username)||t.environment&&!this.matchEnvironment(i,t.environment)||t.realm&&!this.matchRealm(i,t.realm)||t.nativeAccountId&&!this.matchNativeAccountId(i,t.nativeAccountId)||t.authorityType&&!this.matchAuthorityType(i,t.authorityType))return;const s={localAccountId:t==null?void 0:t.localAccountId,name:t==null?void 0:t.name},a=(l=i.tenantProfiles)==null?void 0:l.filter(c=>this.tenantProfileMatchesFilter(c,s));a&&a.length===0||o.push(i)}),o}isAccountKey(t,e,o){return!(t.split(Nt.CACHE_KEY_SEPARATOR).length<3||e&&!t.toLowerCase().includes(e.toLowerCase())||o&&!t.toLowerCase().includes(o.toLowerCase()))}isCredentialKey(t){if(t.split(Nt.CACHE_KEY_SEPARATOR).length<6)return!1;const e=t.toLowerCase();if(e.indexOf(Ce.ID_TOKEN.toLowerCase())===-1&&e.indexOf(Ce.ACCESS_TOKEN.toLowerCase())===-1&&e.indexOf(Ce.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase())===-1&&e.indexOf(Ce.REFRESH_TOKEN.toLowerCase())===-1)return!1;if(e.indexOf(Ce.REFRESH_TOKEN.toLowerCase())>-1){const o=`${Ce.REFRESH_TOKEN}${Nt.CACHE_KEY_SEPARATOR}${this.clientId}${Nt.CACHE_KEY_SEPARATOR}`,n=`${Ce.REFRESH_TOKEN}${Nt.CACHE_KEY_SEPARATOR}${xs}${Nt.CACHE_KEY_SEPARATOR}`;if(e.indexOf(o.toLowerCase())===-1&&e.indexOf(n.toLowerCase())===-1)return!1}else if(e.indexOf(this.clientId.toLowerCase())===-1)return!1;return!0}credentialMatchesFilter(t,e){return!(e.clientId&&!this.matchClientId(t,e.clientId)||e.userAssertionHash&&!this.matchUserAssertionHash(t,e.userAssertionHash)||typeof e.homeAccountId=="string"&&!this.matchHomeAccountId(t,e.homeAccountId)||e.environment&&!this.matchEnvironment(t,e.environment)||e.realm&&!this.matchRealm(t,e.realm)||e.credentialType&&!this.matchCredentialType(t,e.credentialType)||e.familyId&&!this.matchFamilyId(t,e.familyId)||e.target&&!this.matchTarget(t,e.target)||(e.requestedClaimsHash||t.requestedClaimsHash)&&t.requestedClaimsHash!==e.requestedClaimsHash||t.credentialType===Ce.ACCESS_TOKEN_WITH_AUTH_SCHEME&&(e.tokenType&&!this.matchTokenType(t,e.tokenType)||e.tokenType===$e.SSH&&e.keyId&&!this.matchKeyId(t,e.keyId)))}getAppMetadataFilteredBy(t){return this.getAppMetadataFilteredByInternal(t.environment,t.clientId)}getAppMetadataFilteredByInternal(t,e){const o=this.getKeys(),n={};return o.forEach(i=>{if(!this.isAppMetadata(i))return;const s=this.getAppMetadata(i);s&&(t&&!this.matchEnvironment(s,t)||e&&!this.matchClientId(s,e)||(n[i]=s))}),n}getAuthorityMetadataByAlias(t){const e=this.getAuthorityMetadataKeys();let o=null;return e.forEach(n=>{if(!this.isAuthorityMetadata(n)||n.indexOf(this.clientId)===-1)return;const i=this.getAuthorityMetadata(n);i&&i.aliases.indexOf(t)!==-1&&(o=i)}),o}async removeAllAccounts(){const t=this.getAccountKeys(),e=[];t.forEach(o=>{e.push(this.removeAccount(o))}),await Promise.all(e)}async removeAccount(t){const e=this.getAccount(t,this.commonLogger);e&&(await this.removeAccountContext(e),this.removeItem(t))}async removeAccountContext(t){const e=this.getTokenKeys(),o=t.generateAccountId(),n=[];e.idToken.forEach(i=>{i.indexOf(o)===0&&this.removeIdToken(i)}),e.accessToken.forEach(i=>{i.indexOf(o)===0&&n.push(this.removeAccessToken(i))}),e.refreshToken.forEach(i=>{i.indexOf(o)===0&&this.removeRefreshToken(i)}),await Promise.all(n)}updateOutdatedCachedAccount(t,e,o){var n;if(e&&e.isSingleTenant()){(n=this.commonLogger)==null||n.verbose("updateOutdatedCachedAccount: Found a single-tenant (outdated) account entity in the cache, migrating to multi-tenant account entity");const i=this.getAccountKeys().filter(u=>u.startsWith(e.homeAccountId)),s=[];i.forEach(u=>{const d=this.getCachedAccountEntity(u);d&&s.push(d)});const a=s.find(u=>rd(u.realm,u.homeAccountId))||s[0];a.tenantProfiles=s.map(u=>({tenantId:u.realm,localAccountId:u.localAccountId,name:u.name,isHomeTenant:rd(u.realm,u.homeAccountId)}));const l=_n.toObject(new mt,{...a}),c=l.generateAccountKey();return i.forEach(u=>{u!==c&&this.removeOutdatedAccount(t)}),this.setAccount(l),o==null||o.verbose("Updated an outdated account entity in the cache"),l}return e}async removeAccessToken(t){const e=this.getAccessTokenCredential(t);if(e){if(e.credentialType.toLowerCase()===Ce.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase()&&e.tokenType===$e.POP){const n=e.keyId;if(n)try{await this.cryptoImpl.removeTokenBindingKey(n)}catch{throw J(Qv)}}return this.removeItem(t)}}removeAppMetadata(){return this.getKeys().forEach(e=>{this.isAppMetadata(e)&&this.removeItem(e)}),!0}readCacheRecord(t,e,o,n,i){const s=t.tenantId||WE(e.authority),a=this.getTokenKeys(),l=this.readAccountFromCache(t),c=this.getIdToken(t,a,s,n,i),u=this.getAccessToken(t,e,a,s,n,i),d=this.getRefreshToken(t,!1,a,n,i),p=this.readAppMetadataFromCache(o);return{account:l,idToken:c,accessToken:u,refreshToken:d,appMetadata:p}}readAccountFromCache(t){const e=mt.generateAccountCacheKey(t);return this.getAccount(e,this.commonLogger)}getIdToken(t,e,o,n,i){this.commonLogger.trace("CacheManager - getIdToken called");const s={homeAccountId:t.homeAccountId,environment:t.environment,credentialType:Ce.ID_TOKEN,clientId:this.clientId,realm:o},a=this.getIdTokensByFilter(s,e),l=a.size;if(l<1)return this.commonLogger.info("CacheManager:getIdToken - No token found"),null;if(l>1){let c=a;if(!o){const u=new Map;a.forEach((p,h)=>{p.realm===t.tenantId&&u.set(h,p)});const d=u.size;if(d<1)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account but none match account entity tenant id, returning first result"),a.values().next().value;if(d===1)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account, defaulting to home tenant profile"),u.values().next().value;c=u}return this.commonLogger.info("CacheManager:getIdToken - Multiple matching ID tokens found, clearing them"),c.forEach((u,d)=>{this.removeIdToken(d)}),n&&i&&n.addFields({multiMatchedID:a.size},i),null}return this.commonLogger.info("CacheManager:getIdToken - Returning ID token"),a.values().next().value}getIdTokensByFilter(t,e){const o=e&&e.idToken||this.getTokenKeys().idToken,n=new Map;return o.forEach(i=>{if(!this.idTokenKeyMatchesFilter(i,{clientId:this.clientId,...t}))return;const s=this.getIdTokenCredential(i);s&&this.credentialMatchesFilter(s,t)&&n.set(i,s)}),n}idTokenKeyMatchesFilter(t,e){const o=t.toLowerCase();return!(e.clientId&&o.indexOf(e.clientId.toLowerCase())===-1||e.homeAccountId&&o.indexOf(e.homeAccountId.toLowerCase())===-1)}removeIdToken(t){this.removeItem(t)}removeRefreshToken(t){this.removeItem(t)}getAccessToken(t,e,o,n,i,s){this.commonLogger.trace("CacheManager - getAccessToken called");const a=dt.createSearchScopes(e.scopes),l=e.authenticationScheme||$e.BEARER,c=l&&l.toLowerCase()!==$e.BEARER.toLowerCase()?Ce.ACCESS_TOKEN_WITH_AUTH_SCHEME:Ce.ACCESS_TOKEN,u={homeAccountId:t.homeAccountId,environment:t.environment,credentialType:c,clientId:this.clientId,realm:n||t.tenantId,target:a,tokenType:l,keyId:e.sshKid,requestedClaimsHash:e.requestedClaimsHash},d=o&&o.accessToken||this.getTokenKeys().accessToken,p=[];d.forEach(f=>{if(this.accessTokenKeyMatchesFilter(f,u,!0)){const g=this.getAccessTokenCredential(f);g&&this.credentialMatchesFilter(g,u)&&p.push(g)}});const h=p.length;return h<1?(this.commonLogger.info("CacheManager:getAccessToken - No token found"),null):h>1?(this.commonLogger.info("CacheManager:getAccessToken - Multiple access tokens found, clearing them"),p.forEach(f=>{this.removeAccessToken(Ps(f))}),i&&s&&i.addFields({multiMatchedAT:p.length},s),null):(this.commonLogger.info("CacheManager:getAccessToken - Returning access token"),p[0])}accessTokenKeyMatchesFilter(t,e,o){const n=t.toLowerCase();if(e.clientId&&n.indexOf(e.clientId.toLowerCase())===-1||e.homeAccountId&&n.indexOf(e.homeAccountId.toLowerCase())===-1||e.realm&&n.indexOf(e.realm.toLowerCase())===-1||e.requestedClaimsHash&&n.indexOf(e.requestedClaimsHash.toLowerCase())===-1)return!1;if(e.target){const i=e.target.asArray();for(let s=0;s<i.length;s++){if(o&&!n.includes(i[s].toLowerCase()))return!1;if(!o&&n.includes(i[s].toLowerCase()))return!0}}return!0}getAccessTokensByFilter(t){const e=this.getTokenKeys(),o=[];return e.accessToken.forEach(n=>{if(!this.accessTokenKeyMatchesFilter(n,t,!0))return;const i=this.getAccessTokenCredential(n);i&&this.credentialMatchesFilter(i,t)&&o.push(i)}),o}getRefreshToken(t,e,o,n,i){this.commonLogger.trace("CacheManager - getRefreshToken called");const s=e?xs:void 0,a={homeAccountId:t.homeAccountId,environment:t.environment,credentialType:Ce.REFRESH_TOKEN,clientId:this.clientId,familyId:s},l=o&&o.refreshToken||this.getTokenKeys().refreshToken,c=[];l.forEach(d=>{if(this.refreshTokenKeyMatchesFilter(d,a)){const p=this.getRefreshTokenCredential(d);p&&this.credentialMatchesFilter(p,a)&&c.push(p)}});const u=c.length;return u<1?(this.commonLogger.info("CacheManager:getRefreshToken - No refresh token found."),null):(u>1&&n&&i&&n.addFields({multiMatchedRT:u},i),this.commonLogger.info("CacheManager:getRefreshToken - returning refresh token"),c[0])}refreshTokenKeyMatchesFilter(t,e){const o=t.toLowerCase();return!(e.familyId&&o.indexOf(e.familyId.toLowerCase())===-1||!e.familyId&&e.clientId&&o.indexOf(e.clientId.toLowerCase())===-1||e.homeAccountId&&o.indexOf(e.homeAccountId.toLowerCase())===-1)}readAppMetadataFromCache(t){const e={environment:t,clientId:this.clientId},o=this.getAppMetadataFilteredBy(e),n=Object.keys(o).map(s=>o[s]),i=n.length;if(i<1)return null;if(i>1)throw J(jv);return n[0]}isAppMetadataFOCI(t){const e=this.readAppMetadataFromCache(t);return!!(e&&e.familyId===xs)}matchHomeAccountId(t,e){return typeof t.homeAccountId=="string"&&e===t.homeAccountId}matchLocalAccountIdFromTokenClaims(t,e){const o=t.oid||t.sub;return e===o}matchLocalAccountIdFromTenantProfile(t,e){return t.localAccountId===e}matchName(t,e){var o;return e.toLowerCase()===((o=t.name)==null?void 0:o.toLowerCase())}matchUsername(t,e){return!!(t&&typeof t=="string"&&(e==null?void 0:e.toLowerCase())===t.toLowerCase())}matchUserAssertionHash(t,e){return!!(t.userAssertionHash&&e===t.userAssertionHash)}matchEnvironment(t,e){if(this.staticAuthorityOptions){const n=HE(this.staticAuthorityOptions,this.commonLogger);if(n.includes(e)&&n.includes(t.environment))return!0}const o=this.getAuthorityMetadataByAlias(e);return!!(o&&o.aliases.indexOf(t.environment)>-1)}matchCredentialType(t,e){return t.credentialType&&e.toLowerCase()===t.credentialType.toLowerCase()}matchClientId(t,e){return!!(t.clientId&&e===t.clientId)}matchFamilyId(t,e){return!!(t.familyId&&e===t.familyId)}matchRealm(t,e){var o;return((o=t.realm)==null?void 0:o.toLowerCase())===e.toLowerCase()}matchNativeAccountId(t,e){return!!(t.nativeAccountId&&e===t.nativeAccountId)}matchLoginHintFromTokenClaims(t,e){return t.login_hint===e||t.preferred_username===e||t.upn===e}matchSid(t,e){return t.sid===e}matchAuthorityType(t,e){return!!(t.authorityType&&e.toLowerCase()===t.authorityType.toLowerCase())}matchTarget(t,e){return t.credentialType!==Ce.ACCESS_TOKEN&&t.credentialType!==Ce.ACCESS_TOKEN_WITH_AUTH_SCHEME||!t.target?!1:dt.fromString(t.target).containsScopeSet(e)}matchTokenType(t,e){return!!(t.tokenType&&t.tokenType===e)}matchKeyId(t,e){return!!(t.keyId&&t.keyId===e)}isAppMetadata(t){return t.indexOf(Ju)!==-1}isAuthorityMetadata(t){return t.indexOf(Fs.CACHE_KEY)!==-1}generateAuthorityMetadataCacheKey(t){return`${Fs.CACHE_KEY}-${this.clientId}-${t}`}static toObject(t,e){for(const o in e)t[o]=e[o];return t}}class $E extends _n{setAccount(){throw J(De)}getAccount(){throw J(De)}getCachedAccountEntity(){throw J(De)}setIdTokenCredential(){throw J(De)}getIdTokenCredential(){throw J(De)}setAccessTokenCredential(){throw J(De)}getAccessTokenCredential(){throw J(De)}setRefreshTokenCredential(){throw J(De)}getRefreshTokenCredential(){throw J(De)}setAppMetadata(){throw J(De)}getAppMetadata(){throw J(De)}setServerTelemetry(){throw J(De)}getServerTelemetry(){throw J(De)}setAuthorityMetadata(){throw J(De)}getAuthorityMetadata(){throw J(De)}getAuthorityMetadataKeys(){throw J(De)}setThrottlingCache(){throw J(De)}getThrottlingCache(){throw J(De)}removeItem(){throw J(De)}containsKey(){throw J(De)}getKeys(){throw J(De)}getAccountKeys(){throw J(De)}getTokenKeys(){throw J(De)}async clear(){throw J(De)}updateCredentialCacheKey(){throw J(De)}removeOutdatedAccount(){throw J(De)}}/*! @azure/msal-common v14.5.0 2023-12-01 */const KE=300,Cm={tokenRenewalOffsetSeconds:KE,preventCorsPreflight:!1},YE={loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:Ct.Info,correlationId:B.EMPTY_STRING},qE={claimsBasedCachingEnabled:!1},QE={async sendGetRequestAsync(){throw J(De)},async sendPostRequestAsync(){throw J(De)}},XE={sku:B.SKU,version:np,cpu:B.EMPTY_STRING,os:B.EMPTY_STRING},ZE={clientSecret:B.EMPTY_STRING,clientAssertion:void 0},JE={azureCloudInstance:ip.None,tenant:`${B.DEFAULT_COMMON_TENANT}`},eR={application:{appName:"",appVersion:""}};function tR({authOptions:r,systemOptions:t,loggerOptions:e,cacheOptions:o,storageInterface:n,networkInterface:i,cryptoInterface:s,clientCredentials:a,libraryInfo:l,telemetry:c,serverTelemetryManager:u,persistencePlugin:d,serializableCache:p}){const h={...YE,...e};return{authOptions:oR(r),systemOptions:{...Cm,...t},loggerOptions:h,cacheOptions:{...qE,...o},storageInterface:n||new $E(r.clientId,sl,new Xl(h)),networkInterface:i||QE,cryptoInterface:s||sl,clientCredentials:a||ZE,libraryInfo:{...XE,...l},telemetry:{...eR,...c},serverTelemetryManager:u||null,persistencePlugin:d||null,serializableCache:p||null}}function oR(r){return{clientCapabilities:[],azureCloudOptions:JE,skipAuthorityMetadataCache:!1,...r}}function ad(r){return r.authOptions.authority.options.protocolMode===An.OIDC}/*! @azure/msal-common v14.5.0 2023-12-01 */class oi extends et{constructor(t,e,o){super(t,e,o),this.name="ServerError",Object.setPrototypeOf(this,oi.prototype)}}/*! @azure/msal-common v14.5.0 2023-12-01 */class tn{static generateThrottlingStorageKey(t){return`${Ns.THROTTLING_PREFIX}.${JSON.stringify(t)}`}static preProcess(t,e){var i;const o=tn.generateThrottlingStorageKey(e),n=t.getThrottlingCache(o);if(n){if(n.throttleTime<Date.now()){t.removeItem(o);return}throw new oi(((i=n.errorCodes)==null?void 0:i.join(" "))||B.EMPTY_STRING,n.errorMessage,n.subError)}}static postProcess(t,e,o){if(tn.checkResponseStatus(o)||tn.checkResponseForRetryAfter(o)){const n={throttleTime:tn.calculateThrottleTime(parseInt(o.headers[nn.RETRY_AFTER])),error:o.body.error,errorCodes:o.body.error_codes,errorMessage:o.body.error_description,subError:o.body.suberror};t.setThrottlingCache(tn.generateThrottlingStorageKey(e),n)}}static checkResponseStatus(t){return t.status===429||t.status>=500&&t.status<600}static checkResponseForRetryAfter(t){return t.headers?t.headers.hasOwnProperty(nn.RETRY_AFTER)&&(t.status<200||t.status>=300):!1}static calculateThrottleTime(t){const e=t<=0?0:t,o=Date.now()/1e3;return Math.floor(Math.min(o+(e||Ns.DEFAULT_THROTTLE_TIME_SECONDS),o+Ns.DEFAULT_MAX_THROTTLE_TIME_SECONDS)*1e3)}static removeThrottle(t,e,o,n){const i={clientId:e,authority:o.authority,scopes:o.scopes,homeAccountIdentifier:n,claims:o.claims,authenticationScheme:o.authenticationScheme,resourceRequestMethod:o.resourceRequestMethod,resourceRequestUri:o.resourceRequestUri,shrClaims:o.shrClaims,sshKid:o.sshKid},s=this.generateThrottlingStorageKey(i);t.removeItem(s)}}/*! @azure/msal-common v14.5.0 2023-12-01 */class nR{constructor(t,e){this.networkClient=t,this.cacheManager=e}async sendPostRequest(t,e,o){tn.preProcess(this.cacheManager,t);let n;try{n=await this.networkClient.sendPostRequestAsync(e,o)}catch(i){throw i instanceof et?i:J(Gv)}return tn.postProcess(this.cacheManager,t,n),n}}/*! @azure/msal-common v14.5.0 2023-12-01 */const po={HOME_ACCOUNT_ID:"home_account_id",UPN:"UPN"};/*! @azure/msal-common v14.5.0 2023-12-01 */const Ar="client_id",iR="redirect_uri",Xh="response_type",rR="response_mode",sR="grant_type",aR="claims",lR="scope",cR="refresh_token",uR="state",dR="nonce",pR="prompt",hR="code",fR="code_challenge",gR="code_challenge_method",vR="code_verifier",mR="client-request-id",yR="x-client-SKU",CR="x-client-VER",wR="x-client-OS",_R="x-client-CPU",SR="x-client-current-telemetry",ER="x-client-last-telemetry",RR="x-ms-lib-capability",TR="x-app-name",bR="x-app-ver",AR="post_logout_redirect_uri",OR="id_token_hint",PR="device_code",IR="client_secret",DR="client_assertion",MR="client_assertion_type",Zh="token_type",Jh="req_cnf",LR="assertion",xR="requested_token_use",ef="return_spa_code",FR="nativebroker",NR="logout_hint",GR="sid",kR="login_hint",HR="domain_hint";/*! @azure/msal-common v14.5.0 2023-12-01 */class Ci{static validateRedirectUri(t){if(!t)throw Ke(tm)}static validatePrompt(t){const e=[];for(const o in kt)e.push(kt[o]);if(e.indexOf(t)<0)throw Ke(im)}static validateClaims(t){try{JSON.parse(t)}catch{throw Ke(ap)}}static validateCodeChallengeParams(t,e){if(!t||!e)throw Ke(lp);this.validateCodeChallengeMethod(e)}static validateCodeChallengeMethod(t){if([Bh.PLAIN,Bh.S256].indexOf(t)<0)throw Ke(am)}static sanitizeEQParams(t,e){return t?(e.forEach((o,n)=>{t[n]&&delete t[n]}),Object.fromEntries(Object.entries(t).filter(o=>o[1]!==""))):{}}}/*! @azure/msal-common v14.5.0 2023-12-01 */class Gs{constructor(){this.parameters=new Map}addResponseTypeCode(){this.parameters.set(Xh,encodeURIComponent(B.CODE_RESPONSE_TYPE))}addResponseTypeForTokenAndIdToken(){this.parameters.set(Xh,encodeURIComponent(`${B.TOKEN_RESPONSE_TYPE} ${B.ID_TOKEN_RESPONSE_TYPE}`))}addResponseMode(t){this.parameters.set(rR,encodeURIComponent(t||dE.QUERY))}addNativeBroker(){this.parameters.set(FR,encodeURIComponent("1"))}addScopes(t,e=!0,o=aa){e&&!o.includes("openid")&&!t.includes("openid")&&o.push("openid");const n=e?[...t||[],...o]:t||[],i=new dt(n);this.parameters.set(lR,encodeURIComponent(i.printScopes()))}addClientId(t){this.parameters.set(Ar,encodeURIComponent(t))}addRedirectUri(t){Ci.validateRedirectUri(t),this.parameters.set(iR,encodeURIComponent(t))}addPostLogoutRedirectUri(t){Ci.validateRedirectUri(t),this.parameters.set(AR,encodeURIComponent(t))}addIdTokenHint(t){this.parameters.set(OR,encodeURIComponent(t))}addDomainHint(t){this.parameters.set(HR,encodeURIComponent(t))}addLoginHint(t){this.parameters.set(kR,encodeURIComponent(t))}addCcsUpn(t){this.parameters.set(nn.CCS_HEADER,encodeURIComponent(`UPN:${t}`))}addCcsOid(t){this.parameters.set(nn.CCS_HEADER,encodeURIComponent(`Oid:${t.uid}@${t.utid}`))}addSid(t){this.parameters.set(GR,encodeURIComponent(t))}addClaims(t,e){const o=this.addClientCapabilitiesToClaims(t,e);Ci.validateClaims(o),this.parameters.set(aR,encodeURIComponent(o))}addCorrelationId(t){this.parameters.set(mR,encodeURIComponent(t))}addLibraryInfo(t){this.parameters.set(yR,t.sku),this.parameters.set(CR,t.version),t.os&&this.parameters.set(wR,t.os),t.cpu&&this.parameters.set(_R,t.cpu)}addApplicationTelemetry(t){t!=null&&t.appName&&this.parameters.set(TR,t.appName),t!=null&&t.appVersion&&this.parameters.set(bR,t.appVersion)}addPrompt(t){Ci.validatePrompt(t),this.parameters.set(`${pR}`,encodeURIComponent(t))}addState(t){t&&this.parameters.set(uR,encodeURIComponent(t))}addNonce(t){this.parameters.set(dR,encodeURIComponent(t))}addCodeChallengeParams(t,e){if(Ci.validateCodeChallengeParams(t,e),t&&e)this.parameters.set(fR,encodeURIComponent(t)),this.parameters.set(gR,encodeURIComponent(e));else throw Ke(lp)}addAuthorizationCode(t){this.parameters.set(hR,encodeURIComponent(t))}addDeviceCode(t){this.parameters.set(PR,encodeURIComponent(t))}addRefreshToken(t){this.parameters.set(cR,encodeURIComponent(t))}addCodeVerifier(t){this.parameters.set(vR,encodeURIComponent(t))}addClientSecret(t){this.parameters.set(IR,encodeURIComponent(t))}addClientAssertion(t){t&&this.parameters.set(DR,encodeURIComponent(t))}addClientAssertionType(t){t&&this.parameters.set(MR,encodeURIComponent(t))}addOboAssertion(t){this.parameters.set(LR,encodeURIComponent(t))}addRequestTokenUse(t){this.parameters.set(xR,encodeURIComponent(t))}addGrantType(t){this.parameters.set(sR,encodeURIComponent(t))}addClientInfo(){this.parameters.set(pE,"1")}addExtraQueryParameters(t){const e=Ci.sanitizeEQParams(t,this.parameters);Object.keys(e).forEach(o=>{this.parameters.set(o,t[o])})}addClientCapabilitiesToClaims(t,e){let o;if(!t)o={};else try{o=JSON.parse(t)}catch{throw Ke(ap)}return e&&e.length>0&&(o.hasOwnProperty(wa.ACCESS_TOKEN)||(o[wa.ACCESS_TOKEN]={}),o[wa.ACCESS_TOKEN][wa.XMS_CC]={values:e}),JSON.stringify(o)}addUsername(t){this.parameters.set(jh.username,encodeURIComponent(t))}addPassword(t){this.parameters.set(jh.password,encodeURIComponent(t))}addPopToken(t){t&&(this.parameters.set(Zh,$e.POP),this.parameters.set(Jh,encodeURIComponent(t)))}addSshJwk(t){t&&(this.parameters.set(Zh,$e.SSH),this.parameters.set(Jh,encodeURIComponent(t)))}addServerTelemetry(t){this.parameters.set(SR,t.generateCurrentRequestHeaderValue()),this.parameters.set(ER,t.generateLastRequestHeaderValue())}addThrottling(){this.parameters.set(RR,Ns.X_MS_LIB_CAPABILITY_VALUE)}addLogoutHint(t){this.parameters.set(NR,encodeURIComponent(t))}createQueryString(){const t=new Array;return this.parameters.forEach((e,o)=>{t.push(`${o}=${e}`)}),t.join("&")}}/*! @azure/msal-common v14.5.0 2023-12-01 */class xi{static async createDiscoveredInstance(t,e,o,n,i,s,a){s==null||s.addQueueMeasurement(G.AuthorityFactoryCreateDiscoveredInstance,a);const l=Ft.transformCIAMAuthority(ym(t)),c=xi.createInstance(l,e,o,n,i,s,a);try{return await re(c.resolveEndpointsAsync.bind(c),G.AuthorityResolveEndpointsAsync,i,s,a)(),c}catch{throw J(wn)}}static createInstance(t,e,o,n,i,s,a){if(!t)throw Ke(sp);return new Ft(t,e,o,n,i,s,a)}}/*! @azure/msal-common v14.5.0 2023-12-01 */class fp{constructor(t,e){this.config=tR(t),this.logger=new Xl(this.config.loggerOptions,Zv,np),this.cryptoUtils=this.config.cryptoInterface,this.cacheManager=this.config.storageInterface,this.networkClient=this.config.networkInterface,this.networkManager=new nR(this.networkClient,this.cacheManager),this.serverTelemetryManager=this.config.serverTelemetryManager,this.authority=this.config.authOptions.authority,this.performanceClient=e}createTokenRequestHeaders(t){const e={};if(e[nn.CONTENT_TYPE]=B.URL_FORM_CONTENT_TYPE,!this.config.systemOptions.preventCorsPreflight&&t)switch(t.type){case po.HOME_ACCOUNT_ID:try{const o=ur(t.credential);e[nn.CCS_HEADER]=`Oid:${o.uid}@${o.utid}`}catch(o){this.logger.verbose("Could not parse home account ID for CCS Header: "+o)}break;case po.UPN:e[nn.CCS_HEADER]=`UPN: ${t.credential}`;break}return e}async executePostToTokenEndpoint(t,e,o,n,i,s){var l,c,u,d;s&&((l=this.performanceClient)==null||l.addQueueMeasurement(s,i));const a=await this.networkManager.sendPostRequest(n,t,{body:e,headers:o});return(d=this.performanceClient)==null||d.addFields({refreshTokenSize:((c=a.body.refresh_token)==null?void 0:c.length)||0,httpVerToken:((u=a.headers)==null?void 0:u[nn.X_MS_HTTP_VERSION])||""},i),this.config.serverTelemetryManager&&a.status<500&&a.status!==429&&this.config.serverTelemetryManager.clearTelemetryCache(),a}async updateAuthority(t,e){var i;(i=this.performanceClient)==null||i.addQueueMeasurement(G.UpdateTokenEndpointAuthority,e);const o=`https://${t}/${this.authority.tenant}/`,n=await xi.createDiscoveredInstance(o,this.networkClient,this.cacheManager,this.authority.options,this.logger,this.performanceClient,e);this.authority=n}createTokenQueryParameters(t){const e=new Gs;return t.tokenQueryParameters&&e.addExtraQueryParameters(t.tokenQueryParameters),e.createQueryString()}}/*! @azure/msal-common v14.5.0 2023-12-01 */const ul="no_tokens_found",wm="native_account_unavailable",VR="interaction_required",BR="consent_required",UR="login_required";/*! @azure/msal-common v14.5.0 2023-12-01 */const tf=[VR,BR,UR],jR=["message_only","additional_action","basic_action","user_password_expired","consent_required"],WR={[ul]:"No refresh token found in the cache. Please sign-in.",[wm]:"The requested account is not available in the native broker. It may have been deleted or logged out. Please sign-in again using an interactive API."};class ln extends et{constructor(t,e,o,n,i,s,a){super(t,e,o),Object.setPrototypeOf(this,ln.prototype),this.timestamp=n||B.EMPTY_STRING,this.traceId=i||B.EMPTY_STRING,this.correlationId=s||B.EMPTY_STRING,this.claims=a||B.EMPTY_STRING,this.name="InteractionRequiredAuthError"}}function of(r,t,e){const o=!!r&&tf.indexOf(r)>-1,n=!!e&&jR.indexOf(e)>-1,i=!!t&&tf.some(s=>t.indexOf(s)>-1);return o||i||n}function _m(r){return new ln(r,WR[r])}/*! @azure/msal-common v14.5.0 2023-12-01 */class vr{constructor(t,e,o,n,i){this.account=t||null,this.idToken=e||null,this.accessToken=o||null,this.refreshToken=n||null,this.appMetadata=i||null}}/*! @azure/msal-common v14.5.0 2023-12-01 */class Bo{static setRequestState(t,e,o){const n=Bo.generateLibraryState(t,o);return e?`${n}${B.RESOURCE_DELIM}${e}`:n}static generateLibraryState(t,e){if(!t)throw J(od);const o={id:t.createNewGuid()};e&&(o.meta=e);const n=JSON.stringify(o);return t.base64Encode(n)}static parseRequestState(t,e){if(!t)throw J(od);if(!e)throw J(br);try{const o=e.split(B.RESOURCE_DELIM),n=o[0],i=o.length>1?o.slice(1).join(B.RESOURCE_DELIM):B.EMPTY_STRING,s=t.base64Decode(n),a=JSON.parse(s);return{userRequestState:i||B.EMPTY_STRING,libraryState:a}}catch{throw J(br)}}}/*! @azure/msal-common v14.5.0 2023-12-01 */const zR={SW:"sw",UHW:"uhw"};class Or{constructor(t,e){this.cryptoUtils=t,this.performanceClient=e}async generateCnf(t,e){var i;(i=this.performanceClient)==null||i.addQueueMeasurement(G.PopTokenGenerateCnf,t.correlationId);const o=await re(this.generateKid.bind(this),G.PopTokenGenerateCnf,e,this.performanceClient,t.correlationId)(t),n=this.cryptoUtils.base64Encode(JSON.stringify(o));return{kid:o.kid,reqCnfString:n,reqCnfHash:await this.cryptoUtils.hashString(n)}}async generateKid(t){var o;return(o=this.performanceClient)==null||o.addQueueMeasurement(G.PopTokenGenerateKid,t.correlationId),{kid:await this.cryptoUtils.getPublicKeyThumbprint(t),xms_ksl:zR.SW}}async signPopToken(t,e,o){return this.signPayload(t,e,o)}async signPayload(t,e,o,n){const{resourceRequestMethod:i,resourceRequestUri:s,shrClaims:a,shrNonce:l,shrOptions:c}=o,u=s?new He(s):void 0,d=u==null?void 0:u.getUrlComponents();return this.cryptoUtils.signJwt({at:t,ts:jt.nowSeconds(),m:i==null?void 0:i.toUpperCase(),u:d==null?void 0:d.HostNameAndPort,nonce:l||this.cryptoUtils.createNewGuid(),p:d==null?void 0:d.AbsolutePath,q:d!=null&&d.QueryString?[[],d.QueryString]:void 0,client_claims:a||void 0,...n},e,c,o.correlationId)}}/*! @azure/msal-common v14.5.0 2023-12-01 */class Pr{generateAppMetadataKey(){return Pr.generateAppMetadataCacheKey(this.environment,this.clientId)}static generateAppMetadataCacheKey(t,e){return[Ju,t,e].join(Nt.CACHE_KEY_SEPARATOR).toLowerCase()}static createAppMetadataEntity(t,e,o){const n=new Pr;return n.clientId=t,n.environment=e,o&&(n.familyId=o),n}static isAppMetadataEntity(t,e){return e?t.indexOf(Ju)===0&&e.hasOwnProperty("clientId")&&e.hasOwnProperty("environment"):!1}}/*! @azure/msal-common v14.5.0 2023-12-01 */class $R{constructor(t,e){this.cache=t,this.hasChanged=e}get cacheHasChanged(){return this.hasChanged}get tokenCache(){return this.cache}}/*! @azure/msal-common v14.5.0 2023-12-01 */class Fi{constructor(t,e,o,n,i,s,a){this.clientId=t,this.cacheStorage=e,this.cryptoObj=o,this.logger=n,this.serializableCache=i,this.persistencePlugin=s,this.performanceClient=a}validateServerAuthorizationCodeResponse(t,e){if(!t.state||!e)throw t.state?J(rl,"Cached State"):J(rl,"Server State");let o,n;try{o=decodeURIComponent(t.state)}catch{throw J(br,t.state)}try{n=decodeURIComponent(e)}catch{throw J(br,t.state)}if(o!==n)throw J(Vv);if(t.error||t.error_description||t.suberror)throw of(t.error,t.error_description,t.suberror)?new ln(t.error||"",t.error_description,t.suberror,t.timestamp||"",t.trace_id||"",t.correlation_id||"",t.claims||""):new oi(t.error||"",t.error_description,t.suberror)}validateTokenResponse(t,e){if(t.error||t.error_description||t.suberror){const o=`${t.error_codes} - [${t.timestamp}]: ${t.error_description} - Correlation ID: ${t.correlation_id} - Trace ID: ${t.trace_id}`,n=new oi(t.error,o,t.suberror);if(e&&t.status&&t.status>=Ca.SERVER_ERROR_RANGE_START&&t.status<=Ca.SERVER_ERROR_RANGE_END){this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently unavailable and the access token is unable to be refreshed.
${n}`);return}else if(e&&t.status&&t.status>=Ca.CLIENT_ERROR_RANGE_START&&t.status<=Ca.CLIENT_ERROR_RANGE_END){this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently available but is unable to refresh the access token.
${n}`);return}throw of(t.error,t.error_description,t.suberror)?new ln(t.error,t.error_description,t.suberror,t.timestamp||B.EMPTY_STRING,t.trace_id||B.EMPTY_STRING,t.correlation_id||B.EMPTY_STRING,t.claims||B.EMPTY_STRING):n}}async handleServerTokenResponse(t,e,o,n,i,s,a,l,c){var f;(f=this.performanceClient)==null||f.addQueueMeasurement(G.HandleServerTokenResponse,t.correlation_id);let u;if(t.id_token){if(u=Yi(t.id_token||B.EMPTY_STRING,this.cryptoObj.base64Decode),i&&i.nonce&&u.nonce!==i.nonce)throw J(Bv);if(n.maxAge||n.maxAge===0){const g=u.auth_time;if(!g)throw J(Jd);Jv(g,n.maxAge)}}this.homeAccountIdentifier=mt.generateHomeAccountId(t.client_info||B.EMPTY_STRING,e.authorityType,this.logger,this.cryptoObj,u);let d;i&&i.state&&(d=Bo.parseRequestState(this.cryptoObj,i.state)),t.key_id=t.key_id||n.sshKid||void 0;const p=this.generateCacheRecord(t,e,o,n,u,s,i);let h;try{if(this.persistencePlugin&&this.serializableCache&&(this.logger.verbose("Persistence enabled, calling beforeCacheAccess"),h=new $R(this.serializableCache,!0),await this.persistencePlugin.beforeCacheAccess(h)),a&&!l&&p.account){const g=p.account.generateAccountKey();if(!this.cacheStorage.getAccount(g,this.logger))return this.logger.warning("Account used to refresh tokens not in persistence, refreshed tokens will not be stored in the cache"),await Fi.generateAuthenticationResult(this.cryptoObj,e,p,!1,n,u,d,void 0,c)}await this.cacheStorage.saveCacheRecord(p,n.storeInCache)}finally{this.persistencePlugin&&this.serializableCache&&h&&(this.logger.verbose("Persistence enabled, calling afterCacheAccess"),await this.persistencePlugin.afterCacheAccess(h))}return Fi.generateAuthenticationResult(this.cryptoObj,e,p,!1,n,u,d,t,c)}generateCacheRecord(t,e,o,n,i,s,a){const l=e.getPreferredCache();if(!l)throw J(tp);const c=fm(i);let u,d;t.id_token&&i&&(u=Zl(this.homeAccountIdentifier,l,t.id_token,this.clientId,c||""),d=gp(this.cacheStorage,e,this.homeAccountIdentifier,i,this.cryptoObj.base64Decode,t.client_info,c,a,void 0,this.logger));let p=null;if(t.access_token){const g=t.scope?dt.fromString(t.scope):new dt(n.scopes||[]),_=(typeof t.expires_in=="string"?parseInt(t.expires_in,10):t.expires_in)||0,C=(typeof t.ext_expires_in=="string"?parseInt(t.ext_expires_in,10):t.ext_expires_in)||0,E=(typeof t.refresh_in=="string"?parseInt(t.refresh_in,10):t.refresh_in)||void 0,T=o+_,P=T+C,A=E&&E>0?o+E:void 0;p=Jl(this.homeAccountIdentifier,l,t.access_token,this.clientId,c||e.tenant,g.printScopes(),T,P,this.cryptoObj.base64Decode,A,t.token_type,s,t.key_id,n.claims,n.requestedClaimsHash)}let h=null;t.refresh_token&&(h=em(this.homeAccountIdentifier,l,t.refresh_token,this.clientId,t.foci,s));let f=null;return t.foci&&(f=Pr.createAppMetadataEntity(this.clientId,l,t.foci)),new vr(d,u,p,h,f)}static async generateAuthenticationResult(t,e,o,n,i,s,a,l,c){var T,P,A,b;let u=B.EMPTY_STRING,d=[],p=null,h,f,g=B.EMPTY_STRING;if(o.accessToken){if(o.accessToken.tokenType===$e.POP){const I=new Or(t),{secret:F,keyId:U}=o.accessToken;if(!U)throw J(op);u=await I.signPopToken(F,U,i)}else u=o.accessToken.secret;d=dt.fromString(o.accessToken.target).asArray(),p=new Date(Number(o.accessToken.expiresOn)*1e3),h=new Date(Number(o.accessToken.extendedExpiresOn)*1e3),o.accessToken.refreshOn&&(f=new Date(Number(o.accessToken.refreshOn)*1e3))}o.appMetadata&&(g=o.appMetadata.familyId===xs?xs:"");const _=(s==null?void 0:s.oid)||(s==null?void 0:s.sub)||"",C=(s==null?void 0:s.tid)||"";l!=null&&l.spa_accountid&&o.account&&(o.account.nativeAccountId=l==null?void 0:l.spa_accountid);const E=o.account?pp(o.account.getAccountInfo(),void 0,s):null;return{authority:e.canonicalAuthority,uniqueId:_,tenantId:C,scopes:d,account:E,idToken:((T=o==null?void 0:o.idToken)==null?void 0:T.secret)||"",idTokenClaims:s||{},accessToken:u,fromCache:n,expiresOn:p,extExpiresOn:h,refreshOn:f,correlationId:i.correlationId,requestId:c||B.EMPTY_STRING,familyId:g,tokenType:((P=o.accessToken)==null?void 0:P.tokenType)||B.EMPTY_STRING,state:a?a.userRequestState:B.EMPTY_STRING,cloudGraphHostName:((A=o.account)==null?void 0:A.cloudGraphHostName)||B.EMPTY_STRING,msGraphHost:((b=o.account)==null?void 0:b.msGraphHost)||B.EMPTY_STRING,code:l==null?void 0:l.spa_code,fromNativeBroker:!1}}}function gp(r,t,e,o,n,i,s,a,l,c){c==null||c.verbose("setCachedAccount called");const d=r.getAccountKeys().find(g=>g.startsWith(e));let p=null;d&&(p=r.getAccount(d,c));const h=p||mt.createAccount({homeAccountId:e,idTokenClaims:o,clientInfo:i,cloudGraphHostName:a==null?void 0:a.cloud_graph_host_name,msGraphHost:a==null?void 0:a.msgraph_host,nativeAccountId:l},t,n),f=h.tenantProfiles||[];if(s&&!f.find(g=>g.tenantId===s)){const g=dp(e,o);f.push(g)}return h.tenantProfiles=f,h}/*! @azure/msal-common v14.5.0 2023-12-01 */class Sm extends fp{constructor(t,e){var o;super(t,e),this.includeRedirectUri=!0,this.oidcDefaultScopes=(o=this.config.authOptions.authority.options.OIDCOptions)==null?void 0:o.defaultScopes}async getAuthCodeUrl(t){var o;(o=this.performanceClient)==null||o.addQueueMeasurement(G.GetAuthCodeUrl,t.correlationId);const e=await re(this.createAuthCodeUrlQueryString.bind(this),G.AuthClientCreateQueryString,this.logger,this.performanceClient,t.correlationId)(t);return He.appendQueryString(this.authority.authorizationEndpoint,e)}async acquireToken(t,e){var a,l;if((a=this.performanceClient)==null||a.addQueueMeasurement(G.AuthClientAcquireToken,t.correlationId),!t.code)throw J(Wv);const o=jt.nowSeconds(),n=await re(this.executeTokenRequest.bind(this),G.AuthClientExecuteTokenRequest,this.logger,this.performanceClient,t.correlationId)(this.authority,t),i=(l=n.headers)==null?void 0:l[nn.X_MS_REQUEST_ID],s=new Fi(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin,this.performanceClient);return s.validateTokenResponse(n.body),re(s.handleServerTokenResponse.bind(s),G.HandleServerTokenResponse,this.logger,this.performanceClient,t.correlationId)(n.body,this.authority,o,t,e,void 0,void 0,void 0,i)}handleFragmentResponse(t,e){if(new Fi(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,null,null).validateServerAuthorizationCodeResponse(t,e),!t.code)throw J(qv);return t}getLogoutUri(t){if(!t)throw Ke(sm);const e=this.createLogoutUrlQueryString(t);return He.appendQueryString(this.authority.endSessionEndpoint,e)}async executeTokenRequest(t,e){var c,u;(c=this.performanceClient)==null||c.addQueueMeasurement(G.AuthClientExecuteTokenRequest,e.correlationId);const o=this.createTokenQueryParameters(e),n=He.appendQueryString(t.tokenEndpoint,o),i=await re(this.createTokenRequestBody.bind(this),G.AuthClientCreateTokenRequestBody,this.logger,this.performanceClient,e.correlationId)(e);let s;if(e.clientInfo)try{const d=al(e.clientInfo,this.cryptoUtils.base64Decode);s={credential:`${d.uid}${Nt.CLIENT_INFO_SEPARATOR}${d.utid}`,type:po.HOME_ACCOUNT_ID}}catch(d){this.logger.verbose("Could not parse client info for CCS Header: "+d)}const a=this.createTokenRequestHeaders(s||e.ccsCredential),l={clientId:((u=e.tokenBodyParameters)==null?void 0:u.clientId)||this.config.authOptions.clientId,authority:t.canonicalAuthority,scopes:e.scopes,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid};return re(this.executePostToTokenEndpoint.bind(this),G.AuthorizationCodeClientExecutePostToTokenEndpoint,this.logger,this.performanceClient,e.correlationId)(n,i,a,l,e.correlationId,G.AuthorizationCodeClientExecutePostToTokenEndpoint)}async createTokenRequestBody(t){var i,s;(i=this.performanceClient)==null||i.addQueueMeasurement(G.AuthClientCreateTokenRequestBody,t.correlationId);const e=new Gs;if(e.addClientId(((s=t.tokenBodyParameters)==null?void 0:s[Ar])||this.config.authOptions.clientId),this.includeRedirectUri?e.addRedirectUri(t.redirectUri):Ci.validateRedirectUri(t.redirectUri),e.addScopes(t.scopes,!0,this.oidcDefaultScopes),e.addAuthorizationCode(t.code),e.addLibraryInfo(this.config.libraryInfo),e.addApplicationTelemetry(this.config.telemetry.application),e.addThrottling(),this.serverTelemetryManager&&!ad(this.config)&&e.addServerTelemetry(this.serverTelemetryManager),t.codeVerifier&&e.addCodeVerifier(t.codeVerifier),this.config.clientCredentials.clientSecret&&e.addClientSecret(this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){const a=this.config.clientCredentials.clientAssertion;e.addClientAssertion(a.assertion),e.addClientAssertionType(a.assertionType)}if(e.addGrantType(Lv.AUTHORIZATION_CODE_GRANT),e.addClientInfo(),t.authenticationScheme===$e.POP){const a=new Or(this.cryptoUtils,this.performanceClient),l=await re(a.generateCnf.bind(a),G.PopTokenGenerateCnf,this.logger,this.performanceClient,t.correlationId)(t,this.logger);e.addPopToken(l.reqCnfString)}else if(t.authenticationScheme===$e.SSH)if(t.sshJwk)e.addSshJwk(t.sshJwk);else throw Ke(ec);const o=t.correlationId||this.config.cryptoInterface.createNewGuid();e.addCorrelationId(o),(!Vo.isEmptyObj(t.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&e.addClaims(t.claims,this.config.authOptions.clientCapabilities);let n;if(t.clientInfo)try{const a=al(t.clientInfo,this.cryptoUtils.base64Decode);n={credential:`${a.uid}${Nt.CLIENT_INFO_SEPARATOR}${a.utid}`,type:po.HOME_ACCOUNT_ID}}catch(a){this.logger.verbose("Could not parse client info for CCS Header: "+a)}else n=t.ccsCredential;if(this.config.systemOptions.preventCorsPreflight&&n)switch(n.type){case po.HOME_ACCOUNT_ID:try{const a=ur(n.credential);e.addCcsOid(a)}catch(a){this.logger.verbose("Could not parse home account ID for CCS Header: "+a)}break;case po.UPN:e.addCcsUpn(n.credential);break}return t.tokenBodyParameters&&e.addExtraQueryParameters(t.tokenBodyParameters),t.enableSpaAuthorizationCode&&(!t.tokenBodyParameters||!t.tokenBodyParameters[ef])&&e.addExtraQueryParameters({[ef]:"1"}),e.createQueryString()}async createAuthCodeUrlQueryString(t){var i,s;(i=this.performanceClient)==null||i.addQueueMeasurement(G.AuthClientCreateQueryString,t.correlationId);const e=new Gs;e.addClientId(((s=t.extraQueryParameters)==null?void 0:s[Ar])||this.config.authOptions.clientId);const o=[...t.scopes||[],...t.extraScopesToConsent||[]];e.addScopes(o,!0,this.oidcDefaultScopes),e.addRedirectUri(t.redirectUri);const n=t.correlationId||this.config.cryptoInterface.createNewGuid();if(e.addCorrelationId(n),e.addResponseMode(t.responseMode),e.addResponseTypeCode(),e.addLibraryInfo(this.config.libraryInfo),ad(this.config)||e.addApplicationTelemetry(this.config.telemetry.application),e.addClientInfo(),t.codeChallenge&&t.codeChallengeMethod&&e.addCodeChallengeParams(t.codeChallenge,t.codeChallengeMethod),t.prompt&&e.addPrompt(t.prompt),t.domainHint&&e.addDomainHint(t.domainHint),t.prompt!==kt.SELECT_ACCOUNT)if(t.sid&&t.prompt===kt.NONE)this.logger.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from request"),e.addSid(t.sid);else if(t.account){const a=this.extractAccountSid(t.account),l=this.extractLoginHint(t.account);if(l){this.logger.verbose("createAuthCodeUrlQueryString: login_hint claim present on account"),e.addLoginHint(l);try{const c=ur(t.account.homeAccountId);e.addCcsOid(c)}catch{this.logger.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(a&&t.prompt===kt.NONE){this.logger.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from account"),e.addSid(a);try{const c=ur(t.account.homeAccountId);e.addCcsOid(c)}catch{this.logger.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(t.loginHint)this.logger.verbose("createAuthCodeUrlQueryString: Adding login_hint from request"),e.addLoginHint(t.loginHint),e.addCcsUpn(t.loginHint);else if(t.account.username){this.logger.verbose("createAuthCodeUrlQueryString: Adding login_hint from account"),e.addLoginHint(t.account.username);try{const c=ur(t.account.homeAccountId);e.addCcsOid(c)}catch{this.logger.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}}else t.loginHint&&(this.logger.verbose("createAuthCodeUrlQueryString: No account, adding login_hint from request"),e.addLoginHint(t.loginHint),e.addCcsUpn(t.loginHint));else this.logger.verbose("createAuthCodeUrlQueryString: Prompt is select_account, ignoring account hints");if(t.nonce&&e.addNonce(t.nonce),t.state&&e.addState(t.state),(t.claims||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&e.addClaims(t.claims,this.config.authOptions.clientCapabilities),t.extraQueryParameters&&e.addExtraQueryParameters(t.extraQueryParameters),t.nativeBroker&&(e.addNativeBroker(),t.authenticationScheme===$e.POP)){const a=new Or(this.cryptoUtils),l=await re(a.generateCnf.bind(a),G.PopTokenGenerateCnf,this.logger,this.performanceClient,t.correlationId)(t,this.logger);e.addPopToken(l.reqCnfHash)}return e.createQueryString()}createLogoutUrlQueryString(t){const e=new Gs;return t.postLogoutRedirectUri&&e.addPostLogoutRedirectUri(t.postLogoutRedirectUri),t.correlationId&&e.addCorrelationId(t.correlationId),t.idTokenHint&&e.addIdTokenHint(t.idTokenHint),t.state&&e.addState(t.state),t.logoutHint&&e.addLogoutHint(t.logoutHint),t.extraQueryParameters&&e.addExtraQueryParameters(t.extraQueryParameters),e.createQueryString()}extractAccountSid(t){var e;return((e=t.idTokenClaims)==null?void 0:e.sid)||null}extractLoginHint(t){var e;return((e=t.idTokenClaims)==null?void 0:e.login_hint)||null}}/*! @azure/msal-common v14.5.0 2023-12-01 */class ld extends fp{constructor(t,e){super(t,e)}async acquireToken(t){var s,a;(s=this.performanceClient)==null||s.addQueueMeasurement(G.RefreshTokenClientAcquireToken,t.correlationId);const e=jt.nowSeconds(),o=await re(this.executeTokenRequest.bind(this),G.RefreshTokenClientExecuteTokenRequest,this.logger,this.performanceClient,t.correlationId)(t,this.authority),n=(a=o.headers)==null?void 0:a[nn.X_MS_REQUEST_ID],i=new Fi(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return i.validateTokenResponse(o.body),re(i.handleServerTokenResponse.bind(i),G.HandleServerTokenResponse,this.logger,this.performanceClient,t.correlationId)(o.body,this.authority,e,t,void 0,void 0,!0,t.forceCache,n)}async acquireTokenByRefreshToken(t){var o;if(!t)throw Ke(rm);if((o=this.performanceClient)==null||o.addQueueMeasurement(G.RefreshTokenClientAcquireTokenByRefreshToken,t.correlationId),!t.account)throw J(ep);if(this.cacheManager.isAppMetadataFOCI(t.account.environment))try{return await re(this.acquireTokenWithCachedRefreshToken.bind(this),G.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,t.correlationId)(t,!0)}catch(n){const i=n instanceof ln&&n.errorCode===ul,s=n instanceof oi&&n.errorCode===Uh.INVALID_GRANT_ERROR&&n.subError===Uh.CLIENT_MISMATCH_ERROR;if(i||s)return re(this.acquireTokenWithCachedRefreshToken.bind(this),G.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,t.correlationId)(t,!1);throw n}return re(this.acquireTokenWithCachedRefreshToken.bind(this),G.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,t.correlationId)(t,!1)}async acquireTokenWithCachedRefreshToken(t,e){var i;(i=this.performanceClient)==null||i.addQueueMeasurement(G.RefreshTokenClientAcquireTokenWithCachedRefreshToken,t.correlationId);const o=qi(this.cacheManager.getRefreshToken.bind(this.cacheManager),G.CacheManagerGetRefreshToken,this.logger,this.performanceClient,t.correlationId)(t.account,e,void 0,this.performanceClient,t.correlationId);if(!o)throw _m(ul);const n={...t,refreshToken:o.secret,authenticationScheme:t.authenticationScheme||$e.BEARER,ccsCredential:{credential:t.account.homeAccountId,type:po.HOME_ACCOUNT_ID}};return re(this.acquireToken.bind(this),G.RefreshTokenClientAcquireToken,this.logger,this.performanceClient,t.correlationId)(n)}async executeTokenRequest(t,e){var l,c;(l=this.performanceClient)==null||l.addQueueMeasurement(G.RefreshTokenClientExecuteTokenRequest,t.correlationId);const o=this.createTokenQueryParameters(t),n=He.appendQueryString(e.tokenEndpoint,o),i=await re(this.createTokenRequestBody.bind(this),G.RefreshTokenClientCreateTokenRequestBody,this.logger,this.performanceClient,t.correlationId)(t),s=this.createTokenRequestHeaders(t.ccsCredential),a={clientId:((c=t.tokenBodyParameters)==null?void 0:c.clientId)||this.config.authOptions.clientId,authority:e.canonicalAuthority,scopes:t.scopes,claims:t.claims,authenticationScheme:t.authenticationScheme,resourceRequestMethod:t.resourceRequestMethod,resourceRequestUri:t.resourceRequestUri,shrClaims:t.shrClaims,sshKid:t.sshKid};return re(this.executePostToTokenEndpoint.bind(this),G.RefreshTokenClientExecutePostToTokenEndpoint,this.logger,this.performanceClient,t.correlationId)(n,i,s,a,t.correlationId,G.RefreshTokenClientExecutePostToTokenEndpoint)}async createTokenRequestBody(t){var n,i,s;(n=this.performanceClient)==null||n.addQueueMeasurement(G.RefreshTokenClientCreateTokenRequestBody,t.correlationId);const e=t.correlationId,o=new Gs;if(o.addClientId(((i=t.tokenBodyParameters)==null?void 0:i[Ar])||this.config.authOptions.clientId),t.redirectUri&&o.addRedirectUri(t.redirectUri),o.addScopes(t.scopes,!0,(s=this.config.authOptions.authority.options.OIDCOptions)==null?void 0:s.defaultScopes),o.addGrantType(Lv.REFRESH_TOKEN_GRANT),o.addClientInfo(),o.addLibraryInfo(this.config.libraryInfo),o.addApplicationTelemetry(this.config.telemetry.application),o.addThrottling(),this.serverTelemetryManager&&!ad(this.config)&&o.addServerTelemetry(this.serverTelemetryManager),o.addCorrelationId(e),o.addRefreshToken(t.refreshToken),this.config.clientCredentials.clientSecret&&o.addClientSecret(this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){const a=this.config.clientCredentials.clientAssertion;o.addClientAssertion(a.assertion),o.addClientAssertionType(a.assertionType)}if(t.authenticationScheme===$e.POP){const a=new Or(this.cryptoUtils,this.performanceClient),l=await re(a.generateCnf.bind(a),G.PopTokenGenerateCnf,this.logger,this.performanceClient,t.correlationId)(t,this.logger);o.addPopToken(l.reqCnfString)}else if(t.authenticationScheme===$e.SSH)if(t.sshJwk)o.addSshJwk(t.sshJwk);else throw Ke(ec);if((!Vo.isEmptyObj(t.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&o.addClaims(t.claims,this.config.authOptions.clientCapabilities),this.config.systemOptions.preventCorsPreflight&&t.ccsCredential)switch(t.ccsCredential.type){case po.HOME_ACCOUNT_ID:try{const a=ur(t.ccsCredential.credential);o.addCcsOid(a)}catch(a){this.logger.verbose("Could not parse home account ID for CCS Header: "+a)}break;case po.UPN:o.addCcsUpn(t.ccsCredential.credential);break}return t.tokenBodyParameters&&o.addExtraQueryParameters(t.tokenBodyParameters),o.createQueryString()}}/*! @azure/msal-common v14.5.0 2023-12-01 */class KR extends fp{constructor(t,e){super(t,e)}async acquireToken(t){try{const[e,o]=await this.acquireCachedToken(t);return o===zn.PROACTIVELY_REFRESHED&&(this.logger.info("SilentFlowClient:acquireCachedToken - Cached access token's refreshOn property has been exceeded'. It's not expired, but must be refreshed."),new ld(this.config,this.performanceClient).acquireTokenByRefreshToken(t).catch(()=>{})),e}catch(e){if(e instanceof Ql&&e.errorCode===Xn)return new ld(this.config,this.performanceClient).acquireTokenByRefreshToken(t);throw e}}async acquireCachedToken(t){var i;(i=this.performanceClient)==null||i.addQueueMeasurement(G.SilentFlowClientAcquireCachedToken,t.correlationId);let e=zn.NOT_APPLICABLE;if(t.forceRefresh||!this.config.cacheOptions.claimsBasedCachingEnabled&&!Vo.isEmptyObj(t.claims))throw this.setCacheOutcome(zn.FORCE_REFRESH_OR_CLAIMS,t.correlationId),J(Xn);if(!t.account)throw J(ep);const o=t.authority||this.authority.getPreferredCache(),n=this.cacheManager.readCacheRecord(t.account,t,o,this.performanceClient,t.correlationId);if(n.accessToken){if(jt.wasClockTurnedBack(n.accessToken.cachedAt)||jt.isTokenExpired(n.accessToken.expiresOn,this.config.systemOptions.tokenRenewalOffsetSeconds))throw this.setCacheOutcome(zn.CACHED_ACCESS_TOKEN_EXPIRED,t.correlationId),J(Xn);n.accessToken.refreshOn&&jt.isTokenExpired(n.accessToken.refreshOn,0)&&(e=zn.PROACTIVELY_REFRESHED)}else throw this.setCacheOutcome(zn.NO_CACHED_ACCESS_TOKEN,t.correlationId),J(Xn);return this.setCacheOutcome(e,t.correlationId),this.config.serverTelemetryManager&&this.config.serverTelemetryManager.incrementCacheHits(),[await re(this.generateResultFromCacheRecord.bind(this),G.SilentFlowClientGenerateResultFromCacheRecord,this.logger,this.performanceClient,t.correlationId)(n,t),e]}setCacheOutcome(t,e){var o,n;(o=this.serverTelemetryManager)==null||o.setCacheOutcome(t),(n=this.performanceClient)==null||n.addFields({cacheOutcome:t},e),t!==zn.NOT_APPLICABLE&&this.logger.info(`Token refresh is required due to cache outcome: ${t}`)}async generateResultFromCacheRecord(t,e){var n;(n=this.performanceClient)==null||n.addQueueMeasurement(G.SilentFlowClientGenerateResultFromCacheRecord,e.correlationId);let o;if(t.idToken&&(o=Yi(t.idToken.secret,this.config.cryptoInterface.base64Decode)),e.maxAge||e.maxAge===0){const i=o==null?void 0:o.auth_time;if(!i)throw J(Jd);Jv(i,e.maxAge)}return Fi.generateAuthenticationResult(this.cryptoUtils,this.authority,t,!0,e,o)}}/*! @azure/msal-common v14.5.0 2023-12-01 */class nf{static isThrottlingEntity(t,e){let o=!1;t&&(o=t.indexOf(Ns.THROTTLING_PREFIX)===0);let n=!0;return e&&(n=e.hasOwnProperty("throttleTime")),o&&n}}/*! @azure/msal-common v14.5.0 2023-12-01 */const YR={sendGetRequestAsync:()=>Promise.reject(J(De)),sendPostRequestAsync:()=>Promise.reject(J(De))};/*! @azure/msal-common v14.5.0 2023-12-01 */const Em="missing_kid_error",Rm="missing_alg_error";/*! @azure/msal-common v14.5.0 2023-12-01 */const qR={[Em]:"The JOSE Header for the requested JWT, JWS or JWK object requires a keyId to be configured as the 'kid' header claim. No 'kid' value was provided.",[Rm]:"The JOSE Header for the requested JWT, JWS or JWK object requires an algorithm to be specified as the 'alg' header claim. No 'alg' value was provided."};class vp extends et{constructor(t,e){super(t,e),this.name="JoseHeaderError",Object.setPrototypeOf(this,vp.prototype)}}function rf(r){return new vp(r,qR[r])}/*! @azure/msal-common v14.5.0 2023-12-01 */class mp{constructor(t){this.typ=t.typ,this.alg=t.alg,this.kid=t.kid}static getShrHeaderString(t){if(!t.kid)throw rf(Em);if(!t.alg)throw rf(Rm);const e=new mp({typ:t.typ||hE.Pop,kid:t.kid,alg:t.alg});return JSON.stringify(e)}}/*! @azure/msal-common v14.5.0 2023-12-01 */class dl{constructor(t,e){this.cacheOutcome=zn.NOT_APPLICABLE,this.cacheManager=e,this.apiId=t.apiId,this.correlationId=t.correlationId,this.wrapperSKU=t.wrapperSKU||B.EMPTY_STRING,this.wrapperVer=t.wrapperVer||B.EMPTY_STRING,this.telemetryCacheKey=At.CACHE_KEY+Nt.CACHE_KEY_SEPARATOR+t.clientId}generateCurrentRequestHeaderValue(){const t=`${this.apiId}${At.VALUE_SEPARATOR}${this.cacheOutcome}`,e=[this.wrapperSKU,this.wrapperVer].join(At.VALUE_SEPARATOR),o=this.getRegionDiscoveryFields(),n=[t,o].join(At.VALUE_SEPARATOR);return[At.SCHEMA_VERSION,n,e].join(At.CATEGORY_SEPARATOR)}generateLastRequestHeaderValue(){const t=this.getLastRequests(),e=dl.maxErrorsToSend(t),o=t.failedRequests.slice(0,2*e).join(At.VALUE_SEPARATOR),n=t.errors.slice(0,e).join(At.VALUE_SEPARATOR),i=t.errors.length,s=e<i?At.OVERFLOW_TRUE:At.OVERFLOW_FALSE,a=[i,s].join(At.VALUE_SEPARATOR);return[At.SCHEMA_VERSION,t.cacheHits,o,n,a].join(At.CATEGORY_SEPARATOR)}cacheFailedRequest(t){const e=this.getLastRequests();e.errors.length>=At.MAX_CACHED_ERRORS&&(e.failedRequests.shift(),e.failedRequests.shift(),e.errors.shift()),e.failedRequests.push(this.apiId,this.correlationId),t instanceof Error&&t&&t.toString()?t instanceof et?t.subError?e.errors.push(t.subError):t.errorCode?e.errors.push(t.errorCode):e.errors.push(t.toString()):e.errors.push(t.toString()):e.errors.push(At.UNKNOWN_ERROR),this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e)}incrementCacheHits(){const t=this.getLastRequests();return t.cacheHits+=1,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,t),t.cacheHits}getLastRequests(){const t={failedRequests:[],errors:[],cacheHits:0};return this.cacheManager.getServerTelemetry(this.telemetryCacheKey)||t}clearTelemetryCache(){const t=this.getLastRequests(),e=dl.maxErrorsToSend(t),o=t.errors.length;if(e===o)this.cacheManager.removeItem(this.telemetryCacheKey);else{const n={failedRequests:t.failedRequests.slice(e*2),errors:t.errors.slice(e),cacheHits:0};this.cacheManager.setServerTelemetry(this.telemetryCacheKey,n)}}static maxErrorsToSend(t){let e,o=0,n=0;const i=t.errors.length;for(e=0;e<i;e++){const s=t.failedRequests[2*e]||B.EMPTY_STRING,a=t.failedRequests[2*e+1]||B.EMPTY_STRING,l=t.errors[e]||B.EMPTY_STRING;if(n+=s.toString().length+a.toString().length+l.length+3,n<At.MAX_LAST_HEADER_BYTES)o+=1;else break}return o}getRegionDiscoveryFields(){const t=[];return t.push(this.regionUsed||B.EMPTY_STRING),t.push(this.regionSource||B.EMPTY_STRING),t.push(this.regionOutcome||B.EMPTY_STRING),t.join(",")}updateRegionDiscoveryMetadata(t){this.regionUsed=t.region_used,this.regionSource=t.region_source,this.regionOutcome=t.region_outcome}setCacheOutcome(t){this.cacheOutcome=t}}/*! @azure/msal-common v14.5.0 2023-12-01 */class sf{startMeasurement(){}endMeasurement(){}flushMeasurement(){return null}}class QR{generateId(){return"callback-id"}startMeasurement(t,e){return{end:()=>null,discard:()=>{},add:()=>{},increment:()=>{},event:{eventId:this.generateId(),status:jE.InProgress,authority:"",libraryName:"",libraryVersion:"",clientId:"",name:t,startTimeMs:Date.now(),correlationId:e||""},measurement:new sf}}startPerformanceMeasurement(){return new sf}calculateQueuedTime(){return 0}addQueueMeasurement(){}setPreQueueTime(){}endMeasurement(){return null}discardMeasurements(){}removePerformanceCallback(){return!0}addPerformanceCallback(){return""}emitEvents(){}addFields(){}incrementFields(){}cacheEventByCorrelationId(){}}/*! @azure/msal-browser v3.6.0 2023-12-01 */const yp="pkce_not_created",Tm="crypto_nonexistent",oc="empty_navigate_uri",bm="hash_empty_error",Cp="no_state_in_hash",Am="hash_does_not_contain_known_properties",Om="unable_to_parse_state",Pm="state_interaction_type_mismatch",Im="interaction_in_progress",Dm="popup_window_error",Mm="empty_window_error",Ni="user_cancelled",XR="monitor_popup_timeout",Lm="monitor_window_timeout",xm="redirect_in_iframe",Fm="block_iframe_reload",Nm="block_nested_popups",ZR="iframe_closed_prematurely",nc="silent_logout_unsupported",Gm="no_account_error",km="silent_prompt_value_error",Hm="no_token_request_cache_error",Vm="unable_to_parse_token_request_cache_error",wp="no_cached_authority_error",JR="auth_request_not_set_error",eT="invalid_cache_type",Bm="non_browser_environment",lr="database_not_open",pl="no_network_connectivity",Um="post_request_failed",jm="get_request_failed",cd="failed_to_parse_response",xo="unable_to_load_token",_p="crypto_key_not_found",Wm="auth_code_required",zm="auth_code_or_nativeAccountId_required",$m="spa_code_and_nativeAccountId_present",Sp="database_unavailable",Km="unable_to_acquire_token_from_native_platform",Ym="native_handshake_timeout",qm="native_extension_not_installed",ca="native_connection_not_established",Qm="uninitialized_public_client_application",Xm="native_prompt_not_supported",Zm="invalid_base64_string";/*! @azure/msal-browser v3.6.0 2023-12-01 */const mn="For more visit: aka.ms/msaljs/browser-errors",tT={[yp]:"The PKCE code challenge and verifier could not be generated.",[Tm]:"The crypto object or function is not available.",[oc]:"Navigation URI is empty. Please check stack trace for more info.",[bm]:`Hash value cannot be processed because it is empty. Please verify that your redirectUri is not clearing the hash. ${mn}`,[Cp]:"Hash does not contain state. Please verify that the request originated from msal.",[Am]:`Hash does not contain known properites. Please verify that your redirectUri is not changing the hash.  ${mn}`,[Om]:"Unable to parse state. Please verify that the request originated from msal.",[Pm]:"Hash contains state but the interaction type does not match the caller.",[Im]:`Interaction is currently in progress. Please ensure that this interaction has been completed before calling an interactive API.   ${mn}`,[Dm]:"Error opening popup window. This can happen if you are using IE or if popups are blocked in the browser.",[Mm]:"window.open returned null or undefined window object.",[Ni]:"User cancelled the flow.",[XR]:`Token acquisition in popup failed due to timeout.  ${mn}`,[Lm]:`Token acquisition in iframe failed due to timeout.  ${mn}`,[xm]:"Redirects are not supported for iframed or brokered applications. Please ensure you are using MSAL.js in a top frame of the window if using the redirect APIs, or use the popup APIs.",[Fm]:`Request was blocked inside an iframe because MSAL detected an authentication response.  ${mn}`,[Nm]:"Request was blocked inside a popup because MSAL detected it was running in a popup.",[ZR]:"The iframe being monitored was closed prematurely.",[nc]:"Silent logout not supported. Please call logoutRedirect or logoutPopup instead.",[Gm]:"No account object provided to acquireTokenSilent and no active account has been set. Please call setActiveAccount or provide an account on the request.",[km]:"The value given for the prompt value is not valid for silent requests - must be set to 'none' or 'no_session'.",[Hm]:"No token request found in cache.",[Vm]:"The cached token request could not be parsed.",[wp]:"No cached authority found.",[JR]:"Auth Request not set. Please ensure initiateAuthRequest was called from the InteractionHandler",[eT]:"Invalid cache type",[Bm]:"Login and token requests are not supported in non-browser environments.",[lr]:"Database is not open!",[pl]:"No network connectivity. Check your internet connection.",[Um]:"Network request failed: If the browser threw a CORS error, check that the redirectUri is registered in the Azure App Portal as type 'SPA'",[jm]:"Network request failed. Please check the network trace to determine root cause.",[cd]:"Failed to parse network response. Check network trace.",[xo]:"Error loading token to cache.",[_p]:"Cryptographic Key or Keypair not found in browser storage.",[Wm]:"An authorization code must be provided (as the `code` property on the request) to this flow.",[zm]:"An authorization code or nativeAccountId must be provided to this flow.",[$m]:"Request cannot contain both spa code and native account id.",[Sp]:"IndexedDB, which is required for persistent cryptographic key storage, is unavailable. This may be caused by browser privacy features which block persistent storage in third-party contexts.",[Km]:`Unable to acquire token from native platform.  ${mn}`,[Ym]:"Timed out while attempting to establish connection to browser extension",[qm]:"Native extension is not installed. If you think this is a mistake call the initialize function.",[ca]:`Connection to native platform has not been established. Please install a compatible browser extension and run initialize().  ${mn}`,[Qm]:`You must call and await the initialize function before attempting to call any other MSAL API.  ${mn}`,[Xm]:"The provided prompt is not supported by the native platform. This request should be routed to the web based flow.",[Zm]:"Invalid base64 encoded string."};class zr extends et{constructor(t){super(t,tT[t]),Object.setPrototypeOf(this,zr.prototype),this.name="BrowserAuthError"}}function ae(r){return new zr(r)}/*! @azure/msal-browser v3.6.0 2023-12-01 */const Go={INTERACTION_IN_PROGRESS_VALUE:"interaction_in_progress",INVALID_GRANT_ERROR:"invalid_grant",POPUP_WIDTH:483,POPUP_HEIGHT:600,POPUP_NAME_PREFIX:"msal",DEFAULT_POLL_INTERVAL_MS:30,MSAL_SKU:"msal.js.browser"},Ds={CHANNEL_ID:"53ee284d-920a-4b59-9d30-a60315b26836",PREFERRED_EXTENSION_ID:"ppnbnpeolgkicgegkbkbjmhlideopiji",MATS_TELEMETRY:"MATS"},Ei={HandshakeRequest:"Handshake",HandshakeResponse:"HandshakeResponse",GetToken:"GetToken",Response:"Response"},_t={LocalStorage:"localStorage",SessionStorage:"sessionStorage",MemoryStorage:"memoryStorage"},af={GET:"GET",POST:"POST"},je={AUTHORITY:"authority",ACQUIRE_TOKEN_ACCOUNT:"acquireToken.account",SESSION_STATE:"session.state",REQUEST_STATE:"request.state",NONCE_IDTOKEN:"nonce.id_token",ORIGIN_URI:"request.origin",RENEW_STATUS:"token.renew.status",URL_HASH:"urlHash",REQUEST_PARAMS:"request.params",SCOPES:"scopes",INTERACTION_STATUS_KEY:"interaction.status",CCS_CREDENTIAL:"ccs.credential",CORRELATION_ID:"request.correlationId",NATIVE_REQUEST:"request.native",REDIRECT_CONTEXT:"request.redirect.context"},Mn={ACCOUNT_KEYS:"msal.account.keys",TOKEN_KEYS:"msal.token.keys"},Ea={WRAPPER_SKU:"wrapper.sku",WRAPPER_VER:"wrapper.version"},Xe={acquireTokenRedirect:861,acquireTokenPopup:862,ssoSilent:863,acquireTokenSilent_authCode:864,handleRedirectPromise:865,acquireTokenByCode:866,acquireTokenSilent_silentFlow:61,logout:961,logoutPopup:962};var le;(function(r){r.Redirect="redirect",r.Popup="popup",r.Silent="silent",r.None="none"})(le||(le={}));const lf={scopes:aa},Jm="jwk",ud="msal.db",oT=1,nT=`${ud}.keys`,mo={Default:0,AccessToken:1,AccessTokenAndRefreshToken:2,RefreshToken:3,RefreshTokenAndNetwork:4,Skip:5};/*! @azure/msal-browser v3.6.0 2023-12-01 */function iT(r){r.location.hash="",typeof r.history.replaceState=="function"&&r.history.replaceState(null,"",`${r.location.origin}${r.location.pathname}${r.location.search}`)}function rT(r){const t=r.split("#");t.shift(),window.location.hash=t.length>0?t.join("#"):""}function Ep(){return window.parent!==window}function sT(){return typeof window<"u"&&!!window.opener&&window.opener!==window&&typeof window.name=="string"&&window.name.indexOf(`${Go.POPUP_NAME_PREFIX}.`)===0}function Rn(){return window.location.href.split("?")[0].split("#")[0]}function aT(){const t=new He(window.location.href).getUrlComponents();return`${t.Protocol}//${t.HostNameAndPort}/`}function Nc(){if(He.hashContainsKnownProperties(window.location.hash)&&Ep())throw ae(Fm)}function lT(r,t){const e=Ep();if(r===le.Redirect&&e&&!t)throw ae(xm)}function cT(){if(sT())throw ae(Nm)}function uT(r){if(!r)throw ae(Bm)}function cf(r){if(!r)throw ae(Qm)}function ey(r){const t=document.createElement("link");t.rel="preconnect",t.href=new URL(r).origin,t.crossOrigin="anonymous",document.head.appendChild(t),window.setTimeout(()=>{try{document.head.removeChild(t)}catch{}},1e4)}/*! @azure/msal-browser v3.6.0 2023-12-01 */class hl{navigateInternal(t,e){return hl.defaultNavigateWindow(t,e)}navigateExternal(t,e){return hl.defaultNavigateWindow(t,e)}static defaultNavigateWindow(t,e){return e.noHistory?window.location.replace(t):window.location.assign(t),new Promise(o=>{setTimeout(()=>{o(!0)},e.timeout)})}}/*! @azure/msal-browser v3.6.0 2023-12-01 */class dT{async sendGetRequestAsync(t,e){let o;try{o=await fetch(t,{method:af.GET,headers:this.getFetchHeaders(e)})}catch{throw window.navigator.onLine?ae(jm):ae(pl)}try{return{headers:this.getHeaderDict(o.headers),body:await o.json(),status:o.status}}catch{throw ae(cd)}}async sendPostRequestAsync(t,e){const o=e&&e.body||B.EMPTY_STRING;let n;try{n=await fetch(t,{method:af.POST,headers:this.getFetchHeaders(e),body:o})}catch{throw window.navigator.onLine?ae(Um):ae(pl)}try{return{headers:this.getHeaderDict(n.headers),body:await n.json(),status:n.status}}catch{throw ae(cd)}}getFetchHeaders(t){const e=new Headers;if(!(t&&t.headers))return e;const o=t.headers;return Object.keys(o).forEach(n=>{e.append(n,o[n])}),e}getHeaderDict(t){const e={};return t.forEach((o,n)=>{e[n]=o}),e}}/*! @azure/msal-browser v3.6.0 2023-12-01 */const pT=6e4,dd=1e4,hT=3e4,fT=2e3;function gT({auth:r,cache:t,system:e,telemetry:o},n){const i={clientId:B.EMPTY_STRING,authority:`${B.DEFAULT_AUTHORITY}`,knownAuthorities:[],cloudDiscoveryMetadata:B.EMPTY_STRING,authorityMetadata:B.EMPTY_STRING,redirectUri:B.EMPTY_STRING,postLogoutRedirectUri:B.EMPTY_STRING,navigateToLoginRequestUrl:!0,clientCapabilities:[],protocolMode:An.AAD,OIDCOptions:{serverResponseType:la.FRAGMENT,defaultScopes:[B.OPENID_SCOPE,B.PROFILE_SCOPE,B.OFFLINE_ACCESS_SCOPE]},azureCloudOptions:{azureCloudInstance:ip.None,tenant:B.EMPTY_STRING},skipAuthorityMetadataCache:!1,supportsNestedAppAuth:!1},s={cacheLocation:_t.SessionStorage,temporaryCacheLocation:_t.SessionStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!!(t&&t.cacheLocation===_t.LocalStorage),claimsBasedCachingEnabled:!1},a={loggerCallback:()=>{},logLevel:Ct.Info,piiLoggingEnabled:!1},c={...{...Cm,loggerOptions:a,networkClient:n?new dT:YR,navigationClient:new hl,loadFrameTimeout:0,windowHashTimeout:(e==null?void 0:e.loadFrameTimeout)||pT,iframeHashTimeout:(e==null?void 0:e.loadFrameTimeout)||dd,navigateFrameWait:0,redirectNavigationTimeout:hT,asyncPopups:!1,allowRedirectInIframe:!1,allowNativeBroker:!1,nativeBrokerHandshakeTimeout:(e==null?void 0:e.nativeBrokerHandshakeTimeout)||fT,pollIntervalMilliseconds:Go.DEFAULT_POLL_INTERVAL_MS},...e,loggerOptions:(e==null?void 0:e.loggerOptions)||a},u={application:{appName:B.EMPTY_STRING,appVersion:B.EMPTY_STRING},client:new QR};if((r==null?void 0:r.protocolMode)!==An.OIDC&&(r!=null&&r.OIDCOptions)&&new Xl(c.loggerOptions).warning(JSON.stringify(Ke(dm))),r!=null&&r.protocolMode&&r.protocolMode!==An.AAD&&(c!=null&&c.allowNativeBroker))throw Ke(pm);return{auth:{...i,...r,OIDCOptions:{...i.OIDCOptions,...r==null?void 0:r.OIDCOptions}},cache:{...s,...t},system:c,telemetry:{...u,...o}}}/*! @azure/msal-browser v3.6.0 2023-12-01 */const vT="@azure/msal-browser",Rp="3.6.0";/*! @azure/msal-browser v3.6.0 2023-12-01 */class mT{constructor(t){this.browserEnvironment=typeof window<"u",this.config=gT(t,this.browserEnvironment),this.logger=new Xl(this.config.system.loggerOptions,vT,Rp),this.available=!1}getConfig(){return this.config}getLogger(){return this.logger}isAvailable(){return this.available}isBrowserEnvironment(){return this.browserEnvironment}}/*! @azure/msal-browser v3.6.0 2023-12-01 */class Gi extends mT{getModuleName(){return Gi.MODULE_NAME}getId(){return Gi.ID}async initialize(){return this.available=typeof window<"u",this.available}}Gi.MODULE_NAME="";Gi.ID="StandardOperatingContext";async function yT(r){const t=new Gi(r);return await t.initialize(),(await Wg(()=>Promise.resolve().then(()=>s0),void 0)).StandardController.createController(t)}/*! @azure/msal-browser v3.6.0 2023-12-01 */function Gc(r){return encodeURIComponent(Tp(r).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_"))}function fl(r){return ty(r).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Tp(r){return ty(new TextEncoder().encode(r))}function ty(r){const t=Array.from(r,e=>String.fromCodePoint(e)).join("");return btoa(t)}/*! @azure/msal-browser v3.6.0 2023-12-01 */function cn(r){return new TextDecoder().decode(CT(r))}function CT(r){let t=r.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw ae(Zm)}const e=atob(t);return Uint8Array.from(e,o=>o.codePointAt(0)||0)}/*! @azure/msal-browser v3.6.0 2023-12-01 */const wT="RSASSA-PKCS1-v1_5",oy="SHA-256",_T=2048,ST=new Uint8Array([1,0,1]),bp={name:wT,hash:oy,modulusLength:_T,publicExponent:ST};function ET(r){if("crypto"in window)r.verbose("BrowserCrypto: modern crypto interface available");else throw r.error("BrowserCrypto: crypto interface is unavailable"),ae(Tm)}async function ny(r,t,e){t==null||t.addQueueMeasurement(G.Sha256Digest,e);const n=new TextEncoder().encode(r);return window.crypto.subtle.digest(oy,n)}function RT(r){return window.crypto.getRandomValues(r)}function ni(){return window.crypto.randomUUID()}async function TT(r,t){return window.crypto.subtle.generateKey(bp,r,t)}async function kc(r){return window.crypto.subtle.exportKey(Jm,r)}async function bT(r,t,e){return window.crypto.subtle.importKey(Jm,r,bp,t,e)}async function AT(r,t){return window.crypto.subtle.sign(bp,r,t)}/*! @azure/msal-browser v3.6.0 2023-12-01 */class OT{constructor(){this.dbName=ud,this.version=oT,this.tableName=nT,this.dbOpen=!1}async open(){return new Promise((t,e)=>{const o=window.indexedDB.open(this.dbName,this.version);o.addEventListener("upgradeneeded",n=>{n.target.result.createObjectStore(this.tableName)}),o.addEventListener("success",n=>{const i=n;this.db=i.target.result,this.dbOpen=!0,t()}),o.addEventListener("error",()=>e(ae(Sp)))})}closeConnection(){const t=this.db;t&&this.dbOpen&&(t.close(),this.dbOpen=!1)}async validateDbIsOpen(){if(!this.dbOpen)return this.open()}async getItem(t){return await this.validateDbIsOpen(),new Promise((e,o)=>{if(!this.db)return o(ae(lr));const s=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).get(t);s.addEventListener("success",a=>{const l=a;this.closeConnection(),e(l.target.result)}),s.addEventListener("error",a=>{this.closeConnection(),o(a)})})}async setItem(t,e){return await this.validateDbIsOpen(),new Promise((o,n)=>{if(!this.db)return n(ae(lr));const a=this.db.transaction([this.tableName],"readwrite").objectStore(this.tableName).put(e,t);a.addEventListener("success",()=>{this.closeConnection(),o()}),a.addEventListener("error",l=>{this.closeConnection(),n(l)})})}async removeItem(t){return await this.validateDbIsOpen(),new Promise((e,o)=>{if(!this.db)return o(ae(lr));const s=this.db.transaction([this.tableName],"readwrite").objectStore(this.tableName).delete(t);s.addEventListener("success",()=>{this.closeConnection(),e()}),s.addEventListener("error",a=>{this.closeConnection(),o(a)})})}async getKeys(){return await this.validateDbIsOpen(),new Promise((t,e)=>{if(!this.db)return e(ae(lr));const i=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).getAllKeys();i.addEventListener("success",s=>{const a=s;this.closeConnection(),t(a.target.result)}),i.addEventListener("error",s=>{this.closeConnection(),e(s)})})}async containsKey(t){return await this.validateDbIsOpen(),new Promise((e,o)=>{if(!this.db)return o(ae(lr));const s=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).count(t);s.addEventListener("success",a=>{const l=a;this.closeConnection(),e(l.target.result===1)}),s.addEventListener("error",a=>{this.closeConnection(),o(a)})})}async deleteDatabase(){return this.db&&this.dbOpen&&this.closeConnection(),new Promise((t,e)=>{const o=window.indexedDB.deleteDatabase(ud);o.addEventListener("success",()=>t(!0)),o.addEventListener("blocked",()=>t(!0)),o.addEventListener("error",()=>e(!1))})}}/*! @azure/msal-browser v3.6.0 2023-12-01 */class pd{constructor(){this.cache=new Map}getItem(t){return this.cache.get(t)||null}setItem(t,e){this.cache.set(t,e)}removeItem(t){this.cache.delete(t)}getKeys(){const t=[];return this.cache.forEach((e,o)=>{t.push(o)}),t}containsKey(t){return this.cache.has(t)}clear(){this.cache.clear()}}/*! @azure/msal-browser v3.6.0 2023-12-01 */class uf{constructor(t,e){this.inMemoryCache=new pd,this.indexedDBCache=new OT,this.logger=t,this.storeName=e}handleDatabaseAccessError(t){if(t instanceof zr&&t.errorCode===Sp)this.logger.error("Could not access persistent storage. This may be caused by browser privacy features which block persistent storage in third-party contexts.");else throw t}async getItem(t){const e=this.inMemoryCache.getItem(t);if(!e)try{return this.logger.verbose("Queried item not found in in-memory cache, now querying persistent storage."),await this.indexedDBCache.getItem(t)}catch(o){this.handleDatabaseAccessError(o)}return e}async setItem(t,e){this.inMemoryCache.setItem(t,e);try{await this.indexedDBCache.setItem(t,e)}catch(o){this.handleDatabaseAccessError(o)}}async removeItem(t){this.inMemoryCache.removeItem(t);try{await this.indexedDBCache.removeItem(t)}catch(e){this.handleDatabaseAccessError(e)}}async getKeys(){const t=this.inMemoryCache.getKeys();if(t.length===0)try{return this.logger.verbose("In-memory cache is empty, now querying persistent storage."),await this.indexedDBCache.getKeys()}catch(e){this.handleDatabaseAccessError(e)}return t}async containsKey(t){const e=this.inMemoryCache.containsKey(t);if(!e)try{return this.logger.verbose("Key not found in in-memory cache, now querying persistent storage."),await this.indexedDBCache.containsKey(t)}catch(o){this.handleDatabaseAccessError(o)}return e}clearInMemory(){this.logger.verbose(`Deleting in-memory keystore ${this.storeName}`),this.inMemoryCache.clear(),this.logger.verbose(`In-memory keystore ${this.storeName} deleted`)}async clearPersistent(){try{this.logger.verbose("Deleting persistent keystore");const t=await this.indexedDBCache.deleteDatabase();return t&&this.logger.verbose("Persistent keystore deleted"),t}catch(t){return this.handleDatabaseAccessError(t),!1}}}/*! @azure/msal-browser v3.6.0 2023-12-01 */const df={asymmetricKeys:"asymmetricKeys",symmetricKeys:"symmetricKeys"};class PT{constructor(t){this.logger=t,this.asymmetricKeys=new uf(this.logger,df.asymmetricKeys),this.symmetricKeys=new uf(this.logger,df.symmetricKeys)}async clear(){this.asymmetricKeys.clearInMemory(),this.symmetricKeys.clearInMemory();try{return await this.asymmetricKeys.clearPersistent(),!0}catch(t){return t instanceof Error?this.logger.error(`Clearing keystore failed with error: ${t.message}`):this.logger.error("Clearing keystore failed with unknown error"),!1}}}/*! @azure/msal-browser v3.6.0 2023-12-01 */class Ir{constructor(t,e){this.logger=t,ET(t),this.cache=new PT(this.logger),this.performanceClient=e}createNewGuid(){return ni()}base64Encode(t){return Tp(t)}base64Decode(t){return cn(t)}async getPublicKeyThumbprint(t){var u;const e=(u=this.performanceClient)==null?void 0:u.startMeasurement(G.CryptoOptsGetPublicKeyThumbprint,t.correlationId),o=await TT(Ir.EXTRACTABLE,Ir.POP_KEY_USAGES),n=await kc(o.publicKey),i={e:n.e,kty:n.kty,n:n.n},s=pf(i),a=await this.hashString(s),l=await kc(o.privateKey),c=await bT(l,!1,["sign"]);return await this.cache.asymmetricKeys.setItem(a,{privateKey:c,publicKey:o.publicKey,requestMethod:t.resourceRequestMethod,requestUri:t.resourceRequestUri}),e&&e.end({success:!0}),a}async removeTokenBindingKey(t){return await this.cache.asymmetricKeys.removeItem(t),!await this.cache.asymmetricKeys.containsKey(t)}async clearKeystore(){return this.cache.clear()}async signJwt(t,e,o,n){var T;const i=(T=this.performanceClient)==null?void 0:T.startMeasurement(G.CryptoOptsSignJwt,n),s=await this.cache.asymmetricKeys.getItem(e);if(!s)throw ae(_p);const a=await kc(s.publicKey),l=pf(a),c=Gc(JSON.stringify({kid:e})),u=mp.getShrHeaderString({...o==null?void 0:o.header,alg:a.alg,kid:c}),d=Gc(u);t.cnf={jwk:JSON.parse(l)};const p=Gc(JSON.stringify(t)),h=`${d}.${p}`,g=new TextEncoder().encode(h),_=await AT(s.privateKey,g),C=fl(new Uint8Array(_)),E=`${h}.${C}`;return i&&i.end({success:!0}),E}async hashString(t){const e=await ny(t),o=new Uint8Array(e);return fl(o)}}Ir.POP_KEY_USAGES=["sign","verify"];Ir.EXTRACTABLE=!0;function pf(r){return JSON.stringify(r,Object.keys(r).sort())}/*! @azure/msal-browser v3.6.0 2023-12-01 */const iy="storage_not_supported",IT="stubbed_public_client_application_called",ry="in_mem_redirect_unavailable";/*! @azure/msal-browser v3.6.0 2023-12-01 */const DT={[iy]:"Given storage configuration option was not supported.",[IT]:"Stub instance of Public Client Application was called. If using msal-react, please ensure context is not used without a provider. For more visit: aka.ms/msaljs/browser-errors",[ry]:"Redirect cannot be supported. In-memory storage was selected and storeAuthStateInCookie=false, which would cause the library to be unable to handle the incoming hash. If you would like to use the redirect API, please use session/localStorage or set storeAuthStateInCookie=true."};class Ap extends et{constructor(t,e){super(t,e),this.name="BrowserConfigurationAuthError",Object.setPrototypeOf(this,Ap.prototype)}}function sy(r){return new Ap(r,DT[r])}/*! @azure/msal-browser v3.6.0 2023-12-01 */class hf{constructor(t){this.validateWindowStorage(t),this.windowStorage=window[t]}validateWindowStorage(t){if(t!==_t.LocalStorage&&t!==_t.SessionStorage||!window[t])throw sy(iy)}getItem(t){return this.windowStorage.getItem(t)}setItem(t,e){this.windowStorage.setItem(t,e)}removeItem(t){this.windowStorage.removeItem(t)}getKeys(){return Object.keys(this.windowStorage)}containsKey(t){return this.windowStorage.hasOwnProperty(t)}}/*! @azure/msal-browser v3.6.0 2023-12-01 */function ay(r,t){if(!t)return null;try{return Bo.parseRequestState(r,t).libraryState.meta}catch{throw J(br)}}/*! @azure/msal-browser v3.6.0 2023-12-01 */class hd extends _n{constructor(t,e,o,n,i){super(t,o,n,i),this.COOKIE_LIFE_MULTIPLIER=24*60*60*1e3,this.cacheConfig=e,this.logger=n,this.internalStorage=new pd,this.browserStorage=this.setupBrowserStorage(this.cacheConfig.cacheLocation),this.temporaryCacheStorage=this.setupTemporaryCacheStorage(this.cacheConfig.temporaryCacheLocation,this.cacheConfig.cacheLocation),e.cacheMigrationEnabled&&(this.migrateCacheEntries(),this.createKeyMaps())}setupBrowserStorage(t){switch(t){case _t.LocalStorage:case _t.SessionStorage:try{return new hf(t)}catch(e){this.logger.verbose(e);break}}return this.cacheConfig.cacheLocation=_t.MemoryStorage,new pd}setupTemporaryCacheStorage(t,e){switch(e){case _t.LocalStorage:case _t.SessionStorage:try{return new hf(t||_t.SessionStorage)}catch(o){return this.logger.verbose(o),this.internalStorage}case _t.MemoryStorage:default:return this.internalStorage}}migrateCacheEntries(){const t=`${B.CACHE_PREFIX}.${Tt.ID_TOKEN}`,e=`${B.CACHE_PREFIX}.${Tt.CLIENT_INFO}`,o=`${B.CACHE_PREFIX}.${Tt.ERROR}`,n=`${B.CACHE_PREFIX}.${Tt.ERROR_DESC}`,i=this.browserStorage.getItem(t),s=this.browserStorage.getItem(e),a=this.browserStorage.getItem(o),l=this.browserStorage.getItem(n),c=[i,s,a,l];[Tt.ID_TOKEN,Tt.CLIENT_INFO,Tt.ERROR,Tt.ERROR_DESC].forEach((d,p)=>this.migrateCacheEntry(d,c[p]))}migrateCacheEntry(t,e){e&&this.setTemporaryCache(t,e,!0)}createKeyMaps(){this.logger.trace("BrowserCacheManager - createKeyMaps called.");const t=this.getItem(Mn.ACCOUNT_KEYS),e=this.getItem(`${Mn.TOKEN_KEYS}.${this.clientId}`);if(t&&e){this.logger.verbose("BrowserCacheManager:createKeyMaps - account and token key maps already exist, skipping migration.");return}this.browserStorage.getKeys().forEach(n=>{if(this.isCredentialKey(n)){const i=this.getItem(n);if(i){const s=this.validateAndParseJson(i);if(s&&s.hasOwnProperty("credentialType"))switch(s.credentialType){case Ce.ID_TOKEN:if(Kh(s)){this.logger.trace("BrowserCacheManager:createKeyMaps - idToken found, saving key to token key map"),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - idToken with key: ${n} found, saving key to token key map`);const a=s,l=this.updateCredentialCacheKey(n,a);this.addTokenKey(l,Ce.ID_TOKEN);return}else this.logger.trace("BrowserCacheManager:createKeyMaps - key found matching idToken schema with value containing idToken credentialType field but value failed IdTokenEntity validation, skipping."),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - failed idToken validation on key: ${n}`);break;case Ce.ACCESS_TOKEN:case Ce.ACCESS_TOKEN_WITH_AUTH_SCHEME:if($h(s)){this.logger.trace("BrowserCacheManager:createKeyMaps - accessToken found, saving key to token key map"),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - accessToken with key: ${n} found, saving key to token key map`);const a=s,l=this.updateCredentialCacheKey(n,a);this.addTokenKey(l,Ce.ACCESS_TOKEN);return}else this.logger.trace("BrowserCacheManager:createKeyMaps - key found matching accessToken schema with value containing accessToken credentialType field but value failed AccessTokenEntity validation, skipping."),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - failed accessToken validation on key: ${n}`);break;case Ce.REFRESH_TOKEN:if(Yh(s)){this.logger.trace("BrowserCacheManager:createKeyMaps - refreshToken found, saving key to token key map"),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - refreshToken with key: ${n} found, saving key to token key map`);const a=s,l=this.updateCredentialCacheKey(n,a);this.addTokenKey(l,Ce.REFRESH_TOKEN);return}else this.logger.trace("BrowserCacheManager:createKeyMaps - key found matching refreshToken schema with value containing refreshToken credentialType field but value failed RefreshTokenEntity validation, skipping."),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - failed refreshToken validation on key: ${n}`);break}}}if(this.isAccountKey(n)){const i=this.getItem(n);if(i){const s=this.validateAndParseJson(i);s&&mt.isAccountEntity(s)&&(this.logger.trace("BrowserCacheManager:createKeyMaps - account found, saving key to account key map"),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - account with key: ${n} found, saving key to account key map`),this.addAccountKeyToMap(n))}}})}validateAndParseJson(t){try{const e=JSON.parse(t);return e&&typeof e=="object"?e:null}catch{return null}}getItem(t){return this.browserStorage.getItem(t)}setItem(t,e){this.browserStorage.setItem(t,e)}getAccount(t,e){this.logger.trace("BrowserCacheManager.getAccount called");const o=this.getCachedAccountEntity(t);return this.updateOutdatedCachedAccount(t,o,e)}getCachedAccountEntity(t){const e=this.getItem(t);if(!e)return this.removeAccountKeyFromMap(t),null;const o=this.validateAndParseJson(e);return!o||!mt.isAccountEntity(o)?(this.removeAccountKeyFromMap(t),null):_n.toObject(new mt,o)}setAccount(t){this.logger.trace("BrowserCacheManager.setAccount called");const e=t.generateAccountKey();this.setItem(e,JSON.stringify(t)),this.addAccountKeyToMap(e)}getAccountKeys(){this.logger.trace("BrowserCacheManager.getAccountKeys called");const t=this.getItem(Mn.ACCOUNT_KEYS);return t?JSON.parse(t):(this.logger.verbose("BrowserCacheManager.getAccountKeys - No account keys found"),[])}addAccountKeyToMap(t){this.logger.trace("BrowserCacheManager.addAccountKeyToMap called"),this.logger.tracePii(`BrowserCacheManager.addAccountKeyToMap called with key: ${t}`);const e=this.getAccountKeys();e.indexOf(t)===-1?(e.push(t),this.setItem(Mn.ACCOUNT_KEYS,JSON.stringify(e)),this.logger.verbose("BrowserCacheManager.addAccountKeyToMap account key added")):this.logger.verbose("BrowserCacheManager.addAccountKeyToMap account key already exists in map")}removeAccountKeyFromMap(t){this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap called"),this.logger.tracePii(`BrowserCacheManager.removeAccountKeyFromMap called with key: ${t}`);const e=this.getAccountKeys(),o=e.indexOf(t);o>-1?(e.splice(o,1),this.setItem(Mn.ACCOUNT_KEYS,JSON.stringify(e)),this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap account key removed")):this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap key not found in existing map")}async removeAccount(t){super.removeAccount(t),this.removeAccountKeyFromMap(t)}removeOutdatedAccount(t){this.removeItem(t),this.removeAccountKeyFromMap(t)}removeIdToken(t){super.removeIdToken(t),this.removeTokenKey(t,Ce.ID_TOKEN)}async removeAccessToken(t){super.removeAccessToken(t),this.removeTokenKey(t,Ce.ACCESS_TOKEN)}removeRefreshToken(t){super.removeRefreshToken(t),this.removeTokenKey(t,Ce.REFRESH_TOKEN)}getTokenKeys(){this.logger.trace("BrowserCacheManager.getTokenKeys called");const t=this.getItem(`${Mn.TOKEN_KEYS}.${this.clientId}`);if(t){const e=this.validateAndParseJson(t);if(e&&e.hasOwnProperty("idToken")&&e.hasOwnProperty("accessToken")&&e.hasOwnProperty("refreshToken"))return e;this.logger.error("BrowserCacheManager.getTokenKeys - Token keys found but in an unknown format. Returning empty key map.")}else this.logger.verbose("BrowserCacheManager.getTokenKeys - No token keys found");return{idToken:[],accessToken:[],refreshToken:[]}}addTokenKey(t,e){this.logger.trace("BrowserCacheManager addTokenKey called");const o=this.getTokenKeys();switch(e){case Ce.ID_TOKEN:o.idToken.indexOf(t)===-1&&(this.logger.info("BrowserCacheManager: addTokenKey - idToken added to map"),o.idToken.push(t));break;case Ce.ACCESS_TOKEN:o.accessToken.indexOf(t)===-1&&(this.logger.info("BrowserCacheManager: addTokenKey - accessToken added to map"),o.accessToken.push(t));break;case Ce.REFRESH_TOKEN:o.refreshToken.indexOf(t)===-1&&(this.logger.info("BrowserCacheManager: addTokenKey - refreshToken added to map"),o.refreshToken.push(t));break;default:throw this.logger.error(`BrowserCacheManager:addTokenKey - CredentialType provided invalid. CredentialType: ${e}`),J(nd)}this.setItem(`${Mn.TOKEN_KEYS}.${this.clientId}`,JSON.stringify(o))}removeTokenKey(t,e){this.logger.trace("BrowserCacheManager removeTokenKey called");const o=this.getTokenKeys();switch(e){case Ce.ID_TOKEN:this.logger.infoPii(`BrowserCacheManager: removeTokenKey - attempting to remove idToken with key: ${t} from map`);const n=o.idToken.indexOf(t);n>-1?(this.logger.info("BrowserCacheManager: removeTokenKey - idToken removed from map"),o.idToken.splice(n,1)):this.logger.info("BrowserCacheManager: removeTokenKey - idToken does not exist in map. Either it was previously removed or it was never added.");break;case Ce.ACCESS_TOKEN:this.logger.infoPii(`BrowserCacheManager: removeTokenKey - attempting to remove accessToken with key: ${t} from map`);const i=o.accessToken.indexOf(t);i>-1?(this.logger.info("BrowserCacheManager: removeTokenKey - accessToken removed from map"),o.accessToken.splice(i,1)):this.logger.info("BrowserCacheManager: removeTokenKey - accessToken does not exist in map. Either it was previously removed or it was never added.");break;case Ce.REFRESH_TOKEN:this.logger.infoPii(`BrowserCacheManager: removeTokenKey - attempting to remove refreshToken with key: ${t} from map`);const s=o.refreshToken.indexOf(t);s>-1?(this.logger.info("BrowserCacheManager: removeTokenKey - refreshToken removed from map"),o.refreshToken.splice(s,1)):this.logger.info("BrowserCacheManager: removeTokenKey - refreshToken does not exist in map. Either it was previously removed or it was never added.");break;default:throw this.logger.error(`BrowserCacheManager:removeTokenKey - CredentialType provided invalid. CredentialType: ${e}`),J(nd)}this.setItem(`${Mn.TOKEN_KEYS}.${this.clientId}`,JSON.stringify(o))}getIdTokenCredential(t){const e=this.getItem(t);if(!e)return this.logger.trace("BrowserCacheManager.getIdTokenCredential: called, no cache hit"),this.removeTokenKey(t,Ce.ID_TOKEN),null;const o=this.validateAndParseJson(e);return!o||!Kh(o)?(this.logger.trace("BrowserCacheManager.getIdTokenCredential: called, no cache hit"),this.removeTokenKey(t,Ce.ID_TOKEN),null):(this.logger.trace("BrowserCacheManager.getIdTokenCredential: cache hit"),o)}setIdTokenCredential(t){this.logger.trace("BrowserCacheManager.setIdTokenCredential called");const e=Ps(t);this.setItem(e,JSON.stringify(t)),this.addTokenKey(e,Ce.ID_TOKEN)}getAccessTokenCredential(t){const e=this.getItem(t);if(!e)return this.logger.trace("BrowserCacheManager.getAccessTokenCredential: called, no cache hit"),this.removeTokenKey(t,Ce.ACCESS_TOKEN),null;const o=this.validateAndParseJson(e);return!o||!$h(o)?(this.logger.trace("BrowserCacheManager.getAccessTokenCredential: called, no cache hit"),this.removeTokenKey(t,Ce.ACCESS_TOKEN),null):(this.logger.trace("BrowserCacheManager.getAccessTokenCredential: cache hit"),o)}setAccessTokenCredential(t){this.logger.trace("BrowserCacheManager.setAccessTokenCredential called");const e=Ps(t);this.setItem(e,JSON.stringify(t)),this.addTokenKey(e,Ce.ACCESS_TOKEN)}getRefreshTokenCredential(t){const e=this.getItem(t);if(!e)return this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: called, no cache hit"),this.removeTokenKey(t,Ce.REFRESH_TOKEN),null;const o=this.validateAndParseJson(e);return!o||!Yh(o)?(this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: called, no cache hit"),this.removeTokenKey(t,Ce.REFRESH_TOKEN),null):(this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: cache hit"),o)}setRefreshTokenCredential(t){this.logger.trace("BrowserCacheManager.setRefreshTokenCredential called");const e=Ps(t);this.setItem(e,JSON.stringify(t)),this.addTokenKey(e,Ce.REFRESH_TOKEN)}getAppMetadata(t){const e=this.getItem(t);if(!e)return this.logger.trace("BrowserCacheManager.getAppMetadata: called, no cache hit"),null;const o=this.validateAndParseJson(e);return!o||!Pr.isAppMetadataEntity(t,o)?(this.logger.trace("BrowserCacheManager.getAppMetadata: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getAppMetadata: cache hit"),_n.toObject(new Pr,o))}setAppMetadata(t){this.logger.trace("BrowserCacheManager.setAppMetadata called");const e=t.generateAppMetadataKey();this.setItem(e,JSON.stringify(t))}getServerTelemetry(t){const e=this.getItem(t);if(!e)return this.logger.trace("BrowserCacheManager.getServerTelemetry: called, no cache hit"),null;const o=this.validateAndParseJson(e);return!o||!LE(t,o)?(this.logger.trace("BrowserCacheManager.getServerTelemetry: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getServerTelemetry: cache hit"),o)}setServerTelemetry(t,e){this.logger.trace("BrowserCacheManager.setServerTelemetry called"),this.setItem(t,JSON.stringify(e))}getAuthorityMetadata(t){const e=this.internalStorage.getItem(t);if(!e)return this.logger.trace("BrowserCacheManager.getAuthorityMetadata: called, no cache hit"),null;const o=this.validateAndParseJson(e);return o&&sd.isAuthorityMetadataEntity(t,o)?(this.logger.trace("BrowserCacheManager.getAuthorityMetadata: cache hit"),_n.toObject(new sd,o)):null}getAuthorityMetadataKeys(){return this.internalStorage.getKeys().filter(e=>this.isAuthorityMetadata(e))}setWrapperMetadata(t,e){this.internalStorage.setItem(Ea.WRAPPER_SKU,t),this.internalStorage.setItem(Ea.WRAPPER_VER,e)}getWrapperMetadata(){const t=this.internalStorage.getItem(Ea.WRAPPER_SKU)||B.EMPTY_STRING,e=this.internalStorage.getItem(Ea.WRAPPER_VER)||B.EMPTY_STRING;return[t,e]}setAuthorityMetadata(t,e){this.logger.trace("BrowserCacheManager.setAuthorityMetadata called"),this.internalStorage.setItem(t,JSON.stringify(e))}getActiveAccount(){const t=this.generateCacheKey(Tt.ACTIVE_ACCOUNT_FILTERS),e=this.getItem(t);if(!e){this.logger.trace("BrowserCacheManager.getActiveAccount: No active account filters cache schema found, looking for legacy schema");const n=this.generateCacheKey(Tt.ACTIVE_ACCOUNT),i=this.getItem(n);if(!i)return this.logger.trace("BrowserCacheManager.getActiveAccount: No active account found"),null;const s=this.getAccountInfoFilteredBy({localAccountId:i});return s?(this.logger.trace("BrowserCacheManager.getActiveAccount: Legacy active account cache schema found"),this.logger.trace("BrowserCacheManager.getActiveAccount: Adding active account filters cache schema"),this.setActiveAccount(s),s):null}const o=this.validateAndParseJson(e);return o?(this.logger.trace("BrowserCacheManager.getActiveAccount: Active account filters schema found"),this.getAccountInfoFilteredBy({homeAccountId:o.homeAccountId,localAccountId:o.localAccountId,tenantId:o.tenantId})):(this.logger.trace("BrowserCacheManager.getActiveAccount: No active account found"),null)}setActiveAccount(t){const e=this.generateCacheKey(Tt.ACTIVE_ACCOUNT_FILTERS),o=this.generateCacheKey(Tt.ACTIVE_ACCOUNT);if(t){this.logger.verbose("setActiveAccount: Active account set");const n={homeAccountId:t.homeAccountId,localAccountId:t.localAccountId,tenantId:t.tenantId};this.browserStorage.setItem(e,JSON.stringify(n)),this.browserStorage.setItem(o,t.localAccountId)}else this.logger.verbose("setActiveAccount: No account passed, active account not set"),this.browserStorage.removeItem(e),this.browserStorage.removeItem(o)}getThrottlingCache(t){const e=this.getItem(t);if(!e)return this.logger.trace("BrowserCacheManager.getThrottlingCache: called, no cache hit"),null;const o=this.validateAndParseJson(e);return!o||!nf.isThrottlingEntity(t,o)?(this.logger.trace("BrowserCacheManager.getThrottlingCache: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getThrottlingCache: cache hit"),_n.toObject(new nf,o))}setThrottlingCache(t,e){this.logger.trace("BrowserCacheManager.setThrottlingCache called"),this.setItem(t,JSON.stringify(e))}getTemporaryCache(t,e){const o=e?this.generateCacheKey(t):t;if(this.cacheConfig.storeAuthStateInCookie){const i=this.getItemCookie(o);if(i)return this.logger.trace("BrowserCacheManager.getTemporaryCache: storeAuthStateInCookies set to true, retrieving from cookies"),i}const n=this.temporaryCacheStorage.getItem(o);if(!n){if(this.cacheConfig.cacheLocation===_t.LocalStorage){const i=this.browserStorage.getItem(o);if(i)return this.logger.trace("BrowserCacheManager.getTemporaryCache: Temporary cache item found in local storage"),i}return this.logger.trace("BrowserCacheManager.getTemporaryCache: No cache item found in local storage"),null}return this.logger.trace("BrowserCacheManager.getTemporaryCache: Temporary cache item returned"),n}setTemporaryCache(t,e,o){const n=o?this.generateCacheKey(t):t;this.temporaryCacheStorage.setItem(n,e),this.cacheConfig.storeAuthStateInCookie&&(this.logger.trace("BrowserCacheManager.setTemporaryCache: storeAuthStateInCookie set to true, setting item cookie"),this.setItemCookie(n,e))}removeItem(t){this.browserStorage.removeItem(t),this.temporaryCacheStorage.removeItem(t),this.cacheConfig.storeAuthStateInCookie&&(this.logger.trace("BrowserCacheManager.removeItem: storeAuthStateInCookie is true, clearing item cookie"),this.clearItemCookie(t))}containsKey(t){return this.browserStorage.containsKey(t)||this.temporaryCacheStorage.containsKey(t)}getKeys(){return[...this.browserStorage.getKeys(),...this.temporaryCacheStorage.getKeys()]}async clear(){await this.removeAllAccounts(),this.removeAppMetadata(),this.getKeys().forEach(t=>{(this.browserStorage.containsKey(t)||this.temporaryCacheStorage.containsKey(t))&&(t.indexOf(B.CACHE_PREFIX)!==-1||t.indexOf(this.clientId)!==-1)&&this.removeItem(t)}),this.internalStorage.clear()}async clearTokensAndKeysWithClaims(t){t.addQueueMeasurement(G.ClearTokensAndKeysWithClaims);const e=this.getTokenKeys(),o=[];e.accessToken.forEach(n=>{const i=this.getAccessTokenCredential(n);i!=null&&i.requestedClaimsHash&&n.includes(i.requestedClaimsHash.toLowerCase())&&o.push(this.removeAccessToken(n))}),await Promise.all(o),o.length>0&&this.logger.warning(`${o.length} access tokens with claims in the cache keys have been removed from the cache.`)}setItemCookie(t,e,o){let n=`${encodeURIComponent(t)}=${encodeURIComponent(e)};path=/;SameSite=Lax;`;if(o){const i=this.getCookieExpirationTime(o);n+=`expires=${i};`}this.cacheConfig.secureCookies&&(n+="Secure;"),document.cookie=n}getItemCookie(t){const e=`${encodeURIComponent(t)}=`,o=document.cookie.split(";");for(let n=0;n<o.length;n++){let i=o[n];for(;i.charAt(0)===" ";)i=i.substring(1);if(i.indexOf(e)===0)return decodeURIComponent(i.substring(e.length,i.length))}return B.EMPTY_STRING}clearMsalCookies(){const t=`${B.CACHE_PREFIX}.${this.clientId}`;document.cookie.split(";").forEach(o=>{for(;o.charAt(0)===" ";)o=o.substring(1);if(o.indexOf(t)===0){const n=o.split("=")[0];this.clearItemCookie(n)}})}clearItemCookie(t){this.setItemCookie(t,B.EMPTY_STRING,-1)}getCookieExpirationTime(t){const e=new Date;return new Date(e.getTime()+t*this.COOKIE_LIFE_MULTIPLIER).toUTCString()}getCache(){return this.browserStorage}setCache(){}generateCacheKey(t){return this.validateAndParseJson(t)?JSON.stringify(t):Vo.startsWith(t,B.CACHE_PREFIX)||Vo.startsWith(t,Tt.ADAL_ID_TOKEN)?t:`${B.CACHE_PREFIX}.${this.clientId}.${t}`}generateAuthorityKey(t){const{libraryState:{id:e}}=Bo.parseRequestState(this.cryptoImpl,t);return this.generateCacheKey(`${je.AUTHORITY}.${e}`)}generateNonceKey(t){const{libraryState:{id:e}}=Bo.parseRequestState(this.cryptoImpl,t);return this.generateCacheKey(`${je.NONCE_IDTOKEN}.${e}`)}generateStateKey(t){const{libraryState:{id:e}}=Bo.parseRequestState(this.cryptoImpl,t);return this.generateCacheKey(`${je.REQUEST_STATE}.${e}`)}getCachedAuthority(t){const e=this.generateStateKey(t),o=this.getTemporaryCache(e);if(!o)return null;const n=this.generateAuthorityKey(o);return this.getTemporaryCache(n)}updateCacheEntries(t,e,o,n,i){this.logger.trace("BrowserCacheManager.updateCacheEntries called");const s=this.generateStateKey(t);this.setTemporaryCache(s,t,!1);const a=this.generateNonceKey(t);this.setTemporaryCache(a,e,!1);const l=this.generateAuthorityKey(t);if(this.setTemporaryCache(l,o,!1),i){const c={credential:i.homeAccountId,type:po.HOME_ACCOUNT_ID};this.setTemporaryCache(je.CCS_CREDENTIAL,JSON.stringify(c),!0)}else if(n){const c={credential:n,type:po.UPN};this.setTemporaryCache(je.CCS_CREDENTIAL,JSON.stringify(c),!0)}}resetRequestCache(t){this.logger.trace("BrowserCacheManager.resetRequestCache called"),t&&(this.getKeys().forEach(e=>{e.indexOf(t)!==-1&&this.removeItem(e)}),this.removeItem(this.generateStateKey(t)),this.removeItem(this.generateNonceKey(t)),this.removeItem(this.generateAuthorityKey(t))),this.removeItem(this.generateCacheKey(je.REQUEST_PARAMS)),this.removeItem(this.generateCacheKey(je.ORIGIN_URI)),this.removeItem(this.generateCacheKey(je.URL_HASH)),this.removeItem(this.generateCacheKey(je.CORRELATION_ID)),this.removeItem(this.generateCacheKey(je.CCS_CREDENTIAL)),this.removeItem(this.generateCacheKey(je.NATIVE_REQUEST)),this.setInteractionInProgress(!1)}cleanRequestByState(t){if(this.logger.trace("BrowserCacheManager.cleanRequestByState called"),t){const e=this.generateStateKey(t),o=this.temporaryCacheStorage.getItem(e);this.logger.infoPii(`BrowserCacheManager.cleanRequestByState: Removing temporary cache items for state: ${o}`),this.resetRequestCache(o||B.EMPTY_STRING)}this.clearMsalCookies()}cleanRequestByInteractionType(t){this.logger.trace("BrowserCacheManager.cleanRequestByInteractionType called"),this.getKeys().forEach(e=>{if(e.indexOf(je.REQUEST_STATE)===-1)return;const o=this.temporaryCacheStorage.getItem(e);if(!o)return;const n=ay(this.cryptoImpl,o);n&&n.interactionType===t&&(this.logger.infoPii(`BrowserCacheManager.cleanRequestByInteractionType: Removing temporary cache items for state: ${o}`),this.resetRequestCache(o))}),this.clearMsalCookies(),this.setInteractionInProgress(!1)}cacheCodeRequest(t){this.logger.trace("BrowserCacheManager.cacheCodeRequest called");const e=Tp(JSON.stringify(t));this.setTemporaryCache(je.REQUEST_PARAMS,e,!0)}getCachedRequest(t){this.logger.trace("BrowserCacheManager.getCachedRequest called");const e=this.getTemporaryCache(je.REQUEST_PARAMS,!0);if(!e)throw ae(Hm);let o;try{o=JSON.parse(cn(e))}catch(n){throw this.logger.errorPii(`Attempted to parse: ${e}`),this.logger.error(`Parsing cached token request threw with error: ${n}`),ae(Vm)}if(this.removeItem(this.generateCacheKey(je.REQUEST_PARAMS)),!o.authority){const n=this.generateAuthorityKey(t),i=this.getTemporaryCache(n);if(!i)throw ae(wp);o.authority=i}return o}getCachedNativeRequest(){this.logger.trace("BrowserCacheManager.getCachedNativeRequest called");const t=this.getTemporaryCache(je.NATIVE_REQUEST,!0);if(!t)return this.logger.trace("BrowserCacheManager.getCachedNativeRequest: No cached native request found"),null;const e=this.validateAndParseJson(t);return e||(this.logger.error("BrowserCacheManager.getCachedNativeRequest: Unable to parse native request"),null)}isInteractionInProgress(t){const e=this.getInteractionInProgress();return t?e===this.clientId:!!e}getInteractionInProgress(){const t=`${B.CACHE_PREFIX}.${je.INTERACTION_STATUS_KEY}`;return this.getTemporaryCache(t,!1)}setInteractionInProgress(t){const e=`${B.CACHE_PREFIX}.${je.INTERACTION_STATUS_KEY}`;if(t){if(this.getInteractionInProgress())throw ae(Im);this.setTemporaryCache(e,this.clientId,!1)}else!t&&this.getInteractionInProgress()===this.clientId&&this.removeItem(e)}getLegacyLoginHint(){const t=this.getTemporaryCache(Tt.ADAL_ID_TOKEN);t&&(this.browserStorage.removeItem(Tt.ADAL_ID_TOKEN),this.logger.verbose("Cached ADAL id token retrieved."));const e=this.getTemporaryCache(Tt.ID_TOKEN,!0);e&&(this.removeItem(this.generateCacheKey(Tt.ID_TOKEN)),this.logger.verbose("Cached MSAL.js v1 id token retrieved"));const o=e||t;if(o){const n=Yi(o,cn);if(n.preferred_username)return this.logger.verbose("No SSO params used and ADAL/MSAL v1 token retrieved, setting ADAL/MSAL v1 preferred_username as loginHint"),n.preferred_username;if(n.upn)return this.logger.verbose("No SSO params used and ADAL/MSAL v1 token retrieved, setting ADAL/MSAL v1 upn as loginHint"),n.upn;this.logger.verbose("No SSO params used and ADAL/MSAL v1 token retrieved, however, no account hint claim found. Enable preferred_username or upn id token claim to get SSO.")}return null}updateCredentialCacheKey(t,e){const o=Ps(e);if(t!==o){const n=this.getItem(t);if(n)return this.removeItem(t),this.setItem(o,n),this.logger.verbose(`Updated an outdated ${e.credentialType} cache key`),o;this.logger.error(`Attempted to update an outdated ${e.credentialType} cache key but no item matching the outdated key was found in storage`)}return t}getRedirectRequestContext(){return this.getTemporaryCache(je.REDIRECT_CONTEXT,!0)}setRedirectRequestContext(t){this.setTemporaryCache(je.REDIRECT_CONTEXT,t,!0)}async hydrateCache(t,e){var a,l,c,u,d;const o=Zl((a=t.account)==null?void 0:a.homeAccountId,(l=t.account)==null?void 0:l.environment,t.idToken,this.clientId,t.tenantId);let n;e.claims&&(n=await this.cryptoImpl.hashString(e.claims));const i=Jl((c=t.account)==null?void 0:c.homeAccountId,t.account.environment,t.accessToken,this.clientId,t.tenantId,t.scopes.join(" "),((u=t.expiresOn)==null?void 0:u.getTime())||0,((d=t.extExpiresOn)==null?void 0:d.getTime())||0,cn,void 0,t.tokenType,void 0,e.sshKid,e.claims,n),s=new vr(void 0,o,i);return this.saveCacheRecord(s)}}const MT=(r,t)=>{const e={cacheLocation:_t.MemoryStorage,temporaryCacheLocation:_t.MemoryStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!1,claimsBasedCachingEnabled:!1};return new hd(r,e,sl,t)};/*! @azure/msal-browser v3.6.0 2023-12-01 */const _e={INITIALIZE_START:"msal:initializeStart",INITIALIZE_END:"msal:initializeEnd",ACCOUNT_ADDED:"msal:accountAdded",ACCOUNT_REMOVED:"msal:accountRemoved",LOGIN_START:"msal:loginStart",LOGIN_SUCCESS:"msal:loginSuccess",LOGIN_FAILURE:"msal:loginFailure",ACQUIRE_TOKEN_START:"msal:acquireTokenStart",ACQUIRE_TOKEN_SUCCESS:"msal:acquireTokenSuccess",ACQUIRE_TOKEN_FAILURE:"msal:acquireTokenFailure",ACQUIRE_TOKEN_NETWORK_START:"msal:acquireTokenFromNetworkStart",SSO_SILENT_START:"msal:ssoSilentStart",SSO_SILENT_SUCCESS:"msal:ssoSilentSuccess",SSO_SILENT_FAILURE:"msal:ssoSilentFailure",ACQUIRE_TOKEN_BY_CODE_START:"msal:acquireTokenByCodeStart",ACQUIRE_TOKEN_BY_CODE_SUCCESS:"msal:acquireTokenByCodeSuccess",ACQUIRE_TOKEN_BY_CODE_FAILURE:"msal:acquireTokenByCodeFailure",HANDLE_REDIRECT_START:"msal:handleRedirectStart",HANDLE_REDIRECT_END:"msal:handleRedirectEnd",POPUP_OPENED:"msal:popupOpened",LOGOUT_START:"msal:logoutStart",LOGOUT_SUCCESS:"msal:logoutSuccess",LOGOUT_FAILURE:"msal:logoutFailure",LOGOUT_END:"msal:logoutEnd",RESTORE_FROM_BFCACHE:"msal:restoreFromBFCache"};/*! @azure/msal-browser v3.6.0 2023-12-01 */class LT{constructor(t,e){this.eventCallbacks=new Map,this.logger=t,this.browserCrypto=e,this.listeningToStorageEvents=!1,this.handleAccountCacheChange=this.handleAccountCacheChange.bind(this)}addEventCallback(t){if(typeof window<"u"){const e=ni();return this.eventCallbacks.set(e,t),this.logger.verbose(`Event callback registered with id: ${e}`),e}return null}removeEventCallback(t){this.eventCallbacks.delete(t),this.logger.verbose(`Event callback ${t} removed.`)}enableAccountStorageEvents(){typeof window>"u"||(this.listeningToStorageEvents?this.logger.verbose("Account storage listener already registered."):(this.logger.verbose("Adding account storage listener."),this.listeningToStorageEvents=!0,window.addEventListener("storage",this.handleAccountCacheChange)))}disableAccountStorageEvents(){typeof window>"u"||(this.listeningToStorageEvents?(this.logger.verbose("Removing account storage listener."),window.removeEventListener("storage",this.handleAccountCacheChange),this.listeningToStorageEvents=!1):this.logger.verbose("No account storage listener registered."))}emitEvent(t,e,o,n){if(typeof window<"u"){const i={eventType:t,interactionType:e||null,payload:o||null,error:n||null,timestamp:Date.now()};this.logger.info(`Emitting event: ${t}`),this.eventCallbacks.forEach((s,a)=>{this.logger.verbose(`Emitting event to callback ${a}: ${t}`),s.apply(null,[i])})}}handleAccountCacheChange(t){try{const e=t.newValue||t.oldValue;if(!e)return;const o=JSON.parse(e);if(typeof o!="object"||!mt.isAccountEntity(o))return;const i=_n.toObject(new mt,o).getAccountInfo();!t.oldValue&&t.newValue?(this.logger.info("Account was added to cache in a different window"),this.emitEvent(_e.ACCOUNT_ADDED,void 0,i)):!t.newValue&&t.oldValue&&(this.logger.info("Account was removed from cache in a different window"),this.emitEvent(_e.ACCOUNT_REMOVED,void 0,i))}catch{return}}}/*! @azure/msal-browser v3.6.0 2023-12-01 */class ly{constructor(t,e,o,n,i,s,a,l,c){this.config=t,this.browserStorage=e,this.browserCrypto=o,this.networkClient=this.config.system.networkClient,this.eventHandler=i,this.navigationClient=s,this.nativeMessageHandler=l,this.correlationId=c||ni(),this.logger=n.clone(Go.MSAL_SKU,Rp,this.correlationId),this.performanceClient=a}async clearCacheOnLogout(t){if(t){mt.accountInfoIsEqual(t,this.browserStorage.getActiveAccount(),!1)&&(this.logger.verbose("Setting active account to null"),this.browserStorage.setActiveAccount(null));try{await this.browserStorage.removeAccount(mt.generateAccountCacheKey(t)),this.logger.verbose("Cleared cache items belonging to the account provided in the logout request.")}catch{this.logger.error("Account provided in logout request was not found. Local cache unchanged.")}}else try{this.logger.verbose("No account provided in logout request, clearing all cache items.",this.correlationId),await this.browserStorage.clear(),await this.browserCrypto.clearKeystore()}catch{this.logger.error("Attempted to clear all MSAL cache items and failed. Local cache unchanged.")}}async initializeBaseRequest(t,e){this.performanceClient.addQueueMeasurement(G.InitializeBaseRequest,this.correlationId);const o=t.authority||this.config.auth.authority;e&&await this.validateRequestAuthority(o,e);const n=[...t&&t.scopes||[]],i={...t,correlationId:this.correlationId,authority:o,scopes:n};if(!i.authenticationScheme)i.authenticationScheme=$e.BEARER,this.logger.verbose(`Authentication Scheme wasn't explicitly set in request, defaulting to "Bearer" request`);else{if(i.authenticationScheme===$e.SSH){if(!t.sshJwk)throw Ke(ec);if(!t.sshKid)throw Ke(um)}this.logger.verbose(`Authentication Scheme set to "${i.authenticationScheme}" as configured in Auth request`)}return this.config.cache.claimsBasedCachingEnabled&&t.claims&&!Vo.isEmptyObj(t.claims)&&(i.requestedClaimsHash=await this.browserCrypto.hashString(t.claims)),i}getRedirectUri(t){this.logger.verbose("getRedirectUri called");const e=t||this.config.auth.redirectUri||Rn();return He.getAbsoluteUrl(e,Rn())}async validateRequestAuthority(t,e){if(!(await this.getDiscoveredAuthority(t)).isAlias(e.environment))throw Ke(hm)}initializeServerTelemetryManager(t,e){this.logger.verbose("initializeServerTelemetryManager called");const o={clientId:this.config.auth.clientId,correlationId:this.correlationId,apiId:t,forceRefresh:e||!1,wrapperSKU:this.browserStorage.getWrapperMetadata()[0],wrapperVer:this.browserStorage.getWrapperMetadata()[1]};return new dl(o,this.browserStorage)}async getDiscoveredAuthority(t){this.logger.verbose("getDiscoveredAuthority called");const e={protocolMode:this.config.auth.protocolMode,OIDCOptions:this.config.auth.OIDCOptions,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata};return t?(this.logger.verbose("Creating discovered authority with request authority"),xi.createDiscoveredInstance(t,this.config.system.networkClient,this.browserStorage,e,this.logger)):(this.logger.verbose("Creating discovered authority with configured authority"),xi.createDiscoveredInstance(this.config.auth.authority,this.config.system.networkClient,this.browserStorage,e,this.logger))}}/*! @azure/msal-browser v3.6.0 2023-12-01 */const xT=32;async function FT(r,t,e){r.addQueueMeasurement(G.GeneratePkceCodes,e);const o=qi(NT,G.GenerateCodeVerifier,t,r,e)(r,t,e),n=await re(GT,G.GenerateCodeChallengeFromVerifier,t,r,e)(o,r,t,e);return{verifier:o,challenge:n}}function NT(r,t,e){try{const o=new Uint8Array(xT);return qi(RT,G.GetRandomValues,t,r,e)(o),fl(o)}catch{throw ae(yp)}}async function GT(r,t,e,o){t.addQueueMeasurement(G.GenerateCodeChallengeFromVerifier,o);try{const n=await re(ny,G.Sha256Digest,e,t,o)(r,t,o);return fl(new Uint8Array(n))}catch{throw ae(yp)}}/*! @azure/msal-browser v3.6.0 2023-12-01 */class $r extends ly{async initializeAuthorizationCodeRequest(t){this.performanceClient.addQueueMeasurement(G.StandardInteractionClientInitializeAuthorizationCodeRequest,this.correlationId);const e=await re(FT,G.GeneratePkceCodes,this.logger,this.performanceClient,this.correlationId)(this.performanceClient,this.logger,this.correlationId),o={...t,redirectUri:t.redirectUri,code:B.EMPTY_STRING,codeVerifier:e.verifier};return t.codeChallenge=e.challenge,t.codeChallengeMethod=B.S256_CODE_CHALLENGE_METHOD,o}initializeLogoutRequest(t){this.logger.verbose("initializeLogoutRequest called",t==null?void 0:t.correlationId);const e={correlationId:this.correlationId||ni(),...t};if(t)if(t.logoutHint)this.logger.verbose("logoutHint has already been set in logoutRequest");else if(t.account){const o=this.getLogoutHintFromIdTokenClaims(t.account);o&&(this.logger.verbose("Setting logoutHint to login_hint ID Token Claim value for the account provided"),e.logoutHint=o)}else this.logger.verbose("logoutHint was not set and account was not passed into logout request, logoutHint will not be set");else this.logger.verbose("logoutHint will not be set since no logout request was configured");return!t||t.postLogoutRedirectUri!==null?t&&t.postLogoutRedirectUri?(this.logger.verbose("Setting postLogoutRedirectUri to uri set on logout request",e.correlationId),e.postLogoutRedirectUri=He.getAbsoluteUrl(t.postLogoutRedirectUri,Rn())):this.config.auth.postLogoutRedirectUri===null?this.logger.verbose("postLogoutRedirectUri configured as null and no uri set on request, not passing post logout redirect",e.correlationId):this.config.auth.postLogoutRedirectUri?(this.logger.verbose("Setting postLogoutRedirectUri to configured uri",e.correlationId),e.postLogoutRedirectUri=He.getAbsoluteUrl(this.config.auth.postLogoutRedirectUri,Rn())):(this.logger.verbose("Setting postLogoutRedirectUri to current page",e.correlationId),e.postLogoutRedirectUri=He.getAbsoluteUrl(Rn(),Rn())):this.logger.verbose("postLogoutRedirectUri passed as null, not setting post logout redirect uri",e.correlationId),e}getLogoutHintFromIdTokenClaims(t){const e=t.idTokenClaims;if(e){if(e.login_hint)return e.login_hint;this.logger.verbose("The ID Token Claims tied to the provided account do not contain a login_hint claim, logoutHint will not be added to logout request")}else this.logger.verbose("The provided account does not contain ID Token Claims, logoutHint will not be added to logout request");return null}async createAuthCodeClient(t,e,o){this.performanceClient.addQueueMeasurement(G.StandardInteractionClientCreateAuthCodeClient,this.correlationId);const n=await re(this.getClientConfiguration.bind(this),G.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,this.correlationId)(t,e,o);return new Sm(n,this.performanceClient)}async getClientConfiguration(t,e,o){this.performanceClient.addQueueMeasurement(G.StandardInteractionClientGetClientConfiguration,this.correlationId);const n=await re(this.getDiscoveredAuthority.bind(this),G.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,this.correlationId)(e,o),i=this.config.system.loggerOptions;return{authOptions:{clientId:this.config.auth.clientId,authority:n,clientCapabilities:this.config.auth.clientCapabilities},systemOptions:{tokenRenewalOffsetSeconds:this.config.system.tokenRenewalOffsetSeconds,preventCorsPreflight:!0},loggerOptions:{loggerCallback:i.loggerCallback,piiLoggingEnabled:i.piiLoggingEnabled,logLevel:i.logLevel,correlationId:this.correlationId},cacheOptions:{claimsBasedCachingEnabled:this.config.cache.claimsBasedCachingEnabled},cryptoInterface:this.browserCrypto,networkInterface:this.networkClient,storageInterface:this.browserStorage,serverTelemetryManager:t,libraryInfo:{sku:Go.MSAL_SKU,version:Rp,cpu:B.EMPTY_STRING,os:B.EMPTY_STRING},telemetry:this.config.telemetry}}async getDiscoveredAuthority(t,e){this.performanceClient.addQueueMeasurement(G.StandardInteractionClientGetDiscoveredAuthority,this.correlationId);const o={protocolMode:this.config.auth.protocolMode,OIDCOptions:this.config.auth.OIDCOptions,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata,skipAuthorityMetadataCache:this.config.auth.skipAuthorityMetadataCache},n=t||this.config.auth.authority,i=Ft.generateAuthority(n,e||this.config.auth.azureCloudOptions);return re(xi.createDiscoveredInstance.bind(xi),G.AuthorityFactoryCreateDiscoveredInstance,this.logger,this.performanceClient,this.correlationId)(i,this.config.system.networkClient,this.browserStorage,o,this.logger,this.performanceClient,this.correlationId)}async initializeAuthorizationRequest(t,e){this.performanceClient.addQueueMeasurement(G.StandardInteractionClientInitializeAuthorizationRequest,this.correlationId);const o=this.getRedirectUri(t.redirectUri),n={interactionType:e},i=Bo.setRequestState(this.browserCrypto,t&&t.state||B.EMPTY_STRING,n),a={...await re(this.initializeBaseRequest.bind(this),G.InitializeBaseRequest,this.logger,this.performanceClient,this.correlationId)(t),redirectUri:o,state:i,nonce:t.nonce||ni(),responseMode:this.config.auth.OIDCOptions.serverResponseType},l=t.account||this.browserStorage.getActiveAccount();if(l&&(this.logger.verbose("Setting validated request account",this.correlationId),this.logger.verbosePii(`Setting validated request account: ${l.homeAccountId}`,this.correlationId),a.account=l),!a.loginHint&&!l){const c=this.browserStorage.getLegacyLoginHint();c&&(a.loginHint=c)}return a}}/*! @azure/msal-browser v3.6.0 2023-12-01 */const kT="ContentError",cy="user_switch";/*! @azure/msal-browser v3.6.0 2023-12-01 */const HT="USER_INTERACTION_REQUIRED",VT="USER_CANCEL",BT="NO_NETWORK",UT="PERSISTENT_ERROR",jT="DISABLED",WT="ACCOUNT_UNAVAILABLE";/*! @azure/msal-browser v3.6.0 2023-12-01 */const zT=-2147186943,$T={[cy]:"User attempted to switch accounts in the native broker, which is not allowed. All new accounts must sign-in through the standard web flow first, please try again."};class Sn extends et{constructor(t,e,o){super(t,e),Object.setPrototypeOf(this,Sn.prototype),this.name="NativeAuthError",this.ext=o}}function cr(r){if(r.ext&&r.ext.status&&(r.ext.status===UT||r.ext.status===jT)||r.ext&&r.ext.error&&r.ext.error===zT)return!0;switch(r.errorCode){case kT:return!0;default:return!1}}function fd(r,t,e){if(e&&e.status)switch(e.status){case WT:return _m(wm);case HT:return new ln(r,t);case VT:return ae(Ni);case BT:return ae(pl)}return new Sn(r,$T[r]||t,e)}/*! @azure/msal-browser v3.6.0 2023-12-01 */class uy extends $r{async acquireToken(t){this.performanceClient.addQueueMeasurement(G.SilentCacheClientAcquireToken,t.correlationId);const e=this.initializeServerTelemetryManager(Xe.acquireTokenSilent_silentFlow),o=await this.createSilentFlowClient(e,t.authority,t.azureCloudOptions);this.logger.verbose("Silent auth client created");try{const i=(await re(o.acquireCachedToken.bind(o),G.SilentFlowClientAcquireCachedToken,this.logger,this.performanceClient,t.correlationId)(t))[0];return this.performanceClient.addFields({fromCache:!0},t.correlationId),i}catch(n){throw n instanceof zr&&n.errorCode===_p&&this.logger.verbose("Signing keypair for bound access token not found. Refreshing bound access token and generating a new crypto keypair."),n}}logout(t){this.logger.verbose("logoutRedirect called");const e=this.initializeLogoutRequest(t);return this.clearCacheOnLogout(e==null?void 0:e.account)}async createSilentFlowClient(t,e,o){const n=await re(this.getClientConfiguration.bind(this),G.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,this.correlationId)(t,e,o);return new KR(n,this.performanceClient)}async initializeSilentRequest(t,e){this.performanceClient.addQueueMeasurement(G.InitializeSilentRequest,this.correlationId);const o=await re(this.initializeBaseRequest.bind(this),G.InitializeBaseRequest,this.logger,this.performanceClient,this.correlationId)(t,e);return{...t,...o,account:e,forceRefresh:t.forceRefresh||!1}}}/*! @azure/msal-browser v3.6.0 2023-12-01 */const Hc={BROKER_CLIENT_ID:"brk_client_id",BROKER_REDIRECT_URI:"brk_redirect_uri"};class mr extends ly{constructor(t,e,o,n,i,s,a,l,c,u,d,p){super(t,e,o,n,i,s,l,c,p),this.apiId=a,this.accountId=u,this.nativeMessageHandler=c,this.nativeStorageManager=d,this.silentCacheClient=new uy(t,this.nativeStorageManager,o,n,i,s,l,c,p)}async acquireToken(t){this.performanceClient.addQueueMeasurement(G.NativeInteractionClientAcquireToken,t.correlationId),this.logger.trace("NativeInteractionClient - acquireToken called.");const e=this.performanceClient.startMeasurement(G.NativeInteractionClientAcquireToken,t.correlationId),o=jt.nowSeconds(),n=await this.initializeNativeRequest(t);try{const l=await this.acquireTokensFromCache(this.accountId,n);return e.end({success:!0,isNativeBroker:!1,fromCache:!0}),l}catch{this.logger.info("MSAL internal Cache does not contain tokens, proceed to make a native call")}const i={method:Ei.GetToken,request:n},s=await this.nativeMessageHandler.sendMessage(i),a=this.validateNativeResponse(s);return this.handleNativeResponse(a,n,o).then(l=>(e.end({success:!0,isNativeBroker:!0,requestId:l.requestId}),l)).catch(l=>{throw e.end({success:!1,errorCode:l.errorCode,subErrorCode:l.subError,isNativeBroker:!0}),l})}createSilentCacheRequest(t,e){return{authority:t.authority,correlationId:this.correlationId,scopes:dt.fromString(t.scope).asArray(),account:e,forceRefresh:!1}}async acquireTokensFromCache(t,e){if(!t)throw this.logger.warning("NativeInteractionClient:acquireTokensFromCache - No nativeAccountId provided"),J(td);const o=this.browserStorage.getBaseAccountInfo({nativeAccountId:t});if(!o)throw J(td);try{const n=this.createSilentCacheRequest(e,o),i=await this.silentCacheClient.acquireToken(n),s={...o,idTokenClaims:i==null?void 0:i.idTokenClaims};return{...i,account:s}}catch(n){throw n}}async acquireTokenRedirect(t){this.logger.trace("NativeInteractionClient - acquireTokenRedirect called.");const e=await this.initializeNativeRequest(t),o={method:Ei.GetToken,request:e};try{const s=await this.nativeMessageHandler.sendMessage(o);this.validateNativeResponse(s)}catch(s){if(s instanceof Sn&&cr(s))throw s}this.browserStorage.setTemporaryCache(je.NATIVE_REQUEST,JSON.stringify(e),!0);const n={apiId:Xe.acquireTokenRedirect,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},i=this.config.auth.navigateToLoginRequestUrl?window.location.href:this.getRedirectUri(t.redirectUri);await this.navigationClient.navigateExternal(i,n)}async handleRedirectPromise(){if(this.logger.trace("NativeInteractionClient - handleRedirectPromise called."),!this.browserStorage.isInteractionInProgress(!0))return this.logger.info("handleRedirectPromise called but there is no interaction in progress, returning null."),null;const t=this.browserStorage.getCachedNativeRequest();if(!t)return this.logger.verbose("NativeInteractionClient - handleRedirectPromise called but there is no cached request, returning null."),null;const{prompt:e,...o}=t;e&&this.logger.verbose("NativeInteractionClient - handleRedirectPromise called and prompt was included in the original request, removing prompt from cached request to prevent second interaction with native broker window."),this.browserStorage.removeItem(this.browserStorage.generateCacheKey(je.NATIVE_REQUEST));const n={method:Ei.GetToken,request:o},i=jt.nowSeconds();try{this.logger.verbose("NativeInteractionClient - handleRedirectPromise sending message to native broker.");const s=await this.nativeMessageHandler.sendMessage(n);this.validateNativeResponse(s);const a=this.handleNativeResponse(s,o,i);return this.browserStorage.setInteractionInProgress(!1),await a}catch(s){throw this.browserStorage.setInteractionInProgress(!1),s}}logout(){return this.logger.trace("NativeInteractionClient - logout called."),Promise.reject("Logout not implemented yet")}async handleNativeResponse(t,e,o){if(this.logger.trace("NativeInteractionClient - handleNativeResponse called."),t.account.id!==e.accountId)throw fd(cy);const n=await this.getDiscoveredAuthority(e.authority),i=Yi(t.id_token,cn),s=this.createHomeAccountIdentifier(t,i),a=gp(this.browserStorage,n,s,i,cn,t.client_info,i.tid,void 0,t.account.id,this.logger),l=await this.generateAuthenticationResult(t,e,i,a,n.canonicalAuthority,o);return this.cacheAccount(a),this.cacheNativeTokens(t,e,s,i,l.accessToken,l.tenantId,o),l}createHomeAccountIdentifier(t,e){return mt.generateHomeAccountId(t.client_info||B.EMPTY_STRING,No.Default,this.logger,this.browserCrypto,e)}generateScopes(t,e){return t.scope?dt.fromString(t.scope):dt.fromString(e.scope)}async generatePopAccessToken(t,e){if(e.tokenType===$e.POP){if(t.shr)return this.logger.trace("handleNativeServerResponse: SHR is enabled in native layer"),t.shr;const o=new Or(this.browserCrypto),n={resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,shrNonce:e.shrNonce};if(!e.keyId)throw J(op);return o.signPopToken(t.access_token,e.keyId,n)}else return t.access_token}async generateAuthenticationResult(t,e,o,n,i,s){const a=this.addTelemetryFromNativeResponse(t),l=t.scope?dt.fromString(t.scope):dt.fromString(e.scope),c=t.account.properties||{},u=c.UID||o.oid||o.sub||B.EMPTY_STRING,d=c.TenantId||o.tid||B.EMPTY_STRING,p=pp(n.getAccountInfo(),void 0,o),h=await this.generatePopAccessToken(t,e),f=e.tokenType===$e.POP?$e.POP:$e.BEARER;return{authority:i,uniqueId:u,tenantId:d,scopes:l.asArray(),account:p,idToken:t.id_token,idTokenClaims:o,accessToken:h,fromCache:a?this.isResponseFromCache(a):!1,expiresOn:new Date(Number(s+t.expires_in)*1e3),tokenType:f,correlationId:this.correlationId,state:t.state,fromNativeBroker:!0}}cacheAccount(t){this.browserStorage.setAccount(t),this.browserStorage.removeAccountContext(t).catch(e=>{this.logger.error(`Error occurred while removing account context from browser storage. ${e}`)})}cacheNativeTokens(t,e,o,n,i,s,a){const l=Zl(o,e.authority,t.id_token||"",e.clientId,n.tid||""),c=e.tokenType===$e.POP?B.SHR_NONCE_VALIDITY:(typeof t.expires_in=="string"?parseInt(t.expires_in,10):t.expires_in)||0,u=a+c,d=this.generateScopes(t,e),p=Jl(o,e.authority,i,e.clientId,n.tid||s,d.printScopes(),u,0,cn),h=new vr(void 0,l,p);this.nativeStorageManager.saveCacheRecord(h,e.storeInCache)}addTelemetryFromNativeResponse(t){const e=this.getMATSFromResponse(t);return e?(this.performanceClient.addFields({extensionId:this.nativeMessageHandler.getExtensionId(),extensionVersion:this.nativeMessageHandler.getExtensionVersion(),matsBrokerVersion:e.broker_version,matsAccountJoinOnStart:e.account_join_on_start,matsAccountJoinOnEnd:e.account_join_on_end,matsDeviceJoin:e.device_join,matsPromptBehavior:e.prompt_behavior,matsApiErrorCode:e.api_error_code,matsUiVisible:e.ui_visible,matsSilentCode:e.silent_code,matsSilentBiSubCode:e.silent_bi_sub_code,matsSilentMessage:e.silent_message,matsSilentStatus:e.silent_status,matsHttpStatus:e.http_status,matsHttpEventCount:e.http_event_count},this.correlationId),e):null}validateNativeResponse(t){if(t.hasOwnProperty("access_token")&&t.hasOwnProperty("id_token")&&t.hasOwnProperty("client_info")&&t.hasOwnProperty("account")&&t.hasOwnProperty("scope")&&t.hasOwnProperty("expires_in"))return t;throw xv(Qd,"Response missing expected properties.")}getMATSFromResponse(t){if(t.properties.MATS)try{return JSON.parse(t.properties.MATS)}catch{this.logger.error("NativeInteractionClient - Error parsing MATS telemetry, returning null instead")}return null}isResponseFromCache(t){return typeof t.is_cached>"u"?(this.logger.verbose("NativeInteractionClient - MATS telemetry does not contain field indicating if response was served from cache. Returning false."),!1):!!t.is_cached}async initializeNativeRequest(t){this.logger.trace("NativeInteractionClient - initializeNativeRequest called");const e=t.authority||this.config.auth.authority;t.account&&await this.validateRequestAuthority(e,t.account);const o=new He(e);o.validateAsUri();const{scopes:n,...i}=t,s=new dt(n||[]);s.appendScopes(aa);const a=()=>{switch(this.apiId){case Xe.ssoSilent:case Xe.acquireTokenSilent_silentFlow:return this.logger.trace("initializeNativeRequest: silent request sets prompt to none"),kt.NONE}if(!t.prompt){this.logger.trace("initializeNativeRequest: prompt was not provided");return}switch(t.prompt){case kt.NONE:case kt.CONSENT:case kt.LOGIN:return this.logger.trace("initializeNativeRequest: prompt is compatible with native flow"),t.prompt;default:throw this.logger.trace(`initializeNativeRequest: prompt = ${t.prompt} is not compatible with native flow`),ae(Xm)}},l={...i,accountId:this.accountId,clientId:this.config.auth.clientId,authority:o.urlString,scope:s.printScopes(),redirectUri:this.getRedirectUri(t.redirectUri),prompt:a(),correlationId:this.correlationId,tokenType:t.authenticationScheme,windowTitleSubstring:document.title,extraParameters:{...t.extraQueryParameters,...t.tokenQueryParameters},extendedExpiryToken:!1};if(this.handleExtraBrokerParams(l),l.extraParameters=l.extraParameters||{},l.extraParameters.telemetry=Ds.MATS_TELEMETRY,t.authenticationScheme===$e.POP){const c={resourceRequestUri:t.resourceRequestUri,resourceRequestMethod:t.resourceRequestMethod,shrClaims:t.shrClaims,shrNonce:t.shrNonce},u=new Or(this.browserCrypto),d=await re(u.generateCnf.bind(u),G.PopTokenGenerateCnf,this.logger,this.performanceClient,this.correlationId)(c,this.logger);l.reqCnf=d.reqCnfHash,l.keyId=d.kid}return l}handleExtraBrokerParams(t){if(t.extraParameters&&t.extraParameters.hasOwnProperty(Hc.BROKER_CLIENT_ID)&&t.extraParameters.hasOwnProperty(Hc.BROKER_REDIRECT_URI)&&t.extraParameters.hasOwnProperty(Ar)){const e=t.extraParameters[Ar],o=t.redirectUri,n=t.extraParameters[Hc.BROKER_REDIRECT_URI];t.extraParameters={child_client_id:e,child_redirect_uri:o},t.redirectUri=n}}}/*! @azure/msal-browser v3.6.0 2023-12-01 */class rn{constructor(t,e,o,n){this.logger=t,this.handshakeTimeoutMs=e,this.extensionId=n,this.resolvers=new Map,this.handshakeResolvers=new Map,this.messageChannel=new MessageChannel,this.windowListener=this.onWindowMessage.bind(this),this.performanceClient=o,this.handshakeEvent=o.startMeasurement(G.NativeMessageHandlerHandshake)}async sendMessage(t){this.logger.trace("NativeMessageHandler - sendMessage called.");const e={channel:Ds.CHANNEL_ID,extensionId:this.extensionId,responseId:ni(),body:t};return this.logger.trace("NativeMessageHandler - Sending request to browser extension"),this.logger.tracePii(`NativeMessageHandler - Sending request to browser extension: ${JSON.stringify(e)}`),this.messageChannel.port1.postMessage(e),new Promise((o,n)=>{this.resolvers.set(e.responseId,{resolve:o,reject:n})})}static async createProvider(t,e,o){t.trace("NativeMessageHandler - createProvider called.");try{const n=new rn(t,e,o,Ds.PREFERRED_EXTENSION_ID);return await n.sendHandshakeRequest(),n}catch{const i=new rn(t,e,o);return await i.sendHandshakeRequest(),i}}async sendHandshakeRequest(){this.logger.trace("NativeMessageHandler - sendHandshakeRequest called."),window.addEventListener("message",this.windowListener,!1);const t={channel:Ds.CHANNEL_ID,extensionId:this.extensionId,responseId:ni(),body:{method:Ei.HandshakeRequest}};return this.handshakeEvent.add({extensionId:this.extensionId,extensionHandshakeTimeoutMs:this.handshakeTimeoutMs}),this.messageChannel.port1.onmessage=e=>{this.onChannelMessage(e)},window.postMessage(t,window.origin,[this.messageChannel.port2]),new Promise((e,o)=>{this.handshakeResolvers.set(t.responseId,{resolve:e,reject:o}),this.timeoutId=window.setTimeout(()=>{window.removeEventListener("message",this.windowListener,!1),this.messageChannel.port1.close(),this.messageChannel.port2.close(),this.handshakeEvent.end({extensionHandshakeTimedOut:!0,success:!1}),o(ae(Ym)),this.handshakeResolvers.delete(t.responseId)},this.handshakeTimeoutMs)})}onWindowMessage(t){if(this.logger.trace("NativeMessageHandler - onWindowMessage called"),t.source!==window)return;const e=t.data;if(!(!e.channel||e.channel!==Ds.CHANNEL_ID)&&!(e.extensionId&&e.extensionId!==this.extensionId)&&e.body.method===Ei.HandshakeRequest){const o=this.handshakeResolvers.get(e.responseId);if(!o){this.logger.trace(`NativeMessageHandler.onWindowMessage - resolver can't be found for request ${e.responseId}`);return}this.logger.verbose(e.extensionId?`Extension with id: ${e.extensionId} not installed`:"No extension installed"),clearTimeout(this.timeoutId),this.messageChannel.port1.close(),this.messageChannel.port2.close(),window.removeEventListener("message",this.windowListener,!1),this.handshakeEvent.end({success:!1,extensionInstalled:!1}),o.reject(ae(qm))}}onChannelMessage(t){this.logger.trace("NativeMessageHandler - onChannelMessage called.");const e=t.data,o=this.resolvers.get(e.responseId),n=this.handshakeResolvers.get(e.responseId);try{const i=e.body.method;if(i===Ei.Response){if(!o)return;const s=e.body.response;if(this.logger.trace("NativeMessageHandler - Received response from browser extension"),this.logger.tracePii(`NativeMessageHandler - Received response from browser extension: ${JSON.stringify(s)}`),s.status!=="Success")o.reject(fd(s.code,s.description,s.ext));else if(s.result)s.result.code&&s.result.description?o.reject(fd(s.result.code,s.result.description,s.result.ext)):o.resolve(s.result);else throw xv(Qd,"Event does not contain result.");this.resolvers.delete(e.responseId)}else if(i===Ei.HandshakeResponse){if(!n){this.logger.trace(`NativeMessageHandler.onChannelMessage - resolver can't be found for request ${e.responseId}`);return}clearTimeout(this.timeoutId),window.removeEventListener("message",this.windowListener,!1),this.extensionId=e.extensionId,this.extensionVersion=e.body.version,this.logger.verbose(`NativeMessageHandler - Received HandshakeResponse from extension: ${this.extensionId}`),this.handshakeEvent.end({extensionInstalled:!0,success:!0}),n.resolve(),this.handshakeResolvers.delete(e.responseId)}}catch(i){this.logger.error("Error parsing response from WAM Extension"),this.logger.errorPii(`Error parsing response from WAM Extension: ${i}`),this.logger.errorPii(`Unable to parse ${t}`),o?o.reject(i):n&&n.reject(i)}}getExtensionId(){return this.extensionId}getExtensionVersion(){return this.extensionVersion}static isNativeAvailable(t,e,o,n){if(e.trace("isNativeAvailable called"),!t.system.allowNativeBroker)return e.trace("isNativeAvailable: allowNativeBroker is not enabled, returning false"),!1;if(!o)return e.trace("isNativeAvailable: WAM extension provider is not initialized, returning false"),!1;if(n)switch(n){case $e.BEARER:case $e.POP:return e.trace("isNativeAvailable: authenticationScheme is supported, returning true"),!0;default:return e.trace("isNativeAvailable: authenticationScheme is not supported, returning false"),!1}return!0}}/*! @azure/msal-browser v3.6.0 2023-12-01 */class Op{constructor(t,e,o,n,i){this.authModule=t,this.browserStorage=e,this.authCodeRequest=o,this.logger=n,this.performanceClient=i}async handleCodeResponse(t,e){this.performanceClient.addQueueMeasurement(G.HandleCodeResponse,e.correlationId);let o;try{o=this.authModule.handleFragmentResponse(t,e.state)}catch(n){throw n instanceof oi&&n.subError===Ni?ae(Ni):n}return re(this.handleCodeResponseFromServer.bind(this),G.HandleCodeResponseFromServer,this.logger,this.performanceClient,e.correlationId)(o,e)}async handleCodeResponseFromServer(t,e,o=!0){if(this.performanceClient.addQueueMeasurement(G.HandleCodeResponseFromServer,e.correlationId),this.logger.trace("InteractionHandler.handleCodeResponseFromServer called"),this.authCodeRequest.code=t.code,t.cloud_instance_host_name&&await re(this.authModule.updateAuthority.bind(this.authModule),G.UpdateTokenEndpointAuthority,this.logger,this.performanceClient,e.correlationId)(t.cloud_instance_host_name,e.correlationId),o&&(t.nonce=e.nonce||void 0),t.state=e.state,t.client_info)this.authCodeRequest.clientInfo=t.client_info;else{const i=this.createCcsCredentials(e);i&&(this.authCodeRequest.ccsCredential=i)}return await re(this.authModule.acquireToken.bind(this.authModule),G.AuthClientAcquireToken,this.logger,this.performanceClient,e.correlationId)(this.authCodeRequest,t)}createCcsCredentials(t){return t.account?{credential:t.account.homeAccountId,type:po.HOME_ACCOUNT_ID}:t.loginHint?{credential:t.loginHint,type:po.UPN}:null}}/*! @azure/msal-browser v3.6.0 2023-12-01 */function dy(r,t,e){const o=ll(r);if(!o)throw gm(r)?(e.error(`A ${t} is present in the iframe but it does not contain known properties. It's likely that the ${t} has been replaced by code running on the redirectUri page.`),e.errorPii(`The ${t} detected is: ${r}`),ae(Am)):(e.error(`The request has returned to the redirectUri but a ${t} is not present. It's likely that the ${t} has been removed or the page has been redirected by code running on the redirectUri page.`),ae(bm));return o}function KT(r,t,e){if(!r.state)throw ae(Cp);const o=ay(t,r.state);if(!o)throw ae(Om);if(o.interactionType!==e)throw ae(Pm)}/*! @azure/msal-browser v3.6.0 2023-12-01 */class YT extends $r{constructor(t,e,o,n,i,s,a,l,c,u){super(t,e,o,n,i,s,a,c,u),this.unloadWindow=this.unloadWindow.bind(this),this.nativeStorage=l}acquireToken(t){try{const e=this.generatePopupName(t.scopes||aa,t.authority||this.config.auth.authority),o=t.popupWindowAttributes||{};if(this.config.system.asyncPopups)return this.logger.verbose("asyncPopups set to true, acquiring token"),this.acquireTokenPopupAsync(t,e,o);{this.logger.verbose("asyncPopup set to false, opening popup before acquiring token");const n=this.openSizedPopup("about:blank",e,o);return this.acquireTokenPopupAsync(t,e,o,n)}}catch(e){return Promise.reject(e)}}logout(t){try{this.logger.verbose("logoutPopup called");const e=this.initializeLogoutRequest(t),o=this.generateLogoutPopupName(e),n=t&&t.authority,i=t&&t.mainWindowRedirectUri,s=(t==null?void 0:t.popupWindowAttributes)||{};if(this.config.system.asyncPopups)return this.logger.verbose("asyncPopups set to true"),this.logoutPopupAsync(e,o,s,n,void 0,i);{this.logger.verbose("asyncPopup set to false, opening popup");const a=this.openSizedPopup("about:blank",o,s);return this.logoutPopupAsync(e,o,s,n,a,i)}}catch(e){return Promise.reject(e)}}async acquireTokenPopupAsync(t,e,o,n){this.logger.verbose("acquireTokenPopupAsync called");const i=this.initializeServerTelemetryManager(Xe.acquireTokenPopup),s=await re(this.initializeAuthorizationRequest.bind(this),G.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,this.correlationId)(t,le.Popup);ey(s.authority);try{const a=await re(this.initializeAuthorizationCodeRequest.bind(this),G.StandardInteractionClientInitializeAuthorizationCodeRequest,this.logger,this.performanceClient,this.correlationId)(s),l=await re(this.createAuthCodeClient.bind(this),G.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)(i,s.authority,s.azureCloudOptions),c=rn.isNativeAvailable(this.config,this.logger,this.nativeMessageHandler,t.authenticationScheme);let u;c&&(u=this.performanceClient.startMeasurement(G.FetchAccountIdWithNativeBroker,t.correlationId));const d=await l.getAuthCodeUrl({...s,nativeBroker:c}),p=new Op(l,this.browserStorage,a,this.logger,this.performanceClient),h={popup:n,popupName:e,popupWindowAttributes:o},f=this.initiateAuthRequest(d,h);this.eventHandler.emitEvent(_e.POPUP_OPENED,le.Popup,{popupWindow:f},null);const g=await this.monitorPopupForHash(f),_=qi(dy,G.DeserializeResponse,this.logger,this.performanceClient,this.correlationId)(g,this.config.auth.OIDCOptions.serverResponseType,this.logger);if(tn.removeThrottle(this.browserStorage,this.config.auth.clientId,a),_.accountId){if(this.logger.verbose("Account id found in hash, calling WAM for token"),u&&u.end({success:!0,isNativeBroker:!0}),!this.nativeMessageHandler)throw ae(ca);const E=new mr(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,Xe.acquireTokenPopup,this.performanceClient,this.nativeMessageHandler,_.accountId,this.nativeStorage,s.correlationId),{userRequestState:T}=Bo.parseRequestState(this.browserCrypto,s.state);return await E.acquireToken({...s,state:T,prompt:void 0})}return await p.handleCodeResponse(_,s)}catch(a){throw n&&n.close(),a instanceof et&&(a.setCorrelationId(this.correlationId),i.cacheFailedRequest(a)),a}}async logoutPopupAsync(t,e,o,n,i,s){var l,c;this.logger.verbose("logoutPopupAsync called"),this.eventHandler.emitEvent(_e.LOGOUT_START,le.Popup,t);const a=this.initializeServerTelemetryManager(Xe.logoutPopup);try{await this.clearCacheOnLogout(t.account);const u=await re(this.createAuthCodeClient.bind(this),G.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)(a,n);try{u.authority.endSessionEndpoint}catch{if((l=t.account)!=null&&l.homeAccountId&&t.postLogoutRedirectUri&&u.authority.protocolMode===An.OIDC){if(this.browserStorage.removeAccount((c=t.account)==null?void 0:c.homeAccountId),this.eventHandler.emitEvent(_e.LOGOUT_SUCCESS,le.Popup,t),s){const h={apiId:Xe.logoutPopup,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},f=He.getAbsoluteUrl(s,Rn());await this.navigationClient.navigateInternal(f,h)}i&&i.close();return}}const d=u.getLogoutUri(t);this.eventHandler.emitEvent(_e.LOGOUT_SUCCESS,le.Popup,t);const p=this.openPopup(d,{popupName:e,popupWindowAttributes:o,popup:i});if(this.eventHandler.emitEvent(_e.POPUP_OPENED,le.Popup,{popupWindow:p},null),await this.monitorPopupForHash(p).catch(()=>{}),s){const h={apiId:Xe.logoutPopup,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},f=He.getAbsoluteUrl(s,Rn());this.logger.verbose("Redirecting main window to url specified in the request"),this.logger.verbosePii(`Redirecting main window to: ${f}`),await this.navigationClient.navigateInternal(f,h)}else this.logger.verbose("No main window navigation requested")}catch(u){throw i&&i.close(),u instanceof et&&(u.setCorrelationId(this.correlationId),a.cacheFailedRequest(u)),this.browserStorage.setInteractionInProgress(!1),this.eventHandler.emitEvent(_e.LOGOUT_FAILURE,le.Popup,null,u),this.eventHandler.emitEvent(_e.LOGOUT_END,le.Popup),u}this.eventHandler.emitEvent(_e.LOGOUT_END,le.Popup)}initiateAuthRequest(t,e){if(t)return this.logger.infoPii(`Navigate to: ${t}`),this.openPopup(t,e);throw this.logger.error("Navigate url is empty"),ae(oc)}monitorPopupForHash(t){return new Promise((e,o)=>{this.logger.verbose("PopupHandler.monitorPopupForHash - polling started");const n=setInterval(()=>{if(t.closed){this.logger.error("PopupHandler.monitorPopupForHash - window closed"),clearInterval(n),o(ae(Ni));return}let i="";try{i=t.location.href}catch{}if(!i||i==="about:blank")return;clearInterval(n);let s="";const a=this.config.auth.OIDCOptions.serverResponseType;t&&(a===la.QUERY?s=t.location.search:s=t.location.hash),this.logger.verbose("PopupHandler.monitorPopupForHash - popup window is on same origin as caller"),e(s)},this.config.system.pollIntervalMilliseconds)}).finally(()=>{this.cleanPopup(t)})}openPopup(t,e){try{let o;if(e.popup?(o=e.popup,this.logger.verbosePii(`Navigating popup window to: ${t}`),o.location.assign(t)):typeof e.popup>"u"&&(this.logger.verbosePii(`Opening popup window to: ${t}`),o=this.openSizedPopup(t,e.popupName,e.popupWindowAttributes)),!o)throw ae(Mm);return o.focus&&o.focus(),this.currentWindow=o,window.addEventListener("beforeunload",this.unloadWindow),o}catch(o){throw this.logger.error("error opening popup "+o.message),this.browserStorage.setInteractionInProgress(!1),ae(Dm)}}openSizedPopup(t,e,o){var p,h,f,g;const n=window.screenLeft?window.screenLeft:window.screenX,i=window.screenTop?window.screenTop:window.screenY,s=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,a=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;let l=(p=o.popupSize)==null?void 0:p.width,c=(h=o.popupSize)==null?void 0:h.height,u=(f=o.popupPosition)==null?void 0:f.top,d=(g=o.popupPosition)==null?void 0:g.left;return(!l||l<0||l>s)&&(this.logger.verbose("Default popup window width used. Window width not configured or invalid."),l=Go.POPUP_WIDTH),(!c||c<0||c>a)&&(this.logger.verbose("Default popup window height used. Window height not configured or invalid."),c=Go.POPUP_HEIGHT),(!u||u<0||u>a)&&(this.logger.verbose("Default popup window top position used. Window top not configured or invalid."),u=Math.max(0,a/2-Go.POPUP_HEIGHT/2+i)),(!d||d<0||d>s)&&(this.logger.verbose("Default popup window left position used. Window left not configured or invalid."),d=Math.max(0,s/2-Go.POPUP_WIDTH/2+n)),window.open(t,e,`width=${l}, height=${c}, top=${u}, left=${d}, scrollbars=yes`)}unloadWindow(t){this.browserStorage.cleanRequestByInteractionType(le.Popup),this.currentWindow&&this.currentWindow.close(),t.preventDefault()}cleanPopup(t){t&&t.close(),window.removeEventListener("beforeunload",this.unloadWindow),this.browserStorage.setInteractionInProgress(!1)}generatePopupName(t,e){return`${Go.POPUP_NAME_PREFIX}.${this.config.auth.clientId}.${t.join("-")}.${e}.${this.correlationId}`}generateLogoutPopupName(t){const e=t.account&&t.account.homeAccountId;return`${Go.POPUP_NAME_PREFIX}.${this.config.auth.clientId}.${e}.${this.correlationId}`}}/*! @azure/msal-browser v3.6.0 2023-12-01 */class ff{constructor(t,e,o,n,i){this.authModule=t,this.browserStorage=e,this.authCodeRequest=o,this.logger=n,this.performanceClient=i}async initiateAuthRequest(t,e){if(this.logger.verbose("RedirectHandler.initiateAuthRequest called"),t){e.redirectStartPage&&(this.logger.verbose("RedirectHandler.initiateAuthRequest: redirectStartPage set, caching start page"),this.browserStorage.setTemporaryCache(je.ORIGIN_URI,e.redirectStartPage,!0)),this.browserStorage.setTemporaryCache(je.CORRELATION_ID,this.authCodeRequest.correlationId,!0),this.browserStorage.cacheCodeRequest(this.authCodeRequest),this.logger.infoPii(`RedirectHandler.initiateAuthRequest: Navigate to: ${t}`);const o={apiId:Xe.acquireTokenRedirect,timeout:e.redirectTimeout,noHistory:!1};if(typeof e.onRedirectNavigate=="function")if(this.logger.verbose("RedirectHandler.initiateAuthRequest: Invoking onRedirectNavigate callback"),e.onRedirectNavigate(t)!==!1){this.logger.verbose("RedirectHandler.initiateAuthRequest: onRedirectNavigate did not return false, navigating"),await e.navigationClient.navigateExternal(t,o);return}else{this.logger.verbose("RedirectHandler.initiateAuthRequest: onRedirectNavigate returned false, stopping navigation");return}else{this.logger.verbose("RedirectHandler.initiateAuthRequest: Navigating window to navigate url"),await e.navigationClient.navigateExternal(t,o);return}}else throw this.logger.info("RedirectHandler.initiateAuthRequest: Navigate url is empty"),ae(oc)}async handleCodeResponse(t,e){this.logger.verbose("RedirectHandler.handleCodeResponse called"),this.browserStorage.setInteractionInProgress(!1);const o=this.browserStorage.generateStateKey(e),n=this.browserStorage.getTemporaryCache(o);if(!n)throw J(rl,"Cached State");let i;try{i=this.authModule.handleFragmentResponse(t,n)}catch(c){throw c instanceof oi&&c.subError===Ni?ae(Ni):c}const s=this.browserStorage.generateNonceKey(n),a=this.browserStorage.getTemporaryCache(s);if(this.authCodeRequest.code=i.code,i.cloud_instance_host_name&&await re(this.authModule.updateAuthority.bind(this.authModule),G.UpdateTokenEndpointAuthority,this.logger,this.performanceClient,this.authCodeRequest.correlationId)(i.cloud_instance_host_name,this.authCodeRequest.correlationId),i.nonce=a||void 0,i.state=n,i.client_info)this.authCodeRequest.clientInfo=i.client_info;else{const c=this.checkCcsCredentials();c&&(this.authCodeRequest.ccsCredential=c)}const l=await this.authModule.acquireToken(this.authCodeRequest,i);return this.browserStorage.cleanRequestByState(e),l}checkCcsCredentials(){const t=this.browserStorage.getTemporaryCache(je.CCS_CREDENTIAL,!0);if(t)try{return JSON.parse(t)}catch{this.authModule.logger.error("Cache credential could not be parsed"),this.authModule.logger.errorPii(`Cache credential could not be parsed: ${t}`)}return null}}/*! @azure/msal-browser v3.6.0 2023-12-01 */class qT extends $r{constructor(t,e,o,n,i,s,a,l,c,u){super(t,e,o,n,i,s,a,c,u),this.nativeStorage=l}async acquireToken(t){const e=await re(this.initializeAuthorizationRequest.bind(this),G.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,this.correlationId)(t,le.Redirect);this.browserStorage.updateCacheEntries(e.state,e.nonce,e.authority,e.loginHint||"",e.account||null);const o=this.initializeServerTelemetryManager(Xe.acquireTokenRedirect),n=i=>{i.persisted&&(this.logger.verbose("Page was restored from back/forward cache. Clearing temporary cache."),this.browserStorage.cleanRequestByState(e.state),this.eventHandler.emitEvent(_e.RESTORE_FROM_BFCACHE,le.Redirect))};try{const i=await re(this.initializeAuthorizationCodeRequest.bind(this),G.StandardInteractionClientInitializeAuthorizationCodeRequest,this.logger,this.performanceClient,this.correlationId)(e),s=await re(this.createAuthCodeClient.bind(this),G.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)(o,e.authority,e.azureCloudOptions),a=new ff(s,this.browserStorage,i,this.logger,this.performanceClient),l=await s.getAuthCodeUrl({...e,nativeBroker:rn.isNativeAvailable(this.config,this.logger,this.nativeMessageHandler,t.authenticationScheme)}),c=this.getRedirectStartPage(t.redirectStartPage);return this.logger.verbosePii(`Redirect start page: ${c}`),window.addEventListener("pageshow",n),await a.initiateAuthRequest(l,{navigationClient:this.navigationClient,redirectTimeout:this.config.system.redirectNavigationTimeout,redirectStartPage:c,onRedirectNavigate:t.onRedirectNavigate})}catch(i){throw i instanceof et&&(i.setCorrelationId(this.correlationId),o.cacheFailedRequest(i)),window.removeEventListener("pageshow",n),this.browserStorage.cleanRequestByState(e.state),i}}async handleRedirectPromise(t){const e=this.initializeServerTelemetryManager(Xe.handleRedirectPromise);try{if(!this.browserStorage.isInteractionInProgress(!0))return this.logger.info("handleRedirectPromise called but there is no interaction in progress, returning null."),null;const[o,n]=this.getRedirectResponse(t||"");if(!o)return this.logger.info("handleRedirectPromise did not detect a response as a result of a redirect. Cleaning temporary cache."),this.browserStorage.cleanRequestByInteractionType(le.Redirect),null;const i=this.browserStorage.getTemporaryCache(je.ORIGIN_URI,!0)||B.EMPTY_STRING,s=He.removeHashFromUrl(i),a=He.removeHashFromUrl(window.location.href);if(s===a&&this.config.auth.navigateToLoginRequestUrl)return this.logger.verbose("Current page is loginRequestUrl, handling response"),i.indexOf("#")>-1&&rT(i),await this.handleResponse(o,e);if(this.config.auth.navigateToLoginRequestUrl){if(!Ep()||this.config.system.allowRedirectInIframe){this.browserStorage.setTemporaryCache(je.URL_HASH,n,!0);const l={apiId:Xe.handleRedirectPromise,timeout:this.config.system.redirectNavigationTimeout,noHistory:!0};let c=!0;if(!i||i==="null"){const u=aT();this.browserStorage.setTemporaryCache(je.ORIGIN_URI,u,!0),this.logger.warning("Unable to get valid login request url from cache, redirecting to home page"),c=await this.navigationClient.navigateInternal(u,l)}else this.logger.verbose(`Navigating to loginRequestUrl: ${i}`),c=await this.navigationClient.navigateInternal(i,l);if(!c)return await this.handleResponse(o,e)}}else return this.logger.verbose("NavigateToLoginRequestUrl set to false, handling response"),await this.handleResponse(o,e);return null}catch(o){throw o instanceof et&&(o.setCorrelationId(this.correlationId),e.cacheFailedRequest(o)),this.browserStorage.cleanRequestByInteractionType(le.Redirect),o}}getRedirectResponse(t){this.logger.verbose("getRedirectResponseHash called");let e=t;e||(this.config.auth.OIDCOptions.serverResponseType===la.QUERY?e=window.location.search:e=window.location.hash);let o=ll(e);if(o){try{KT(o,this.browserCrypto,le.Redirect)}catch(i){return i instanceof et&&this.logger.error(`Interaction type validation failed due to ${i.errorCode}: ${i.errorMessage}`),[null,""]}return iT(window),this.logger.verbose("Hash contains known properties, returning response hash"),[o,e]}const n=this.browserStorage.getTemporaryCache(je.URL_HASH,!0);return this.browserStorage.removeItem(this.browserStorage.generateCacheKey(je.URL_HASH)),n&&(o=ll(n),o)?(this.logger.verbose("Hash does not contain known properties, returning cached hash"),[o,n]):[null,""]}async handleResponse(t,e){const o=t.state;if(!o)throw ae(Cp);const n=this.browserStorage.getCachedRequest(o);if(this.logger.verbose("handleResponse called, retrieved cached request"),t.accountId){if(this.logger.verbose("Account id found in hash, calling WAM for token"),!this.nativeMessageHandler)throw ae(ca);const l=new mr(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,Xe.acquireTokenPopup,this.performanceClient,this.nativeMessageHandler,t.accountId,this.nativeStorage,n.correlationId),{userRequestState:c}=Bo.parseRequestState(this.browserCrypto,o);return l.acquireToken({...n,state:c,prompt:void 0}).finally(()=>{this.browserStorage.cleanRequestByState(o)})}const i=this.browserStorage.getCachedAuthority(o);if(!i)throw ae(wp);const s=await re(this.createAuthCodeClient.bind(this),G.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)(e,i);return tn.removeThrottle(this.browserStorage,this.config.auth.clientId,n),new ff(s,this.browserStorage,n,this.logger,this.performanceClient).handleCodeResponse(t,o)}async logout(t){var n,i;this.logger.verbose("logoutRedirect called");const e=this.initializeLogoutRequest(t),o=this.initializeServerTelemetryManager(Xe.logout);try{this.eventHandler.emitEvent(_e.LOGOUT_START,le.Redirect,t),await this.clearCacheOnLogout(e.account);const s={apiId:Xe.logout,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},a=await re(this.createAuthCodeClient.bind(this),G.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)(o,t&&t.authority);if(a.authority.protocolMode===An.OIDC)try{a.authority.endSessionEndpoint}catch{if((n=e.account)!=null&&n.homeAccountId){this.browserStorage.removeAccount((i=e.account)==null?void 0:i.homeAccountId),this.eventHandler.emitEvent(_e.LOGOUT_SUCCESS,le.Redirect,e);return}}const l=a.getLogoutUri(e);if(this.eventHandler.emitEvent(_e.LOGOUT_SUCCESS,le.Redirect,e),t&&typeof t.onRedirectNavigate=="function")if(t.onRedirectNavigate(l)!==!1){this.logger.verbose("Logout onRedirectNavigate did not return false, navigating"),this.browserStorage.getInteractionInProgress()||this.browserStorage.setInteractionInProgress(!0),await this.navigationClient.navigateExternal(l,s);return}else this.browserStorage.setInteractionInProgress(!1),this.logger.verbose("Logout onRedirectNavigate returned false, stopping navigation");else{this.browserStorage.getInteractionInProgress()||this.browserStorage.setInteractionInProgress(!0),await this.navigationClient.navigateExternal(l,s);return}}catch(s){throw s instanceof et&&(s.setCorrelationId(this.correlationId),o.cacheFailedRequest(s)),this.eventHandler.emitEvent(_e.LOGOUT_FAILURE,le.Redirect,null,s),this.eventHandler.emitEvent(_e.LOGOUT_END,le.Redirect),s}this.eventHandler.emitEvent(_e.LOGOUT_END,le.Redirect)}getRedirectStartPage(t){const e=t||window.location.href;return He.getAbsoluteUrl(e,Rn())}}/*! @azure/msal-browser v3.6.0 2023-12-01 */async function QT(r,t,e,o,n){if(t.addQueueMeasurement(G.SilentHandlerInitiateAuthRequest,o),!r)throw e.info("Navigate url is empty"),ae(oc);return n?re(ZT,G.SilentHandlerLoadFrame,e,t,o)(r,n,t,o):qi(JT,G.SilentHandlerLoadFrameSync,e,t,o)(r)}async function XT(r,t,e,o,n,i,s){return o.addQueueMeasurement(G.SilentHandlerMonitorIframeForHash,i),new Promise((a,l)=>{t<dd&&n.warning(`system.loadFrameTimeout or system.iframeHashTimeout set to lower (${t}ms) than the default (${dd}ms). This may result in timeouts.`);const c=window.setTimeout(()=>{window.clearInterval(u),l(ae(Lm))},t),u=window.setInterval(()=>{let d="";const p=r.contentWindow;try{d=p?p.location.href:""}catch{}if(!d||d==="about:blank")return;let h="";p&&(s===la.QUERY?h=p.location.search:h=p.location.hash),window.clearTimeout(c),window.clearInterval(u),a(h)},e)}).finally(()=>{qi(e0,G.RemoveHiddenIframe,n,o,i)(r)})}function ZT(r,t,e,o){return e.addQueueMeasurement(G.SilentHandlerLoadFrame,o),new Promise((n,i)=>{const s=py();window.setTimeout(()=>{if(!s){i("Unable to load iframe");return}s.src=r,n(s)},t)})}function JT(r){const t=py();return t.src=r,t}function py(){const r=document.createElement("iframe");return r.style.visibility="hidden",r.style.position="absolute",r.style.width=r.style.height="0",r.style.border="0",r.setAttribute("sandbox","allow-scripts allow-same-origin allow-forms"),document.body.appendChild(r),r}function e0(r){document.body===r.parentNode&&document.body.removeChild(r)}/*! @azure/msal-browser v3.6.0 2023-12-01 */class t0 extends $r{constructor(t,e,o,n,i,s,a,l,c,u,d){super(t,e,o,n,i,s,l,u,d),this.apiId=a,this.nativeStorage=c}async acquireToken(t){if(this.performanceClient.addQueueMeasurement(G.SilentIframeClientAcquireToken,t.correlationId),!t.loginHint&&!t.sid&&(!t.account||!t.account.username)&&this.logger.warning("No user hint provided. The authorization server may need more information to complete this request."),t.prompt&&t.prompt!==kt.NONE&&t.prompt!==kt.NO_SESSION)throw ae(km);const e=await re(this.initializeAuthorizationRequest.bind(this),G.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,t.correlationId)({...t,prompt:t.prompt||kt.NONE},le.Silent);ey(e.authority);const o=this.initializeServerTelemetryManager(this.apiId);try{const n=await re(this.createAuthCodeClient.bind(this),G.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,t.correlationId)(o,e.authority,e.azureCloudOptions);return await re(this.silentTokenHelper.bind(this),G.SilentIframeClientTokenHelper,this.logger,this.performanceClient,t.correlationId)(n,e)}catch(n){throw n instanceof et&&(n.setCorrelationId(this.correlationId),o.cacheFailedRequest(n)),n}}logout(){return Promise.reject(ae(nc))}async silentTokenHelper(t,e){const o=e.correlationId;this.performanceClient.addQueueMeasurement(G.SilentIframeClientTokenHelper,o);const n=await re(this.initializeAuthorizationCodeRequest.bind(this),G.StandardInteractionClientInitializeAuthorizationCodeRequest,this.logger,this.performanceClient,o)(e),i=await re(t.getAuthCodeUrl.bind(t),G.GetAuthCodeUrl,this.logger,this.performanceClient,o)({...e,nativeBroker:rn.isNativeAvailable(this.config,this.logger,this.nativeMessageHandler,e.authenticationScheme)}),s=new Op(t,this.browserStorage,n,this.logger,this.performanceClient),a=await re(QT,G.SilentHandlerInitiateAuthRequest,this.logger,this.performanceClient,o)(i,this.performanceClient,this.logger,o,this.config.system.navigateFrameWait),l=this.config.auth.OIDCOptions.serverResponseType,c=await re(XT,G.SilentHandlerMonitorIframeForHash,this.logger,this.performanceClient,o)(a,this.config.system.iframeHashTimeout,this.config.system.pollIntervalMilliseconds,this.performanceClient,this.logger,o,l),u=qi(dy,G.DeserializeResponse,this.logger,this.performanceClient,this.correlationId)(c,l,this.logger);if(u.accountId){if(this.logger.verbose("Account id found in hash, calling WAM for token"),!this.nativeMessageHandler)throw ae(ca);const d=new mr(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.apiId,this.performanceClient,this.nativeMessageHandler,u.accountId,this.browserStorage,o),{userRequestState:p}=Bo.parseRequestState(this.browserCrypto,e.state);return re(d.acquireToken.bind(d),G.NativeInteractionClientAcquireToken,this.logger,this.performanceClient,o)({...e,state:p,prompt:e.prompt||kt.NONE})}return re(s.handleCodeResponse.bind(s),G.HandleCodeResponse,this.logger,this.performanceClient,o)(u,e)}}/*! @azure/msal-browser v3.6.0 2023-12-01 */class o0 extends $r{async acquireToken(t){this.performanceClient.addQueueMeasurement(G.SilentRefreshClientAcquireToken,t.correlationId);const e=await re(this.initializeBaseRequest.bind(this),G.InitializeBaseRequest,this.logger,this.performanceClient,t.correlationId)(t,t.account),o={...t,...e},n=this.initializeServerTelemetryManager(Xe.acquireTokenSilent_silentFlow),i=await this.createRefreshTokenClient(n,o.authority,o.azureCloudOptions);return re(i.acquireTokenByRefreshToken.bind(i),G.RefreshTokenClientAcquireTokenByRefreshToken,this.logger,this.performanceClient,t.correlationId)(o).catch(s=>{throw s.setCorrelationId(this.correlationId),n.cacheFailedRequest(s),s})}logout(){return Promise.reject(ae(nc))}async createRefreshTokenClient(t,e,o){const n=await re(this.getClientConfiguration.bind(this),G.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,this.correlationId)(t,e,o);return new ld(n,this.performanceClient)}}/*! @azure/msal-browser v3.6.0 2023-12-01 */class n0{constructor(t,e,o,n){this.isBrowserEnvironment=typeof window<"u",this.config=t,this.storage=e,this.logger=o,this.cryptoObj=n}loadExternalTokens(t,e,o){if(this.logger.info("TokenCache - loadExternalTokens called"),!e.id_token)throw ae(xo);const n=Yi(e.id_token,cn);let i,s,a;if(t.account)a=mt.createFromAccountInfo(t.account),i=new vr(a,this.loadIdToken(e.id_token,a.homeAccountId,t.account.environment,t.account.tenantId),this.loadAccessToken(t,e,a.homeAccountId,t.account.environment,t.account.tenantId,o),this.loadRefreshToken(t,e,a.homeAccountId,t.account.environment));else if(t.authority){const l=Ft.generateAuthority(t.authority,t.azureCloudOptions),c={protocolMode:this.config.auth.protocolMode,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata,skipAuthorityMetadataCache:this.config.auth.skipAuthorityMetadataCache};if(s=new Ft(l,this.config.system.networkClient,this.storage,c,this.logger),o.clientInfo)this.logger.trace("TokenCache - homeAccountId from options"),a=this.loadAccount(n,s,o.clientInfo),i=new vr(a,this.loadIdToken(e.id_token,a.homeAccountId,s.hostnameAndPort,s.tenant),this.loadAccessToken(t,e,a.homeAccountId,s.hostnameAndPort,s.tenant,o),this.loadRefreshToken(t,e,a.homeAccountId,s.hostnameAndPort));else if(e.client_info)this.logger.trace("TokenCache - homeAccountId from response"),a=this.loadAccount(n,s,e.client_info),i=new vr(a,this.loadIdToken(e.id_token,a.homeAccountId,s.hostnameAndPort,s.tenant),this.loadAccessToken(t,e,a.homeAccountId,s.hostnameAndPort,s.tenant,o),this.loadRefreshToken(t,e,a.homeAccountId,s.hostnameAndPort));else throw ae(xo)}else throw ae(xo);return this.generateAuthenticationResult(t,n,i,a,s)}loadAccount(t,e,o,n){if(this.isBrowserEnvironment){this.logger.verbose("TokenCache - loading account");let i;if(n?i=n:e.authorityType!==void 0&&o&&(i=mt.generateHomeAccountId(o,e.authorityType,this.logger,this.cryptoObj,t)),!i)throw ae(xo);const s=t.tid,a=gp(this.storage,e,i,t,cn,o,s,void 0,void 0,this.logger);return this.storage.setAccount(a),a}else throw ae(xo)}loadIdToken(t,e,o,n){const i=Zl(e,o,t,this.config.auth.clientId,n);if(this.isBrowserEnvironment)return this.logger.verbose("TokenCache - loading id token"),this.storage.setIdTokenCredential(i),i;throw ae(xo)}loadAccessToken(t,e,o,n,i,s){if(!e.access_token)return this.logger.verbose("TokenCache - No access token provided for caching"),null;if(!e.expires_in||!s.extendedExpiresOn)throw ae(xo);const a=new dt(t.scopes).printScopes(),l=s.expiresOn||e.expires_in+new Date().getTime()/1e3,c=s.extendedExpiresOn,u=Jl(o,n,e.access_token,this.config.auth.clientId,i,a,l,c,cn);if(this.isBrowserEnvironment)return this.logger.verbose("TokenCache - loading access token"),this.storage.setAccessTokenCredential(u),u;throw ae(xo)}loadRefreshToken(t,e,o,n){if(!e.refresh_token)return this.logger.verbose("TokenCache - No refresh token provided for caching"),null;const i=em(o,n,e.refresh_token,this.config.auth.clientId);if(this.isBrowserEnvironment)return this.logger.verbose("TokenCache - loading refresh token"),this.storage.setRefreshTokenCredential(i),i;throw ae(xo)}generateAuthenticationResult(t,e,o,n,i){var p,h;let s=B.EMPTY_STRING,a=[],l=null,c;o!=null&&o.accessToken&&(s=o.accessToken.secret,a=dt.fromString(o.accessToken.target).asArray(),l=new Date(Number(o.accessToken.expiresOn)*1e3),c=new Date(Number(o.accessToken.extendedExpiresOn)*1e3));const u=e.oid||e.sub||B.EMPTY_STRING,d=e.tid||B.EMPTY_STRING;return{authority:i?i.canonicalAuthority:B.EMPTY_STRING,uniqueId:u,tenantId:d,scopes:a,account:n.getAccountInfo(),idToken:((p=o.idToken)==null?void 0:p.secret)||"",idTokenClaims:e||{},accessToken:s,fromCache:!0,expiresOn:l,correlationId:t.correlationId||B.EMPTY_STRING,requestId:B.EMPTY_STRING,extExpiresOn:c,familyId:B.EMPTY_STRING,tokenType:((h=o==null?void 0:o.accessToken)==null?void 0:h.tokenType)||B.EMPTY_STRING,state:B.EMPTY_STRING,cloudGraphHostName:n.cloudGraphHostName||B.EMPTY_STRING,msGraphHost:n.msGraphHost||B.EMPTY_STRING,code:void 0,fromNativeBroker:!1}}}/*! @azure/msal-browser v3.6.0 2023-12-01 */class i0 extends Sm{constructor(t){super(t),this.includeRedirectUri=!1}}/*! @azure/msal-browser v3.6.0 2023-12-01 */class r0 extends $r{constructor(t,e,o,n,i,s,a,l,c,u){super(t,e,o,n,i,s,l,c,u),this.apiId=a}async acquireToken(t){if(!t.code)throw ae(Wm);const e=await re(this.initializeAuthorizationRequest.bind(this),G.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,t.correlationId)(t,le.Silent),o=this.initializeServerTelemetryManager(this.apiId);try{const n={...e,code:t.code},i=await re(this.getClientConfiguration.bind(this),G.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,t.correlationId)(o,e.authority),s=new i0(i);this.logger.verbose("Auth code client created");const a=new Op(s,this.browserStorage,n,this.logger,this.performanceClient);return await re(a.handleCodeResponseFromServer.bind(a),G.HandleCodeResponseFromServer,this.logger,this.performanceClient,t.correlationId)({code:t.code,msgraph_host:t.msGraphHost,cloud_graph_host_name:t.cloudGraphHostName,cloud_instance_host_name:t.cloudInstanceHostName},e,!1)}catch(n){throw n instanceof et&&(n.setCorrelationId(this.correlationId),o.cacheFailedRequest(n)),n}}logout(){return Promise.reject(ae(nc))}}/*! @azure/msal-browser v3.6.0 2023-12-01 */class ic{constructor(t){this.atsAsyncMeasurement=void 0,this.operatingContext=t,this.isBrowserEnvironment=this.operatingContext.isBrowserEnvironment(),this.config=t.getConfig(),this.initialized=!1,this.logger=this.operatingContext.getLogger(),this.networkClient=this.config.system.networkClient,this.navigationClient=this.config.system.navigationClient,this.redirectResponse=new Map,this.hybridAuthCodeResponses=new Map,this.performanceClient=this.config.telemetry.client,this.browserCrypto=this.isBrowserEnvironment?new Ir(this.logger,this.performanceClient):sl,this.eventHandler=new LT(this.logger,this.browserCrypto),this.browserStorage=this.isBrowserEnvironment?new hd(this.config.auth.clientId,this.config.cache,this.browserCrypto,this.logger,zE(this.config.auth)):MT(this.config.auth.clientId,this.logger);const e={cacheLocation:_t.MemoryStorage,temporaryCacheLocation:_t.MemoryStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!1,claimsBasedCachingEnabled:!1};this.nativeInternalStorage=new hd(this.config.auth.clientId,e,this.browserCrypto,this.logger),this.tokenCache=new n0(this.config,this.browserStorage,this.logger,this.browserCrypto),this.activeSilentTokenRequests=new Map,this.trackPageVisibility=this.trackPageVisibility.bind(this),this.trackPageVisibilityWithMeasurement=this.trackPageVisibilityWithMeasurement.bind(this)}static async createController(t){const e=new ic(t);return await e.initialize(),e}trackPageVisibility(){this.atsAsyncMeasurement&&(this.logger.info("Perf: Visibility change detected"),this.atsAsyncMeasurement.increment({visibilityChangeCount:1}))}async initialize(){if(this.logger.trace("initialize called"),this.initialized){this.logger.info("initialize has already been called, exiting early.");return}const t=this.config.system.allowNativeBroker,e=this.performanceClient.startMeasurement(G.InitializeClientApplication);if(this.eventHandler.emitEvent(_e.INITIALIZE_START),t)try{this.nativeExtensionProvider=await rn.createProvider(this.logger,this.config.system.nativeBrokerHandshakeTimeout,this.performanceClient)}catch(o){this.logger.verbose(o)}this.config.cache.claimsBasedCachingEnabled||(this.logger.verbose("Claims-based caching is disabled. Clearing the previous cache with claims"),await re(this.browserStorage.clearTokensAndKeysWithClaims.bind(this.browserStorage),G.ClearTokensAndKeysWithClaims,this.logger,this.performanceClient)(this.performanceClient)),this.initialized=!0,this.eventHandler.emitEvent(_e.INITIALIZE_END),e.end({allowNativeBroker:t,success:!0})}async handleRedirectPromise(t){this.logger.verbose("handleRedirectPromise called"),cf(this.initialized);const e=this.getAllAccounts();if(this.isBrowserEnvironment){const o=t||"";let n=this.redirectResponse.get(o);if(typeof n>"u"){this.eventHandler.emitEvent(_e.HANDLE_REDIRECT_START,le.Redirect),this.logger.verbose("handleRedirectPromise has been called for the first time, storing the promise");const i=this.browserStorage.getCachedNativeRequest();let s;if(i&&rn.isNativeAvailable(this.config,this.logger,this.nativeExtensionProvider)&&this.nativeExtensionProvider&&!t)this.logger.trace("handleRedirectPromise - acquiring token from native platform"),s=new mr(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,Xe.handleRedirectPromise,this.performanceClient,this.nativeExtensionProvider,i.accountId,this.nativeInternalStorage,i.correlationId).handleRedirectPromise();else{this.logger.trace("handleRedirectPromise - acquiring token from web flow");const a=this.browserStorage.getTemporaryCache(je.CORRELATION_ID,!0)||B.EMPTY_STRING;s=this.createRedirectClient(a).handleRedirectPromise(t)}n=s.then(a=>(a&&(e.length<this.getAllAccounts().length?(this.eventHandler.emitEvent(_e.LOGIN_SUCCESS,le.Redirect,a),this.logger.verbose("handleRedirectResponse returned result, login success")):(this.eventHandler.emitEvent(_e.ACQUIRE_TOKEN_SUCCESS,le.Redirect,a),this.logger.verbose("handleRedirectResponse returned result, acquire token success"))),this.eventHandler.emitEvent(_e.HANDLE_REDIRECT_END,le.Redirect),a)).catch(a=>{throw e.length>0?this.eventHandler.emitEvent(_e.ACQUIRE_TOKEN_FAILURE,le.Redirect,null,a):this.eventHandler.emitEvent(_e.LOGIN_FAILURE,le.Redirect,null,a),this.eventHandler.emitEvent(_e.HANDLE_REDIRECT_END,le.Redirect),a}),this.redirectResponse.set(o,n)}else this.logger.verbose("handleRedirectPromise has been called previously, returning the result from the first call");return n}return this.logger.verbose("handleRedirectPromise returns null, not browser environment"),null}async acquireTokenRedirect(t){const e=this.getRequestCorrelationId(t);this.logger.verbose("acquireTokenRedirect called",e),this.preflightBrowserEnvironmentCheck(le.Redirect);const o=this.getAllAccounts().length>0;o?this.eventHandler.emitEvent(_e.ACQUIRE_TOKEN_START,le.Redirect,t):this.eventHandler.emitEvent(_e.LOGIN_START,le.Redirect,t);let n;return this.nativeExtensionProvider&&this.canUseNative(t)?n=new mr(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,Xe.acquireTokenRedirect,this.performanceClient,this.nativeExtensionProvider,this.getNativeAccountId(t),this.nativeInternalStorage,e).acquireTokenRedirect(t).catch(s=>{if(s instanceof Sn&&cr(s))return this.nativeExtensionProvider=void 0,this.createRedirectClient(e).acquireToken(t);if(s instanceof ln)return this.logger.verbose("acquireTokenRedirect - Resolving interaction required error thrown by native broker by falling back to web flow"),this.createRedirectClient(e).acquireToken(t);throw this.getBrowserStorage().setInteractionInProgress(!1),s}):n=this.createRedirectClient(e).acquireToken(t),n.catch(i=>{throw o?this.eventHandler.emitEvent(_e.ACQUIRE_TOKEN_FAILURE,le.Redirect,null,i):this.eventHandler.emitEvent(_e.LOGIN_FAILURE,le.Redirect,null,i),i})}acquireTokenPopup(t){const e=this.getRequestCorrelationId(t),o=this.performanceClient.startMeasurement(G.AcquireTokenPopup,e);try{this.logger.verbose("acquireTokenPopup called",e),this.preflightBrowserEnvironmentCheck(le.Popup)}catch(s){return Promise.reject(s)}const n=this.getAllAccounts();n.length>0?this.eventHandler.emitEvent(_e.ACQUIRE_TOKEN_START,le.Popup,t):this.eventHandler.emitEvent(_e.LOGIN_START,le.Popup,t);let i;return this.canUseNative(t)?i=this.acquireTokenNative({...t,correlationId:e},Xe.acquireTokenPopup).then(s=>(this.getBrowserStorage().setInteractionInProgress(!1),o.end({success:!0,isNativeBroker:!0,requestId:s.requestId}),s)).catch(s=>{if(s instanceof Sn&&cr(s))return this.nativeExtensionProvider=void 0,this.createPopupClient(e).acquireToken(t);if(s instanceof ln)return this.logger.verbose("acquireTokenPopup - Resolving interaction required error thrown by native broker by falling back to web flow"),this.createPopupClient(e).acquireToken(t);throw this.getBrowserStorage().setInteractionInProgress(!1),s}):i=this.createPopupClient(e).acquireToken(t),i.then(s=>(n.length<this.getAllAccounts().length?this.eventHandler.emitEvent(_e.LOGIN_SUCCESS,le.Popup,s):this.eventHandler.emitEvent(_e.ACQUIRE_TOKEN_SUCCESS,le.Popup,s),o.add({accessTokenSize:s.accessToken.length,idTokenSize:s.idToken.length}),o.end({success:!0,requestId:s.requestId}),s)).catch(s=>(n.length>0?this.eventHandler.emitEvent(_e.ACQUIRE_TOKEN_FAILURE,le.Popup,null,s):this.eventHandler.emitEvent(_e.LOGIN_FAILURE,le.Popup,null,s),o.end({errorCode:s.errorCode,subErrorCode:s.subError,success:!1}),Promise.reject(s)))}trackPageVisibilityWithMeasurement(){const t=this.ssoSilentMeasurement||this.acquireTokenByCodeAsyncMeasurement;t&&(this.logger.info("Perf: Visibility change detected in ",t.event.name),t.increment({visibilityChangeCount:1}))}async ssoSilent(t){var i;const e=this.getRequestCorrelationId(t),o={...t,prompt:t.prompt,correlationId:e};this.preflightBrowserEnvironmentCheck(le.Silent),this.ssoSilentMeasurement=this.performanceClient.startMeasurement(G.SsoSilent,e),(i=this.ssoSilentMeasurement)==null||i.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement),this.logger.verbose("ssoSilent called",e),this.eventHandler.emitEvent(_e.SSO_SILENT_START,le.Silent,o);let n;return this.canUseNative(o)?n=this.acquireTokenNative(o,Xe.ssoSilent).catch(s=>{if(s instanceof Sn&&cr(s))return this.nativeExtensionProvider=void 0,this.createSilentIframeClient(o.correlationId).acquireToken(o);throw s}):n=this.createSilentIframeClient(o.correlationId).acquireToken(o),n.then(s=>{var a,l;return this.eventHandler.emitEvent(_e.SSO_SILENT_SUCCESS,le.Silent,s),(a=this.ssoSilentMeasurement)==null||a.add({accessTokenSize:s.accessToken.length,idTokenSize:s.idToken.length}),(l=this.ssoSilentMeasurement)==null||l.end({success:!0,isNativeBroker:s.fromNativeBroker,requestId:s.requestId}),s}).catch(s=>{var a;throw this.eventHandler.emitEvent(_e.SSO_SILENT_FAILURE,le.Silent,null,s),(a=this.ssoSilentMeasurement)==null||a.end({errorCode:s.errorCode,subErrorCode:s.subError,success:!1}),s}).finally(()=>{document.removeEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement)})}async acquireTokenByCode(t){const e=this.getRequestCorrelationId(t);this.preflightBrowserEnvironmentCheck(le.Silent),this.logger.trace("acquireTokenByCode called",e),this.eventHandler.emitEvent(_e.ACQUIRE_TOKEN_BY_CODE_START,le.Silent,t);const o=this.performanceClient.startMeasurement(G.AcquireTokenByCode,e);try{if(t.code&&t.nativeAccountId)throw ae($m);if(t.code){const n=t.code;let i=this.hybridAuthCodeResponses.get(n);return i?(this.logger.verbose("Existing acquireTokenByCode request found",e),o.discard()):(this.logger.verbose("Initiating new acquireTokenByCode request",e),i=this.acquireTokenByCodeAsync({...t,correlationId:e}).then(s=>(this.eventHandler.emitEvent(_e.ACQUIRE_TOKEN_BY_CODE_SUCCESS,le.Silent,s),this.hybridAuthCodeResponses.delete(n),o.add({accessTokenSize:s.accessToken.length,idTokenSize:s.idToken.length}),o.end({success:!0,isNativeBroker:s.fromNativeBroker,requestId:s.requestId}),s)).catch(s=>{throw this.hybridAuthCodeResponses.delete(n),this.eventHandler.emitEvent(_e.ACQUIRE_TOKEN_BY_CODE_FAILURE,le.Silent,null,s),o.end({errorCode:s.errorCode,subErrorCode:s.subError,success:!1}),s}),this.hybridAuthCodeResponses.set(n,i)),await i}else if(t.nativeAccountId){if(this.canUseNative(t,t.nativeAccountId))return await this.acquireTokenNative({...t,correlationId:e},Xe.acquireTokenByCode,t.nativeAccountId).catch(n=>{throw n instanceof Sn&&cr(n)&&(this.nativeExtensionProvider=void 0),n});throw ae(Km)}else throw ae(zm)}catch(n){throw this.eventHandler.emitEvent(_e.ACQUIRE_TOKEN_BY_CODE_FAILURE,le.Silent,null,n),o.end({errorCode:n instanceof et&&n.errorCode||void 0,subErrorCode:n instanceof et&&n.subError||void 0,success:!1}),n}}async acquireTokenByCodeAsync(t){var n;return this.logger.trace("acquireTokenByCodeAsync called",t.correlationId),this.acquireTokenByCodeAsyncMeasurement=this.performanceClient.startMeasurement(G.AcquireTokenByCodeAsync,t.correlationId),(n=this.acquireTokenByCodeAsyncMeasurement)==null||n.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement),await this.createSilentAuthCodeClient(t.correlationId).acquireToken(t).then(i=>{var s;return(s=this.acquireTokenByCodeAsyncMeasurement)==null||s.end({success:!0,fromCache:i.fromCache,isNativeBroker:i.fromNativeBroker,requestId:i.requestId}),i}).catch(i=>{var s;throw(s=this.acquireTokenByCodeAsyncMeasurement)==null||s.end({errorCode:i.errorCode,subErrorCode:i.subError,success:!1}),i}).finally(()=>{document.removeEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement)})}async acquireTokenFromCache(t,e,o){switch(this.performanceClient.addQueueMeasurement(G.AcquireTokenFromCache,e.correlationId),o){case mo.Default:case mo.AccessToken:case mo.AccessTokenAndRefreshToken:return re(t.acquireToken.bind(t),G.SilentCacheClientAcquireToken,this.logger,this.performanceClient,e.correlationId)(e);default:throw J(Xn)}}async acquireTokenByRefreshToken(t,e){switch(this.performanceClient.addQueueMeasurement(G.AcquireTokenByRefreshToken,t.correlationId),e){case mo.Default:case mo.AccessTokenAndRefreshToken:case mo.RefreshToken:case mo.RefreshTokenAndNetwork:const o=this.createSilentRefreshClient(t.correlationId);return re(o.acquireToken.bind(o),G.SilentRefreshClientAcquireToken,this.logger,this.performanceClient,t.correlationId)(t);default:throw J(Xn)}}async acquireTokenBySilentIframe(t){this.performanceClient.addQueueMeasurement(G.AcquireTokenBySilentIframe,t.correlationId);const e=this.createSilentIframeClient(t.correlationId);return re(e.acquireToken.bind(e),G.SilentIframeClientAcquireToken,this.logger,this.performanceClient,t.correlationId)(t)}async logout(t){const e=this.getRequestCorrelationId(t);return this.logger.warning("logout API is deprecated and will be removed in msal-browser v3.0.0. Use logoutRedirect instead.",e),this.logoutRedirect({correlationId:e,...t})}async logoutRedirect(t){const e=this.getRequestCorrelationId(t);return this.preflightBrowserEnvironmentCheck(le.Redirect),this.createRedirectClient(e).logout(t)}logoutPopup(t){try{const e=this.getRequestCorrelationId(t);return this.preflightBrowserEnvironmentCheck(le.Popup),this.createPopupClient(e).logout(t)}catch(e){return Promise.reject(e)}}async clearCache(t){const e=this.getRequestCorrelationId(t);return this.createSilentCacheClient(e).logout(t)}getAllAccounts(t){return this.logger.verbose("getAllAccounts called"),this.isBrowserEnvironment?this.browserStorage.getAllAccounts(t):[]}getAccount(t){if(this.logger.trace("getAccount called"),Object.keys(t).length===0)return this.logger.warning("getAccount: No accountFilter provided"),null;const e=this.browserStorage.getAccountInfoFilteredBy(t);return e?(this.logger.verbose("getAccount: Account matching provided filter found, returning"),e):(this.logger.verbose("getAccount: No matching account found, returning null"),null)}getAccountByUsername(t){if(this.logger.trace("getAccountByUsername called"),!t)return this.logger.warning("getAccountByUsername: No username provided"),null;const e=this.browserStorage.getAccountInfoFilteredBy({username:t});return e?(this.logger.verbose("getAccountByUsername: Account matching username found, returning"),this.logger.verbosePii(`getAccountByUsername: Returning signed-in accounts matching username: ${t}`),e):(this.logger.verbose("getAccountByUsername: No matching account found, returning null"),null)}getAccountByHomeId(t){if(this.logger.trace("getAccountByHomeId called"),!t)return this.logger.warning("getAccountByHomeId: No homeAccountId provided"),null;const e=this.browserStorage.getAccountInfoFilteredBy({homeAccountId:t});return e?(this.logger.verbose("getAccountByHomeId: Account matching homeAccountId found, returning"),this.logger.verbosePii(`getAccountByHomeId: Returning signed-in accounts matching homeAccountId: ${t}`),e):(this.logger.verbose("getAccountByHomeId: No matching account found, returning null"),null)}getAccountByLocalId(t){if(this.logger.trace("getAccountByLocalId called"),!t)return this.logger.warning("getAccountByLocalId: No localAccountId provided"),null;const e=this.browserStorage.getAccountInfoFilteredBy({localAccountId:t});return e?(this.logger.verbose("getAccountByLocalId: Account matching localAccountId found, returning"),this.logger.verbosePii(`getAccountByLocalId: Returning signed-in accounts matching localAccountId: ${t}`),e):(this.logger.verbose("getAccountByLocalId: No matching account found, returning null"),null)}setActiveAccount(t){this.browserStorage.setActiveAccount(t)}getActiveAccount(){return this.browserStorage.getActiveAccount()}async hydrateCache(t,e){this.logger.verbose("hydrateCache called");const o=mt.createFromAccountInfo(t.account,t.cloudGraphHostName,t.msGraphHost);return this.browserStorage.setAccount(o),t.fromNativeBroker?(this.logger.verbose("Response was from native broker, storing in-memory"),this.nativeInternalStorage.hydrateCache(t,e)):this.browserStorage.hydrateCache(t,e)}preflightBrowserEnvironmentCheck(t,e=!1){if(this.logger.verbose("preflightBrowserEnvironmentCheck started"),uT(this.isBrowserEnvironment),lT(t,this.config.system.allowRedirectInIframe),Nc(),cT(),cf(this.initialized),t===le.Redirect&&this.config.cache.cacheLocation===_t.MemoryStorage&&!this.config.cache.storeAuthStateInCookie)throw sy(ry);(t===le.Redirect||t===le.Popup)&&this.preflightInteractiveRequest(!e)}preflightInteractiveRequest(t){this.logger.verbose("preflightInteractiveRequest called, validating app environment"),Nc(),t&&this.getBrowserStorage().setInteractionInProgress(!0)}async acquireTokenNative(t,e,o){if(this.logger.trace("acquireTokenNative called"),!this.nativeExtensionProvider)throw ae(ca);return new mr(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,e,this.performanceClient,this.nativeExtensionProvider,o||this.getNativeAccountId(t),this.nativeInternalStorage,t.correlationId).acquireToken(t)}canUseNative(t,e){if(this.logger.trace("canUseNative called"),!rn.isNativeAvailable(this.config,this.logger,this.nativeExtensionProvider,t.authenticationScheme))return this.logger.trace("canUseNative: isNativeAvailable returned false, returning false"),!1;if(t.prompt)switch(t.prompt){case kt.NONE:case kt.CONSENT:case kt.LOGIN:this.logger.trace("canUseNative: prompt is compatible with native flow");break;default:return this.logger.trace(`canUseNative: prompt = ${t.prompt} is not compatible with native flow, returning false`),!1}return!e&&!this.getNativeAccountId(t)?(this.logger.trace("canUseNative: nativeAccountId is not available, returning false"),!1):!0}getNativeAccountId(t){const e=t.account||this.getAccount({loginHint:t.loginHint,sid:t.sid})||this.getActiveAccount();return e&&e.nativeAccountId||""}createPopupClient(t){return new YT(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeInternalStorage,this.nativeExtensionProvider,t)}createRedirectClient(t){return new qT(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeInternalStorage,this.nativeExtensionProvider,t)}createSilentIframeClient(t){return new t0(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,Xe.ssoSilent,this.performanceClient,this.nativeInternalStorage,this.nativeExtensionProvider,t)}createSilentCacheClient(t){return new uy(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeExtensionProvider,t)}createSilentRefreshClient(t){return new o0(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeExtensionProvider,t)}createSilentAuthCodeClient(t){return new r0(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,Xe.acquireTokenByCode,this.performanceClient,this.nativeExtensionProvider,t)}addEventCallback(t){return this.eventHandler.addEventCallback(t)}removeEventCallback(t){this.eventHandler.removeEventCallback(t)}addPerformanceCallback(t){return this.performanceClient.addPerformanceCallback(t)}removePerformanceCallback(t){return this.performanceClient.removePerformanceCallback(t)}enableAccountStorageEvents(){this.eventHandler.enableAccountStorageEvents()}disableAccountStorageEvents(){this.eventHandler.disableAccountStorageEvents()}getTokenCache(){return this.tokenCache}getLogger(){return this.logger}setLogger(t){this.logger=t}initializeWrapperLibrary(t,e){this.browserStorage.setWrapperMetadata(t,e)}setNavigationClient(t){this.navigationClient=t}getConfiguration(){return this.config}getPerformanceClient(){return this.performanceClient}getBrowserStorage(){return this.browserStorage}isBrowserEnv(){return this.isBrowserEnvironment}getEventHandler(){return this.eventHandler}getRequestCorrelationId(t){return t!=null&&t.correlationId?t.correlationId:this.isBrowserEnvironment?ni():B.EMPTY_STRING}async loginRedirect(t){const e=this.getRequestCorrelationId(t);return this.logger.verbose("loginRedirect called",e),this.acquireTokenRedirect({correlationId:e,...t||lf})}loginPopup(t){const e=this.getRequestCorrelationId(t);return this.logger.verbose("loginPopup called",e),this.acquireTokenPopup({correlationId:e,...t||lf})}async acquireTokenSilent(t){const e=this.getRequestCorrelationId(t),o=this.performanceClient.startMeasurement(G.AcquireTokenSilent,e);o.add({cacheLookupPolicy:t.cacheLookupPolicy}),this.preflightBrowserEnvironmentCheck(le.Silent),this.logger.verbose("acquireTokenSilent called",e);const n=t.account||this.getActiveAccount();if(!n)throw ae(Gm);const i={clientId:this.config.auth.clientId,authority:t.authority||B.EMPTY_STRING,scopes:t.scopes,homeAccountIdentifier:n.homeAccountId,claims:t.claims,authenticationScheme:t.authenticationScheme,resourceRequestMethod:t.resourceRequestMethod,resourceRequestUri:t.resourceRequestUri,shrClaims:t.shrClaims,sshKid:t.sshKid,shrOptions:t.shrOptions},s=JSON.stringify(i),a=this.activeSilentTokenRequests.get(s);if(typeof a>"u"){this.logger.verbose("acquireTokenSilent called for the first time, storing active request",e);const l=re(this.acquireTokenSilentAsync.bind(this),G.AcquireTokenSilentAsync,this.logger,this.performanceClient,e)({...t,correlationId:e},n).then(c=>(this.activeSilentTokenRequests.delete(s),o.add({accessTokenSize:c.accessToken.length,idTokenSize:c.idToken.length}),o.end({success:!0,fromCache:c.fromCache,isNativeBroker:c.fromNativeBroker,cacheLookupPolicy:t.cacheLookupPolicy,requestId:c.requestId}),c)).catch(c=>{throw this.activeSilentTokenRequests.delete(s),o.end({errorCode:c.errorCode,subErrorCode:c.subError,success:!1}),c});return this.activeSilentTokenRequests.set(s,l),l}else return this.logger.verbose("acquireTokenSilent has been called previously, returning the result from the first call",e),o.discard(),a}async acquireTokenSilentAsync(t,e){var n;this.performanceClient.addQueueMeasurement(G.AcquireTokenSilentAsync,t.correlationId),this.eventHandler.emitEvent(_e.ACQUIRE_TOKEN_START,le.Silent,t),this.atsAsyncMeasurement=this.performanceClient.startMeasurement(G.AcquireTokenSilentAsync,t.correlationId),(n=this.atsAsyncMeasurement)==null||n.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",this.trackPageVisibility);let o;if(rn.isNativeAvailable(this.config,this.logger,this.nativeExtensionProvider,t.authenticationScheme)&&e.nativeAccountId){this.logger.verbose("acquireTokenSilent - attempting to acquire token from native platform");const i={...t,account:e};o=this.acquireTokenNative(i,Xe.acquireTokenSilent_silentFlow).catch(async s=>{if(s instanceof Sn&&cr(s))return this.logger.verbose("acquireTokenSilent - native platform unavailable, falling back to web flow"),this.nativeExtensionProvider=void 0,this.createSilentIframeClient(t.correlationId).acquireToken(t);throw s})}else{this.logger.verbose("acquireTokenSilent - attempting to acquire token from web flow");const i=this.createSilentCacheClient(t.correlationId),s=await re(i.initializeSilentRequest.bind(i),G.InitializeSilentRequest,this.logger,this.performanceClient,t.correlationId)(t,e),a=t.cacheLookupPolicy||mo.Default;o=re(this.acquireTokenFromCache.bind(this),G.AcquireTokenFromCache,this.logger,this.performanceClient,s.correlationId)(i,s,a).catch(l=>{if(t.cacheLookupPolicy===mo.AccessToken)throw l;return Nc(),this.eventHandler.emitEvent(_e.ACQUIRE_TOKEN_NETWORK_START,le.Silent,s),re(this.acquireTokenByRefreshToken.bind(this),G.AcquireTokenByRefreshToken,this.logger,this.performanceClient,s.correlationId)(s,a).catch(c=>{const u=!(c instanceof ln)&&(c.errorCode===Go.INVALID_GRANT_ERROR||c.errorCode===Xn)||c.errorCode===ul,d=a===mo.Default||a===mo.Skip||a===mo.RefreshTokenAndNetwork;if(u&&d)return this.logger.verbose("Refresh token expired/invalid or CacheLookupPolicy is set to Skip, attempting acquire token by iframe.",t.correlationId),re(this.acquireTokenBySilentIframe.bind(this),G.AcquireTokenBySilentIframe,this.logger,this.performanceClient,s.correlationId)(s);throw c})})}return o.then(i=>{var s;return this.eventHandler.emitEvent(_e.ACQUIRE_TOKEN_SUCCESS,le.Silent,i),(s=this.atsAsyncMeasurement)==null||s.end({success:!0,fromCache:i.fromCache,isNativeBroker:i.fromNativeBroker,requestId:i.requestId}),i}).catch(i=>{var s;throw this.eventHandler.emitEvent(_e.ACQUIRE_TOKEN_FAILURE,le.Silent,null,i),(s=this.atsAsyncMeasurement)==null||s.end({errorCode:i.errorCode,subErrorCode:i.subError,success:!1}),i}).finally(()=>{document.removeEventListener("visibilitychange",this.trackPageVisibility)})}}const s0=Object.freeze(Object.defineProperty({__proto__:null,StandardController:ic},Symbol.toStringTag,{value:"Module"}));/*! @azure/msal-browser v3.6.0 2023-12-01 */class Pp{static async createPublicClientApplication(t){const e=await yT(t);return new Pp(t,e)}constructor(t,e){if(e)this.controller=e;else{const o=new Gi(t);this.controller=new ic(o)}}async initialize(){return this.controller.initialize()}async acquireTokenPopup(t){return this.controller.acquireTokenPopup(t)}acquireTokenRedirect(t){return this.controller.acquireTokenRedirect(t)}acquireTokenSilent(t){return this.controller.acquireTokenSilent(t)}acquireTokenByCode(t){return this.controller.acquireTokenByCode(t)}addEventCallback(t){return this.controller.addEventCallback(t)}removeEventCallback(t){return this.controller.removeEventCallback(t)}addPerformanceCallback(t){return this.controller.addPerformanceCallback(t)}removePerformanceCallback(t){return this.controller.removePerformanceCallback(t)}enableAccountStorageEvents(){this.controller.enableAccountStorageEvents()}disableAccountStorageEvents(){this.controller.disableAccountStorageEvents()}getAccount(t){return this.controller.getAccount(t)}getAccountByHomeId(t){return this.controller.getAccountByHomeId(t)}getAccountByLocalId(t){return this.controller.getAccountByLocalId(t)}getAccountByUsername(t){return this.controller.getAccountByUsername(t)}getAllAccounts(t){return this.controller.getAllAccounts(t)}handleRedirectPromise(t){return this.controller.handleRedirectPromise(t)}loginPopup(t){return this.controller.loginPopup(t)}loginRedirect(t){return this.controller.loginRedirect(t)}logout(t){return this.controller.logout(t)}logoutRedirect(t){return this.controller.logoutRedirect(t)}logoutPopup(t){return this.controller.logoutPopup(t)}ssoSilent(t){return this.controller.ssoSilent(t)}getTokenCache(){return this.controller.getTokenCache()}getLogger(){return this.controller.getLogger()}setLogger(t){this.controller.setLogger(t)}setActiveAccount(t){this.controller.setActiveAccount(t)}getActiveAccount(){return this.controller.getActiveAccount()}initializeWrapperLibrary(t,e){return this.controller.initializeWrapperLibrary(t,e)}setNavigationClient(t){this.controller.setNavigationClient(t)}getConfiguration(){return this.controller.getConfiguration()}async hydrateCache(t,e){return this.controller.hydrateCache(t,e)}clearCache(t){return this.controller.clearCache(t)}}const a0={auth:{clientId:"2035e2e4-e9f0-4e35-a0b5-df84ec6607a4"},cache:{cacheLocation:"localStorage",storeAuthStateInCookie:!0}},l0="https://graph.microsoft.com/v1.0/me/contacts";let gl="";const c0=new Pp(a0);let el=1;const Vc=100;let tl=[];async function hy(r){const t=new Headers,e="Bearer "+r;t.append("Authorization",e);const o={method:"GET",headers:t},n=(el-1)*Vc;return new Promise((i,s)=>{try{fetch(`${l0}/?$count=true&top=${Vc}&skip=${n}`,o).then(a=>a.json()).then(a=>{const l=Math.ceil(a["@odata.count"]/Vc);tl=[...tl,...a.value],l>1&&l!==el?(el+=1,i(hy(r))):i(tl)})}catch(a){s(a)}})}async function u0(){var t,e;const r={scopes:["offline_access","openid","profile","User.Read","Contacts.Read"]};try{const o=await c0.acquireTokenPopup(r),n=o.accessToken;if((t=o.account)!=null&&t.username){gl=(e=o.account)==null?void 0:e.username;const s=Ye().getEmailProviderAccount("MICROSOFT");s&&s.email!==gl&&await xd("MICROSOFT")}return el=1,tl=[],hy(n)}catch(o){throw o}}function d0(r){const t=[];if(!gl){console.error("Wasn't able to get the email provider");return}for(const e of r){const o=[],n=[];if(e.emailAddresses.length>0)for(const a of e.emailAddresses)o.push(a.address);if(e.homePhones.length>0)for(const a of e.homePhones)n.push({tag:"home",number:a});if(e.businessPhones.length>0)for(const a of e.businessPhones)n.push({tag:"work",number:a});e.mobilePhone&&n.push({tag:"mobile",number:e.mobilePhone});const i=Object.keys(e.homeAddress).length?e.homeAddress:e.businessAddress,s={first_name:e.givenName,last_name:e.surname,type:"imported",provider:"MICROSOFT",id_contact_provider:e.id,emails:o,phones:n,street:i.street,city:i.city,state:i.state,postcode:i.postalCode,country:i.countryOrRegion,company:e.companyName,job_title:e.jobTitle,email_source_provider:gl};t.push(s)}return t}function fy(r){const t=document.createElement("script");t.src=r,document.body.appendChild(t)}fy("https://apis.google.com/js/api.js");fy("https://accounts.google.com/gsi/client");let dr,ol=[];async function p0(){return await new Promise((r,t)=>{gapi.load("client",{callback:r,onerror:t})}),await gapi.client.init({}),await gapi.client.load("https://people.googleapis.com/$discovery/rest?version=v1"),await new Promise((r,t)=>{try{dr=google.accounts.oauth2.initTokenClient({client_id:"602655314992-njqev2maie496jk825alcu7j28r4m8mi.apps.googleusercontent.com",scope:"https://www.googleapis.com/auth/contacts.readonly https://www.googleapis.com/auth/userinfo.email",prompt:"consent",callback:e=>{console.info(e)}}),r(dr)}catch(e){t(e)}}),await h0(),ol=[],gy()}async function h0(){await new Promise((r,t)=>{try{dr.callback=e=>{e.error!==void 0&&t(e),r(e)},dr.error_callback=e=>{t(e)},gapi.client.getToken()===null?dr.requestAccessToken({prompt:"consent"}):dr.requestAccessToken({prompt:""})}catch(e){console.error(e)}})}async function gy(r){return new Promise((t,e)=>{gapi.client.people.people.connections.list({resourceName:"people/me",personFields:"names,emailAddresses,addresses,phoneNumbers,organizations",pageToken:r}).then(async o=>{r=o.result.nextPageToken;const n=o.result.connections;n&&(ol=[...ol,...n]),o.result.connections=ol,t(r?gy(r):o)}).catch(o=>e(o))})}function f0(r){return r.split("/")[1]}async function g0(r){var a,l;const t=await gapi.client.request({path:"https://www.googleapis.com/oauth2/v1/userinfo"}),e=Ye(),o=t.result.email,n=r.result.connections;if(n===void 0){console.log("Contacts list is empty");return}const i=e.getEmailProviderAccount("GOOGLE");i&&i.email!==o&&await xd("GOOGLE");const s=[];for(const c of n){const u=[],d=[];if(c.emailAddresses)for(const h of c.emailAddresses)u.push(h.value);if(c.phoneNumbers)for(const h of c.phoneNumbers)d.push({tag:h.type??"other",number:h.value});const p={first_name:c.names?(a=c.names[0])==null?void 0:a.givenName:"",last_name:c.names?(l=c.names[0])==null?void 0:l.familyName:"",type:"imported",provider:"GOOGLE",id_contact_provider:f0(c.resourceName),emails:u,phones:d,company:c.organizations?c.organizations[0].name:"",job_title:c.organizations?c.organizations[0].title:"",email_source_provider:o};c.addresses&&(p.street=c.addresses[0].streetAddress,p.city=c.addresses[0].city,p.state=c.addresses[0].region,p.postcode=c.addresses[0].postalCode,p.country=c.addresses[0].country),s.push(p)}return s}const v0={},m0={xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},y0=m("path",{d:"M3.59922 12.8002V11.6002H4.83255C4.33255 11.1558 3.93533 10.6252 3.64089 10.0085C3.34644 9.39186 3.19922 8.72242 3.19922 8.0002C3.19922 6.87797 3.53811 5.89186 4.21589 5.04186C4.89366 4.19186 5.75477 3.63353 6.79922 3.36686V4.61686C6.09922 4.87242 5.52422 5.30297 5.07422 5.90853C4.62422 6.51408 4.39922 7.21131 4.39922 8.0002C4.39922 8.53353 4.50755 9.02797 4.72422 9.48353C4.94089 9.93908 5.23255 10.328 5.59922 10.6502V9.6002H6.79922V12.8002H3.59922ZM9.19922 12.6335V11.3835C9.89922 11.128 10.4742 10.6974 10.9242 10.0919C11.3742 9.48631 11.5992 8.78908 11.5992 8.0002C11.5992 7.46686 11.4909 6.97242 11.2742 6.51686C11.0576 6.06131 10.7659 5.67242 10.3992 5.3502V6.4002H9.19922V3.2002H12.3992V4.4002H11.1659C11.6659 4.84464 12.0631 5.3752 12.3576 5.99186C12.652 6.60853 12.7992 7.27797 12.7992 8.0002C12.7992 9.12242 12.4603 10.1085 11.7826 10.9585C11.1048 11.8085 10.2437 12.3669 9.19922 12.6335Z",fill:"#212121"},null,-1),C0=[y0];function w0(r,t){return S(),O("svg",m0,C0)}const _0=oe(v0,[["render",w0]]),S0={},E0={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},R0=m("path",{d:"M2.80039 12.8002V11.6002H4.03372C3.53372 11.1558 3.1365 10.6252 2.84206 10.0085C2.54761 9.39186 2.40039 8.72242 2.40039 8.0002C2.40039 6.87797 2.73928 5.89186 3.41706 5.04186C4.09484 4.19186 4.95595 3.63353 6.00039 3.36686V4.61686C5.30039 4.87242 4.72539 5.30297 4.27539 5.90853C3.82539 6.51408 3.60039 7.21131 3.60039 8.0002C3.60039 8.53353 3.70872 9.02797 3.92539 9.48353C4.14206 9.93908 4.43372 10.328 4.80039 10.6502V9.6002H6.00039V12.8002H2.80039ZM8.00039 11.2002C7.83372 11.2002 7.69206 11.1419 7.57539 11.0252C7.45872 10.9085 7.40039 10.7669 7.40039 10.6002C7.40039 10.4335 7.45872 10.2919 7.57539 10.1752C7.69206 10.0585 7.83372 10.0002 8.00039 10.0002C8.16706 10.0002 8.30872 10.0585 8.42539 10.1752C8.54206 10.2919 8.60039 10.4335 8.60039 10.6002C8.60039 10.7669 8.54206 10.9085 8.42539 11.0252C8.30872 11.1419 8.16706 11.2002 8.00039 11.2002ZM7.40039 8.8002V4.8002H8.60039V8.8002H7.40039ZM10.0004 12.6335V11.3835C10.7004 11.128 11.2754 10.6974 11.7254 10.0919C12.1754 9.48631 12.4004 8.78908 12.4004 8.0002C12.4004 7.46686 12.2921 6.97242 12.0754 6.51686C11.8587 6.06131 11.5671 5.67242 11.2004 5.3502V6.4002H10.0004V3.2002H13.2004V4.4002H11.9671C12.4671 4.84464 12.8643 5.3752 13.1587 5.99186C13.4532 6.60853 13.6004 7.27797 13.6004 8.0002C13.6004 9.12242 13.2615 10.1085 12.5837 10.9585C11.9059 11.8085 11.0448 12.3669 10.0004 12.6335Z",fill:"#E7515A"},null,-1),T0=[R0];function b0(r,t){return S(),O("svg",E0,T0)}const A0=oe(S0,[["render",b0]]),O0=r=>(Oo("data-v-2bcd5b36"),r=r(),Po(),r),P0={class:"d-flex gap-4 mt-3 mb-3 mx-4"},I0={class:"d-flex gap-3 flex-column w-100"},D0={class:"d-flex justify-content-between w-100"},M0={class:"d-flex gap-3 align-items-center"},L0={class:"d-flex flex-column"},x0={class:"font-weight-700"},F0={key:1},N0=["onClick"],G0=["disabled"],k0={key:1,class:"d-flex align-items-center gap-2"},H0=["disabled","onClick"],V0=["disabled","onClick"],B0={class:"m-4"},U0=["disabled"],j0=["disabled"],W0={class:"m-4"},z0=O0(()=>m("div",{class:"border-bottom"},null,-1)),$0={class:"mx-3 mt-3",style:{"max-height":"300px"}},K0=X({__name:"ContentContactsIntegration",setup(r){const{t}=ve(),e=Ye(),o=ri(),n="2talk",i=x(!1),s=x(!1),a=x("Microsoft"),l=x(-1),c=x(!1),u=x(0),d=[{headerName:"Errors",field:"name"},{headerName:"",field:"description",sorted:!0}],p=x([]),h={MICROSOFT:"Connect to Outlook, Microsoft 365, and other Microsoft services",GOOGLE:"Connect to Gmail, Workspace, and other Google services",MAC:""},f=zg([{logo:zu,title:"Google",subtitle:"Not connected",separator:{content:"",color:se.TextPrimary},content:g("GOOGLE",h.GOOGLE),onConnectProvider(b){_(E,b)},onDisconnectProvider(b,I){l.value=I,a.value=b,i.value=!0},importedContactsLength:e.countImportedContactsByProvider("GOOGLE"),sync:!1,failed:!1},{logo:Zw,title:"Microsoft",subtitle:"Not connected",separator:{content:"",color:se.TextPrimary},content:g("MICROSOFT",h.MICROSOFT),onConnectProvider(b){_(C,b)},onDisconnectProvider(b,I){l.value=I,a.value=b,i.value=!0},importedContactsLength:e.countImportedContactsByProvider("MICROSOFT"),sync:!1,failed:!1}]);function g(b,I){const F=e.getEmailProviderAccount(b);return F?`Connected as ${F.email}`:I}async function _(b,I){f.value[I].sync=!0,f.value[I].failed=!1,Rc(f);try{await o.push({name:Me.Home}),await b()}catch{f.value[I].failed=!0}finally{await new Promise(U=>setTimeout(U,2*Si.Second)),f.value[I].sync=!1,f.value[I].importedContactsLength=e.countImportedContactsByProvider(f.value[I].title.toUpperCase());const F=f.value[I].title.toUpperCase();f.value[I].content=g(F,h[F]),Rc(f),p.value.length>0&&(s.value=!0),u.value===0?Th(t("No contacts to be synced.")):jo(t("Synced contacts."))}}async function C(){const b=await u0().catch(F=>{throw F instanceof zr&&F.message.includes("interaction_in_progress")&&Th(t("Pop-up opened in another window.")),F});if(b===void 0)return;const I=d0(b);I&&(a.value="Microsoft",u.value=await T(I))}async function E(){try{const b=await p0();if(typeof b>"u")return;const I=await g0(b);I&&(a.value="Google",u.value=await T(I))}catch(b){throw console.log(b),b}}function T(b){return new Promise(I=>{dw(b).then(F=>{var U,k;if(F&&F.contacts.errors.length>0)for(const M of F.contacts.errors)if(!M.contact.first_name&&!M.contact.last_name){let z="";(U=M.contact.emails)!=null&&U.length&&(z=M.contact.emails[0]),(k=M.contact.phones)!=null&&k.length&&(z=M.contact.phones[0].number),M.contact.company&&(z=M.contact.company),p.value.push({name:z.length?z:"(empty)",description:"Contact with no name"})}else p.value.push({name:`${M.contact.first_name} ${M.contact.last_name}`,description:"Generic error"});I(F==null?void 0:F.contacts.success.length)})})}function P(){s.value=!1,p.value=[]}async function A(){c.value=!0;const b=a.value.toUpperCase();try{await xd(b),i.value=!1,f.value[l.value].importedContactsLength=0,f.value[l.value].content=g(b,h[b]),Rc(f),o.push({name:Me.Home}),jo(t("Contacts removed"))}catch(I){console.log(I)}finally{c.value=!1}}return(b,I)=>{const F=lt("perfect-scrollbar");return S(),O(de,null,[m("div",P0,[m("div",I0,[(S(!0),O(de,null,qe(f.value,(U,k)=>(S(),O("div",{key:U.title,class:"d-flex provider px-3 align-items-center"},[m("div",D0,[m("div",M0,[(S(),H(ti(U.logo))),m("div",L0,[m("span",{class:"d-flex align-items-center gap-2 font-size-14",style:ue({color:v(se).TextPrimary})},[m("span",x0,L(U.title),1),U.importedContactsLength===0||U.sync||U.failed?(S(),O("span",{key:0,style:ue({color:U.separator.color})},L(U.separator.content),5)):Z("",!0),U.importedContactsLength===0&&!U.sync?(S(),O("span",F0,L(v(t)(U.subtitle)),1)):Z("",!0),U.sync?(S(),O(de,{key:2},[R(_0,{style:{animation:"spin 2s linear infinite"}}),m("span",null,L(v(t)("Syncing")),1)],64)):Z("",!0),U.failed?(S(),O(de,{key:3},[R(A0),m("span",{style:ue({color:v(se).Error})},L(v(t)("Failed")),5)],64)):Z("",!0)],4),m("span",{class:"d-flex gap-2 font-size-14",style:ue({color:v(se).TextPrimary})},L(U.content),5)])]),U.importedContactsLength===0?(S(),O("div",{key:0,class:"d-flex align-items-center",onClick:M=>U.onConnectProvider(k)},[m("button",{class:"font-weight-700 font-size-14 cursor-pointer btn-imported",disabled:U.sync},L(v(t)("Connect")),9,G0)],8,N0)):(S(),O("div",k0,[m("span",{class:"d-flex gap-2 font-size-14",style:ue({color:v(se).TextPrimary})},[m("button",{class:"font-weight-700 font-size-14 cursor-pointer btn-imported",disabled:U.sync,onClick:M=>U.onConnectProvider(k)},L(v(t)("Sync now")),9,H0),m("span",{style:ue({color:U.separator.color})},L(U.separator.content),5),m("button",{class:"font-weight-700 font-size-14 cursor-pointer btn-imported",disabled:U.sync,onClick:M=>U.onDisconnectProvider(U.title,k)},L(v(t)("Remove account")),9,V0)],4)]))])]))),128))])]),R(Wt,{modelValue:i.value,"onUpdate:modelValue":I[1]||(I[1]=U=>i.value=U),persist:"","has-btn-close":"",size:"sm","z-index":1057},{header:D(()=>[m("span",{style:ue({color:v(se).TextPrimary})},L(v(t)("Removing account")),5)]),body:D(()=>[m("div",B0,[m("span",{class:"font-size-14",style:ue({color:v(se).TextPrimary})},L(v(t)(`If you remove the account, all associated contacts will be removed from ${v(n)}. They will not be removed from your ${a.value} account.`)),5)])]),footer:D(()=>[m("button",{class:"secondary-btn text-uppercase",disabled:c.value,onClick:I[0]||(I[0]=U=>i.value=!1)},L(v(t)("Cancel")),9,U0),m("button",{class:"primary-btn text-uppercase",disabled:c.value,onClick:A},[c.value?(S(),H(Te,{key:0,name:"fa-solid fa-spinner",class:"spin",library:"fontawesome","font-size":"1rem"})):Z("",!0),he(" "+L(v(t)("Remove Account")),1)],8,j0)]),_:1},8,["modelValue"]),R(Wt,{modelValue:s.value,"onUpdate:modelValue":I[2]||(I[2]=U=>s.value=U),"z-index":1057},{header:D(()=>[m("span",{style:ue({color:v(se).TextPrimary})},L(v(t)("Sync error")),5)]),body:D(()=>[m("div",W0,[m("span",{class:"font-size-14",style:ue({color:v(se).TextPrimary})},L(v(t)(`Some contacts could not be synced from your ${a.value} account.`)),5)]),z0,R(F,null,{default:D(()=>[m("div",$0,[R(Us,{columns:d,rows:p.value},{"column-name":D(()=>[m("span",{class:"font-size-16",style:ue({color:v(se).TextPrimary})},L(v(t)("Errors"))+" ("+L(p.value.length)+")",5)]),"row-name":D(({row:U})=>[m("span",{style:ue({color:v(se).TextSecondary})},L(U.name),5)]),"row-description":D(({row:U})=>[m("span",{style:ue({color:v(se).TextPrimary})},L(U.description),5)]),_:1},8,["rows"])])]),_:1})]),footer:D(()=>[m("button",{class:"primary-btn text-uppercase",onClick:P},L(v(t)("Close")),1)]),_:1},8,["modelValue"])],64)}}}),Y0=oe(K0,[["__scopeId","data-v-2bcd5b36"]]),q0={},Q0={width:"16",height:"17",viewBox:"0 0 16 17",fill:"none",xmlns:"http://www.w3.org/2000/svg"},X0=m("g",{"clip-path":"url(#clip0_1642_11088)"},[m("path",{d:"M12.0706 14.8451V3.15533C12.0706 2.87477 11.9771 2.64098 11.7901 2.45394C11.603 2.2669 11.3692 2.17339 11.0887 2.17339H2.32915C2.0486 2.17339 1.8148 2.2669 1.62777 2.45394C1.44073 2.64098 1.34721 2.87477 1.34721 3.15533V14.8451C1.34721 15.1256 1.44073 15.3594 1.62777 15.5465C1.8148 15.7335 2.0486 15.827 2.32915 15.827H11.1043C11.3848 15.827 11.6186 15.7335 11.8057 15.5465C11.9927 15.3594 12.0862 15.1256 12.0862 14.8451H12.0706ZM11.1043 1.20703C11.6498 1.22262 12.1018 1.42524 12.4759 1.78373C12.8344 2.14221 13.037 2.6098 13.0526 3.15533V14.8451C13.037 15.3906 12.8344 15.8426 12.4759 16.2167C12.1174 16.5752 11.6498 16.7778 11.1043 16.7934H2.32915C1.78363 16.7778 1.33163 16.5752 0.957554 16.2167C0.599068 15.8582 0.396446 15.3906 0.380859 14.8451V3.15533C0.396446 2.6098 0.599068 2.1578 0.957554 1.78373C1.33163 1.42524 1.78363 1.22262 2.32915 1.20703H11.1043ZM14.5177 3.15533C14.8294 3.17091 14.9853 3.34236 15.0009 3.6385V5.5868C14.9853 5.89852 14.8138 6.05439 14.5177 6.06997H14.0345V3.13974H14.5177V3.15533ZM14.5177 10.9485C14.8294 10.9641 14.9853 11.1355 15.0009 11.4317V13.38C14.9853 13.6917 14.8138 13.8476 14.5177 13.8632H14.0345V10.9329H14.5177V10.9485ZM6.72451 6.06997C6.44395 6.06997 6.21016 6.16349 6.02312 6.35053C5.83608 6.53756 5.74257 6.77136 5.74257 7.05191C5.74257 7.33247 5.83608 7.56626 6.02312 7.7533C6.21016 7.94034 6.44395 8.03385 6.72451 8.03385C7.00506 8.03385 7.23885 7.94034 7.42589 7.7533C7.61293 7.56626 7.70645 7.33247 7.70645 7.05191C7.70645 6.77136 7.61293 6.53756 7.42589 6.35053C7.23885 6.16349 7.00506 6.06997 6.72451 6.06997ZM6.72451 9.00021C6.17898 8.98462 5.72698 8.782 5.35291 8.42351C4.99442 8.06503 4.7918 7.59744 4.77621 7.05191C4.7918 6.50639 4.99442 6.05439 5.35291 5.68031C5.71139 5.32183 6.17898 5.11921 6.72451 5.10362C7.27003 5.11921 7.72203 5.32183 8.0961 5.68031C8.45459 6.0388 8.65721 6.50639 8.6728 7.05191C8.65721 7.59744 8.45459 8.04944 8.0961 8.42351C7.73762 8.782 7.27003 8.98462 6.72451 9.00021ZM14.5177 7.05191C14.8294 7.0675 14.9853 7.23895 15.0009 7.53509V9.48339C14.9853 9.79511 14.8138 9.95098 14.5177 9.96656H14.0345V7.03633H14.5177V7.05191ZM7.69086 9.98215C8.37666 9.99774 8.95335 10.2315 9.42095 10.6835C9.87295 11.1511 10.1067 11.7278 10.1223 12.4136C10.1067 12.7253 9.93529 12.8812 9.63915 12.8968C9.32743 12.8812 9.17156 12.7098 9.15598 12.4136C9.14039 12.0084 9.00011 11.6655 8.73514 11.3849C8.45459 11.12 8.11169 10.9797 7.70645 10.9641H5.75815C5.35291 10.9797 5.01001 11.12 4.72945 11.3849C4.46448 11.6655 4.32421 12.0084 4.30862 12.4136C4.29303 12.7253 4.12158 12.8812 3.82544 12.8968C3.51372 12.8812 3.35785 12.7098 3.34227 12.4136C3.35785 11.7278 3.59165 11.1511 4.04365 10.6835C4.51124 10.2315 5.08794 9.99774 5.77374 9.98215H7.72203H7.69086Z",fill:"#344767"})],-1),Z0=m("defs",null,[m("clipPath",{id:"clip0_1642_11088"},[m("rect",{width:"16",height:"16",fill:"white",transform:"translate(0 0.5)"})])],-1),J0=[X0,Z0];function e1(r,t){return S(),O("svg",Q0,J0)}const t1=oe(q0,[["render",e1]]),o1={class:"panel-body underline-content tabs"},n1={class:"nav nav-tabs ps-4 pt-4",role:"tablist"},i1=["id","href","aria-selected"],r1={class:"tab-content"},s1=["id","aria-labelledby"],a1=X({__name:"ProfileSettings",props:{modelValue:{type:Boolean}},emits:["update:modelValue"],setup(r,{emit:t}){const{t:e}=ve(),o=Ui(),n=r,i=x(n.modelValue),s=t;Oe(()=>n.modelValue,c=>{i.value=c}),Oe(i,c=>{s("update:modelValue",c)}),Ho("modalIsActive",i);const a=[{name:"profile",icon:"user",title:"Profile",component:VS},{name:"numbers",icon:"phone",title:"Numbers",component:tE},{name:"audio-and-video",icon:"headphones",title:"Audio & Video",component:uE},{name:"contacts",icon:t1,title:"Contacts",component:Y0}],l=te(()=>c=>typeof c=="string");return(c,u)=>(S(),H(Wt,{id:"settings",modelValue:i.value,"onUpdate:modelValue":u[0]||(u[0]=d=>i.value=d),size:"lg","has-btn-close":"",persist:"",center:"","min-height":"422.8px",onClose:u[1]||(u[1]=d=>v(o).setSettingsActive(0))},{header:D(()=>[m("span",{style:ue({color:v(se).TextPrimary})},L(v(e)("Settings")),5)]),body:D(()=>[m("div",o1,[m("ul",n1,[(S(),O(de,null,qe(a,(d,p)=>m("li",{key:p,class:"nav-item",style:ue([p>0?"margin-left: 20px":""])},[m("a",{id:`${d.name}-tab`,class:Fe(["nav-link mx-auto",{active:p===v(o).settingsActive}]),"data-bs-toggle":"pill",href:`#${d.name}`,role:"tab","aria-controls":"`${item.name}`","aria-selected":p===v(o).settingsActive},[l.value(d.icon)?(S(),H(Te,{key:0,name:d.icon,style:{width:"20px",height:"20px","padding-bottom":"4px"}},null,8,["name"])):(S(),H(ti(d.icon),{key:1,style:{width:"20px",height:"20px","padding-bottom":"4px"}})),he(" "+L(v(e)(d.title)),1)],10,i1)],4)),64))]),m("div",r1,[(S(),O(de,null,qe(a,(d,p)=>m("div",{id:`${d.name}`,key:p,class:Fe(["tab-pane fade p-0",{"show active":p===v(o).settingsActive}]),role:"tabpanel","aria-labelledby":`${d.name}-tab`},[(S(),H(ti(d.component)))],10,s1)),64))])])]),_:1},8,["modelValue"]))}}),l1=oe(a1,[["__scopeId","data-v-08ddcb21"]]),c1={key:0,class:"d-flex"},u1={key:0},d1=["content"],p1=X({__name:"TeamsNumber",props:{team:{}},setup(r){const t=r,e=te(()=>t.team.numbers),o=te(()=>{var i;const n=(i=e.value)==null?void 0:i.map((s,a)=>{if(a>0)return Mt(s)});return n==null?void 0:n.join("<br>").replace("<br>","")});return(n,i)=>{var a;const s=fn("tippy");return e.value&&e.value.length>0?(S(),O("span",c1,[he(L(v(Mt)(e.value[0]))+" ",1),((a=e.value)==null?void 0:a.length)>1?(S(),O("span",u1,[he("... "),Ne((S(),O("button",{class:"btn-teams","data-placement":"right",content:o.value},[he(" +"+L(e.value.length-1),1)],8,d1)),[[s,{placement:"right",allowHTML:!0}]])])):Z("",!0)])):Z("",!0)}}}),h1={key:0,class:"d-flex justify-content-between"},f1={key:0},g1=["content"],v1=X({__name:"TeamsAssignedTo",props:{team:{}},emits:["click"],setup(r,{emit:t}){const e=r,o=t,n=te(()=>e.team.usersNumbers),i=te(()=>{var a;const s=(a=n.value)==null?void 0:a.map((l,c)=>{if(c>0)return l});return s==null?void 0:s.join("<br>").replace("<br>","")});return(s,a)=>{const l=fn("tippy");return n.value&&n.value.length>0?(S(),O("div",h1,[m("span",null,[he(L(n.value[0])+" ",1),n.value.length>1?(S(),O("span",f1,[he("... "),Ne((S(),O("button",{class:"btn-teams","data-placement":"right",content:i.value},[he(" +"+L(n.value.length-1),1)],8,g1)),[[l,{placement:"right",allowHTML:!0}]])])):Z("",!0)]),m("span",{role:"button",onClick:a[0]||(a[0]=c=>o("click",s.team))},[R(Te,{name:"user-minus",color:v(se).LineIcon},null,8,["color"])])])):Z("",!0)}}}),m1={class:"p-4"},y1={class:"d-flex gap-3"},C1={key:0,class:"pe-2"},w1={class:"text-uppercase"},_1=X({__name:"RemoveUser",props:{modelValue:{type:Boolean},user:{}},emits:["update:modelValue","update-table"],setup(r,{emit:t}){const{t:e}=ve(),o=r,n=t,i=Ye(),s=ji(),a=ea(),l=x(o.modelValue),c=x(!1);async function u(){var d;try{if(c.value=!0,o.user===void 0)return;await pw(o.user),i.removeDirectory(o.user.userId),s.reflectingUserChanges(o.user,"delete"),n("update-table"),a.deleteUser(o.user.userId),c.value=!1,l.value=!1,jo(e("User removed."))}catch(p){Pn((d=p.response)==null?void 0:d.data.message),c.value=!1}}return Oe(l,d=>{n("update:modelValue",d)}),Oe(()=>o.modelValue,d=>{l.value=d}),(d,p)=>(S(),H(Wt,{modelValue:l.value,"onUpdate:modelValue":p[1]||(p[1]=h=>l.value=h),"z-index":1056,scrollable:"",persist:"",size:"sm"},{header:D(()=>[m("span",{style:ue({color:v(se).TextPrimary})},L(v(e)("Remove User")),5)]),body:D(()=>{var h;return[m("div",m1,[m("span",{class:"font-size-14",style:ue({color:v(se).TextPrimary})},[m("p",null,[he(L(v(e)("Are you sure you wish to remove"))+" ",1),m("strong",null,L((h=o.user)==null?void 0:h.userName)+"?",1),he(" "+L(v(e)("This action can't be undone.")),1)])],4)])]}),footer:D(()=>[m("div",y1,[m("button",{class:"secondary-btn text-uppercase",onClick:p[0]||(p[0]=h=>l.value=!1)},L(v(e)("Cancel")),1),m("button",{class:"primary-btn",onClick:u},[c.value?(S(),O("span",C1,[R(Te,{name:"fa-solid fa-spinner",class:"spin",library:"fontawesome","font-size":"1rem"})])):Z("",!0),m("span",w1,L(v(e)("Remove")),1)])])]),_:1},8,["modelValue"]))}}),S1={class:"px-4"},E1={class:"d-flex gap-3"},R1={key:0,class:"pe-2"},T1={class:"text-uppercase"},b1=X({__name:"ConfirmNotificationUser",props:{modelValue:{type:Boolean},form:{}},emits:["update:modelValue"],setup(r,{emit:t}){const{t:e}=ve(),o=r,n=t;Ye(),ji(),ea();const i=x(o.modelValue),s=x(!1);async function a(){var l;try{s.value=!0,await hw(o.form),s.value=!1,i.value=!1,jo(e("Notification sent"))}catch(c){Pn((l=c.response)==null?void 0:l.data.message),s.value=!1}}return Oe(i,l=>{n("update:modelValue",l)}),Oe(()=>o.modelValue,l=>{i.value=l}),(l,c)=>(S(),H(Wt,{modelValue:i.value,"onUpdate:modelValue":c[1]||(c[1]=u=>i.value=u),"z-index":1056,scrollable:"",persist:""},{header:D(()=>[m("span",{style:ue({color:v(se).SoftBlue})},L(v(e)("User already exists")),5)]),body:D(()=>[m("div",S1,[m("span",{style:ue({color:v(se).SoftBlue})},[m("p",null,[he(L(v(e)("This user already exists."))+" "+L(v(e)("Would you like to send an email notifying the user"))+" ",1),m("strong",null,L(l.form.name),1),he("? ")])],4)])]),footer:D(()=>[m("div",E1,[m("button",{class:"secondary-btn text-uppercase",onClick:c[0]||(c[0]=u=>i.value=!1)},L(v(e)("Cancel")),1),m("button",{class:"primary-btn",onClick:a},[s.value?(S(),O("span",R1,[R(Te,{name:"fa-solid fa-spinner",class:"spin",library:"fontawesome","font-size":"1rem"})])):Z("",!0),m("span",T1,L(v(e)("Send Notification")),1)])])]),_:1},8,["modelValue"]))}}),A1={class:"panel-body rounded-vertical-pills-icon tabs px-4"},O1={class:"row mb-4 mt-3"},P1={class:"col-sm-12 col-12"},I1={class:"needs-validation",novalidate:""},D1={class:"row gx-3"},M1={class:"col"},L1={class:"row"},x1={class:"col-12 col-md"},F1={class:"form-group"},N1=["placeholder"],G1={class:"invalid-feedback"},k1={class:"row"},H1={class:"col-12 col-md"},V1={class:"form-group"},B1=["disabled","readonly"],U1={class:"invalid-feedback"},j1=["placeholder","value"],W1={class:"invalid-feedback"},z1={class:"form-group"},$1={class:"row"},K1={key:0,class:"pe-2"},Y1={class:"text-uppercase"},q1=X({__name:"InviteNewOrEditUser",props:{modelValue:{type:Boolean},user:{}},emits:["update:modelValue","update-table"],setup(r,{emit:t}){const e=Ye(),o=ji(),n=Wi(),{register:i}=Ki(),s=ot(),a=ta(),l=x(!1),c=x(!1),{t:u}=ve(),d=x([]),p=r,h=x(p.modelValue),f=x(!1),g=t;function _(){g("update-table")}const C=[{value:"Customer",label:"Account Admin"},{value:"SubAccount",label:"Standard User"}],E=x(),T=x({name:"",email:"",type:"",number:[]}),P=x(!1);function A(){E.value=void 0,T.value={name:"",email:"",type:"",number:[]},f.value=!1,P.value=!1}async function b(){var k,M;try{f.value=!0;const z=await G_(T.value),{data:V}=z;await e.addDirectory(V),o.reflectingUserChanges(V,"add"),g("update-table"),f.value=!1,jo(u("User invited.")),h.value=!1}catch(z){const V=z;((k=V.response)==null?void 0:k.status)==409&&(c.value=!0),Pn((M=V.response)==null?void 0:M.data.message),f.value=!1}}async function I(){var k,M;try{if(f.value=!0,!p.user)throw"User not selected for editing";const z=await fw({userId:p.user.userId,userName:T.value.name,email:T.value.email,assignedNumbers:((k=T.value.number)==null?void 0:k.map(ce=>({number:ce})))||[],type:p.user.type});if(a.chatIsActiveIsTruthy(),Number(p.user.userId)===e.user.userId){await jl(),s.unRegisterAll();for await(const ce of e.myNumbers)await i(ce.numbersUnmasked,ce.password,ce.name)}const{data:V}=z,$={...zi().directories[V.user.user_id],userId:V.user.user_id,accountCode:e.currentAccount.accountCode,userName:V.user.user_name,userType:V.user_type};V.settings&&Object.keys(V.settings).length>0&&($.settings={fullName:V.settings.full_name,userType:V.settings.user_type,jobTitle:V.settings.job_title,company:V.settings.company,birthday:V.settings.birthday,emailType:V.settings.email_type,email:V.settings.email,addressType:V.settings.address_type,address1:V.settings.address1,address2:V.settings.address2,city:V.settings.city,state:V.settings.state}),e.updateDirectory($),o.reflectingUserChanges(V,"update"),V.user.user_id===e.user.userId&&(e.setUserName(V.user.user_name),e.setUserEmail(V.user.email),e.updateNameSettings(V.settings.full_name)),g("update-table"),f.value=!1,jo(u("User edited successfully.")),h.value=!1}catch(z){const V=z;console.log(V),Pn((M=V.response)==null?void 0:M.data.message),f.value=!1}}function F(){if(f.value=!0,P.value=!0,!T.value.name||!T.value.email||!T.value.type){f.value=!1;return}return p.user?I():b()}function U(){d.value.sort((k,M)=>k.localeCompare(M))}return Oe(()=>p.modelValue,k=>{h.value=k}),Oe(E,k=>{T.value.type=k==null?void 0:k.value},{deep:!0}),Oe(l,async k=>{g("update:modelValue",k),g("update-table"),k||A()}),Oe(h,async k=>{var M,z;if(g("update:modelValue",k),!k)return A();if(p.user){f.value=!1,P.value=!1;let V=[];((M=p.user.assignedNumbers)==null?void 0:M.length)>0&&(V=(z=p.user)==null?void 0:z.assignedNumbers.map(q=>q.number)),T.value.name=p.user.userName,T.value.email=p.user.email,T.value.number=V,E.value={label:Wu[p.user.type],value:Wu[p.user.type]==="Account Admin"?"Customer":"SubAccount"}}}),Ze(async()=>{await $g(),d.value=n.numbers.map(k=>k.numbersUnmasked),U()}),(k,M)=>{const z=lt("MultiSelect");return S(),H(Wt,{id:"invite",modelValue:h.value,"onUpdate:modelValue":M[7]||(M[7]=V=>h.value=V),size:"lg","has-btn-close":"",persist:""},{header:D(()=>[m("span",{style:ue({color:v(se).TextPrimary})},L(p.user?v(u)("Edit User"):v(u)("Invite new User")),5)]),body:D(()=>{var V,q;return[R(_1,{modelValue:l.value,"onUpdate:modelValue":M[0]||(M[0]=$=>l.value=$),user:p==null?void 0:p.user,"z-index":1057,"update-table":_},null,8,["modelValue","user"]),R(b1,{modelValue:c.value,"onUpdate:modelValue":M[1]||(M[1]=$=>c.value=$),form:T.value,"z-index":1057},null,8,["modelValue","form"]),m("div",A1,[m("div",O1,[m("div",P1,[m("form",I1,[m("div",D1,[m("div",M1,[m("div",L1,[m("div",x1,[m("div",F1,[Ne(m("input",{"onUpdate:modelValue":M[2]||(M[2]=$=>T.value.name=$),type:"text",class:Fe(["form-control",[P.value?T.value.name?"":"is-invalid":""]]),placeholder:v(u)("Full name")},null,10,N1),[[il,T.value.name]]),m("div",G1,L(v(u)("Please fill the full name")),1)])])]),m("div",k1,[m("div",H1,[m("div",V1,[Ne(m("input",{"onUpdate:modelValue":M[3]||(M[3]=$=>T.value.email=$),placeholder:"Email",type:"text",disabled:p.user!==void 0,readonly:p.user!==void 0,class:Fe(["form-control",[P.value?T.value.email?"":"is-invalid":""]])},null,10,B1),[[il,T.value.email]]),m("div",U1,L(v(u)("Please fill the email")),1)])]),m("div",{class:Fe(["col-12 col-md select2",[P.value?T.value.type?"":"invalid-select-message":""]])},[p.user?(S(),O("input",{key:1,placeholder:v(u)("User type"),value:v(Kg)((V=k.user)==null?void 0:V.type),type:"text",class:Fe(["form-control",[P.value?T.value.email?"":"is-invalid":""]]),disabled:"true"},null,10,j1)):(S(),H(z,{key:0,modelValue:E.value,"onUpdate:modelValue":M[4]||(M[4]=$=>E.value=$),disabled:p.user,"selected-label":"","select-label":"",placeholder:v(u)("User type"),"deselect-label":"","max-height":125,options:C,label:"label",class:Fe([P.value?T.value.type?"":"invalid-select":""])},null,8,["modelValue","disabled","placeholder","class"])),m("div",W1,L(v(u)("Please fill a type")),1)],2)]),m("div",z1,[m("div",$1,[m("div",{class:Fe(["col-12 col-md select2",[P.value?(q=T.value.number)!=null&&q.length?"":"invalid-select-message":""]])},[R(z,{modelValue:T.value.number,"onUpdate:modelValue":M[5]||(M[5]=$=>T.value.number=$),"selected-label":"","select-label":"",multiple:!0,placeholder:v(u)("Available numbers"),"deselect-label":"","max-height":300,options:d.value},null,8,["modelValue","placeholder","options"])],2)])])])])])])])])]}),footer:D(()=>[m("div",{class:Fe({modalfooter:p.user})},[Ne(m("span",{style:ue({color:v(se).TextPrimary}),class:"font-size-14",role:"button",onClick:M[6]||(M[6]=V=>l.value=!0)},L(v(u)("Remove User")),5),[[Vi,p.user]]),m("button",{class:"primary-btn font-size-14",type:"button",onClick:F},[f.value?(S(),O("span",K1,[R(Te,{name:"fa-solid fa-spinner",class:"spin",library:"fontawesome","font-size":"1rem"})])):Z("",!0),m("span",Y1,L(p.user?v(u)("Save"):v(u)("Invite")),1)])],2)]),_:1},8,["modelValue"])}}}),Q1={class:"m-4"},X1={class:"d-flex gap-3"},Z1={key:0,class:"pe-2"},J1=X({__name:"UnassignNumber",props:{modelValue:{type:Boolean},number:{},name:{},userId:{}},emits:["update:modelValue","update-table"],setup(r,{emit:t}){const e=t,o=r,{t:n}=ve(),i=x(o.modelValue),s=x(!1);async function a(){var l;try{s.value=!0,await gw(o.userId,o.number),e("update-table"),s.value=!1,i.value=!1,jo(n("The number has been unlinked to the user."))}catch(c){const u=c;console.log(u),Pn((l=u.response)==null?void 0:l.data.message),s.value=!1}}return Oe(i,l=>{e("update:modelValue",l)}),Oe(()=>o.modelValue,l=>{i.value=l}),(l,c)=>(S(),H(Wt,{modelValue:i.value,"onUpdate:modelValue":c[1]||(c[1]=u=>i.value=u),"z-index":1056,scrollable:"",persist:"",size:"sm"},{header:D(()=>[m("span",{style:ue({color:v(se).TextPrimary})},L(v(n)("Unassign number")),5)]),body:D(()=>[m("section",Q1,[m("span",{class:"font-size-14",style:ue({color:v(se).TextPrimary})},[he(L(v(n)("Are you sure you wish to unassign the number"))+" ",1),m("strong",null,L(v(Mt)(o.number)),1),he(" "+L(v(n)("from"))+" ",1),m("strong",null,L(o.name)+"?",1)],4)])]),footer:D(()=>[m("div",X1,[m("button",{class:"secondary-btn text-uppercase",onClick:c[0]||(c[0]=u=>i.value=!1)},L(v(n)("Cancel")),1),m("button",{class:"primary-btn text-uppercase",onClick:a},[s.value?(S(),O("span",Z1,[R(Te,{name:"fa-solid fa-spinner",class:"spin",library:"fontawesome","font-size":"1rem"})])):Z("",!0),he(" "+L(v(n)("Unassign")),1)])])]),_:1},8,["modelValue"]))}}),eb={class:"panel-body underline-content tabs px-4"},tb={id:"border-tabs",class:"nav nav-tabs mt-3",role:"tablist"},ob={class:"nav-item"},nb={id:"border-user-tab",class:"nav-link active ms-0","data-bs-toggle":"tab",href:"#border-user",role:"tab","aria-controls":"border-user","aria-selected":"true"},ib={class:"nav-item"},rb={id:"border-number-tab",class:"nav-link","data-bs-toggle":"tab",href:"#border-number",role:"tab","aria-controls":"border-number","aria-selected":"false"},sb={id:"border-tabsContent",class:"tab-content mb-4"},ab={id:"border-user",class:"tab-pane fade show active p-0",role:"tabpanel","aria-labelledby":"border-user-tab"},lb={style:{height:"300px",overflow:"auto"}},cb={id:"border-number",class:"tab-pane fade p-0",role:"tabpanel","aria-labelledby":"border-number-tab"},ub={style:{height:"300px",overflow:"auto"}},db={class:"d-flex justify-content-between w-100"},pb=X({__name:"BaseTeams",props:{modelValue:{type:Boolean}},emits:["update:modelValue"],setup(r,{emit:t}){const e=Ye(),o=x(),n=x([]),i=x([]),s=r,a=t,{t:l}=ve(),c=x(s.modelValue),u=x(!1),d=x(!1),p=[{headerName:l("Name"),field:"userName",sorted:!0},{headerName:l("Email"),field:"email",sorted:!0},{headerName:l("Number"),field:"numbers",sorted:!0,isArray:!0},{headerName:l("Type"),field:"type",sorted:!0}],h=x({name:"",number:"",userId:0}),f=[{headerName:l("Number"),field:"number",width:"180px",sorted:!0},{headerName:l("Assigned To"),field:"usersNumbers",sorted:!0,isArray:!0}];function g(A){o.value=A,u.value=!0}function _(){o.value=void 0,u.value=!0}function C(A){h.value={name:A.users[0].userName,number:A.number,userId:A.users[0].userId},d.value=!0}async function E(){await qg(),await Qg(),await vw(),T(),P()}function T(){e.teams.length>0&&(n.value=e.teams,n.value.map(A=>{if(A.assignedNumbers.length>0)for(const b of A.assignedNumbers)A.numbers=[],A.numbers.push(b.number);return A}),n.value.sort((A,b)=>+!A.userName-+!b.userName||A.userName.localeCompare(b.userName)))}function P(){i.value=e.teamsNumbers,i.value.map(A=>{if(A.users.length>0)for(const b of A.users)A.usersNumbers=[],A.usersNumbers.push(b.userName);return A}),i.value.sort((A,b)=>{const I=A.number,F=b.number;return+!I-+!F||I.localeCompare(F)})}return Oe(c,A=>{a("update:modelValue",A)}),Oe(()=>s.modelValue,A=>{c.value=A}),Ze(()=>{T(),P()}),Yg(()=>{e.teamsNumbers.length>0}),(A,b)=>(S(),O(de,null,[R(Wt,{id:"base-team",modelValue:c.value,"onUpdate:modelValue":b[2]||(b[2]=I=>c.value=I),"has-btn-close":"",size:"xl",persist:""},{header:D(()=>[m("span",{style:ue({color:v(se).TextPrimary})},L(v(l)("Users management")),5)]),body:D(()=>[m("div",eb,[m("ul",tb,[m("li",ob,[m("a",nb,L(v(l)("Users")),1)]),m("li",ib,[m("a",rb,L(v(l)("Numbers")),1)])]),m("div",sb,[m("div",ab,[m("div",lb,[R(Us,{columns:p,rows:n.value,"row-cursor":"pointer",onRowClicked:b[0]||(b[0]=I=>g(I))},{"row-numbers":D(({row:I})=>[R(p1,{team:I},null,8,["team"])]),"row-type":D(({row:I})=>[m("span",null,L(v(Kg)(I.type)),1)]),_:1},8,["rows"])])]),m("div",cb,[m("div",ub,[R(Us,{columns:f,rows:i.value},{"row-number":D(({row:I})=>[m("span",null,L(v(Mt)(I.number)),1)]),"row-usersNumbers":D(({row:I})=>[R(v1,{team:I,onClick:C},null,8,["team"])]),_:1},8,["rows"])])])])])]),footer:D(()=>[m("div",db,[m("span",{style:ue({color:v(se).TextPrimary}),class:"font-size-14",role:"button",onClick:_},L(v(l)("Invite new User")),5),m("button",{class:"primary-btn text-uppercase",onClick:b[1]||(b[1]=I=>c.value=!1)},L(v(l)("close")),1)])]),_:1},8,["modelValue"]),R(q1,{modelValue:u.value,"onUpdate:modelValue":b[3]||(b[3]=I=>u.value=I),user:o.value,"z-index":1056,onUpdateTable:E},null,8,["modelValue","user"]),R(J1,{modelValue:d.value,"onUpdate:modelValue":b[4]||(b[4]=I=>d.value=I),name:h.value.name,number:h.value.number,"user-id":h.value.userId,onUpdateTable:E},null,8,["modelValue","name","number","user-id"])],64))}}),hb=oe(pb,[["__scopeId","data-v-358dd3ec"]]),fb="3.0.7",gb={class:"panel-body underline-content px-4"},vb={class:"d-flex justify-content-between w-100 px-4"},mb=m("span",null,null,-1),yb=X({__name:"BaseAbout",props:{modelValue:{type:Boolean}},emits:["update:modelValue"],setup(r,{emit:t}){const{t:e}=ve(),o=r,n=x(o.modelValue),i="2talk",s=new Date().getFullYear(),a=t;return Oe(()=>o.modelValue,l=>{n.value=l}),Oe(n,l=>{a("update:modelValue",l)}),(l,c)=>(S(),H(Wt,{id:"about",modelValue:n.value,"onUpdate:modelValue":c[1]||(c[1]=u=>n.value=u),size:"lg","has-btn-close":"",persist:"",center:"","min-height":"200px","max-width":"500px"},{header:D(()=>[m("span",{style:ue({color:v(se).SoftBlue})},L(v(e)("About")),5)]),body:D(()=>[m("div",gb,[m("p",null,"Version "+L(v(fb)),1),m("p",null,"(c) Copyright "+L(v(i))+" LLC, "+L(v(s))+". All rights Reserved.",1)])]),footer:D(()=>[m("div",vb,[mb,m("button",{class:"primary-btn text-uppercase",onClick:c[0]||(c[0]=u=>n.value=!1)}," Close ")])]),_:1},8,["modelValue"]))}}),vy=r=>(Oo("data-v-b55667c4"),r=r(),Po(),r),Cb=vy(()=>m("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[m("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M6.25333 8.12303L0 4.51267L0.873336 3.00001L7.12668 6.61038V0H8.87336V6.61036L15.1267 3.00001L16 4.51267L9.74668 8.12303L16 11.7334L15.1266 13.246L8.87336 9.6357V16H7.12668V9.63569L0.873391 13.246L5.56168e-05 11.7334L6.25333 8.12303Z",fill:"#0676C5"})],-1)),wb=[Cb],_b=vy(()=>m("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[m("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M4.35169 10.001L4.6686 5.99097H0.409661L0.541072 4.38695H4.76909L5.1169 0H6.66279L6.31498 4.38695H10.2184L10.5585 0H12.1043L11.7642 4.38695H16L15.8686 5.99097H11.6406L11.3237 10.001H15.5594L15.428 11.605H11.2309L10.8831 16H9.33718L9.68502 11.605H5.78165L5.44155 16H3.89566L4.23575 11.605H0L0.131411 10.001H4.35169ZM5.89758 10.001H9.76232L10.0792 5.99097H6.17583L5.89758 10.001Z",fill:"#0676C5"})],-1)),Sb=[_b],Eb={class:"number-content"},Rb={key:0,class:"number-subtitle"},Tb=X({__name:"KeyNumber",props:{number:{},label:{default:""}},emits:["click"],setup(r,{emit:t}){const e=r,{number:o,label:n}=Fd(e),i=t,s=x(null);function a(){i("click",o.value)}function l(d){const p=d;p.style.opacity="0",p.style.translate="0 -20px"}function c(d,p){const h=d,f=Number(h.dataset.index);ke.to(h,{duration:.4,ease:"power3.inOut",opacity:1,translateY:0,onComplete:p,delay:.15*f})}function u(d){const p=d,h=Number(p.dataset.index);ke.to(p,{duration:.5,ease:"power3.inOut",translateY:"-20px",opacity:0,delay:.15*h})}return tt(()=>{u(s.value)}),(d,p)=>(S(),H(Lt,{css:!1,appear:"",onBeforeEnter:l,onEnter:c},{default:D(()=>[v(o)==="*"?(S(),O("button",{key:0,ref_key:"elementRef",ref:s,class:"number--icon",style:ue({color:v(se).SPAProfile}),onClick:a},wb,4)):v(o)==="#"?(S(),O("button",{key:1,ref_key:"elementRef",ref:s,class:"number--icon",style:ue({color:v(se).SPAProfile}),onClick:a},Sb,4)):(S(),O("button",{key:2,ref_key:"elementRef",ref:s,class:"number--container",onClick:a},[m("p",Eb,L(v(o)),1),v(n)?(S(),O("span",Rb,L(v(n)),1)):Z("",!0)],512))]),_:1}))}}),bb=oe(Tb,[["__scopeId","data-v-b55667c4"]]),Ab=["data-index"],Ob=X({__name:"DialKeyboard",emits:["click"],setup(r,{emit:t}){$i(h=>({"9b6e25de":a.value.marginTop}));const e=ot(),o=Ht(),{keys:n}=Wr(),i=t,s=x(null),a=te(()=>o.phoneSelected.name?{marginTop:"6px"}:{marginTop:"32px"});function l(h){new Audio(h).play()}function c(h){if(l(h.soundFile),i("click",h.number),Object.entries(e.sessionActive).length>0){const{sendDTMF:f}=Rt(e.sessionActive);f(h.number)}}function u(h){const f=h;f.style.display="none"}function d(h,f){const g=h;ke.to(g,{duration:.1,ease:"power3.inOut",display:"grid",onComplete:f})}function p(h){const f=h;ke.to(f,{duration:.1,delay:.5,ease:"power3.inOut",display:"none"})}return tt(()=>{p(s.value)}),(h,f)=>(S(),H(Lt,{appear:"",css:!1,onBeforeEnter:u,onEnter:d},{default:D(()=>[m("div",{ref_key:"containerRef",ref:s,class:"keyboard--container"},[(S(!0),O(de,null,qe(v(n),(g,_)=>(S(),O("div",{key:_,class:"keyboard--content","data-index":_},[R(bb,{"data-index":_,number:g.number,label:g.label,onClick:C=>c(g)},null,8,["data-index","number","label","onClick"])],8,Ab))),128))],512)]),_:1}))}}),rc=oe(Ob,[["__scopeId","data-v-3ea0dc36"]]),Pb={class:"contact-selected-container"},Ib={class:"contact-selected-name"},Db=X({__name:"ContactSelected",props:{name:{},phoneTag:{},hasTransfer:{type:Boolean}},setup(r){$i(n=>({"8dcaf9ce":o.value.marginTop}));const t=r,e=Ht(),o=te(()=>t.hasTransfer||e.hasNewCall?{marginTop:"8px"}:{marginTop:"-8px"});return(n,i)=>(S(),O("div",Pb,[m("div",Ib,L(n.name),1),R(Jw,{"phone-tag":n.phoneTag??"","class-tag":"contact-selected-tag"},null,8,["phone-tag"])]))}}),Mb=oe(Db,[["__scopeId","data-v-6d5a7c1f"]]),Lb=["placeholder","value"],xb=X({__name:"DialingInput",props:{input:{},openDialPad:{type:Boolean},inCall:{type:Boolean},makeCallOnClickedContact:{type:Boolean,default:!0},hasTransfer:{type:Boolean}},emits:["update:input"],setup(r,{emit:t}){const e=x(3),o=x(0),n=x(e.value),i=r,s=t,{newCall:a}=Ki(),l=ot(),c=Ht(),{t:u}=ve(),{keys:d}=Wr(),{openDialPad:p}=Fd(i),h=x(null),f=x(),{focused:g}=mw(f),_=x([]),C=x([]);let E,T;const P=x(!0),A=x(!1),b=x(!1);function I(fe){const Y=fe.target.value;c.setPhoneSelected({name:"",number:""}),s("update:input",Y)}function F(fe){const Y=U(fe.key);if(Y!==-1&&(new Audio(d[Y].soundFile).play(),Object.entries(l.sessionActive).length>0)){const{sendDTMF:it}=Rt(l.sessionActive);it(d[Y].number)}if(fe.key=="Enter")return a(i.input)}function U(fe){return d.findIndex(Y=>Y.number===fe)}function k(fe,Y){var ye;fe!==-1&&(d[fe].number!=="*"||d[fe].number!=="#")&&(g.value||(F(Y),s("update:input",((ye=f.value)==null?void 0:ye.value)+d[fe].number)),g.value=!0)}const M=te(()=>p.value?!0:!!c.phoneSelected.name);function z(fe){return fe.startsWith("+")?Ti(fe):fe}function V(){if(!i.input||!P.value||p.value){b.value=!1,P.value=!0,_.value=[],C.value=[];return}z(i.input).length>=3&&(b.value=!0,clearTimeout(E),clearTimeout(T),E=setTimeout(async function(){_.value=[],C.value=[];const fe=await cv(z(i.input));if(fe)for(const Y of fe)_.value.push({name:Y.user_name,number:Y.number,userId:Y.user_id});C.value=_.value.slice(o.value,n.value),A.value=!0,T=setTimeout(()=>A.value=!1,500)},250))}function q(){b.value=!0}function $(){b.value=!1}function ce(fe){c.setPhoneSelected({name:fe.name,number:fe.number}),s("update:input",Mt(fe.number)),setTimeout(()=>{$()},250)}function me(){o.value+=e.value,n.value+=e.value,C.value=[...C.value,..._.value.slice(o.value,n.value)]}function Ve(fe){const Y=fe;Y.style.opacity="0",Y.style.translate="0 -20px",Y.style.display="none"}function Qe(fe,Y){const ye=fe;ke.to(ye,{ease:"power3.inOut",opacity:1,translateY:0,display:"flex",duration:.7,onComplete:Y})}function nt(fe){const Y=fe;ke.to(Y,{ease:"power3.inOut",opacity:0,translateY:-20,display:"none",duration:.7})}return Oe(()=>i.input,()=>{V(),o.value=0,n.value=e.value}),Ze(()=>{c.setPhoneSelected({number:"",name:""})}),tt(()=>{nt(h.value),c.setPhoneSelected({number:"",name:""})}),yw(document.body,"keyup",fe=>{const Y=fe,ye=U(Y.key);k(ye,Y)}),(fe,Y)=>(S(),O(de,null,[Ne((S(),H(Lt,{ref_key:"containerRef",ref:h,appear:"",css:!1,onBeforeEnter:Ve,onEnter:Qe},{default:D(()=>[m("div",{class:"dialing-input--container",onFocusin:q},[m("input",{ref_key:"inputRef",ref:f,class:Fe(["dialing-input--input",{"dialing-input--in-call":M.value,"dialing-input--input-active":b.value&&C.value.length>0&&!fe.inCall}]),type:"text",placeholder:v(p)?"":v(u)("Search or dial a number"),value:i.input,style:{outline:"none"},onInput:Y[0]||(Y[0]=ye=>I(ye)),onKeyup:F},null,42,Lb),b.value&&C.value.length>0&&!fe.inCall?(S(),H(t_,{key:0,users:C.value,"match-contacts-length":_.value.length,onLoadMore:me,onContactSelected:ce},null,8,["users","match-contacts-length"])):Z("",!0)],32)]),_:1})),[[v(ia),$]]),v(c).phoneSelected.name&&!fe.inCall?(S(),H(Mb,{key:0,name:v(c).phoneSelected.name,"has-transfer":fe.hasTransfer},null,8,["name","has-transfer"])):Z("",!0)],64))}}),sc=oe(xb,[["__scopeId","data-v-44c2df86"]]),Fb={class:"number-details--content"},Nb={class:"font-weight-700"},Gb=X({__name:"NumberDetails",props:{label:{},number:{}},setup(r){const t=r,e=x(null);function o(s){const a=s;a.style.opacity="0",a.style.translate="0 -20px",a.style.display="none"}function n(s,a){const l=s;ke.to(l,{ease:"power3.inOut",opacity:1,translateY:0,display:"flex",duration:.7,onComplete:a})}function i(s){const a=s;ke.to(a,{ease:"power3.inOut",opacity:0,translateY:-20,display:"none",duration:.7})}return tt(()=>{i(e.value)}),(s,a)=>(S(),H(Lt,{appear:"",css:!1,onBeforeEnter:o,onEnter:n},{default:D(()=>[m("div",{ref_key:"containerRef",ref:e,class:"number-details--container"},[m("span",Fb,[m("span",Nb,L(t.label),1),m("span",null,L(v(Mt)(s.number)),1)])],512)]),_:1}))}}),Ip=oe(Gb,[["__scopeId","data-v-6f44de3e"]]),kb={inheritAttrs:!1},Hb=r=>(Oo("data-v-d3375b95"),r=r(),Po(),r),Vb=Hb(()=>m("svg",{width:"56",height:"56",viewBox:"0 0 56 56",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[m("rect",{width:"56",height:"56",rx:"28",fill:"#17AD37"}),m("path",{d:"M38.4503 33.35C38.2056 33.0894 37.3417 32.3188 35.7536 31.2992C34.1537 30.2708 32.9739 29.6295 32.6354 29.48C32.6056 29.4668 32.5727 29.4619 32.5404 29.466C32.508 29.47 32.4773 29.4828 32.4517 29.503C31.9065 29.9281 30.9887 30.7091 30.9395 30.7513C30.6217 31.0236 30.6217 31.0236 30.3615 30.9388C29.904 30.7888 28.4828 30.0341 27.2443 28.7928C26.0059 27.5516 25.2123 26.0952 25.0623 25.6381C24.9765 25.3775 24.9765 25.3775 25.2498 25.0597C25.292 25.0105 26.0734 24.0927 26.4986 23.548C26.5187 23.5223 26.5315 23.4917 26.5356 23.4593C26.5396 23.4269 26.5348 23.3941 26.5215 23.3642C26.372 23.0253 25.7307 21.8459 24.7023 20.2461C23.6814 18.6584 22.9117 17.7945 22.6511 17.5499C22.6271 17.5273 22.5976 17.5116 22.5655 17.5044C22.5334 17.4972 22.5 17.4988 22.4687 17.5091C21.5577 17.8221 20.6787 18.2216 19.8437 18.702C19.0377 19.1706 18.2745 19.7094 17.5632 20.3122C17.5384 20.3333 17.5198 20.3608 17.5094 20.3917C17.499 20.4225 17.4972 20.4557 17.5042 20.4875C17.6022 20.9441 18.0704 22.85 19.5236 25.49C21.0062 28.1844 22.0337 29.5649 24.2111 31.7347C26.3884 33.9045 27.8125 34.9939 30.5097 36.4766C33.1497 37.9297 35.0565 38.3984 35.5121 38.4955C35.5441 38.5024 35.5772 38.5006 35.6082 38.4902C35.6391 38.4798 35.6667 38.4612 35.6879 38.4364C36.2906 37.7251 36.8293 36.962 37.2976 36.1559C37.778 35.3209 38.1774 34.4419 38.4906 33.5309C38.5006 33.4999 38.5022 33.4668 38.4951 33.435C38.488 33.4032 38.4725 33.3738 38.4503 33.35Z",fill:"white"})],-1)),Bb=[Vb];function Ub(r,t,e,o,n,i){return S(),O("button",Ul({class:"call-button"},r.$attrs),Bb,16)}const Dp=oe(kb,[["render",Ub],["__scopeId","data-v-d3375b95"]]),gf=Nd,jb=Nd;let{URL:nl,Url:Wb}=Nd;nl=nl||Wb;const vf="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789~!@#$%^&*()_+`-=[]{}|;':,./<>?";class zb{_protocol(t){var e=new nl(t);return e.protocol==="http:"?gf:jb}checkDownloadSpeed(t,e){this.validateDownloadSpeedParams(t,e);let o,n=this._protocol(t);return new Promise((i,s)=>n.get(t,a=>{a.once("data",()=>{o=new Date().getTime()}),a.once("end",()=>{const c=(new Date().getTime()-o)/1e3,d=(e*8/c).toFixed(2),p=(d/1e3).toFixed(2),h=(p/1e3).toFixed(2);i({bps:d,kbps:p,mbps:h})})})).catch(i=>{throw new Error(i)})}checkUploadSpeed(t,e=2e6){let o;const n=this.generateTestData(e/1e3),i=JSON.stringify({defaultData:n});return new Promise((s,a)=>{let l=gf.request(t,c=>{c.setEncoding("utf8"),c.on("data",()=>{}),c.on("end",()=>{const d=(new Date().getTime()-o)/1e3,h=(e*8/d).toFixed(2),f=(h/1e3).toFixed(2),g=(f/1e3).toFixed(2);s({bps:h,kbps:f,mbps:g})})});o=new Date().getTime(),l.on("error",c=>{a(c)}),l.write(i),l.end()})}validateDownloadSpeedParams(t,e){if(typeof t!="string")throw new Error("baseUrl must be a string");if(typeof e!="number")throw new Error("fileSizeInBytes must be a number")}generateTestData(t){const e=t*1e3;let o="";for(var n=0;n<e;n++)o+=vf.charAt(Math.floor(Math.random()*vf.length));return o}}var $b=zb;const mf=Cw($b),Kb={class:"flex justify-center"},Yb=["title"],qb=X({__name:"BaseOnlineIndicator",setup(r){$i(C=>({"63d0f082":v(se).SPALightGrey2,"59dbc2c4":v(se).Success,"0c2c325d":v(se).Warning,"0e86917c":v(se).Danger}));const{t}=ve(),e=x(),o=x(),n=x(),i=x(!0),s=x(!1),a=x(!0),l=x(!1),c=te(()=>i.value&&s.value?"indicator-online":i.value&&a.value?"indicator-regular":i.value&&l.value?"indicator-low":"indicator-nosignal"),u=te(()=>{var C,E;return i.value&&((C=n.value)==null?void 0:C.mbps)!==void 0?n.value.mbps+" mbps":i.value&&((E=n.value)==null?void 0:E.mbps)===void 0?"":t("Device is offline")});async function d(){const E={hostname:"eu.httpbin.org",port:443,path:"/stream-bytes/500000",method:"GET",headers:{"Content-Type":"application/json"}};return await new mf().checkUploadSpeed(E,5e5).catch(()=>!1)}function p(){var E;s.value=!1,a.value=!1,l.value=!1;const C=parseFloat((E=n.value)==null?void 0:E.mbps);C>4?s.value=!0:C<=4&&C>=1?a.value=!0:l.value=!0}async function h(){var T;const C="https://eu.httpbin.org/stream-bytes/500000";n.value=await((T=o.value)==null?void 0:T.checkDownloadSpeed(C,5e5)),p()}function f(){o.value=new mf,e.value=setInterval(h,3e4),h()}function g(){e.value!==null&&(clearInterval(e.value),o.value=null)}async function _(){i.value=await d(),i.value?f():g()}return Ze(()=>{window.addEventListener("online",_),window.addEventListener("offline",_)}),(C,E)=>(S(),O("div",Kb,[m("span",{class:Fe([c.value,"indicator"]),title:u.value},null,10,Yb)]))}}),Qb=oe(qb,[["__scopeId","data-v-8d91fafe"]]),Xb=r=>(Oo("data-v-484e007e"),r=r(),Po(),r),Zb=Xb(()=>m("svg",{width:"36",height:"36",viewBox:"0 0 36 36",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[m("path",{d:"M18.295 15.0145C17.6795 14.9537 17.0602 15.0847 16.522 15.3894C15.9838 15.6942 15.5529 16.1579 15.2884 16.717C15.0238 17.2761 14.9386 17.9033 15.0443 18.5127C15.15 19.1221 15.4415 19.684 15.8789 20.1213C16.3162 20.5587 16.8781 20.8502 17.4875 20.9559C18.0969 21.0616 18.7241 20.9763 19.2832 20.7118C19.8423 20.4473 20.306 20.0164 20.6107 19.4782C20.9155 18.94 21.0464 18.3207 20.9856 17.7052C20.9163 17.0151 20.6106 16.3703 20.1202 15.8799C19.6299 15.3896 18.985 15.0838 18.295 15.0145V15.0145ZM25.5185 18C25.5165 18.3261 25.4926 18.6517 25.4467 18.9745L27.566 20.6367C27.6582 20.7132 27.7204 20.8199 27.7414 20.9379C27.7625 21.056 27.741 21.1776 27.6808 21.2812L25.676 24.75C25.6151 24.8527 25.5199 24.9305 25.4072 24.9699C25.2945 25.0093 25.1716 25.0076 25.06 24.9652L22.9553 24.1177C22.8393 24.0714 22.7136 24.0547 22.5895 24.0691C22.4653 24.0834 22.3467 24.1283 22.2442 24.1997C21.923 24.4209 21.5855 24.6174 21.2346 24.7875C21.1242 24.8411 21.0288 24.9211 20.9567 25.0203C20.8846 25.1196 20.838 25.2351 20.8211 25.3566L20.5056 27.6014C20.4849 27.72 20.4237 27.8276 20.3324 27.906C20.2411 27.9844 20.1253 28.0287 20.005 28.0312H15.9953C15.877 28.0292 15.7629 27.9869 15.6718 27.9113C15.5807 27.8357 15.5181 27.7314 15.4942 27.6155L15.1792 25.3739C15.1616 25.2511 15.1138 25.1345 15.0402 25.0346C14.9666 24.9346 14.8694 24.8544 14.7574 24.8011C14.4068 24.6319 14.0704 24.4349 13.7514 24.2119C13.6493 24.1408 13.5311 24.0963 13.4074 24.0823C13.2838 24.0683 13.1586 24.0853 13.0431 24.1317L10.9389 24.9788C10.8274 25.0212 10.7045 25.023 10.5918 24.9837C10.4791 24.9444 10.3839 24.8666 10.323 24.7641L8.31815 21.2953C8.25787 21.1917 8.23633 21.07 8.25736 20.952C8.27839 20.834 8.34063 20.7272 8.43299 20.6508L10.2241 19.2445C10.3222 19.1666 10.3993 19.0655 10.4484 18.9502C10.4976 18.835 10.5171 18.7093 10.5053 18.5845C10.4885 18.3891 10.4781 18.1941 10.4781 17.9986C10.4781 17.8031 10.488 17.6109 10.5053 17.4197C10.5158 17.2957 10.4953 17.1711 10.4456 17.057C10.396 16.9429 10.3187 16.843 10.2208 16.7662L8.43065 15.36C8.33978 15.2832 8.27886 15.1768 8.25855 15.0596C8.23824 14.9423 8.25983 14.8217 8.31955 14.7188L10.3244 11.25C10.3853 11.1473 10.4805 11.0695 10.5931 11.0301C10.7058 10.9907 10.8288 10.9924 10.9403 11.0348L13.045 11.8823C13.1611 11.9286 13.2868 11.9453 13.4109 11.9309C13.535 11.9166 13.6536 11.8717 13.7561 11.8003C14.0773 11.5791 14.4149 11.3826 14.7658 11.2125C14.8761 11.1589 14.9716 11.0789 15.0437 10.9797C15.1158 10.8804 15.1623 10.7649 15.1792 10.6434L15.4947 8.39859C15.5154 8.28004 15.5767 8.17236 15.668 8.09396C15.7593 8.01555 15.875 7.9713 15.9953 7.96875H20.005C20.1234 7.9708 20.2375 8.01309 20.3286 8.08867C20.4196 8.16425 20.4823 8.2686 20.5061 8.38453L20.8211 10.6261C20.8388 10.7489 20.8866 10.8655 20.9602 10.9654C21.0338 11.0654 21.1309 11.1456 21.243 11.1989C21.5935 11.3681 21.9299 11.5651 22.2489 11.7881C22.3511 11.8592 22.4693 11.9037 22.5929 11.9177C22.7166 11.9317 22.8418 11.9147 22.9572 11.8683L25.0614 11.0213C25.1729 10.9788 25.2959 10.977 25.4085 11.0163C25.5212 11.0556 25.6164 11.1334 25.6774 11.2359L27.6822 14.7047C27.7425 14.8083 27.764 14.93 27.743 15.048C27.722 15.166 27.6597 15.2728 27.5674 15.3492L25.7763 16.7555C25.6777 16.8331 25.6001 16.9342 25.5506 17.0494C25.5011 17.1647 25.4812 17.2905 25.4927 17.4155C25.5081 17.6095 25.5185 17.8045 25.5185 18Z",stroke:"#0676C5","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),Jb=[Zb],eA=X({__name:"SettingsIcon",setup(r){const t=Ui();function e(){t.setSettingsActive(2),t.showSettings()}return(o,n)=>(S(),O("button",{class:"settings-icon",onClick:e},Jb))}}),Mp=oe(eA,[["__scopeId","data-v-484e007e"]]),tA=X({__name:"DialingActions",props:{number:{default:""}},emits:["lastActivityNumber"],setup(r,{emit:t}){const e=t,o=Ht(),{newCall:n}=Ki(),i=Xg(),s=r,a=ot(),l=x(null);function c(){const h=o.phoneSelected.number?o.phoneSelected.number:s.number;if(!h){const f=i.calls[i.calls.length-1];e("lastActivityNumber",f.remoteNumber);return}n(h,a.userAgentActive)}function u(h){const f=h;f.style.opacity="0",f.style.translate="0 -20px",f.style.display="none"}function d(h,f){const g=h;ke.to(g,{ease:"power3.inOut",opacity:1,translateY:0,display:"grid",duration:.7,onComplete:f})}function p(h){const f=h;ke.to(f,{ease:"power3.inOut",opacity:0,translateY:-20,display:"none",duration:.7})}return tt(()=>{p(l.value)}),(h,f)=>(S(),H(Lt,{appear:"",css:!1,onBeforeEnter:u,onEnter:d},{default:D(()=>[m("div",{ref_key:"containerRef",ref:l,class:"actions--container"},[R(Mp),R(Dp,{onClick:c}),R(Qb)],512)]),_:1}))}}),oA=oe(tA,[["__scopeId","data-v-9c6168cb"]]),nA={class:"d-flex gap-1"},iA={class:"dial-numbers-title"},rA={class:"dial-numbers-subtitle"},sA={class:"dial-numbers-button"},aA={key:0,class:"dial-numbers-list"},lA=["onClick"],cA={class:"dial-numbers-list-item-title"},uA={class:"dial-numbers-list-item-subtitle"},dA=X({__name:"DialNumbers",props:{phone:{},name:{}},setup(r){const t=r,e=ot(),o=x(null),n=x([]),[i,s]=ww();async function a(){n.value=[];for await(const h of e.userAgentArray)e.userAgentActive.number!==h.number&&n.value.push({number:h.number,name:t.name,userAgent:h})}function l(){i.value=!1}async function c(h){e.setUserAgentActive(h.userAgent),await a(),l()}function u(h){const f=h;f.style.opacity="0",f.style.translate="0 -20px",f.style.display="none"}function d(h,f){const g=h;ke.to(g,{ease:"power3.inOut",opacity:1,translateY:0,display:"flex",duration:.7,onComplete:f})}function p(h){const f=h;ke.to(f,{ease:"power3.inOut",opacity:0,translateY:-20,display:"none",duration:.7})}return Yg(()=>{a()}),tt(()=>{p(o.value)}),(h,f)=>(S(),H(Lt,{appear:"",css:!1,onBeforeEnter:u,onEnter:d},{default:D(()=>[Ne((S(),O("div",{ref_key:"containerRef",ref:o,class:"d-flex justify-content-center align-items-center position-relative",style:{"z-index":"3"}},[m("div",{class:"dial-numbers-content",onClick:f[0]||(f[0]=g=>v(s)())},[m("div",nA,[m("span",iA,L(t.name),1),m("span",rA,L(v(Mt)(t.phone)),1)]),m("button",sA,[R(Te,{name:"fa-solid fa-chevron-down",library:"fontawesome","font-size":"0.85em"})])]),v(i)?(S(),O("ul",aA,[(S(!0),O(de,null,qe(n.value,(g,_)=>(S(),O("li",{key:_,class:"dial-numbers-list-item",onClick:C=>c(g)},[m("span",cA,L(t.name),1),m("span",uA,L(v(Mt)(g.number)),1)],8,lA))),128))])):Z("",!0)])),[[v(ia),l]])]),_:1}))}}),pA=X({__name:"CallingFrom",setup(r){const t=ot(),e=te(()=>{if(!t.hasSessions)return o("Calling from");const{direction:l}=Rt(t.sessionActive);return l.value==="outgoing"?o("Calling from"):o("Incoming call")}),{t:o}=ve(),n=x(null);function i(l){const c=l;c.style.opacity="0",c.style.translate="0 -20px",c.style.display="none"}function s(l,c){const u=l;ke.to(u,{ease:"power3.inOut",opacity:1,translateY:0,display:"block",duration:.7,onComplete:c})}function a(l){const c=l;ke.to(c,{ease:"power3.inOut",opacity:0,translateY:-20,display:"none",duration:.7})}return tt(()=>{a(n.value)}),(l,c)=>(S(),H(Lt,{appear:"",css:!1,onBeforeEnter:i,onEnter:s},{default:D(()=>[m("span",{ref_key:"containerRef",ref:n,class:"calling-from"},L(e.value),513)]),_:1}))}}),Lp=oe(pA,[["__scopeId","data-v-07d6c67b"]]),yf="45deg",Cf="-45deg",hA=36,fA=360,gA=X({__name:"CloseIcon",setup(r){const t=x(null),e=x(Cf),o=Ut("position"),n=Ut("callButtonEl"),i=Ut("handleTogglePhone");function s(){if(n!=null&&n.value&&o){if(o.x.value+fA-hA<n.value.getBoundingClientRect().x){e.value=yf;return}e.value=Cf;return}e.value=yf}function a(u){const d=u;d.style.opacity="0",d.style.translate="0 -20px",d.style.display="none"}function l(u,d){const p=u;ke.to(p,{ease:"power3.inOut",opacity:1,translateY:0,display:"flex",duration:.7,onComplete:d})}function c(u){const d=u;ke.to(d,{ease:"power3.inOut",opacity:0,translateY:-20,display:"none",duration:.7})}return Oe([()=>o==null?void 0:o.x.value,()=>o==null?void 0:o.y.value],()=>{s()}),tt(()=>{c(t.value)}),Ze(()=>{s()}),(u,d)=>(S(),H(Lt,{appear:"",css:!1,onBeforeEnter:a,onEnter:l},{default:D(()=>[m("button",{class:"close-icon",href:"containerRef",onClick:d[0]||(d[0]=(...p)=>v(i)&&v(i)(...p))},[R(Te,{style:ue({rotate:e.value}),"font-size":"12px",name:"fa-solid fa-arrow-up",color:v(se).TextSecondary,library:"fontawesome"},null,8,["style","color"])])]),_:1}))}}),xp=oe(gA,[["__scopeId","data-v-91093299"]]),vA={class:"dialing--container"},mA={class:"dialing--description"},yA=X({__name:"BaseDialing",setup(r){const{number:t,onClickKeyboard:e,setNumber:o}=Wr(),n=ot(),i=Ye(),s=te(()=>i.user.userName),a=te(()=>Object.entries(n.userAgentActive).length>0?n.userAgentActive.number:"");return(l,c)=>(S(),O("div",vA,[m("div",mA,[R(Lp),v(n).userAgentArray.length>1?(S(),H(dA,{key:1,name:s.value,phone:v(n).userAgentActive.number},null,8,["name","phone"])):(S(),H(Ip,{key:0,label:s.value,number:a.value},null,8,["label","number"]))]),R(sc,{input:v(t),"onUpdate:input":c[0]||(c[0]=u=>Wl(t)?t.value=u:null)},null,8,["input"]),R(rc,{onClick:v(e)},null,8,["onClick"]),R(oA,{number:v(t),onLastActivityNumber:v(o)},null,8,["number","onLastActivityNumber"]),R(xp)]))}}),CA=oe(yA,[["__scopeId","data-v-e73690a4"]]),wA={class:"description-contact-title"},Bc=".",_A=X({__name:"DescriptionContact",setup(r){const t=Ut("session"),{remoteName:e,remoteNumber:o}=Rt(t),n=x(null),i=te(()=>{var d,p,h,f;if((d=t==null?void 0:t.transfer)!=null&&d.progress)return{title:(p=t==null?void 0:t.transfer)==null?void 0:p.name,subtitle:(h=t==null?void 0:t.transfer)==null?void 0:h.number};let c="",u=Mt(o.value??"");return e.value&&e.value.toLowerCase()==="anonymous"?c="Anonymous":(e.value&&((f=e.value)==null?void 0:f.toLowerCase())!=="unavailable"&&e.value!==o.value?c=e.value:(c=Mt(o.value??""),u=""),c===u&&(u=Bc),u||(u=Bc)),{title:c,subtitle:u}});function s(c){const u=c;u.style.opacity="0",u.style.translate="0 -20px",u.style.display="none"}function a(c,u){const d=c;ke.to(d,{ease:"power3.inOut",opacity:1,translateY:0,display:"flex",duration:.7,onComplete:u})}function l(c){const u=c;ke.to(u,{ease:"power3.inOut",opacity:0,translateY:-20,display:"none",duration:.7})}return tt(()=>{l(n.value)}),(c,u)=>(S(),H(Lt,{appear:"",css:!1,onBeforeEnter:s,onEnter:a},{default:D(()=>[m("div",{ref_key:"containerRef",ref:n,class:"description-contact--container"},[m("span",wA,L(i.value.title),1),m("span",{class:Fe(["description-contact-content",{"text-white":i.value.subtitle===Bc}])},L(i.value.subtitle),3)],512)]),_:1}))}}),my=oe(_A,[["__scopeId","data-v-3fc590d7"]]),SA=["title","disabled"],EA={class:"d-flex justify-content-center align-items-center action-button"},RA={class:"d-flex justify-content-center align-items-center"},TA=X({__name:"CallActions",props:{tooltip:{default:""},disabled:{type:Boolean},hasAction:{type:Boolean}},emits:["click"],setup(r,{emit:t}){const e=t;function o(){e("click")}const n=r,{tooltip:i,disabled:s}=Fd(n);return(a,l)=>{const c=fn("tippy");return Ne((S(),O("button",{class:Fe(["d-flex justify-content-center align-items-center action--container",{"bs-tooltip":v(i),"action-selected":a.hasAction}]),title:v(i),"data-toggle":"tooltip","data-placement":"top",disabled:v(s),onClick:o},[m("div",EA,[m("div",RA,[rt(a.$slots,"icon",{},void 0,!0)])])],10,SA)),[[c,{}]])}}}),pi=oe(TA,[["__scopeId","data-v-67378dbd"]]),bA={},AA={width:"92",height:"68",viewBox:"0 0 92 68",fill:"none",xmlns:"http://www.w3.org/2000/svg"},OA=m("path",{d:"M48.6667 43.3334V24.6667H54V43.3334H48.6667ZM38 43.3334V24.6667H43.3333V43.3334H38Z",fill:"#0676C5"},null,-1),PA=[OA];function IA(r,t){return S(),O("svg",AA,PA)}const DA=oe(bA,[["render",IA]]),MA={},LA={width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg"},xA=m("path",{d:"M16.0001 18.6667C14.889 18.6667 13.9445 18.2779 13.1667 17.5001C12.389 16.7223 12.0001 15.7779 12.0001 14.6667V6.66675C12.0001 5.55564 12.389 4.61119 13.1667 3.83341C13.9445 3.05564 14.889 2.66675 16.0001 2.66675C17.1112 2.66675 18.0556 3.05564 18.8334 3.83341C19.6112 4.61119 20.0001 5.55564 20.0001 6.66675V14.6667C20.0001 15.7779 19.6112 16.7223 18.8334 17.5001C18.0556 18.2779 17.1112 18.6667 16.0001 18.6667ZM14.6667 28.0001V23.9001C12.3556 23.589 10.4445 22.5556 8.93341 20.8001C7.4223 19.0445 6.66675 17.0001 6.66675 14.6667H9.33341C9.33341 16.5112 9.98341 18.0834 11.2834 19.3834C12.5834 20.6834 14.1556 21.3334 16.0001 21.3334C17.8445 21.3334 19.4167 20.6834 20.7167 19.3834C22.0167 18.0834 22.6667 16.5112 22.6667 14.6667H25.3334C25.3334 17.0001 24.5779 19.0445 23.0667 20.8001C21.5556 22.5556 19.6445 23.589 17.3334 23.9001V28.0001H14.6667Z",fill:"#0676C5"},null,-1),FA=[xA];function NA(r,t){return S(),O("svg",LA,FA)}const GA=oe(MA,[["render",NA]]),kA={},HA={width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg"},VA=m("path",{d:"M23.6667 19.9333L21.7334 18C22.0445 17.4889 22.2778 16.9555 22.4334 16.4C22.5889 15.8444 22.6667 15.2667 22.6667 14.6667H25.3334C25.3334 15.6444 25.1889 16.5722 24.9 17.45C24.6111 18.3278 24.2 19.1555 23.6667 19.9333ZM19.7334 15.9333L12 8.19999V6.66666C12 5.55555 12.3889 4.6111 13.1667 3.83332C13.9445 3.05555 14.8889 2.66666 16 2.66666C17.1111 2.66666 18.0556 3.05555 18.8334 3.83332C19.6111 4.6111 20 5.55555 20 6.66666V14.6667C20 14.9111 19.9723 15.1333 19.9167 15.3333C19.8611 15.5333 19.8 15.7333 19.7334 15.9333ZM14.6667 28V23.8667C12.3556 23.5555 10.4445 22.5278 8.93337 20.7833C7.42226 19.0389 6.6667 17 6.6667 14.6667H9.33337C9.33337 16.5111 9.98337 18.0833 11.2834 19.3833C12.5834 20.6833 14.1556 21.3333 16 21.3333C16.7556 21.3333 17.4723 21.2167 18.15 20.9833C18.8278 20.75 19.4445 20.4222 20 20L21.9 21.9C21.2556 22.4111 20.55 22.8389 19.7834 23.1833C19.0167 23.5278 18.2 23.7555 17.3334 23.8667V28H14.6667ZM26.4 30.1333L1.8667 5.59999L3.73337 3.73332L28.2667 28.2667L26.4 30.1333Z",fill:"#0676C5"},null,-1),BA=[VA];function UA(r,t){return S(),O("svg",HA,BA)}const jA=oe(kA,[["render",UA]]),WA={width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg"},zA=m("path",{d:"M16 14.6667C17.1067 14.6667 18.05 14.2767 18.83 13.4967C19.61 12.7167 20 11.7734 20 10.6667C20 9.56008 19.61 8.61675 18.83 7.83675C18.05 7.05675 17.1067 6.66675 16 6.66675C14.8933 6.66675 13.95 7.05675 13.17 7.83675C12.39 8.61675 12 9.56008 12 10.6667C12 11.7734 12.39 12.7167 13.17 13.4967C13.95 14.2767 14.8933 14.6667 16 14.6667ZM16 18.6667C14.8933 18.6667 13.8533 18.4567 12.88 18.0367C11.9067 17.6167 11.06 17.0467 10.34 16.3267C9.62 15.6067 9.05 14.7601 8.63 13.7867C8.21 12.8134 8 11.7734 8 10.6667C8 9.56008 8.21 8.52008 8.63 7.54675C9.05 6.57341 9.62 5.72675 10.34 5.00675C11.06 4.28675 11.9067 3.71675 12.88 3.29675C13.8533 2.87675 14.8933 2.66675 16 2.66675C17.1067 2.66675 18.1467 2.87675 19.12 3.29675C20.0933 3.71675 20.94 4.28675 21.66 5.00675C22.38 5.72675 22.95 6.57341 23.37 7.54675C23.79 8.52008 24 9.56008 24 10.6667C24 11.7734 23.79 12.8134 23.37 13.7867C22.95 14.7601 22.38 15.6067 21.66 16.3267C20.94 17.0467 20.0933 17.6167 19.12 18.0367C18.1467 18.4567 17.1067 18.6667 16 18.6667Z",fill:"#0676C5"},null,-1),$A=m("path",{d:"M8.05426 21.4637C8.90157 21.4637 9.59986 21.563 10.1491 21.7617C10.7026 21.9604 11.1135 22.2606 11.3818 22.6621C11.65 23.0637 11.7841 23.5709 11.7841 24.1836C11.7841 24.5975 11.7032 24.9598 11.5414 25.2703C11.3796 25.5808 11.1668 25.8436 10.9028 26.0589C10.6388 26.2742 10.3535 26.4501 10.0469 26.5867L12.7932 30.5424H10.5962L8.36721 27.0587H7.3134V30.5424H5.3335V21.4637H8.05426ZM7.91375 23.0409H7.3134V25.4938H7.95207C8.60778 25.4938 9.07615 25.3883 9.35716 25.1771C9.64244 24.9618 9.78508 24.6472 9.78508 24.2332C9.78508 23.8027 9.6318 23.4963 9.32523 23.3142C9.02292 23.132 8.55243 23.0409 7.91375 23.0409Z",fill:"#0676C5"},null,-1),KA=m("path",{d:"M19.3461 30.5424H13.9684V21.4637H19.3461V23.0409H15.9483V25.0343H19.1098V26.6116H15.9483V28.9527H19.3461V30.5424Z",fill:"#0676C5"},null,-1),YA=m("path",{d:"M25.2666 22.9354C24.8877 22.9354 24.5513 23.0078 24.2575 23.1527C23.968 23.2935 23.7232 23.4984 23.523 23.7675C23.3272 24.0366 23.1781 24.3616 23.076 24.7424C22.9738 25.1233 22.9227 25.5518 22.9227 26.0279C22.9227 26.6695 23.0036 27.2181 23.1654 27.6735C23.3314 28.1247 23.5869 28.4704 23.9318 28.7105C24.2767 28.9465 24.7216 29.0645 25.2666 29.0645C25.6456 29.0645 26.0245 29.0231 26.4035 28.9403C26.7867 28.8575 27.2018 28.7395 27.6489 28.5863V30.2008C27.2359 30.3664 26.8293 30.4844 26.429 30.5548C26.0288 30.6293 25.5796 30.6666 25.0814 30.6666C24.1191 30.6666 23.3272 30.4741 22.7055 30.0891C22.0881 29.6999 21.6304 29.1576 21.3324 28.4621C21.0343 27.7625 20.8853 26.9469 20.8853 26.0154C20.8853 25.3282 20.9811 24.699 21.1727 24.1277C21.3643 23.5564 21.6453 23.0616 22.0158 22.6435C22.3862 22.2254 22.8439 21.9025 23.3889 21.6748C23.9339 21.4471 24.5598 21.3333 25.2666 21.3333C25.7307 21.3333 26.1948 21.3912 26.6589 21.5071C27.1273 21.6189 27.5744 21.7741 28.0002 21.9729L27.3615 23.5377C27.0123 23.3763 26.6611 23.2355 26.3077 23.1155C25.9543 22.9954 25.6073 22.9354 25.2666 22.9354Z",fill:"#0676C5"},null,-1),qA=[zA,$A,KA,YA],QA=X({__name:"RecordIcon",props:{color:{default:"#344767"}},setup(r){return(t,e)=>(S(),O("svg",WA,qA))}}),XA={},ZA={width:"92",height:"68",viewBox:"0 0 92 68",fill:"none",xmlns:"http://www.w3.org/2000/svg"},JA=m("path",{d:"M46 48.6666C45.2667 48.6666 44.6389 48.4055 44.1167 47.8833C43.5945 47.361 43.3334 46.7333 43.3334 45.9999C43.3334 45.2666 43.5945 44.6388 44.1167 44.1166C44.6389 43.5944 45.2667 43.3333 46 43.3333C46.7334 43.3333 47.3612 43.5944 47.8834 44.1166C48.4056 44.6388 48.6667 45.2666 48.6667 45.9999C48.6667 46.7333 48.4056 47.361 47.8834 47.8833C47.3612 48.4055 46.7334 48.6666 46 48.6666ZM38 24.6666C37.2667 24.6666 36.6389 24.4055 36.1167 23.8833C35.5945 23.361 35.3334 22.7333 35.3334 21.9999C35.3334 21.2666 35.5945 20.6388 36.1167 20.1166C36.6389 19.5944 37.2667 19.3333 38 19.3333C38.7334 19.3333 39.3612 19.5944 39.8834 20.1166C40.4056 20.6388 40.6667 21.2666 40.6667 21.9999C40.6667 22.7333 40.4056 23.361 39.8834 23.8833C39.3612 24.4055 38.7334 24.6666 38 24.6666ZM38 32.6666C37.2667 32.6666 36.6389 32.4055 36.1167 31.8833C35.5945 31.361 35.3334 30.7333 35.3334 29.9999C35.3334 29.2666 35.5945 28.6388 36.1167 28.1166C36.6389 27.5944 37.2667 27.3333 38 27.3333C38.7334 27.3333 39.3612 27.5944 39.8834 28.1166C40.4056 28.6388 40.6667 29.2666 40.6667 29.9999C40.6667 30.7333 40.4056 31.361 39.8834 31.8833C39.3612 32.4055 38.7334 32.6666 38 32.6666ZM38 40.6666C37.2667 40.6666 36.6389 40.4055 36.1167 39.8833C35.5945 39.361 35.3334 38.7333 35.3334 37.9999C35.3334 37.2666 35.5945 36.6388 36.1167 36.1166C36.6389 35.5944 37.2667 35.3333 38 35.3333C38.7334 35.3333 39.3612 35.5944 39.8834 36.1166C40.4056 36.6388 40.6667 37.2666 40.6667 37.9999C40.6667 38.7333 40.4056 39.361 39.8834 39.8833C39.3612 40.4055 38.7334 40.6666 38 40.6666ZM54 24.6666C53.2667 24.6666 52.6389 24.4055 52.1167 23.8833C51.5945 23.361 51.3334 22.7333 51.3334 21.9999C51.3334 21.2666 51.5945 20.6388 52.1167 20.1166C52.6389 19.5944 53.2667 19.3333 54 19.3333C54.7334 19.3333 55.3612 19.5944 55.8834 20.1166C56.4056 20.6388 56.6667 21.2666 56.6667 21.9999C56.6667 22.7333 56.4056 23.361 55.8834 23.8833C55.3612 24.4055 54.7334 24.6666 54 24.6666ZM46 40.6666C45.2667 40.6666 44.6389 40.4055 44.1167 39.8833C43.5945 39.361 43.3334 38.7333 43.3334 37.9999C43.3334 37.2666 43.5945 36.6388 44.1167 36.1166C44.6389 35.5944 45.2667 35.3333 46 35.3333C46.7334 35.3333 47.3612 35.5944 47.8834 36.1166C48.4056 36.6388 48.6667 37.2666 48.6667 37.9999C48.6667 38.7333 48.4056 39.361 47.8834 39.8833C47.3612 40.4055 46.7334 40.6666 46 40.6666ZM54 40.6666C53.2667 40.6666 52.6389 40.4055 52.1167 39.8833C51.5945 39.361 51.3334 38.7333 51.3334 37.9999C51.3334 37.2666 51.5945 36.6388 52.1167 36.1166C52.6389 35.5944 53.2667 35.3333 54 35.3333C54.7334 35.3333 55.3612 35.5944 55.8834 36.1166C56.4056 36.6388 56.6667 37.2666 56.6667 37.9999C56.6667 38.7333 56.4056 39.361 55.8834 39.8833C55.3612 40.4055 54.7334 40.6666 54 40.6666ZM54 32.6666C53.2667 32.6666 52.6389 32.4055 52.1167 31.8833C51.5945 31.361 51.3334 30.7333 51.3334 29.9999C51.3334 29.2666 51.5945 28.6388 52.1167 28.1166C52.6389 27.5944 53.2667 27.3333 54 27.3333C54.7334 27.3333 55.3612 27.5944 55.8834 28.1166C56.4056 28.6388 56.6667 29.2666 56.6667 29.9999C56.6667 30.7333 56.4056 31.361 55.8834 31.8833C55.3612 32.4055 54.7334 32.6666 54 32.6666ZM46 32.6666C45.2667 32.6666 44.6389 32.4055 44.1167 31.8833C43.5945 31.361 43.3334 30.7333 43.3334 29.9999C43.3334 29.2666 43.5945 28.6388 44.1167 28.1166C44.6389 27.5944 45.2667 27.3333 46 27.3333C46.7334 27.3333 47.3612 27.5944 47.8834 28.1166C48.4056 28.6388 48.6667 29.2666 48.6667 29.9999C48.6667 30.7333 48.4056 31.361 47.8834 31.8833C47.3612 32.4055 46.7334 32.6666 46 32.6666ZM46 24.6666C45.2667 24.6666 44.6389 24.4055 44.1167 23.8833C43.5945 23.361 43.3334 22.7333 43.3334 21.9999C43.3334 21.2666 43.5945 20.6388 44.1167 20.1166C44.6389 19.5944 45.2667 19.3333 46 19.3333C46.7334 19.3333 47.3612 19.5944 47.8834 20.1166C48.4056 20.6388 48.6667 21.2666 48.6667 21.9999C48.6667 22.7333 48.4056 23.361 47.8834 23.8833C47.3612 24.4055 46.7334 24.6666 46 24.6666Z",fill:"#0676C5"},null,-1),eO=[JA];function tO(r,t){return S(),O("svg",ZA,eO)}const oO=oe(XA,[["render",tO]]),nO={},iO={width:"92",height:"68",viewBox:"0 0 92 68",fill:"none",xmlns:"http://www.w3.org/2000/svg"},rO=m("path",{d:"M50.3029 40.5869C50.1501 40.3018 49.5756 39.4261 48.4264 38.1631C47.269 36.8897 46.388 36.053 46.1273 35.843C46.1043 35.8245 46.0767 35.8126 46.0475 35.8085C46.0182 35.8045 45.9884 35.8085 45.9613 35.8201C45.3853 36.064 44.4003 36.5316 44.3474 36.5569C44.0059 36.7205 44.0059 36.7205 43.7984 36.5854C43.4337 36.3472 42.3683 35.3548 41.5766 33.98C40.7849 32.6052 40.4324 31.1465 40.4084 30.712C40.3944 30.4641 40.3944 30.4641 40.7077 30.2504C40.7561 30.2172 41.6539 29.5981 42.153 29.2216C42.1767 29.2039 42.195 29.1801 42.2061 29.1528C42.2173 29.1255 42.2207 29.0956 42.2161 29.0664C42.1648 28.7352 41.8806 27.5543 41.3564 25.9153C40.8359 24.2887 40.3656 23.3535 40.1951 23.0786C40.1795 23.0533 40.1573 23.0326 40.131 23.0188C40.1046 23.005 40.075 22.9986 40.0453 23.0002C39.1758 23.0605 38.314 23.2038 37.4718 23.4281C36.6576 23.6489 35.8645 23.9411 35.1017 24.3013C35.0751 24.3139 35.0524 24.3336 35.036 24.3581C35.0197 24.3827 35.0104 24.4112 35.009 24.4407C34.9877 24.8626 34.9507 26.638 35.6024 29.2855C36.2672 31.9874 36.842 33.4345 38.2367 35.8407C39.6315 38.247 40.621 39.5325 42.631 41.4599C44.598 43.3481 46.1547 44.2043 46.5302 44.3958C46.5565 44.4093 46.5859 44.4155 46.6154 44.4136C46.6449 44.4118 46.6733 44.402 46.6977 44.3853C47.3909 43.9048 48.0404 43.364 48.6385 42.7692C49.2538 42.152 49.8088 41.4773 50.2958 40.7545C50.3118 40.7297 50.3209 40.7011 50.3222 40.6717C50.3234 40.6422 50.3168 40.613 50.3029 40.5869Z",fill:"#0676C5"},null,-1),sO=m("path",{d:"M51 34.4953V30.4953H47V27.8286H51V23.8286H53.6667V27.8286H57.6667V30.4953H53.6667V34.4953H51Z",fill:"#0676C5"},null,-1),aO=[rO,sO];function lO(r,t){return S(),O("svg",iO,aO)}const cO=oe(nO,[["render",lO]]),uO=r=>(Oo("data-v-3033eef3"),r=r(),Po(),r),dO={class:"d-flex justify-content-center align-items-center position-relative"},pO=["title"],hO=uO(()=>m("svg",{width:"56",height:"56",viewBox:"0 0 56 56",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[m("rect",{width:"56",height:"56",rx:"28",fill:"#DC001E"}),m("path",{d:"M17.5392 31.9984C17.8737 32.0085 18.9559 31.9494 20.6823 31.5891C22.4224 31.2271 23.6281 30.8858 23.9511 30.7662C23.9796 30.7556 24.0046 30.7379 24.0233 30.7148C24.0421 30.6917 24.0539 30.6642 24.0576 30.6352C24.137 30.0204 24.2276 28.9441 24.2323 28.8862C24.2624 28.5123 24.2624 28.5123 24.4908 28.4012C24.893 28.2064 26.3336 27.7841 27.9753 27.7858C29.617 27.7876 31.1066 28.2076 31.5085 28.4021C31.7379 28.5129 31.7379 28.5129 31.7674 28.8874C31.772 28.9453 31.8623 30.0219 31.9415 30.6364C31.9451 30.6654 31.9569 30.6929 31.9757 30.716C31.9944 30.7391 32.0194 30.7568 32.0479 30.7673C32.3713 30.8873 33.5766 31.2283 35.3167 31.5903C37.0438 31.9494 38.1253 32.0091 38.4599 31.999C38.4906 31.9981 38.5206 31.9893 38.5466 31.9736C38.5726 31.9578 38.5937 31.9356 38.6076 31.9093C39.0035 31.1337 39.3209 30.3237 39.5557 29.4903C39.7791 28.6827 39.9276 27.8578 39.9994 27.0252C40.0019 26.9961 39.9961 26.9669 39.9825 26.9408C39.9689 26.9146 39.9482 26.8925 39.9225 26.8767C39.5554 26.6495 37.9835 25.7387 35.2736 24.9867C32.5081 24.219 30.9139 23.9953 28.0358 24.0001C25.1577 24.0048 23.4937 24.2169 20.7264 24.9864C18.0165 25.7384 16.4437 26.6495 16.0778 26.8767C16.0521 26.8926 16.0313 26.9148 16.0177 26.9409C16.0041 26.9671 15.9982 26.9964 16.0005 27.0255C16.0724 27.858 16.221 28.6828 16.4446 29.4903C16.6794 30.3237 16.9969 31.1337 17.3927 31.9093C17.4066 31.9353 17.4275 31.9573 17.4533 31.9729C17.479 31.9886 17.5087 31.9974 17.5392 31.9984Z",fill:"white"})],-1)),fO=[hO],gO=X({__name:"TerminateButton",setup(r){const t=Ut("session"),{t:e}=ve();function o(){t==null||t.terminate()}const n=x((t==null?void 0:t.direction)==="incoming"&&!!t.start_time);return t==null||t.on("confirmed",()=>{n.value=!0}),Ze(()=>{n.value=!!(t!=null&&t.start_time)}),(i,s)=>{const a=fn("tippy");return S(),O("div",dO,[Ne((S(),O("button",{class:"responsive-button bs-tooltip",title:n.value?v(e)("End call"):v(e)("Decline"),"data-toggle":"tooltip","data-placement":"top",onClick:o},fO,8,pO)),[[a,{}]])])}}}),Fp=oe(gO,[["__scopeId","data-v-3033eef3"]]),vO=X({__name:"CallingActionsFooter",props:{hasBtnClose:{type:Boolean}},emits:["close"],setup(r,{emit:t}){const e=t,{t:o}=ve(),n=x(null);function i(l){const c=l;c.style.opacity="0",c.style.translate="0 -20px",c.style.display="none"}function s(l,c){const u=l;ke.to(u,{ease:"power3.inOut",opacity:1,translateY:0,display:"grid",duration:.7,onComplete:c})}function a(l){const c=l;ke.to(c,{ease:"power3.inOut",opacity:0,translateY:-20,display:"none",duration:.7})}return tt(()=>{a(n.value)}),(l,c)=>(S(),H(Lt,{appear:"",css:!1,onBeforeEnter:i,onEnter:s},{default:D(()=>[m("div",{ref_key:"containerRef",ref:n,class:"calling-actions-container-footer"},[R(Mp),R(Fp),l.hasBtnClose?(S(),O("button",{key:0,class:"calling-action-close-content",onClick:c[0]||(c[0]=u=>e("close"))},L(v(o)("Close")),1)):Z("",!0)],512)]),_:1}))}}),yy=oe(vO,[["__scopeId","data-v-fc6d31ef"]]),mO={},yO={width:"92",height:"68",viewBox:"0 0 92 68",fill:"none",xmlns:"http://www.w3.org/2000/svg"},CO=m("path",{d:"M48.3029 41.7583C48.1501 41.4732 47.5756 40.5974 46.4264 39.3345C45.269 38.0611 44.388 37.2244 44.1273 37.0144C44.1043 36.9959 44.0767 36.9839 44.0475 36.9799C44.0182 36.9759 43.9884 36.9799 43.9613 36.9915C43.3853 37.2354 42.4003 37.7029 42.3474 37.7283C42.0059 37.8919 42.0059 37.8919 41.7984 37.7568C41.4337 37.5186 40.3683 36.5262 39.5766 35.1514C38.7849 33.7766 38.4324 32.3179 38.4084 31.8834C38.3944 31.6355 38.3944 31.6355 38.7077 31.4218C38.7561 31.3886 39.6539 30.7695 40.153 30.393C40.1767 30.3753 40.195 30.3515 40.2061 30.3242C40.2173 30.2968 40.2207 30.267 40.2161 30.2378C40.1648 29.9066 39.8806 28.7257 39.3564 27.0867C38.8359 25.4601 38.3656 24.5249 38.1951 24.25C38.1795 24.2246 38.1573 24.204 38.131 24.1902C38.1046 24.1764 38.075 24.17 38.0453 24.1716C37.1758 24.2319 36.314 24.3752 35.4718 24.5995C34.6576 24.8203 33.8645 25.1125 33.1017 25.4727C33.0751 25.4853 33.0524 25.505 33.036 25.5295C33.0197 25.5541 33.0104 25.5826 33.009 25.6121C32.9877 26.034 32.9507 27.8094 33.6024 30.4569C34.2672 33.1588 34.842 34.6059 36.2367 37.0121C37.6315 39.4183 38.621 40.7039 40.631 42.6313C42.598 44.5194 44.1547 45.3757 44.5302 45.5672C44.5565 45.5807 44.5859 45.5868 44.6154 45.585C44.6449 45.5832 44.6733 45.5734 44.6977 45.5567C45.3909 45.0762 46.0404 44.5354 46.6385 43.9406C47.2538 43.3233 47.8088 42.6487 48.2958 41.9259C48.3118 41.9011 48.3209 41.8725 48.3222 41.8431C48.3234 41.8136 48.3168 41.7843 48.3029 41.7583Z",fill:"#0676C5"},null,-1),wO=m("path",{d:"M51.7893 38.3666L49.9226 36.4999L54.5226 32.1666H43.4226V29.4999H54.5226L49.9226 24.8667L51.7893 23L59.5893 30.8332L51.7893 38.3666Z",fill:"#0676C5"},null,-1),_O=[CO,wO];function SO(r,t){return S(),O("svg",yO,_O)}const EO=oe(mO,[["render",SO]]),RO={},TO={width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg"},bO=m("path",{d:"M24 15.9999L8.25 25.5262L8.25 6.47363L24 15.9999Z",fill:"#0676C5"},null,-1),AO=[bO];function OO(r,t){return S(),O("svg",TO,AO)}const PO=oe(RO,[["render",OO]]),IO={},DO={width:"92",height:"68",viewBox:"0 0 92 68",fill:"none",xmlns:"http://www.w3.org/2000/svg"},MO=m("path",{d:"M46.4098 22.0348L46.375 22L38.9305 29.4445L40.875 31.3891L40.9098 31.3543L40.9445 31.3891L45 27.3336V37.4445C45 40.5511 42.4816 43.0695 39.375 43.0695H38V45.8195H39.375C42.3244 45.8195 44.9176 44.295 46.4098 41.9909C47.9019 44.295 50.4952 45.8195 53.4445 45.8195H54.8195V43.0695H53.4445C50.3379 43.0695 47.8195 40.5511 47.8195 37.4445V27.3336L51.875 31.3891L51.9098 31.3543L51.9445 31.3891L53.8891 29.4445L46.4445 22L46.4098 22.0348Z",fill:"#0676C5"},null,-1),LO=[MO];function xO(r,t){return S(),O("svg",DO,LO)}const FO=oe(IO,[["render",xO]]),NO={},GO={width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg"},kO=m("path",{d:"M16 14.6666C17.1067 14.6666 18.05 14.2766 18.83 13.4966C19.61 12.7166 20 11.7733 20 10.6666C20 9.55996 19.61 8.61663 18.83 7.83663C18.05 7.05663 17.1067 6.66663 16 6.66663C14.8933 6.66663 13.95 7.05663 13.17 7.83663C12.39 8.61663 12 9.55996 12 10.6666C12 11.7733 12.39 12.7166 13.17 13.4966C13.95 14.2766 14.8933 14.6666 16 14.6666ZM16 18.6666C14.8933 18.6666 13.8533 18.4566 12.88 18.0366C11.9067 17.6166 11.06 17.0466 10.34 16.3266C9.62 15.6066 9.05 14.76 8.63 13.7866C8.21 12.8133 8 11.7733 8 10.6666C8 9.55996 8.21 8.51996 8.63 7.54663C9.05 6.57329 9.62 5.72663 10.34 5.00663C11.06 4.28663 11.9067 3.71663 12.88 3.29663C13.8533 2.87663 14.8933 2.66663 16 2.66663C17.1067 2.66663 18.1467 2.87663 19.12 3.29663C20.0933 3.71663 20.94 4.28663 21.66 5.00663C22.38 5.72663 22.95 6.57329 23.37 7.54663C23.79 8.51996 24 9.55996 24 10.6666C24 11.7733 23.79 12.8133 23.37 13.7866C22.95 14.76 22.38 15.6066 21.66 16.3266C20.94 17.0466 20.0933 17.6166 19.12 18.0366C18.1467 18.4566 17.1067 18.6666 16 18.6666Z",fill:"#DC001E"},null,-1),HO=m("path",{d:"M8.05402 21.4638C8.90133 21.4638 9.59962 21.5631 10.1489 21.7619C10.7024 21.9606 11.1133 22.2607 11.3815 22.6623C11.6498 23.0638 11.7839 23.571 11.7839 24.1837C11.7839 24.5977 11.703 24.9599 11.5412 25.2704C11.3794 25.5809 11.1665 25.8438 10.9025 26.059C10.6385 26.2743 10.3533 26.4503 10.0467 26.5869L12.793 30.5425H10.596L8.36697 27.0588H7.31315V30.5425H5.33325V21.4638H8.05402ZM7.91351 23.0411H7.31315V25.4939H7.95183C8.60754 25.4939 9.0759 25.3884 9.35692 25.1772C9.6422 24.962 9.78483 24.6473 9.78483 24.2334C9.78483 23.8028 9.63155 23.4965 9.32499 23.3143C9.02268 23.1321 8.55219 23.0411 7.91351 23.0411Z",fill:"#0676C5"},null,-1),VO=m("path",{d:"M19.3458 30.5425H13.9682V21.4638H19.3458V23.0411H15.9481V25.0344H19.1095V26.6117H15.9481V28.9528H19.3458V30.5425Z",fill:"#0676C5"},null,-1),BO=m("path",{d:"M25.2664 22.9355C24.8874 22.9355 24.5511 23.008 24.2573 23.1528C23.9677 23.2936 23.7229 23.4985 23.5228 23.7676C23.3269 24.0367 23.1779 24.3617 23.0757 24.7426C22.9735 25.1234 22.9224 25.5519 22.9224 26.028C22.9224 26.6697 23.0033 27.2182 23.1651 27.6736C23.3312 28.1248 23.5867 28.4705 23.9315 28.7106C24.2764 28.9466 24.7214 29.0646 25.2664 29.0646C25.6453 29.0646 26.0243 29.0232 26.4032 28.9404C26.7864 28.8576 27.2016 28.7396 27.6486 28.5864V30.201C27.2356 30.3666 26.829 30.4846 26.4288 30.5549C26.0285 30.6294 25.5793 30.6667 25.0812 30.6667C24.1189 30.6667 23.3269 30.4742 22.7053 30.0892C22.0879 29.7 21.6302 29.1577 21.3321 28.4622C21.0341 27.7626 20.885 26.947 20.885 26.0156C20.885 25.3283 20.9809 24.6991 21.1725 24.1278C21.3641 23.5565 21.6451 23.0618 22.0155 22.6436C22.3859 22.2255 22.8437 21.9026 23.3887 21.6749C23.9337 21.4472 24.5596 21.3334 25.2664 21.3334C25.7305 21.3334 26.1946 21.3913 26.6587 21.5072C27.1271 21.619 27.5741 21.7743 27.9999 21.973L27.3612 23.5379C27.0121 23.3764 26.6608 23.2356 26.3074 23.1156C25.954 22.9955 25.607 22.9355 25.2664 22.9355Z",fill:"#0676C5"},null,-1),UO=[kO,HO,VO,BO];function jO(r,t){return S(),O("svg",GO,UO)}const WO=oe(NO,[["render",jO]]),Cy=r=>(Oo("data-v-de27a41d"),r=r(),Po(),r),zO={class:"actions--display"},$O=Cy(()=>m("div",null,null,-1)),KO=Cy(()=>m("div",null,null,-1)),Ra="3232100",YO=X({__name:"CallingActions",props:{hasFooter:{type:Boolean,default:!0}},emits:["open-dial-pad"],setup(r,{emit:t}){const e=t,o=Ut("session"),n=Ht(),i=ot(),{t:s}=ve(),{isMuted:a,isRecording:l,toggleMute:c,toggleRecording:u,toggleHold:d,unmute:p}=Rt(o),h=x(),f=x(!1),g=x((o==null?void 0:o.direction)==="incoming");o==null||o.on("confirmed",()=>{g.value=!0});const _=te(()=>{var M;const k=o==null?void 0:o.remote_identity.uri.user;return!g.value||((M=o==null?void 0:o.transfer)==null?void 0:M.progress)||n.conference.inProgress&&!(k!=null&&k.startsWith(Ra))});function C(){e("open-dial-pad")}function E(){n.setHasTransfer(!0)}function T(k){return{remoteName:k.remote_identity.display_name,remoteNumber:k.remote_identity.uri.user,localNumber:k.local_identity.uri.user}}function P({session:k,roomConference:M}){const{remoteNumber:z,localNumber:V}=T(k);i.userAgentActive.ua.sendMessage(z,JSON.stringify({type:"conference",message:{room:M,remoteNumber:V}})),k.unhold(),k.refer(M),setTimeout(()=>{k.terminate()},1e3)}async function A(){if(i.userAgentArray.length===0)return;const k=i.userAgentActive.number,M=`${Ra}${k}`;if(n.setConferenceInProgress(!0),n.inConference.room){for(const z of i.sessionsArray){const{remoteNumber:V}=T(z);V.includes(n.inConference.room)||P({session:z,roomConference:n.inConference.room})}return}n.setConferenceRoom(M);for(const z of i.sessionsArray){const{remoteNumber:V,remoteName:q}=T(z);if(V.startsWith(Ra)){z.unhold();continue}const{title:$}=sa({remoteNumber:V,remoteName:q});n.setConferenceSession({name:$.value,number:V}),P({session:z,roomConference:M})}}function b(k){const M=k;M.style.opacity="0",M.style.translate="0 -20px"}function I(k,M){const z=k,V=Number(z.dataset.index);ke.to(z,{duration:.7,ease:"power3.inOut",opacity:1,translateY:0,display:"flex",onComplete:M,delay:.15*V})}function F(){for(const k of i.sessionsArray)k.hold();n.setHasNewCall(!0)}function U(k){const z=Number(k.dataset.index);ke.to(k,{duration:.7,ease:"power3.inOut",translateY:"-20px",opacity:0,delay:.15*z})}return Oe(()=>o,k=>{var M;(M=k==null?void 0:k.transfer)!=null&&M.progress&&p()},{deep:!0}),Ze(()=>{h.value=setInterval(()=>{f.value=(o==null?void 0:o.isOnHold().local)??!1},100),g.value=!!(o!=null&&o.start_time)}),tt(()=>{clearInterval(h.value);const k=document.querySelectorAll(`.action--container[data-session='${o==null?void 0:o.id}']`);for(const M of Array.from(k))U(M)}),(k,M)=>(S(),O("div",zO,[R(_w,{tag:"ul",class:"actions--container",appear:"",css:!1,onBeforeEnter:b,onEnter:I},{default:D(()=>{var z,V,q,$,ce,me,Ve,Qe;return[R(pi,{key:"0","data-index":"0","data-session":(z=v(o))==null?void 0:z.id,tooltip:v(a)?v(s)("Microphone Off"):v(s)("Microphone On"),"has-action":v(a),disabled:v(n).conference.inProgress&&!((V=v(o))!=null&&V.remote_identity.uri.user.startsWith(Ra)),onClick:v(c)},Tc({_:2},[v(a)?{name:"icon",fn:D(()=>[R(jA)]),key:"1"}:{name:"icon",fn:D(()=>[R(GA)]),key:"0"}]),1032,["data-session","tooltip","has-action","disabled","onClick"]),R(pi,{key:"1","data-index":"1","data-session":(q=v(o))==null?void 0:q.id,tooltip:v(l)?v(s)("Stop Recording"):v(s)("Record"),disabled:_.value,"has-action":v(l),onClick:v(u)},Tc({_:2},[v(l)?{name:"icon",fn:D(()=>[R(WO)]),key:"1"}:{name:"icon",fn:D(()=>[R(QA)]),key:"0"}]),1032,["data-session","tooltip","disabled","has-action","onClick"]),R(pi,{key:"2","data-index":"2","data-session":($=v(o))==null?void 0:$.id,tooltip:f.value?v(s)("Resume"):v(s)("Hold"),disabled:_.value,"has-action":f.value,onClick:v(d)},Tc({_:2},[f.value?{name:"icon",fn:D(()=>[R(PO)]),key:"1"}:{name:"icon",fn:D(()=>[R(DA)]),key:"0"}]),1032,["data-session","tooltip","disabled","has-action","onClick"]),R(pi,{key:"3","data-index":"3","data-session":(ce=v(o))==null?void 0:ce.id,tooltip:v(s)("New call"),disabled:_.value,onClick:F},{icon:D(()=>[R(cO)]),_:1},8,["data-session","tooltip","disabled"]),R(pi,{key:"4","data-index":"4","data-session":(me=v(o))==null?void 0:me.id,tooltip:v(s)("Keypad"),disabled:_.value,onClick:C},{icon:D(()=>[R(oO)]),_:1},8,["data-session","tooltip","disabled"]),R(pi,{key:"5","data-index":"5","data-session":(Ve=v(o))==null?void 0:Ve.id,tooltip:v(s)("Transfer"),disabled:_.value,onClick:E},{icon:D(()=>[R(EO)]),_:1},8,["data-session","tooltip","disabled"]),v(i).sessionsArray.length>1?(S(),O(de,{key:0},[$O,R(pi,{key:"6","data-index":"6","data-session":(Qe=v(o))==null?void 0:Qe.id,tooltip:v(s)("Merge"),disabled:_.value,onClick:A},{icon:D(()=>[R(FO)]),_:1},8,["data-session","tooltip","disabled"]),KO],64)):Z("",!0)]}),_:1}),k.hasFooter?(S(),H(yy,{key:0})):Z("",!0)]))}}),qO=oe(YO,[["__scopeId","data-v-de27a41d"]]),QO={key:0},XO={key:1},ZO=X({__name:"BaseTimer",props:{initStartDate:{},hasAnimation:{type:Boolean,default:!0}},setup(r){const t=r,e=x(null),o=x(),n=x(null),i=x(0),s=x(0),a=x(0),l=x(0),c=x({second:Si.Second,minute:Si.Minute,hour:Si.Hour,day:Si.Day});function u(){t.initStartDate===null?n.value=Date.now():n.value=t.initStartDate}function d(){let h=Math.abs(Date.now()-n.value);i.value=Math.floor(h/c.value.day),h-=i.value*c.value.day,s.value=Math.floor(h/c.value.hour),h-=s.value*c.value.hour,a.value=Math.floor(h/c.value.minute),h-=a.value*c.value.minute,l.value=Math.floor(h/c.value.second)}function p(h){return h.toString().padStart(2,"0")}return Oe(()=>t.initStartDate,()=>{u(),d()}),Ze(()=>{u(),o.value=setInterval(()=>{d()},1e3),d()}),tt(()=>{clearInterval(o.value)}),(h,f)=>(S(),O("span",{ref_key:"containerRef",ref:e,class:"timer-container"},[i.value>0?(S(),O("span",QO,L(i.value),1)):Z("",!0),s.value>0?(S(),O("span",XO,L(p(s.value))+":",1)):Z("",!0),he(L(p(a.value))+":"+L(p(l.value)),1)],512))}}),vl=oe(ZO,[["__scopeId","data-v-f63ec0cf"]]),JO={class:"transfer-call-actions--container"},eP=["title"],tP={class:"transfer-call-button-content"},oP=["title"],nP={class:"transfer-call-button-content"},iP=X({__name:"TransferCallActions",props:{number:{default:""}},emits:["cancel","ask-first"],setup(r,{emit:t}){const e=r,o=Ut("session"),n=t,{refer:i}=Rt(o),s=ot(),{t:a}=ve();function l(){n("cancel")}function c(){if(!e.number)return bh(a("Dial a number to transfer to"));n("ask-first")}function u(){if(!e.number)return bh(a("Dial a number to transfer to"));i(e.number,Za),l(),s.removeSession(s.sessionActive),jo(a("Call is being transferred"))}return(d,p)=>{const h=fn("tippy");return S(),O("div",JO,[Ne((S(),O("button",{class:"transfer-call-button bs-tooltip",title:v(a)("Make an attended (warm) transfer"),"data-toggle":"tooltip","data-placement":"top",onClick:c},[m("span",tP,L(v(a)("Ask first")),1)],8,eP)),[[h,{}]]),Ne((S(),O("button",{class:"transfer-call-button bs-tooltip",title:v(a)("Make a blind (cold) transfer"),"data-toggle":"tooltip","data-placement":"top",onClick:u},[m("span",nP,L(v(a)("Transfer now")),1)],8,oP)),[[h,{}]]),m("button",{class:"ignore-btn",onClick:l},L(v(a)("Cancel")),1)])}}}),rP=oe(iP,[["__scopeId","data-v-bad592f6"]]),sP={class:"transfer-header-container"},aP={class:"transfer-header-title"},lP={class:"transfer-header-name"},cP=X({__name:"TransferCallHeader",setup(r){const{t}=ve(),e=Ut("session"),{remoteName:o,remoteNumber:n}=Rt(e),{title:i}=sa({remoteName:o.value,remoteNumber:n.value});return(s,a)=>(S(),O("div",sP,[m("span",aP,L(v(t)("Transferring")),1),m("span",lP,L(v(i)),1)]))}}),uP=oe(cP,[["__scopeId","data-v-d1feb65d"]]),dP={class:"transfer-call--container"},pP=X({__name:"TransferCall",setup(r){const t=ot(),{number:e,onClickKeyboard:o}=Wr(),n=Ht(),{user:i}=ra();function s(){var c;n.setHasTransfer(!1),a(t.sessionActive.id,{name:((c=i.value(Ti(e.value)))==null?void 0:c.userName)??"",number:e.value,progress:!1})}function a(c,u){const d=t.findIndexSessionById(c);t.sessionsArray[d].transfer=u}function l(){var u;const{sendDTMF:c}=Rt(t.sessionActive);a(t.sessionActive.id,{name:((u=i.value(Ti(e.value)))==null?void 0:u.userName)??"",number:e.value,progress:!0}),c("#0"+Ti(e.value)),t.setIsTransferring(!0),t.setTransfer({from:t.sessionActive,to:e.value})}return(c,u)=>(S(),O(de,null,[R(uP),m("div",dP,[R(sc,{input:v(e),"onUpdate:input":u[0]||(u[0]=d=>Wl(e)?e.value=d:null),"has-transfer":""},null,8,["input"]),R(rc,{onClick:v(o)},null,8,["onClick"]),R(rP,{number:v(e),onCancel:s,onAskFirst:l},null,8,["number"])])],64))}}),hP=oe(pP,[["__scopeId","data-v-7ddbfb22"]]),Kr=r=>(Oo("data-v-f24c7d68"),r=r(),Po(),r),fP=["src","alt"],gP={key:0,width:"96",height:"96",viewBox:"0 0 96 96",fill:"none",xmlns:"http://www.w3.org/2000/svg"},vP=Kr(()=>m("rect",{width:"96",height:"96",rx:"8",fill:"#E7ECF0"},null,-1)),mP=Kr(()=>m("path",{d:"M47.9999 47.9991C50.4919 47.9991 52.928 47.2601 55 45.8756C57.0721 44.4911 58.6871 42.5232 59.6407 40.2209C60.5944 37.9185 60.8439 35.3851 60.3577 32.9409C59.8716 30.4968 58.6715 28.2517 56.9094 26.4895C55.1473 24.7274 52.9022 23.5274 50.458 23.0412C48.0138 22.555 45.4804 22.8045 43.178 23.7582C40.8757 24.7119 38.9078 26.3268 37.5233 28.3989C36.1388 30.471 35.3999 32.907 35.3999 35.3991C35.3999 38.7408 36.7273 41.9457 39.0903 44.3086C41.4533 46.6716 44.6581 47.9991 47.9999 47.9991ZM47.9999 51.5991C40.1901 51.5991 24.5999 56.4231 24.5999 65.9991V73.1991H71.3998V65.9991C71.3998 56.4231 55.8096 51.5991 47.9999 51.5991Z",fill:"#0676C5"},null,-1)),yP=[vP,mP],CP={key:1,width:"36",height:"36",viewBox:"0 0 36 36",fill:"none",xmlns:"http://www.w3.org/2000/svg"},wP=Kr(()=>m("rect",{width:"36",height:"36",rx:"8",fill:"#E2E8F0"},null,-1)),_P=Kr(()=>m("path",{d:"M17.9999 17.9996C18.9344 17.9996 19.8479 17.7225 20.6249 17.2033C21.4019 16.6841 22.0076 15.9462 22.3652 15.0828C22.7228 14.2194 22.8164 13.2694 22.6341 12.3528C22.4517 11.4363 22.0017 10.5943 21.3409 9.93354C20.6801 9.27274 19.8382 8.82273 18.9217 8.64041C18.0051 8.4581 17.0551 8.55167 16.1917 8.90929C15.3283 9.26692 14.5903 9.87253 14.0712 10.6496C13.552 11.4266 13.2749 12.3401 13.2749 13.2746C13.2749 14.5278 13.7727 15.7296 14.6588 16.6157C15.5449 17.5018 16.7467 17.9996 17.9999 17.9996ZM17.9999 19.3496C15.0712 19.3496 9.22485 21.1586 9.22485 24.7496V27.4496H26.7749V24.7496C26.7749 21.1586 20.9285 19.3496 17.9999 19.3496Z",fill:"#0676C5"},null,-1)),SP=[wP,_P],EP={key:2,width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},RP=Kr(()=>m("rect",{width:"24",height:"24",rx:"4",fill:"#E2E8F0"},null,-1)),TP=Kr(()=>m("path",{d:"M12.0001 11.9998C12.6232 11.9998 13.2322 11.815 13.7502 11.4689C14.2682 11.1228 14.672 10.6308 14.9104 10.0552C15.1488 9.47963 15.2112 8.84627 15.0896 8.23523C14.9681 7.62419 14.6681 7.06292 14.2275 6.62238C13.787 6.18185 13.2257 5.88184 12.6147 5.7603C12.0036 5.63875 11.3703 5.70113 10.7947 5.93955C10.2191 6.17796 9.72714 6.58171 9.38102 7.09972C9.03489 7.61774 8.85015 8.22676 8.85015 8.84977C8.85015 9.6852 9.18202 10.4864 9.77276 11.0772C10.3635 11.6679 11.1647 11.9998 12.0001 11.9998ZM12.0001 12.8998C10.0477 12.8998 6.15015 14.1058 6.15015 16.4998V18.2998H17.8501V16.4998C17.8501 14.1058 13.9526 12.8998 12.0001 12.8998Z",fill:"#0676C5"},null,-1)),bP=[RP,TP],AP=X({__name:"DialPadAvatar",props:{userId:{default:void 0},name:{},size:{default:"lg"},hasAnimation:{type:Boolean,default:!0},hasSession:{type:Boolean,default:!0},hasAnimationSpeaking:{type:Boolean}},setup(r){$i(u=>({"06822809":s.value.width,a0184178:s.value.height,"95eeff8a":s.value.borderRadius}));const t=r,e=zi(),o=x(null),n=te(()=>t.userId?{src:e.avatars[Number(t.userId)][80]}:{src:""}),{error:i}=Sw(n),s=te(()=>t.size==="md"?{width:"36px",height:"36px",borderRadius:"8px"}:t.size==="sm"?{width:"24px",height:"24px",borderRadius:"4px"}:{width:"96px",height:"96px",borderRadius:"8px"});function a(u){const d=u;t.hasAnimation&&(d.style.opacity="0",d.style.translate="0 -20px",d.style.display="none")}function l(u,d){if(!t.hasAnimation)return;const p=u;ke.to(p,{ease:"power3.inOut",opacity:1,translateY:0,display:"flex",duration:.7,onComplete:d})}function c(u){if(!t.hasAnimation)return;const d=u;ke.to(d,{ease:"power3.inOut",opacity:0,translateY:-20,display:"none",duration:.7})}return tt(()=>{c(o.value)}),(u,d)=>(S(),H(Lt,{appear:"",css:!1,onBeforeEnter:a,onEnter:l},{default:D(()=>[m("div",{ref_key:"containerRef",ref:o,class:"container__avatar"},[!v(i)&&u.userId?(S(),O("img",{key:0,ref:"imgRef",class:"img__avatar",src:n.value.src,alt:`avatar-${u.name}`},null,8,fP)):(S(),O(de,{key:1},[u.size==="lg"?(S(),O("svg",gP,yP)):u.size==="md"?(S(),O("svg",CP,SP)):u.size==="sm"?(S(),O("svg",EP,bP)):Z("",!0)],64))],512)]),_:1}))}}),ac=oe(AP,[["__scopeId","data-v-f24c7d68"]]),OP={class:"merge-description-contact-container"},PP=["title","innerHTML"],IP=X({__name:"MergeDescriptionContact",setup(r){const t=Ht(),e=te(()=>t.conference.sessions.map(n=>n.name)),o=te(()=>(n=!1)=>{if(n)return e.value.join(", ");const i=0,s=1,a=2;return e.value.length>a?`${e.value[i]}<br>${e.value[s]}, +${e.value.length-a}`:e.value.join("<br> ")});return(n,i)=>(S(),O("div",OP,[m("span",{title:o.value(!0),class:"merge-description-contact-content",innerHTML:o.value()},null,8,PP)]))}}),DP=oe(IP,[["__scopeId","data-v-e51527df"]]),MP={key:0,class:"merge-call-avatar-sum merge-call-avatar-margin"},LP=X({__name:"MergeCallDialpadAvatar",setup(r){const{user:t}=ra(),e=Ht(),o=te(()=>e.conference.sessions),n=te(()=>o.value.length>4?o.value.slice(0,3):o.value.slice(0,4));return(i,s)=>(S(),O("div",{class:Fe(["merge-call-avatar-container",{"merge-call-avatar-gap":o.value.length<=3}])},[(S(!0),O(de,null,qe(n.value,(a,l)=>{var c,u;return S(),H(ac,{key:a.name,class:Fe({"merge-call-avatar-margin":l>0&&o.value.length>3}),"user-id":(c=v(t)(a.number))==null?void 0:c.userId,name:((u=v(t)(a.number))==null?void 0:u.userName)||a.name||a.number},null,8,["class","user-id","name"])}),128)),o.value.length>4?(S(),O("div",MP," +"+L(o.value.length-3),1)):Z("",!0)],2))}}),xP=oe(LP,[["__scopeId","data-v-cdcc680c"]]),FP={class:"in-hold"},NP=X({__name:"IsHold",setup(r){const{t}=ve();return(e,o)=>(S(),O("span",FP,L(v(t)("Hold")),1))}}),wy=oe(NP,[["__scopeId","data-v-885dd95d"]]),GP={class:"in-merging"},kP=X({__name:"IsMerging",setup(r){const{t}=ve();return(e,o)=>(S(),O("span",GP,L(v(t)("Merging")),1))}}),HP=oe(kP,[["__scopeId","data-v-e8cfde90"]]),ml=X({__name:"StatusCall",props:{session:{}},setup(r){const t=r,e=ot(),o=Ht(),n=x(),i=x(),s=x(!1),a=te(()=>String(t.session.remote_identity.uri.user).includes(o.conference.room||o.inConference.room)?!1:o.conference.inProgress);return Ze(()=>{n.value=e.findSessionById(t.session.id),i.value=setInterval(()=>{var l;s.value=((l=n.value)==null?void 0:l.isOnHold().local)??!1},100)}),tt(()=>{clearInterval(i.value)}),(l,c)=>a.value?(S(),H(HP,{key:0})):s.value?(S(),H(wy,{key:1})):Z("",!0)}}),VP={key:2,class:"placeholder calling-dial-pad-placeholder"},BP={key:2,class:"d-flex justify-content-center",style:{gap:"12px"}},UP={key:3,class:"calling-calling"},jP={key:2,class:"calling--dial-pad",style:{"margin-top":"-14px"}},WP={class:"d-flex justify-content-center mt-3",style:{gap:"12px"}},zP=X({__name:"BaseCalling",props:{session:{}},setup(r){const t=Ew({loader:()=>Wg(()=>import("./TransferAskFirst-mRinKCia.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31])),delay:350}),e=r,o=Ht(),n=ot(),{direction:i,remoteNumber:s,startTime:a,onConfirmed:l,remoteName:c}=Rt(e.session),{number:u,onClickKeyboard:d}=Wr(),{t:p}=ve(),{user:h}=ra(),f=x(!1),g=x(new Audio($u("callingtone")));g.value.preload="none";const _=x(!1),C=x(!0),E=te(()=>o.conference.room?e.session.remote_identity.uri.user.includes(o.conference.room):!1);let T;function P(){f.value=!0}function A(){var F;g.value.loop=!0,T=(F=g.value)==null?void 0:F.play()}function b(){T&&T.then(()=>{g.value.pause()})}function I(){f.value=!1}return Ho("hasTransfer",_),Ho("session",e.session),l(()=>{b()}),Oe(a,F=>{F&&(C.value=!1,setTimeout(()=>{C.value=!0},100))}),Ze(async()=>{var F;i.value==="outgoing"&&((F=g.value)!=null&&F.paused)&&!a.value&&A()}),tt(()=>{Zg(),b()}),(F,U)=>{var k,M;return S(),O("div",{class:Fe(["calling--container",{"mt-1":v(o).hasTransfer}])},[v(o).hasTransfer?(S(),O(de,{key:0},[v(n).isTransferring?(S(),H(v(t),{key:1})):(S(),H(hP,{key:0}))],64)):f.value?(S(),O("div",jP,[R(sc,{input:v(u),"onUpdate:input":U[0]||(U[0]=z=>Wl(u)?u.value=z:null),"open-dial-pad":f.value,"in-call":""},null,8,["input","open-dial-pad"]),m("div",WP,[R(vl,{"init-start-date":v(a)},null,8,["init-start-date"]),R(ml,{session:F.session},null,8,["session"])]),R(rc,{class:"mt-3",onClick:v(d)},null,8,["onClick"]),R(yy,{"has-btn-close":"",style:{"margin-top":"40px"},onClose:I})])):(S(),O(de,{key:1},[m("div",{class:"d-flex flex-column align-items-center",style:ue({marginTop:v(n).sessionsArray.length>1?"-22px":0})},[E.value?(S(),H(xP,{key:0})):C.value?(S(),H(ac,{key:1,"user-id":(k=v(h)(v(s)))==null?void 0:k.userId,name:((M=v(h)(v(s)))==null?void 0:M.userName)||v(c)||v(s),"has-animation-speaking":""},null,8,["user-id","name"])):(S(),O("div",VP))],4),E.value?(S(),H(DP,{key:0})):(S(),H(my,{key:1})),v(a)?(S(),O("div",BP,[R(vl,{"init-start-date":v(a)},null,8,["init-start-date"]),R(ml,{session:F.session},null,8,["session"])])):(S(),O("span",UP,L(v(p)("Calling"))+"...",1)),R(qO,{onOpenDialPad:P})],64))],2)}}}),$P=oe(zP,[["__scopeId","data-v-13e4b968"]]),KP=X({__name:"IgnoreCall",setup(r){const{t}=ve();return(e,o)=>(S(),O("button",Ul({class:"ignore-call-button"},e.$attrs),L(v(t)("Ignore")),17))}}),_y=oe(KP,[["__scopeId","data-v-d161a6b1"]]),YP={class:"d-flex justify-content-center gap-4"},qP=X({__name:"IncomingActions",emits:["ignored"],setup(r,{emit:t}){const e=Ut("session"),o=t,{answer:n,ignore:i}=Rt(e),s=x(null);function a(){o("ignored"),i()}function l(d){const p=d;p.style.opacity="0",p.style.translate="0 -20px",p.style.display="none"}function c(d,p){const h=d;ke.to(h,{ease:"power3.inOut",opacity:1,translateY:0,display:"flex",duration:.7,onComplete:p})}function u(d){const p=d;ke.to(p,{ease:"power3.inOut",opacity:0,translateY:-20,display:"none",duration:.7})}return tt(()=>{u(s.value)}),(d,p)=>(S(),H(Lt,{appear:"",css:!1,onBeforeEnter:l,onEnter:c},{default:D(()=>[m("div",{ref_key:"containerRef",ref:s,class:"incoming-actions-container"},[R(_y,{onClick:a}),m("footer",YP,[R(Fp),R(Dp,{onClick:v(n)},null,8,["onClick"])])],512)]),_:1}))}}),QP=oe(qP,[["__scopeId","data-v-ec613f2a"]]),XP={class:"incoming-concurrent-actions--container"},ZP={class:"d-flex justify-content-center align-items-center"},JP=["title"],eI={class:"dual-button-container"},tI={class:"container"},oI={class:"btn rounded-circle concurrent-responsive-button terminate d-flex justify-content-center align-items-center",style:{"background-color":"#dc001e"}},nI={class:"btn rounded-circle concurrent-responsive-button start d-flex justify-content-center",style:{"background-color":"#17ad37"}},iI=["title"],rI={class:"dual-button-container"},sI={class:"container"},aI={class:"btn rounded-circle concurrent-responsive-button hold d-flex justify-content-center align-items-center",style:{"background-color":"#e7ecf0"}},lI={class:"btn rounded-circle responsive-button start d-flex justify-content-center align-items-center",style:{"background-color":"#17ad37"}},cI=X({__name:"IncomingConcurrentActions",emits:["ignored"],setup(r,{emit:t}){const e=Ut("session"),o=t,n=ot(),{t:i}=ve(),{ignore:s}=Rt(e);function a(){const u=n.sessionActive,d=[...n.sessionsArray];for(const p of d)p.id!==u.id?(p.terminate(),n.removeSession(p)):(n.setSessionActive(p),p.answer(Za))}async function l(){const u=n.sessionActive;for(const d of n.sessionsArray)d.id!==u.id?(d.start_time||d.answer(Za),d.hold()):(n.setSessionActive(d),d.answer(Za))}function c(){o("ignored"),s()}return(u,d)=>{const p=fn("tippy");return S(),O("div",XP,[R(_y,{onClick:c}),m("footer",ZP,[Ne((S(),O("button",{class:"d-flex justify-content-center align-items-center dual-button-container left-button me-1 bs-tooltip",title:v(i)("End Call & Accept"),"data-toggle":"tooltip","data-placement":"top",onClick:a},[m("div",eI,[m("div",tI,[m("div",oI,[R(Te,{name:"fa-solid fa-phone",library:"fontawesome",color:v(se).White,style:{transform:"rotate(135deg)"},"font-size":"1em"},null,8,["color"])]),m("div",nI,[R(Te,{name:"fa-solid fa-phone",library:"fontawesome",color:v(se).White,"font-size":"1em"},null,8,["color"])])])])],8,JP)),[[p,{}]]),R(Fp,{style:{"margin-left":"12px"}}),Ne((S(),O("button",{class:"d-flex justify-content-center align-items-center dual-button-container right-button ms-3 bs-tooltip",title:v(i)("Hold Call & Accept"),"data-toggle":"tooltip","data-placement":"top",onClick:l},[m("div",rI,[m("div",sI,[m("div",aI,[R(Te,{name:"fa-solid fa-pause",library:"fontawesome","font-size":"1em",color:v(se).LineIcon},null,8,["color"])]),m("div",lI,[R(Te,{name:"fa-solid fa-phone",library:"fontawesome",color:v(se).White,"font-size":"1em"},null,8,["color"])])])])],8,iI)),[[p,{}]])])])}}}),uI=oe(cI,[["__scopeId","data-v-16217ae3"]]),dI={class:"d-flex flex-column align-items-center"},pI=X({__name:"BaseIncoming",props:{session:{}},setup(r){const t=r,e=ot(),{remoteNumber:o,remoteName:n}=Rt(t.session),{user:i}=ra(),s=e.sessionsArray.length>1?x(new Audio($u("waiting_tone"))):x(new Audio($u("ringtone")));s.value.preload="none";let a;function l(){var u;s.value.loop=!0,a=(u=s.value)==null?void 0:u.play()}function c(){a&&a.then(()=>{s.value.pause()})}return Ze(()=>{l()}),tt(()=>{Zg(),c()}),Ho("session",t.session),(u,d)=>{var p,h;return S(),O("div",{class:Fe(["incoming--container",{"has-concurrent-call":v(e).sessionsArray.length>=2}])},[m("div",dI,[R(ac,{"user-id":(p=v(i)(v(o)))==null?void 0:p.userId,name:((h=v(i)(v(o)))==null?void 0:h.userName)||v(n)||v(o)},null,8,["user-id","name"])]),R(my),v(e).sessionsArray.length===1?(S(),H(QP,{key:0,style:{"padding-bottom":"40px"},onIgnored:c})):(S(),H(uI,{key:1,style:{"padding-bottom":"29px"},onIgnored:c}))],2)}}}),wf=oe(pI,[["__scopeId","data-v-1f542dff"]]),hI=X({__name:"CurrentView",props:{session:{}},setup(r){const t=r,{direction:e,startTime:o,onConfirmed:n}=Rt(t.session),i=zg(wf);function s(){if(e.value==="incoming"&&!o.value)return l();a()}function a(){i.value=$P}function l(){i.value=wf}return n(()=>{a()}),Ze(()=>{s()}),(c,u)=>(S(),H(ti(i.value),{session:c.session},null,8,["session"]))}}),fI={id:"concurrent-calls",class:"panel-body simple-pills tabs"},gI=["onClick"],vI=["id","href","aria-controls","aria-selected"],mI={class:"select-content"},yI={id:"pills-tabContent",class:"tab-content"},CI=["id","aria-labelledby"],Ta=168,wI=2,_I=X({__name:"SelectCallButton",setup(r){const t=ot(),e=Ht(),o=x(),n=x([]),i=x([]),s=Rw("calls:tabs",0);function a(T){var A,b;(A=n.value[T])==null||A.classList.add("show","active");const P=(b=i.value[T])==null?void 0:b.querySelector(".concurrent-tab");P==null||P.classList.add("active")}async function l(){for await(const T of i.value){const P=T.querySelector(".concurrent-tab");P==null||P.classList.remove("active")}for await(const T of n.value)T.classList.remove("show","active")}async function c(T){t.setSessionActive(t.sessionsArray[T]),await l(),a(T)}function u(T,P){var A;s.value+=P,(A=o.value)==null||A.scrollBy(T,0)}async function d(T){const P=t.findIndexSessionById(T.id);await l(),a(P)}const p=te(()=>Tw?{width:"95%"}:{width:"270px"}),h=te(()=>e.conference.sessions.map(T=>T.name)),f=te(()=>h.value.join(", ")),g=te(()=>(T,P,A)=>{const{title:b}=sa({remoteNumber:T,remoteName:P});return A.remote_identity.uri.user.startsWith("3232100")&&e.conference.room?f.value:b.value});Oe(()=>t.sessionActive,T=>{setTimeout(async()=>{if(t.sessionsArray.length>1&&await d(T),t.sessionsArray.length>2){const P=t.findIndexSessionById(T.id);u(Ta*(P+1)-Ta*wI,1)}t.sessionsArray.length===1&&(await l(),a(0))},100)},{immediate:!0,flush:"post"});function _(T){const P=T;P.style.opacity="0",P.style.display="none"}function C(T,P){const A=T;ke.to(A,{duration:.05,opacity:1,display:"block",onComplete:P})}function E(T){ke.to(T,{display:"none",duration:.7,opacity:0})}return Ze(()=>{t.sessionsArray.length>1&&d(t.sessionActive)}),tt(()=>{E("#concurrent-calls"),E(".select-call-button--scroll")}),(T,P)=>(S(),O(de,null,[R(Lt,{appear:"",onBeforeEnter:_,onEnter:C},{default:D(()=>[m("div",fI,[Ne(m("ul",{id:"pills-tab",ref_key:"containerRef",ref:o,class:"nav nav-pills m-3 select-call-button--container overflow-hidden",style:ue([p.value,{flex:"1","flex-wrap":"nowrap","overflow-x":"hidden"}]),role:"tablist"},[(S(!0),O(de,null,qe(v(t).sessionsArray,(A,b)=>(S(),O("li",{ref_for:!0,ref_key:"tabsRef",ref:i,key:A.id,class:"nav-item me-2",onClick:I=>c(b)},[m("a",{id:`pills-tab-${b}`,class:"nav-link concurrent-tab tabs__numbers","data-bs-toggle":"pill",href:`#pills-${b}`,role:"tab","aria-controls":`pills-${b}`,"aria-selected":b===0},[m("span",mI,L(g.value(A==null?void 0:A.remote_identity.uri.user,A.remote_identity.display_name,A)),1),R(ml,{session:A},null,8,["session"])],8,vI)],8,gI))),128))],4),[[Vi,v(t).sessionsArray.length>1&&!v(e).hasTransfer]]),m("div",yI,[(S(!0),O(de,null,qe(v(t).sessionsArray,(A,b)=>(S(),O("div",{id:`pills-${b}`,key:A.id,ref_for:!0,ref_key:"contentsRef",ref:n,class:Fe(["tab-pane fade concurrent-content",{"show active":b===0}]),role:"tabpanel","aria-labelledby":`pills-tab-${b}`},[R(hI,{session:A},null,8,["session"])],10,CI))),128))])])]),_:1}),v(t).sessionsArray.length>2?(S(),O("button",{key:0,class:"select-call-button--scroll button-left",onClick:P[0]||(P[0]=A=>u(-Ta,-1))},[R(Te,{name:"fa-solid fa-chevron-left",library:"fontawesome","font-size":"0.80em"})])):Z("",!0),v(t).sessionsArray.length>2?(S(),O("button",{key:1,class:"select-call-button--scroll button-right",onClick:P[1]||(P[1]=A=>u(Ta,1))},[R(Te,{name:"fa-solid fa-chevron-right",library:"fontawesome","font-size":"0.80em"})])):Z("",!0)],64))}}),SI=oe(_I,[["__scopeId","data-v-76c694df"]]),EI={class:"call--container"},RI={key:0,class:"call--description"},TI=X({__name:"BaseCall",setup(r){const t=ot(),{localNumber:e}=Rt(t.sessionActive),o=Ye(),n=Ht(),i=x(!1);return Oe(()=>t.sessionsArray,s=>{var l;console.log(s,"sessions");const a=t.findIndexSessionById(t.sessionActive.id);a!==-1&&(i.value=((l=s[a].transfer)==null?void 0:l.progress)??!1)},{deep:!0}),(s,a)=>(S(),O("div",EI,[v(n).hasTransfer?Z("",!0):(S(),O("div",RI,[R(Lp),R(Ip,{number:v(e),label:v(o).user.userName},null,8,["number","label"])])),m("div",null,[R(SI)]),R(xp)]))}}),bI=oe(TI,[["__scopeId","data-v-6c8cb189"]]),AI={class:"list-calls-container"},OI=["onMouseover"],PI=["onClick"],II={key:0,width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",class:"me-1"},DI=oa('<rect width="24" height="24" rx="4" fill="#E2E8F0" data-v-0f5b4b32></rect><path d="M9.5625 12.0001C10.4945 12.0001 11.25 11.2446 11.25 10.3126C11.25 9.38064 10.4945 8.62512 9.5625 8.62512C8.63052 8.62512 7.875 9.38064 7.875 10.3126C7.875 11.2446 8.63052 12.0001 9.5625 12.0001Z" fill="#0676C5" data-v-0f5b4b32></path><path d="M11.4844 12.9378C10.8244 12.6026 10.0959 12.469 9.5625 12.469C8.51766 12.469 6.375 13.1098 6.375 14.3909V15.3753H9.89062V14.9986C9.89062 14.5533 10.0781 14.1069 10.4062 13.7347C10.668 13.4375 11.0346 13.1616 11.4844 12.9378Z" fill="#0676C5" data-v-0f5b4b32></path><path d="M13.9687 12.7504C12.7484 12.7504 10.3125 13.5042 10.3125 15.0004V16.1254H17.625V15.0004C17.625 13.5042 15.1891 12.7504 13.9687 12.7504Z" fill="#0676C5" data-v-0f5b4b32></path><path d="M13.9688 12.0001C15.1078 12.0001 16.0312 11.0767 16.0312 9.93758C16.0312 8.79849 15.1078 7.87508 13.9688 7.87508C12.8297 7.87508 11.9062 8.79849 11.9062 9.93758C11.9062 11.0767 12.8297 12.0001 13.9688 12.0001Z" fill="#0676C5" data-v-0f5b4b32></path>',5),MI=[DI],LI=["onClick"],xI=oa('<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-0f5b4b32><rect width="24" height="24" rx="12" fill="#DC001E" data-v-0f5b4b32></rect><g clip-path="url(#clip0_2289_18221)" data-v-0f5b4b32><path d="M7.51682 13.7136C7.6602 13.7179 8.12398 13.6926 8.86388 13.5382C9.60963 13.383 10.1263 13.2368 10.2648 13.1855C10.277 13.181 10.2877 13.1734 10.2958 13.1635C10.3038 13.1536 10.3089 13.1418 10.3104 13.1294C10.3445 12.8659 10.3833 12.4046 10.3853 12.3798C10.3982 12.2196 10.3982 12.2196 10.4961 12.172C10.6685 12.0885 11.2859 11.9075 11.9894 11.9082C12.693 11.909 13.3315 12.089 13.5037 12.1723C13.602 12.2198 13.602 12.2198 13.6146 12.3803C13.6166 12.4051 13.6553 12.8665 13.6892 13.1299C13.6908 13.1423 13.6959 13.1541 13.7039 13.164C13.7119 13.1739 13.7226 13.1815 13.7348 13.186C13.8734 13.2374 14.39 13.3836 15.1358 13.5387C15.8759 13.6926 16.3395 13.7182 16.4828 13.7139C16.496 13.7135 16.5089 13.7097 16.52 13.703C16.5311 13.6962 16.5402 13.6867 16.5461 13.6754C16.7158 13.343 16.8519 12.9959 16.9525 12.6387C17.0482 12.2926 17.1119 11.9391 17.1427 11.5823C17.1437 11.5698 17.1412 11.5573 17.1354 11.5461C17.1296 11.5348 17.1207 11.5254 17.1097 11.5186C16.9523 11.4212 16.2787 11.0309 15.1173 10.7086C13.9321 10.3796 13.2489 10.2837 12.0154 10.2858C10.7819 10.2878 10.0688 10.3787 8.88276 10.7085C7.72138 11.0307 7.04732 11.4212 6.89051 11.5186C6.87949 11.5254 6.8706 11.5349 6.86477 11.5461C6.85893 11.5574 6.85639 11.5699 6.85739 11.5824C6.88821 11.9392 6.9519 12.2926 7.04772 12.6387C7.14836 12.9959 7.28442 13.343 7.45404 13.6754C7.46 13.6866 7.46896 13.696 7.48 13.7027C7.49104 13.7094 7.50375 13.7132 7.51682 13.7136Z" fill="white" data-v-0f5b4b32></path></g><defs data-v-0f5b4b32><clipPath id="clip0_2289_18221" data-v-0f5b4b32><rect width="10.2857" height="10.2857" fill="white" transform="translate(6.85718 6.85715)" data-v-0f5b4b32></rect></clipPath></defs></svg>',1),FI=[xI],NI={class:"d-flex gap-2 justify-content-between",style:{width:"122px"}},_f="3232100",GI=X({__name:"ListCalls",emits:["close-list-call"],setup(r,{emit:t}){const e=t,o=ot(),{user:n}=ra(),i=Ht(),s=x(""),a=te(()=>i.conference.sessions.map(h=>h.name)),l=te(()=>a.value.join(", ")),c=te(()=>h=>{const{remoteName:f,remoteNumber:g,startTime:_,terminate:C}=Rt(h),{title:E}=sa({remoteNumber:g.value,remoteName:f.value});return h.remote_identity.uri.user.startsWith(_f)&&i.conference.room?{remoteName:l.value,remoteNumber:g.value??"",startTime:_.value,terminate:C}:{remoteName:E.value,remoteNumber:g.value??"",startTime:_.value,terminate:C}});function u(h){s.value=h}function d(){s.value=""}function p(h){e("close-list-call"),o.setSessionActive(h),i.keypadIsActive=!0}return(h,f)=>(S(),O("div",AI,[(S(!0),O(de,null,qe(v(o).sessionsArray,g=>{var _,C;return S(),O("div",{key:g.id,class:"list-calls-item",onMouseover:E=>u(g.id),onMouseleave:d},[m("div",{class:"d-flex align-items-center",onClick:E=>p(g)},[g.id!==s.value?(S(),O(de,{key:0},[g.remote_identity.uri.user.startsWith(_f)?(S(),O("svg",II,MI)):(S(),H(ac,{key:1,size:"sm",class:"me-1","user-id":(_=v(n)(c.value(g).remoteNumber))==null?void 0:_.userId,name:((C=v(n)(c.value(g).remoteNumber))==null?void 0:C.userName)||c.value(g).remoteName,"has-animation":!1,"has-session":!1},null,8,["user-id","name"]))],64)):(S(),O("button",{key:1,class:"list-calls-icon me-1",onClick:Bi(c.value(g).terminate,["stop"])},FI,8,LI)),m("div",NI,[m("span",{class:Fe(["list-call-name",{"has-hold":g.isOnHold().local||v(i).conference.inProgress}])},L(c.value(g).remoteName),3),R(ml,{session:g},null,8,["session"])])],8,PI),R(vl,{"init-start-date":c.value(g).startTime,class:"list-calls-timer"},null,8,["init-start-date"])],40,OI)}),128))]))}}),kI=oe(GI,[["__scopeId","data-v-0f5b4b32"]]),HI=r=>(Oo("data-v-459056f4"),r=r(),Po(),r),VI={class:"position-relative"},BI={class:"in-call-icon"},UI=HI(()=>m("div",{class:"in-call-separator"},null,-1)),jI={key:1,class:"in-call-timer"},WI=X({__name:"InCall",emits:["in-call-click"],setup(r,{expose:t,emit:e}){const o=e,n=ot(),{t:i}=ve(),s=new Date,a=x(null),l=x(!1),c=te(()=>a.value?a.value.getBoundingClientRect().top:0),u=te(()=>a.value?a.value.getBoundingClientRect().left:0),d=te(()=>{if(Object.entries(n.sessionActive).length>0){const{startTime:_}=Rt(n.sessionActive);return _.value}return s});function p(){l.value=!l.value}function h(){l.value=!1}Oe(d,_=>console.log(_,"start"));function f(){ke.to(a.value,{width:"100%",duration:.65})}function g(){ke.to(a.value,{width:"37.64%",duration:.65})}return tt(()=>{g()}),Ze(()=>{f()}),t({top:Ah(c),left:Ah(u)}),(_,C)=>(S(),O("div",VI,[R(Lt,null,{default:D(()=>[m("button",{ref_key:"inCallRef",ref:a,class:"in-call-container",onContextmenu:Bi(p,["right","prevent"]),onClick:C[0]||(C[0]=E=>o("in-call-click"))},[m("div",BI,[R(pv)]),UI,v(n).sessionsArray.length===1?(S(),H(vl,{key:0,"init-start-date":d.value,class:"in-call-timer"},null,8,["init-start-date"])):(S(),O("span",jI,L(v(n).sessionsArray.length)+" "+L(v(i)("calls")),1))],544)]),_:1}),l.value&&v(n).sessionsArray.length>1?Ne((S(),H(kI,{key:0,onCloseListCall:h},null,512)),[[v(ia),h]]):Z("",!0)]))}}),zI=oe(WI,[["__scopeId","data-v-459056f4"]]),$I=X({__name:"NewCallActions",setup(r){const{t}=ve(),e=Ht(),o=ot(),n=Ki(),i=Ut("number"),s=x(null);function a(){n.newCall(i==null?void 0:i.value,o.userAgentActive)}function l(){e.setHasNewCall(!1)}function c(p){const h=p;h.style.opacity="0",h.style.translate="0 -20px",h.style.display="none"}function u(p,h){const f=p;ke.to(f,{ease:"power3.inOut",opacity:1,translateY:0,display:"grid",duration:.7,onComplete:h})}function d(p){const h=p;ke.to(h,{ease:"power3.inOut",opacity:0,translateY:-20,display:"none",duration:.7})}return tt(()=>{d(s.value)}),(p,h)=>(S(),H(Lt,{appear:"",css:!1,onBeforeEnter:c,onEnter:u},{default:D(()=>[m("div",{ref_key:"containerRef",ref:s,class:"new-call-actions-container"},[R(Mp),R(Dp,{onClick:a}),m("button",{class:"new-call-actions-cancel",onClick:l},L(v(t)("Cancel")),1)],512)]),_:1}))}}),KI=oe($I,[["__scopeId","data-v-b981a79f"]]),Sy=r=>(Oo("data-v-30533e1e"),r=r(),Po(),r),YI=["onClick"],qI={class:"select-call-button select-new-call"},QI=Sy(()=>m("svg",{width:"5",height:"9",viewBox:"0 0 5 9",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[m("path",{d:"M4.375 0.749999L0.625 4.5L4.375 8.25",stroke:"#212121","stroke-width":"1.25","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),XI=[QI],ZI=Sy(()=>m("svg",{width:"5",height:"9",viewBox:"0 0 5 9",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[m("path",{d:"M0.625 8.25L4.375 4.5L0.625 0.75",stroke:"#212121","stroke-width":"1.25","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),JI=[ZI],Uc=160,eD=X({__name:"SelectCall",setup(r){$i(p=>({"2b4f12ec":i.value.top,"6f916598":i.value.bottom}));const{t}=ve(),e=ot(),o=Ht(),n=x(),i=te(()=>o.phoneSelected.number?{top:"16px",bottom:"10px"}:{top:"43px",bottom:"-16px"}),s=te(()=>o.conference.sessions.map(p=>p.name)),a=te(()=>s.value.join(", ")),l=te(()=>p=>{const{remoteName:h,remoteNumber:f}=Rt(p),{title:g}=sa({remoteNumber:f.value,remoteName:h.value});return{remoteName:p.remote_identity.uri.user.startsWith("3232100")&&o.conference.room?a.value:g.value,remoteNumber:f.value??""}}),c=te(()=>p=>p.isOnHold().local?"82px":"132px");function u(p){var h;(h=n.value)==null||h.scrollBy(p,0)}function d(p){e.sessionsArray.length>1&&e.setSessionActive(p),o.setHasNewCall(!1)}return Ze(()=>{e.sessionsArray.length>1&&u(Uc*(e.sessionsArray.length-1))}),(p,h)=>(S(),O(de,null,[m("div",{ref_key:"containerRef",ref:n,class:"select-call-container"},[(S(!0),O(de,null,qe(v(e).sessionsArray,f=>(S(),O("button",{key:f.id,class:"select-call-button select-calls",onClick:g=>d(f)},[m("span",{class:"select-calls-span",style:ue({maxWidth:c.value(f)})},L(l.value(f).remoteName),5),R(wy,{session:f},null,8,["session"])],8,YI))),128)),m("button",qI,L(v(t)("New Call")),1)],512),v(e).sessionsArray.length>1?(S(),O(de,{key:0},[m("div",{class:"select-new-call-arrow-container select-left",onClick:h[0]||(h[0]=f=>u(-Uc))},XI),m("div",{class:"select-new-call-arrow-container select-right",onClick:h[1]||(h[1]=f=>u(Uc))},JI)],64)):Z("",!0)],64))}}),tD=oe(eD,[["__scopeId","data-v-30533e1e"]]),oD={class:"new-call-container"},nD=X({__name:"BaseNewCall",setup(r){const{number:t,onClickKeyboard:e}=Wr(),o=ot(),n=Ye(),i=o.sessionActive.local_identity.uri.user;function s(a){e(a)}return Ho("number",t),(a,l)=>(S(),O("div",oD,[R(Lp,{class:"new-call-calling-from"}),R(Ip,{number:v(i),label:v(n).user.userName,class:"new-call-number"},null,8,["number","label"]),R(sc,{input:v(t),"onUpdate:input":l[0]||(l[0]=c=>Wl(t)?t.value=c:null)},null,8,["input"]),R(tD),R(rc,{onClick:s}),R(KI),R(xp)]))}}),iD=oe(nD,[["__scopeId","data-v-76631d91"]]),rD={class:"px-4 pb-4"},sD={class:"text-center"},aD=180,lD=287.5,cD=X({__name:"BaseDialpad",setup(r){const t=ot(),{userAgentArray:e,hasSessions:o}=kr(t),{t:n}=ve(),i=Ht(),s=x(null),a=x(null),l=x(null),{width:c,height:u}=bw(),d=te(()=>c.value/2),p=te(()=>u.value/2),{x:h,y:f}=Aw(s,{initialValue:{x:d.value-aD,y:p.value-lD}}),g=te(()=>e.value.length>0);function _(){i.toggleKeypadIsActive()}const C=te(()=>{var b,I,F;return a.value?{top:`${a.value.getBoundingClientRect().top}px`,left:`${(b=a.value)==null?void 0:b.getBoundingClientRect().left}px`}:{top:`${(I=l.value)==null?void 0:I.top}px`,left:`${(F=l.value)==null?void 0:F.left}px`}}),E=te(()=>{if(t.sessionsArray.length===1){const{startTime:b}=Rt(t.sessionActive);return!!b.value}return t.sessionsArray.length>1});function T(b){const I=b;I.style.opacity="0",I.style.top=C.value.top,I.style.left=C.value.left,I.style.width="0",I.style.height="0"}function P(b,I){const F=b;ke.to(F,{ease:"power4.inOut",opacity:1,left:`${h.value}px`,top:`${f.value}px`,width:"",height:"",duration:.8,onComplete:I})}function A(b,I){const F=b;ke.to(F,{ease:"power4.inOut",opacity:0,left:C.value.left,top:C.value.top,delay:.3,duration:.7,width:0,height:0,onComplete:I})}return Ho("position",{x:h,y:f}),Ho("callButtonEl",a),Ho("handleTogglePhone",_),Oe(()=>t.sessionActive,b=>{Object.entries(b).length>0&&(i.keypadIsActive=!0)}),Oe(()=>t.openDialpad.newStatus,()=>{i.keypadIsActive=t.openDialpad.open}),(b,I)=>(S(),O(de,null,[E.value?(S(),H(zI,{key:1,ref_key:"inCallRef",ref:l,onInCallClick:_},null,512)):(S(),O("button",{key:0,ref_key:"callButtonEl",ref:a,class:"button-dial-pad",onClick:_},[R(pv)],512)),R(Lt,{css:!1,onBeforeEnter:T,onEnter:P,onLeave:A},{default:D(()=>[g.value&&v(i).keypadIsActive?(S(),O("div",{key:0,id:"base-dial-pad",ref_key:"dialPadRef",ref:s,style:ue({left:`${v(h)}px`,top:`${v(f)}px`})},[v(o)?v(i).hasNewCall?(S(),H(iD,{key:1})):(S(),H(bI,{key:2})):(S(),H(CA,{key:0}))],4)):Z("",!0)]),_:1}),g.value?Z("",!0):(S(),H(Wt,{key:2,modelValue:v(i).keypadIsActive,"onUpdate:modelValue":I[0]||(I[0]=F=>v(i).keypadIsActive=F),size:"sm","has-btn-close":"","z-index":1050,persist:""},{header:D(()=>[m("h6",null,L(v(n)("No numbers registered")),1)]),body:D(()=>[m("div",rD,[m("span",sD,L(v(n)("You need to have a number registered in order to make a call")),1)])]),_:1},8,["modelValue"]))],64))}}),uD=oe(cD,[["__scopeId","data-v-fd7d5a90"]]),dD={xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},pD=m("path",{d:"M10.6665 14V12.6667C10.6665 11.9594 10.3856 11.2811 9.88546 10.781C9.38536 10.281 8.70708 10 7.99984 10H3.33317C2.62593 10 1.94765 10.281 1.44755 10.781C0.947456 11.2811 0.666504 11.9594 0.666504 12.6667V14",stroke:"#0676C5","stroke-width":"1.33333","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),hD=m("path",{d:"M5.66667 7.33333C7.13943 7.33333 8.33333 6.13943 8.33333 4.66667C8.33333 3.19391 7.13943 2 5.66667 2C4.19391 2 3 3.19391 3 4.66667C3 6.13943 4.19391 7.33333 5.66667 7.33333Z",stroke:"#0676C5","stroke-width":"1.33333","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),fD=m("path",{d:"M15.3335 7.3335H11.3335",stroke:"#0676C5","stroke-width":"1.33333","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),gD=[pD,hD,fD],vD=X({__name:"IUserMinus",props:{size:{default:24}},setup(r){return(t,e)=>(S(),O("svg",dD,gD))}}),mD=r=>(Oo("data-v-e426fbb0"),r=r(),Po(),r),yD={class:"d-flex justify-content-center"},CD={key:0,class:"red-dot"},wD=mD(()=>m("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[m("path",{d:"M4 19V17H6V10C6 8.61667 6.41667 7.3875 7.25 6.3125C8.08333 5.2375 9.16667 4.53333 10.5 4.2V3.5C10.5 3.08333 10.6458 2.72917 10.9375 2.4375C11.2292 2.14583 11.5833 2 12 2C12.4167 2 12.7708 2.14583 13.0625 2.4375C13.3542 2.72917 13.5 3.08333 13.5 3.5V4.2C14.8333 4.53333 15.9167 5.2375 16.75 6.3125C17.5833 7.3875 18 8.61667 18 10V17H20V19H4ZM12 22C11.45 22 10.9792 21.8042 10.5875 21.4125C10.1958 21.0208 10 20.55 10 20H14C14 20.55 13.8042 21.0208 13.4125 21.4125C13.0208 21.8042 12.55 22 12 22ZM8 17H16V10C16 8.9 15.6083 7.95833 14.825 7.175C14.0417 6.39167 13.1 6 12 6C10.9 6 9.95833 6.39167 9.175 7.175C8.39167 7.95833 8 8.9 8 10V17Z",fill:"#212121"})],-1)),_D=X({__name:"BaseNotification",setup(r){const t=x(Notification.permission);async function e(){if(t.value==="default")try{await Notification.requestPermission()}finally{t.value=Notification.permission}}return(o,n)=>(S(),O("div",yD,[m("button",{class:"notification p-1",onClick:e},[t.value==="default"?(S(),O("div",CD)):Z("",!0),wD])]))}}),SD=oe(_D,[["__scopeId","data-v-e426fbb0"]]),ED={},RD={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},TD=m("path",{d:"M3.00229 11.5162C3.00229 11.5183 3.00229 11.5221 3 11.5274C3.00086 11.5239 3.00143 11.5201 3.00229 11.5162ZM13.8525 12C13.7584 11.9979 13.6654 11.9779 13.5783 11.9411L11.9547 11.3484L11.9427 11.3434C11.9073 11.3282 11.8693 11.3206 11.8309 11.321C11.7956 11.3211 11.7605 11.3277 11.7274 11.3405C11.6879 11.3558 11.3325 11.4933 10.9597 11.5987C10.7575 11.6558 10.0538 11.8422 9.48908 11.8422C8.04567 11.8422 6.69604 11.271 5.68925 10.2337C5.19741 9.73036 4.80741 9.13156 4.54183 8.47197C4.27625 7.81238 4.14037 7.10509 4.14204 6.39106C4.14203 6.01901 4.18095 5.64805 4.25813 5.28458C4.50947 4.0886 5.17513 3.00067 6.13245 2.22249C7.11447 1.4293 8.32678 0.998775 9.57487 1C11.0678 1 12.4588 1.58887 13.4922 2.65412C14.469 3.66314 15.0043 4.98986 15 6.38959C14.9991 7.42969 14.6975 8.44598 14.1336 9.30889L14.1281 9.31713L14.107 9.34657C14.1021 9.35335 14.0973 9.35982 14.0927 9.3666L14.0884 9.37454C14.077 9.39446 14.0667 9.41501 14.0575 9.43608L14.5076 11.0831C14.5275 11.1511 14.5383 11.2215 14.5396 11.2925C14.5397 11.3854 14.522 11.4775 14.4875 11.5634C14.453 11.6493 14.4024 11.7273 14.3386 11.793C14.2748 11.8588 14.199 11.9109 14.1156 11.9464C14.0322 11.9819 13.9428 12.0001 13.8525 12Z",fill:"white"},null,-1),bD=m("path",{d:"M9.37095 13.2935C9.33866 13.2307 9.29323 13.1756 9.23775 13.1319C9.18226 13.0882 9.11802 13.057 9.04939 13.0403C8.86876 12.9925 8.65814 13.0007 8.4972 12.9888C6.97762 12.8831 5.54765 12.231 4.47158 11.1528C3.51494 10.2016 2.89321 8.96524 2.70002 7.63003C2.65627 7.32565 2.65627 7.25003 2.65627 7.25003C2.65625 7.14848 2.6253 7.04934 2.56756 6.9658C2.50981 6.88226 2.428 6.81829 2.333 6.7824C2.238 6.7465 2.13433 6.74039 2.03577 6.76486C1.93721 6.78933 1.84844 6.84324 1.78127 6.9194C1.78127 6.9194 1.53502 7.18753 1.41877 7.45659C1.09273 8.2078 0.953687 9.02686 1.01356 9.84358C1.07342 10.6603 1.33042 11.4503 1.76252 12.146C1.84377 12.2813 1.84377 12.3438 1.82564 12.4844C1.74033 12.9253 1.59095 13.7032 1.51314 14.1066C1.48738 14.2374 1.49696 14.3728 1.5409 14.4987C1.58485 14.6246 1.66156 14.7365 1.76314 14.8228L1.77752 14.835C1.91189 14.9418 2.07841 14.9999 2.25002 15C2.34654 15.0001 2.44212 14.9811 2.53127 14.9441L4.20345 14.2988C4.26103 14.2769 4.32463 14.2769 4.3822 14.2988C5.04064 14.5438 5.72595 14.6738 6.37533 14.6738C7.18444 14.6745 7.98375 14.4968 8.71627 14.1532C8.88689 14.0732 9.15377 13.9863 9.31002 13.8057C9.36915 13.7356 9.40644 13.6497 9.41727 13.5587C9.4281 13.4677 9.412 13.3754 9.37095 13.2935Z",fill:"white"},null,-1),AD=[TD,bD];function OD(r,t){return S(),O("svg",RD,AD)}const PD=oe(ED,[["render",OD]]),ID=["disabled"],DD=X({__name:"BaseSms",setup(r){const t=ri(),{smsButtonIsDisabled:e}=Kw();async function o(){await t.push({name:Me.Sms})}return(n,i)=>(S(),O("button",{class:"sms-button",disabled:v(e),onClick:o},[R(PD)],8,ID))}}),MD=oe(DD,[["__scopeId","data-v-e4bbf476"]]),LD={class:"box"},xD={class:"left-content"},FD=["src","alt"],ND={class:"d-flex flex-column gap-3"},GD={class:"d-flex flex-column gap-1"},kD={class:"heading"},HD={class:"content"},VD=X({__name:"GlobalToastMessage",props:{message:{}},setup(r){const t=r,e=Hr(),o=ri(),n=x(100),i=x(),s=x(5),a=x(10),l=x(!0);function c(){i.value=setInterval(()=>{n.value-=100/(s.value*Si.Second/a.value),n.value<=0&&(e.removeToastById(t.message.id),clearInterval(i.value),n.value=0,u())},a.value)}function u(){l.value=!1}function d(){e.removeToastById(t.message.id),clearInterval(i.value),u()}async function p(){await o.push(t.message.url)}return Ze(()=>{c(),new Audio(Jg).play()}),(h,f)=>l.value?(S(),O("div",{key:0,class:"container",role:"alert",onClick:p},[m("div",LD,[m("div",xD,[m("div",null,[h.message.type==="directory"?(S(),O(de,{key:0},[h.message.avatarUrl?(S(),O("img",{key:0,class:"img",src:h.message.avatarUrl,alt:h.message.title},null,8,FD)):(S(),H(an,{key:1,"background-color":"type-directory",radius:"4","container-size":"36"},{default:D(()=>[R(Sr,{size:"16"})]),_:1}))],64)):Z("",!0),h.message.type==="group"?(S(),H(an,{key:1,"background-color":"type-groups",radius:"4","container-size":"36"},{default:D(()=>[R($l,{size:"16"})]),_:1})):Z("",!0)]),m("div",ND,[m("div",GD,[m("h6",kD,L(h.message.title),1),m("span",HD,L(h.message.message),1)])])]),m("button",{class:"button",onClick:d},[R(Te,{name:"x",size:20,color:v(se).TextSecondary},null,8,["color"])])])])):Z("",!0)}}),BD=oe(VD,[["__scopeId","data-v-923435ff"]]),UD={class:"box"},jD={class:"left-content"},WD=["src","alt"],zD={class:"d-flex flex-column gap-3"},$D={class:"d-flex flex-column gap-1"},KD={class:"heading"},YD={class:"content"},qD={class:"d-flex gap-2"},QD=X({__name:"GlobalToastMeeting",props:{meeting:{}},setup(r){$i(f=>({"53fac554":s.value}));const t=r,{t:e}=ve(),o=ev(),n=Gd(),i=Hr(),s=x("5s"),a=x(null),l=x(null);function c(){var f;(f=a.value)==null||f.classList.remove("paused")}function u(){var f;(f=a.value)==null||f.classList.add("paused")}function d(){var f;(f=l.value)==null||f.remove()}async function p(){if(i.removeToastById(t.meeting.id),t.meeting.type==="group")return o.acceptConference(t.meeting.groupConference);if(t.meeting.type==="directory")return n.acceptConference(t.meeting.directoryConference)}function h(){i.removeToastById(t.meeting.id),t.meeting.type==="directory"&&n.declineConference(t.meeting.directoryConference),d()}return Ze(()=>{var g;c(),new Audio(Jg).play(),(g=a.value)==null||g.addEventListener("animationend",()=>{i.removeToastById(t.meeting.id),d()})}),(f,g)=>(S(),O("div",{ref_key:"containerRef",ref:l,class:"container",role:"alert",onMouseover:u,onMouseleave:c},[m("div",UD,[m("div",jD,[f.meeting.type==="directory"?(S(),O(de,{key:0},[f.meeting.avatarUrl?(S(),O("img",{key:0,class:"img",src:f.meeting.avatarUrl,alt:f.meeting.title},null,8,WD)):(S(),H(an,{key:1,"background-color":"type-directory",radius:"4","container-size":"36"},{default:D(()=>[R(Sr,{size:"16"})]),_:1}))],64)):Z("",!0),f.meeting.type==="group"?(S(),H(an,{key:1,"background-color":"type-groups",radius:"4","container-size":"36"},{default:D(()=>[R($l,{size:"16"})]),_:1})):Z("",!0),m("div",zD,[m("div",$D,[m("h6",KD,L(f.meeting.title),1),m("span",YD,L(f.meeting.message),1)]),m("div",qD,[m("button",{class:"primary-btn text-uppercase",onClick:p},L(v(e)("Join")),1),m("button",{class:"secondary-btn text-uppercase",onClick:h},L(v(e)("Decline")),1)])])]),m("button",{class:"button",onClick:h},[R(Te,{name:"x",size:20,color:v(se).TextSecondary},null,8,["color"])])]),m("div",{ref_key:"progressBarEl",ref:a,class:"toast-progress-bar active"},null,512)],544))}}),XD=oe(QD,[["__scopeId","data-v-e594fef5"]]),ZD={class:"box"},JD={class:"left-content"},e3=oa('<div class="img" data-v-eba79b2c><svg width="36" height="36" viewBox="0 0 36 36" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-eba79b2c><rect width="36" height="36" rx="4" fill="#E7ECF0" data-v-eba79b2c></rect><g clip-path="url(#clip0_4206_16193)" data-v-eba79b2c><path d="M24.0937 21.6877C23.5974 21.1877 22.3956 20.4581 21.8124 20.164C21.0531 19.7815 20.9906 19.7502 20.3937 20.1937C19.9956 20.4896 19.7309 20.754 19.2649 20.6546C18.799 20.5552 17.7865 19.9949 16.8999 19.1112C16.0134 18.2274 15.4206 17.1856 15.3209 16.7212C15.2212 16.2568 15.4899 15.9952 15.7831 15.5962C16.1962 15.0337 16.1649 14.9399 15.8118 14.1806C15.5365 13.5899 14.7856 12.3993 14.2837 11.9056C13.7468 11.3752 13.7468 11.469 13.4009 11.6127C13.1192 11.7312 12.849 11.8753 12.5937 12.0431C12.0937 12.3752 11.8162 12.6512 11.6221 13.0659C11.4281 13.4806 11.3409 14.4527 12.3431 16.2734C13.3452 18.094 14.0484 19.0249 15.5037 20.4762C16.959 21.9274 18.0781 22.7077 19.714 23.6252C21.7377 24.7587 22.514 24.5377 22.9299 24.344C23.3459 24.1502 23.6231 23.8752 23.9559 23.3752C24.1241 23.1203 24.2684 22.8504 24.3871 22.569C24.5312 22.2243 24.6249 22.2243 24.0937 21.6877Z" fill="#0676C5" stroke="#0676C5" stroke-width="1.33333" stroke-miterlimit="10" data-v-eba79b2c></path></g><defs data-v-eba79b2c><clipPath id="clip0_4206_16193" data-v-eba79b2c><rect width="16" height="16" fill="white" transform="translate(10 10)" data-v-eba79b2c></rect></clipPath></defs></svg></div>',1),t3={class:"d-flex flex-column gap-3"},o3={class:"d-flex flex-column gap-1"},n3={class:"heading"},i3={class:"content"},r3=X({__name:"GlobalToasTNumber",props:{phone:{}},setup(r){$i(u=>({"16dcf220":o.value}));const t=r,e=Hr(),o=x("5s"),n=x(null),i=x(null);function s(){var u;(u=n.value)==null||u.classList.remove("paused")}function a(){var u;(u=n.value)==null||u.classList.add("paused")}function l(){var u;(u=i.value)==null||u.remove()}function c(){e.removeToastById(t.phone.id),l()}return Ze(()=>{var u;s(),(u=n.value)==null||u.addEventListener("animationend",()=>{e.removeToastById(t.phone.id),l()})}),(u,d)=>(S(),O("div",{ref_key:"containerRef",ref:i,class:"container",role:"alert",onMouseover:a,onMouseleave:s},[m("div",ZD,[m("div",JD,[e3,m("div",t3,[m("div",o3,[m("h6",n3,L(v(Mt)(u.phone.title)),1),m("span",i3,L(u.phone.message),1)])])]),m("button",{class:"button",onClick:c},[R(Te,{name:"x",size:20,color:"#CCCCCC"})])]),m("div",{ref_key:"progressBarEl",ref:n,class:"toast-progress-bar active"},null,512)],544))}}),s3=oe(r3,[["__scopeId","data-v-eba79b2c"]]),a3={class:"global-toast-container"},l3=X({__name:"GlobalToastContainer",setup(r){const t=Hr();return(e,o)=>(S(),O("div",a3,[(S(!0),O(de,null,qe(v(t).toasts,([n,i])=>(S(),O(de,{key:n},[i.variant==="message"?(S(),H(BD,{key:0,message:i},null,8,["message"])):Z("",!0),i.variant==="meeting"?(S(),H(XD,{key:1,meeting:i},null,8,["meeting"])):Z("",!0),i.variant==="phone"?(S(),H(s3,{key:2,phone:i},null,8,["phone"])):Z("",!0)],64))),128))]))}}),c3=oe(l3,[["__scopeId","data-v-c4fe70a5"]]),u3={class:"left-area"},d3={class:"icon-container activity"},p3={class:"right-area"},h3={key:0,class:"unread-badge"},f3=X({__name:"NewActivityItem",setup(r){const{t}=ve(),e=ri(),o=Xg();function n(){e.push({name:Me.Activity})}return(i,s)=>(S(),H(v(Ur),{value:"activity",class:"AccordionItem",onClick:n},{default:D(()=>[R(v(Vr),{class:"AccordionHeader"},{default:D(()=>[R(v(Br),{class:"AccordionTrigger has-hover",as:v(kd),to:"/activity"},{default:D(()=>[m("div",u3,[m("div",d3,[R(Te,{name:"fa-solid fa-list",library:"fontawesome",style:{"font-size":"12px"},color:v(se).White},null,8,["color"])]),R(v(ze),null,{default:D(()=>[he(L(v(t)("Activity")),1)]),_:1})]),m("div",p3,[v(o).countCalls>0?(S(),O("span",h3,L(v(o).countCalls),1)):Z("",!0),R(Te,{name:"chevron-right",class:"m-0",style:ue({stroke:v(se).TextSecondary}),size:16,"aria-hidden":"true"},null,8,["style"])])]),_:1},8,["as"])]),_:1})]),_:1}))}}),g3=oe(f3,[["__scopeId","data-v-1d74028d"]]),v3={},m3={class:"position-absolute",style:{"z-index":"1"}},y3=oa('<div class="typing-sidebar-container" data-v-250257ca><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20" fill="none" data-v-250257ca><ellipse cx="5.2" cy="9.99983" rx="1.2" ry="1.20002" fill="white" data-v-250257ca><animate attributeName="cy" values="10;12;10" dur="1.25s" repeatCount="indefinite" data-v-250257ca></animate><animate attributeName="opacity" values="1;0;1" dur="1.25s" repeatCount="indefinite" data-v-250257ca></animate></ellipse><ellipse cx="9.99981" cy="9.99983" rx="1.2" ry="1.20002" fill="white" data-v-250257ca><animate attributeName="cy" values="10;12;10" dur="1.25s" begin="0.35s" repeatCount="indefinite" data-v-250257ca></animate><animate attributeName="opacity" values="1;0;1" dur="1.25s" begin="0.35s" repeatCount="indefinite" data-v-250257ca></animate></ellipse><ellipse cx="14.7999" cy="9.99983" rx="1.2" ry="1.20002" fill="white" data-v-250257ca><animate attributeName="cy" values="10;12;10" dur="1.25s" begin="0.7s" repeatCount="indefinite" data-v-250257ca></animate><animate attributeName="opacity" values="1;0;1" dur="1.25s" begin="0.7s" repeatCount="indefinite" data-v-250257ca></animate></ellipse></svg></div>',1),C3=[y3];function w3(r,t){return S(),O("div",m3,C3)}const Np=oe(v3,[["render",w3],["__scopeId","data-v-250257ca"]]),_3={class:"left-area"},S3={class:"right-area"},E3={key:0,class:"unread-badge"},R3=["onClick"],T3={class:"avatar-and-display-name"},b3={class:"display-name"},A3={key:2,class:"unread-badge"},O3=X({__name:"NewStarredItem",setup(r){const{t}=ve(),e=Ug(),o=Ye(),n=zi(),i=ta(),{status:s}=kr(ji()),{participants:a}=tv(),{isTyping:l,typingGroup:c}=jd(),u=ov(),d=nv(),p=x([]),h=te(()=>A=>`${n.avatars[A][32]}`);function f(){var A;p.value=[];for(const b of o.favoriteDirectory){const I=((A=s.value[b.userId])==null?void 0:A.status)??"offline";p.value.push({id:b.userId,name:b.userName,type:"directory",status:I,unreadMessages:n.unreadDirectoryMessages[b.userId],routeName:Me.FavoriteDirectory})}for(const b of o.favoriteGroup)p.value.push({id:b.id,name:b.users[0].name,type:"group",participants:a.value(b),unreadMessages:n.unreadGroupMessages[b.id],routeName:Me.FavoriteGroup});for(const b of o.favoriteImportedContacts)p.value.push({id:b.id,name:`${b.firstName} ${b.lastName}`,type:"contact",routeName:Me.FavoriteContact});for(const b of i.unknownFavorite)p.value.push({id:Number(b.number),name:Mt(b.number),type:"phone",routeName:Me.FavoritePhone,unreadMessages:i.unreadUnknownSmsByNumber(b.number)});p.value.sort((b,I)=>b.name.localeCompare(I.name))}const g=te(()=>A=>n==null?void 0:n.unreadDirectoryMessages[A]),_=te(()=>A=>n.unreadGroupMessages[A]),C=te(()=>(A,b)=>b==="group"?$n.value([Me.FavoriteGroup,Me.Group],A)?0:_.value(A):b==="directory"?$n.value([Me.FavoriteDirectory,Me.Group],A)?0:g.value(A):b==="phone"?$n.value([Me.SendSms,Me.FavoritePhone],A)?0:i.unreadUnknownSmsByNumber(A.toString(10)):0),E=te(()=>p.value.reduce((A,b)=>{const I=parseInt(e.params.id,10);return $n.value([Me.FavoriteGroup,Me.Group],I)||$n.value([Me.FavoriteDirectory,Me.Group],I)||$n.value([Me.SendSms,Me.FavoritePhone],I)?A:A+(b.unreadMessages??0)},0));function T(A){switch(A){case"phone":{i.chatIsActiveIsFalsy();break}case"group":case"directory":case"contact":default:i.chatIsActiveIsTruthy()}}const P=te(()=>(A,b)=>{switch(A){case"directory":return l.value(A,b);case"group":return c.value(A,b).length>0;default:return!1}});return Oe([s,()=>o.favoriteDirectory,()=>o.favoriteGroup,()=>n.unreadDirectoryMessages,()=>n.unreadGroupMessages,()=>i.unknownFavorite,()=>i.unreadUnknownSms],()=>{f()},{deep:!0}),Ze(()=>{f()}),(A,b)=>p.value.length>0?(S(),H(v(Ur),{key:0,value:"starred",class:"AccordionItem"},{default:D(()=>[R(v(Vr),{class:"AccordionHeader"},{default:D(()=>[R(v(Br),{class:"AccordionTrigger"},{default:D(()=>[m("div",_3,[R(v(ze),{size:12,color:"text-secondary",weight:600},{default:D(()=>[he(L(v(t)("Starred")),1)]),_:1}),p.value.length>0?(S(),H(v(ze),{key:0,size:12,color:"text-secondary",class:"item-count"},{default:D(()=>[he(L(p.value.length),1)]),_:1})):Z("",!0)]),m("div",S3,[R(Te,{name:"chevron-right",class:"m-0",style:ue({stroke:v(se).TextSecondary}),size:16,"aria-hidden":"true"},null,8,["style"]),E.value>0?(S(),O("span",E3,L(E.value),1)):Z("",!0)])]),_:1})]),_:1}),R(v(na),{class:"AccordionContent",as:"ul"},{default:D(()=>[(S(!0),O(de,null,qe(p.value,I=>(S(),O("li",{key:`starred-${I.type}-${I.id}`,onClick:F=>T(I.type)},[R(v(kd),{to:{name:I.routeName,params:{id:I.id}},class:"sidebar-listed-item"},{default:D(()=>[m("div",T3,[P.value(I.type,I.id)?(S(),H(Np,{key:0})):Z("",!0),I.type==="directory"?(S(),H(js,{key:1,src:h.value(I.id),size:"1.25rem",status:I.status},null,8,["src","status"])):Z("",!0),I.type==="group"?(S(),H(an,{key:2,"background-color":"type-groups",radius:"4","container-size":"20"},{default:D(()=>[R($l,{size:"12"})]),_:1})):Z("",!0),I.type==="contact"?(S(),H(an,{key:3,"background-color":"type-contacts",radius:"4","container-size":"20"},{default:D(()=>[R(Sr,{size:"12"})]),_:1})):Z("",!0),I.type==="phone"?(S(),H(an,{key:4,"background-color":"type-unknown",radius:"4","container-size":"20"},{default:D(()=>[R(Sr,{size:"12"})]),_:1})):Z("",!0),m("span",b3,L(I.participants||I.name),1)]),I.type==="directory"&&v(u).hasCallPresence(I.id.toString())?(S(!0),O(de,{key:0},qe(v(u).callsPresence[I.id.toString()],F=>(S(),O(de,{key:F.callId},[F.state!=="terminated"?(S(),H(uv,{key:0,state:F.state,"local-number":F.localNumber,"remote-number":F.remoteNumber,direction:F.direction,"user-id":I.id.toString()},null,8,["state","local-number","remote-number","direction","user-id"])):Z("",!0)],64))),128)):Z("",!0),I.type==="directory"&&v(d).presenceForVideo[I.id]==="on"?(S(),H(dv,{key:1})):Z("",!0),(C.value(I.id,I.type)??0)>0?(S(),O("span",A3,L(C.value(I.id,I.type)),1)):Z("",!0)]),_:2},1032,["to"])],8,R3))),128))]),_:1})]),_:1})):Z("",!0)}}),P3=oe(O3,[["__scopeId","data-v-2730807d"]]),I3={class:"m-4",style:{width:"280px"}},D3=["placeholder"],M3={key:0,class:"dropdown-group"},L3=["onClick"],x3={style:{width:"30px"}},F3={class:"m-4"},N3={class:"d-flex justify-content-between"},G3=["onClick"],k3={class:"d-flex justify-content-end"},H3=X({__name:"NewOrEditGroup",props:{modalGroup:{type:Boolean}},emits:["update:modalGroup"],setup(r,{emit:t}){const{t:e}=ve(),o=Ye(),n=r,i=t,s=ri(),a=ev(),l=x(n.modalGroup),c=x(-1),u=x([]),d=x([]),p=x([]),h=x(""),f=x(!1),g=x(!1),_=[{headerName:e("User"),field:"name",sorted:!0}];function C(V){c.value=V}function E(){c.value=-1}const T=te(()=>V=>c.value===V);function P(){for(const V of o.directories)u.value.push({id:V.userId,name:V.userName})}function A(V){const q=V.target.value;if(!q)return d.value=[];b(),d.value=u.value.filter($=>$.name.toLowerCase().includes(q.toLowerCase()))}function b(){f.value=!0}function I(){f.value=!1}const F=te(()=>V=>!!p.value.find(q=>q.id===V));function U(V){F.value(V.id)||p.value.push(V)}function k(V){const q=p.value.findIndex($=>$.id===V.id);p.value.splice(q,1)}const M=te(()=>V=>o.user.userId===V);function z(){p.value.length!==0&&(g.value=!0,Ow(p.value).then(V=>{jo(e("Group successfully created.")),g.value=!1,p.value=[],h.value="",i("update:modalGroup",!1);const q=V.group,$=[];for(const ce of q.group_users)$.push({id:ce.user_id,name:o.getNameByUserId(ce.user_id)});o.setGroup({id:q.id,users:$}),s.push({name:Me.Group,params:{id:q.id}}),a.emitNewGroup({id:q.id,users:$})}).catch(V=>{var ce,me;if(g.value=!1,((ce=V.response)==null?void 0:ce.status)===422&&Pn(e(V.response.data.message)),((me=V.response)==null?void 0:me.status)!==409)return;const $=parseInt(V.response.data.message.replace("Already has a group with these users.group_id:",""));p.value=[],i("update:modalGroup",!1),s.push({name:Me.Group,params:{id:$}})}))}return Oe(()=>n.modalGroup,V=>{l.value=V,V&&p.value.length===0&&p.value.push({id:o.user.userId,name:`${o.user.userName} (${e("you")})`})}),Oe(l,V=>i("update:modalGroup",V)),Ze(()=>{P()}),(V,q)=>(S(),H(Wt,{modelValue:l.value,"onUpdate:modelValue":q[1]||(q[1]=$=>l.value=$),"max-width":"640px","min-height":"383px","max-height":"383px",scrollable:""},{header:D(()=>[m("span",{style:ue({color:v(se).TextPrimary})},L(v(e)("Create new group")),5)]),body:D(()=>[Ne((S(),O("div",I3,[m("div",{class:"input-group",onFocusin:b},[R(Te,{name:"search",size:18}),Ne(m("input",{"onUpdate:modelValue":q[0]||(q[0]=$=>h.value=$),class:"form-control border-0",placeholder:v(e)("Search for user"),onInput:A},null,40,D3),[[il,h.value]])],32),d.value.length>0&&f.value?(S(),O("div",M3,[(S(!0),O(de,null,qe(d.value,$=>(S(),O("div",{key:$.id,class:Fe(["d-flex gap-1 px-3 py-1",{disabled:F.value($.id)}]),onClick:ce=>U($)},[m("div",x3,[F.value($.id)?(S(),H(Hd,{key:0,size:"16"})):Z("",!0)]),R(v(ze),{size:14},{default:D(()=>[he(L($.name),1)]),_:2},1024)],10,L3))),128))])):Z("",!0)])),[[v(ia),I]]),m("div",F3,[p.value.length>0?(S(),H(Us,{key:0,columns:_,rows:p.value,onRowHover:C,onRowLeave:E},{"row-name":D(({row:$,index:ce})=>[m("div",N3,[m("span",{class:Fe({"my-user":M.value($.id)})},L($.name),3),T.value(ce)&&!M.value($.id)?(S(),O("span",{key:0,role:"button",onClick:me=>k($)},[R(vD,{size:"16"})],8,G3)):Z("",!0)])]),_:1},8,["rows"])):Z("",!0)])]),footer:D(()=>[m("div",k3,[m("button",{class:"primary-btn text-uppercase",onClick:z},[g.value?(S(),H(Te,{key:0,name:"fa-solid fa-spinner",class:"spin me-1",library:"fontawesome","font-size":"1rem"})):Z("",!0),he(" "+L(v(e)("Create Group")),1)])])]),_:1},8,["modelValue"]))}}),V3=oe(H3,[["__scopeId","data-v-0067cdce"]]),B3={class:"left-area"},U3={class:"right-area"},j3={key:0,class:"unread-badge"},W3={class:"sidebar-listed-item"},z3={class:"add-button-container"},$3={class:"display-name"},K3={class:"avatar-and-display-name"},Y3={class:"display-name"},q3={key:0,class:"unread-badge"},Q3=X({__name:"NewGroupItem",setup(r){const{t}=ve(),e=Ye(),{participants:o}=tv(),n=zi(),{typingGroup:i}=jd(),{unreadMessages:s}=gv(),a=x(!1),l=te(()=>c=>$n.value([Me.FavoriteGroup,Me.Group],c)?0:n.unreadGroupMessages[c]);return(c,u)=>{const d=fn("tippy");return S(),O(de,null,[R(v(Ur),{value:"group",class:"AccordionItem"},{default:D(()=>[R(v(Vr),{class:"AccordionHeader"},{default:D(()=>[R(v(Br),{class:"AccordionTrigger"},{default:D(()=>[m("div",B3,[R(v(ze),{size:12,color:"text-secondary",weight:600},{default:D(()=>[he(L(v(t)("Groups")),1)]),_:1}),v(e).groups.length>0?(S(),H(v(ze),{key:0,size:12,color:"text-secondary",class:"item-count"},{default:D(()=>[he(L(v(e).groups.length),1)]),_:1})):Z("",!0)]),m("div",U3,[Ne((S(),O("button",{type:"button",class:"add-button","data-bs-toggle":"tooltip","data-bs-placement":"top",title:"Add Group",onClick:u[0]||(u[0]=Bi(p=>a.value=!0,["stop"]))},[R(Te,{name:"plus",class:"m-0",size:10,"aria-hidden":"true"})])),[[d,{}]]),R(Te,{name:"chevron-right",class:"m-0",style:ue({stroke:v(se).TextSecondary}),size:16,"aria-hidden":"true"},null,8,["style"]),v(s)(v(n).unreadGroupMessages,[v(Me).Group])>0?(S(),O("span",j3,L(v(s)(v(n).unreadGroupMessages,[v(Me).Group])),1)):Z("",!0)])]),_:1})]),_:1}),R(v(na),{class:"AccordionContent",as:"ul"},{default:D(()=>[v(e).groups.length===0?(S(),O("li",{key:0,onClick:u[1]||(u[1]=p=>a.value=!0)},[m("span",W3,[m("span",z3,[R(Te,{name:"plus",class:"m-0",size:12,"aria-hidden":"true"})]),m("span",$3,L(v(t)("Add Group")),1)])])):Z("",!0),(S(!0),O(de,null,qe(v(e).groups,p=>(S(),O("li",{key:p.id},[R(v(kd),{to:{name:v(Me).Group,params:{id:p.id}},class:"sidebar-listed-item"},{default:D(()=>[m("div",K3,[v(i)(v(Me).Group,p.id).length>0?(S(),H(Np,{key:0})):Z("",!0),R(an,{"background-color":"type-groups",radius:"4","container-size":"20"},{default:D(()=>[R($l,{size:"12"})]),_:1}),m("span",Y3,L(v(o)(p)),1)]),l.value(p.id)>0?(S(),O("span",q3,L(l.value(p.id)),1)):Z("",!0)]),_:2},1032,["to"])]))),128))]),_:1})]),_:1}),R(V3,{"modal-group":a.value,"onUpdate:modalGroup":u[2]||(u[2]=p=>a.value=p)},null,8,["modal-group"])],64)}}}),X3=oe(Q3,[["__scopeId","data-v-fb3b600d"]]),Z3={class:"left-area"},J3={class:"right-area"},eM={key:0},tM={class:"add-button-container"},oM={class:"display-name"},nM={class:"avatar-and-display-name"},iM={class:"display-name"},rM=X({__name:"NewContactItem",setup(r){const{t}=ve(),e=Ye(),o=Ui();async function n(){o.setSettingsActive(3),o.showSettings()}function i(s){return`${s.firstName} ${s.lastName}`}return(s,a)=>{const l=lt("RouterLink"),c=fn("tippy");return S(),H(v(Ur),{value:"contact",class:"AccordionItem"},{default:D(()=>[R(v(Vr),{class:"AccordionHeader"},{default:D(()=>[R(v(Br),{class:"AccordionTrigger"},{default:D(()=>[m("div",Z3,[R(v(ze),{size:12,color:"text-secondary",weight:600},{default:D(()=>[he(L(v(t)("Contacts")),1)]),_:1}),v(e).importedContacts.length>0?(S(),H(v(ze),{key:0,size:12,color:"text-secondary",class:"item-count"},{default:D(()=>[he(L(v(e).importedContacts.length),1)]),_:1})):Z("",!0)]),m("div",J3,[Ne((S(),O("button",{type:"button",class:"add-button","data-bs-toggle":"tooltip","data-bs-placement":"top",title:"Add or Import Contacts",onClick:Bi(n,["stop"])},[R(Te,{name:"plus",class:"m-0",size:10,"aria-hidden":"true"})])),[[c,{}]]),R(Te,{name:"chevron-right",class:"m-0",style:ue({stroke:v(se).TextSecondary}),size:16,"aria-hidden":"true"},null,8,["style"])])]),_:1})]),_:1}),R(v(na),{as:"ul",class:"AccordionContent"},{default:D(()=>[v(e).importedContacts.length===0?(S(),O("li",eM,[m("span",{class:"sidebar-listed-item",onClick:n},[m("span",tM,[R(Te,{name:"plus",class:"m-0",size:12})]),m("span",oM,L(v(t)("Import Contacts")),1)])])):Z("",!0),(S(!0),O(de,null,qe(v(e).importedContacts,u=>(S(),O("li",{key:u.id},[R(l,{to:{name:v(Me).Contact,params:{id:u.id}},class:"sidebar-listed-item"},{default:D(()=>[m("div",nM,[R(an,{"background-color":"type-contacts",radius:"4","container-size":"20"},{default:D(()=>[R(Sr,{size:"12"})]),_:1}),m("span",iM,L(i(u)),1)])]),_:2},1032,["to"])]))),128))]),_:1})]),_:1})}}}),sM=oe(rM,[["__scopeId","data-v-dd641830"]]),aM={class:"left-area"},lM={class:"right-area"},cM={key:0,class:"unread-badge"},uM={class:"avatar-and-display-name"},dM={class:"display-name"},pM={key:2,class:"unread-badge"},hM=X({__name:"NewDirectoryItem",setup(r){const{t}=ve(),e=Ye(),o=ta(),{isTyping:n}=jd(),{status:i}=kr(ji()),s=zi(),a=x([]),{unreadMessages:l}=gv(),c=ov(),u=nv();function d(){o.chatIsActiveIsTruthy()}const p=te(()=>f=>`${s.avatars[f.userId][32]}`);function h(){var f;a.value=[];for(const g of e.directories){const _=((f=i.value[g.userId])==null?void 0:f.status)??"offline";a.value.push({...g,status:_})}a.value.sort((g,_)=>g.userName.localeCompare(_.userName))}return Oe([i,()=>e.directories],()=>{h()},{deep:!0}),Ze(()=>{h()}),(f,g)=>{const _=lt("RouterLink");return S(),H(v(Ur),{value:"directory",class:"AccordionItem"},{default:D(()=>[R(v(Vr),{class:"AccordionHeader"},{default:D(()=>[R(v(Br),{class:"AccordionTrigger"},{default:D(()=>[m("div",aM,[R(v(ze),{size:12,color:"text-secondary",weight:600},{default:D(()=>[he(L(v(t)("Directory")),1)]),_:1}),a.value.length>0?(S(),H(v(ze),{key:0,class:"item-count",size:12,color:"text-secondary"},{default:D(()=>[he(L(a.value.length),1)]),_:1})):Z("",!0)]),m("div",lM,[R(Te,{name:"chevron-right",class:"m-0",style:ue({stroke:v(se).TextSecondary}),size:16,"aria-hidden":"true"},null,8,["style"]),v(l)(v(s).unreadDirectoryMessages,[v(Me).Directory])>0?(S(),O("span",cM,L(v(l)(v(s).unreadDirectoryMessages,[v(Me).Directory])),1)):Z("",!0)])]),_:1})]),_:1}),R(v(na),{as:"ul",class:"AccordionContent"},{default:D(()=>[(S(!0),O(de,null,qe(a.value,C=>(S(),O("li",{key:"item_"+C.userId,onClick:d},[R(_,{to:{name:v(Me).Directory,params:{id:C.userId}},class:"sidebar-listed-item"},{default:D(()=>{var E,T;return[m("div",uM,[v(n)(v(Me).Directory,C.userId)?(S(),H(Np,{key:0})):Z("",!0),R(js,{src:p.value(C),size:"1.25rem",status:C.status},null,8,["src","status"]),m("span",dM,L(C.userName),1)]),v(c).hasCallPresence(C.userId.toString())?(S(!0),O(de,{key:0},qe(v(c).callsPresence[C.userId.toString()],P=>(S(),O(de,{key:P.callId},[P.state!=="terminated"?(S(),H(uv,{key:0,state:P.state,"local-number":P.localNumber,"remote-number":P.remoteNumber,direction:P.direction,"user-id":C.userId.toString()},null,8,["state","local-number","remote-number","direction","user-id"])):Z("",!0)],64))),128)):Z("",!0),v(u).presenceForVideo[C.userId]==="on"?(S(),H(dv,{key:1})):Z("",!0),(((E=v(s))==null?void 0:E.unreadDirectoryMessages[C.userId])??0)>0?(S(),O("span",pM,L((T=v(s))==null?void 0:T.unreadDirectoryMessages[C.userId]),1)):Z("",!0)]}),_:2},1032,["to"])]))),128))]),_:1})]),_:1})}}}),fM=oe(hM,[["__scopeId","data-v-5bdbd1cd"]]),gM={class:"left-area"},vM={class:"right-area"},mM={key:0,class:"unread-badge"},yM=["onClick"],CM={class:"avatar-and-display-name"},wM={class:"display-name"},_M={key:0,class:"unread-badge"},SM=X({__name:"NewUnkownItem",setup(r){const{t}=ve(),e=ta();async function o(n){e.checkSmsUnknownRead(n),await e.getSmsMessages(n)}return(n,i)=>{const s=lt("RouterLink");return v(e).contactUnknownSms.length>0?(S(),H(v(Ur),{key:0,value:"unknown",class:"AccordionItem"},{default:D(()=>[R(v(Vr),{class:"AccordionHeader"},{default:D(()=>[R(v(Br),{class:"AccordionTrigger"},{default:D(()=>[m("div",gM,[R(v(ze),{size:12,color:"text-secondary",weight:600},{default:D(()=>[he(L(v(t)("Unknown")),1)]),_:1}),v(e).contactUnknownSms.length>0?(S(),H(v(ze),{key:0,size:12,color:"text-secondary",class:"item-count"},{default:D(()=>[he(L(v(e).contactUnknownSms.length),1)]),_:1})):Z("",!0)]),m("div",vM,[R(Te,{name:"chevron-right",class:"m-0",style:ue({stroke:v(se).TextSecondary}),size:16,"aria-hidden":"true"},null,8,["style"]),v(e).unreadUnknownSms>0?(S(),O("span",mM,L(v(e).unreadUnknownSms),1)):Z("",!0)])]),_:1})]),_:1}),R(v(na),{as:"ul",class:"AccordionContent"},{default:D(()=>[(S(!0),O(de,null,qe(v(e).contactUnknownSms,a=>(S(),O("li",{key:`sms-${a.number}`,onClick:l=>o(a.number)},[R(s,{to:{name:v(Me).SendSms,params:{id:a.number}},class:"sidebar-listed-item"},{default:D(()=>[m("div",CM,[R(an,{"background-color":"type-unknown",radius:"4","container-size":"20"},{default:D(()=>[R(Sr,{size:"12"})]),_:1}),m("span",wM,L(v(Mt)(a.number)),1)]),a.messagesNotRead>0?(S(),O("span",_M,L(a.messagesNotRead),1)):Z("",!0)]),_:2},1032,["to"])],8,yM))),128))]),_:1})]),_:1})):Z("",!0)}}}),EM=oe(SM,[["__scopeId","data-v-2fcbd490"]]),RM={id:"sidebar",ref:"menu"},TM=X({__name:"NewBaseSidebar",setup(r){const t=["contact","group","directory","unknown","starred"];return(e,o)=>{const n=lt("PerfectScrollbar");return S(),O("nav",RM,[R(n,null,{default:D(()=>[R(v(Yw),{class:"AccordionRoot",type:"multiple","default-value":t},{default:D(()=>[R(g3),R(P3),R(X3),R(sM),R(fM),R(EM)]),_:1})]),_:1})],512)}}}),bM=oe(TM,[["__scopeId","data-v-332ebaa4"]]),AM=X({__name:"BaseCropper",setup(r){const{t}=ve(),e=Gr(),{img:o}=kr(e);function n({coordinates:a,image:l,canvas:c}){e.setResult({coordinates:a,image:l,canvas:c})}function i(){e.setModalCropperIsActive(!1),e.setResult(null),e.setImageType(""),e.setImageSrc("")}function s(){e.setModalCropperIsActive(!1)}return tt(()=>{o.value.src&&URL.revokeObjectURL(o.value.src)}),(a,l)=>(S(),H(Pw,{to:"#settings"},[R(Wt,{modelValue:v(e).modalCropperIsActive,"onUpdate:modelValue":l[0]||(l[0]=c=>v(e).modalCropperIsActive=c),size:"sm",persist:"",center:"",scrollable:"","has-btn-close":!1,"z-index":1056},{body:D(()=>[R(v(Dv),{class:"cropper",src:v(o).src,debounce:!1,"stencil-props":{aspectRatio:1},onChange:n},null,8,["src"])]),footer:D(()=>[m("button",{class:"secondary-btn text-uppercase",onClick:i},L(v(t)("Cancel")),1),m("button",{class:"primary-btn text-uppercase",onClick:s},L(v(t)("Save")),1)]),_:1},8,["modelValue"])]))}}),OM=oe(AM,[["__scopeId","data-v-10b1c793"]]),PM={},IM={tabindex:"-1",type:"button"};function DM(r,t){return S(),O("button",IM,[rt(r.$slots,"default")])}const ks=oe(PM,[["render",DM]]),MM=["id","tabindex","aria-controls","aria-disabled","aria-selected"],LM={key:1,class:"wizard-icon"},xM={key:1,class:"wizard-icon"},FM=X({__name:"WizardStep",props:{tab:{},transition:{},index:{}},setup(r){const t=r,e=te(()=>({backgroundColor:t.tab.color})),o=te(()=>({borderColor:t.tab.color})),n=te(()=>({backgroundColor:t.tab.errorColor,borderColor:t.tab.errorColor})),i=te(()=>({color:t.tab.validationError?t.tab.errorColor:t.tab.color})),s=te(()=>t.tab.shape==="square"),a=te(()=>t.tab.shape==="tab");return(l,c)=>(S(),O("li",{class:Fe({active:t.tab.active})},[m("a",{href:"javascript:void(0)",class:Fe({disabled:!t.tab.checked})},[m("div",{id:`step-${t.tab.tabId}`,class:Fe(["wizard-icon-circle md",{checked:t.tab.checked,square_shape:s.value,tab_shape:a.value}]),role:"tab",tabindex:t.tab.checked?0:"","aria-controls":t.tab.tabId,"aria-disabled":t.tab.active,"aria-selected":t.tab.active,style:ue([t.tab.checked?o.value:{},t.tab.validationError?n.value:{}])},[t.tab.active?(S(),O("div",{key:0,class:Fe(["wizard-icon-container",{square_shape:s.value,tab_shape:a.value}]),style:ue([t.tab.active?e.value:{},t.tab.validationError?n.value:{}])},[rt(l.$slots,"active-step",{},()=>[t.tab.icon?(S(),O("i",{key:0,class:Fe([t.tab.icon,"wizard-icon"])},null,2)):(S(),O("i",LM,L(t.index+1),1))])],6)):rt(l.$slots,"default",{key:1},()=>[t.tab.icon?(S(),O("i",{key:0,class:Fe([t.tab.icon,"wizard-icon"])},null,2)):(S(),O("i",xM,L(t.index+1),1))])],14,MM),rt(l.$slots,"title",{},()=>[m("span",{class:Fe(["stepTitle",{active:t.tab.active,has_error:t.tab.validationError}]),style:ue(t.tab.active?i.value:{})},L(t.tab.title),7)])],2)],2))}});function NM(){var r;return(r=document.activeElement)==null?void 0:r.id}function Sf(r){const t=NM();return r.findIndex(e=>e.tabId===t)}function Ef(r){const t=document.querySelector(`#${r}`);t==null||t.focus()}function GM(r){return r&&Object.prototype.toString.call(r)==="[object Promise]"}const kM=["id"],HM={key:0,class:"wizard-header"},VM={class:"wizard-title"},BM={class:"category"},UM={class:"wizard-navigation"},jM={key:0,class:"wizard-progress-with-circle"},WM={class:"wizard-tab-content"},zM={key:1,class:"wizard-card-footer clearfix"},$M={class:"wizard-footer-left"},KM={class:"wizard-footer-right"},YM=X({__name:"FormWizard",props:{id:{default:""},title:{default:""},subtitle:{default:""},nextButtonText:{default:"Next"},backButtonText:{default:"Back"},finishButtonText:{default:"Finish"},hideButtons:{type:Boolean},validateOnBack:{type:Boolean},shape:{default:"circle"},color:{default:"#0676C5"},errorColor:{default:"#8b0000"},layout:{default:"horizontal"},stepsClasses:{default:""},stepSize:{default:"md"},transition:{default:""},startIndex:{default:0}},emits:["on-change","update:startIndex","on-validate","on-error","on-loading","on-complete","new-tab"],setup(r,{emit:t}){const e=ri(),o=Iw(),n=r,i=t,s=x(n.startIndex),a=x(0),l=x(!1),c=x([]),u=te(()=>c.value.length),d=te(()=>s.value===u.value-1),p=te(()=>n.layout==="vertical"),h=te(()=>s.value>0),f=te(()=>1/(u.value*2)*100),g=te(()=>({backgroundColor:n.color,borderColor:n.color,color:"white"})),_=te(()=>{let Y=0;return s.value>0?Y=f.value*(s.value*2+1):Y=f.value,Y}),C=te(()=>({backgroundColor:n.color,width:`${_.value}%`,color:n.color}));function E(Y,ye){i("on-change",Y,ye),i("update:startIndex",ye)}function T(Y){Y.route&&e.push(Y.route)}function P(){c.value.forEach(Y=>{Y.active=!1})}function A(Y){P();const ye=c.value[Y];ye&&(ye.active=!0,ye.checked=!0,T(ye))}function b(Y){A(Y),Y>a.value&&(a.value=Y),s.value=Y}function I(Y,ye,it=!0){const gn=c.value[Y],ha=c.value[ye];return gn&&(gn.active=!1),ha&&(ha.active=!0),it&&s.value!==ye&&E(Y,ye),s.value=ye,b(s.value),!0}function F(Y){Y.tabId=`${Y.title.replace(/ /g,"")}${Y.index}`,Y.color=n.color,Y.errorColor=n.errorColor,Y.shape=n.shape,c.value[Y.index]=Y,Y.index<s.value+1&&(a.value=Y.index,I(s.value+1,Y.index)),i("new-tab",c.value.length)}function U(Y,ye){i("on-validate",Y,s.value),Y?ye():c.value[s.value].validationError="error"}function k(Y){c.value[s.value].validationError=Y,i("on-error",Y)}function M(Y){l.value=Y,i("on-loading",Y)}function z(Y,ye){k(null),GM(Y)?(M(!0),Y().then(it=>{M(!1),U(it,ye)}).catch(it=>{M(!1),k(it)})):U(!0,ye)}function V(Y,ye){if(l.value)return;const it=c.value[Y];if(it&&it.beforeChange!==void 0){const gn=it.beforeChange;z(gn,ye)}else ye()}function q(Y){if(l.value)return;const ye=c.value[Y];ye&&ye.afterChange!==void 0&&ye.afterChange()}function $(Y){const ye=Y>s.value;if(Y<=a.value){const it=()=>{ye&&Y-s.value>1?(I(s.value,s.value+1),V(s.value,it)):(I(s.value,Y),q(s.value))};ye?V(s.value,it):(k(null),it())}return Y<=a.value}function ce(){const Y=()=>{s.value<u.value-1?(I(s.value,s.value+1),q(s.value)):i("on-complete")};V(s.value,Y)}function me(){const Y=()=>{s.value>0&&(k(null),I(s.value,s.value-1))};n.validateOnBack?V(s.value,Y):Y()}function Ve(){const Y=Sf(c.value);if(Y!==-1&&Y<c.value.length-1){const ye=c.value[Y+1];ye.checked&&Ef(ye.tabId)}}function Qe(){const Y=Sf(c.value);if(Y!==-1&&Y>0){const ye=c.value[Y-1].tabId;Ef(ye)}}function nt(){c.value.length>0&&n.startIndex===0&&A(s.value),n.startIndex<c.value.length?b(n.startIndex):window.console.warn(`Prop startIndex set to ${n.startIndex} is greater than the number of tabs - ${c.value.length}. Make sure that the starting index is less than the number of tabs registered`)}const fe=te(()=>({nextTab:ce,prevTab:me,activeTabIndex:s.value,isLastStep:d.value,fillButtonStyle:g.value,tabsLength:c.value.length}));return Ho("addTab",F),Ho("activeTabIndex",s),Ho("tabs",c),Ze(()=>{nt()}),(Y,ye)=>(S(),O("div",{id:n.id?n.id:"",class:Fe(["vue-form-wizard",[n.stepSize,{vertical:p.value}]]),onKeyup:[Ji(Ve,["right"]),Ji(Qe,["left"])]},[v(o).title?(S(),O("div",HM,[rt(Y.$slots,"title",{},()=>[m("h4",VM,L(n.title),1),m("p",BM,L(n.subtitle),1)])])):Z("",!0),m("div",UM,[p.value?Z("",!0):(S(),O("div",jM,[m("div",{class:"wizard-progress-bar",style:ue(C.value)},null,4)])),m("ul",{class:Fe(["wizard-nav wizard-nav-pills",n.stepsClasses]),role:"tablist"},[(S(!0),O(de,null,qe(c.value,(it,gn)=>rt(Y.$slots,"step",{tab:it,index:gn,navigateToTab:$,transition:n.transition},()=>[R(FM,{tab:it,transition:n.transition,index:gn,onClick:ha=>$(gn),onKeyup:Ji(ha=>$(gn),["enter"])},null,8,["tab","transition","index","onClick","onKeyup"])])),256))],2),m("div",WM,[rt(Y.$slots,"default",ui(di(fe.value)))])]),n.hideButtons?Z("",!0):(S(),O("div",zM,[rt(Y.$slots,"footer",ui(di(fe.value)),()=>[m("div",$M,[h.value?(S(),O("span",{key:0,role:"button",tabindex:"0",onClick:me,onKeyup:Ji(me,["enter"])},[rt(Y.$slots,"prev",ui(di(fe.value)),()=>[R(ks,{style:ue(g.value),disabled:l.value},{default:D(()=>[he(L(n.backButtonText),1)]),_:1},8,["style","disabled"])])],32)):Z("",!0),rt(Y.$slots,"custom-buttons-left",ui(di(fe.value)))]),m("div",KM,[rt(Y.$slots,"custom-buttons-right",ui(di(fe.value))),d.value?(S(),O("span",{key:0,role:"button",tabindex:"0",onClick:ce,onKeyup:Ji(ce,["enter"])},[rt(Y.$slots,"finish",ui(di(fe.value)),()=>[R(ks,{style:ue(g.value)},{default:D(()=>[he(L(n.finishButtonText),1)]),_:1},8,["style"])])],32)):(S(),O("span",{key:1,role:"button",tabindex:"0",onClick:ce,onKeyup:Ji(ce,["enter"])},[rt(Y.$slots,"next",ui(di(fe.value)),()=>[R(ks,{style:ue(g.value),disabled:l.value},{default:D(()=>[he(L(n.nextButtonText),1)]),_:1},8,["style","disabled"])])],32))])])]))],42,kM))}}),qM=["id","aria-hidden","aria-labelledby"],Gp=X({__name:"TabContent",props:{title:{default:""},icon:{default:""},lazy:{type:Boolean},beforeChange:{},afterChange:{},route:{default:""},visible:{type:Boolean,default:!0},index:{}},setup(r){const t=r,e=te(()=>t.index===(a==null?void 0:a.value)),o=x(null),n=x(!1),i=x(""),s=Ut("addTab"),a=Ut("activeTabIndex"),l=Ut("tabs"),c=te(()=>({...t,active:e.value,validationError:o.value,checked:n.value,tabId:i.value})),u=te(()=>l==null?void 0:l.value.find(d=>d.title===t.title));return Oe(()=>t.visible,d=>{d&&!u.value&&s(c.value)}),Ze(()=>{t.visible&&!u.value&&s(c.value)}),(d,p)=>!t.lazy||e.value?Ne((S(),O("div",{key:0,id:i.value,class:"wizard-tab-container",role:"tabpanel","aria-hidden":!e.value,"aria-labelledby":`step-${i.value}`},[rt(d.$slots,"default",{active:e.value})],8,qM)),[[Vi,e.value]]):Z("",!0)}}),QM={class:"d-flex justify-content-center"},XM={class:"d-flex flex-column w-50"},ZM={key:0,class:"invalid-feedback d-block"},JM=X({__name:"SelectAccount",props:{accountSelected:{type:Boolean}},emits:["change"],setup(r,{emit:t}){const e=r,o=t,{t:n}=ve(),i=Wi(),s=x(null);return(a,l)=>{const c=lt("MultiSelect");return v(i).accounts.length>1?(S(),H(Gp,{key:0,title:"Account",icon:"fa-solid fa-list-ul",index:0},{default:D(()=>[m("div",QM,[m("div",XM,[R(Lt,{name:"custom-classes","enter-active-class":"fadeIn","leave-active-class":"fadeOut"},{default:D(()=>[e.accountSelected?(S(),O("div",ZM,L(v(n)("Please select account")),1)):Z("",!0)]),_:1}),R(c,{modelValue:s.value,"onUpdate:modelValue":[l[0]||(l[0]=u=>s.value=u),l[1]||(l[1]=u=>o("change",u))],options:v(i).accounts,searchable:!0,"selected-label":"","select-label":"","deselect-label":"",label:"customer","track-by":"accountCode","max-height":125,placeholder:"Select an account"},null,8,["modelValue","options"])])])]),_:1})):Z("",!0)}}}),e2=X({__name:"CompleteProfile",props:{isSubmitProfile:{type:Boolean},formError:{}},emits:["has-error","submit","change"],setup(r,{emit:t}){const e=Wi(),o=t;function n(a){o("has-error",a)}function i(a){o("submit",a)}const s=te(()=>e.accounts.length>1?1:0);return(a,l)=>(S(),H(Gp,{title:"Profile",icon:"fa-solid fa-address-card",index:s.value},{default:D(()=>[R(Mv,{"form-error":a.formError,"is-submit-profile":a.isSubmitProfile,onHasError:n,onSubmit:i,onChange:l[0]||(l[0]=c=>o("change"))},null,8,["form-error","is-submit-profile"])]),_:1},8,["index"]))}});/**
          * @ag-grid-community/all-modules - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue * @version v31.0.1
          * @link https://www.ag-grid.com/
          * @license MIT
          */function un(r){return r==null||r===""?null:r}function W(r,t){return t===void 0&&(t=!1),r!=null&&(r!==""||t)}function pe(r){return!W(r)}function Jt(r){return r==null||r.length===0}function zs(r){return r!=null&&typeof r.toString=="function"?r.toString():null}function ei(r){if(r!==void 0){if(r===null||r==="")return null;if(typeof r=="number")return isNaN(r)?void 0:r;var t=parseInt(r,10);return isNaN(t)?void 0:t}}function yl(r){if(r!==void 0)return r===null||r===""?!1:typeof r=="boolean"?r:/true/i.test(r)}function t2(r){if(!(r==null||r===""))return r}function gd(r,t){var e=r?JSON.stringify(r):null,o=t?JSON.stringify(t):null;return e===o}function o2(r,t,e){e===void 0&&(e=!1);var o=r==null,n=t==null;if(r&&r.toNumber&&(r=r.toNumber()),t&&t.toNumber&&(t=t.toNumber()),o&&n)return 0;if(o)return-1;if(n)return 1;function i(s,a){return s>a?1:s<a?-1:0}if(typeof r!="string"||!e)return i(r,t);try{return r.localeCompare(t)}catch{return i(r,t)}}function bi(r){if(r instanceof Set||r instanceof Map){var t=[];return r.forEach(function(e){return t.push(e)}),t}return Object.values(r)}var n2=Object.freeze({__proto__:null,makeNull:un,exists:W,missing:pe,missingOrEmpty:Jt,toStringOrNull:zs,attrToNumber:ei,attrToBoolean:yl,attrToString:t2,jsonEquals:gd,defaultComparator:o2,values:bi}),i2=function(){function r(){this.existingKeys={}}return r.prototype.addExistingKeys=function(t){for(var e=0;e<t.length;e++)this.existingKeys[t[e]]=!0},r.prototype.getUniqueKey=function(t,e){t=zs(t);for(var o=0;;){var n=void 0;if(t?(n=t,o!==0&&(n+="_"+o)):e?(n=e,o!==0&&(n+="_"+o)):n=o,!this.existingKeys[n])return this.existingKeys[n]=!0,String(n);o++}},r}(),r2=function(r){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&r[t],o=0;if(e)return e.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&o>=r.length&&(r=void 0),{value:r&&r[o++],done:!r}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},s2=function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var o=e.call(r),n,i=[],s;try{for(;(t===void 0||t-- >0)&&!(n=o.next()).done;)i.push(n.value)}catch(a){s={error:a}}finally{try{n&&!n.done&&(e=o.return)&&e.call(o)}finally{if(s)throw s.error}}return i};function Gt(r,t){var e,o;if(r!=null){if(Array.isArray(r)){for(var n=0;n<r.length;n++)t(n.toString(),r[n]);return}try{for(var i=r2(Object.entries(r)),s=i.next();!s.done;s=i.next()){var a=s2(s.value,2),l=a[0],c=a[1];t(l,c)}}catch(u){e={error:u}}finally{try{s&&!s.done&&(o=i.return)&&o.call(i)}finally{if(e)throw e.error}}}}function kp(r){for(var t={},e=Object.keys(r),o=0;o<e.length;o++){var n=e[o],i=r[n];t[n]=i}return t}function a2(r){return JSON.parse(JSON.stringify(r))}function Cl(r,t){if(r){var e=r,o={};return Object.keys(e).forEach(function(n){if(!(t&&t.indexOf(n)>=0)){var i=e[n],s=wl(i)&&i.constructor===Object;s?o[n]=Cl(i):o[n]=i}}),o}}function Ey(r,t){return r[t]}function Ry(r,t,e){r[t]=e}function l2(r,t){for(var e=[],o=2;o<arguments.length;o++)e[o-2]=arguments[o];e.forEach(function(n){return Ty(r,t,n)})}function Ty(r,t,e,o){var n=Ey(r,e);n!==void 0&&Ry(t,e,o?o(n):n)}function by(r){var t={};return r.filter(function(e){return e!=null}).forEach(function(e){Object.keys(e).forEach(function(o){return t[o]=null})}),Object.keys(t)}function ii(r){if(!r)return[];var t=Object;if(typeof t.values=="function")return t.values(r);var e=[];for(var o in r)r.hasOwnProperty(o)&&r.propertyIsEnumerable(o)&&e.push(r[o]);return e}function ho(r,t,e,o){e===void 0&&(e=!0),o===void 0&&(o=!1),W(t)&&Gt(t,function(n,i){var s=r[n];if(s!==i){if(o){var a=s==null&&i!=null;if(a){var l=typeof i=="object"&&i.constructor===Object,c=l;c&&(s={},r[n]=s)}}wl(i)&&wl(s)&&!Array.isArray(s)?ho(s,i,e,o):(e||i!==void 0)&&(r[n]=i)}})}function c2(r){return pe(r)||Object.keys(r).length===0}function u2(r,t,e){if(r==null)return e;for(var o=t.split("."),n=r;o.length>1;)if(n=n[o.shift()],n==null)return e;var i=n[o[0]];return i??e}function d2(r,t,e){if(r!=null){var o=t.split("."),n=r;o.forEach(function(i,s){n[i]||(n[i]={}),s<o.length-1&&(n=n[i])}),n[o[o.length-1]]=e}}function yr(r,t,e){if(!(!t||!r)){if(!e)return r[t];for(var o=t.split("."),n=r,i=0;i<o.length;i++){if(n==null)return;n=n[o[i]]}return n}}function Ay(r,t,e){t===void 0&&(t=[]),Object.keys(r).forEach(function(s){var a=r[s];typeof a=="object"&&!t.includes(s)&&(r[s]=void 0)});var o=Object.getPrototypeOf(r),n={},i=function(s){return"AG Grid: Grid API function ".concat(s,`() cannot be called as the grid has been destroyed.
    It is recommended to remove local references to the grid api. Alternatively, check gridApi.isDestroyed() to avoid calling methods against a destroyed grid.
    To run logic when the grid is about to be destroyed use the gridPreDestroy event. See: `).concat(e)};Object.getOwnPropertyNames(o).forEach(function(s){var a=o[s];if(typeof a=="function"&&!t.includes(s)){var l=function(){console.warn(i(s))};n[s]={value:l,writable:!0}}}),Object.defineProperties(r,n)}function wl(r){return typeof r=="object"&&r!==null}var p2=Object.freeze({__proto__:null,iterateObject:Gt,cloneObject:kp,deepCloneObject:a2,deepCloneDefinition:Cl,getProperty:Ey,setProperty:Ry,copyPropertiesIfPresent:l2,copyPropertyIfPresent:Ty,getAllKeysInObjects:by,getAllValuesInObject:ii,mergeDeep:ho,missingOrEmptyObject:c2,get:u2,set:d2,getValueUsingField:yr,removeAllReferences:Ay,isNonNullObject:wl}),Rf={};function Dr(r,t){Rf[t]||(r(),Rf[t]=!0)}function Ee(r){Dr(function(){return console.warn("AG Grid: "+r)},r)}function sn(r){Dr(function(){return console.error("AG Grid: "+r)},r)}function lc(r){if(r.name)return r.name;var t=/function\s+([^\(]+)/.exec(r.toString());return t&&t.length===2?t[1].trim():null}function cc(r){return!!(r&&r.constructor&&r.call&&r.apply)}function Oy(r){Py(r,400)}var jc=[],Wc=!1;function vd(r){jc.push(r),!Wc&&(Wc=!0,window.setTimeout(function(){var t=jc.slice();jc.length=0,Wc=!1,t.forEach(function(e){return e()})},0))}function Py(r,t){t===void 0&&(t=0),r.length>0&&window.setTimeout(function(){return r.forEach(function(e){return e()})},t)}function Eo(r,t){var e;return function(){for(var o=[],n=0;n<arguments.length;n++)o[n]=arguments[n];var i=this;window.clearTimeout(e),e=window.setTimeout(function(){r.apply(i,o)},t)}}function md(r,t){var e=0;return function(){for(var o=[],n=0;n<arguments.length;n++)o[n]=arguments[n];var i=this,s=new Date().getTime();s-e<t||(e=s,r.apply(i,o))}}function Hp(r,t,e,o){e===void 0&&(e=100);var n=new Date().getTime(),i=null,s=!1,a=function(){var l=new Date().getTime()-n>e;(r()||l)&&(t(),s=!0,i!=null&&(window.clearInterval(i),i=null),l&&o&&console.warn(o))};a(),s||(i=window.setInterval(a,10))}function h2(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];return function(e){return r.reduce(function(o,n){return n(o)},e)}}function Iy(r){r&&r()}var f2=function(){},g2=Object.freeze({__proto__:null,doOnce:Dr,warnOnce:Ee,errorOnce:sn,getFunctionName:lc,isFunction:cc,executeInAWhile:Oy,executeNextVMTurn:vd,executeAfter:Py,debounce:Eo,throttle:md,waitUntil:Hp,compose:h2,callIfPresent:Iy,noop:f2}),ie;(function(r){r.CommunityCoreModule="@ag-grid-community/core",r.InfiniteRowModelModule="@ag-grid-community/infinite-row-model",r.ClientSideRowModelModule="@ag-grid-community/client-side-row-model",r.CsvExportModule="@ag-grid-community/csv-export",r.EnterpriseCoreModule="@ag-grid-enterprise/core",r.RowGroupingModule="@ag-grid-enterprise/row-grouping",r.ColumnsToolPanelModule="@ag-grid-enterprise/column-tool-panel",r.FiltersToolPanelModule="@ag-grid-enterprise/filter-tool-panel",r.MenuModule="@ag-grid-enterprise/menu",r.SetFilterModule="@ag-grid-enterprise/set-filter",r.MultiFilterModule="@ag-grid-enterprise/multi-filter",r.StatusBarModule="@ag-grid-enterprise/status-bar",r.SideBarModule="@ag-grid-enterprise/side-bar",r.RangeSelectionModule="@ag-grid-enterprise/range-selection",r.MasterDetailModule="@ag-grid-enterprise/master-detail",r.RichSelectModule="@ag-grid-enterprise/rich-select",r.GridChartsModule="@ag-grid-enterprise/charts",r.ViewportRowModelModule="@ag-grid-enterprise/viewport-row-model",r.ServerSideRowModelModule="@ag-grid-enterprise/server-side-row-model",r.ExcelExportModule="@ag-grid-enterprise/excel-export",r.ClipboardModule="@ag-grid-enterprise/clipboard",r.SparklinesModule="@ag-grid-enterprise/sparklines",r.AdvancedFilterModule="@ag-grid-enterprise/advanced-filter",r.AngularModule="@ag-grid-community/angular",r.ReactModule="@ag-grid-community/react",r.VueModule="@ag-grid-community/vue"})(ie||(ie={}));var Qr=function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var o=e.call(r),n,i=[],s;try{for(;(t===void 0||t-- >0)&&!(n=o.next()).done;)i.push(n.value)}catch(a){s={error:a}}finally{try{n&&!n.done&&(e=o.return)&&e.call(o)}finally{if(s)throw s.error}}return i},Tf=function(r,t,e){if(e||arguments.length===2)for(var o=0,n=t.length,i;o<n;o++)(i||!(o in t))&&(i||(i=Array.prototype.slice.call(t,0,o)),i[o]=t[o]);return r.concat(i||Array.prototype.slice.call(t))},Se=function(){function r(){}return r.register=function(t){r.__register(t,!0,void 0)},r.registerModules=function(t){r.__registerModules(t,!0,void 0)},r.__register=function(t,e,o){r.runVersionChecks(t),o!==void 0?(r.areGridScopedModules=!0,r.gridModulesMap[o]===void 0&&(r.gridModulesMap[o]={}),r.gridModulesMap[o][t.moduleName]=t):r.globalModulesMap[t.moduleName]=t,r.setModuleBased(e)},r.__unRegisterGridModules=function(t){delete r.gridModulesMap[t]},r.__registerModules=function(t,e,o){r.setModuleBased(e),t&&t.forEach(function(n){return r.__register(n,e,o)})},r.isValidModuleVersion=function(t){var e=Qr(t.version.split(".")||[],2),o=e[0],n=e[1],i=Qr(r.currentModuleVersion.split(".")||[],2),s=i[0],a=i[1];return o===s&&n===a},r.runVersionChecks=function(t){if(r.currentModuleVersion||(r.currentModuleVersion=t.version),t.version?r.isValidModuleVersion(t)||console.error("AG Grid: You are using incompatible versions of AG Grid modules. Major and minor versions should always match across modules. '".concat(t.moduleName,"' is version ").concat(t.version," but the other modules are version ").concat(this.currentModuleVersion,". Please update all modules to the same version.")):console.error("AG Grid: You are using incompatible versions of AG Grid modules. Major and minor versions should always match across modules. '".concat(t.moduleName,"' is incompatible. Please update all modules to the same version.")),t.validate){var e=t.validate();if(!e.isValid){var o=e;console.error("AG Grid: ".concat(o.message))}}},r.setModuleBased=function(t){r.moduleBased===void 0?r.moduleBased=t:r.moduleBased!==t&&Dr(function(){console.warn("AG Grid: You are mixing modules (i.e. @ag-grid-community/core) and packages (ag-grid-community) - you can only use one or the other of these mechanisms."),console.warn("Please see https://www.ag-grid.com/javascript-grid/packages-modules/ for more information.")},"ModulePackageCheck")},r.__setIsBundled=function(){r.isBundled=!0},r.__assertRegistered=function(t,e,o){var n;if(this.__isRegistered(t,o))return!0;var i=e+t,s;if(r.isBundled)s="AG Grid: unable to use ".concat(e,` as 'ag-grid-enterprise' has not been loaded. Check you are using the Enterprise bundle:
        
        <script src="https://cdn.jsdelivr.net/npm/ag-grid-enterprise@AG_GRID_VERSION/dist/ag-grid-enterprise.min.js"><\/script>
        
For more info see: https://ag-grid.com/javascript-data-grid/getting-started/#getting-started-with-ag-grid-enterprise`);else if(r.moduleBased||r.moduleBased===void 0){var a=(n=Object.entries(ie).find(function(l){var c=Qr(l,2);c[0];var u=c[1];return u===t}))===null||n===void 0?void 0:n[0];s="AG Grid: unable to use ".concat(e," as the ").concat(a," is not registered").concat(r.areGridScopedModules?" for gridId: ".concat(o):"",`. Check if you have registered the module:
           
    import { ModuleRegistry } from '@ag-grid-community/core';
    import { `).concat(a," } from '").concat(t,`';
    
    ModuleRegistry.registerModules([ `).concat(a,` ]);

For more info see: https://www.ag-grid.com/javascript-grid/modules/`)}else s="AG Grid: unable to use ".concat(e,` as package 'ag-grid-enterprise' has not been imported. Check that you have imported the package:
            
    import 'ag-grid-enterprise';
            
For more info see: https://www.ag-grid.com/javascript-grid/packages/`);return Dr(function(){console.warn(s)},i),!1},r.__isRegistered=function(t,e){var o;return!!r.globalModulesMap[t]||!!(!((o=r.gridModulesMap[e])===null||o===void 0)&&o[t])},r.__getRegisteredModules=function(t){return Tf(Tf([],Qr(bi(r.globalModulesMap)),!1),Qr(bi(r.gridModulesMap[t]||{})),!1)},r.__getGridRegisteredModules=function(t){var e;return bi((e=r.gridModulesMap[t])!==null&&e!==void 0?e:{})||[]},r.__isPackageBased=function(){return!r.moduleBased},r.globalModulesMap={},r.gridModulesMap={},r.areGridScopedModules=!1,r}(),v2=function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var o=e.call(r),n,i=[],s;try{for(;(t===void 0||t-- >0)&&!(n=o.next()).done;)i.push(n.value)}catch(a){s={error:a}}finally{try{n&&!n.done&&(e=o.return)&&e.call(o)}finally{if(s)throw s.error}}return i},m2=function(r,t,e){if(e||arguments.length===2)for(var o=0,n=t.length,i;o<n;o++)(i||!(o in t))&&(i||(i=Array.prototype.slice.call(t,0,o)),i[o]=t[o]);return r.concat(i||Array.prototype.slice.call(t))},y2=function(){function r(t,e){if(this.beanWrappers={},this.destroyed=!1,!(!t||!t.beanClasses)){this.contextParams=t,this.logger=e,this.logger.log(">> creating ag-Application Context"),this.createBeans();var o=this.getBeanInstances();this.wireBeans(o),this.logger.log(">> ag-Application Context ready - component is alive")}}return r.prototype.getBeanInstances=function(){return bi(this.beanWrappers).map(function(t){return t.beanInstance})},r.prototype.createBean=function(t,e){if(!t)throw Error("Can't wire to bean since it is null");return this.wireBeans([t],e),t},r.prototype.wireBeans=function(t,e){this.autoWireBeans(t),this.methodWireBeans(t),this.callLifeCycleMethods(t,"preConstructMethods"),W(e)&&t.forEach(e),this.callLifeCycleMethods(t,"postConstructMethods")},r.prototype.createBeans=function(){var t=this;this.contextParams.beanClasses.forEach(this.createBeanWrapper.bind(this)),Gt(this.beanWrappers,function(o,n){var i;n.bean.__agBeanMetaData&&n.bean.__agBeanMetaData.autowireMethods&&n.bean.__agBeanMetaData.autowireMethods.agConstructor&&(i=n.bean.__agBeanMetaData.autowireMethods.agConstructor);var s=t.getBeansForParameters(i,n.bean.name),a=new(n.bean.bind.apply(n.bean,m2([null],v2(s),!1)));n.beanInstance=a});var e=Object.keys(this.beanWrappers).join(", ");this.logger.log("created beans: ".concat(e))},r.prototype.createBeanWrapper=function(t){var e=t.__agBeanMetaData;if(!e){var o=void 0;t.prototype.constructor?o=lc(t.prototype.constructor):o=""+t,console.error("Context item ".concat(o," is not a bean"));return}var n={bean:t,beanInstance:null,beanName:e.beanName};this.beanWrappers[e.beanName]=n},r.prototype.autoWireBeans=function(t){var e=this;t.forEach(function(o){e.forEachMetaDataInHierarchy(o,function(n,i){var s=n.agClassAttributes;s&&s.forEach(function(a){var l=e.lookupBeanInstance(i,a.beanName,a.optional);o[a.attributeName]=l})})})},r.prototype.methodWireBeans=function(t){var e=this;t.forEach(function(o){e.forEachMetaDataInHierarchy(o,function(n,i){Gt(n.autowireMethods,function(s,a){if(s!=="agConstructor"){var l=e.getBeansForParameters(a,i);o[s].apply(o,l)}})})})},r.prototype.forEachMetaDataInHierarchy=function(t,e){for(var o=Object.getPrototypeOf(t);o!=null;){var n=o.constructor;if(n.hasOwnProperty("__agBeanMetaData")){var i=n.__agBeanMetaData,s=this.getBeanName(n);e(i,s)}o=Object.getPrototypeOf(o)}},r.prototype.getBeanName=function(t){if(t.__agBeanMetaData&&t.__agBeanMetaData.beanName)return t.__agBeanMetaData.beanName;var e=t.toString(),o=e.substring(9,e.indexOf("("));return o},r.prototype.getBeansForParameters=function(t,e){var o=this,n=[];return t&&Gt(t,function(i,s){var a=o.lookupBeanInstance(e,s);n[Number(i)]=a}),n},r.prototype.lookupBeanInstance=function(t,e,o){if(o===void 0&&(o=!1),this.destroyed)return this.logger.log("AG Grid: bean reference ".concat(e," is used after the grid is destroyed!")),null;if(e==="context")return this;if(this.contextParams.providedBeanInstances&&this.contextParams.providedBeanInstances.hasOwnProperty(e))return this.contextParams.providedBeanInstances[e];var n=this.beanWrappers[e];return n?n.beanInstance:(o||console.error("AG Grid: unable to find bean reference ".concat(e," while initialising ").concat(t)),null)},r.prototype.callLifeCycleMethods=function(t,e){var o=this;t.forEach(function(n){return o.callLifeCycleMethodsOnBean(n,e)})},r.prototype.callLifeCycleMethodsOnBean=function(t,e,o){var n={};this.forEachMetaDataInHierarchy(t,function(s){var a=s[e];a&&a.forEach(function(l){l!=o&&(n[l]=!0)})});var i=Object.keys(n);i.forEach(function(s){return t[s]()})},r.prototype.getBean=function(t){return this.lookupBeanInstance("getBean",t,!0)},r.prototype.destroy=function(){if(!this.destroyed){this.destroyed=!0,this.logger.log(">> Shutting down ag-Application Context");var t=this.getBeanInstances();this.destroyBeans(t),this.contextParams.providedBeanInstances=null,Se.__unRegisterGridModules(this.contextParams.gridId),this.logger.log(">> ag-Application Context shut down - component is dead")}},r.prototype.destroyBean=function(t){t&&this.destroyBeans([t])},r.prototype.destroyBeans=function(t){var e=this;return t?(t.forEach(function(o){e.callLifeCycleMethodsOnBean(o,"preDestroyMethods","destroy");var n=o;typeof n.destroy=="function"&&n.destroy()}),[]):[]},r.prototype.isDestroyed=function(){return this.destroyed},r.prototype.getGridId=function(){return this.contextParams.gridId},r}();function bf(r,t,e){var o=ki(r.constructor);o.preConstructMethods||(o.preConstructMethods=[]),o.preConstructMethods.push(t)}function Q(r,t,e){var o=ki(r.constructor);o.postConstructMethods||(o.postConstructMethods=[]),o.postConstructMethods.push(t)}function zt(r,t,e){var o=ki(r.constructor);o.preDestroyMethods||(o.preDestroyMethods=[]),o.preDestroyMethods.push(t)}function ne(r){return function(t){var e=ki(t);e.beanName=r}}function y(r){return function(t,e,o){Dy(t,r,!1,t,e,null)}}function Le(r){return function(t,e,o){Dy(t,r,!0,t,e,null)}}function Dy(r,t,e,o,n,i){if(t===null){console.error("AG Grid: Autowired name should not be null");return}if(typeof i=="number"){console.error("AG Grid: Autowired should be on an attribute");return}var s=ki(r.constructor);s.agClassAttributes||(s.agClassAttributes=[]),s.agClassAttributes.push({attributeName:n,beanName:t,optional:e})}function eo(r){return function(t,e,o){var n=typeof t=="function"?t:t.constructor,i;if(typeof o=="number"){var s=void 0;e?(i=ki(n),s=e):(i=ki(n),s="agConstructor"),i.autowireMethods||(i.autowireMethods={}),i.autowireMethods[s]||(i.autowireMethods[s]={}),i.autowireMethods[s][o]=r}}}function ki(r){return r.hasOwnProperty("__agBeanMetaData")||(r.__agBeanMetaData={}),r.__agBeanMetaData}var Af=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},Xr=function(r,t){return function(e,o){t(e,o,r)}},si=function(){function r(){this.allSyncListeners=new Map,this.allAsyncListeners=new Map,this.globalSyncListeners=new Set,this.globalAsyncListeners=new Set,this.asyncFunctionsQueue=[],this.scheduled=!1,this.firedEvents={}}return r.prototype.setBeans=function(t,e,o,n,i){if(n===void 0&&(n=null),i===void 0&&(i=null),this.frameworkOverrides=o,this.gridOptionsService=e,n){var s=e.useAsyncEvents();this.addGlobalListener(n,s)}i&&this.addGlobalListener(i,!1)},r.prototype.getListeners=function(t,e,o){var n=e?this.allAsyncListeners:this.allSyncListeners,i=n.get(t);return!i&&o&&(i=new Set,n.set(t,i)),i},r.prototype.noRegisteredListenersExist=function(){return this.allSyncListeners.size===0&&this.allAsyncListeners.size===0&&this.globalSyncListeners.size===0&&this.globalAsyncListeners.size===0},r.prototype.addEventListener=function(t,e,o){o===void 0&&(o=!1),this.getListeners(t,o,!0).add(e)},r.prototype.removeEventListener=function(t,e,o){o===void 0&&(o=!1);var n=this.getListeners(t,o,!1);if(n&&(n.delete(e),n.size===0)){var i=o?this.allAsyncListeners:this.allSyncListeners;i.delete(t)}},r.prototype.addGlobalListener=function(t,e){e===void 0&&(e=!1),(e?this.globalAsyncListeners:this.globalSyncListeners).add(t)},r.prototype.removeGlobalListener=function(t,e){e===void 0&&(e=!1),(e?this.globalAsyncListeners:this.globalSyncListeners).delete(t)},r.prototype.dispatchEvent=function(t){var e=t;if(this.gridOptionsService){var o=this.gridOptionsService,n=o.api,i=o.columnApi,s=o.context;e.api=n,e.columnApi=i,e.context=s}this.dispatchToListeners(e,!0),this.dispatchToListeners(e,!1),this.firedEvents[e.type]=!0},r.prototype.dispatchEventOnce=function(t){this.firedEvents[t.type]||this.dispatchEvent(t)},r.prototype.dispatchToListeners=function(t,e){var o=this,n,i=t.type;if(e&&"event"in t){var s=t.event;s instanceof Event&&(t.eventPath=s.composedPath())}var a=function(d,p){return d.forEach(function(h){p.has(h)&&(e?o.dispatchAsync(function(){return h(t)}):h(t))})},l=(n=this.getListeners(i,e,!1))!==null&&n!==void 0?n:new Set,c=new Set(l);c.size>0&&a(c,l);var u=new Set(e?this.globalAsyncListeners:this.globalSyncListeners);u.forEach(function(d){e?o.dispatchAsync(function(){return o.frameworkOverrides.dispatchEvent(i,function(){return d(i,t)},!0)}):o.frameworkOverrides.dispatchEvent(i,function(){return d(i,t)},!0)})},r.prototype.dispatchAsync=function(t){this.asyncFunctionsQueue.push(t),this.scheduled||(window.setTimeout(this.flushAsyncQueue.bind(this),0),this.scheduled=!0)},r.prototype.flushAsyncQueue=function(){this.scheduled=!1;var t=this.asyncFunctionsQueue.slice();this.asyncFunctionsQueue=[],t.forEach(function(e){return e()})},Af([Xr(0,eo("loggerFactory")),Xr(1,eo("gridOptionsService")),Xr(2,eo("frameworkOverrides")),Xr(3,eo("globalEventListener")),Xr(4,eo("globalSyncEventListener"))],r.prototype,"setBeans",null),r=Af([ne("eventService")],r),r}(),ba=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},C2={resizable:!0,sortable:!0},w2=0;function My(){return w2++}var We=function(){function r(t,e,o,n){this.instanceId=My(),this.autoHeaderHeight=null,this.moving=!1,this.menuVisible=!1,this.lastLeftPinned=!1,this.firstRightPinned=!1,this.filterActive=!1,this.eventService=new si,this.tooltipEnabled=!1,this.rowGroupActive=!1,this.pivotActive=!1,this.aggregationActive=!1,this.colDef=t,this.userProvidedColDef=e,this.colId=o,this.primary=n,this.setState(t)}return r.prototype.getInstanceId=function(){return this.instanceId},r.prototype.setState=function(t){t.sort!==void 0?(t.sort==="asc"||t.sort==="desc")&&(this.sort=t.sort):(t.initialSort==="asc"||t.initialSort==="desc")&&(this.sort=t.initialSort);var e=t.sortIndex,o=t.initialSortIndex;e!==void 0?e!==null&&(this.sortIndex=e):o!==null&&(this.sortIndex=o);var n=t.hide,i=t.initialHide;n!==void 0?this.visible=!n:this.visible=!i,t.pinned!==void 0?this.setPinned(t.pinned):this.setPinned(t.initialPinned);var s=t.flex,a=t.initialFlex;s!==void 0?this.flex=s:a!==void 0&&(this.flex=a)},r.prototype.setColDef=function(t,e,o){o===void 0&&(o="api"),this.colDef=t,this.userProvidedColDef=e,this.initMinAndMaxWidths(),this.initDotNotation(),this.initTooltip(),this.eventService.dispatchEvent(this.createColumnEvent("colDefChanged",o))},r.prototype.getUserProvidedColDef=function(){return this.userProvidedColDef},r.prototype.setParent=function(t){this.parent=t},r.prototype.getParent=function(){return this.parent},r.prototype.setOriginalParent=function(t){this.originalParent=t},r.prototype.getOriginalParent=function(){return this.originalParent},r.prototype.initialise=function(){this.initMinAndMaxWidths(),this.resetActualWidth("gridInitializing"),this.initDotNotation(),this.initTooltip()},r.prototype.initDotNotation=function(){var t=this.gridOptionsService.get("suppressFieldDotNotation");this.fieldContainsDots=W(this.colDef.field)&&this.colDef.field.indexOf(".")>=0&&!t,this.tooltipFieldContainsDots=W(this.colDef.tooltipField)&&this.colDef.tooltipField.indexOf(".")>=0&&!t},r.prototype.initMinAndMaxWidths=function(){var t=this.colDef;this.minWidth=this.columnUtils.calculateColMinWidth(t),this.maxWidth=this.columnUtils.calculateColMaxWidth(t)},r.prototype.initTooltip=function(){this.tooltipEnabled=W(this.colDef.tooltipField)||W(this.colDef.tooltipValueGetter)||W(this.colDef.tooltipComponent)},r.prototype.resetActualWidth=function(t){t===void 0&&(t="api");var e=this.columnUtils.calculateColInitialWidth(this.colDef);this.setActualWidth(e,t,!0)},r.prototype.isEmptyGroup=function(){return!1},r.prototype.isRowGroupDisplayed=function(t){if(pe(this.colDef)||pe(this.colDef.showRowGroup))return!1;var e=this.colDef.showRowGroup===!0,o=this.colDef.showRowGroup===t;return e||o},r.prototype.isPrimary=function(){return this.primary},r.prototype.isFilterAllowed=function(){var t=!!this.colDef.filter;return t},r.prototype.isFieldContainsDots=function(){return this.fieldContainsDots},r.prototype.isTooltipEnabled=function(){return this.tooltipEnabled},r.prototype.isTooltipFieldContainsDots=function(){return this.tooltipFieldContainsDots},r.prototype.addEventListener=function(t,e){this.eventService.addEventListener(t,e)},r.prototype.removeEventListener=function(t,e){this.eventService.removeEventListener(t,e)},r.prototype.createColumnFunctionCallbackParams=function(t){return{node:t,data:t.data,column:this,colDef:this.colDef,context:this.gridOptionsService.context,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi}},r.prototype.isSuppressNavigable=function(t){if(typeof this.colDef.suppressNavigable=="boolean")return this.colDef.suppressNavigable;if(typeof this.colDef.suppressNavigable=="function"){var e=this.createColumnFunctionCallbackParams(t),o=this.colDef.suppressNavigable;return o(e)}return!1},r.prototype.isCellEditable=function(t){return t.group&&!this.gridOptionsService.get("enableGroupEdit")?!1:this.isColumnFunc(t,this.colDef.editable)},r.prototype.isSuppressFillHandle=function(){return!!this.colDef.suppressFillHandle},r.prototype.isAutoHeight=function(){return!!this.colDef.autoHeight},r.prototype.isAutoHeaderHeight=function(){return!!this.colDef.autoHeaderHeight},r.prototype.isRowDrag=function(t){return this.isColumnFunc(t,this.colDef.rowDrag)},r.prototype.isDndSource=function(t){return this.isColumnFunc(t,this.colDef.dndSource)},r.prototype.isCellCheckboxSelection=function(t){return this.isColumnFunc(t,this.colDef.checkboxSelection)},r.prototype.isSuppressPaste=function(t){return this.isColumnFunc(t,this.colDef?this.colDef.suppressPaste:null)},r.prototype.isResizable=function(){return!!this.getColDefValue("resizable")},r.prototype.getColDefValue=function(t){var e;return(e=this.colDef[t])!==null&&e!==void 0?e:C2[t]},r.prototype.isColumnFunc=function(t,e){if(typeof e=="boolean")return e;if(typeof e=="function"){var o=this.createColumnFunctionCallbackParams(t),n=e;return n(o)}return!1},r.prototype.setMoving=function(t,e){e===void 0&&(e="api"),this.moving=t,this.eventService.dispatchEvent(this.createColumnEvent("movingChanged",e))},r.prototype.createColumnEvent=function(t,e){return{type:t,column:this,columns:[this],source:e,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context}},r.prototype.isMoving=function(){return this.moving},r.prototype.getSort=function(){return this.sort},r.prototype.setSort=function(t,e){e===void 0&&(e="api"),this.sort!==t&&(this.sort=t,this.eventService.dispatchEvent(this.createColumnEvent("sortChanged",e))),this.dispatchStateUpdatedEvent("sort")},r.prototype.setMenuVisible=function(t,e){e===void 0&&(e="api"),this.menuVisible!==t&&(this.menuVisible=t,this.eventService.dispatchEvent(this.createColumnEvent("menuVisibleChanged",e)))},r.prototype.isMenuVisible=function(){return this.menuVisible},r.prototype.isSortable=function(){return!!this.getColDefValue("sortable")},r.prototype.isSortAscending=function(){return this.sort==="asc"},r.prototype.isSortDescending=function(){return this.sort==="desc"},r.prototype.isSortNone=function(){return pe(this.sort)},r.prototype.isSorting=function(){return W(this.sort)},r.prototype.getSortIndex=function(){return this.sortIndex},r.prototype.setSortIndex=function(t){this.sortIndex=t,this.dispatchStateUpdatedEvent("sortIndex")},r.prototype.setAggFunc=function(t){this.aggFunc=t,this.dispatchStateUpdatedEvent("aggFunc")},r.prototype.getAggFunc=function(){return this.aggFunc},r.prototype.getLeft=function(){return this.left},r.prototype.getOldLeft=function(){return this.oldLeft},r.prototype.getRight=function(){return this.left+this.actualWidth},r.prototype.setLeft=function(t,e){e===void 0&&(e="api"),this.oldLeft=this.left,this.left!==t&&(this.left=t,this.eventService.dispatchEvent(this.createColumnEvent("leftChanged",e)))},r.prototype.isFilterActive=function(){return this.filterActive},r.prototype.setFilterActive=function(t,e,o){e===void 0&&(e="api"),this.filterActive!==t&&(this.filterActive=t,this.eventService.dispatchEvent(this.createColumnEvent("filterActiveChanged",e)));var n=this.createColumnEvent("filterChanged",e);o&&ho(n,o),this.eventService.dispatchEvent(n)},r.prototype.isHovered=function(){return this.columnHoverService.isHovered(this)},r.prototype.setPinned=function(t){t===!0||t==="left"?this.pinned="left":t==="right"?this.pinned="right":this.pinned=null,this.dispatchStateUpdatedEvent("pinned")},r.prototype.setFirstRightPinned=function(t,e){e===void 0&&(e="api"),this.firstRightPinned!==t&&(this.firstRightPinned=t,this.eventService.dispatchEvent(this.createColumnEvent("firstRightPinnedChanged",e)))},r.prototype.setLastLeftPinned=function(t,e){e===void 0&&(e="api"),this.lastLeftPinned!==t&&(this.lastLeftPinned=t,this.eventService.dispatchEvent(this.createColumnEvent("lastLeftPinnedChanged",e)))},r.prototype.isFirstRightPinned=function(){return this.firstRightPinned},r.prototype.isLastLeftPinned=function(){return this.lastLeftPinned},r.prototype.isPinned=function(){return this.pinned==="left"||this.pinned==="right"},r.prototype.isPinnedLeft=function(){return this.pinned==="left"},r.prototype.isPinnedRight=function(){return this.pinned==="right"},r.prototype.getPinned=function(){return this.pinned},r.prototype.setVisible=function(t,e){e===void 0&&(e="api");var o=t===!0;this.visible!==o&&(this.visible=o,this.eventService.dispatchEvent(this.createColumnEvent("visibleChanged",e))),this.dispatchStateUpdatedEvent("hide")},r.prototype.isVisible=function(){return this.visible},r.prototype.isSpanHeaderHeight=function(){var t=this.getColDef();return!t.suppressSpanHeaderHeight&&!t.autoHeaderHeight},r.prototype.getColDef=function(){return this.colDef},r.prototype.getColumnGroupShow=function(){return this.colDef.columnGroupShow},r.prototype.getColId=function(){return this.colId},r.prototype.getId=function(){return this.colId},r.prototype.getUniqueId=function(){return this.colId},r.prototype.getDefinition=function(){return this.colDef},r.prototype.getActualWidth=function(){return this.actualWidth},r.prototype.getAutoHeaderHeight=function(){return this.autoHeaderHeight},r.prototype.setAutoHeaderHeight=function(t){var e=t!==this.autoHeaderHeight;return this.autoHeaderHeight=t,e},r.prototype.createBaseColDefParams=function(t){var e={node:t,data:t.data,colDef:this.colDef,column:this,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context};return e},r.prototype.getColSpan=function(t){if(pe(this.colDef.colSpan))return 1;var e=this.createBaseColDefParams(t),o=this.colDef.colSpan(e);return Math.max(o,1)},r.prototype.getRowSpan=function(t){if(pe(this.colDef.rowSpan))return 1;var e=this.createBaseColDefParams(t),o=this.colDef.rowSpan(e);return Math.max(o,1)},r.prototype.setActualWidth=function(t,e,o){e===void 0&&(e="api"),o===void 0&&(o=!1),this.minWidth!=null&&(t=Math.max(t,this.minWidth)),this.maxWidth!=null&&(t=Math.min(t,this.maxWidth)),this.actualWidth!==t&&(this.actualWidth=t,this.flex&&e!=="flex"&&e!=="gridInitializing"&&(this.flex=null),o||this.fireColumnWidthChangedEvent(e)),this.dispatchStateUpdatedEvent("width")},r.prototype.fireColumnWidthChangedEvent=function(t){this.eventService.dispatchEvent(this.createColumnEvent("widthChanged",t))},r.prototype.isGreaterThanMax=function(t){return this.maxWidth!=null?t>this.maxWidth:!1},r.prototype.getMinWidth=function(){return this.minWidth},r.prototype.getMaxWidth=function(){return this.maxWidth},r.prototype.getFlex=function(){return this.flex||0},r.prototype.setFlex=function(t){this.flex!==t&&(this.flex=t),this.dispatchStateUpdatedEvent("flex")},r.prototype.setMinimum=function(t){t===void 0&&(t="api"),W(this.minWidth)&&this.setActualWidth(this.minWidth,t)},r.prototype.setRowGroupActive=function(t,e){e===void 0&&(e="api"),this.rowGroupActive!==t&&(this.rowGroupActive=t,this.eventService.dispatchEvent(this.createColumnEvent("columnRowGroupChanged",e))),this.dispatchStateUpdatedEvent("rowGroup")},r.prototype.isRowGroupActive=function(){return this.rowGroupActive},r.prototype.setPivotActive=function(t,e){e===void 0&&(e="api"),this.pivotActive!==t&&(this.pivotActive=t,this.eventService.dispatchEvent(this.createColumnEvent("columnPivotChanged",e))),this.dispatchStateUpdatedEvent("pivot")},r.prototype.isPivotActive=function(){return this.pivotActive},r.prototype.isAnyFunctionActive=function(){return this.isPivotActive()||this.isRowGroupActive()||this.isValueActive()},r.prototype.isAnyFunctionAllowed=function(){return this.isAllowPivot()||this.isAllowRowGroup()||this.isAllowValue()},r.prototype.setValueActive=function(t,e){e===void 0&&(e="api"),this.aggregationActive!==t&&(this.aggregationActive=t,this.eventService.dispatchEvent(this.createColumnEvent("columnValueChanged",e)))},r.prototype.isValueActive=function(){return this.aggregationActive},r.prototype.isAllowPivot=function(){return this.colDef.enablePivot===!0},r.prototype.isAllowValue=function(){return this.colDef.enableValue===!0},r.prototype.isAllowRowGroup=function(){return this.colDef.enableRowGroup===!0},r.prototype.getMenuTabs=function(t){var e=this.getColDef().menuTabs;return e==null&&(e=t),e},r.prototype.dispatchStateUpdatedEvent=function(t){this.eventService.dispatchEvent({type:r.EVENT_STATE_UPDATED,key:t})},r.EVENT_MOVING_CHANGED="movingChanged",r.EVENT_LEFT_CHANGED="leftChanged",r.EVENT_WIDTH_CHANGED="widthChanged",r.EVENT_LAST_LEFT_PINNED_CHANGED="lastLeftPinnedChanged",r.EVENT_FIRST_RIGHT_PINNED_CHANGED="firstRightPinnedChanged",r.EVENT_VISIBLE_CHANGED="visibleChanged",r.EVENT_FILTER_CHANGED="filterChanged",r.EVENT_FILTER_ACTIVE_CHANGED="filterActiveChanged",r.EVENT_SORT_CHANGED="sortChanged",r.EVENT_COL_DEF_CHANGED="colDefChanged",r.EVENT_MENU_VISIBLE_CHANGED="menuVisibleChanged",r.EVENT_ROW_GROUP_CHANGED="columnRowGroupChanged",r.EVENT_PIVOT_CHANGED="columnPivotChanged",r.EVENT_VALUE_CHANGED="columnValueChanged",r.EVENT_STATE_UPDATED="columnStateUpdated",ba([y("gridOptionsService")],r.prototype,"gridOptionsService",void 0),ba([y("columnUtils")],r.prototype,"columnUtils",void 0),ba([y("columnHoverService")],r.prototype,"columnHoverService",void 0),ba([Q],r.prototype,"initialise",null),r}(),_2=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},st=function(){function r(t,e,o,n){this.localEventService=new si,this.expandable=!1,this.instanceId=My(),this.expandableListenerRemoveCallback=null,this.colGroupDef=t,this.groupId=e,this.expanded=!!t&&!!t.openByDefault,this.padding=o,this.level=n}return r.prototype.destroy=function(){this.expandableListenerRemoveCallback&&this.reset(null,void 0)},r.prototype.reset=function(t,e){this.colGroupDef=t,this.level=e,this.originalParent=null,this.expandableListenerRemoveCallback&&this.expandableListenerRemoveCallback(),this.children=void 0,this.expandable=void 0},r.prototype.getInstanceId=function(){return this.instanceId},r.prototype.setOriginalParent=function(t){this.originalParent=t},r.prototype.getOriginalParent=function(){return this.originalParent},r.prototype.getLevel=function(){return this.level},r.prototype.isVisible=function(){return this.children?this.children.some(function(t){return t.isVisible()}):!1},r.prototype.isPadding=function(){return this.padding},r.prototype.setExpanded=function(t){this.expanded=t===void 0?!1:t;var e={type:r.EVENT_EXPANDED_CHANGED};this.localEventService.dispatchEvent(e)},r.prototype.isExpandable=function(){return this.expandable},r.prototype.isExpanded=function(){return this.expanded},r.prototype.getGroupId=function(){return this.groupId},r.prototype.getId=function(){return this.getGroupId()},r.prototype.setChildren=function(t){this.children=t},r.prototype.getChildren=function(){return this.children},r.prototype.getColGroupDef=function(){return this.colGroupDef},r.prototype.getLeafColumns=function(){var t=[];return this.addLeafColumns(t),t},r.prototype.addLeafColumns=function(t){this.children&&this.children.forEach(function(e){e instanceof We?t.push(e):e instanceof r&&e.addLeafColumns(t)})},r.prototype.getColumnGroupShow=function(){var t=this.colGroupDef;if(t)return t.columnGroupShow},r.prototype.setupExpandable=function(){var t=this;this.setExpandable(),this.expandableListenerRemoveCallback&&this.expandableListenerRemoveCallback();var e=this.onColumnVisibilityChanged.bind(this);this.getLeafColumns().forEach(function(o){return o.addEventListener("visibleChanged",e)}),this.expandableListenerRemoveCallback=function(){t.getLeafColumns().forEach(function(o){return o.removeEventListener("visibleChanged",e)}),t.expandableListenerRemoveCallback=null}},r.prototype.setExpandable=function(){if(!this.isPadding()){for(var t=!1,e=!1,o=!1,n=this.findChildrenRemovingPadding(),i=0,s=n.length;i<s;i++){var a=n[i];if(a.isVisible()){var l=a.getColumnGroupShow();l==="open"?(t=!0,o=!0):l==="closed"?(e=!0,o=!0):(t=!0,e=!0)}}var c=t&&e&&o;if(this.expandable!==c){this.expandable=c;var u={type:r.EVENT_EXPANDABLE_CHANGED};this.localEventService.dispatchEvent(u)}}},r.prototype.findChildrenRemovingPadding=function(){var t=[],e=function(o){o.forEach(function(n){var i=n instanceof r&&n.isPadding();i?e(n.children):t.push(n)})};return e(this.children),t},r.prototype.onColumnVisibilityChanged=function(){this.setExpandable()},r.prototype.addEventListener=function(t,e){this.localEventService.addEventListener(t,e)},r.prototype.removeEventListener=function(t,e){this.localEventService.removeEventListener(t,e)},r.EVENT_EXPANDED_CHANGED="expandedChanged",r.EVENT_EXPANDABLE_CHANGED="expandableChanged",_2([zt],r.prototype,"destroy",null),r}(),S2={numericColumn:{headerClass:"ag-right-aligned-header",cellClass:"ag-right-aligned-cell"},rightAligned:{headerClass:"ag-right-aligned-header",cellClass:"ag-right-aligned-cell"}};function Ly(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];for(var e=0;e<r.length;e++){var o=r[e];if(W(o))return o}return null}function E2(r){return r!=null&&r.length>0}function Ge(r){if(!(!r||!r.length))return r[r.length-1]}function Tn(r,t,e){return r==null&&t==null?!0:r!=null&&t!=null&&r.length===t.length&&r.every(function(o,n){return e?e(o,t[n]):t[n]===o})}function R2(r,t){return Tn(r,t)}function xy(r){return r.sort(function(t,e){return t-e})}function T2(r,t){if(r)for(var e=r.length-2;e>=0;e--){var o=r[e]===t,n=r[e+1]===t;o&&n&&r.splice(e+1,1)}}function Vp(r,t){var e=r.indexOf(t);e>=0&&(r[e]=r[r.length-1],r.pop())}function uo(r,t){var e=r.indexOf(t);e>=0&&r.splice(e,1)}function Fy(r,t){for(var e=0;e<t.length;e++)Vp(r,t[e])}function Ny(r,t){for(var e=0;e<t.length;e++)uo(r,t[e])}function $s(r,t,e){r.splice(e,0,t)}function b2(r,t,e){if(!(r==null||t==null))for(var o=t.length-1;o>=0;o--){var n=t[o];$s(r,n,e)}}function yd(r,t,e){Ny(r,t),t.slice().reverse().forEach(function(o){return $s(r,o,e)})}function To(r,t){return r.indexOf(t)>-1}function Gy(r){return[].concat.apply([],r)}function Cd(r,t){t==null||r==null||t.forEach(function(e){return r.push(e)})}function A2(r){return r.map(zs)}function O2(r,t){if(r!=null)for(var e=r.length-1;e>=0;e--)t(r[e],e)}var P2=Object.freeze({__proto__:null,firstExistingValue:Ly,existsAndNotEmpty:E2,last:Ge,areEqual:Tn,shallowCompare:R2,sortNumerically:xy,removeRepeatsFromArray:T2,removeFromUnorderedArray:Vp,removeFromArray:uo,removeAllFromUnorderedArray:Fy,removeAllFromArray:Ny,insertIntoArray:$s,insertArrayIntoArray:b2,moveInArray:yd,includes:To,flatten:Gy,pushAll:Cd,toStrings:A2,forEachReverse:O2}),ky="__ag_Grid_Stop_Propagation",I2=["touchstart","touchend","touchmove","touchcancel","scroll"],zc={};function hn(r){r[ky]=!0}function Uo(r){return r[ky]===!0}var Bp=function(){var r={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"},t=function(e){if(typeof zc[e]=="boolean")return zc[e];var o=document.createElement(r[e]||"div");return e="on"+e,zc[e]=e in o};return t}();function _l(r,t,e){for(var o=t;o;){var n=r.getDomData(o,e);if(n)return n;o=o.parentElement}return null}function Sl(r,t){return!t||!r?!1:Vy(t).indexOf(r)>=0}function Hy(r){for(var t=[],e=r.target;e;)t.push(e),e=e.parentElement;return t}function Vy(r){var t=r;return t.path?t.path:t.composedPath?t.composedPath():Hy(t)}function By(r,t,e,o){var n=To(I2,e),i=n?{passive:!0}:void 0;r&&r.addEventListener&&r.addEventListener(t,e,o,i)}var D2=Object.freeze({__proto__:null,stopPropagationForAgGrid:hn,isStopPropagationForAgGrid:Uo,isEventSupported:Bp,getCtrlForEventTarget:_l,isElementInEventPath:Sl,createEventPath:Hy,getEventPath:Vy,addSafePassiveEventListener:By}),hi=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},K=function(){function r(){var t=this;this.destroyFunctions=[],this.destroyed=!1,this.__v_skip=!0,this.lastChangeSetIdLookup={},this.propertyListenerId=0,this.isAlive=function(){return!t.destroyed}}return r.prototype.getFrameworkOverrides=function(){return this.frameworkOverrides},r.prototype.getContext=function(){return this.context},r.prototype.destroy=function(){this.destroyFunctions.forEach(function(t){return t()}),this.destroyFunctions.length=0,this.destroyed=!0,this.dispatchEvent({type:r.EVENT_DESTROYED})},r.prototype.addEventListener=function(t,e){this.localEventService||(this.localEventService=new si),this.localEventService.addEventListener(t,e)},r.prototype.removeEventListener=function(t,e){this.localEventService&&this.localEventService.removeEventListener(t,e)},r.prototype.dispatchEventAsync=function(t){var e=this;window.setTimeout(function(){return e.dispatchEvent(t)},0)},r.prototype.dispatchEvent=function(t){this.localEventService&&this.localEventService.dispatchEvent(t)},r.prototype.addManagedListener=function(t,e,o){var n=this;if(!this.destroyed){t instanceof HTMLElement?By(this.getFrameworkOverrides(),t,e,o):t.addEventListener(e,o);var i=function(){return t.removeEventListener(e,o),n.destroyFunctions=n.destroyFunctions.filter(function(s){return s!==i}),null};return this.destroyFunctions.push(i),i}},r.prototype.setupGridOptionListener=function(t,e){var o=this;this.gridOptionsService.addEventListener(t,e);var n=function(){return o.gridOptionsService.removeEventListener(t,e),o.destroyFunctions=o.destroyFunctions.filter(function(i){return i!==n}),null};this.destroyFunctions.push(n)},r.prototype.addManagedPropertyListener=function(t,e){this.destroyed||this.setupGridOptionListener(t,e)},r.prototype.addManagedPropertyListeners=function(t,e){var o=this;if(!this.destroyed){var n=t.join("-")+this.propertyListenerId++,i=function(s){if(s.changeSet){if(s.changeSet&&s.changeSet.id===o.lastChangeSetIdLookup[n])return;o.lastChangeSetIdLookup[n]=s.changeSet.id}var a={type:"gridPropertyChanged",changeSet:s.changeSet};e(a)};t.forEach(function(s){return o.setupGridOptionListener(s,i)})}},r.prototype.addDestroyFunc=function(t){this.isAlive()?this.destroyFunctions.push(t):t()},r.prototype.createManagedBean=function(t,e){var o=this.createBean(t,e);return this.addDestroyFunc(this.destroyBean.bind(this,t,e)),o},r.prototype.createBean=function(t,e,o){return(e||this.getContext()).createBean(t,o)},r.prototype.destroyBean=function(t,e){return(e||this.getContext()).destroyBean(t)},r.prototype.destroyBeans=function(t,e){var o=this;return t&&t.forEach(function(n){return o.destroyBean(n,e)}),[]},r.EVENT_DESTROYED="destroyed",hi([y("frameworkOverrides")],r.prototype,"frameworkOverrides",void 0),hi([y("context")],r.prototype,"context",void 0),hi([y("eventService")],r.prototype,"eventService",void 0),hi([y("gridOptionsService")],r.prototype,"gridOptionsService",void 0),hi([y("localeService")],r.prototype,"localeService",void 0),hi([y("environment")],r.prototype,"environment",void 0),hi([zt],r.prototype,"destroy",null),r}(),M2=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),Aa=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},L2=function(r,t){return function(e,o){t(e,o,r)}},x2=function(r){M2(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.setBeans=function(e){this.logger=e.create("ColumnFactory")},t.prototype.createColumnTree=function(e,o,n){var i=new i2,s=this.extractExistingTreeData(n),a=s.existingCols,l=s.existingGroups,c=s.existingColKeys;i.addExistingKeys(c);var u=this.recursivelyCreateColumns(e,0,o,a,i,l),d=this.findMaxDept(u,0);this.logger.log("Number of levels for grouped columns is "+d);var p=this.balanceColumnTree(u,0,d,i),h=function(f,g){f instanceof st&&f.setupExpandable(),f.setOriginalParent(g)};return this.columnUtils.depthFirstOriginalTreeSearch(null,p,h),{columnTree:p,treeDept:d}},t.prototype.extractExistingTreeData=function(e){var o=[],n=[],i=[];return e&&this.columnUtils.depthFirstOriginalTreeSearch(null,e,function(s){if(s instanceof st){var a=s;n.push(a)}else{var l=s;i.push(l.getId()),o.push(l)}}),{existingCols:o,existingGroups:n,existingColKeys:i}},t.prototype.createForAutoGroups=function(e,o){var n=this;return e.map(function(i){return n.createAutoGroupTreeItem(o,i)})},t.prototype.createAutoGroupTreeItem=function(e,o){for(var n=this.findDepth(e),i=o,s=n-1;s>=0;s--){var a=new st(null,"FAKE_PATH_".concat(o.getId(),"}_").concat(s),!0,s);this.createBean(a),a.setChildren([i]),i.setOriginalParent(a),i=a}return n===0&&o.setOriginalParent(null),i},t.prototype.findDepth=function(e){for(var o=0,n=e;n&&n[0]&&n[0]instanceof st;)o++,n=n[0].getChildren();return o},t.prototype.balanceColumnTree=function(e,o,n,i){for(var s=[],a=0;a<e.length;a++){var l=e[a];if(l instanceof st){var c=l,u=this.balanceColumnTree(c.getChildren(),o+1,n,i);c.setChildren(u),s.push(c)}else{for(var d=void 0,p=void 0,h=n-1;h>=o;h--){var f=i.getUniqueKey(null,null),g=this.createMergedColGroupDef(null),_=new st(g,f,!0,o);this.createBean(_),p&&p.setChildren([_]),p=_,d||(d=p)}if(d&&p){s.push(d);var C=e.some(function(E){return E instanceof st});if(C){p.setChildren([l]);continue}else{p.setChildren(e);break}}s.push(l)}}return s},t.prototype.findMaxDept=function(e,o){for(var n=o,i=0;i<e.length;i++){var s=e[i];if(s instanceof st){var a=s,l=this.findMaxDept(a.getChildren(),o+1);n<l&&(n=l)}}return n},t.prototype.recursivelyCreateColumns=function(e,o,n,i,s,a){if(!e)return[];for(var l=new Array(e.length),c=0;c<l.length;c++){var u=e[c];this.isColumnGroup(u)?l[c]=this.createColumnGroup(n,u,o,i,s,a):l[c]=this.createColumn(n,u,i,s)}return l},t.prototype.createColumnGroup=function(e,o,n,i,s,a){var l=this.createMergedColGroupDef(o),c=s.getUniqueKey(l.groupId||null,null),u=new st(l,c,!1,n);this.createBean(u);var d=this.findExistingGroup(o,a);d&&a.splice(d.idx,1);var p=d==null?void 0:d.group;p&&u.setExpanded(p.isExpanded());var h=this.recursivelyCreateColumns(l.children,n+1,e,i,s,a);return u.setChildren(h),u},t.prototype.createMergedColGroupDef=function(e){var o={};return Object.assign(o,this.gridOptionsService.get("defaultColGroupDef")),Object.assign(o,e),o},t.prototype.createColumn=function(e,o,n,i){var s=this.findExistingColumn(o,n);s&&(n==null||n.splice(s.idx,1));var a=s==null?void 0:s.column;if(a){var c=this.addColumnDefaultAndTypes(o,a.getColId());a.setColDef(c,o),this.applyColumnState(a,c)}else{var l=i.getUniqueKey(o.colId,o.field),c=this.addColumnDefaultAndTypes(o,l);a=new We(c,o,l,e),this.context.createBean(a)}return this.dataTypeService.addColumnListeners(a),a},t.prototype.applyColumnState=function(e,o){var n=ei(o.flex);n!==void 0&&e.setFlex(n);var i=e.getFlex()<=0;if(i){var s=ei(o.width);if(s!=null)e.setActualWidth(s);else{var a=e.getActualWidth();e.setActualWidth(a)}}o.sort!==void 0&&(o.sort=="asc"||o.sort=="desc"?e.setSort(o.sort):e.setSort(void 0));var l=ei(o.sortIndex);l!==void 0&&e.setSortIndex(l);var c=yl(o.hide);c!==void 0&&e.setVisible(!c),o.pinned!==void 0&&e.setPinned(o.pinned)},t.prototype.findExistingColumn=function(e,o){if(o)for(var n=0;n<o.length;n++){var i=o[n].getUserProvidedColDef();if(i){var s=e.colId!=null;if(s){if(o[n].getId()===e.colId)return{idx:n,column:o[n]};continue}var a=e.field!=null;if(a){if(i.field===e.field)return{idx:n,column:o[n]};continue}if(i===e)return{idx:n,column:o[n]}}}},t.prototype.findExistingGroup=function(e,o){var n=e.groupId!=null;if(n)for(var i=0;i<o.length;i++){var s=o[i],a=s.getColGroupDef();if(a&&s.getId()===e.groupId)return{idx:i,group:s}}},t.prototype.addColumnDefaultAndTypes=function(e,o){var n={},i=this.gridOptionsService.get("defaultColDef");ho(n,i,!1,!0);var s=this.dataTypeService.updateColDefAndGetColumnType(n,e,o);s&&this.assignColumnTypes(s,n),ho(n,e,!1,!0);var a=this.gridOptionsService.get("autoGroupColumnDef"),l=this.gridOptionsService.isColumnsSortingCoupledToGroup();return e.rowGroup&&a&&l&&ho(n,{sort:a.sort,initialSort:a.initialSort},!1,!0),this.dataTypeService.validateColDef(n),n},t.prototype.assignColumnTypes=function(e,o){if(e.length){var n=Object.assign({},S2),i=this.gridOptionsService.get("columnTypes")||{};Gt(i,function(s,a){if(s in n)console.warn("AG Grid: the column type '".concat(s,"' is a default column type and cannot be overridden."));else{var l=a;l.type&&Ee("Column type definitions 'columnTypes' with a 'type' attribute are not supported because a column type cannot refer to another column type. Only column definitions 'columnDefs' can use the 'type' attribute to refer to a column type."),n[s]=a}}),e.forEach(function(s){var a=n[s.trim()];a?ho(o,a,!1,!0):console.warn("AG Grid: colDef.type '"+s+"' does not correspond to defined gridOptions.columnTypes")})}},t.prototype.isColumnGroup=function(e){return e.children!==void 0},Aa([y("columnUtils")],t.prototype,"columnUtils",void 0),Aa([y("dataTypeService")],t.prototype,"dataTypeService",void 0),Aa([L2(0,eo("loggerFactory"))],t.prototype,"setBeans",null),t=Aa([ne("columnFactory")],t),t}(K),F2=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},vt=function(){function r(t,e,o,n){this.displayedChildren=[],this.localEventService=new si,this.groupId=e,this.partId=o,this.providedColumnGroup=t,this.pinned=n}return r.createUniqueId=function(t,e){return t+"_"+e},r.prototype.reset=function(){this.parent=null,this.children=null,this.displayedChildren=null},r.prototype.getParent=function(){return this.parent},r.prototype.setParent=function(t){this.parent=t},r.prototype.getUniqueId=function(){return r.createUniqueId(this.groupId,this.partId)},r.prototype.isEmptyGroup=function(){return this.displayedChildren.length===0},r.prototype.isMoving=function(){var t=this.getProvidedColumnGroup().getLeafColumns();return!t||t.length===0?!1:t.every(function(e){return e.isMoving()})},r.prototype.checkLeft=function(){if(this.displayedChildren.forEach(function(n){n instanceof r&&n.checkLeft()}),this.displayedChildren.length>0)if(this.gridOptionsService.get("enableRtl")){var t=Ge(this.displayedChildren),e=t.getLeft();this.setLeft(e)}else{var o=this.displayedChildren[0].getLeft();this.setLeft(o)}else this.setLeft(null)},r.prototype.getLeft=function(){return this.left},r.prototype.getOldLeft=function(){return this.oldLeft},r.prototype.setLeft=function(t){this.oldLeft=t,this.left!==t&&(this.left=t,this.localEventService.dispatchEvent(this.createAgEvent(r.EVENT_LEFT_CHANGED)))},r.prototype.getPinned=function(){return this.pinned},r.prototype.createAgEvent=function(t){return{type:t}},r.prototype.addEventListener=function(t,e){this.localEventService.addEventListener(t,e)},r.prototype.removeEventListener=function(t,e){this.localEventService.removeEventListener(t,e)},r.prototype.getGroupId=function(){return this.groupId},r.prototype.getPartId=function(){return this.partId},r.prototype.isChildInThisGroupDeepSearch=function(t){var e=!1;return this.children.forEach(function(o){t===o&&(e=!0),o instanceof r&&o.isChildInThisGroupDeepSearch(t)&&(e=!0)}),e},r.prototype.getActualWidth=function(){var t=0;return this.displayedChildren&&this.displayedChildren.forEach(function(e){t+=e.getActualWidth()}),t},r.prototype.isResizable=function(){if(!this.displayedChildren)return!1;var t=!1;return this.displayedChildren.forEach(function(e){e.isResizable()&&(t=!0)}),t},r.prototype.getMinWidth=function(){var t=0;return this.displayedChildren.forEach(function(e){t+=e.getMinWidth()||0}),t},r.prototype.addChild=function(t){this.children||(this.children=[]),this.children.push(t)},r.prototype.getDisplayedChildren=function(){return this.displayedChildren},r.prototype.getLeafColumns=function(){var t=[];return this.addLeafColumns(t),t},r.prototype.getDisplayedLeafColumns=function(){var t=[];return this.addDisplayedLeafColumns(t),t},r.prototype.getDefinition=function(){return this.providedColumnGroup.getColGroupDef()},r.prototype.getColGroupDef=function(){return this.providedColumnGroup.getColGroupDef()},r.prototype.isPadding=function(){return this.providedColumnGroup.isPadding()},r.prototype.isExpandable=function(){return this.providedColumnGroup.isExpandable()},r.prototype.isExpanded=function(){return this.providedColumnGroup.isExpanded()},r.prototype.setExpanded=function(t){this.providedColumnGroup.setExpanded(t)},r.prototype.addDisplayedLeafColumns=function(t){this.displayedChildren.forEach(function(e){e instanceof We?t.push(e):e instanceof r&&e.addDisplayedLeafColumns(t)})},r.prototype.addLeafColumns=function(t){this.children.forEach(function(e){e instanceof We?t.push(e):e instanceof r&&e.addLeafColumns(t)})},r.prototype.getChildren=function(){return this.children},r.prototype.getColumnGroupShow=function(){return this.providedColumnGroup.getColumnGroupShow()},r.prototype.getProvidedColumnGroup=function(){return this.providedColumnGroup},r.prototype.getPaddingLevel=function(){var t=this.getParent();return!this.isPadding()||!t||!t.isPadding()?0:1+t.getPaddingLevel()},r.prototype.calculateDisplayedColumns=function(){var t=this;this.displayedChildren=[];for(var e=this;e!=null&&e.isPadding();)e=e.getParent();var o=e?e.providedColumnGroup.isExpandable():!1;if(!o){this.displayedChildren=this.children,this.localEventService.dispatchEvent(this.createAgEvent(r.EVENT_DISPLAYED_CHILDREN_CHANGED));return}this.children.forEach(function(n){var i=n instanceof r&&(!n.displayedChildren||!n.displayedChildren.length);if(!i){var s=n.getColumnGroupShow();switch(s){case"open":e.providedColumnGroup.isExpanded()&&t.displayedChildren.push(n);break;case"closed":e.providedColumnGroup.isExpanded()||t.displayedChildren.push(n);break;default:t.displayedChildren.push(n);break}}}),this.localEventService.dispatchEvent(this.createAgEvent(r.EVENT_DISPLAYED_CHILDREN_CHANGED))},r.EVENT_LEFT_CHANGED="leftChanged",r.EVENT_DISPLAYED_CHILDREN_CHANGED="displayedChildrenChanged",F2([y("gridOptionsService")],r.prototype,"gridOptionsService",void 0),r}(),w=function(){function r(){}return r.EVENT_COLUMN_EVERYTHING_CHANGED="columnEverythingChanged",r.EVENT_NEW_COLUMNS_LOADED="newColumnsLoaded",r.EVENT_COLUMN_PIVOT_MODE_CHANGED="columnPivotModeChanged",r.EVENT_COLUMN_ROW_GROUP_CHANGED="columnRowGroupChanged",r.EVENT_EXPAND_COLLAPSE_ALL="expandOrCollapseAll",r.EVENT_COLUMN_PIVOT_CHANGED="columnPivotChanged",r.EVENT_GRID_COLUMNS_CHANGED="gridColumnsChanged",r.EVENT_COLUMN_VALUE_CHANGED="columnValueChanged",r.EVENT_COLUMN_MOVED="columnMoved",r.EVENT_COLUMN_VISIBLE="columnVisible",r.EVENT_COLUMN_PINNED="columnPinned",r.EVENT_COLUMN_GROUP_OPENED="columnGroupOpened",r.EVENT_COLUMN_RESIZED="columnResized",r.EVENT_DISPLAYED_COLUMNS_CHANGED="displayedColumnsChanged",r.EVENT_SUPPRESS_COLUMN_MOVE_CHANGED="suppressMovableColumns",r.EVENT_SUPPRESS_MENU_HIDE_CHANGED="suppressMenuHide",r.EVENT_SUPPRESS_FIELD_DOT_NOTATION="suppressFieldDotNotation",r.EVENT_VIRTUAL_COLUMNS_CHANGED="virtualColumnsChanged",r.EVENT_ASYNC_TRANSACTIONS_FLUSHED="asyncTransactionsFlushed",r.EVENT_ROW_GROUP_OPENED="rowGroupOpened",r.EVENT_ROW_DATA_UPDATED="rowDataUpdated",r.EVENT_PINNED_ROW_DATA_CHANGED="pinnedRowDataChanged",r.EVENT_RANGE_SELECTION_CHANGED="rangeSelectionChanged",r.EVENT_CHART_CREATED="chartCreated",r.EVENT_CHART_RANGE_SELECTION_CHANGED="chartRangeSelectionChanged",r.EVENT_CHART_OPTIONS_CHANGED="chartOptionsChanged",r.EVENT_CHART_DESTROYED="chartDestroyed",r.EVENT_TOOL_PANEL_VISIBLE_CHANGED="toolPanelVisibleChanged",r.EVENT_TOOL_PANEL_SIZE_CHANGED="toolPanelSizeChanged",r.EVENT_COLUMN_PANEL_ITEM_DRAG_START="columnPanelItemDragStart",r.EVENT_COLUMN_PANEL_ITEM_DRAG_END="columnPanelItemDragEnd",r.EVENT_MODEL_UPDATED="modelUpdated",r.EVENT_CUT_START="cutStart",r.EVENT_CUT_END="cutEnd",r.EVENT_PASTE_START="pasteStart",r.EVENT_PASTE_END="pasteEnd",r.EVENT_FILL_START="fillStart",r.EVENT_FILL_END="fillEnd",r.EVENT_RANGE_DELETE_START="rangeDeleteStart",r.EVENT_RANGE_DELETE_END="rangeDeleteEnd",r.EVENT_UNDO_STARTED="undoStarted",r.EVENT_UNDO_ENDED="undoEnded",r.EVENT_REDO_STARTED="redoStarted",r.EVENT_REDO_ENDED="redoEnded",r.EVENT_KEY_SHORTCUT_CHANGED_CELL_START="keyShortcutChangedCellStart",r.EVENT_KEY_SHORTCUT_CHANGED_CELL_END="keyShortcutChangedCellEnd",r.EVENT_CELL_CLICKED="cellClicked",r.EVENT_CELL_DOUBLE_CLICKED="cellDoubleClicked",r.EVENT_CELL_MOUSE_DOWN="cellMouseDown",r.EVENT_CELL_CONTEXT_MENU="cellContextMenu",r.EVENT_CELL_VALUE_CHANGED="cellValueChanged",r.EVENT_CELL_EDIT_REQUEST="cellEditRequest",r.EVENT_ROW_VALUE_CHANGED="rowValueChanged",r.EVENT_CELL_FOCUSED="cellFocused",r.EVENT_CELL_FOCUS_CLEARED="cellFocusCleared",r.EVENT_FULL_WIDTH_ROW_FOCUSED="fullWidthRowFocused",r.EVENT_ROW_SELECTED="rowSelected",r.EVENT_SELECTION_CHANGED="selectionChanged",r.EVENT_TOOLTIP_SHOW="tooltipShow",r.EVENT_TOOLTIP_HIDE="tooltipHide",r.EVENT_CELL_KEY_DOWN="cellKeyDown",r.EVENT_CELL_MOUSE_OVER="cellMouseOver",r.EVENT_CELL_MOUSE_OUT="cellMouseOut",r.EVENT_FILTER_CHANGED="filterChanged",r.EVENT_FILTER_MODIFIED="filterModified",r.EVENT_FILTER_OPENED="filterOpened",r.EVENT_ADVANCED_FILTER_BUILDER_VISIBLE_CHANGED="advancedFilterBuilderVisibleChanged",r.EVENT_SORT_CHANGED="sortChanged",r.EVENT_VIRTUAL_ROW_REMOVED="virtualRowRemoved",r.EVENT_ROW_CLICKED="rowClicked",r.EVENT_ROW_DOUBLE_CLICKED="rowDoubleClicked",r.EVENT_GRID_READY="gridReady",r.EVENT_GRID_PRE_DESTROYED="gridPreDestroyed",r.EVENT_GRID_SIZE_CHANGED="gridSizeChanged",r.EVENT_VIEWPORT_CHANGED="viewportChanged",r.EVENT_SCROLLBAR_WIDTH_CHANGED="scrollbarWidthChanged",r.EVENT_FIRST_DATA_RENDERED="firstDataRendered",r.EVENT_DRAG_STARTED="dragStarted",r.EVENT_DRAG_STOPPED="dragStopped",r.EVENT_CHECKBOX_CHANGED="checkboxChanged",r.EVENT_ROW_EDITING_STARTED="rowEditingStarted",r.EVENT_ROW_EDITING_STOPPED="rowEditingStopped",r.EVENT_CELL_EDITING_STARTED="cellEditingStarted",r.EVENT_CELL_EDITING_STOPPED="cellEditingStopped",r.EVENT_BODY_SCROLL="bodyScroll",r.EVENT_BODY_SCROLL_END="bodyScrollEnd",r.EVENT_HEIGHT_SCALE_CHANGED="heightScaleChanged",r.EVENT_PAGINATION_CHANGED="paginationChanged",r.EVENT_COMPONENT_STATE_CHANGED="componentStateChanged",r.EVENT_STORE_REFRESHED="storeRefreshed",r.EVENT_STATE_UPDATED="stateUpdated",r.EVENT_BODY_HEIGHT_CHANGED="bodyHeightChanged",r.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED="displayedColumnsWidthChanged",r.EVENT_SCROLL_VISIBILITY_CHANGED="scrollVisibilityChanged",r.EVENT_COLUMN_HOVER_CHANGED="columnHoverChanged",r.EVENT_FLASH_CELLS="flashCells",r.EVENT_PAGINATION_PIXEL_OFFSET_CHANGED="paginationPixelOffsetChanged",r.EVENT_DISPLAYED_ROWS_CHANGED="displayedRowsChanged",r.EVENT_LEFT_PINNED_WIDTH_CHANGED="leftPinnedWidthChanged",r.EVENT_RIGHT_PINNED_WIDTH_CHANGED="rightPinnedWidthChanged",r.EVENT_ROW_CONTAINER_HEIGHT_CHANGED="rowContainerHeightChanged",r.EVENT_HEADER_HEIGHT_CHANGED="headerHeightChanged",r.EVENT_COLUMN_HEADER_HEIGHT_CHANGED="columnHeaderHeightChanged",r.EVENT_ROW_DRAG_ENTER="rowDragEnter",r.EVENT_ROW_DRAG_MOVE="rowDragMove",r.EVENT_ROW_DRAG_LEAVE="rowDragLeave",r.EVENT_ROW_DRAG_END="rowDragEnd",r.EVENT_GRID_STYLES_CHANGED="gridStylesChanged",r.EVENT_POPUP_TO_FRONT="popupToFront",r.EVENT_COLUMN_ROW_GROUP_CHANGE_REQUEST="columnRowGroupChangeRequest",r.EVENT_COLUMN_PIVOT_CHANGE_REQUEST="columnPivotChangeRequest",r.EVENT_COLUMN_VALUE_CHANGE_REQUEST="columnValueChangeRequest",r.EVENT_COLUMN_AGG_FUNC_CHANGE_REQUEST="columnAggFuncChangeRequest",r.EVENT_STORE_UPDATED="storeUpdated",r.EVENT_FILTER_DESTROYED="filterDestroyed",r.EVENT_ROW_DATA_UPDATE_STARTED="rowDataUpdateStarted",r.EVENT_ROW_COUNT_READY="rowCountReady",r.EVENT_ADVANCED_FILTER_ENABLED_CHANGED="advancedFilterEnabledChanged",r.EVENT_DATA_TYPES_INFERRED="dataTypesInferred",r.EVENT_FIELD_VALUE_CHANGED="fieldValueChanged",r.EVENT_FIELD_PICKER_VALUE_SELECTED="fieldPickerValueSelected",r.EVENT_SIDE_BAR_UPDATED="sideBarUpdated",r}(),Uy=function(){function r(){this.existingIds={}}return r.prototype.getInstanceIdForKey=function(t){var e=this.existingIds[t],o;return typeof e!="number"?o=0:o=e+1,this.existingIds[t]=o,o},r}(),N2=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),$c=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},Hi="ag-Grid-AutoColumn",G2=function(r){N2(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.createAutoGroupColumns=function(e){var o=this,n=[],i=this.gridOptionsService.get("treeData"),s=this.gridOptionsService.isGroupMultiAutoColumn();return i&&s&&(console.warn('AG Grid: you cannot mix groupDisplayType = "multipleColumns" with treeData, only one column can be used to display groups when doing tree data'),s=!1),s?e.forEach(function(a,l){n.push(o.createOneAutoGroupColumn(a,l))}):n.push(this.createOneAutoGroupColumn()),n},t.prototype.updateAutoGroupColumns=function(e){var o=this;e.forEach(function(n,i){return o.updateOneAutoGroupColumn(n,i)})},t.prototype.createOneAutoGroupColumn=function(e,o){var n;e?n="".concat(Hi,"-").concat(e.getId()):n=Hi;var i=this.createAutoGroupColDef(n,e,o);i.colId=n;var s=new We(i,null,n,!0);return this.context.createBean(s),s},t.prototype.updateOneAutoGroupColumn=function(e,o){var n=e.getColDef(),i=typeof n.showRowGroup=="string"?n.showRowGroup:void 0,s=i!=null?this.columnModel.getPrimaryColumn(i):void 0,a=this.createAutoGroupColDef(e.getId(),s??void 0,o);e.setColDef(a,null),this.columnFactory.applyColumnState(e,a)},t.prototype.createAutoGroupColDef=function(e,o,n){var i=this.createBaseColDef(o),s=this.gridOptionsService.get("autoGroupColumnDef");if(ho(i,s),i=this.columnFactory.addColumnDefaultAndTypes(i,e),!this.gridOptionsService.get("treeData")){var a=pe(i.field)&&pe(i.valueGetter)&&pe(i.filterValueGetter)&&i.filter!=="agGroupColumnFilter";a&&(i.filter=!1)}n&&n>0&&(i.headerCheckboxSelection=!1);var l=this.gridOptionsService.isColumnsSortingCoupledToGroup(),c=i.valueGetter||i.field!=null;return l&&!c&&(i.sortIndex=void 0,i.initialSort=void 0),i},t.prototype.createBaseColDef=function(e){var o=this.gridOptionsService.get("autoGroupColumnDef"),n=this.localeService.getLocaleTextFunc(),i={headerName:n("group","Group")},s=o&&(o.cellRenderer||o.cellRendererSelector);if(s||(i.cellRenderer="agGroupCellRenderer"),e){var a=e.getColDef();Object.assign(i,{headerName:this.columnModel.getDisplayNameForColumn(e,"header"),headerValueGetter:a.headerValueGetter}),a.cellRenderer&&Object.assign(i,{cellRendererParams:{innerRenderer:a.cellRenderer,innerRendererParams:a.cellRendererParams}}),i.showRowGroup=e.getColId()}else i.showRowGroup=!0;return i},$c([y("columnModel")],t.prototype,"columnModel",void 0),$c([y("columnFactory")],t.prototype,"columnFactory",void 0),t=$c([ne("autoGroupColService")],t),t}(K),k2=/[&<>"']/g,H2={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function V2(r){var t=String.fromCharCode;function e(d){var p=[];if(!d)return[];for(var h=d.length,f=0,g,_;f<h;)g=d.charCodeAt(f++),g>=55296&&g<=56319&&f<h?(_=d.charCodeAt(f++),(_&64512)==56320?p.push(((g&1023)<<10)+(_&1023)+65536):(p.push(g),f--)):p.push(g);return p}function o(d){if(d>=55296&&d<=57343)throw Error("Lone surrogate U+"+d.toString(16).toUpperCase()+" is not a scalar value")}function n(d,p){return t(d>>p&63|128)}function i(d){if(d>=0&&d<=31&&d!==10){var p=d.toString(16).toUpperCase(),h=p.padStart(4,"0");return"_x".concat(h,"_")}if(!(d&4294967168))return t(d);var f="";return d&4294965248?d&4294901760?d&4292870144||(f=t(d>>18&7|240),f+=n(d,12),f+=n(d,6)):(o(d),f=t(d>>12&15|224),f+=n(d,6)):f=t(d>>6&31|192),f+=t(d&63|128),f}for(var s=e(r),a=s.length,l=-1,c,u="";++l<a;)c=s[l],u+=i(c);return u}function B2(r){return r[0].toUpperCase()+r.substring(1).toLowerCase()}function ht(r,t){if(r==null)return null;var e=r.toString().toString();return t?e:e.replace(k2,function(o){return H2[o]})}function jy(r){if(!r||r==null)return null;var t=/([a-z])([A-Z])/g,e=/([A-Z]+)([A-Z])([a-z])/g,o=r.replace(t,"$1 $2").replace(e,"$1 $2$3").replace(/\./g," ").split(" ");return o.map(function(n){return n.substring(0,1).toUpperCase()+(n.length>1?n.substring(1,n.length):"")}).join(" ")}function Wy(r){return r.replace(/[A-Z]/g,function(t){return"-".concat(t.toLocaleLowerCase())})}var U2=Object.freeze({__proto__:null,utf8_encode:V2,capitalise:B2,escapeString:ht,camelCaseToHumanText:jy,camelCaseToHyphenated:Wy});function Qn(r){var t=new Map;return r.forEach(function(e){return t.set(e[0],e[1])}),t}function j2(r,t){var e=new Map;return r.forEach(function(o){return e.set(t(o),o)}),e}function W2(r){var t=[];return r.forEach(function(e,o){return t.push(o)}),t}var z2=Object.freeze({__proto__:null,convertToMap:Qn,mapById:j2,keys:W2}),$2=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),bt=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},K2=function(r,t){return function(e,o){t(e,o,r)}},Y2=function(r,t){var e={};for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&t.indexOf(o)<0&&(e[o]=r[o]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,o=Object.getOwnPropertySymbols(r);n<o.length;n++)t.indexOf(o[n])<0&&Object.prototype.propertyIsEnumerable.call(r,o[n])&&(e[o[n]]=r[o[n]]);return e},Do=function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var o=e.call(r),n,i=[],s;try{for(;(t===void 0||t-- >0)&&!(n=o.next()).done;)i.push(n.value)}catch(a){s={error:a}}finally{try{n&&!n.done&&(e=o.return)&&e.call(o)}finally{if(s)throw s.error}}return i},Mo=function(r,t,e){if(e||arguments.length===2)for(var o=0,n=t.length,i;o<n;o++)(i||!(o in t))&&(i||(i=Array.prototype.slice.call(t,0,o)),i[o]=t[o]);return r.concat(i||Array.prototype.slice.call(t))},Of=function(r){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&r[t],o=0;if(e)return e.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&o>=r.length&&(r=void 0),{value:r&&r[o++],done:!r}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},q2=function(r){$2(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.primaryHeaderRowCount=0,e.secondaryHeaderRowCount=0,e.gridHeaderRowCount=0,e.displayedColumnsLeft=[],e.displayedColumnsRight=[],e.displayedColumnsCenter=[],e.displayedColumns=[],e.displayedColumnsAndGroupsMap={},e.viewportColumns=[],e.viewportColumnsHash="",e.headerViewportColumns=[],e.viewportColumnsCenter=[],e.headerViewportColumnsCenter=[],e.autoHeightActiveAtLeastOnce=!1,e.rowGroupColumns=[],e.valueColumns=[],e.pivotColumns=[],e.ready=!1,e.autoGroupsNeedBuilding=!1,e.forceRecreateAutoGroups=!1,e.pivotMode=!1,e.bodyWidth=0,e.leftWidth=0,e.rightWidth=0,e.bodyWidthDirty=!0,e.shouldQueueResizeOperations=!1,e.resizeOperationQueue=[],e}return t.prototype.init=function(){var e=this;this.suppressColumnVirtualisation=this.gridOptionsService.get("suppressColumnVirtualisation");var o=this.gridOptionsService.get("pivotMode");this.isPivotSettingAllowed(o)&&(this.pivotMode=o),this.addManagedPropertyListeners(["groupDisplayType","treeData","treeDataDisplayType","groupHideOpenParents"],function(){return e.buildAutoGroupColumns()}),this.addManagedPropertyListener("autoGroupColumnDef",function(){return e.onAutoGroupColumnDefChanged()}),this.addManagedPropertyListeners(["defaultColDef","columnTypes","suppressFieldDotNotation"],function(n){return e.onSharedColDefChanged(n.source)}),this.addManagedPropertyListener("pivotMode",function(n){return e.setPivotMode(e.gridOptionsService.get("pivotMode"),n.source)}),this.addManagedListener(this.eventService,w.EVENT_FIRST_DATA_RENDERED,function(){return e.onFirstDataRendered()})},t.prototype.buildAutoGroupColumns=function(){this.columnDefs&&(this.autoGroupsNeedBuilding=!0,this.forceRecreateAutoGroups=!0,this.updateGridColumns(),this.updateDisplayedColumns("gridOptionsChanged"))},t.prototype.onAutoGroupColumnDefChanged=function(){this.groupAutoColumns&&this.autoGroupColService.updateAutoGroupColumns(this.groupAutoColumns)},t.prototype.onSharedColDefChanged=function(e){e===void 0&&(e="api"),this.gridColumns&&(this.groupAutoColumns&&this.autoGroupColService.updateAutoGroupColumns(this.groupAutoColumns),this.createColumnsFromColumnDefs(!0,e))},t.prototype.setColumnDefs=function(e,o){o===void 0&&(o="api");var n=!!this.columnDefs;this.columnDefs=e,this.createColumnsFromColumnDefs(n,o)},t.prototype.recreateColumnDefs=function(e){e===void 0&&(e="api"),this.onSharedColDefChanged(e)},t.prototype.destroyOldColumns=function(e,o){var n={};if(e){this.columnUtils.depthFirstOriginalTreeSearch(null,e,function(s){n[s.getInstanceId()]=s}),o&&this.columnUtils.depthFirstOriginalTreeSearch(null,o,function(s){n[s.getInstanceId()]=null});var i=Object.values(n).filter(function(s){return s!=null});this.destroyBeans(i)}},t.prototype.destroyColumns=function(){this.destroyOldColumns(this.primaryColumnTree),this.destroyOldColumns(this.secondaryBalancedTree),this.destroyOldColumns(this.groupAutoColsBalancedTree)},t.prototype.createColumnsFromColumnDefs=function(e,o){var n=this;o===void 0&&(o="api");var i=e?this.compareColumnStatesAndDispatchEvents(o):void 0;this.valueCache.expire(),this.autoGroupsNeedBuilding=!0;var s=this.primaryColumns,a=this.primaryColumnTree,l=this.columnFactory.createColumnTree(this.columnDefs,!0,a);this.destroyOldColumns(this.primaryColumnTree,l.columnTree),this.primaryColumnTree=l.columnTree,this.primaryHeaderRowCount=l.treeDept+1,this.primaryColumns=this.getColumnsFromTree(this.primaryColumnTree),this.primaryColumnsMap={},this.primaryColumns.forEach(function(d){return n.primaryColumnsMap[d.getId()]=d}),this.extractRowGroupColumns(o,s),this.extractPivotColumns(o,s),this.extractValueColumns(o,s),this.ready=!0;var c=this.gridColsArePrimary===void 0,u=this.gridColsArePrimary||c||this.autoGroupsNeedBuilding;u&&(this.updateGridColumns(),e&&this.gridColsArePrimary&&!this.gridOptionsService.get("maintainColumnOrder")&&this.orderGridColumnsLikePrimary(),this.updateDisplayedColumns(o),this.checkViewportColumns()),this.dispatchEverythingChanged(o),i&&i(),this.dispatchNewColumnsLoaded(o)},t.prototype.dispatchNewColumnsLoaded=function(e){var o={type:w.EVENT_NEW_COLUMNS_LOADED,source:e};this.eventService.dispatchEvent(o),e==="gridInitializing"&&this.onColumnsReady()},t.prototype.dispatchEverythingChanged=function(e){e===void 0&&(e="api");var o={type:w.EVENT_COLUMN_EVERYTHING_CHANGED,source:e};this.eventService.dispatchEvent(o)},t.prototype.orderGridColumnsLikePrimary=function(){var e=this,o=this.primaryColumns;if(o){var n=o.filter(function(s){return e.gridColumns.indexOf(s)>=0}),i=this.gridColumns.filter(function(s){return n.indexOf(s)<0});this.gridColumns=Mo(Mo([],Do(i),!1),Do(n),!1),this.gridColumns=this.placeLockedColumns(this.gridColumns)}},t.prototype.getAllDisplayedAutoHeightCols=function(){return this.displayedAutoHeightCols},t.prototype.setViewport=function(){this.gridOptionsService.get("enableRtl")?(this.viewportLeft=this.bodyWidth-this.scrollPosition-this.scrollWidth,this.viewportRight=this.bodyWidth-this.scrollPosition):(this.viewportLeft=this.scrollPosition,this.viewportRight=this.scrollWidth+this.scrollPosition)},t.prototype.getDisplayedColumnsStartingAt=function(e){for(var o=e,n=[];o!=null;)n.push(o),o=this.getDisplayedColAfter(o);return n},t.prototype.checkViewportColumns=function(e){if(e===void 0&&(e=!1),this.displayedColumnsCenter!=null){var o=this.extractViewport();if(o){var n={type:w.EVENT_VIRTUAL_COLUMNS_CHANGED,afterScroll:e};this.eventService.dispatchEvent(n)}}},t.prototype.setViewportPosition=function(e,o,n){n===void 0&&(n=!1),(e!==this.scrollWidth||o!==this.scrollPosition||this.bodyWidthDirty)&&(this.scrollWidth=e,this.scrollPosition=o,this.bodyWidthDirty=!0,this.setViewport(),this.ready&&this.checkViewportColumns(n))},t.prototype.isPivotMode=function(){return this.pivotMode},t.prototype.isPivotSettingAllowed=function(e){return e&&this.gridOptionsService.get("treeData")?(console.warn("AG Grid: Pivot mode not available in conjunction Tree Data i.e. 'gridOptions.treeData: true'"),!1):!0},t.prototype.setPivotMode=function(e,o){if(o===void 0&&(o="api"),!(e===this.pivotMode||!this.isPivotSettingAllowed(this.pivotMode))&&(this.pivotMode=e,!!this.gridColumns)){this.autoGroupsNeedBuilding=!0,this.updateGridColumns(),this.updateDisplayedColumns(o);var n={type:w.EVENT_COLUMN_PIVOT_MODE_CHANGED};this.eventService.dispatchEvent(n)}},t.prototype.getSecondaryPivotColumn=function(e,o){if(pe(this.secondaryColumns))return null;var n=this.getPrimaryColumn(o),i=null;return this.secondaryColumns.forEach(function(s){var a=s.getColDef().pivotKeys,l=s.getColDef().pivotValueColumn,c=Tn(a,e),u=l===n;c&&u&&(i=s)}),i},t.prototype.setBeans=function(e){this.logger=e.create("columnModel")},t.prototype.setFirstRightAndLastLeftPinned=function(e){var o,n;this.gridOptionsService.get("enableRtl")?(o=this.displayedColumnsLeft?this.displayedColumnsLeft[0]:null,n=this.displayedColumnsRight?Ge(this.displayedColumnsRight):null):(o=this.displayedColumnsLeft?Ge(this.displayedColumnsLeft):null,n=this.displayedColumnsRight?this.displayedColumnsRight[0]:null),this.gridColumns.forEach(function(i){i.setLastLeftPinned(i===o,e),i.setFirstRightPinned(i===n,e)})},t.prototype.autoSizeColumns=function(e){var o=this;if(this.shouldQueueResizeOperations){this.resizeOperationQueue.push(function(){return o.autoSizeColumns(e)});return}var n=e.columns,i=e.skipHeader,s=e.skipHeaderGroups,a=e.stopAtGroup,l=e.source,c=l===void 0?"api":l;this.animationFrameService.flushAllFrames();for(var u=[],d=-1,p=i??this.gridOptionsService.get("skipHeaderOnAutoSize"),h=s??p;d!==0;)d=0,this.actionOnGridColumns(n,function(f){if(u.indexOf(f)>=0)return!1;var g=o.autoWidthCalculator.getPreferredWidthForColumn(f,p);if(g>0){var _=o.normaliseColumnWidth(f,g);f.setActualWidth(_,c),u.push(f),d++}return!0},c);h||this.autoSizeColumnGroupsByColumns(n,c,a),this.dispatchColumnResizedEvent(u,!0,"autosizeColumns")},t.prototype.dispatchColumnResizedEvent=function(e,o,n,i){if(i===void 0&&(i=null),e&&e.length){var s={type:w.EVENT_COLUMN_RESIZED,columns:e,column:e.length===1?e[0]:null,flexColumns:i,finished:o,source:n};this.eventService.dispatchEvent(s)}},t.prototype.dispatchColumnChangedEvent=function(e,o,n){var i={type:e,columns:o,column:o&&o.length==1?o[0]:null,source:n};this.eventService.dispatchEvent(i)},t.prototype.dispatchColumnMovedEvent=function(e){var o=e.movedColumns,n=e.source,i=e.toIndex,s=e.finished,a={type:w.EVENT_COLUMN_MOVED,columns:o,column:o&&o.length===1?o[0]:null,toIndex:i,finished:s,source:n};this.eventService.dispatchEvent(a)},t.prototype.dispatchColumnPinnedEvent=function(e,o){if(e.length){var n=e.length===1?e[0]:null,i=this.getCommonValue(e,function(a){return a.getPinned()}),s={type:w.EVENT_COLUMN_PINNED,pinned:i??null,columns:e,column:n,source:o};this.eventService.dispatchEvent(s)}},t.prototype.dispatchColumnVisibleEvent=function(e,o){if(e.length){var n=e.length===1?e[0]:null,i=this.getCommonValue(e,function(a){return a.isVisible()}),s={type:w.EVENT_COLUMN_VISIBLE,visible:i,columns:e,column:n,source:o};this.eventService.dispatchEvent(s)}},t.prototype.autoSizeColumn=function(e,o,n){n===void 0&&(n="api"),e&&this.autoSizeColumns({columns:[e],skipHeader:o,skipHeaderGroups:!0,source:n})},t.prototype.autoSizeColumnGroupsByColumns=function(e,o,n){var i,s,a,l,c=new Set,u=this.getGridColumns(e);u.forEach(function(T){for(var P=T.getParent();P&&P!=n;)P.isPadding()||c.add(P),P=P.getParent()});var d,p=[];try{for(var h=Of(c),f=h.next();!f.done;f=h.next()){var g=f.value;try{for(var _=(a=void 0,Of(this.ctrlsService.getHeaderRowContainerCtrls())),C=_.next();!C.done;C=_.next()){var E=C.value;if(d=E.getHeaderCtrlForColumn(g),d)break}}catch(T){a={error:T}}finally{try{C&&!C.done&&(l=_.return)&&l.call(_)}finally{if(a)throw a.error}}d&&d.resizeLeafColumnsToFit(o)}}catch(T){i={error:T}}finally{try{f&&!f.done&&(s=h.return)&&s.call(h)}finally{if(i)throw i.error}}return p},t.prototype.autoSizeAllColumns=function(e,o){var n=this;if(o===void 0&&(o="api"),this.shouldQueueResizeOperations){this.resizeOperationQueue.push(function(){return n.autoSizeAllColumns(e,o)});return}var i=this.getAllDisplayedColumns();this.autoSizeColumns({columns:i,skipHeader:e,source:o})},t.prototype.getColumnsFromTree=function(e){var o=[],n=function(i){for(var s=0;s<i.length;s++){var a=i[s];a instanceof We?o.push(a):a instanceof st&&n(a.getChildren())}};return n(e),o},t.prototype.getAllDisplayedTrees=function(){return this.displayedTreeLeft&&this.displayedTreeRight&&this.displayedTreeCentre?this.displayedTreeLeft.concat(this.displayedTreeCentre).concat(this.displayedTreeRight):null},t.prototype.getPrimaryColumnTree=function(){return this.primaryColumnTree},t.prototype.getHeaderRowCount=function(){return this.gridHeaderRowCount},t.prototype.getDisplayedTreeLeft=function(){return this.displayedTreeLeft},t.prototype.getDisplayedTreeRight=function(){return this.displayedTreeRight},t.prototype.getDisplayedTreeCentre=function(){return this.displayedTreeCentre},t.prototype.isColumnDisplayed=function(e){return this.getAllDisplayedColumns().indexOf(e)>=0},t.prototype.getAllDisplayedColumns=function(){return this.displayedColumns},t.prototype.getViewportColumns=function(){return this.viewportColumns},t.prototype.getDisplayedLeftColumnsForRow=function(e){return this.colSpanActive?this.getDisplayedColumnsForRow(e,this.displayedColumnsLeft):this.displayedColumnsLeft},t.prototype.getDisplayedRightColumnsForRow=function(e){return this.colSpanActive?this.getDisplayedColumnsForRow(e,this.displayedColumnsRight):this.displayedColumnsRight},t.prototype.isColSpanActive=function(){return this.colSpanActive},t.prototype.getDisplayedColumnsForRow=function(e,o,n,i){for(var s=[],a=null,l=function(d){var p=o[d],h=o.length-d,f=Math.min(p.getColSpan(e),h),g=[p];if(f>1){for(var _=f-1,C=1;C<=_;C++)g.push(o[d+C]);d+=_}var E;if(n?(E=!1,g.forEach(function(P){n(P)&&(E=!0)})):E=!0,E){if(s.length===0&&a){var T=i?i(p):!1;T&&s.push(a)}s.push(p)}a=p,c=d},c,u=0;u<o.length;u++)l(u),u=c;return s},t.prototype.getViewportCenterColumnsForRow=function(e){var o=this;if(!this.colSpanActive)return this.viewportColumnsCenter;var n=function(s){var a=s.getLeft();return W(a)&&a>o.viewportLeft},i=this.suppressColumnVirtualisation?null:this.isColumnInRowViewport.bind(this);return this.getDisplayedColumnsForRow(e,this.displayedColumnsCenter,i,n)},t.prototype.isColumnAtEdge=function(e,o){var n=this.getAllDisplayedColumns();if(!n.length)return!1;var i=o==="first",s;if(e instanceof vt){var a=e.getDisplayedLeafColumns();if(!a.length)return!1;s=i?a[0]:Ge(a)}else s=e;return(i?n[0]:Ge(n))===s},t.prototype.getAriaColumnIndex=function(e){var o;return e instanceof vt?o=e.getLeafColumns()[0]:o=e,this.getAllGridColumns().indexOf(o)+1},t.prototype.isColumnInHeaderViewport=function(e){return e.isAutoHeaderHeight()?!0:this.isColumnInRowViewport(e)},t.prototype.isColumnInRowViewport=function(e){if(e.isAutoHeight())return!0;var o=e.getLeft()||0,n=o+e.getActualWidth(),i=this.viewportLeft-200,s=this.viewportRight+200,a=o<i&&n<i,l=o>s&&n>s;return!a&&!l},t.prototype.getDisplayedColumnsLeftWidth=function(){return this.getWidthOfColsInList(this.displayedColumnsLeft)},t.prototype.getDisplayedColumnsRightWidth=function(){return this.getWidthOfColsInList(this.displayedColumnsRight)},t.prototype.updatePrimaryColumnList=function(e,o,n,i,s,a){var l=this;if(a===void 0&&(a="api"),!(!e||Jt(e))){var c=!1;if(e.forEach(function(d){var p=l.getPrimaryColumn(d);if(p){if(n){if(o.indexOf(p)>=0)return;o.push(p)}else{if(o.indexOf(p)<0)return;uo(o,p)}i(p),c=!0}}),!!c){this.autoGroupsNeedBuilding&&this.updateGridColumns(),this.updateDisplayedColumns(a);var u={type:s,columns:o,column:o.length===1?o[0]:null,source:a};this.eventService.dispatchEvent(u)}}},t.prototype.setRowGroupColumns=function(e,o){o===void 0&&(o="api"),this.autoGroupsNeedBuilding=!0,this.setPrimaryColumnList(e,this.rowGroupColumns,w.EVENT_COLUMN_ROW_GROUP_CHANGED,!0,this.setRowGroupActive.bind(this),o)},t.prototype.setRowGroupActive=function(e,o,n){e!==o.isRowGroupActive()&&(o.setRowGroupActive(e,n),e&&!this.gridOptionsService.get("suppressRowGroupHidesColumns")&&this.setColumnVisible(o,!1,n),!e&&!this.gridOptionsService.get("suppressMakeColumnVisibleAfterUnGroup")&&this.setColumnVisible(o,!0,n))},t.prototype.addRowGroupColumn=function(e,o){o===void 0&&(o="api"),e&&this.addRowGroupColumns([e],o)},t.prototype.addRowGroupColumns=function(e,o){o===void 0&&(o="api"),this.autoGroupsNeedBuilding=!0,this.updatePrimaryColumnList(e,this.rowGroupColumns,!0,this.setRowGroupActive.bind(this,!0),w.EVENT_COLUMN_ROW_GROUP_CHANGED,o)},t.prototype.removeRowGroupColumns=function(e,o){o===void 0&&(o="api"),this.autoGroupsNeedBuilding=!0,this.updatePrimaryColumnList(e,this.rowGroupColumns,!1,this.setRowGroupActive.bind(this,!1),w.EVENT_COLUMN_ROW_GROUP_CHANGED,o)},t.prototype.removeRowGroupColumn=function(e,o){o===void 0&&(o="api"),e&&this.removeRowGroupColumns([e],o)},t.prototype.addPivotColumns=function(e,o){o===void 0&&(o="api"),this.updatePrimaryColumnList(e,this.pivotColumns,!0,function(n){return n.setPivotActive(!0,o)},w.EVENT_COLUMN_PIVOT_CHANGED,o)},t.prototype.setPivotColumns=function(e,o){o===void 0&&(o="api"),this.setPrimaryColumnList(e,this.pivotColumns,w.EVENT_COLUMN_PIVOT_CHANGED,!0,function(n,i){i.setPivotActive(n,o)},o)},t.prototype.addPivotColumn=function(e,o){o===void 0&&(o="api"),this.addPivotColumns([e],o)},t.prototype.removePivotColumns=function(e,o){o===void 0&&(o="api"),this.updatePrimaryColumnList(e,this.pivotColumns,!1,function(n){return n.setPivotActive(!1,o)},w.EVENT_COLUMN_PIVOT_CHANGED,o)},t.prototype.removePivotColumn=function(e,o){o===void 0&&(o="api"),this.removePivotColumns([e],o)},t.prototype.setPrimaryColumnList=function(e,o,n,i,s,a){var l=this;if(this.gridColumns){var c=new Map;o.forEach(function(u,d){return c.set(u,d)}),o.length=0,W(e)&&e.forEach(function(u){var d=l.getPrimaryColumn(u);d&&o.push(d)}),o.forEach(function(u,d){var p=c.get(u);if(p===void 0){c.set(u,0);return}i&&p!==d||c.delete(u)}),(this.primaryColumns||[]).forEach(function(u){var d=o.indexOf(u)>=0;s(d,u)}),this.autoGroupsNeedBuilding&&this.updateGridColumns(),this.updateDisplayedColumns(a),this.dispatchColumnChangedEvent(n,Mo([],Do(c.keys()),!1),a)}},t.prototype.setValueColumns=function(e,o){o===void 0&&(o="api"),this.setPrimaryColumnList(e,this.valueColumns,w.EVENT_COLUMN_VALUE_CHANGED,!1,this.setValueActive.bind(this),o)},t.prototype.setValueActive=function(e,o,n){if(e!==o.isValueActive()&&(o.setValueActive(e,n),e&&!o.getAggFunc())){var i=this.aggFuncService.getDefaultAggFunc(o);o.setAggFunc(i)}},t.prototype.addValueColumns=function(e,o){o===void 0&&(o="api"),this.updatePrimaryColumnList(e,this.valueColumns,!0,this.setValueActive.bind(this,!0),w.EVENT_COLUMN_VALUE_CHANGED,o)},t.prototype.addValueColumn=function(e,o){o===void 0&&(o="api"),e&&this.addValueColumns([e],o)},t.prototype.removeValueColumn=function(e,o){o===void 0&&(o="api"),this.removeValueColumns([e],o)},t.prototype.removeValueColumns=function(e,o){o===void 0&&(o="api"),this.updatePrimaryColumnList(e,this.valueColumns,!1,this.setValueActive.bind(this,!1),w.EVENT_COLUMN_VALUE_CHANGED,o)},t.prototype.normaliseColumnWidth=function(e,o){var n=e.getMinWidth();W(n)&&o<n&&(o=n);var i=e.getMaxWidth();return W(i)&&e.isGreaterThanMax(o)&&(o=i),o},t.prototype.getPrimaryOrGridColumn=function(e){var o=this.getPrimaryColumn(e);return o||this.getGridColumn(e)},t.prototype.setColumnWidths=function(e,o,n,i){var s=this;i===void 0&&(i="api");var a=[];e.forEach(function(l){var c=s.getPrimaryOrGridColumn(l.key);if(c){a.push({width:l.newWidth,ratios:[1],columns:[c]});var u=s.gridOptionsService.get("colResizeDefault")==="shift";if(u&&(o=!o),o){var d=s.getDisplayedColAfter(c);if(!d)return;var p=c.getActualWidth()-l.newWidth,h=d.getActualWidth()+p;a.push({width:h,ratios:[1],columns:[d]})}}}),a.length!==0&&this.resizeColumnSets({resizeSets:a,finished:n,source:i})},t.prototype.checkMinAndMaxWidthsForSet=function(e){var o=e.columns,n=e.width,i=0,s=0,a=!0;o.forEach(function(u){var d=u.getMinWidth();i+=d||0;var p=u.getMaxWidth();W(p)&&p>0?s+=p:a=!1});var l=n>=i,c=!a||n<=s;return l&&c},t.prototype.resizeColumnSets=function(e){var o=this,n=e.resizeSets,i=e.finished,s=e.source,a=!n||n.every(function(f){return o.checkMinAndMaxWidthsForSet(f)});if(!a){if(i){var l=n&&n.length>0?n[0].columns:null;this.dispatchColumnResizedEvent(l,i,s)}return}var c=[],u=[];n.forEach(function(f){var g=f.width,_=f.columns,C=f.ratios,E={},T={};_.forEach(function(F){return u.push(F)});for(var P=!0,A=0,b=function(){if(A++,A>1e3)return console.error("AG Grid: infinite loop in resizeColumnSets"),"break";P=!1;var F=[],U=0,k=g;_.forEach(function(z,V){var q=T[z.getId()];if(q)k-=E[z.getId()];else{F.push(z);var $=C[V];U+=$}});var M=1/U;F.forEach(function(z,V){var q=V===F.length-1,$;q?$=k:($=Math.round(C[V]*g*M),k-=$);var ce=z.getMinWidth(),me=z.getMaxWidth();W(ce)&&$<ce?($=ce,T[z.getId()]=!0,P=!0):W(me)&&me>0&&$>me&&($=me,T[z.getId()]=!0,P=!0),E[z.getId()]=$})};P;){var I=b();if(I==="break")break}_.forEach(function(F){var U=E[F.getId()],k=F.getActualWidth();k!==U&&(F.setActualWidth(U,s),c.push(F))})});var d=c.length>0,p=[];d&&(p=this.refreshFlexedColumns({resizingCols:u,skipSetLeft:!0}),this.setLeftValues(s),this.updateBodyWidths(),this.checkViewportColumns());var h=u.concat(p);(d||i)&&this.dispatchColumnResizedEvent(h,i,s,p)},t.prototype.setColumnAggFunc=function(e,o,n){if(n===void 0&&(n="api"),!!e){var i=this.getPrimaryColumn(e);i&&(i.setAggFunc(o),this.dispatchColumnChangedEvent(w.EVENT_COLUMN_VALUE_CHANGED,[i],n))}},t.prototype.moveRowGroupColumn=function(e,o,n){if(n===void 0&&(n="api"),!this.isRowGroupEmpty()){var i=this.rowGroupColumns[e],s=this.rowGroupColumns.slice(e,o);this.rowGroupColumns.splice(e,1),this.rowGroupColumns.splice(o,0,i);var a={type:w.EVENT_COLUMN_ROW_GROUP_CHANGED,columns:s,column:s.length===1?s[0]:null,source:n};this.eventService.dispatchEvent(a)}},t.prototype.moveColumns=function(e,o,n,i){if(n===void 0&&(n="api"),i===void 0&&(i=!0),!!this.gridColumns){if(this.columnAnimationService.start(),o>this.gridColumns.length-e.length){console.warn("AG Grid: tried to insert columns in invalid location, toIndex = "+o),console.warn("AG Grid: remember that you should not count the moving columns when calculating the new index");return}var s=this.getGridColumns(e),a=!this.doesMovePassRules(s,o);a||(yd(this.gridColumns,s,o),this.updateDisplayedColumns(n),this.dispatchColumnMovedEvent({movedColumns:s,source:n,toIndex:o,finished:i}),this.columnAnimationService.finish())}},t.prototype.doesMovePassRules=function(e,o){var n=this.getProposedColumnOrder(e,o);return this.doesOrderPassRules(n)},t.prototype.doesOrderPassRules=function(e){return!(!this.doesMovePassMarryChildren(e)||!this.doesMovePassLockedPositions(e))},t.prototype.getProposedColumnOrder=function(e,o){var n=this.gridColumns.slice();return yd(n,e,o),n},t.prototype.sortColumnsLikeGridColumns=function(e){var o=this;if(!(!e||e.length<=1)){var n=e.filter(function(i){return o.gridColumns.indexOf(i)<0}).length>0;n||e.sort(function(i,s){var a=o.gridColumns.indexOf(i),l=o.gridColumns.indexOf(s);return a-l})}},t.prototype.doesMovePassLockedPositions=function(e){var o=0,n=!0,i=function(s){return s?s===!0||s==="left"?0:2:1};return e.forEach(function(s){var a=i(s.getColDef().lockPosition);a<o&&(n=!1),o=a}),n},t.prototype.doesMovePassMarryChildren=function(e){var o=!0;return this.columnUtils.depthFirstOriginalTreeSearch(null,this.gridBalancedTree,function(n){if(n instanceof st){var i=n,s=i.getColGroupDef(),a=s&&s.marryChildren;if(a){var l=[];i.getLeafColumns().forEach(function(h){var f=e.indexOf(h);l.push(f)});var c=Math.max.apply(Math,l),u=Math.min.apply(Math,l),d=c-u,p=i.getLeafColumns().length-1;d>p&&(o=!1)}}}),o},t.prototype.moveColumn=function(e,o,n){n===void 0&&(n="api"),this.moveColumns([e],o,n)},t.prototype.moveColumnByIndex=function(e,o,n){if(n===void 0&&(n="api"),!!this.gridColumns){var i=this.gridColumns[e];this.moveColumn(i,o,n)}},t.prototype.getColumnDefs=function(){var e=this;if(this.primaryColumns){var o=this.primaryColumns.slice();return this.gridColsArePrimary?o.sort(function(n,i){return e.gridColumns.indexOf(n)-e.gridColumns.indexOf(i)}):this.lastPrimaryOrder&&o.sort(function(n,i){return e.lastPrimaryOrder.indexOf(n)-e.lastPrimaryOrder.indexOf(i)}),this.columnDefFactory.buildColumnDefs(o,this.rowGroupColumns,this.pivotColumns)}},t.prototype.getBodyContainerWidth=function(){return this.bodyWidth},t.prototype.getContainerWidth=function(e){switch(e){case"left":return this.leftWidth;case"right":return this.rightWidth;default:return this.bodyWidth}},t.prototype.updateBodyWidths=function(){var e=this.getWidthOfColsInList(this.displayedColumnsCenter),o=this.getWidthOfColsInList(this.displayedColumnsLeft),n=this.getWidthOfColsInList(this.displayedColumnsRight);this.bodyWidthDirty=this.bodyWidth!==e;var i=this.bodyWidth!==e||this.leftWidth!==o||this.rightWidth!==n;if(i){this.bodyWidth=e,this.leftWidth=o,this.rightWidth=n;var s={type:w.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED};this.eventService.dispatchEvent(s)}},t.prototype.getValueColumns=function(){return this.valueColumns?this.valueColumns:[]},t.prototype.getPivotColumns=function(){return this.pivotColumns?this.pivotColumns:[]},t.prototype.isPivotActive=function(){return this.pivotColumns&&this.pivotColumns.length>0&&this.pivotMode},t.prototype.getRowGroupColumns=function(){return this.rowGroupColumns?this.rowGroupColumns:[]},t.prototype.getDisplayedCenterColumns=function(){return this.displayedColumnsCenter},t.prototype.getDisplayedLeftColumns=function(){return this.displayedColumnsLeft},t.prototype.getDisplayedRightColumns=function(){return this.displayedColumnsRight},t.prototype.getDisplayedColumns=function(e){switch(e){case"left":return this.getDisplayedLeftColumns();case"right":return this.getDisplayedRightColumns();default:return this.getDisplayedCenterColumns()}},t.prototype.getAllPrimaryColumns=function(){return this.primaryColumns?this.primaryColumns.slice():null},t.prototype.getSecondaryColumns=function(){return this.secondaryColumns?this.secondaryColumns.slice():null},t.prototype.getAllColumnsForQuickFilter=function(){return this.columnsForQuickFilter},t.prototype.getAllGridColumns=function(){var e;return(e=this.gridColumns)!==null&&e!==void 0?e:[]},t.prototype.isEmpty=function(){return Jt(this.gridColumns)},t.prototype.isRowGroupEmpty=function(){return Jt(this.rowGroupColumns)},t.prototype.setColumnVisible=function(e,o,n){n===void 0&&(n="api"),this.setColumnsVisible([e],o,n)},t.prototype.setColumnsVisible=function(e,o,n){o===void 0&&(o=!1),n===void 0&&(n="api"),this.applyColumnState({state:e.map(function(i){return{colId:typeof i=="string"?i:i.getColId(),hide:!o}})},n)},t.prototype.setColumnPinned=function(e,o,n){n===void 0&&(n="api"),e&&this.setColumnsPinned([e],o,n)},t.prototype.setColumnsPinned=function(e,o,n){if(n===void 0&&(n="api"),!!this.gridColumns){if(this.gridOptionsService.isDomLayout("print")){console.warn("AG Grid: Changing the column pinning status is not allowed with domLayout='print'");return}this.columnAnimationService.start();var i;o===!0||o==="left"?i="left":o==="right"?i="right":i=null,this.actionOnGridColumns(e,function(s){return s.getPinned()!==i?(s.setPinned(i),!0):!1},n,function(){var s={type:w.EVENT_COLUMN_PINNED,pinned:i,column:null,columns:null,source:n};return s}),this.columnAnimationService.finish()}},t.prototype.actionOnGridColumns=function(e,o,n,i){var s=this;if(!Jt(e)){var a=[];if(e.forEach(function(c){var u=s.getGridColumn(c);if(u){var d=o(u);d!==!1&&a.push(u)}}),!!a.length&&(this.updateDisplayedColumns(n),W(i)&&i)){var l=i();l.columns=a,l.column=a.length===1?a[0]:null,this.eventService.dispatchEvent(l)}}},t.prototype.getDisplayedColBefore=function(e){var o=this.getAllDisplayedColumns(),n=o.indexOf(e);return n>0?o[n-1]:null},t.prototype.getDisplayedColAfter=function(e){var o=this.getAllDisplayedColumns(),n=o.indexOf(e);return n<o.length-1?o[n+1]:null},t.prototype.getDisplayedGroupAfter=function(e){return this.getDisplayedGroupAtDirection(e,"After")},t.prototype.getDisplayedGroupBefore=function(e){return this.getDisplayedGroupAtDirection(e,"Before")},t.prototype.getDisplayedGroupAtDirection=function(e,o){for(var n=e.getProvidedColumnGroup().getLevel()+e.getPaddingLevel(),i=e.getDisplayedLeafColumns(),s=o==="After"?Ge(i):i[0],a="getDisplayedCol".concat(o);;){var l=this[a](s);if(!l)return null;var c=this.getColumnGroupAtLevel(l,n);if(c!==e)return c}},t.prototype.getColumnGroupAtLevel=function(e,o){for(var n=e.getParent(),i,s;;){var a=n.getProvidedColumnGroup();if(i=a.getLevel(),s=n.getPaddingLevel(),i+s<=o)break;n=n.getParent()}return n},t.prototype.isPinningLeft=function(){return this.displayedColumnsLeft.length>0},t.prototype.isPinningRight=function(){return this.displayedColumnsRight.length>0},t.prototype.getPrimaryAndSecondaryAndAutoColumns=function(){var e;return(e=[]).concat.apply(e,[this.primaryColumns||[],this.groupAutoColumns||[],this.secondaryColumns||[]])},t.prototype.createStateItemFromColumn=function(e){var o=e.isRowGroupActive()?this.rowGroupColumns.indexOf(e):null,n=e.isPivotActive()?this.pivotColumns.indexOf(e):null,i=e.isValueActive()?e.getAggFunc():null,s=e.getSort()!=null?e.getSort():null,a=e.getSortIndex()!=null?e.getSortIndex():null,l=e.getFlex()!=null&&e.getFlex()>0?e.getFlex():null,c={colId:e.getColId(),width:e.getActualWidth(),hide:!e.isVisible(),pinned:e.getPinned(),sort:s,sortIndex:a,aggFunc:i,rowGroup:e.isRowGroupActive(),rowGroupIndex:o,pivot:e.isPivotActive(),pivotIndex:n,flex:l};return c},t.prototype.getColumnState=function(){if(pe(this.primaryColumns)||!this.isAlive())return[];var e=this.getPrimaryAndSecondaryAndAutoColumns(),o=e.map(this.createStateItemFromColumn.bind(this));return this.orderColumnStateList(o),o},t.prototype.orderColumnStateList=function(e){var o=Qn(this.gridColumns.map(function(n,i){return[n.getColId(),i]}));e.sort(function(n,i){var s=o.has(n.colId)?o.get(n.colId):-1,a=o.has(i.colId)?o.get(i.colId):-1;return s-a})},t.prototype.resetColumnState=function(e){var o=this;if(e===void 0&&(e="api"),!Jt(this.primaryColumns)){var n=this.getColumnsFromTree(this.primaryColumnTree),i=[],s=1e3,a=1e3,l=[];this.groupAutoColumns&&(l=l.concat(this.groupAutoColumns)),n&&(l=l.concat(n)),l.forEach(function(c){var u=o.getColumnStateFromColDef(c);pe(u.rowGroupIndex)&&u.rowGroup&&(u.rowGroupIndex=s++),pe(u.pivotIndex)&&u.pivot&&(u.pivotIndex=a++),i.push(u)}),this.applyColumnState({state:i,applyOrder:!0},e)}},t.prototype.getColumnStateFromColDef=function(e){var o=function(_,C){return _??C??null},n=e.getColDef(),i=o(n.sort,n.initialSort),s=o(n.sortIndex,n.initialSortIndex),a=o(n.hide,n.initialHide),l=o(n.pinned,n.initialPinned),c=o(n.width,n.initialWidth),u=o(n.flex,n.initialFlex),d=o(n.rowGroupIndex,n.initialRowGroupIndex),p=o(n.rowGroup,n.initialRowGroup);d==null&&(p==null||p==!1)&&(d=null,p=null);var h=o(n.pivotIndex,n.initialPivotIndex),f=o(n.pivot,n.initialPivot);h==null&&(f==null||f==!1)&&(h=null,f=null);var g=o(n.aggFunc,n.initialAggFunc);return{colId:e.getColId(),sort:i,sortIndex:s,hide:a,pinned:l,width:c,flex:u,rowGroup:p,rowGroupIndex:d,pivot:f,pivotIndex:h,aggFunc:g}},t.prototype.applyColumnState=function(e,o){var n=this;if(Jt(this.primaryColumns))return!1;if(e&&e.state&&!e.state.forEach)return console.warn("AG Grid: applyColumnState() - the state attribute should be an array, however an array was not found. Please provide an array of items (one for each col you want to change) for state."),!1;var i=function(c,u,d){var p=n.compareColumnStatesAndDispatchEvents(o);n.autoGroupsNeedBuilding=!0;var h=u.slice(),f={},g={},_=[],C=[],E=0,T=n.rowGroupColumns.slice(),P=n.pivotColumns.slice();c.forEach(function(F){var U=F.colId||"",k=U.startsWith(Hi);if(k){_.push(F),C.push(F);return}var M=d(U);M?(n.syncColumnWithStateItem(M,F,e.defaultState,f,g,!1,o),uo(h,M)):(C.push(F),E+=1)});var A=function(F){return n.syncColumnWithStateItem(F,null,e.defaultState,f,g,!1,o)};h.forEach(A);var b=function(F,U,k,M){var z=F[k.getId()],V=F[M.getId()],q=z!=null,$=V!=null;if(q&&$)return z-V;if(q)return-1;if($)return 1;var ce=U.indexOf(k),me=U.indexOf(M),Ve=ce>=0,Qe=me>=0;return Ve&&Qe?ce-me:Ve?-1:1};n.rowGroupColumns.sort(b.bind(n,f,T)),n.pivotColumns.sort(b.bind(n,g,P)),n.updateGridColumns();var I=n.groupAutoColumns?n.groupAutoColumns.slice():[];return _.forEach(function(F){var U=n.getAutoColumn(F.colId);uo(I,U),n.syncColumnWithStateItem(U,F,e.defaultState,null,null,!0,o)}),I.forEach(A),n.applyOrderAfterApplyState(e),n.updateDisplayedColumns(o),n.dispatchEverythingChanged(o),p(),{unmatchedAndAutoStates:C,unmatchedCount:E}};this.columnAnimationService.start();var s=i(e.state||[],this.primaryColumns||[],function(c){return n.getPrimaryColumn(c)}),a=s.unmatchedAndAutoStates,l=s.unmatchedCount;return(a.length>0||W(e.defaultState))&&(l=i(a,this.secondaryColumns||[],function(c){return n.getSecondaryColumn(c)}).unmatchedCount),this.columnAnimationService.finish(),l===0},t.prototype.applyOrderAfterApplyState=function(e){var o=this;if(!(!e.applyOrder||!e.state)){var n=[],i={};e.state.forEach(function(a){if(!(!a.colId||i[a.colId])){var l=o.gridColumnsMap[a.colId];l&&(n.push(l),i[a.colId]=!0)}});var s=0;if(this.gridColumns.forEach(function(a){var l=a.getColId(),c=i[l]!=null;if(!c){var u=l.startsWith(Hi);u?$s(n,a,s++):n.push(a)}}),n=this.placeLockedColumns(n),!this.doesMovePassMarryChildren(n)){console.warn("AG Grid: Applying column order broke a group where columns should be married together. Applying new order has been discarded.");return}this.gridColumns=n}},t.prototype.compareColumnStatesAndDispatchEvents=function(e){var o=this,n={rowGroupColumns:this.rowGroupColumns.slice(),pivotColumns:this.pivotColumns.slice(),valueColumns:this.valueColumns.slice()},i=this.getColumnState(),s={};return i.forEach(function(a){s[a.colId]=a}),function(){var a=o.getPrimaryAndSecondaryAndAutoColumns(),l=function(C,E,T,P){var A=E.map(P),b=T.map(P),I=Tn(A,b);if(!I){var F=new Set(E);T.forEach(function(M){F.delete(M)||F.add(M)});var U=Mo([],Do(F),!1),k={type:C,columns:U,column:U.length===1?U[0]:null,source:e};o.eventService.dispatchEvent(k)}},c=function(C){var E=[];return a.forEach(function(T){var P=s[T.getColId()];P&&C(P,T)&&E.push(T)}),E},u=function(C){return C.getColId()};l(w.EVENT_COLUMN_ROW_GROUP_CHANGED,n.rowGroupColumns,o.rowGroupColumns,u),l(w.EVENT_COLUMN_PIVOT_CHANGED,n.pivotColumns,o.pivotColumns,u);var d=function(C,E){var T=C.aggFunc!=null,P=T!=E.isValueActive(),A=T&&C.aggFunc!=E.getAggFunc();return P||A},p=c(d);p.length>0&&o.dispatchColumnChangedEvent(w.EVENT_COLUMN_VALUE_CHANGED,p,e);var h=function(C,E){return C.width!=E.getActualWidth()};o.dispatchColumnResizedEvent(c(h),!0,e);var f=function(C,E){return C.pinned!=E.getPinned()};o.dispatchColumnPinnedEvent(c(f),e);var g=function(C,E){return C.hide==E.isVisible()};o.dispatchColumnVisibleEvent(c(g),e);var _=function(C,E){return C.sort!=E.getSort()||C.sortIndex!=E.getSortIndex()};c(_).length>0&&o.sortController.dispatchSortChangedEvents(e),o.normaliseColumnMovedEventForColumnState(i,e)}},t.prototype.getCommonValue=function(e,o){if(!(!e||e.length==0)){for(var n=o(e[0]),i=1;i<e.length;i++)if(n!==o(e[i]))return;return n}},t.prototype.normaliseColumnMovedEventForColumnState=function(e,o){var n=this,i=this.getColumnState(),s={};i.forEach(function(d){return s[d.colId]=d});var a={};e.forEach(function(d){s[d.colId]&&(a[d.colId]=!0)});var l=e.filter(function(d){return a[d.colId]}),c=i.filter(function(d){return a[d.colId]}),u=[];c.forEach(function(d,p){var h=l&&l[p];if(h&&h.colId!==d.colId){var f=n.getGridColumn(h.colId);f&&u.push(f)}}),u.length&&this.dispatchColumnMovedEvent({movedColumns:u,source:o,finished:!0})},t.prototype.syncColumnWithStateItem=function(e,o,n,i,s,a,l){if(e){var c=function(U,k){var M={value1:void 0,value2:void 0},z=!1;return o&&(o[U]!==void 0&&(M.value1=o[U],z=!0),W(k)&&o[k]!==void 0&&(M.value2=o[k],z=!0)),!z&&n&&(n[U]!==void 0&&(M.value1=n[U]),W(k)&&n[k]!==void 0&&(M.value2=n[k])),M},u=c("hide").value1;u!==void 0&&e.setVisible(!u,l);var d=c("pinned").value1;d!==void 0&&e.setPinned(d);var p=this.columnUtils.calculateColMinWidth(e.getColDef()),h=c("flex").value1;h!==void 0&&e.setFlex(h);var f=e.getFlex()<=0;if(f){var g=c("width").value1;g!=null&&p!=null&&g>=p&&e.setActualWidth(g,l)}var _=c("sort").value1;_!==void 0&&(_==="desc"||_==="asc"?e.setSort(_,l):e.setSort(void 0,l));var C=c("sortIndex").value1;if(C!==void 0&&e.setSortIndex(C),!(a||!e.isPrimary())){var E=c("aggFunc").value1;E!==void 0&&(typeof E=="string"?(e.setAggFunc(E),e.isValueActive()||(e.setValueActive(!0,l),this.valueColumns.push(e))):(W(E)&&console.warn("AG Grid: stateItem.aggFunc must be a string. if using your own aggregation functions, register the functions first before using them in get/set state. This is because it is intended for the column state to be stored and retrieved as simple JSON."),e.isValueActive()&&(e.setValueActive(!1,l),uo(this.valueColumns,e))));var T=c("rowGroup","rowGroupIndex"),P=T.value1,A=T.value2;(P!==void 0||A!==void 0)&&(typeof A=="number"||P?(e.isRowGroupActive()||(e.setRowGroupActive(!0,l),this.rowGroupColumns.push(e)),i&&typeof A=="number"&&(i[e.getId()]=A)):e.isRowGroupActive()&&(e.setRowGroupActive(!1,l),uo(this.rowGroupColumns,e)));var b=c("pivot","pivotIndex"),I=b.value1,F=b.value2;(I!==void 0||F!==void 0)&&(typeof F=="number"||I?(e.isPivotActive()||(e.setPivotActive(!0,l),this.pivotColumns.push(e)),s&&typeof F=="number"&&(s[e.getId()]=F)):e.isPivotActive()&&(e.setPivotActive(!1,l),uo(this.pivotColumns,e)))}}},t.prototype.getGridColumns=function(e){return this.getColumns(e,this.getGridColumn.bind(this))},t.prototype.getColumns=function(e,o){var n=[];return e&&e.forEach(function(i){var s=o(i);s&&n.push(s)}),n},t.prototype.getColumnWithValidation=function(e){if(e==null)return null;var o=this.getGridColumn(e);return o||console.warn("AG Grid: could not find column "+e),o},t.prototype.getPrimaryColumn=function(e){return this.primaryColumns?this.getColumn(e,this.primaryColumns,this.primaryColumnsMap):null},t.prototype.getGridColumn=function(e){return this.getColumn(e,this.gridColumns,this.gridColumnsMap)},t.prototype.lookupGridColumn=function(e){return this.gridColumnsMap[e]},t.prototype.getSecondaryColumn=function(e){return this.secondaryColumns?this.getColumn(e,this.secondaryColumns,this.secondaryColumnsMap):null},t.prototype.getColumn=function(e,o,n){if(!e||!n)return null;if(typeof e=="string"&&n[e])return n[e];for(var i=0;i<o.length;i++)if(this.columnsMatch(o[i],e))return o[i];return this.getAutoColumn(e)},t.prototype.getSourceColumnsForGroupColumn=function(e){var o=e.getColDef().showRowGroup;if(!o)return null;if(o===!0)return this.rowGroupColumns.slice(0);var n=this.getPrimaryColumn(o);return n?[n]:null},t.prototype.getAutoColumn=function(e){var o=this;return!this.groupAutoColumns||!W(this.groupAutoColumns)||pe(this.groupAutoColumns)?null:this.groupAutoColumns.find(function(n){return o.columnsMatch(n,e)})||null},t.prototype.columnsMatch=function(e,o){var n=e===o,i=e.getColDef()===o,s=e.getColId()==o;return n||i||s},t.prototype.getDisplayNameForColumn=function(e,o,n){if(n===void 0&&(n=!1),!e)return null;var i=this.getHeaderName(e.getColDef(),e,null,null,o);return n?this.wrapHeaderNameWithAggFunc(e,i):i},t.prototype.getDisplayNameForProvidedColumnGroup=function(e,o,n){var i=o?o.getColGroupDef():null;return i?this.getHeaderName(i,null,e,o,n):null},t.prototype.getDisplayNameForColumnGroup=function(e,o){return this.getDisplayNameForProvidedColumnGroup(e,e.getProvidedColumnGroup(),o)},t.prototype.getHeaderName=function(e,o,n,i,s){var a=e.headerValueGetter;if(a){var l={colDef:e,column:o,columnGroup:n,providedColumnGroup:i,location:s,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context};return typeof a=="function"?a(l):typeof a=="string"?this.expressionService.evaluate(a,l):(console.warn("AG Grid: headerValueGetter must be a function or a string"),"")}else{if(e.headerName!=null)return e.headerName;if(e.field)return jy(e.field)}return""},t.prototype.wrapHeaderNameWithAggFunc=function(e,o){if(this.gridOptionsService.get("suppressAggFuncInHeader"))return o;var n=e.getColDef().pivotValueColumn,i=W(n),s=null,a;if(i){var l=this.gridOptionsService.get("removePivotHeaderRowWhenSingleValueColumn")&&this.valueColumns.length===1,c=e.getColDef().pivotTotalColumnIds!==void 0;if(l&&!c)return o;s=n?n.getAggFunc():null,a=!0}else{var u=e.isValueActive(),d=this.pivotMode||!this.isRowGroupEmpty();u&&d?(s=e.getAggFunc(),a=!0):a=!1}if(a){var p=typeof s=="string"?s:"func",h=this.localeService.getLocaleTextFunc(),f=h(p,p);return"".concat(f,"(").concat(o,")")}return o},t.prototype.getColumnGroup=function(e,o){if(!e)return null;if(e instanceof vt)return e;var n=this.getAllDisplayedTrees(),i=typeof o=="number",s=null;return this.columnUtils.depthFirstAllColumnTreeSearch(n,function(a){if(a instanceof vt){var l=a,c=void 0;i?c=e===l.getGroupId()&&o===l.getPartId():c=e===l.getGroupId(),c&&(s=l)}}),s},t.prototype.isReady=function(){return this.ready},t.prototype.extractValueColumns=function(e,o){this.valueColumns=this.extractColumns(o,this.valueColumns,function(n,i){return n.setValueActive(i,e)},function(){},function(){},function(n){var i=n.aggFunc;if(i===null||i==="")return null;if(i!==void 0)return!!i},function(n){return n.initialAggFunc!=null&&n.initialAggFunc!=""}),this.valueColumns.forEach(function(n){var i=n.getColDef();i.aggFunc!=null&&i.aggFunc!=""?n.setAggFunc(i.aggFunc):n.getAggFunc()||n.setAggFunc(i.initialAggFunc)})},t.prototype.extractRowGroupColumns=function(e,o){this.rowGroupColumns=this.extractColumns(o,this.rowGroupColumns,function(n,i){return n.setRowGroupActive(i,e)},function(n){return n.rowGroupIndex},function(n){return n.initialRowGroupIndex},function(n){return n.rowGroup},function(n){return n.initialRowGroup})},t.prototype.extractColumns=function(e,o,n,i,s,a,l){e===void 0&&(e=[]),o===void 0&&(o=[]);var c=[],u=[];(this.primaryColumns||[]).forEach(function(h){var f=e.indexOf(h)<0,g=h.getColDef(),_=yl(a(g)),C=yl(l(g)),E=ei(i(g)),T=ei(s(g)),P,A=_!==void 0,b=E!==void 0,I=C!==void 0,F=T!==void 0;if(A?P=_:b?E===null?P=!1:P=E>=0:f?I?P=C:F?P=T!=null&&T>=0:P=!1:P=o.indexOf(h)>=0,P){var U=f?E!=null||T!=null:E!=null;U?c.push(h):u.push(h)}});var d=function(h){var f=i(h.getColDef()),g=s(h.getColDef());return f??g};c.sort(function(h,f){var g=d(h),_=d(f);return g===_?0:g<_?-1:1});var p=[].concat(c);return o.forEach(function(h){u.indexOf(h)>=0&&p.push(h)}),u.forEach(function(h){p.indexOf(h)<0&&p.push(h)}),o.forEach(function(h){p.indexOf(h)<0&&n(h,!1)}),p.forEach(function(h){o.indexOf(h)<0&&n(h,!0)}),p},t.prototype.extractPivotColumns=function(e,o){this.pivotColumns=this.extractColumns(o,this.pivotColumns,function(n,i){return n.setPivotActive(i,e)},function(n){return n.pivotIndex},function(n){return n.initialPivotIndex},function(n){return n.pivot},function(n){return n.initialPivot})},t.prototype.resetColumnGroupState=function(e){if(e===void 0&&(e="api"),!!this.primaryColumnTree){var o=[];this.columnUtils.depthFirstOriginalTreeSearch(null,this.primaryColumnTree,function(n){if(n instanceof st){var i=n.getColGroupDef(),s={groupId:n.getGroupId(),open:i?i.openByDefault:void 0};o.push(s)}}),this.setColumnGroupState(o,e)}},t.prototype.getColumnGroupState=function(){var e=[];return this.columnUtils.depthFirstOriginalTreeSearch(null,this.gridBalancedTree,function(o){o instanceof st&&e.push({groupId:o.getGroupId(),open:o.isExpanded()})}),e},t.prototype.setColumnGroupState=function(e,o){var n=this;if(o===void 0&&(o="api"),!!this.gridBalancedTree){this.columnAnimationService.start();var i=[];if(e.forEach(function(a){var l=a.groupId,c=a.open,u=n.getProvidedColumnGroup(l);u&&u.isExpanded()!==c&&(n.logger.log("columnGroupOpened("+u.getGroupId()+","+c+")"),u.setExpanded(c),i.push(u))}),this.updateGroupsAndDisplayedColumns(o),this.setFirstRightAndLastLeftPinned(o),i.length){var s={type:w.EVENT_COLUMN_GROUP_OPENED,columnGroup:st.length===1?i[0]:void 0,columnGroups:i};this.eventService.dispatchEvent(s)}this.columnAnimationService.finish()}},t.prototype.setColumnGroupOpened=function(e,o,n){n===void 0&&(n="api");var i;e instanceof st?i=e.getId():i=e||"",this.setColumnGroupState([{groupId:i,open:o}],n)},t.prototype.getProvidedColumnGroup=function(e){typeof e!="string"&&console.error("AG Grid: group key must be a string");var o=null;return this.columnUtils.depthFirstOriginalTreeSearch(null,this.gridBalancedTree,function(n){n instanceof st&&n.getId()===e&&(o=n)}),o},t.prototype.calculateColumnsForDisplay=function(){var e=this,o;return this.pivotMode&&pe(this.secondaryColumns)?o=this.gridColumns.filter(function(n){var i=e.groupAutoColumns&&To(e.groupAutoColumns,n),s=e.valueColumns&&To(e.valueColumns,n);return i||s}):o=this.gridColumns.filter(function(n){var i=e.groupAutoColumns&&To(e.groupAutoColumns,n);return i||n.isVisible()}),o},t.prototype.checkColSpanActiveInCols=function(e){var o=!1;return e.forEach(function(n){W(n.getColDef().colSpan)&&(o=!0)}),o},t.prototype.calculateColumnsForGroupDisplay=function(){var e=this;this.groupDisplayColumns=[],this.groupDisplayColumnsMap={};var o=function(n){var i=n.getColDef(),s=i.showRowGroup;i&&W(s)&&(e.groupDisplayColumns.push(n),typeof s=="string"?e.groupDisplayColumnsMap[s]=n:s===!0&&e.getRowGroupColumns().forEach(function(a){e.groupDisplayColumnsMap[a.getId()]=n}))};this.gridColumns.forEach(o)},t.prototype.getGroupDisplayColumns=function(){return this.groupDisplayColumns},t.prototype.getGroupDisplayColumnForGroup=function(e){return this.groupDisplayColumnsMap[e]},t.prototype.updateDisplayedColumns=function(e){var o=this.calculateColumnsForDisplay();this.buildDisplayedTrees(o),this.updateGroupsAndDisplayedColumns(e),this.setFirstRightAndLastLeftPinned(e)},t.prototype.isSecondaryColumnsPresent=function(){return W(this.secondaryColumns)},t.prototype.setSecondaryColumns=function(e,o){var n=this;if(o===void 0&&(o="api"),!!this.gridColumns){var i=e&&e.length>0;if(!(!i&&pe(this.secondaryColumns))){if(i){this.processSecondaryColumnDefinitions(e);var s=this.columnFactory.createColumnTree(e,!1,this.secondaryBalancedTree||this.previousSecondaryColumns||void 0);this.destroyOldColumns(this.secondaryBalancedTree,s.columnTree),this.secondaryBalancedTree=s.columnTree,this.secondaryHeaderRowCount=s.treeDept+1,this.secondaryColumns=this.getColumnsFromTree(this.secondaryBalancedTree),this.secondaryColumnsMap={},this.secondaryColumns.forEach(function(a){return n.secondaryColumnsMap[a.getId()]=a}),this.previousSecondaryColumns=null}else this.previousSecondaryColumns=this.secondaryBalancedTree,this.secondaryBalancedTree=null,this.secondaryHeaderRowCount=-1,this.secondaryColumns=null,this.secondaryColumnsMap={};this.updateGridColumns(),this.updateDisplayedColumns(o)}}},t.prototype.processSecondaryColumnDefinitions=function(e){var o=this.gridOptionsService.get("processPivotResultColDef"),n=this.gridOptionsService.get("processPivotResultColGroupDef");if(!(!o&&!n)){var i=function(s){s.forEach(function(a){var l=W(a.children);if(l){var c=a;n&&n(c),i(c.children)}else{var u=a;o&&o(u)}})};e&&i(e)}},t.prototype.updateGridColumns=function(){var e=this,o=this.gridBalancedTree;this.gridColsArePrimary?this.lastPrimaryOrder=this.gridColumns:this.lastSecondaryOrder=this.gridColumns;var n;if(this.secondaryColumns&&this.secondaryBalancedTree){var i=this.secondaryColumns.every(function(c){return e.gridColumnsMap[c.getColId()]!==void 0});this.gridBalancedTree=this.secondaryBalancedTree.slice(),this.gridHeaderRowCount=this.secondaryHeaderRowCount,this.gridColumns=this.secondaryColumns.slice(),this.gridColsArePrimary=!1,i&&(n=this.lastSecondaryOrder)}else this.primaryColumns&&(this.gridBalancedTree=this.primaryColumnTree.slice(),this.gridHeaderRowCount=this.primaryHeaderRowCount,this.gridColumns=this.primaryColumns.slice(),this.gridColsArePrimary=!0,n=this.lastPrimaryOrder);var s=this.createGroupAutoColumnsIfNeeded();if(s&&n){var a=Qn(this.groupAutoColumns.map(function(c){return[c,!0]}));n=n.filter(function(c){return!a.has(c)}),n=Mo(Mo([],Do(this.groupAutoColumns),!1),Do(n),!1)}if(this.addAutoGroupToGridColumns(),this.orderGridColsLike(n),this.gridColumns=this.placeLockedColumns(this.gridColumns),this.calculateColumnsForGroupDisplay(),this.refreshQuickFilterColumns(),this.clearDisplayedAndViewportColumns(),this.colSpanActive=this.checkColSpanActiveInCols(this.gridColumns),this.gridColumnsMap={},this.gridColumns.forEach(function(c){return e.gridColumnsMap[c.getId()]=c}),this.setAutoHeightActive(),!Tn(o,this.gridBalancedTree)){var l={type:w.EVENT_GRID_COLUMNS_CHANGED};this.eventService.dispatchEvent(l)}},t.prototype.setAutoHeightActive=function(){if(this.autoHeightActive=this.gridColumns.filter(function(o){return o.isAutoHeight()}).length>0,this.autoHeightActive){this.autoHeightActiveAtLeastOnce=!0;var e=this.gridOptionsService.isRowModelType("clientSide")||this.gridOptionsService.isRowModelType("serverSide");e||Ee("autoHeight columns only work with Client Side Row Model and Server Side Row Model.")}},t.prototype.orderGridColsLike=function(e){if(!pe(e)){var o=Qn(e.map(function(u,d){return[u,d]})),n=!0;if(this.gridColumns.forEach(function(u){o.has(u)&&(n=!1)}),!n){var i=Qn(this.gridColumns.map(function(u){return[u,!0]})),s=e.filter(function(u){return i.has(u)}),a=Qn(s.map(function(u){return[u,!0]})),l=this.gridColumns.filter(function(u){return!a.has(u)}),c=s.slice();l.forEach(function(u){var d=u.getOriginalParent();if(!d){c.push(u);return}for(var p=[];!p.length&&d;){var h=d.getLeafColumns();h.forEach(function(_){var C=c.indexOf(_)>=0,E=p.indexOf(_)<0;C&&E&&p.push(_)}),d=d.getOriginalParent()}if(!p.length){c.push(u);return}var f=p.map(function(_){return c.indexOf(_)}),g=Math.max.apply(Math,Mo([],Do(f),!1));$s(c,u,g+1)}),this.gridColumns=c}}},t.prototype.isPrimaryColumnGroupsPresent=function(){return this.primaryHeaderRowCount>1},t.prototype.refreshQuickFilterColumns=function(){var e,o=(e=this.isPivotMode()?this.secondaryColumns:this.primaryColumns)!==null&&e!==void 0?e:[];this.groupAutoColumns&&(o=o.concat(this.groupAutoColumns)),this.columnsForQuickFilter=this.gridOptionsService.get("includeHiddenColumnsInQuickFilter")?o:o.filter(function(n){return n.isVisible()||n.isRowGroupActive()})},t.prototype.placeLockedColumns=function(e){var o=[],n=[],i=[];return e.forEach(function(s){var a=s.getColDef().lockPosition;a==="right"?i.push(s):a==="left"||a===!0?o.push(s):n.push(s)}),Mo(Mo(Mo([],Do(o),!1),Do(n),!1),Do(i),!1)},t.prototype.addAutoGroupToGridColumns=function(){if(pe(this.groupAutoColumns)){this.destroyOldColumns(this.groupAutoColsBalancedTree),this.groupAutoColsBalancedTree=null;return}this.gridColumns=this.groupAutoColumns?this.groupAutoColumns.concat(this.gridColumns):this.gridColumns;var e=this.columnFactory.createForAutoGroups(this.groupAutoColumns,this.gridBalancedTree);this.destroyOldColumns(this.groupAutoColsBalancedTree,e),this.groupAutoColsBalancedTree=e,this.gridBalancedTree=e.concat(this.gridBalancedTree)},t.prototype.clearDisplayedAndViewportColumns=function(){this.viewportRowLeft={},this.viewportRowRight={},this.viewportRowCenter={},this.displayedColumnsLeft=[],this.displayedColumnsRight=[],this.displayedColumnsCenter=[],this.displayedColumns=[],this.viewportColumns=[],this.headerViewportColumns=[],this.viewportColumnsHash=""},t.prototype.updateGroupsAndDisplayedColumns=function(e){this.updateOpenClosedVisibilityInColumnGroups(),this.deriveDisplayedColumns(e),this.refreshFlexedColumns(),this.extractViewport(),this.updateBodyWidths();var o={type:w.EVENT_DISPLAYED_COLUMNS_CHANGED};this.eventService.dispatchEvent(o)},t.prototype.deriveDisplayedColumns=function(e){this.derivedDisplayedColumnsFromDisplayedTree(this.displayedTreeLeft,this.displayedColumnsLeft),this.derivedDisplayedColumnsFromDisplayedTree(this.displayedTreeCentre,this.displayedColumnsCenter),this.derivedDisplayedColumnsFromDisplayedTree(this.displayedTreeRight,this.displayedColumnsRight),this.joinDisplayedColumns(),this.setLeftValues(e),this.displayedAutoHeightCols=this.displayedColumns.filter(function(o){return o.isAutoHeight()})},t.prototype.isAutoRowHeightActive=function(){return this.autoHeightActive},t.prototype.wasAutoRowHeightEverActive=function(){return this.autoHeightActiveAtLeastOnce},t.prototype.joinDisplayedColumns=function(){this.gridOptionsService.get("enableRtl")?this.displayedColumns=this.displayedColumnsRight.concat(this.displayedColumnsCenter).concat(this.displayedColumnsLeft):this.displayedColumns=this.displayedColumnsLeft.concat(this.displayedColumnsCenter).concat(this.displayedColumnsRight)},t.prototype.setLeftValues=function(e){this.setLeftValuesOfColumns(e),this.setLeftValuesOfGroups()},t.prototype.setLeftValuesOfColumns=function(e){var o=this;if(this.primaryColumns){var n=this.primaryColumns.slice(0),i=this.gridOptionsService.get("enableRtl");[this.displayedColumnsLeft,this.displayedColumnsRight,this.displayedColumnsCenter].forEach(function(s){if(i){var a=o.getWidthOfColsInList(s);s.forEach(function(c){a-=c.getActualWidth(),c.setLeft(a,e)})}else{var l=0;s.forEach(function(c){c.setLeft(l,e),l+=c.getActualWidth()})}Fy(n,s)}),n.forEach(function(s){s.setLeft(null,e)})}},t.prototype.setLeftValuesOfGroups=function(){[this.displayedTreeLeft,this.displayedTreeRight,this.displayedTreeCentre].forEach(function(e){e.forEach(function(o){if(o instanceof vt){var n=o;n.checkLeft()}})})},t.prototype.derivedDisplayedColumnsFromDisplayedTree=function(e,o){o.length=0,this.columnUtils.depthFirstDisplayedColumnTreeSearch(e,function(n){n instanceof We&&o.push(n)})},t.prototype.extractViewportColumns=function(){this.suppressColumnVirtualisation?(this.viewportColumnsCenter=this.displayedColumnsCenter,this.headerViewportColumnsCenter=this.displayedColumnsCenter):(this.viewportColumnsCenter=this.displayedColumnsCenter.filter(this.isColumnInRowViewport.bind(this)),this.headerViewportColumnsCenter=this.displayedColumnsCenter.filter(this.isColumnInHeaderViewport.bind(this))),this.viewportColumns=this.viewportColumnsCenter.concat(this.displayedColumnsLeft).concat(this.displayedColumnsRight),this.headerViewportColumns=this.headerViewportColumnsCenter.concat(this.displayedColumnsLeft).concat(this.displayedColumnsRight)},t.prototype.getVirtualHeaderGroupRow=function(e,o){var n;switch(e){case"left":n=this.viewportRowLeft[o];break;case"right":n=this.viewportRowRight[o];break;default:n=this.viewportRowCenter[o];break}return pe(n)&&(n=[]),n},t.prototype.calculateHeaderRows=function(){this.viewportRowLeft={},this.viewportRowRight={},this.viewportRowCenter={};var e={};this.headerViewportColumns.forEach(function(n){return e[n.getId()]=!0});var o=function(n,i,s){for(var a=!1,l=0;l<n.length;l++){var c=n[l],u=!1;if(c instanceof We)u=e[c.getId()]===!0;else{var d=c,p=d.getDisplayedChildren();p&&(u=o(p,i,s+1))}u&&(a=!0,i[s]||(i[s]=[]),i[s].push(c))}return a};o(this.displayedTreeLeft,this.viewportRowLeft,0),o(this.displayedTreeRight,this.viewportRowRight,0),o(this.displayedTreeCentre,this.viewportRowCenter,0)},t.prototype.extractViewport=function(){var e=function(i){return"".concat(i.getId(),"-").concat(i.getPinned()||"normal")};this.extractViewportColumns();var o=this.viewportColumns.map(e).join("#"),n=this.viewportColumnsHash!==o;return n&&(this.viewportColumnsHash=o,this.calculateHeaderRows()),n},t.prototype.refreshFlexedColumns=function(e){var o;e===void 0&&(e={});var n=e.source?e.source:"flex";if(e.viewportWidth!=null&&(this.flexViewportWidth=e.viewportWidth),!this.flexViewportWidth)return[];var i=-1;if(e.resizingCols){for(var s=new Set(e.resizingCols),a=this.displayedColumnsCenter,l=a.length-1;l>=0;l--)if(s.has(a[l])){i=l;break}}for(var c=0,u=[],d=0,p=0,l=0;l<this.displayedColumnsCenter.length;l++){var h=this.displayedColumnsCenter[l].getFlex()&&l>i;h?(u.push(this.displayedColumnsCenter[l]),p+=this.displayedColumnsCenter[l].getFlex(),d+=(o=this.displayedColumnsCenter[l].getMinWidth())!==null&&o!==void 0?o:0):c+=this.displayedColumnsCenter[l].getActualWidth()}if(!u.length)return[];var f=[];c+d>this.flexViewportWidth&&(u.forEach(function(F){var U;return F.setActualWidth((U=F.getMinWidth())!==null&&U!==void 0?U:0,n)}),f=u,u=[]);var g=[],_;e:for(;;){_=this.flexViewportWidth-c;for(var C=_/p,l=0;l<u.length;l++){var E=u[l],T=C*E.getFlex(),P=0,A=E.getMinWidth(),b=E.getMaxWidth();if(W(A)&&T<A?P=A:W(b)&&T>b&&(P=b),P){E.setActualWidth(P,n),Vp(u,E),p-=E.getFlex(),f.push(E),c+=E.getActualWidth();continue e}g[l]=Math.round(T)}break}var I=_;return u.forEach(function(F,U){F.setActualWidth(Math.min(g[U],I),n),f.push(F),I-=g[U]}),e.skipSetLeft||this.setLeftValues(n),e.updateBodyWidths&&this.updateBodyWidths(),e.fireResizedEvent&&this.dispatchColumnResizedEvent(f,!0,n,u),u},t.prototype.sizeColumnsToFit=function(e,o,n,i){var s=this,a,l,c,u,d;if(o===void 0&&(o="sizeColumnsToFit"),this.shouldQueueResizeOperations){this.resizeOperationQueue.push(function(){return s.sizeColumnsToFit(e,o,n,i)});return}var p={};i&&((a=i==null?void 0:i.columnLimits)===null||a===void 0||a.forEach(function(me){var Ve=me.key,Qe=Y2(me,["key"]);p[typeof Ve=="string"?Ve:Ve.getColId()]=Qe}));var h=this.getAllDisplayedColumns(),f=e===this.getWidthOfColsInList(h);if(!(e<=0||!h.length||f)){var g=[],_=[];h.forEach(function(me){me.getColDef().suppressSizeToFit===!0?_.push(me):g.push(me)});var C=g.slice(0),E=!1,T=function(me){uo(g,me),_.push(me)};for(g.forEach(function(me){var Ve,Qe;me.resetActualWidth(o);var nt=p==null?void 0:p[me.getId()],fe=(Ve=nt==null?void 0:nt.minWidth)!==null&&Ve!==void 0?Ve:i==null?void 0:i.defaultMinWidth,Y=(Qe=nt==null?void 0:nt.maxWidth)!==null&&Qe!==void 0?Qe:i==null?void 0:i.defaultMaxWidth,ye=me.getActualWidth();typeof fe=="number"&&ye<fe?me.setActualWidth(fe,o,!0):typeof Y=="number"&&ye>Y&&me.setActualWidth(Y,o,!0)});!E;){E=!0;var P=e-this.getWidthOfColsInList(_);if(P<=0)g.forEach(function(me){var Ve,Qe,nt=(Qe=(Ve=p==null?void 0:p[me.getId()])===null||Ve===void 0?void 0:Ve.minWidth)!==null&&Qe!==void 0?Qe:i==null?void 0:i.defaultMinWidth;if(typeof nt=="number"){me.setActualWidth(nt,o,!0);return}me.setMinimum(o)});else for(var A=P/this.getWidthOfColsInList(g),b=P,I=g.length-1;I>=0;I--){var F=g[I],U=p==null?void 0:p[F.getId()],k=(l=U==null?void 0:U.minWidth)!==null&&l!==void 0?l:i==null?void 0:i.defaultMinWidth,M=(c=U==null?void 0:U.maxWidth)!==null&&c!==void 0?c:i==null?void 0:i.defaultMaxWidth,z=(u=F.getMinWidth())!==null&&u!==void 0?u:0,V=(d=F.getMaxWidth())!==null&&d!==void 0?d:Number.MAX_VALUE,q=typeof k=="number"&&k>z?k:F.getMinWidth(),$=typeof M=="number"&&M<V?M:F.getMaxWidth(),ce=Math.round(F.getActualWidth()*A);W(q)&&ce<q?(ce=q,T(F),E=!1):W($)&&ce>$?(ce=$,T(F),E=!1):I===0&&(ce=b),F.setActualWidth(ce,o,!0),b-=ce}}C.forEach(function(me){me.fireColumnWidthChangedEvent(o)}),this.setLeftValues(o),this.updateBodyWidths(),!n&&this.dispatchColumnResizedEvent(C,!0,o)}},t.prototype.buildDisplayedTrees=function(e){var o=[],n=[],i=[];e.forEach(function(a){switch(a.getPinned()){case"left":o.push(a);break;case"right":n.push(a);break;default:i.push(a);break}});var s=new Uy;this.displayedTreeLeft=this.displayedGroupCreator.createDisplayedGroups(o,s,"left",this.displayedTreeLeft),this.displayedTreeRight=this.displayedGroupCreator.createDisplayedGroups(n,s,"right",this.displayedTreeRight),this.displayedTreeCentre=this.displayedGroupCreator.createDisplayedGroups(i,s,null,this.displayedTreeCentre),this.updateDisplayedMap()},t.prototype.updateDisplayedMap=function(){var e=this;this.displayedColumnsAndGroupsMap={};var o=function(n){e.displayedColumnsAndGroupsMap[n.getUniqueId()]=n};this.columnUtils.depthFirstAllColumnTreeSearch(this.displayedTreeCentre,o),this.columnUtils.depthFirstAllColumnTreeSearch(this.displayedTreeLeft,o),this.columnUtils.depthFirstAllColumnTreeSearch(this.displayedTreeRight,o)},t.prototype.isDisplayed=function(e){var o=this.displayedColumnsAndGroupsMap[e.getUniqueId()];return o===e},t.prototype.updateOpenClosedVisibilityInColumnGroups=function(){var e=this.getAllDisplayedTrees();this.columnUtils.depthFirstAllColumnTreeSearch(e,function(o){o instanceof vt&&o.calculateDisplayedColumns()})},t.prototype.getGroupAutoColumns=function(){return this.groupAutoColumns},t.prototype.createGroupAutoColumnsIfNeeded=function(){var e=this.forceRecreateAutoGroups;if(this.forceRecreateAutoGroups=!1,!this.autoGroupsNeedBuilding)return!1;this.autoGroupsNeedBuilding=!1;var o=this.gridOptionsService.isGroupUseEntireRow(this.pivotMode),n=this.pivotMode?this.gridOptionsService.get("pivotSuppressAutoColumn"):this.isGroupSuppressAutoColumn(),i=this.rowGroupColumns.length>0||this.gridOptionsService.get("treeData"),s=i&&!n&&!o;if(s){var a=this.autoGroupColService.createAutoGroupColumns(this.rowGroupColumns),l=!this.autoColsEqual(a,this.groupAutoColumns);if(l||e)return this.groupAutoColumns=a,!0}else this.groupAutoColumns=null;return!1},t.prototype.isGroupSuppressAutoColumn=function(){var e=this.gridOptionsService.get("groupDisplayType"),o=e==="custom";if(o)return!0;var n=this.gridOptionsService.get("treeDataDisplayType");return n==="custom"},t.prototype.autoColsEqual=function(e,o){return Tn(e,o,function(n,i){return n.getColId()===i.getColId()})},t.prototype.getWidthOfColsInList=function(e){return e.reduce(function(o,n){return o+n.getActualWidth()},0)},t.prototype.getFirstDisplayedColumn=function(){var e=this.gridOptionsService.get("enableRtl"),o=["getDisplayedLeftColumns","getDisplayedCenterColumns","getDisplayedRightColumns"];e&&o.reverse();for(var n=0;n<o.length;n++){var i=this[o[n]]();if(i.length)return e?Ge(i):i[0]}return null},t.prototype.setColumnHeaderHeight=function(e,o){var n=e.setAutoHeaderHeight(o);if(n){var i={type:w.EVENT_COLUMN_HEADER_HEIGHT_CHANGED,column:e,columns:[e],source:"autosizeColumnHeaderHeight"};this.eventService.dispatchEvent(i)}},t.prototype.getColumnGroupHeaderRowHeight=function(){return this.isPivotMode()?this.getPivotGroupHeaderHeight():this.getGroupHeaderHeight()},t.prototype.getColumnHeaderRowHeight=function(){var e=this.isPivotMode()?this.getPivotHeaderHeight():this.getHeaderHeight(),o=this.getAllDisplayedColumns().filter(function(n){return n.isAutoHeaderHeight()}).map(function(n){return n.getAutoHeaderHeight()||0});return Math.max.apply(Math,Mo([e],Do(o),!1))},t.prototype.getHeaderHeight=function(){var e;return(e=this.gridOptionsService.get("headerHeight"))!==null&&e!==void 0?e:this.environment.getFromTheme(25,"headerHeight")},t.prototype.getFloatingFiltersHeight=function(){var e;return(e=this.gridOptionsService.get("floatingFiltersHeight"))!==null&&e!==void 0?e:this.getHeaderHeight()},t.prototype.getGroupHeaderHeight=function(){var e;return(e=this.gridOptionsService.get("groupHeaderHeight"))!==null&&e!==void 0?e:this.getHeaderHeight()},t.prototype.getPivotHeaderHeight=function(){var e;return(e=this.gridOptionsService.get("pivotHeaderHeight"))!==null&&e!==void 0?e:this.getHeaderHeight()},t.prototype.getPivotGroupHeaderHeight=function(){var e;return(e=this.gridOptionsService.get("pivotGroupHeaderHeight"))!==null&&e!==void 0?e:this.getGroupHeaderHeight()},t.prototype.queueResizeOperations=function(){this.shouldQueueResizeOperations=!0},t.prototype.processResizeOperations=function(){this.shouldQueueResizeOperations=!1,this.resizeOperationQueue.forEach(function(e){return e()}),this.resizeOperationQueue=[]},t.prototype.resetColumnDefIntoColumn=function(e,o){var n=e.getUserProvidedColDef();if(!n)return!1;var i=this.columnFactory.addColumnDefaultAndTypes(n,e.getColId());return e.setColDef(i,n,o),!0},t.prototype.isColumnGroupingLocked=function(e){var o=this.gridOptionsService.get("groupLockGroupColumns");if(!e.isRowGroupActive()||o===0)return!1;if(o===-1)return!0;var n=this.rowGroupColumns.findIndex(function(i){return i.getColId()===e.getColId()});return o>n},t.prototype.generateColumnStateForRowGroupAndPivotIndexes=function(e,o){var n=this,i={},s=function(a,l,c,u,d,p){if(!l.length||!n.primaryColumns)return[];for(var h=Object.keys(a),f=new Set(h),g=new Set(h),_=new Set(l.map(function(k){var M=k.getColId();return g.delete(M),M}).concat(h)),C=[],E={},T=0,P=0;P<n.primaryColumns.length;P++){var A=n.primaryColumns[P].getColId();_.has(A)&&(C.push(A),E[A]=T++)}var b=1e3,I=!1,F=0,U=function(k){for(var M=E[k],z=F;z<M;z++){var V=C[z];g.has(V)&&(a[V][d]=b++,g.delete(V))}F=M};l.forEach(function(k){var M=k.getColId();if(f.has(M))U(M),a[M][d]=b++;else{var z=k.getColDef(),V=z[d]===null||z[d]===void 0&&z[p]==null;if(V){if(!I){var q=z[c]||z[c]===void 0&&z[u];q?U(M):(g.forEach(function($){a[$][d]=b+E[$]}),b+=C.length,I=!0)}i[M]||(i[M]={colId:M}),i[M][d]=b++}}})};return s(e,this.rowGroupColumns,"rowGroup","initialRowGroup","rowGroupIndex","initialRowGroupIndex"),s(o,this.pivotColumns,"pivot","initialPivot","pivotIndex","initialPivotIndex"),Object.values(i)},t.prototype.onColumnsReady=function(){var e=this,o=this.gridOptionsService.get("autoSizeStrategy");if(o){var n=o.type;setTimeout(function(){if(n==="fitGridWidth"){var i=o.columnLimits,s=o.defaultMinWidth,a=o.defaultMaxWidth,l=i==null?void 0:i.map(function(c){var u=c.colId,d=c.minWidth,p=c.maxWidth;return{key:u,minWidth:d,maxWidth:p}});e.ctrlsService.getGridBodyCtrl().sizeColumnsToFit({defaultMinWidth:s,defaultMaxWidth:a,columnLimits:l})}else n==="fitProvidedWidth"&&e.sizeColumnsToFit(o.width,"sizeColumnsToFit")})}},t.prototype.onFirstDataRendered=function(){var e=this,o=this.gridOptionsService.get("autoSizeStrategy");if((o==null?void 0:o.type)==="fitCellContents"){var n=o.colIds,i=o.skipHeader;setTimeout(function(){n?e.autoSizeColumns({columns:n,skipHeader:i,source:"autosizeColumns"}):e.autoSizeAllColumns(i,"autosizeColumns")})}},bt([y("expressionService")],t.prototype,"expressionService",void 0),bt([y("columnFactory")],t.prototype,"columnFactory",void 0),bt([y("displayedGroupCreator")],t.prototype,"displayedGroupCreator",void 0),bt([y("ctrlsService")],t.prototype,"ctrlsService",void 0),bt([y("autoWidthCalculator")],t.prototype,"autoWidthCalculator",void 0),bt([y("columnUtils")],t.prototype,"columnUtils",void 0),bt([y("columnAnimationService")],t.prototype,"columnAnimationService",void 0),bt([y("autoGroupColService")],t.prototype,"autoGroupColService",void 0),bt([Le("aggFuncService")],t.prototype,"aggFuncService",void 0),bt([Le("valueCache")],t.prototype,"valueCache",void 0),bt([Le("animationFrameService")],t.prototype,"animationFrameService",void 0),bt([y("sortController")],t.prototype,"sortController",void 0),bt([y("columnDefFactory")],t.prototype,"columnDefFactory",void 0),bt([Q],t.prototype,"init",null),bt([zt],t.prototype,"destroyColumns",null),bt([K2(0,eo("loggerFactory"))],t.prototype,"setBeans",null),t=bt([ne("columnModel")],t),t}(K),Q2=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),X2=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},Z2=function(r){Q2(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.calculateColMinWidth=function(e){return e.minWidth!=null?e.minWidth:this.environment.getMinColWidth()},t.prototype.calculateColMaxWidth=function(e){return e.maxWidth!=null?e.maxWidth:Number.MAX_SAFE_INTEGER},t.prototype.calculateColInitialWidth=function(e){var o=this.calculateColMinWidth(e),n=this.calculateColMaxWidth(e),i,s=ei(e.width),a=ei(e.initialWidth);return s!=null?i=s:a!=null?i=a:i=200,Math.max(Math.min(i,n),o)},t.prototype.getOriginalPathForColumn=function(e,o){var n=[],i=!1,s=function(a,l){for(var c=0;c<a.length;c++){if(i)return;var u=a[c];if(u instanceof st){var d=u;s(d.getChildren(),l+1),n[l]=u}else u===e&&(i=!0)}};return s(o,0),i?n:null},t.prototype.depthFirstOriginalTreeSearch=function(e,o,n){var i=this;o&&o.forEach(function(s){s instanceof st&&i.depthFirstOriginalTreeSearch(s,s.getChildren(),n),n(s,e)})},t.prototype.depthFirstAllColumnTreeSearch=function(e,o){var n=this;e&&e.forEach(function(i){i instanceof vt&&n.depthFirstAllColumnTreeSearch(i.getChildren(),o),o(i)})},t.prototype.depthFirstDisplayedColumnTreeSearch=function(e,o){var n=this;e&&e.forEach(function(i){i instanceof vt&&n.depthFirstDisplayedColumnTreeSearch(i.getDisplayedChildren(),o),o(i)})},t=X2([ne("columnUtils")],t),t}(K),J2=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),eL=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},tL=function(r){J2(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.createDisplayedGroups=function(e,o,n,i){for(var s=this,a=this.mapOldGroupsById(i),l=[],c=e,u=function(){var d=c;c=[];for(var p=0,h=function(A){var b=p;p=A;var I=d[b],F=I instanceof vt?I.getProvidedColumnGroup():I,U=F.getOriginalParent();if(U==null){for(var k=b;k<A;k++)l.push(d[k]);return}for(var M=s.createColumnGroup(U,o,a,n),k=b;k<A;k++)M.addChild(d[k]);c.push(M)},f=1;f<d.length;f++){var g=d[f],_=g instanceof vt?g.getProvidedColumnGroup():g,C=_.getOriginalParent(),E=d[p],T=E instanceof vt?E.getProvidedColumnGroup():E,P=T.getOriginalParent();C!==P&&h(f)}p<d.length&&h(d.length)};c.length;)u();return this.setupParentsIntoColumns(l,null),l},t.prototype.createColumnGroup=function(e,o,n,i){var s=e.getGroupId(),a=o.getInstanceIdForKey(s),l=vt.createUniqueId(s,a),c=n[l];return c&&c.getProvidedColumnGroup()!==e&&(c=null),W(c)?c.reset():(c=new vt(e,s,a,i),this.context.createBean(c)),c},t.prototype.mapOldGroupsById=function(e){var o={},n=function(i){i.forEach(function(s){if(s instanceof vt){var a=s;o[s.getUniqueId()]=a,n(a.getChildren())}})};return e&&n(e),o},t.prototype.setupParentsIntoColumns=function(e,o){var n=this;e.forEach(function(i){if(i.setParent(o),i instanceof vt){var s=i;n.setupParentsIntoColumns(s.getChildren(),s)}})},t=eL([ne("displayedGroupCreator")],t),t}(K),Ln=function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var o=e.call(r),n,i=[],s;try{for(;(t===void 0||t-- >0)&&!(n=o.next()).done;)i.push(n.value)}catch(a){s={error:a}}finally{try{n&&!n.done&&(e=o.return)&&e.call(o)}finally{if(s)throw s.error}}return i},xn=function(r,t,e){if(e||arguments.length===2)for(var o=0,n=t.length,i;o<n;o++)(i||!(o in t))&&(i||(i=Array.prototype.slice.call(t,0,o)),i[o]=t[o]);return r.concat(i||Array.prototype.slice.call(t))},oL={statusBar:!0,enableBrowserTooltips:!0,tooltipTrigger:!0,tooltipMouseTrack:!0,tooltipInteraction:!0,defaultColGroupDef:!0,suppressAutoSize:!0,skipHeaderOnAutoSize:!0,autoSizeStrategy:!0,components:!0,stopEditingWhenCellsLoseFocus:!0,undoRedoCellEditing:!0,undoRedoCellEditingLimit:!0,excelStyles:!0,cacheQuickFilter:!0,excludeHiddenColumnsFromQuickFilter:!0,advancedFilterModel:!0,customChartThemes:!0,chartThemeOverrides:!0,enableChartToolPanelsButton:!0,suppressChartToolPanelsButton:!0,chartToolPanelsDef:!0,loadingCellRendererSelector:!0,localeText:!0,keepDetailRows:!0,keepDetailRowsCount:!0,detailRowHeight:!0,detailRowAutoHeight:!0,alignedGrids:!0,tabIndex:!0,valueCache:!0,valueCacheNeverExpires:!0,enableCellExpressions:!0,suppressParentsInRowNodes:!0,suppressTouch:!0,suppressAsyncEvents:!0,suppressBrowserResizeObserver:!0,suppressPropertyNamesCheck:!0,debug:!0,loadingOverlayComponent:!0,loadingOverlayComponentParams:!0,suppressLoadingOverlay:!0,noRowsOverlayComponent:!0,noRowsOverlayComponentParams:!0,paginationPageSizeSelector:!0,paginateChildRows:!0,pivotPanelShow:!0,pivotSuppressAutoColumn:!0,suppressExpandablePivotGroups:!0,aggFuncs:!0,suppressAggFuncInHeader:!0,suppressAggAtRootLevel:!0,removePivotHeaderRowWhenSingleValueColumn:!0,allowShowChangeAfterFilter:!0,ensureDomOrder:!0,enableRtl:!0,suppressColumnVirtualisation:!0,suppressMaxRenderedRowRestriction:!0,suppressRowVirtualisation:!0,rowDragText:!0,suppressGroupMaintainValueType:!0,autoGroupColumnDef:!0,groupLockGroupColumns:!0,rowGroupPanelSuppressSort:!0,suppressGroupRowsSticky:!0,rowModelType:!0,cacheOverflowSize:!0,infiniteInitialRowCount:!0,serverSideInitialRowCount:!0,suppressServerSideInfiniteScroll:!0,maxBlocksInCache:!0,maxConcurrentDatasourceRequests:!0,blockLoadDebounceMillis:!0,serverSideOnlyRefreshFilteredGroups:!0,serverSidePivotResultFieldSeparator:!0,viewportRowModelPageSize:!0,viewportRowModelBufferSize:!0,debounceVerticalScrollbar:!0,suppressAnimationFrame:!0,suppressPreventDefaultOnMouseWheel:!0,scrollbarWidth:!0,icons:!0,suppressRowTransform:!0,gridId:!0,functionsPassive:!0,enableGroupEdit:!0,initialState:!0,processUnpinnedColumns:!0,createChartContainer:!0,getLocaleText:!0,getRowId:!0},Xo=function(){function r(){}return r.STRING_PROPERTIES=["rowSelection","overlayLoadingTemplate","overlayNoRowsTemplate","gridId","quickFilterText","rowModelType","editType","domLayout","clipboardDelimiter","rowGroupPanelShow","multiSortKey","pivotColumnGroupTotals","pivotRowTotals","pivotPanelShow","fillHandleDirection","groupDisplayType","treeDataDisplayType","colResizeDefault","tooltipTrigger","serverSidePivotResultFieldSeparator"],r.OBJECT_PROPERTIES=["components","rowStyle","context","autoGroupColumnDef","localeText","icons","datasource","serverSideDatasource","viewportDatasource","groupRowRendererParams","aggFuncs","fullWidthCellRendererParams","defaultColGroupDef","defaultColDef","defaultCsvExportParams","defaultExcelExportParams","columnTypes","rowClassRules","detailCellRendererParams","loadingCellRendererParams","loadingOverlayComponentParams","noRowsOverlayComponentParams","popupParent","statusBar","sideBar","chartThemeOverrides","customChartThemes","chartToolPanelsDef","dataTypeDefinitions","advancedFilterModel","advancedFilterParent","advancedFilterBuilderParams","initialState","autoSizeStrategy"],r.ARRAY_PROPERTIES=["sortingOrder","alignedGrids","rowData","columnDefs","excelStyles","pinnedTopRowData","pinnedBottomRowData","chartThemes","rowClass","paginationPageSizeSelector"],r.NUMBER_PROPERTIES=["rowHeight","detailRowHeight","rowBuffer","headerHeight","groupHeaderHeight","groupLockGroupColumns","floatingFiltersHeight","pivotHeaderHeight","pivotGroupHeaderHeight","groupDefaultExpanded","pivotDefaultExpanded","viewportRowModelPageSize","viewportRowModelBufferSize","autoSizePadding","maxBlocksInCache","maxConcurrentDatasourceRequests","tooltipShowDelay","tooltipHideDelay","cacheOverflowSize","paginationPageSize","cacheBlockSize","infiniteInitialRowCount","serverSideInitialRowCount","scrollbarWidth","asyncTransactionWaitMillis","blockLoadDebounceMillis","keepDetailRowsCount","undoRedoCellEditingLimit","cellFlashDelay","cellFadeDelay","tabIndex"],r.BOOLEAN_PROPERTIES=["suppressMakeColumnVisibleAfterUnGroup","suppressRowClickSelection","suppressCellFocus","suppressHorizontalScroll","groupSelectsChildren","alwaysShowHorizontalScroll","alwaysShowVerticalScroll","debug","enableBrowserTooltips","enableCellExpressions","groupIncludeTotalFooter","groupSuppressBlankHeader","suppressMenuHide","suppressRowDeselection","unSortIcon","suppressMultiSort","alwaysMultiSort","singleClickEdit","suppressLoadingOverlay","suppressNoRowsOverlay","suppressAutoSize","skipHeaderOnAutoSize","suppressParentsInRowNodes","suppressColumnMoveAnimation","suppressMovableColumns","suppressFieldDotNotation","enableRangeSelection","enableRangeHandle","enableFillHandle","suppressClearOnFillReduction","deltaSort","suppressTouch","suppressAsyncEvents","allowContextMenuWithControlKey","suppressContextMenu","enableCellChangeFlash","suppressDragLeaveHidesColumns","suppressRowGroupHidesColumns","suppressMiddleClickScrolls","suppressPreventDefaultOnMouseWheel","suppressCopyRowsToClipboard","copyHeadersToClipboard","copyGroupHeadersToClipboard","pivotMode","suppressAggFuncInHeader","suppressColumnVirtualisation","alwaysAggregateAtRootLevel","suppressAggAtRootLevel","suppressFocusAfterRefresh","functionsPassive","functionsReadOnly","animateRows","groupSelectsFiltered","groupRemoveSingleChildren","groupRemoveLowestSingleChildren","enableRtl","suppressClickEdit","rowDragEntireRow","rowDragManaged","suppressRowDrag","suppressMoveWhenRowDragging","rowDragMultiRow","enableGroupEdit","embedFullWidthRows","suppressPaginationPanel","groupHideOpenParents","groupAllowUnbalanced","pagination","paginationAutoPageSize","suppressScrollOnNewData","suppressScrollWhenPopupsAreOpen","purgeClosedRowNodes","cacheQuickFilter","includeHiddenColumnsInQuickFilter","excludeHiddenColumnsFromQuickFilter","ensureDomOrder","accentedSort","suppressChangeDetection","valueCache","valueCacheNeverExpires","aggregateOnlyChangedColumns","suppressAnimationFrame","suppressExcelExport","suppressCsvExport","includeHiddenColumnsInAdvancedFilter","suppressMultiRangeSelection","enterMovesDown","enterMovesDownAfterEdit","enterNavigatesVerticallyAfterEdit","enterNavigatesVertically","suppressPropertyNamesCheck","rowMultiSelectWithClick","suppressRowHoverHighlight","suppressRowTransform","suppressClipboardPaste","suppressLastEmptyLineOnPaste","enableCharts","enableChartToolPanelsButton","suppressChartToolPanelsButton","suppressMaintainUnsortedOrder","enableCellTextSelection","suppressBrowserResizeObserver","suppressMaxRenderedRowRestriction","excludeChildrenWhenTreeDataFiltering","tooltipMouseTrack","tooltipInteraction","keepDetailRows","paginateChildRows","preventDefaultOnContextMenu","undoRedoCellEditing","allowDragFromColumnsToolPanel","pivotSuppressAutoColumn","suppressExpandablePivotGroups","debounceVerticalScrollbar","detailRowAutoHeight","serverSideFilterAllLevels","serverSideSortAllLevels","serverSideOnlyRefreshFilteredGroups","serverSideSortOnServer","serverSideFilterOnServer","suppressAggFilteredOnly","showOpenedGroup","suppressClipboardApi","suppressModelUpdateAfterUpdateTransaction","stopEditingWhenCellsLoseFocus","maintainColumnOrder","groupMaintainOrder","columnHoverHighlight","readOnlyEdit","suppressRowVirtualisation","enableCellEditingOnBackspace","resetRowDataOnUpdate","removePivotHeaderRowWhenSingleValueColumn","suppressCopySingleCellRanges","suppressGroupRowsSticky","suppressCutToClipboard","suppressServerSideInfiniteScroll","rowGroupPanelSuppressSort","allowShowChangeAfterFilter","enableAdvancedFilter","masterDetail","treeData","suppressGroupMaintainValueType"],r.FUNCTIONAL_PROPERTIES=["doesExternalFilterPass","processPivotResultColDef","processPivotResultColGroupDef","getBusinessKeyForNode","isRowSelectable","rowDragText","groupRowRenderer","fullWidthCellRenderer","loadingCellRenderer","loadingOverlayComponent","noRowsOverlayComponent","detailCellRenderer","quickFilterParser","quickFilterMatcher"],r.CALLBACK_PROPERTIES=["getLocaleText","isExternalFilterPresent","getRowHeight","getRowClass","getRowStyle","getContextMenuItems","getMainMenuItems","processRowPostCreate","processCellForClipboard","getGroupRowAgg","isFullWidthRow","sendToClipboard","navigateToNextHeader","tabToNextHeader","navigateToNextCell","tabToNextCell","processCellFromClipboard","getDocument","postProcessPopup","getChildCount","getDataPath","isRowMaster","postSortRows","processHeaderForClipboard","processUnpinnedColumns","processGroupHeaderForClipboard","paginationNumberFormatter","processDataFromClipboard","getServerSideGroupKey","isServerSideGroup","createChartContainer","getChartToolbarItems","fillOperation","isApplyServerSideTransaction","getServerSideGroupLevelParams","isServerSideGroupOpenByDefault","isGroupOpenByDefault","initialGroupOrderComparator","groupIncludeFooter","loadingCellRendererSelector","getRowId","groupAggFiltering"],r.FUNCTION_PROPERTIES=xn(xn([],Ln(r.FUNCTIONAL_PROPERTIES),!1),Ln(r.CALLBACK_PROPERTIES),!1),r.ALL_PROPERTIES=xn(xn(xn(xn(xn(xn([],Ln(r.ARRAY_PROPERTIES),!1),Ln(r.OBJECT_PROPERTIES),!1),Ln(r.STRING_PROPERTIES),!1),Ln(r.NUMBER_PROPERTIES),!1),Ln(r.FUNCTION_PROPERTIES),!1),Ln(r.BOOLEAN_PROPERTIES),!1),r}(),wd=function(){return wd=Object.assign||function(r){for(var t,e=1,o=arguments.length;e<o;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},wd.apply(this,arguments)},Pf=function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var o=e.call(r),n,i=[],s;try{for(;(t===void 0||t-- >0)&&!(n=o.next()).done;)i.push(n.value)}catch(a){s={error:a}}finally{try{n&&!n.done&&(e=o.return)&&e.call(o)}finally{if(s)throw s.error}}return i},If=function(r,t,e){if(e||arguments.length===2)for(var o=0,n=t.length,i;o<n;o++)(i||!(o in t))&&(i||(i=Array.prototype.slice.call(t,0,o)),i[o]=t[o]);return r.concat(i||Array.prototype.slice.call(t))},_o=function(){function r(){}r.getCallbackForEvent=function(e){return!e||e.length<2?e:"on"+e[0].toUpperCase()+e.substring(1)},r.getGridOptionKeys=function(){return this.ALL_PROPERTIES_AND_CALLBACKS},r.combineAttributesAndGridOptions=function(e,o){typeof e!="object"&&(e={});var n=wd({},e),i=r.getGridOptionKeys();return i.forEach(function(s){var a=o[s];typeof a<"u"&&a!==r.VUE_OMITTED_PROPERTY&&(n[s]=a)}),n},r.processOnChange=function(e,o){if(e){var n={},i=!1;if(Object.keys(e).filter(function(a){return r.ALL_PROPERTIES_AND_CALLBACKS_SET.has(a)}).forEach(function(a){n[a]=e[a],i=!0}),!!i){o.__internalUpdateGridOptions(n);var s={type:w.EVENT_COMPONENT_STATE_CHANGED};Gt(n,function(a,l){s[a]=l}),o.dispatchEvent(s)}}};var t;return t=r,r.EVENTS=bi(w),r.VUE_OMITTED_PROPERTY="AG-VUE-OMITTED-PROPERTY",r.EXCLUDED_INTERNAL_EVENTS=[w.EVENT_SCROLLBAR_WIDTH_CHANGED,w.EVENT_CHECKBOX_CHANGED,w.EVENT_HEIGHT_SCALE_CHANGED,w.EVENT_BODY_HEIGHT_CHANGED,w.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,w.EVENT_SCROLL_VISIBILITY_CHANGED,w.EVENT_COLUMN_HOVER_CHANGED,w.EVENT_FLASH_CELLS,w.EVENT_PAGINATION_PIXEL_OFFSET_CHANGED,w.EVENT_DISPLAYED_ROWS_CHANGED,w.EVENT_LEFT_PINNED_WIDTH_CHANGED,w.EVENT_RIGHT_PINNED_WIDTH_CHANGED,w.EVENT_ROW_CONTAINER_HEIGHT_CHANGED,w.EVENT_POPUP_TO_FRONT,w.EVENT_STORE_UPDATED,w.EVENT_COLUMN_PANEL_ITEM_DRAG_START,w.EVENT_COLUMN_PANEL_ITEM_DRAG_END,w.EVENT_FILL_START,w.EVENT_FILL_END,w.EVENT_KEY_SHORTCUT_CHANGED_CELL_START,w.EVENT_KEY_SHORTCUT_CHANGED_CELL_END,w.EVENT_FULL_WIDTH_ROW_FOCUSED,w.EVENT_HEADER_HEIGHT_CHANGED,w.EVENT_COLUMN_HEADER_HEIGHT_CHANGED,w.EVENT_CELL_FOCUS_CLEARED,w.EVENT_GRID_STYLES_CHANGED,w.EVENT_FILTER_DESTROYED,w.EVENT_ROW_DATA_UPDATE_STARTED,w.EVENT_ADVANCED_FILTER_ENABLED_CHANGED,w.EVENT_DATA_TYPES_INFERRED,w.EVENT_FIELD_VALUE_CHANGED,w.EVENT_FIELD_PICKER_VALUE_SELECTED,w.EVENT_SUPPRESS_COLUMN_MOVE_CHANGED,w.EVENT_SUPPRESS_MENU_HIDE_CHANGED,w.EVENT_SUPPRESS_FIELD_DOT_NOTATION,w.EVENT_ROW_COUNT_READY,w.EVENT_SIDE_BAR_UPDATED],r.PUBLIC_EVENTS=r.EVENTS.filter(function(e){return!To(r.EXCLUDED_INTERNAL_EVENTS,e)}),r.EVENT_CALLBACKS=r.EVENTS.map(function(e){return r.getCallbackForEvent(e)}),r.STRING_PROPERTIES=Xo.STRING_PROPERTIES,r.OBJECT_PROPERTIES=Xo.OBJECT_PROPERTIES,r.ARRAY_PROPERTIES=Xo.ARRAY_PROPERTIES,r.NUMBER_PROPERTIES=Xo.NUMBER_PROPERTIES,r.BOOLEAN_PROPERTIES=Xo.BOOLEAN_PROPERTIES,r.FUNCTION_PROPERTIES=Xo.FUNCTION_PROPERTIES,r.ALL_PROPERTIES=Xo.ALL_PROPERTIES,r.ALL_PROPERTIES_AND_CALLBACKS=If(If([],Pf(t.ALL_PROPERTIES),!1),Pf(t.EVENT_CALLBACKS),!1),r.ALL_PROPERTIES_AND_CALLBACKS_SET=new Set(r.ALL_PROPERTIES_AND_CALLBACKS),r}(),nL=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),iL=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},rL=function(r){nL(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.componentsMappedByName={},e}return t.prototype.setupComponents=function(e){var o=this;e&&e.forEach(function(n){return o.addComponent(n)})},t.prototype.addComponent=function(e){var o=e.componentName.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),n=o.toUpperCase();this.componentsMappedByName[n]=e.componentClass},t.prototype.getComponentClass=function(e){return this.componentsMappedByName[e]},t=iL([ne("agStackComponentsRegistry")],t),t}(K);function go(r,t,e){e==null||typeof e=="string"&&e==""?Up(r,t):Io(r,t,e)}function Io(r,t,e){r.setAttribute(zy(t),e.toString())}function Up(r,t){r.removeAttribute(zy(t))}function zy(r){return"aria-".concat(r)}function yt(r,t){t?r.setAttribute("role",t):r.removeAttribute("role")}function $y(r){var t;return r==="asc"?t="ascending":r==="desc"?t="descending":r==="mixed"?t="other":t="none",t}function Ky(r){return parseInt(r.getAttribute("aria-level"),10)}function Yy(r){return parseInt(r.getAttribute("aria-posinset"),10)}function qy(r){return r.getAttribute("aria-label")}function In(r,t){go(r,"label",t)}function El(r,t){go(r,"labelledby",t)}function Qy(r,t){go(r,"description",t)}function sL(r,t){go(r,"describedby",t)}function jp(r,t){go(r,"live",t)}function aL(r,t){go(r,"atomic",t)}function lL(r,t){go(r,"relevant",t)}function Xy(r,t){go(r,"level",t)}function Wp(r,t){go(r,"disabled",t)}function uc(r,t){go(r,"hidden",t)}function zp(r,t){go(r,"activedescendant",t)}function ko(r,t){Io(r,"expanded",t)}function Zy(r){Up(r,"expanded")}function $p(r,t){Io(r,"setsize",t)}function Kp(r,t){Io(r,"posinset",t)}function Jy(r,t){Io(r,"multiselectable",t)}function eC(r,t){Io(r,"rowcount",t)}function Yp(r,t){Io(r,"rowindex",t)}function tC(r,t){Io(r,"colcount",t)}function qp(r,t){Io(r,"colindex",t)}function oC(r,t){Io(r,"colspan",t)}function nC(r,t){Io(r,"sort",t)}function iC(r){Up(r,"sort")}function Mr(r,t){go(r,"selected",t)}function cL(r,t){Io(r,"checked",t===void 0?"mixed":t)}function Qp(r,t){go(r,"controls",t.id),El(t,r.id)}function dc(r,t){return t===void 0?r("ariaIndeterminate","indeterminate"):t===!0?r("ariaChecked","checked"):r("ariaUnchecked","unchecked")}var uL=Object.freeze({__proto__:null,setAriaRole:yt,getAriaSortState:$y,getAriaLevel:Ky,getAriaPosInSet:Yy,getAriaLabel:qy,setAriaLabel:In,setAriaLabelledBy:El,setAriaDescription:Qy,setAriaDescribedBy:sL,setAriaLive:jp,setAriaAtomic:aL,setAriaRelevant:lL,setAriaLevel:Xy,setAriaDisabled:Wp,setAriaHidden:uc,setAriaActiveDescendant:zp,setAriaExpanded:ko,removeAriaExpanded:Zy,setAriaSetSize:$p,setAriaPosInSet:Kp,setAriaMultiSelectable:Jy,setAriaRowCount:eC,setAriaRowIndex:Yp,setAriaColCount:tC,setAriaColIndex:qp,setAriaColSpan:oC,setAriaSort:nC,removeAriaSort:iC,setAriaSelected:Mr,setAriaChecked:cL,setAriaControls:Qp,getAriaCheckboxStateName:dc}),Kc,Oa,Yc,qc,Qc,Xc,_d,Sd;function Wo(){return Kc===void 0&&(Kc=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)),Kc}function Xp(){if(Oa===void 0)if(Wo()){var r=navigator.userAgent.match(/version\/(\d+)/i);r&&(Oa=r[1]!=null?parseFloat(r[1]):0)}else Oa=0;return Oa}function pc(){if(Yc===void 0){var r=window;Yc=!!r.chrome&&(!!r.chrome.webstore||!!r.chrome.runtime)||/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)}return Yc}function Zp(){return qc===void 0&&(qc=/(firefox)/i.test(navigator.userAgent)),qc}function Jp(){return Qc===void 0&&(Qc=/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform)),Qc}function ai(){return Xc===void 0&&(Xc=/iPad|iPhone|iPod/.test(navigator.platform)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1),Xc}function hc(){return!Wo()||Xp()>=15}function Rl(r){if(!r)return null;var t=r.tabIndex,e=r.getAttribute("tabIndex");return t===-1&&(e===null||e===""&&!Zp())?null:t.toString()}function rC(){if(!document.body)return-1;var r=1e6,t=navigator.userAgent.toLowerCase().match(/firefox/)?6e6:1e9,e=document.createElement("div");for(document.body.appendChild(e);;){var o=r*2;if(e.style.height=o+"px",o>t||e.clientHeight!==o)break;r=o}return document.body.removeChild(e),r}function sC(){var r,t,e;return(t=(r=document.body)===null||r===void 0?void 0:r.clientWidth)!==null&&t!==void 0?t:window.innerHeight||((e=document.documentElement)===null||e===void 0?void 0:e.clientWidth)||-1}function aC(){var r,t,e;return(t=(r=document.body)===null||r===void 0?void 0:r.clientHeight)!==null&&t!==void 0?t:window.innerHeight||((e=document.documentElement)===null||e===void 0?void 0:e.clientHeight)||-1}function lC(){return Sd==null&&cC(),Sd}function cC(){var r=document.body,t=document.createElement("div");t.style.width=t.style.height="100px",t.style.opacity="0",t.style.overflow="scroll",t.style.msOverflowStyle="scrollbar",t.style.position="absolute",r.appendChild(t);var e=t.offsetWidth-t.clientWidth;e===0&&t.clientWidth===0&&(e=null),t.parentNode&&t.parentNode.removeChild(t),e!=null&&(Sd=e,_d=e===0)}function eh(){return _d==null&&cC(),_d}var dL=Object.freeze({__proto__:null,isBrowserSafari:Wo,getSafariVersion:Xp,isBrowserChrome:pc,isBrowserFirefox:Zp,isMacOsUserAgent:Jp,isIOSUserAgent:ai,browserSupportsPreventScroll:hc,getTabIndex:Rl,getMaxDivHeight:rC,getBodyWidth:sC,getBodyHeight:aC,getScrollbarWidth:lC,isInvisibleScrollbar:eh});function Cr(r,t){return r.toString().padStart(t,"0")}function uC(r,t){for(var e=[],o=r;o<=t;o++)e.push(o);return e}function pL(r){return typeof r=="string"&&(r=parseInt(r,10)),typeof r=="number"?Math.floor(r):null}function hL(r,t){for(var e="",o=0;o<t;o++)e+=String.fromCharCode(r&255),r>>>=8;return e}function fL(r,t,e){return typeof r!="number"?"":th(Math.round(r*100)/100,t,e)}function th(r,t,e){return typeof r!="number"?"":r.toString().replace(".",e).replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1".concat(t))}function gL(r){return r==null?null:r.reduce(function(t,e){return t+e},0)}var vL=Object.freeze({__proto__:null,padStartWidthZeros:Cr,createArrayOfNumbers:uC,cleanNumber:pL,decToHex:hL,formatNumberTwoDecimalPlacesAndCommas:fL,formatNumberCommas:th,sum:gL}),Zc=function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var o=e.call(r),n,i=[],s;try{for(;(t===void 0||t-- >0)&&!(n=o.next()).done;)i.push(n.value)}catch(a){s={error:a}}finally{try{n&&!n.done&&(e=o.return)&&e.call(o)}finally{if(s)throw s.error}}return i};function bo(r,t,e){if(t===void 0&&(t=!0),e===void 0&&(e="-"),!r)return null;var o=[r.getFullYear(),r.getMonth()+1,r.getDate()].map(function(n){return Cr(n,2)}).join(e);return t&&(o+=" "+[r.getHours(),r.getMinutes(),r.getSeconds()].map(function(n){return Cr(n,2)}).join(":")),o}var Jc=function(r){if(r>3&&r<21)return"th";var t=r%10;switch(t){case 1:return"st";case 2:return"nd";case 3:return"rd"}return"th"};function wr(r,t){t===void 0&&(t="YYYY-MM-DD");var e=Cr(r.getFullYear(),4),o=["January","February","March","April","May","June","July","August","September","October","November","December"],n=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],i={YYYY:function(){return e.slice(e.length-4,e.length)},YY:function(){return e.slice(e.length-2,e.length)},Y:function(){return"".concat(r.getFullYear())},MMMM:function(){return o[r.getMonth()]},MMM:function(){return o[r.getMonth()].slice(0,3)},MM:function(){return Cr(r.getMonth()+1,2)},Mo:function(){return"".concat(r.getMonth()+1).concat(Jc(r.getMonth()+1))},M:function(){return"".concat(r.getMonth()+1)},Do:function(){return"".concat(r.getDate()).concat(Jc(r.getDate()))},DD:function(){return Cr(r.getDate(),2)},D:function(){return"".concat(r.getDate())},dddd:function(){return n[r.getDay()]},ddd:function(){return n[r.getDay()].slice(0,3)},dd:function(){return n[r.getDay()].slice(0,2)},do:function(){return"".concat(r.getDay()).concat(Jc(r.getDay()))},d:function(){return"".concat(r.getDay())}},s=new RegExp(Object.keys(i).join("|"),"g");return t.replace(s,function(a){return a in i?i[a]():a})}function to(r){if(!r)return null;var t=Zc(r.split(" "),2),e=t[0],o=t[1];if(!e)return null;var n=e.split("-").map(function(f){return parseInt(f,10)});if(n.filter(function(f){return!isNaN(f)}).length!==3)return null;var i=Zc(n,3),s=i[0],a=i[1],l=i[2],c=new Date(s,a-1,l);if(c.getFullYear()!==s||c.getMonth()!==a-1||c.getDate()!==l)return null;if(!o||o==="00:00:00")return c;var u=Zc(o.split(":").map(function(f){return parseInt(f,10)}),3),d=u[0],p=u[1],h=u[2];return d>=0&&d<24&&c.setHours(d),p>=0&&p<60&&c.setMinutes(p),h>=0&&h<60&&c.setSeconds(h),c}var mL=Object.freeze({__proto__:null,serialiseDate:bo,dateToFormattedString:wr,parseDateTimeFromString:to}),yL=function(r){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&r[t],o=0;if(e)return e.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&o>=r.length&&(r=void 0),{value:r&&r[o++],done:!r}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},CL=function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var o=e.call(r),n,i=[],s;try{for(;(t===void 0||t-- >0)&&!(n=o.next()).done;)i.push(n.value)}catch(a){s={error:a}}finally{try{n&&!n.done&&(e=o.return)&&e.call(o)}finally{if(s)throw s.error}}return i},Pa;function Ed(r,t,e){for(var o=r.parentElement,n=o&&o.firstChild;n;)t&&n.classList.toggle(t,n===r),e&&n.classList.toggle(e,n!==r),n=n.nextSibling}var dC="[tabindex], input, select, button, textarea, [href]",oh="[disabled], .ag-disabled:not(.ag-button), .ag-disabled *";function nh(r){var t=Element.prototype.matches||Element.prototype.msMatchesSelector,e="input, select, button, textarea",o=t.call(r,e),n=t.call(r,oh),i=io(r),s=o&&!n&&i;return s}function xe(r,t,e){e===void 0&&(e={});var o=e.skipAriaHidden;r.classList.toggle("ag-hidden",!t),o||uc(r,!t)}function pC(r,t,e){e===void 0&&(e={});var o=e.skipAriaHidden;r.classList.toggle("ag-invisible",!t),o||uc(r,!t)}function Lr(r,t){var e="disabled",o=t?function(n){return n.setAttribute(e,"")}:function(n){return n.removeAttribute(e)};o(r),ch(r.querySelectorAll("input"),function(n){return o(n)})}function Ai(r,t,e){for(var o=0;r;){if(r.classList.contains(t))return!0;if(r=r.parentElement,typeof e=="number"){if(++o>e)break}else if(r===e)break}return!1}function li(r){var t=window.getComputedStyle(r),e=t.height,o=t.width,n=t.borderTopWidth,i=t.borderRightWidth,s=t.borderBottomWidth,a=t.borderLeftWidth,l=t.paddingTop,c=t.paddingRight,u=t.paddingBottom,d=t.paddingLeft,p=t.marginTop,h=t.marginRight,f=t.marginBottom,g=t.marginLeft,_=t.boxSizing;return{height:parseFloat(e),width:parseFloat(o),borderTopWidth:parseFloat(n),borderRightWidth:parseFloat(i),borderBottomWidth:parseFloat(s),borderLeftWidth:parseFloat(a),paddingTop:parseFloat(l),paddingRight:parseFloat(c),paddingBottom:parseFloat(u),paddingLeft:parseFloat(d),marginTop:parseFloat(p),marginRight:parseFloat(h),marginBottom:parseFloat(f),marginLeft:parseFloat(g),boxSizing:_}}function ua(r){var t=li(r);return t.boxSizing==="border-box"?t.height-t.paddingTop-t.paddingBottom:t.height}function Qi(r){var t=li(r);return t.boxSizing==="border-box"?t.width-t.paddingLeft-t.paddingRight:t.width}function ih(r){var t=li(r),e=t.marginBottom+t.marginTop;return Math.ceil(r.offsetHeight+e)}function Ks(r){var t=li(r),e=t.marginLeft+t.marginRight;return Math.ceil(r.offsetWidth+e)}function rh(r){var t=r.getBoundingClientRect(),e=li(r),o=e.borderTopWidth,n=e.borderLeftWidth,i=e.borderRightWidth,s=e.borderBottomWidth;return{top:t.top+(o||0),left:t.left+(n||0),right:t.right+(i||0),bottom:t.bottom+(s||0)}}function Ys(){if(typeof Pa=="boolean")return Pa;var r=document.createElement("div");return r.style.direction="rtl",r.style.width="1px",r.style.height="1px",r.style.position="fixed",r.style.top="0px",r.style.overflow="hidden",r.dir="rtl",r.innerHTML=`<div style="width: 2px">
            <span style="display: inline-block; width: 1px"></span>
            <span style="display: inline-block; width: 1px"></span>
        </div>`,document.body.appendChild(r),r.scrollLeft=1,Pa=Math.floor(r.scrollLeft)===0,document.body.removeChild(r),Pa}function qs(r,t){var e=r.scrollLeft;return t&&(e=Math.abs(e),pc()&&!Ys()&&(e=r.scrollWidth-r.clientWidth-e)),e}function Qs(r,t,e){e&&(Ys()?t*=-1:(Wo()||pc())&&(t=r.scrollWidth-r.clientWidth-t)),r.scrollLeft=t}function Et(r){for(;r&&r.firstChild;)r.removeChild(r.firstChild)}function bn(r){r&&r.parentNode&&r.parentNode.removeChild(r)}function io(r){var t=r;if(t.checkVisibility)return t.checkVisibility({checkVisibilityCSS:!0});var e=!r.offsetParent||window.getComputedStyle(r).visibility!=="visible";return!e}function Ot(r){var t=document.createElement("div");return t.innerHTML=(r||"").trim(),t.firstChild}function wL(r,t){r.lastChild?r.insertAdjacentHTML("afterbegin",t):r.innerHTML=t}function Rd(r){return r&&r.clientHeight?r.clientHeight:0}function Td(r){return r&&r.clientWidth?r.clientWidth:0}function sh(r,t,e){if(!(e&&e.nextSibling===t)){var o=document.activeElement,n=t.contains(o);e?e.nextSibling?r.insertBefore(t,e.nextSibling):r.appendChild(t):r.firstChild&&r.firstChild!==t&&r.insertAdjacentElement("afterbegin",t),n&&o&&hc()&&o.focus({preventScroll:!0})}}function ah(r,t){for(var e=0;e<t.length;e++){var o=t[e],n=r.children[e];n!==o&&r.insertBefore(o,n)}}function hC(r,t,e){e?e.insertAdjacentElement("afterend",t):r.firstChild?r.insertAdjacentElement("afterbegin",t):r.appendChild(t)}function lh(r,t){var e,o;if(t)try{for(var n=yL(Object.entries(t)),i=n.next();!i.done;i=n.next()){var s=CL(i.value,2),a=s[0],l=s[1];if(!(!a||!a.length||l==null)){var c=Wy(a),u=l.toString(),d=u.replace(/\s*!important/g,""),p=d.length!=u.length?"important":void 0;r.style.setProperty(c,d,p)}}}catch(h){e={error:h}}finally{try{i&&!i.done&&(o=n.return)&&o.call(n)}finally{if(e)throw e.error}}}function fC(r){return r.clientWidth<r.scrollWidth}function gC(r){return r.clientHeight<r.scrollHeight}function Xs(r,t){t==="flex"?(r.style.removeProperty("width"),r.style.removeProperty("minWidth"),r.style.removeProperty("maxWidth"),r.style.flex="1 1 auto"):Ao(r,t)}function Ao(r,t){t=fc(t),r.style.width=t.toString(),r.style.maxWidth=t.toString(),r.style.minWidth=t.toString()}function _L(r,t){t==="flex"?(r.style.removeProperty("height"),r.style.removeProperty("minHeight"),r.style.removeProperty("maxHeight"),r.style.flex="1 1 auto"):Oi(r,t)}function Oi(r,t){t=fc(t),r.style.height=t.toString(),r.style.maxHeight=t.toString(),r.style.minHeight=t.toString()}function fc(r){return typeof r=="number"?"".concat(r,"px"):r}function da(r){return r instanceof Node||r instanceof HTMLElement}function vC(r){if(r==null)return[];var t=[];return ch(r,function(e){return t.push(e)}),t}function mC(r,t){if(r)for(var e=0;e<r.length;e++){var o=r[e];t(o.name,o.value)}}function dn(r,t,e){e==null?r.removeAttribute(t):r.setAttribute(t,e.toString())}function ch(r,t){if(r!=null)for(var e=0;e<r.length;e++)t(r[e])}function uh(r,t){r.then(function(e){var o=e.getGui();o!=null&&(typeof o=="object"?t.appendChild(o):t.innerHTML=o)})}var SL=Object.freeze({__proto__:null,radioCssClass:Ed,FOCUSABLE_SELECTOR:dC,FOCUSABLE_EXCLUDE:oh,isFocusableFormField:nh,setDisplayed:xe,setVisible:pC,setDisabled:Lr,isElementChildOfClass:Ai,getElementSize:li,getInnerHeight:ua,getInnerWidth:Qi,getAbsoluteHeight:ih,getAbsoluteWidth:Ks,getElementRectWithOffset:rh,isRtlNegativeScroll:Ys,getScrollLeft:qs,setScrollLeft:Qs,clearElement:Et,removeFromParent:bn,isVisible:io,loadTemplate:Ot,appendHtml:wL,offsetHeight:Rd,offsetWidth:Td,ensureDomOrder:sh,setDomChildOrder:ah,insertWithDomOrder:hC,addStylesToElement:lh,isHorizontalScrollShowing:fC,isVerticalScrollShowing:gC,setElementWidth:Xs,setFixedWidth:Ao,setElementHeight:_L,setFixedHeight:Oi,formatSize:fc,isNodeOrElement:da,copyNodeList:vC,iterateNamedNodeMap:mC,addOrRemoveAttribute:dn,nodeListForEach:ch,bindCellRendererToHtmlElement:uh}),EL=function(r){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&r[t],o=0;if(e)return e.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&o>=r.length&&(r=void 0),{value:r&&r[o++],done:!r}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};function yC(r,t,e){var o={},n=r.filter(function(i){return!t.some(function(s){return s===i})});return n.length>0&&n.forEach(function(i){return o[i]=pa(i,e).values}),o}function pa(r,t,e,o){var n,i,s=t.map(function(f,g){return{value:f,relevance:RL(r.toLowerCase(),f.toLocaleLowerCase()),idx:g}});if(s.sort(function(f,g){return g.relevance-f.relevance}),e&&(s=s.filter(function(f){return f.relevance!==0})),s.length>0&&o&&o>0){var a=s[0].relevance,l=a*o;s=s.filter(function(f){return l-f.relevance<0})}var c=[],u=[];try{for(var d=EL(s),p=d.next();!p.done;p=d.next()){var h=p.value;c.push(h.value),u.push(h.idx)}}catch(f){n={error:f}}finally{try{p&&!p.done&&(i=d.return)&&i.call(d)}finally{if(n)throw n.error}}return{values:c,indices:u}}function RL(r,t){for(var e=r.replace(/\s/g,""),o=t.replace(/\s/g,""),n=0,i=-1,s=0;s<e.length;s++){var a=o.indexOf(e[s],i+1);a!==-1&&(i=a,n+=100-i*100/1e4*100)}return n}var TL=Object.freeze({__proto__:null,fuzzyCheckStrings:yC,fuzzySuggestions:pa}),CC={columnGroupOpened:"expanded",columnGroupClosed:"contracted",columnSelectClosed:"tree-closed",columnSelectOpen:"tree-open",columnSelectIndeterminate:"tree-indeterminate",columnMovePin:"pin",columnMoveHide:"eye-slash",columnMoveMove:"arrows",columnMoveLeft:"left",columnMoveRight:"right",columnMoveGroup:"group",columnMoveValue:"aggregation",columnMovePivot:"pivot",dropNotAllowed:"not-allowed",groupContracted:"tree-closed",groupExpanded:"tree-open",setFilterGroupClosed:"tree-closed",setFilterGroupOpen:"tree-open",setFilterGroupIndeterminate:"tree-indeterminate",chart:"chart",close:"cross",cancel:"cancel",check:"tick",first:"first",previous:"previous",next:"next",last:"last",linked:"linked",unlinked:"unlinked",colorPicker:"color-picker",groupLoading:"loading",menu:"menu",filter:"filter",columns:"columns",maximize:"maximize",minimize:"minimize",menuPin:"pin",menuValue:"aggregation",menuAddRowGroup:"group",menuRemoveRowGroup:"group",clipboardCopy:"copy",clipboardCut:"cut",clipboardPaste:"paste",pivotPanel:"pivot",rowGroupPanel:"group",valuePanel:"aggregation",columnDrag:"grip",rowDrag:"grip",save:"save",csvExport:"csv",excelExport:"excel",smallDown:"small-down",smallLeft:"small-left",smallRight:"small-right",smallUp:"small-up",sortAscending:"asc",sortDescending:"desc",sortUnSort:"none",advancedFilterBuilder:"group",advancedFilterBuilderDrag:"grip",advancedFilterBuilderInvalid:"not-allowed",advancedFilterBuilderMoveUp:"up",advancedFilterBuilderMoveDown:"down",advancedFilterBuilderAdd:"plus",advancedFilterBuilderRemove:"minus"};function wo(r,t,e){var o=at(r,t,e);if(o){var n=o.className;if(typeof n=="string"&&n.indexOf("ag-icon")>-1||typeof n=="object"&&n["ag-icon"])return o}var i=document.createElement("span");return i.appendChild(o),i}function at(r,t,e,o){var n=null,i=e&&e.getColDef().icons;if(i&&(n=i[r]),t&&!n){var s=t.get("icons");s&&(n=s[r])}if(n){var a=void 0;if(typeof n=="function")a=n();else if(typeof n=="string")a=n;else throw new Error("icon from grid options needs to be a string or a function");if(typeof a=="string")return Ot(a);if(da(a))return a;console.warn("AG Grid: iconRenderer should return back a string or a dom object")}else{var l=document.createElement("span"),c=CC[r];return c||(o?c=r:(console.warn("AG Grid: Did not find icon ".concat(r)),c="")),l.setAttribute("class","ag-icon ag-icon-".concat(c)),l.setAttribute("unselectable","on"),yt(l,"presentation"),l}}var bL=Object.freeze({__proto__:null,iconNameClassMap:CC,createIcon:wo,createIconNoSpan:at}),N=function(){function r(){}return r.BACKSPACE="Backspace",r.TAB="Tab",r.ENTER="Enter",r.ESCAPE="Escape",r.SPACE=" ",r.LEFT="ArrowLeft",r.UP="ArrowUp",r.RIGHT="ArrowRight",r.DOWN="ArrowDown",r.DELETE="Delete",r.F2="F2",r.PAGE_UP="PageUp",r.PAGE_DOWN="PageDown",r.PAGE_HOME="Home",r.PAGE_END="End",r.A="KeyA",r.C="KeyC",r.D="KeyD",r.V="KeyV",r.X="KeyX",r.Y="KeyY",r.Z="KeyZ",r}(),AL=65,OL=67,PL=86,IL=68,DL=90,ML=89;function gc(r){if(r.altKey||r.ctrlKey||r.metaKey)return!1;var t=r.key.length===1;return t}function Tl(r,t,e,o,n){var i=o?o.getColDef().suppressKeyboardEvent:void 0;if(!i)return!1;var s={event:t,editing:n,column:o,api:r.api,node:e,data:e.data,colDef:o.getColDef(),context:r.context,columnApi:r.columnApi};if(i){var a=i(s);if(a)return!0}return!1}function wC(r,t,e,o){var n=o.getDefinition(),i=n&&n.suppressHeaderKeyboardEvent;if(!W(i))return!1;var s={api:r.api,columnApi:r.columnApi,context:r.context,colDef:n,column:o,headerRowIndex:e,event:t};return!!i(s)}function _C(r){var t=r.keyCode,e;switch(t){case AL:e=N.A;break;case OL:e=N.C;break;case PL:e=N.V;break;case IL:e=N.D;break;case DL:e=N.Z;break;case ML:e=N.Y;break;default:e=r.code}return e}function SC(r,t){return t===void 0&&(t=!1),r===N.DELETE?!0:!t&&r===N.BACKSPACE?Jp():!1}var LL=Object.freeze({__proto__:null,isEventFromPrintableCharacter:gc,isUserSuppressingKeyboardEvent:Tl,isUserSuppressingHeaderKeyboardEvent:wC,normaliseQwertyAzerty:_C,isDeleteKey:SC});function dh(r,t,e){if(e===0)return!1;var o=Math.abs(r.clientX-t.clientX),n=Math.abs(r.clientY-t.clientY);return Math.max(o,n)<=e}var xL=Object.freeze({__proto__:null,areEventsNear:dh});function FL(r,t){if(!r)return!1;for(var e=function(a,l){var c=t[a.id],u=t[l.id],d=c!==void 0,p=u!==void 0,h=d&&p,f=!d&&!p;return h?c-u:f?a.__objectId-l.__objectId:d?1:-1},o,n,i=!1,s=0;s<r.length-1;s++)if(o=r[s],n=r[s+1],e(o,n)>0){i=!0;break}return i?(r.sort(e),!0):!1}var NL=Object.freeze({__proto__:null,sortRowNodesByOrder:FL});function ph(r){var t=new Set;return r.forEach(function(e){return t.add(e)}),t}var GL=Object.freeze({__proto__:null,convertToSet:ph}),ct=function(){return ct=Object.assign||function(r){for(var t,e=1,o=arguments.length;e<o;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},ct.apply(this,arguments)},kL=ct(ct(ct(ct(ct(ct(ct(ct(ct(ct(ct(ct(ct(ct(ct(ct(ct(ct({},uL),P2),dL),mL),SL),D2),g2),TL),n2),bL),LL),z2),xL),vL),p2),NL),GL),U2),Ae=kL,xr=function(){function r(t,e){t===void 0&&(t=0),e===void 0&&(e=1),this.nextValue=t,this.step=e}return r.prototype.next=function(){var t=this.nextValue;return this.nextValue+=this.step,t},r.prototype.peek=function(){return this.nextValue},r.prototype.skip=function(t){this.nextValue+=t},r}(),pr;(function(r){r[r.IN_PROGRESS=0]="IN_PROGRESS",r[r.RESOLVED=1]="RESOLVED"})(pr||(pr={}));var on=function(){function r(t){var e=this;this.status=pr.IN_PROGRESS,this.resolution=null,this.waiters=[],t(function(o){return e.onDone(o)},function(o){return e.onReject(o)})}return r.all=function(t){return new r(function(e){var o=t.length,n=new Array(o);t.forEach(function(i,s){i.then(function(a){n[s]=a,o--,o===0&&e(n)})})})},r.resolve=function(t){return t===void 0&&(t=null),new r(function(e){return e(t)})},r.prototype.then=function(t){var e=this;return new r(function(o){e.status===pr.RESOLVED?o(t(e.resolution)):e.waiters.push(function(n){return o(t(n))})})},r.prototype.resolveNow=function(t,e){return this.status===pr.RESOLVED?e(this.resolution):t},r.prototype.onDone=function(t){this.status=pr.RESOLVED,this.resolution=t,this.waiters.forEach(function(e){return e(t)})},r.prototype.onReject=function(t){console.warn("TBI")},r}(),HL=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),wi=function(){return wi=Object.assign||function(r){for(var t,e=1,o=arguments.length;e<o;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},wi.apply(this,arguments)},eu=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},Fo;(function(r){r[r.NOTHING=0]="NOTHING",r[r.WAITING_TO_SHOW=1]="WAITING_TO_SHOW",r[r.SHOWING=2]="SHOWING"})(Fo||(Fo={}));var qo;(function(r){r[r.HOVER=0]="HOVER",r[r.FOCUS=1]="FOCUS"})(qo||(qo={}));var hh=function(r){HL(t,r);function t(e,o,n){var i=r.call(this)||this;return i.parentComp=e,i.tooltipShowDelayOverride=o,i.tooltipHideDelayOverride=n,i.SHOW_QUICK_TOOLTIP_DIFF=1e3,i.FADE_OUT_TOOLTIP_TIMEOUT=1e3,i.INTERACTIVE_HIDE_DELAY=100,i.interactionEnabled=!1,i.isInteractingWithTooltip=!1,i.state=Fo.NOTHING,i.tooltipInstanceCount=0,i.tooltipMouseTrack=!1,i}return t.prototype.postConstruct=function(){this.gridOptionsService.get("tooltipInteraction")&&(this.interactionEnabled=!0),this.tooltipTrigger=this.getTooltipTrigger(),this.tooltipMouseTrack=this.gridOptionsService.get("tooltipMouseTrack");var e=this.parentComp.getGui();this.tooltipTrigger===qo.HOVER&&(this.addManagedListener(e,"mouseenter",this.onMouseEnter.bind(this)),this.addManagedListener(e,"mouseleave",this.onMouseLeave.bind(this))),this.tooltipTrigger===qo.FOCUS&&(this.addManagedListener(e,"focusin",this.onFocusIn.bind(this)),this.addManagedListener(e,"focusout",this.onFocusOut.bind(this))),this.addManagedListener(e,"mousemove",this.onMouseMove.bind(this)),this.interactionEnabled||(this.addManagedListener(e,"mousedown",this.onMouseDown.bind(this)),this.addManagedListener(e,"keydown",this.onKeyDown.bind(this)))},t.prototype.getGridOptionsTooltipDelay=function(e){var o=this.gridOptionsService.get(e);return o<0&&Ee("".concat(e," should not be lower than 0")),Math.max(200,o)},t.prototype.getTooltipDelay=function(e){var o,n;return e==="show"?(o=this.tooltipShowDelayOverride)!==null&&o!==void 0?o:this.getGridOptionsTooltipDelay("tooltipShowDelay"):(n=this.tooltipHideDelayOverride)!==null&&n!==void 0?n:this.getGridOptionsTooltipDelay("tooltipHideDelay")},t.prototype.destroy=function(){this.setToDoNothing(),r.prototype.destroy.call(this)},t.prototype.getTooltipTrigger=function(){var e=this.gridOptionsService.get("tooltipTrigger");return!e||e==="hover"?qo.HOVER:qo.FOCUS},t.prototype.onMouseEnter=function(e){var o=this;this.interactionEnabled&&this.interactiveTooltipTimeoutId&&(this.unlockService(),this.startHideTimeout()),!ai()&&(t.isLocked?this.showTooltipTimeoutId=window.setTimeout(function(){o.prepareToShowTooltip(e)},this.INTERACTIVE_HIDE_DELAY):this.prepareToShowTooltip(e))},t.prototype.onMouseMove=function(e){this.lastMouseEvent&&(this.lastMouseEvent=e),this.tooltipMouseTrack&&this.state===Fo.SHOWING&&this.tooltipComp&&this.positionTooltip()},t.prototype.onMouseDown=function(){this.setToDoNothing()},t.prototype.onMouseLeave=function(){this.interactionEnabled?this.lockService():this.setToDoNothing()},t.prototype.onFocusIn=function(){this.prepareToShowTooltip()},t.prototype.onFocusOut=function(e){var o,n=e.relatedTarget,i=this.parentComp.getGui(),s=(o=this.tooltipComp)===null||o===void 0?void 0:o.getGui();this.isInteractingWithTooltip||i.contains(n)||this.interactionEnabled&&(s!=null&&s.contains(n))||this.setToDoNothing()},t.prototype.onKeyDown=function(){this.setToDoNothing()},t.prototype.prepareToShowTooltip=function(e){if(this.state!=Fo.NOTHING||t.isLocked)return!1;var o=0;return e&&(o=this.isLastTooltipHiddenRecently()?200:this.getTooltipDelay("show")),this.lastMouseEvent=e||null,this.showTooltipTimeoutId=window.setTimeout(this.showTooltip.bind(this),o),this.state=Fo.WAITING_TO_SHOW,!0},t.prototype.isLastTooltipHiddenRecently=function(){var e=new Date().getTime(),o=t.lastTooltipHideTime;return e-o<this.SHOW_QUICK_TOOLTIP_DIFF},t.prototype.setToDoNothing=function(){this.state===Fo.SHOWING&&this.hideTooltip(),this.onBodyScrollEventCallback&&(this.onBodyScrollEventCallback(),this.onBodyScrollEventCallback=void 0),this.onColumnMovedEventCallback&&(this.onColumnMovedEventCallback(),this.onColumnMovedEventCallback=void 0),this.clearTimeouts(),this.state=Fo.NOTHING,this.lastMouseEvent=null},t.prototype.showTooltip=function(){var e=wi({},this.parentComp.getTooltipParams());if(!W(e.value)){this.setToDoNothing();return}this.state=Fo.SHOWING,this.tooltipInstanceCount++;var o=this.newTooltipComponentCallback.bind(this,this.tooltipInstanceCount),n=this.userComponentFactory.getTooltipCompDetails(e);n.newAgStackInstance().then(o)},t.prototype.hideTooltip=function(e){if(!(!e&&this.isInteractingWithTooltip)){this.tooltipComp&&(this.destroyTooltipComp(),t.lastTooltipHideTime=new Date().getTime());var o={type:w.EVENT_TOOLTIP_HIDE,parentGui:this.parentComp.getGui()};this.eventService.dispatchEvent(o),this.state=Fo.NOTHING}},t.prototype.newTooltipComponentCallback=function(e,o){var n=this.state!==Fo.SHOWING||this.tooltipInstanceCount!==e;if(n){this.getContext().destroyBean(o);return}var i=o.getGui();this.tooltipComp=o,i.classList.contains("ag-tooltip")||i.classList.add("ag-tooltip-custom"),this.tooltipTrigger===qo.HOVER&&i.classList.add("ag-tooltip-animate"),this.interactionEnabled&&i.classList.add("ag-tooltip-interactive");var s=this.localeService.getLocaleTextFunc(),a=this.popupService.addPopup({eChild:i,ariaLabel:s("ariaLabelTooltip","Tooltip")});a&&(this.tooltipPopupDestroyFunc=a.hideFunc),this.positionTooltip(),this.tooltipTrigger===qo.FOCUS&&(this.onBodyScrollEventCallback=this.addManagedListener(this.eventService,w.EVENT_BODY_SCROLL,this.setToDoNothing.bind(this)),this.onColumnMovedEventCallback=this.addManagedListener(this.eventService,w.EVENT_COLUMN_MOVED,this.setToDoNothing.bind(this))),this.interactionEnabled&&(this.tooltipTrigger===qo.HOVER?(this.tooltipMouseEnterListener=this.addManagedListener(i,"mouseenter",this.onTooltipMouseEnter.bind(this))||null,this.tooltipMouseLeaveListener=this.addManagedListener(i,"mouseleave",this.onTooltipMouseLeave.bind(this))||null):(this.tooltipFocusInListener=this.addManagedListener(i,"focusin",this.onTooltipFocusIn.bind(this))||null,this.tooltipFocusOutListener=this.addManagedListener(i,"focusout",this.onTooltipFocusOut.bind(this))||null));var l={type:w.EVENT_TOOLTIP_SHOW,tooltipGui:i,parentGui:this.parentComp.getGui()};this.eventService.dispatchEvent(l),this.startHideTimeout()},t.prototype.onTooltipMouseEnter=function(){this.isInteractingWithTooltip=!0,this.unlockService()},t.prototype.onTooltipMouseLeave=function(){this.isInteractingWithTooltip=!1,this.lockService()},t.prototype.onTooltipFocusIn=function(){this.isInteractingWithTooltip=!0},t.prototype.onTooltipFocusOut=function(e){var o,n=this.parentComp.getGui(),i=(o=this.tooltipComp)===null||o===void 0?void 0:o.getGui(),s=e.relatedTarget;i!=null&&i.contains(s)||(this.isInteractingWithTooltip=!1,n.contains(s)?this.startHideTimeout():this.hideTooltip())},t.prototype.positionTooltip=function(){var e={type:"tooltip",ePopup:this.tooltipComp.getGui(),nudgeY:18,skipObserver:this.tooltipMouseTrack};this.lastMouseEvent?this.popupService.positionPopupUnderMouseEvent(wi(wi({},e),{mouseEvent:this.lastMouseEvent})):this.popupService.positionPopupByComponent(wi(wi({},e),{eventSource:this.parentComp.getGui(),position:"under",keepWithinBounds:!0,nudgeY:5}))},t.prototype.destroyTooltipComp=function(){var e=this;this.tooltipComp.getGui().classList.add("ag-tooltip-hiding");var o=this.tooltipPopupDestroyFunc,n=this.tooltipComp,i=this.tooltipTrigger===qo.HOVER?this.FADE_OUT_TOOLTIP_TIMEOUT:0;window.setTimeout(function(){o(),e.getContext().destroyBean(n)},i),this.clearTooltipListeners(),this.tooltipPopupDestroyFunc=void 0,this.tooltipComp=void 0},t.prototype.clearTooltipListeners=function(){[this.tooltipMouseEnterListener,this.tooltipMouseLeaveListener,this.tooltipFocusInListener,this.tooltipFocusOutListener].forEach(function(e){e&&e()}),this.tooltipMouseEnterListener=this.tooltipMouseLeaveListener=this.tooltipFocusInListener=this.tooltipFocusOutListener=null},t.prototype.lockService=function(){var e=this;t.isLocked=!0,this.interactiveTooltipTimeoutId=window.setTimeout(function(){e.unlockService(),e.setToDoNothing()},this.INTERACTIVE_HIDE_DELAY)},t.prototype.unlockService=function(){t.isLocked=!1,this.clearInteractiveTimeout()},t.prototype.startHideTimeout=function(){this.clearHideTimeout(),this.hideTooltipTimeoutId=window.setTimeout(this.hideTooltip.bind(this),this.getTooltipDelay("hide"))},t.prototype.clearShowTimeout=function(){this.showTooltipTimeoutId&&(window.clearTimeout(this.showTooltipTimeoutId),this.showTooltipTimeoutId=void 0)},t.prototype.clearHideTimeout=function(){this.hideTooltipTimeoutId&&(window.clearTimeout(this.hideTooltipTimeoutId),this.hideTooltipTimeoutId=void 0)},t.prototype.clearInteractiveTimeout=function(){this.interactiveTooltipTimeoutId&&(window.clearTimeout(this.interactiveTooltipTimeoutId),this.interactiveTooltipTimeoutId=void 0)},t.prototype.clearTimeouts=function(){this.clearShowTimeout(),this.clearHideTimeout(),this.clearInteractiveTimeout()},t.isLocked=!1,eu([y("popupService")],t.prototype,"popupService",void 0),eu([y("userComponentFactory")],t.prototype,"userComponentFactory",void 0),eu([Q],t.prototype,"postConstruct",null),t}(K),VL=function(){function r(t){this.cssClassStates={},this.getGui=t}return r.prototype.addCssClass=function(t){var e=this,o=(t||"").split(" ");if(o.length>1){o.forEach(function(s){return e.addCssClass(s)});return}var n=this.cssClassStates[t]!==!0;if(n&&t.length){var i=this.getGui();i&&i.classList.add(t),this.cssClassStates[t]=!0}},r.prototype.removeCssClass=function(t){var e=this,o=(t||"").split(" ");if(o.length>1){o.forEach(function(s){return e.removeCssClass(s)});return}var n=this.cssClassStates[t]!==!1;if(n&&t.length){var i=this.getGui();i&&i.classList.remove(t),this.cssClassStates[t]=!1}},r.prototype.containsCssClass=function(t){var e=this.getGui();return e?e.classList.contains(t):!1},r.prototype.addOrRemoveCssClass=function(t,e){var o=this;if(t){if(t.indexOf(" ")>=0){var n=(t||"").split(" ");if(n.length>1){n.forEach(function(a){return o.addOrRemoveCssClass(a,e)});return}}var i=this.cssClassStates[t]!==e;if(i&&t.length){var s=this.getGui();s&&s.classList.toggle(t,e),this.cssClassStates[t]=e}}},r}(),BL=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),tu=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},UL=new xr,Re=function(r){BL(t,r);function t(e){var o=r.call(this)||this;return o.displayed=!0,o.visible=!0,o.compId=UL.next(),o.cssClassManager=new VL(function(){return o.eGui}),e&&o.setTemplate(e),o}return t.prototype.preConstructOnComponent=function(){this.usingBrowserTooltips=this.gridOptionsService.get("enableBrowserTooltips")},t.prototype.getCompId=function(){return this.compId},t.prototype.getTooltipParams=function(){return{value:this.tooltipText,location:"UNKNOWN"}},t.prototype.setTooltip=function(e,o,n){var i=this,s=function(){i.usingBrowserTooltips?i.getGui().removeAttribute("title"):i.tooltipFeature=i.destroyBean(i.tooltipFeature)},a=function(){i.usingBrowserTooltips?i.getGui().setAttribute("title",i.tooltipText):i.tooltipFeature=i.createBean(new hh(i,o,n))};this.tooltipText!=e&&(this.tooltipText&&s(),e!=null&&(this.tooltipText=e,this.tooltipText&&a()))},t.prototype.createChildComponentsFromTags=function(e,o){var n=this,i=vC(e.childNodes);i.forEach(function(s){if(s instanceof HTMLElement){var a=n.createComponentFromElement(s,function(c){var u=c.getGui();u&&n.copyAttributesFromNode(s,c.getGui())},o);if(a){if(a.addItems&&s.children.length){n.createChildComponentsFromTags(s,o);var l=Array.prototype.slice.call(s.children);a.addItems(l)}n.swapComponentForNode(a,e,s)}else s.childNodes&&n.createChildComponentsFromTags(s,o)}})},t.prototype.createComponentFromElement=function(e,o,n){var i=e.nodeName,s=n?n[e.getAttribute("ref")]:void 0,a=this.agStackComponentsRegistry.getComponentClass(i);if(a){t.elementGettingCreated=e;var l=new a(s);return l.setParentComponent(this),this.createBean(l,null,o),l}return null},t.prototype.copyAttributesFromNode=function(e,o){mC(e.attributes,function(n,i){return o.setAttribute(n,i)})},t.prototype.swapComponentForNode=function(e,o,n){var i=e.getGui();o.replaceChild(i,n),o.insertBefore(document.createComment(n.nodeName),i),this.addDestroyFunc(this.destroyBean.bind(this,e)),this.swapInComponentForQuerySelectors(e,n)},t.prototype.swapInComponentForQuerySelectors=function(e,o){var n=this;this.iterateOverQuerySelectors(function(i){n[i.attributeName]===o&&(n[i.attributeName]=e)})},t.prototype.iterateOverQuerySelectors=function(e){for(var o=Object.getPrototypeOf(this);o!=null;){var n=o.__agComponentMetaData,i=lc(o.constructor);n&&n[i]&&n[i].querySelectors&&n[i].querySelectors.forEach(function(s){return e(s)}),o=Object.getPrototypeOf(o)}},t.prototype.activateTabIndex=function(e){var o=this.gridOptionsService.get("tabIndex");e||(e=[]),e.length||e.push(this.getGui()),e.forEach(function(n){return n.setAttribute("tabindex",o.toString())})},t.prototype.setTemplate=function(e,o){var n=Ot(e);this.setTemplateFromElement(n,o)},t.prototype.setTemplateFromElement=function(e,o){this.eGui=e,this.eGui.__agComponent=this,this.wireQuerySelectors(),this.getContext()&&this.createChildComponentsFromTags(this.getGui(),o)},t.prototype.createChildComponentsPreConstruct=function(){this.getGui()&&this.createChildComponentsFromTags(this.getGui())},t.prototype.wireQuerySelectors=function(){var e=this;if(this.eGui){var o=this;this.iterateOverQuerySelectors(function(n){var i=function(l){return o[n.attributeName]=l},s=n.refSelector&&e.getAttribute("ref")===n.refSelector;if(s)i(e.eGui);else{var a=e.eGui.querySelector(n.querySelector);a&&i(a.__agComponent||a)}})}},t.prototype.getGui=function(){return this.eGui},t.prototype.getFocusableElement=function(){return this.eGui},t.prototype.getAriaElement=function(){return this.getFocusableElement()},t.prototype.setParentComponent=function(e){this.parentComponent=e},t.prototype.getParentComponent=function(){return this.parentComponent},t.prototype.setGui=function(e){this.eGui=e},t.prototype.queryForHtmlElement=function(e){return this.eGui.querySelector(e)},t.prototype.queryForHtmlInputElement=function(e){return this.eGui.querySelector(e)},t.prototype.appendChild=function(e,o){if(e!=null)if(o||(o=this.eGui),da(e))o.appendChild(e);else{var n=e;o.appendChild(n.getGui())}},t.prototype.isDisplayed=function(){return this.displayed},t.prototype.setVisible=function(e,o){if(o===void 0&&(o={}),e!==this.visible){this.visible=e;var n=o.skipAriaHidden;pC(this.eGui,e,{skipAriaHidden:n})}},t.prototype.setDisplayed=function(e,o){if(o===void 0&&(o={}),e!==this.displayed){this.displayed=e;var n=o.skipAriaHidden;xe(this.eGui,e,{skipAriaHidden:n});var i={type:t.EVENT_DISPLAYED_CHANGED,visible:this.displayed};this.dispatchEvent(i)}},t.prototype.destroy=function(){this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature)),this.parentComponent&&(this.parentComponent=void 0);var e=this.eGui;e&&e.__agComponent&&(e.__agComponent=void 0),r.prototype.destroy.call(this)},t.prototype.addGuiEventListener=function(e,o,n){var i=this;this.eGui.addEventListener(e,o,n),this.addDestroyFunc(function(){return i.eGui.removeEventListener(e,o)})},t.prototype.addCssClass=function(e){this.cssClassManager.addCssClass(e)},t.prototype.removeCssClass=function(e){this.cssClassManager.removeCssClass(e)},t.prototype.containsCssClass=function(e){return this.cssClassManager.containsCssClass(e)},t.prototype.addOrRemoveCssClass=function(e,o){this.cssClassManager.addOrRemoveCssClass(e,o)},t.prototype.getAttribute=function(e){var o=this.eGui;return o?o.getAttribute(e):null},t.prototype.getRefElement=function(e){return this.queryForHtmlElement('[ref="'.concat(e,'"]'))},t.EVENT_DISPLAYED_CHANGED="displayedChanged",tu([y("agStackComponentsRegistry")],t.prototype,"agStackComponentsRegistry",void 0),tu([bf],t.prototype,"preConstructOnComponent",null),tu([bf],t.prototype,"createChildComponentsPreConstruct",null),t}(K);function ee(r){return jL.bind(this,"[ref=".concat(r,"]"),r)}function jL(r,t,e,o,n){if(r===null){console.error("AG Grid: QuerySelector selector should not be null");return}if(typeof n=="number"){console.error("AG Grid: QuerySelector should be on an attribute");return}WL(e,"querySelectors",{attributeName:o,querySelector:r,refSelector:t})}function WL(r,t,e){var o=zL(r,lc(r.constructor));o[t]||(o[t]=[]),o[t].push(e)}function zL(r,t){return r.__agComponentMetaData||(r.__agComponentMetaData={}),r.__agComponentMetaData[t]||(r.__agComponentMetaData[t]={}),r.__agComponentMetaData[t]}var $L=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),Df=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},KL=function(r){$L(t,r);function t(){return r.call(this,`
            <div class="ag-floating-filter-input" role="presentation">
                <ag-input-text-field ref="eFloatingFilterText"></ag-input-text-field>
            </div>`)||this}return t.prototype.destroy=function(){r.prototype.destroy.call(this)},t.prototype.init=function(e){this.params=e;var o=this.columnModel.getDisplayNameForColumn(e.column,"header",!0),n=this.localeService.getLocaleTextFunc();this.eFloatingFilterText.setDisabled(!0).setInputAriaLabel("".concat(o," ").concat(n("ariaFilterInput","Filter Input")))},t.prototype.onParentModelChanged=function(e){var o=this;if(!e){this.eFloatingFilterText.setValue("");return}this.params.parentFilterInstance(function(n){if(n.getModelAsString){var i=n.getModelAsString(e);o.eFloatingFilterText.setValue(i)}})},t.prototype.onParamsUpdated=function(e){this.init(e)},Df([ee("eFloatingFilterText")],t.prototype,"eFloatingFilterText",void 0),Df([y("columnModel")],t.prototype,"columnModel",void 0),t}(Re),EC=function(){function r(t,e,o,n){var i=this;this.alive=!0,this.context=t,this.eParent=n;var s=e.getDateCompDetails(o),a=s.newAgStackInstance();a.then(function(l){if(!i.alive){t.destroyBean(l);return}i.dateComp=l,l&&(n.appendChild(l.getGui()),l.afterGuiAttached&&l.afterGuiAttached(),i.tempValue&&l.setDate(i.tempValue),i.disabled!=null&&i.setDateCompDisabled(i.disabled))})}return r.prototype.destroy=function(){this.alive=!1,this.dateComp=this.context.destroyBean(this.dateComp)},r.prototype.getDate=function(){return this.dateComp?this.dateComp.getDate():this.tempValue},r.prototype.setDate=function(t){this.dateComp?this.dateComp.setDate(t):this.tempValue=t},r.prototype.setDisabled=function(t){this.dateComp?this.setDateCompDisabled(t):this.disabled=t},r.prototype.setDisplayed=function(t){xe(this.eParent,t)},r.prototype.setInputPlaceholder=function(t){this.dateComp&&this.dateComp.setInputPlaceholder&&this.dateComp.setInputPlaceholder(t)},r.prototype.setInputAriaLabel=function(t){this.dateComp&&this.dateComp.setInputAriaLabel&&this.dateComp.setInputAriaLabel(t)},r.prototype.afterGuiAttached=function(t){this.dateComp&&typeof this.dateComp.afterGuiAttached=="function"&&this.dateComp.afterGuiAttached(t)},r.prototype.updateParams=function(t){var e;!((e=this.dateComp)===null||e===void 0)&&e.onParamsUpdated&&typeof this.dateComp.onParamsUpdated=="function"&&this.dateComp.onParamsUpdated(t)},r.prototype.setDateCompDisabled=function(t){this.dateComp!=null&&this.dateComp.setDisabled!=null&&this.dateComp.setDisabled(t)},r}(),RC=function(){function r(){this.customFilterOptions={}}return r.prototype.init=function(t,e){this.filterOptions=t.filterOptions||e,this.mapCustomOptions(),this.selectDefaultItem(t)},r.prototype.getFilterOptions=function(){return this.filterOptions},r.prototype.mapCustomOptions=function(){var t=this;this.filterOptions&&this.filterOptions.forEach(function(e){if(typeof e!="string"){var o=[["displayKey"],["displayName"],["predicate","test"]],n=function(i){return i.some(function(s){return e[s]!=null})?!0:(console.warn("AG Grid: ignoring FilterOptionDef as it doesn't contain one of '".concat(i,"'")),!1)};if(!o.every(n)){t.filterOptions=t.filterOptions.filter(function(i){return i===e})||[];return}t.customFilterOptions[e.displayKey]=e}})},r.prototype.selectDefaultItem=function(t){if(t.defaultOption)this.defaultOption=t.defaultOption;else if(this.filterOptions.length>=1){var e=this.filterOptions[0];typeof e=="string"?this.defaultOption=e:e.displayKey?this.defaultOption=e.displayKey:console.warn("AG Grid: invalid FilterOptionDef supplied as it doesn't contain a 'displayKey'")}else console.warn("AG Grid: no filter options for filter")},r.prototype.getDefaultOption=function(){return this.defaultOption},r.prototype.getCustomOption=function(t){return this.customFilterOptions[t]},r}(),TC={applyFilter:"Apply",clearFilter:"Clear",resetFilter:"Reset",cancelFilter:"Cancel",textFilter:"Text Filter",numberFilter:"Number Filter",dateFilter:"Date Filter",setFilter:"Set Filter",filterOoo:"Filter...",empty:"Choose one",equals:"Equals",notEqual:"Does not equal",lessThan:"Less than",greaterThan:"Greater than",inRange:"Between",inRangeStart:"From",inRangeEnd:"To",lessThanOrEqual:"Less than or equal to",greaterThanOrEqual:"Greater than or equal to",contains:"Contains",notContains:"Does not contain",startsWith:"Begins with",endsWith:"Ends with",blank:"Blank",notBlank:"Not blank",before:"Before",after:"After",andCondition:"AND",orCondition:"OR",dateFormatOoo:"yyyy-mm-dd"},YL=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),bd=function(){return bd=Object.assign||function(r){for(var t,e=1,o=arguments.length;e<o;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},bd.apply(this,arguments)},Mf=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},ci=function(r){YL(t,r);function t(e,o){o===void 0&&(o={});var n=r.call(this)||this;return n.eFocusableElement=e,n.callbacks=o,n.callbacks=bd({shouldStopEventPropagation:function(){return!1},onTabKeyDown:function(i){if(!i.defaultPrevented){var s=n.focusService.findNextFocusableElement(n.eFocusableElement,!1,i.shiftKey);s&&(s.focus(),i.preventDefault())}}},o),n}return t.prototype.postConstruct=function(){this.eFocusableElement.classList.add(t.FOCUS_MANAGED_CLASS),this.addKeyDownListeners(this.eFocusableElement),this.callbacks.onFocusIn&&this.addManagedListener(this.eFocusableElement,"focusin",this.callbacks.onFocusIn),this.callbacks.onFocusOut&&this.addManagedListener(this.eFocusableElement,"focusout",this.callbacks.onFocusOut)},t.prototype.addKeyDownListeners=function(e){var o=this;this.addManagedListener(e,"keydown",function(n){if(!(n.defaultPrevented||Uo(n))){if(o.callbacks.shouldStopEventPropagation(n)){hn(n);return}n.key===N.TAB?o.callbacks.onTabKeyDown(n):o.callbacks.handleKeyDown&&o.callbacks.handleKeyDown(n)}})},t.FOCUS_MANAGED_CLASS="ag-focus-managed",Mf([y("focusService")],t.prototype,"focusService",void 0),Mf([Q],t.prototype,"postConstruct",null),t}(K),qL=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),ou=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},bC="ag-resizer-wrapper",QL='<div class="'.concat(bC,`">
        <div ref="eTopLeftResizer" class="ag-resizer ag-resizer-topLeft"></div>
        <div ref="eTopResizer" class="ag-resizer ag-resizer-top"></div>
        <div ref="eTopRightResizer" class="ag-resizer ag-resizer-topRight"></div>
        <div ref="eRightResizer" class="ag-resizer ag-resizer-right"></div>
        <div ref="eBottomRightResizer" class="ag-resizer ag-resizer-bottomRight"></div>
        <div ref="eBottomResizer" class="ag-resizer ag-resizer-bottom"></div>
        <div ref="eBottomLeftResizer" class="ag-resizer ag-resizer-bottomLeft"></div>
        <div ref="eLeftResizer" class="ag-resizer ag-resizer-left"></div>
    </div>`),AC=function(r){qL(t,r);function t(e,o){var n=r.call(this)||this;return n.element=e,n.dragStartPosition={x:0,y:0},n.position={x:0,y:0},n.lastSize={width:-1,height:-1},n.positioned=!1,n.resizersAdded=!1,n.resizeListeners=[],n.boundaryEl=null,n.isResizing=!1,n.isMoving=!1,n.resizable={},n.movable=!1,n.currentResizer=null,n.config=Object.assign({},{popup:!1},o),n}return t.prototype.center=function(){var e=this.offsetParent,o=e.clientHeight,n=e.clientWidth,i=n/2-this.getWidth()/2,s=o/2-this.getHeight()/2;this.offsetElement(i,s)},t.prototype.initialisePosition=function(){if(!this.positioned){var e=this.config,o=e.centered,n=e.forcePopupParentAsOffsetParent,i=e.minWidth,s=e.width,a=e.minHeight,l=e.height,c=e.x,u=e.y;this.offsetParent||this.setOffsetParent();var d=0,p=0,h=io(this.element);if(h){var f=this.findBoundaryElement(),g=window.getComputedStyle(f);if(g.minWidth!=null){var _=f.offsetWidth-this.element.offsetWidth;p=parseInt(g.minWidth,10)-_}if(g.minHeight!=null){var C=f.offsetHeight-this.element.offsetHeight;d=parseInt(g.minHeight,10)-C}}if(this.minHeight=a||d,this.minWidth=i||p,s&&this.setWidth(s),l&&this.setHeight(l),(!s||!l)&&this.refreshSize(),o)this.center();else if(c||u)this.offsetElement(c,u);else if(h&&n){var f=this.boundaryEl,E=!0;if(f||(f=this.findBoundaryElement(),E=!1),f){var T=parseFloat(f.style.top),P=parseFloat(f.style.left);E?this.offsetElement(isNaN(P)?0:P,isNaN(T)?0:T):this.setPosition(P,T)}}this.positioned=!!this.offsetParent}},t.prototype.isPositioned=function(){return this.positioned},t.prototype.getPosition=function(){return this.position},t.prototype.setMovable=function(e,o){if(!(!this.config.popup||e===this.movable)){this.movable=e;var n=this.moveElementDragListener||{eElement:o,onDragStart:this.onMoveStart.bind(this),onDragging:this.onMove.bind(this),onDragStop:this.onMoveEnd.bind(this)};e?(this.dragService.addDragSource(n),this.moveElementDragListener=n):(this.dragService.removeDragSource(n),this.moveElementDragListener=void 0)}},t.prototype.setResizable=function(e){var o=this;if(this.clearResizeListeners(),e?this.addResizers():this.removeResizers(),typeof e=="boolean"){if(e===!1)return;e={topLeft:e,top:e,topRight:e,right:e,bottomRight:e,bottom:e,bottomLeft:e,left:e}}Object.keys(e).forEach(function(n){var i=e,s=!!i[n],a=o.getResizerElement(n),l={dragStartPixels:0,eElement:a,onDragStart:function(c){return o.onResizeStart(c,n)},onDragging:o.onResize.bind(o),onDragStop:function(c){return o.onResizeEnd(c,n)}};(s||!o.isAlive()&&!s)&&(s?(o.dragService.addDragSource(l),o.resizeListeners.push(l),a.style.pointerEvents="all"):a.style.pointerEvents="none",o.resizable[n]=s)})},t.prototype.removeSizeFromEl=function(){this.element.style.removeProperty("height"),this.element.style.removeProperty("width"),this.element.style.removeProperty("flex")},t.prototype.restoreLastSize=function(){this.element.style.flex="0 0 auto";var e=this.lastSize,o=e.height,n=e.width;n!==-1&&(this.element.style.width="".concat(n,"px")),o!==-1&&(this.element.style.height="".concat(o,"px"))},t.prototype.getHeight=function(){return this.element.offsetHeight},t.prototype.setHeight=function(e){var o=this.config.popup,n=this.element,i=!1;if(typeof e=="string"&&e.indexOf("%")!==-1)Oi(n,e),e=ih(n),i=!0;else if(e=Math.max(this.minHeight,e),this.positioned){var s=this.getAvailableHeight();s&&e>s&&(e=s)}this.getHeight()!==e&&(i?(n.style.maxHeight="unset",n.style.minHeight="unset"):o?Oi(n,e):(n.style.height="".concat(e,"px"),n.style.flex="0 0 auto",this.lastSize.height=typeof e=="number"?e:parseFloat(e)))},t.prototype.getAvailableHeight=function(){var e=this.config,o=e.popup,n=e.forcePopupParentAsOffsetParent;this.positioned||this.initialisePosition();var i=this.offsetParent.clientHeight;if(!i)return null;var s=this.element.getBoundingClientRect(),a=this.offsetParent.getBoundingClientRect(),l=o?this.position.y:s.top,c=o?0:a.top,u=0;if(n){var d=this.element.parentElement;if(d){var p=d.getBoundingClientRect().bottom;u=p-s.bottom}}var h=i+c-l-u;return h},t.prototype.getWidth=function(){return this.element.offsetWidth},t.prototype.setWidth=function(e){var o=this.element,n=this.config.popup,i=!1;if(typeof e=="string"&&e.indexOf("%")!==-1)Ao(o,e),e=Ks(o),i=!0;else if(this.positioned){e=Math.max(this.minWidth,e);var s=this.offsetParent.clientWidth,a=n?this.position.x:this.element.getBoundingClientRect().left;s&&e+a>s&&(e=s-a)}this.getWidth()!==e&&(i?(o.style.maxWidth="unset",o.style.minWidth="unset"):this.config.popup?Ao(o,e):(o.style.width="".concat(e,"px"),o.style.flex=" unset",this.lastSize.width=typeof e=="number"?e:parseFloat(e)))},t.prototype.offsetElement=function(e,o){e===void 0&&(e=0),o===void 0&&(o=0);var n=this.config.forcePopupParentAsOffsetParent,i=n?this.boundaryEl:this.element;i&&(this.popupService.positionPopup({ePopup:i,keepWithinBounds:!0,skipObserver:this.movable||this.isResizable(),updatePosition:function(){return{x:e,y:o}}}),this.setPosition(parseFloat(i.style.left),parseFloat(i.style.top)))},t.prototype.constrainSizeToAvailableHeight=function(e){var o=this;if(this.config.forcePopupParentAsOffsetParent){var n=function(){var i=o.getAvailableHeight();o.element.style.setProperty("max-height","".concat(i,"px"))};e?this.resizeObserverSubscriber=this.resizeObserverService.observeResize(this.popupService.getPopupParent(),n):(this.element.style.removeProperty("max-height"),this.resizeObserverSubscriber&&(this.resizeObserverSubscriber(),this.resizeObserverSubscriber=void 0))}},t.prototype.setPosition=function(e,o){this.position.x=e,this.position.y=o},t.prototype.updateDragStartPosition=function(e,o){this.dragStartPosition={x:e,y:o}},t.prototype.calculateMouseMovement=function(e){var o=e.e,n=e.isLeft,i=e.isTop,s=e.anywhereWithin,a=e.topBuffer,l=o.clientX-this.dragStartPosition.x,c=o.clientY-this.dragStartPosition.y,u=this.shouldSkipX(o,!!n,!!s,l)?0:l,d=this.shouldSkipY(o,!!i,a,c)?0:c;return{movementX:u,movementY:d}},t.prototype.shouldSkipX=function(e,o,n,i){var s=this.element.getBoundingClientRect(),a=this.offsetParent.getBoundingClientRect(),l=this.boundaryEl.getBoundingClientRect(),c=this.config.popup?this.position.x:s.left,u=c<=0&&a.left>=e.clientX||a.right<=e.clientX&&a.right<=l.right;return u?!0:(o?u=i<0&&e.clientX>c+a.left||i>0&&e.clientX<c+a.left:n?u=i<0&&e.clientX>l.right||i>0&&e.clientX<c+a.left:u=i<0&&e.clientX>l.right||i>0&&e.clientX<l.right,u)},t.prototype.shouldSkipY=function(e,o,n,i){n===void 0&&(n=0);var s=this.element.getBoundingClientRect(),a=this.offsetParent.getBoundingClientRect(),l=this.boundaryEl.getBoundingClientRect(),c=this.config.popup?this.position.y:s.top,u=c<=0&&a.top>=e.clientY||a.bottom<=e.clientY&&a.bottom<=l.bottom;return u?!0:(o?u=i<0&&e.clientY>c+a.top+n||i>0&&e.clientY<c+a.top:u=i<0&&e.clientY>l.bottom||i>0&&e.clientY<l.bottom,u)},t.prototype.createResizeMap=function(){var e=this.element;this.resizerMap={topLeft:{element:e.querySelector("[ref=eTopLeftResizer]")},top:{element:e.querySelector("[ref=eTopResizer]")},topRight:{element:e.querySelector("[ref=eTopRightResizer]")},right:{element:e.querySelector("[ref=eRightResizer]")},bottomRight:{element:e.querySelector("[ref=eBottomRightResizer]")},bottom:{element:e.querySelector("[ref=eBottomResizer]")},bottomLeft:{element:e.querySelector("[ref=eBottomLeftResizer]")},left:{element:e.querySelector("[ref=eLeftResizer]")}}},t.prototype.addResizers=function(){if(!this.resizersAdded){var e=this.element;if(e){var o=new DOMParser,n=o.parseFromString(QL,"text/html").body;e.appendChild(n.firstChild),this.createResizeMap(),this.resizersAdded=!0}}},t.prototype.removeResizers=function(){this.resizerMap=void 0;var e=this.element.querySelector(".".concat(bC));e&&this.element.removeChild(e),this.resizersAdded=!1},t.prototype.getResizerElement=function(e){return this.resizerMap[e].element},t.prototype.onResizeStart=function(e,o){this.boundaryEl=this.findBoundaryElement(),this.positioned||this.initialisePosition(),this.currentResizer={isTop:!!o.match(/top/i),isRight:!!o.match(/right/i),isBottom:!!o.match(/bottom/i),isLeft:!!o.match(/left/i)},this.element.classList.add("ag-resizing"),this.resizerMap[o].element.classList.add("ag-active");var n=this.config,i=n.popup,s=n.forcePopupParentAsOffsetParent;!i&&!s&&this.applySizeToSiblings(this.currentResizer.isBottom||this.currentResizer.isTop),this.isResizing=!0,this.updateDragStartPosition(e.clientX,e.clientY)},t.prototype.getSiblings=function(){var e=this.element,o=e.parentElement;return o?Array.prototype.slice.call(o.children).filter(function(n){return!n.classList.contains("ag-hidden")}):null},t.prototype.getMinSizeOfSiblings=function(){for(var e=this.getSiblings()||[],o=0,n=0,i=0;i<e.length;i++){var s=e[i],a=!!s.style.flex&&s.style.flex!=="0 0 auto";if(s!==this.element){var l=this.minHeight||0,c=this.minWidth||0;if(a){var u=window.getComputedStyle(s);u.minHeight&&(l=parseInt(u.minHeight,10)),u.minWidth&&(c=parseInt(u.minWidth,10))}else l=s.offsetHeight,c=s.offsetWidth;o+=l,n+=c}}return{height:o,width:n}},t.prototype.applySizeToSiblings=function(e){var o=null,n=this.getSiblings();if(n){for(var i=0;i<n.length;i++){var s=n[i];s!==o&&(e?s.style.height="".concat(s.offsetHeight,"px"):s.style.width="".concat(s.offsetWidth,"px"),s.style.flex="0 0 auto",s===this.element&&(o=n[i+1]))}o&&(o.style.removeProperty("height"),o.style.removeProperty("min-height"),o.style.removeProperty("max-height"),o.style.flex="1 1 auto")}},t.prototype.isResizable=function(){return Object.values(this.resizable).some(function(e){return e})},t.prototype.onResize=function(e){if(!(!this.isResizing||!this.currentResizer)){var o=this.config,n=o.popup,i=o.forcePopupParentAsOffsetParent,s=this.currentResizer,a=s.isTop,l=s.isRight,c=s.isBottom,u=s.isLeft,d=l||u,p=c||a,h=this.calculateMouseMovement({e,isLeft:u,isTop:a}),f=h.movementX,g=h.movementY,_=this.position.x,C=this.position.y,E=0,T=0;if(d&&f){var P=u?-1:1,A=this.getWidth(),b=A+f*P,I=!1;u&&(E=A-b,(_+E<=0||b<=this.minWidth)&&(I=!0,E=0)),I||this.setWidth(b)}if(p&&g){var P=a?-1:1,F=this.getHeight(),U=F+g*P,k=!1;a?(T=F-U,(C+T<=0||U<=this.minHeight)&&(k=!0,T=0)):!this.config.popup&&!this.config.forcePopupParentAsOffsetParent&&F<U&&this.getMinSizeOfSiblings().height+U>this.element.parentElement.offsetHeight&&(k=!0),k||this.setHeight(U)}this.updateDragStartPosition(e.clientX,e.clientY),((n||i)&&E||T)&&this.offsetElement(_+E,C+T)}},t.prototype.onResizeEnd=function(e,o){this.isResizing=!1,this.currentResizer=null,this.boundaryEl=null;var n={type:"resize",api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi};this.element.classList.remove("ag-resizing"),this.resizerMap[o].element.classList.remove("ag-active"),this.dispatchEvent(n)},t.prototype.refreshSize=function(){var e=this.element;this.config.popup&&(this.config.width||this.setWidth(e.offsetWidth),this.config.height||this.setHeight(e.offsetHeight))},t.prototype.onMoveStart=function(e){this.boundaryEl=this.findBoundaryElement(),this.positioned||this.initialisePosition(),this.isMoving=!0,this.element.classList.add("ag-moving"),this.updateDragStartPosition(e.clientX,e.clientY)},t.prototype.onMove=function(e){if(this.isMoving){var o=this.position,n=o.x,i=o.y,s;this.config.calculateTopBuffer&&(s=this.config.calculateTopBuffer());var a=this.calculateMouseMovement({e,isTop:!0,anywhereWithin:!0,topBuffer:s}),l=a.movementX,c=a.movementY;this.offsetElement(n+l,i+c),this.updateDragStartPosition(e.clientX,e.clientY)}},t.prototype.onMoveEnd=function(){this.isMoving=!1,this.boundaryEl=null,this.element.classList.remove("ag-moving")},t.prototype.setOffsetParent=function(){this.config.forcePopupParentAsOffsetParent?this.offsetParent=this.popupService.getPopupParent():this.offsetParent=this.element.offsetParent},t.prototype.findBoundaryElement=function(){for(var e=this.element;e;){if(window.getComputedStyle(e).position!=="static")return e;e=e.parentElement}return this.element},t.prototype.clearResizeListeners=function(){for(;this.resizeListeners.length;){var e=this.resizeListeners.pop();this.dragService.removeDragSource(e)}},t.prototype.destroy=function(){r.prototype.destroy.call(this),this.moveElementDragListener&&this.dragService.removeDragSource(this.moveElementDragListener),this.constrainSizeToAvailableHeight(!1),this.clearResizeListeners(),this.removeResizers()},ou([y("popupService")],t.prototype,"popupService",void 0),ou([y("resizeObserverService")],t.prototype,"resizeObserverService",void 0),ou([y("dragService")],t.prototype,"dragService",void 0),t}(K),XL=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),nu=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},bl=function(r){XL(t,r);function t(e){var o=r.call(this)||this;return o.filterNameKey=e,o.applyActive=!1,o.hidePopup=null,o.debouncePending=!1,o.appliedModel=null,o.buttonListeners=[],o}return t.prototype.postConstruct=function(){this.resetTemplate(),this.createManagedBean(new ci(this.getFocusableElement(),{handleKeyDown:this.handleKeyDown.bind(this)})),this.positionableFeature=new AC(this.getPositionableElement(),{forcePopupParentAsOffsetParent:!0}),this.createBean(this.positionableFeature)},t.prototype.handleKeyDown=function(e){},t.prototype.getFilterTitle=function(){return this.translate(this.filterNameKey)},t.prototype.isFilterActive=function(){return!!this.appliedModel},t.prototype.resetTemplate=function(e){var o=this.getGui();o&&o.removeEventListener("submit",this.onFormSubmit);var n=`
            <form class="ag-filter-wrapper">
                <div class="ag-filter-body-wrapper ag-`.concat(this.getCssIdentifier(),`-body-wrapper" ref="eFilterBody">
                    `).concat(this.createBodyTemplate(),`
                </div>
            </form>`);this.setTemplate(n,e),o=this.getGui(),o&&o.addEventListener("submit",this.onFormSubmit)},t.prototype.isReadOnly=function(){return!!this.providedFilterParams.readOnly},t.prototype.init=function(e){var o=this;this.setParams(e),this.resetUiToDefaults(!0).then(function(){o.updateUiVisibility(),o.setupOnBtApplyDebounce()})},t.prototype.setParams=function(e){this.providedFilterParams=e,this.applyActive=t.isUseApplyButton(e),this.resetButtonsPanel()},t.prototype.updateParams=function(e){var o=this;this.providedFilterParams=e,this.applyActive=t.isUseApplyButton(e),this.resetUiToActiveModel(this.getModel(),function(){o.updateUiVisibility(),o.setupOnBtApplyDebounce()})},t.prototype.resetButtonsPanel=function(){var e=this,o=this.providedFilterParams.buttons,n=o&&o.length>0&&!this.isReadOnly();if(this.eButtonsPanel?(Et(this.eButtonsPanel),this.buttonListeners.forEach(function(a){return a==null?void 0:a()}),this.buttonListeners=[]):n&&(this.eButtonsPanel=document.createElement("div"),this.eButtonsPanel.classList.add("ag-filter-apply-panel")),!n){this.eButtonsPanel&&bn(this.eButtonsPanel);return}var i=document.createDocumentFragment(),s=function(a){var l,c;switch(a){case"apply":l=e.translate("applyFilter"),c=function(p){return e.onBtApply(!1,!1,p)};break;case"clear":l=e.translate("clearFilter"),c=function(){return e.onBtClear()};break;case"reset":l=e.translate("resetFilter"),c=function(){return e.onBtReset()};break;case"cancel":l=e.translate("cancelFilter"),c=function(p){e.onBtCancel(p)};break;default:console.warn("AG Grid: Unknown button type specified");return}var u=a==="apply"?"submit":"button",d=Ot(`<button
                    type="`.concat(u,`"
                    ref="`).concat(a,`FilterButton"
                    class="ag-button ag-standard-button ag-filter-apply-panel-button"
                >`).concat(l,`
                </button>`));e.buttonListeners.push(e.addManagedListener(d,"click",c)),i.append(d)};ph(o).forEach(function(a){return s(a)}),this.eButtonsPanel.append(i),this.getGui().appendChild(this.eButtonsPanel)},t.prototype.getDefaultDebounceMs=function(){return 0},t.prototype.setupOnBtApplyDebounce=function(){var e=this,o=t.getDebounceMs(this.providedFilterParams,this.getDefaultDebounceMs()),n=Eo(this.checkApplyDebounce.bind(this),o);this.onBtApplyDebounce=function(){e.debouncePending=!0,n()}},t.prototype.checkApplyDebounce=function(){this.debouncePending&&(this.debouncePending=!1,this.onBtApply())},t.prototype.getModel=function(){return this.appliedModel?this.appliedModel:null},t.prototype.setModel=function(e){var o=this,n=e!=null?this.setModelIntoUi(e):this.resetUiToDefaults();return n.then(function(){o.updateUiVisibility(),o.applyModel("api")})},t.prototype.onBtCancel=function(e){var o=this;this.resetUiToActiveModel(this.getModel(),function(){o.handleCancelEnd(e)})},t.prototype.handleCancelEnd=function(e){this.providedFilterParams.closeOnApply&&this.close(e)},t.prototype.resetUiToActiveModel=function(e,o){var n=this,i=function(){n.onUiChanged(!1,"prevent"),o==null||o()};e!=null?this.setModelIntoUi(e).then(i):this.resetUiToDefaults().then(i)},t.prototype.onBtClear=function(){var e=this;this.resetUiToDefaults().then(function(){return e.onUiChanged()})},t.prototype.onBtReset=function(){this.onBtClear(),this.onBtApply()},t.prototype.applyModel=function(e){var o=this.getModelFromUi();if(!this.isModelValid(o))return!1;var n=this.appliedModel;return this.appliedModel=o,!this.areModelsEqual(n,o)},t.prototype.isModelValid=function(e){return!0},t.prototype.onFormSubmit=function(e){e.preventDefault()},t.prototype.onBtApply=function(e,o,n){if(e===void 0&&(e=!1),o===void 0&&(o=!1),n&&n.preventDefault(),this.applyModel(o?"rowDataUpdated":"ui")){var i="columnFilter";this.providedFilterParams.filterChangedCallback({afterFloatingFilter:e,afterDataChange:o,source:i})}var s=this.providedFilterParams.closeOnApply;s&&this.applyActive&&!e&&!o&&this.close(n)},t.prototype.onNewRowsLoaded=function(){},t.prototype.close=function(e){if(this.hidePopup){var o=e,n=o&&o.key,i;(n==="Enter"||n==="Space")&&(i={keyboardEvent:o}),this.hidePopup(i),this.hidePopup=null}},t.prototype.onUiChanged=function(e,o){if(e===void 0&&(e=!1),this.updateUiVisibility(),this.providedFilterParams.filterModifiedCallback(),this.applyActive&&!this.isReadOnly()){var n=this.isModelValid(this.getModelFromUi()),i=this.getRefElement("applyFilterButton");i&&Lr(i,!n)}e&&!o||o==="immediately"?this.onBtApply(e):(!this.applyActive&&!o||o==="debounce")&&this.onBtApplyDebounce()},t.prototype.afterGuiAttached=function(e){e&&(this.hidePopup=e.hidePopup),this.refreshFilterResizer(e==null?void 0:e.container)},t.prototype.refreshFilterResizer=function(e){if(!(!this.positionableFeature||e==="toolPanel")){var o=e==="floatingFilter",n=this,i=n.positionableFeature,s=n.gridOptionsService;o?(i.restoreLastSize(),i.setResizable(s.get("enableRtl")?{bottom:!0,bottomLeft:!0,left:!0}:{bottom:!0,bottomRight:!0,right:!0})):(this.positionableFeature.removeSizeFromEl(),this.positionableFeature.setResizable(!1)),this.positionableFeature.constrainSizeToAvailableHeight(!0)}},t.prototype.afterGuiDetached=function(){this.checkApplyDebounce(),this.positionableFeature&&this.positionableFeature.constrainSizeToAvailableHeight(!1)},t.getDebounceMs=function(e,o){return t.isUseApplyButton(e)?(e.debounceMs!=null&&console.warn("AG Grid: debounceMs is ignored when apply button is present"),0):e.debounceMs!=null?e.debounceMs:o},t.isUseApplyButton=function(e){return!!e.buttons&&e.buttons.indexOf("apply")>=0},t.prototype.refresh=function(e){return this.providedFilterParams=e,!0},t.prototype.destroy=function(){var e=this.getGui();e&&e.removeEventListener("submit",this.onFormSubmit),this.hidePopup=null,this.positionableFeature&&(this.positionableFeature=this.destroyBean(this.positionableFeature)),r.prototype.destroy.call(this)},t.prototype.translate=function(e){var o=this.localeService.getLocaleTextFunc();return o(e,TC[e])},t.prototype.getCellValue=function(e){return this.providedFilterParams.getValue(e)},t.prototype.getPositionableElement=function(){return this.eFilterBody},nu([y("rowModel")],t.prototype,"rowModel",void 0),nu([ee("eFilterBody")],t.prototype,"eFilterBody",void 0),nu([Q],t.prototype,"postConstruct",null),t}(Re),ZL=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),JL=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},OC=function(r){ZL(t,r);function t(e,o){var n=r.call(this,o)||this;return n.labelSeparator="",n.labelAlignment="left",n.disabled=!1,n.label="",n.config=e||{},n}return t.prototype.postConstruct=function(){this.addCssClass("ag-labeled"),this.eLabel.classList.add("ag-label");var e=this.config,o=e.labelSeparator,n=e.label,i=e.labelWidth,s=e.labelAlignment;o!=null&&this.setLabelSeparator(o),n!=null&&this.setLabel(n),i!=null&&this.setLabelWidth(i),this.setLabelAlignment(s||this.labelAlignment),this.refreshLabel()},t.prototype.refreshLabel=function(){Et(this.eLabel),typeof this.label=="string"?this.eLabel.innerText=this.label+this.labelSeparator:this.label&&this.eLabel.appendChild(this.label),this.label===""?(xe(this.eLabel,!1),yt(this.eLabel,"presentation")):(xe(this.eLabel,!0),yt(this.eLabel,null))},t.prototype.setLabelSeparator=function(e){return this.labelSeparator===e?this:(this.labelSeparator=e,this.label!=null&&this.refreshLabel(),this)},t.prototype.getLabelId=function(){return this.eLabel.id=this.eLabel.id||"ag-".concat(this.getCompId(),"-label"),this.eLabel.id},t.prototype.getLabel=function(){return this.label},t.prototype.setLabel=function(e){return this.label===e?this:(this.label=e,this.refreshLabel(),this)},t.prototype.setLabelAlignment=function(e){var o=this.getGui(),n=o.classList;return n.toggle("ag-label-align-left",e==="left"),n.toggle("ag-label-align-right",e==="right"),n.toggle("ag-label-align-top",e==="top"),this},t.prototype.setLabelEllipsis=function(e){return this.eLabel.classList.toggle("ag-label-ellipsis",e),this},t.prototype.setLabelWidth=function(e){return this.label==null?this:(Xs(this.eLabel,e),this)},t.prototype.setDisabled=function(e){e=!!e;var o=this.getGui();return Lr(o,e),o.classList.toggle("ag-disabled",e),this.disabled=e,this},t.prototype.isDisabled=function(){return!!this.disabled},JL([Q],t.prototype,"postConstruct",null),t}(Re),ex=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),PC=function(r){ex(t,r);function t(e,o,n){var i=r.call(this,e,o)||this;return i.className=n,i}return t.prototype.postConstruct=function(){r.prototype.postConstruct.call(this),this.className&&this.addCssClass(this.className),this.refreshAriaLabelledBy()},t.prototype.refreshAriaLabelledBy=function(){var e=this.getAriaElement(),o=this.getLabelId();qy(e)!==null?El(e,""):El(e,o??"")},t.prototype.setAriaLabel=function(e){return In(this.getAriaElement(),e),this.refreshAriaLabelledBy(),this},t.prototype.onValueChange=function(e){var o=this;return this.addManagedListener(this,w.EVENT_FIELD_VALUE_CHANGED,function(){return e(o.getValue())}),this},t.prototype.getWidth=function(){return this.getGui().clientWidth},t.prototype.setWidth=function(e){return Ao(this.getGui(),e),this},t.prototype.getPreviousValue=function(){return this.previousValue},t.prototype.getValue=function(){return this.value},t.prototype.setValue=function(e,o){return this.value===e?this:(this.previousValue=this.value,this.value=e,o||this.dispatchEvent({type:w.EVENT_FIELD_VALUE_CHANGED}),this)},t}(OC),tx=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),Zr=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},ox=`
    <div class="ag-picker-field" role="presentation">
        <div ref="eLabel"></div>
            <div ref="eWrapper" class="ag-wrapper ag-picker-field-wrapper ag-picker-collapsed">
            <div ref="eDisplayField" class="ag-picker-field-display"></div>
            <div ref="eIcon" class="ag-picker-field-icon" aria-hidden="true"></div>
        </div>
    </div>`,IC=function(r){tx(t,r);function t(e){var o=r.call(this,e,(e==null?void 0:e.template)||ox,e==null?void 0:e.className)||this;if(o.isPickerDisplayed=!1,o.skipClick=!1,o.pickerGap=4,o.hideCurrentPicker=null,o.ariaRole=e==null?void 0:e.ariaRole,o.onPickerFocusIn=o.onPickerFocusIn.bind(o),o.onPickerFocusOut=o.onPickerFocusOut.bind(o),!e)return o;var n=e.pickerGap,i=e.maxPickerHeight,s=e.variableWidth,a=e.minPickerWidth,l=e.maxPickerWidth;return n!=null&&(o.pickerGap=n),o.variableWidth=!!s,i!=null&&o.setPickerMaxHeight(i),a!=null&&o.setPickerMinWidth(a),l!=null&&o.setPickerMaxWidth(l),o}return t.prototype.postConstruct=function(){r.prototype.postConstruct.call(this),this.setupAria();var e="ag-".concat(this.getCompId(),"-display");this.eDisplayField.setAttribute("id",e);var o=this.getAriaElement();this.addManagedListener(o,"keydown",this.onKeyDown.bind(this)),this.addManagedListener(this.eLabel,"mousedown",this.onLabelOrWrapperMouseDown.bind(this)),this.addManagedListener(this.eWrapper,"mousedown",this.onLabelOrWrapperMouseDown.bind(this));var n=this.config.pickerIcon;if(n){var i=at(n,this.gridOptionsService);i&&this.eIcon.appendChild(i)}},t.prototype.setupAria=function(){var e=this.getAriaElement();e.setAttribute("tabindex",this.gridOptionsService.get("tabIndex").toString()),ko(e,!1),this.ariaRole&&yt(e,this.ariaRole)},t.prototype.onLabelOrWrapperMouseDown=function(e){if(e){var o=this.getFocusableElement();if(o!==this.eWrapper&&(e==null?void 0:e.target)===o)return;e.preventDefault(),this.getFocusableElement().focus()}if(this.skipClick){this.skipClick=!1;return}this.isDisabled()||(this.isPickerDisplayed?this.hidePicker():this.showPicker())},t.prototype.onKeyDown=function(e){switch(e.key){case N.UP:case N.DOWN:case N.ENTER:case N.SPACE:e.preventDefault(),this.onLabelOrWrapperMouseDown();break;case N.ESCAPE:this.isPickerDisplayed&&(e.preventDefault(),e.stopPropagation(),this.hideCurrentPicker&&this.hideCurrentPicker());break}},t.prototype.showPicker=function(){this.isPickerDisplayed=!0,this.pickerComponent||(this.pickerComponent=this.createPickerComponent());var e=this.pickerComponent.getGui();e.addEventListener("focusin",this.onPickerFocusIn),e.addEventListener("focusout",this.onPickerFocusOut),this.hideCurrentPicker=this.renderAndPositionPicker(),this.toggleExpandedStyles(!0)},t.prototype.renderAndPositionPicker=function(){var e=this,o=this.gridOptionsService.getDocument(),n=this.pickerComponent.getGui();this.gridOptionsService.get("suppressScrollWhenPopupsAreOpen")||(this.destroyMouseWheelFunc=this.addManagedListener(this.eventService,w.EVENT_BODY_SCROLL,function(){e.hidePicker()}));var i=this.localeService.getLocaleTextFunc(),s=this.config,a=s.pickerAriaLabelKey,l=s.pickerAriaLabelValue,c=s.modalPicker,u=c===void 0?!0:c,d={modal:u,eChild:n,closeOnEsc:!0,closedCallback:function(){var T=o.activeElement===o.body;e.beforeHidePicker(),T&&e.isAlive()&&e.getFocusableElement().focus()},ariaLabel:i(a,l)},p=this.popupService.addPopup(d),h=this,f=h.maxPickerHeight,g=h.minPickerWidth,_=h.maxPickerWidth,C=h.variableWidth;C?(g&&(n.style.minWidth=g),n.style.width=fc(Ks(this.eWrapper)),_&&(n.style.maxWidth=_)):Xs(n,_??Ks(this.eWrapper));var E=f??"".concat(ua(this.popupService.getPopupParent()),"px");return n.style.setProperty("max-height",E),n.style.position="absolute",this.alignPickerToComponent(),p.hideFunc},t.prototype.alignPickerToComponent=function(){if(this.pickerComponent){var e=this.config.pickerType,o=this.pickerGap,n=this.gridOptionsService.get("enableRtl")?"right":"left";this.popupService.positionPopupByComponent({type:e,eventSource:this.eWrapper,ePopup:this.pickerComponent.getGui(),position:"under",alignSide:n,keepWithinBounds:!0,nudgeY:o})}},t.prototype.beforeHidePicker=function(){this.destroyMouseWheelFunc&&(this.destroyMouseWheelFunc(),this.destroyMouseWheelFunc=void 0),this.toggleExpandedStyles(!1);var e=this.pickerComponent.getGui();e.removeEventListener("focusin",this.onPickerFocusIn),e.removeEventListener("focusout",this.onPickerFocusOut),this.isPickerDisplayed=!1,this.pickerComponent=void 0,this.hideCurrentPicker=null},t.prototype.toggleExpandedStyles=function(e){if(this.isAlive()){var o=this.getAriaElement();ko(o,e),this.eWrapper.classList.toggle("ag-picker-expanded",e),this.eWrapper.classList.toggle("ag-picker-collapsed",!e)}},t.prototype.onPickerFocusIn=function(){this.togglePickerHasFocus(!0)},t.prototype.onPickerFocusOut=function(e){var o;!((o=this.pickerComponent)===null||o===void 0)&&o.getGui().contains(e.relatedTarget)||this.togglePickerHasFocus(!1)},t.prototype.togglePickerHasFocus=function(e){this.pickerComponent&&this.eWrapper.classList.toggle("ag-picker-has-focus",e)},t.prototype.hidePicker=function(){this.hideCurrentPicker&&this.hideCurrentPicker()},t.prototype.setInputWidth=function(e){return Xs(this.eWrapper,e),this},t.prototype.getFocusableElement=function(){return this.eWrapper},t.prototype.setPickerGap=function(e){return this.pickerGap=e,this},t.prototype.setPickerMinWidth=function(e){return typeof e=="number"&&(e="".concat(e,"px")),this.minPickerWidth=e??void 0,this},t.prototype.setPickerMaxWidth=function(e){return typeof e=="number"&&(e="".concat(e,"px")),this.maxPickerWidth=e??void 0,this},t.prototype.setPickerMaxHeight=function(e){return typeof e=="number"&&(e="".concat(e,"px")),this.maxPickerHeight=e??void 0,this},t.prototype.destroy=function(){this.hidePicker(),r.prototype.destroy.call(this)},Zr([y("popupService")],t.prototype,"popupService",void 0),Zr([ee("eLabel")],t.prototype,"eLabel",void 0),Zr([ee("eWrapper")],t.prototype,"eWrapper",void 0),Zr([ee("eDisplayField")],t.prototype,"eDisplayField",void 0),Zr([ee("eIcon")],t.prototype,"eIcon",void 0),t}(PC),nx=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),ix=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},Lf=function(r){nx(t,r);function t(e){e===void 0&&(e="default");var o=r.call(this,'<div class="ag-list ag-'.concat(e,'-list" role="listbox"></div>'))||this;return o.cssIdentifier=e,o.options=[],o.itemEls=[],o}return t.prototype.init=function(){this.addManagedListener(this.getGui(),"keydown",this.handleKeyDown.bind(this))},t.prototype.handleKeyDown=function(e){var o=e.key;switch(o){case N.ENTER:if(!this.highlightedEl)this.setValue(this.getValue());else{var n=this.itemEls.indexOf(this.highlightedEl);this.setValueByIndex(n)}break;case N.DOWN:case N.UP:var i=o===N.DOWN,s=void 0;if(e.preventDefault(),!this.highlightedEl)s=this.itemEls[i?0:this.itemEls.length-1];else{var a=this.itemEls.indexOf(this.highlightedEl),l=a+(i?1:-1);l=Math.min(Math.max(l,0),this.itemEls.length-1),s=this.itemEls[l]}this.highlightItem(s);break}},t.prototype.addOptions=function(e){var o=this;return e.forEach(function(n){return o.addOption(n)}),this},t.prototype.addOption=function(e){var o=e.value,n=e.text,i=ht(n||o);return this.options.push({value:o,text:i}),this.renderOption(o,i),this.updateIndices(),this},t.prototype.updateIndices=function(){var e=this.getGui().querySelectorAll(".ag-list-item");e.forEach(function(o,n){Kp(o,n+1),$p(o,e.length)})},t.prototype.renderOption=function(e,o){var n=this,i=document.createElement("div");yt(i,"option"),i.classList.add("ag-list-item","ag-".concat(this.cssIdentifier,"-list-item")),i.innerHTML="<span>".concat(o,"</span>"),i.tabIndex=-1,this.itemEls.push(i),this.addManagedListener(i,"mouseover",function(){return n.highlightItem(i)}),this.addManagedListener(i,"mouseleave",function(){return n.clearHighlighted()}),this.addManagedListener(i,"click",function(){return n.setValue(e)}),this.getGui().appendChild(i)},t.prototype.setValue=function(e,o){if(this.value===e)return this.fireItemSelected(),this;if(e==null)return this.reset(),this;var n=this.options.findIndex(function(s){return s.value===e});if(n!==-1){var i=this.options[n];this.value=i.value,this.displayValue=i.text!=null?i.text:i.value,this.highlightItem(this.itemEls[n]),o||this.fireChangeEvent()}return this},t.prototype.setValueByIndex=function(e){return this.setValue(this.options[e].value)},t.prototype.getValue=function(){return this.value},t.prototype.getDisplayValue=function(){return this.displayValue},t.prototype.refreshHighlighted=function(){var e=this;this.clearHighlighted();var o=this.options.findIndex(function(n){return n.value===e.value});o!==-1&&this.highlightItem(this.itemEls[o])},t.prototype.reset=function(){this.value=null,this.displayValue=null,this.clearHighlighted(),this.fireChangeEvent()},t.prototype.highlightItem=function(e){io(e)&&(this.clearHighlighted(),this.highlightedEl=e,this.highlightedEl.classList.add(t.ACTIVE_CLASS),Mr(this.highlightedEl,!0),this.highlightedEl.focus())},t.prototype.clearHighlighted=function(){!this.highlightedEl||!io(this.highlightedEl)||(this.highlightedEl.classList.remove(t.ACTIVE_CLASS),Mr(this.highlightedEl,!1),this.highlightedEl=null)},t.prototype.fireChangeEvent=function(){this.dispatchEvent({type:w.EVENT_FIELD_VALUE_CHANGED}),this.fireItemSelected()},t.prototype.fireItemSelected=function(){this.dispatchEvent({type:t.EVENT_ITEM_SELECTED})},t.EVENT_ITEM_SELECTED="selectedItem",t.ACTIVE_CLASS="ag-active-item",ix([Q],t.prototype,"init",null),t}(Re),rx=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),Ad=function(){return Ad=Object.assign||function(r){for(var t,e=1,o=arguments.length;e<o;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},Ad.apply(this,arguments)},vc=function(r){rx(t,r);function t(e){return r.call(this,Ad({pickerAriaLabelKey:"ariaLabelSelectField",pickerAriaLabelValue:"Select Field",pickerType:"ag-list",className:"ag-select",pickerIcon:"smallDown",ariaRole:"combobox"},e))||this}return t.prototype.postConstruct=function(){r.prototype.postConstruct.call(this),this.createListComponent(),this.eWrapper.tabIndex=this.gridOptionsService.get("tabIndex")},t.prototype.createListComponent=function(){var e=this;this.listComponent=this.createBean(new Lf("select")),this.listComponent.setParentComponent(this);var o=this.listComponent.getAriaElement(),n="ag-select-list-".concat(this.listComponent.getCompId());o.setAttribute("id",n),Qp(this.getAriaElement(),o),this.listComponent.addGuiEventListener("keydown",function(i){i.key===N.TAB&&(i.preventDefault(),i.stopImmediatePropagation(),e.getGui().dispatchEvent(new KeyboardEvent("keydown",{key:i.key,shiftKey:i.shiftKey,ctrlKey:i.ctrlKey,bubbles:!0})))}),this.listComponent.addManagedListener(this.listComponent,Lf.EVENT_ITEM_SELECTED,function(){e.hidePicker(),e.dispatchEvent({type:t.EVENT_ITEM_SELECTED})}),this.listComponent.addManagedListener(this.listComponent,w.EVENT_FIELD_VALUE_CHANGED,function(){e.listComponent&&(e.setValue(e.listComponent.getValue(),!1,!0),e.hidePicker())})},t.prototype.createPickerComponent=function(){return this.listComponent},t.prototype.showPicker=function(){this.listComponent&&(r.prototype.showPicker.call(this),this.listComponent.refreshHighlighted())},t.prototype.addOptions=function(e){var o=this;return e.forEach(function(n){return o.addOption(n)}),this},t.prototype.addOption=function(e){return this.listComponent.addOption(e),this},t.prototype.setValue=function(e,o,n){if(this.value===e||!this.listComponent)return this;n||this.listComponent.setValue(e,!0);var i=this.listComponent.getValue();return i===this.getValue()?this:(this.eDisplayField.innerHTML=this.listComponent.getDisplayValue(),r.prototype.setValue.call(this,e,o))},t.prototype.destroy=function(){this.listComponent&&(this.destroyBean(this.listComponent),this.listComponent=void 0),r.prototype.destroy.call(this)},t.EVENT_ITEM_SELECTED="selectedItem",t}(IC),sx=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),iu=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},Zn=function(r){sx(t,r);function t(e,o,n,i){n===void 0&&(n="text"),i===void 0&&(i="input");var s=r.call(this,e,`
            <div role="presentation">
                <div ref="eLabel" class="ag-input-field-label"></div>
                <div ref="eWrapper" class="ag-wrapper ag-input-wrapper" role="presentation">
                    <`.concat(i,' ref="eInput" class="ag-input-field-input"></').concat(i,`>
                </div>
            </div>`),o)||this;return s.inputType=n,s.displayFieldTag=i,s}return t.prototype.postConstruct=function(){r.prototype.postConstruct.call(this),this.setInputType(),this.eLabel.classList.add("".concat(this.className,"-label")),this.eWrapper.classList.add("".concat(this.className,"-input-wrapper")),this.eInput.classList.add("".concat(this.className,"-input")),this.addCssClass("ag-input-field"),this.eInput.id=this.eInput.id||"ag-".concat(this.getCompId(),"-input");var e=this.config,o=e.width,n=e.value;o!=null&&this.setWidth(o),n!=null&&this.setValue(n),this.addInputListeners(),this.activateTabIndex([this.eInput])},t.prototype.addInputListeners=function(){var e=this;this.addManagedListener(this.eInput,"input",function(o){return e.setValue(o.target.value)})},t.prototype.setInputType=function(){this.displayFieldTag==="input"&&this.eInput.setAttribute("type",this.inputType)},t.prototype.getInputElement=function(){return this.eInput},t.prototype.setInputWidth=function(e){return Xs(this.eWrapper,e),this},t.prototype.setInputName=function(e){return this.getInputElement().setAttribute("name",e),this},t.prototype.getFocusableElement=function(){return this.eInput},t.prototype.setMaxLength=function(e){var o=this.eInput;return o.maxLength=e,this},t.prototype.setInputPlaceholder=function(e){return dn(this.eInput,"placeholder",e),this},t.prototype.setInputAriaLabel=function(e){return In(this.eInput,e),this.refreshAriaLabelledBy(),this},t.prototype.setDisabled=function(e){return Lr(this.eInput,e),r.prototype.setDisabled.call(this,e)},t.prototype.setAutoComplete=function(e){if(e===!0)dn(this.eInput,"autocomplete",null);else{var o=typeof e=="string"?e:"off";dn(this.eInput,"autocomplete",o)}return this},iu([ee("eLabel")],t.prototype,"eLabel",void 0),iu([ee("eWrapper")],t.prototype,"eWrapper",void 0),iu([ee("eInput")],t.prototype,"eInput",void 0),t}(PC),ax=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),mc=function(r){ax(t,r);function t(e,o,n){o===void 0&&(o="ag-checkbox"),n===void 0&&(n="checkbox");var i=r.call(this,e,o,n)||this;return i.labelAlignment="right",i.selected=!1,i.readOnly=!1,i.passive=!1,i}return t.prototype.addInputListeners=function(){this.addManagedListener(this.eInput,"click",this.onCheckboxClick.bind(this)),this.addManagedListener(this.eLabel,"click",this.toggle.bind(this))},t.prototype.getNextValue=function(){return this.selected===void 0?!0:!this.selected},t.prototype.setPassive=function(e){this.passive=e},t.prototype.isReadOnly=function(){return this.readOnly},t.prototype.setReadOnly=function(e){this.eWrapper.classList.toggle("ag-disabled",e),this.eInput.disabled=e,this.readOnly=e},t.prototype.setDisabled=function(e){return this.eWrapper.classList.toggle("ag-disabled",e),r.prototype.setDisabled.call(this,e)},t.prototype.toggle=function(){if(!this.eInput.disabled){var e=this.isSelected(),o=this.getNextValue();this.passive?this.dispatchChange(o,e):this.setValue(o)}},t.prototype.getValue=function(){return this.isSelected()},t.prototype.setValue=function(e,o){return this.refreshSelectedClass(e),this.setSelected(e,o),this},t.prototype.setName=function(e){var o=this.getInputElement();return o.name=e,this},t.prototype.isSelected=function(){return this.selected},t.prototype.setSelected=function(e,o){this.isSelected()!==e&&(this.previousValue=this.isSelected(),e=this.selected=typeof e=="boolean"?e:void 0,this.eInput.checked=e,this.eInput.indeterminate=e===void 0,o||this.dispatchChange(this.selected,this.previousValue))},t.prototype.dispatchChange=function(e,o,n){this.dispatchEvent({type:w.EVENT_FIELD_VALUE_CHANGED,selected:e,previousValue:o,event:n});var i=this.getInputElement(),s={type:w.EVENT_CHECKBOX_CHANGED,id:i.id,name:i.name,selected:e,previousValue:o};this.eventService.dispatchEvent(s)},t.prototype.onCheckboxClick=function(e){if(!(this.passive||this.eInput.disabled)){var o=this.isSelected(),n=this.selected=e.target.checked;this.refreshSelectedClass(n),this.dispatchChange(n,o,e)}},t.prototype.refreshSelectedClass=function(e){this.eWrapper.classList.toggle("ag-checked",e===!0),this.eWrapper.classList.toggle("ag-indeterminate",e==null)},t}(Zn),lx=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),DC=function(r){lx(t,r);function t(e){return r.call(this,e,"ag-radio-button","radio")||this}return t.prototype.isSelected=function(){return this.eInput.checked},t.prototype.toggle=function(){this.eInput.disabled||this.isSelected()||this.setValue(!0)},t.prototype.addInputListeners=function(){r.prototype.addInputListeners.call(this),this.addManagedListener(this.eventService,w.EVENT_CHECKBOX_CHANGED,this.onChange.bind(this))},t.prototype.onChange=function(e){e.selected&&e.name&&this.eInput.name&&this.eInput.name===e.name&&e.id&&this.eInput.id!==e.id&&this.setValue(!1,!0)},t}(mc),cx=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),ux=function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var o=e.call(r),n,i=[],s;try{for(;(t===void 0||t-- >0)&&!(n=o.next()).done;)i.push(n.value)}catch(a){s={error:a}}finally{try{n&&!n.done&&(e=o.return)&&e.call(o)}finally{if(s)throw s.error}}return i},dx=function(r,t,e){if(e||arguments.length===2)for(var o=0,n=t.length,i;o<n;o++)(i||!(o in t))&&(i||(i=Array.prototype.slice.call(t,0,o)),i[o]=t[o]);return r.concat(i||Array.prototype.slice.call(t))},fh=function(){function r(t,e,o){this.localeService=t,this.optionsFactory=e,this.valueFormatter=o}return r.prototype.getModelAsString=function(t){var e=this;if(!t)return null;var o=t.operator!=null,n=this.localeService.getLocaleTextFunc();if(o){var i=t,s=i.conditions;if(!s){var a=i.condition1,l=i.condition2;s=[a,l]}var c=s.map(function(C){return e.getModelAsString(C)}),u=i.operator==="AND"?"andCondition":"orCondition";return c.join(" ".concat(n(u,TC[u])," "))}else{if(t.type===Je.BLANK||t.type===Je.NOT_BLANK)return n(t.type,t.type);var d=t,p=this.optionsFactory.getCustomOption(d.type),h=p||{},f=h.displayKey,g=h.displayName,_=h.numberOfInputs;return f&&g&&_===0?(n(f,g),g):this.conditionToString(d,p)}},r.prototype.updateParams=function(t){this.optionsFactory=t.optionsFactory},r.prototype.formatValue=function(t){var e;return this.valueFormatter?(e=this.valueFormatter(t??null))!==null&&e!==void 0?e:"":String(t)},r}(),Je=function(r){cx(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.eTypes=[],e.eJoinOperatorPanels=[],e.eJoinOperatorsAnd=[],e.eJoinOperatorsOr=[],e.eConditionBodies=[],e.listener=function(){return e.onUiChanged()},e.lastUiCompletePosition=null,e.joinOperatorId=0,e}return t.prototype.getNumberOfInputs=function(e){var o=this.optionsFactory.getCustomOption(e);if(o){var n=o.numberOfInputs;return n??1}var i=[t.EMPTY,t.NOT_BLANK,t.BLANK];return e&&i.indexOf(e)>=0?0:e===t.IN_RANGE?2:1},t.prototype.onFloatingFilterChanged=function(e,o){this.setTypeFromFloatingFilter(e),this.setValueFromFloatingFilter(o),this.onUiChanged(!0)},t.prototype.setTypeFromFloatingFilter=function(e){var o=this;this.eTypes.forEach(function(n,i){i===0?n.setValue(e,!0):n.setValue(o.optionsFactory.getDefaultOption(),!0)})},t.prototype.getModelFromUi=function(){var e=this.getUiCompleteConditions();return e.length===0?null:this.maxNumConditions>1&&e.length>1?{filterType:this.getFilterType(),operator:this.getJoinOperator(),condition1:e[0],condition2:e[1],conditions:e}:e[0]},t.prototype.getConditionTypes=function(){return this.eTypes.map(function(e){return e.getValue()})},t.prototype.getConditionType=function(e){return this.eTypes[e].getValue()},t.prototype.getJoinOperator=function(){return this.eJoinOperatorsOr.length===0?this.defaultJoinOperator:this.eJoinOperatorsOr[0].getValue()===!0?"OR":"AND"},t.prototype.areModelsEqual=function(e,o){var n=this;if(!e&&!o)return!0;if(!e&&o||e&&!o)return!1;var i=!e.operator,s=!o.operator,a=!i&&s||i&&!s;if(a)return!1;var l;if(i){var c=e,u=o;l=this.areSimpleModelsEqual(c,u)}else{var d=e,p=o;l=d.operator===p.operator&&Tn(d.conditions,p.conditions,function(h,f){return n.areSimpleModelsEqual(h,f)})}return l},t.prototype.shouldRefresh=function(e){var o,n,i,s=this.getModel(),a=s?(o=s.conditions)!==null&&o!==void 0?o:[s]:null,l=(i=(n=e.filterOptions)===null||n===void 0?void 0:n.map(function(u){return typeof u=="string"?u:u.displayKey}))!==null&&i!==void 0?i:this.getDefaultFilterOptions(),c=!a||a.every(function(u){return l.find(function(d){return d===u.type})!==void 0});return!(!c||typeof e.maxNumConditions=="number"&&a&&a.length>e.maxNumConditions)},t.prototype.refresh=function(e){if(!this.shouldRefresh(e))return!1;var o=r.prototype.refresh.call(this,e);return o?(this.setParams(e),this.removeConditionsAndOperators(0),this.createOption(),this.setModel(this.getModel()),!0):!1},t.prototype.setModelIntoUi=function(e){var o=this,n=e.operator;if(n){var i=e;i.conditions||(i.conditions=[i.condition1,i.condition2]);var s=this.validateAndUpdateConditions(i.conditions),a=this.getNumConditions();if(s<a)this.removeConditionsAndOperators(s);else if(s>a)for(var l=a;l<s;l++)this.createJoinOperatorPanel(),this.createOption();var c=i.operator==="OR";this.eJoinOperatorsAnd.forEach(function(d){return d.setValue(!c,!0)}),this.eJoinOperatorsOr.forEach(function(d){return d.setValue(c,!0)}),i.conditions.forEach(function(d,p){o.eTypes[p].setValue(d.type,!0),o.setConditionIntoUi(d,p)})}else{var u=e;this.getNumConditions()>1&&this.removeConditionsAndOperators(1),this.eTypes[0].setValue(u.type,!0),this.setConditionIntoUi(u,0)}return this.lastUiCompletePosition=this.getNumConditions()-1,this.createMissingConditionsAndOperators(),this.onUiChanged(),on.resolve()},t.prototype.validateAndUpdateConditions=function(e){var o=e.length;return o>this.maxNumConditions&&(e.splice(this.maxNumConditions),Ee('Filter Model contains more conditions than "filterParams.maxNumConditions". Additional conditions have been ignored.'),o=this.maxNumConditions),o},t.prototype.doesFilterPass=function(e){var o=this,n,i=this.getModel();if(i==null)return!0;var s=i.operator,a=[];if(s){var l=i;a.push.apply(a,dx([],ux((n=l.conditions)!==null&&n!==void 0?n:[]),!1))}else a.push(i);var c=s&&s==="OR"?"some":"every";return a[c](function(u){return o.individualConditionPasses(e,u)})},t.prototype.setParams=function(e){r.prototype.setParams.call(this,e),this.setNumConditions(e),this.defaultJoinOperator=this.getDefaultJoinOperator(e.defaultJoinOperator),this.filterPlaceholder=e.filterPlaceholder,this.optionsFactory=new RC,this.optionsFactory.init(e,this.getDefaultFilterOptions()),this.createFilterListOptions(),this.createOption(),this.createMissingConditionsAndOperators(),this.isReadOnly()&&this.eFilterBody.setAttribute("tabindex","-1")},t.prototype.setNumConditions=function(e){var o,n;e.suppressAndOrCondition!=null&&Ee('Since v29.2 "filterParams.suppressAndOrCondition" is deprecated. Use "filterParams.maxNumConditions = 1" instead.'),e.alwaysShowBothConditions!=null&&Ee('Since v29.2 "filterParams.alwaysShowBothConditions" is deprecated. Use "filterParams.numAlwaysVisibleConditions = 2" instead.'),this.maxNumConditions=(o=e.maxNumConditions)!==null&&o!==void 0?o:e.suppressAndOrCondition?1:2,this.maxNumConditions<1&&(Ee('"filterParams.maxNumConditions" must be greater than or equal to zero.'),this.maxNumConditions=1),this.numAlwaysVisibleConditions=(n=e.numAlwaysVisibleConditions)!==null&&n!==void 0?n:e.alwaysShowBothConditions?2:1,this.numAlwaysVisibleConditions<1&&(Ee('"filterParams.numAlwaysVisibleConditions" must be greater than or equal to zero.'),this.numAlwaysVisibleConditions=1),this.numAlwaysVisibleConditions>this.maxNumConditions&&(Ee('"filterParams.numAlwaysVisibleConditions" cannot be greater than "filterParams.maxNumConditions".'),this.numAlwaysVisibleConditions=this.maxNumConditions)},t.prototype.createOption=function(){var e=this,o=this.createManagedBean(new vc);this.eTypes.push(o),o.addCssClass("ag-filter-select"),this.eFilterBody.appendChild(o.getGui());var n=this.createValueElement();this.eConditionBodies.push(n),this.eFilterBody.appendChild(n),this.putOptionsIntoDropdown(o),this.resetType(o);var i=this.getNumConditions()-1;this.forEachPositionInput(i,function(s){return e.resetInput(s)}),this.addChangedListeners(o,i)},t.prototype.createJoinOperatorPanel=function(){var e=document.createElement("div");this.eJoinOperatorPanels.push(e),e.classList.add("ag-filter-condition");var o=this.createJoinOperator(this.eJoinOperatorsAnd,e,"and"),n=this.createJoinOperator(this.eJoinOperatorsOr,e,"or");this.eFilterBody.appendChild(e);var i=this.eJoinOperatorPanels.length-1,s=this.joinOperatorId++;this.resetJoinOperatorAnd(o,i,s),this.resetJoinOperatorOr(n,i,s),this.isReadOnly()||(o.onValueChange(this.listener),n.onValueChange(this.listener))},t.prototype.createJoinOperator=function(e,o,n){var i=this.createManagedBean(new DC);return e.push(i),i.addCssClass("ag-filter-condition-operator"),i.addCssClass("ag-filter-condition-operator-".concat(n)),o.appendChild(i.getGui()),i},t.prototype.getDefaultJoinOperator=function(e){return e==="AND"||e==="OR"?e:"AND"},t.prototype.createFilterListOptions=function(){var e=this,o=this.optionsFactory.getFilterOptions();this.filterListOptions=o.map(function(n){return typeof n=="string"?e.createBoilerplateListOption(n):e.createCustomListOption(n)})},t.prototype.putOptionsIntoDropdown=function(e){this.filterListOptions.forEach(function(o){e.addOption(o)}),e.setDisabled(this.filterListOptions.length<=1)},t.prototype.createBoilerplateListOption=function(e){return{value:e,text:this.translate(e)}},t.prototype.createCustomListOption=function(e){var o=e.displayKey,n=this.optionsFactory.getCustomOption(e.displayKey);return{value:o,text:n?this.localeService.getLocaleTextFunc()(n.displayKey,n.displayName):this.translate(o)}},t.prototype.isAllowTwoConditions=function(){return this.maxNumConditions>=2},t.prototype.createBodyTemplate=function(){return""},t.prototype.getCssIdentifier=function(){return"simple-filter"},t.prototype.updateUiVisibility=function(){var e=this.getJoinOperator();this.updateNumConditions(),this.updateConditionStatusesAndValues(this.lastUiCompletePosition,e)},t.prototype.updateNumConditions=function(){for(var e,o=-1,n=!0,i=0;i<this.getNumConditions();i++)this.isConditionUiComplete(i)?o=i:n=!1;if(this.shouldAddNewConditionAtEnd(n))this.createJoinOperatorPanel(),this.createOption();else{var s=(e=this.lastUiCompletePosition)!==null&&e!==void 0?e:this.getNumConditions()-2;if(o<s){this.removeConditionsAndOperators(s+1);var a=o+1,l=s-a;l>0&&this.removeConditionsAndOperators(a,l),this.createMissingConditionsAndOperators()}}this.lastUiCompletePosition=o},t.prototype.updateConditionStatusesAndValues=function(e,o){var n=this;this.eTypes.forEach(function(s,a){var l=n.isConditionDisabled(a,e);s.setDisabled(l||n.filterListOptions.length<=1),a===1&&(Lr(n.eJoinOperatorPanels[0],l),n.eJoinOperatorsAnd[0].setDisabled(l),n.eJoinOperatorsOr[0].setDisabled(l))}),this.eConditionBodies.forEach(function(s,a){xe(s,n.isConditionBodyVisible(a))});var i=(o??this.getJoinOperator())==="OR";this.eJoinOperatorsAnd.forEach(function(s,a){s.setValue(!i,!0)}),this.eJoinOperatorsOr.forEach(function(s,a){s.setValue(i,!0)}),this.forEachInput(function(s,a,l,c){n.setElementDisplayed(s,a<c),n.setElementDisabled(s,n.isConditionDisabled(l,e))}),this.resetPlaceholder()},t.prototype.shouldAddNewConditionAtEnd=function(e){return e&&this.getNumConditions()<this.maxNumConditions&&!this.isReadOnly()},t.prototype.removeConditionsAndOperators=function(e,o){if(!(e>=this.getNumConditions())){this.removeComponents(this.eTypes,e,o),this.removeElements(this.eConditionBodies,e,o),this.removeValueElements(e,o);var n=Math.max(e-1,0);this.removeElements(this.eJoinOperatorPanels,n,o),this.removeComponents(this.eJoinOperatorsAnd,n,o),this.removeComponents(this.eJoinOperatorsOr,n,o)}},t.prototype.removeElements=function(e,o,n){var i=this.removeItems(e,o,n);i.forEach(function(s){return bn(s)})},t.prototype.removeComponents=function(e,o,n){var i=this,s=this.removeItems(e,o,n);s.forEach(function(a){bn(a.getGui()),i.destroyBean(a)})},t.prototype.removeItems=function(e,o,n){return n==null?e.splice(o):e.splice(o,n)},t.prototype.afterGuiAttached=function(e){if(r.prototype.afterGuiAttached.call(this,e),this.resetPlaceholder(),!(e!=null&&e.suppressFocus))if(this.isReadOnly())this.eFilterBody.focus();else{var o=this.getInputs(0)[0];if(!o)return;o instanceof Zn&&o.getInputElement().focus()}},t.prototype.afterGuiDetached=function(){r.prototype.afterGuiDetached.call(this);var e=this.getModel();this.resetUiToActiveModel(e);for(var o=-1,n=-1,i=!1,s=this.getJoinOperator(),a=this.getNumConditions()-1;a>=0;a--)if(this.isConditionUiComplete(a))o===-1&&(o=a,n=a);else{var l=a>=this.numAlwaysVisibleConditions&&!this.isConditionUiComplete(a-1),c=a<o;(l||c)&&(this.removeConditionsAndOperators(a,1),i=!0,c&&n--)}var u=!1;this.getNumConditions()<this.numAlwaysVisibleConditions&&(this.createMissingConditionsAndOperators(),u=!0),this.shouldAddNewConditionAtEnd(n===this.getNumConditions()-1)&&(this.createJoinOperatorPanel(),this.createOption(),u=!0),u&&this.updateConditionStatusesAndValues(n,s),i&&this.updateJoinOperatorsDisabled(),this.lastUiCompletePosition=n},t.prototype.getPlaceholderText=function(e,o){var n=this.translate(e);if(cc(this.filterPlaceholder)){var i=this.filterPlaceholder,s=this.eTypes[o].getValue(),a=this.translate(s);n=i({filterOptionKey:s,filterOption:a,placeholder:n})}else typeof this.filterPlaceholder=="string"&&(n=this.filterPlaceholder);return n},t.prototype.resetPlaceholder=function(){var e=this,o=this.localeService.getLocaleTextFunc();this.forEachInput(function(n,i,s,a){if(n instanceof Zn){var l=i===0&&a>1?"inRangeStart":i===0?"filterOoo":"inRangeEnd",c=i===0&&a>1?o("ariaFilterFromValue","Filter from value"):i===0?o("ariaFilterValue","Filter Value"):o("ariaFilterToValue","Filter to Value");n.setInputPlaceholder(e.getPlaceholderText(l,s)),n.setInputAriaLabel(c)}})},t.prototype.setElementValue=function(e,o,n){e instanceof Zn&&e.setValue(o!=null?String(o):null,!0)},t.prototype.setElementDisplayed=function(e,o){e instanceof Re&&xe(e.getGui(),o)},t.prototype.setElementDisabled=function(e,o){e instanceof Re&&Lr(e.getGui(),o)},t.prototype.attachElementOnChange=function(e,o){e instanceof Zn&&e.onValueChange(o)},t.prototype.forEachInput=function(e){var o=this;this.getConditionTypes().forEach(function(n,i){o.forEachPositionTypeInput(i,n,e)})},t.prototype.forEachPositionInput=function(e,o){var n=this.getConditionType(e);this.forEachPositionTypeInput(e,n,o)},t.prototype.forEachPositionTypeInput=function(e,o,n){for(var i=this.getNumberOfInputs(o),s=this.getInputs(e),a=0;a<s.length;a++){var l=s[a];l!=null&&n(l,a,e,i)}},t.prototype.isConditionDisabled=function(e,o){return this.isReadOnly()?!0:e===0?!1:e>o+1},t.prototype.isConditionBodyVisible=function(e){var o=this.getConditionType(e),n=this.getNumberOfInputs(o);return n>0},t.prototype.isConditionUiComplete=function(e){if(e>=this.getNumConditions())return!1;var o=this.getConditionType(e);return!(o===t.EMPTY||this.getValues(e).some(function(n){return n==null}))},t.prototype.getNumConditions=function(){return this.eTypes.length},t.prototype.getUiCompleteConditions=function(){for(var e=[],o=0;o<this.getNumConditions();o++)this.isConditionUiComplete(o)&&e.push(this.createCondition(o));return e},t.prototype.createMissingConditionsAndOperators=function(){if(!this.isReadOnly())for(var e=this.getNumConditions();e<this.numAlwaysVisibleConditions;e++)this.createJoinOperatorPanel(),this.createOption()},t.prototype.resetUiToDefaults=function(e){var o=this;return this.removeConditionsAndOperators(this.isReadOnly()?1:this.numAlwaysVisibleConditions),this.eTypes.forEach(function(n){return o.resetType(n)}),this.eJoinOperatorsAnd.forEach(function(n,i){return o.resetJoinOperatorAnd(n,i,o.joinOperatorId+i)}),this.eJoinOperatorsOr.forEach(function(n,i){return o.resetJoinOperatorOr(n,i,o.joinOperatorId+i)}),this.joinOperatorId++,this.forEachInput(function(n){return o.resetInput(n)}),this.resetPlaceholder(),this.createMissingConditionsAndOperators(),this.lastUiCompletePosition=null,e||this.onUiChanged(),on.resolve()},t.prototype.resetType=function(e){var o=this.localeService.getLocaleTextFunc(),n=o("ariaFilteringOperator","Filtering operator");e.setValue(this.optionsFactory.getDefaultOption(),!0).setAriaLabel(n).setDisabled(this.isReadOnly()||this.filterListOptions.length<=1)},t.prototype.resetJoinOperatorAnd=function(e,o,n){this.resetJoinOperator(e,o,this.isDefaultOperator("AND"),this.translate("andCondition"),n)},t.prototype.resetJoinOperatorOr=function(e,o,n){this.resetJoinOperator(e,o,this.isDefaultOperator("OR"),this.translate("orCondition"),n)},t.prototype.resetJoinOperator=function(e,o,n,i,s){this.updateJoinOperatorDisabled(e.setValue(n,!0).setName("ag-simple-filter-and-or-".concat(this.getCompId(),"-").concat(s)).setLabel(i),o)},t.prototype.updateJoinOperatorsDisabled=function(){var e=this;this.eJoinOperatorsAnd.forEach(function(o,n){return e.updateJoinOperatorDisabled(o,n)}),this.eJoinOperatorsOr.forEach(function(o,n){return e.updateJoinOperatorDisabled(o,n)})},t.prototype.updateJoinOperatorDisabled=function(e,o){e.setDisabled(this.isReadOnly()||o>0)},t.prototype.resetInput=function(e){this.setElementValue(e,null),this.setElementDisabled(e,this.isReadOnly())},t.prototype.setConditionIntoUi=function(e,o){var n=this,i=this.mapValuesFromModel(e);this.forEachInput(function(s,a,l,c){l===o&&n.setElementValue(s,i[a]!=null?i[a]:null)})},t.prototype.setValueFromFloatingFilter=function(e){var o=this;this.forEachInput(function(n,i,s,a){o.setElementValue(n,i===0&&s===0?e:null,!0)})},t.prototype.isDefaultOperator=function(e){return e===this.defaultJoinOperator},t.prototype.addChangedListeners=function(e,o){var n=this;this.isReadOnly()||(e.onValueChange(this.listener),this.forEachPositionInput(o,function(i){n.attachElementOnChange(i,n.listener)}))},t.prototype.individualConditionPasses=function(e,o){var n=this.getCellValue(e.node),i=this.mapValuesFromModel(o),s=this.optionsFactory.getCustomOption(o.type),a=this.evaluateCustomFilter(s,i,n);return a??(n==null?this.evaluateNullValue(o.type):this.evaluateNonNullValue(i,n,o,e))},t.prototype.evaluateCustomFilter=function(e,o,n){if(e!=null){var i=e.predicate;if(i!=null&&!o.some(function(s){return s==null}))return i(o,n)}},t.prototype.isBlank=function(e){return e==null||typeof e=="string"&&e.trim().length===0},t.prototype.hasInvalidInputs=function(){return!1},t.EMPTY="empty",t.BLANK="blank",t.NOT_BLANK="notBlank",t.EQUALS="equals",t.NOT_EQUAL="notEqual",t.LESS_THAN="lessThan",t.LESS_THAN_OR_EQUAL="lessThanOrEqual",t.GREATER_THAN="greaterThan",t.GREATER_THAN_OR_EQUAL="greaterThanOrEqual",t.IN_RANGE="inRange",t.CONTAINS="contains",t.NOT_CONTAINS="notContains",t.STARTS_WITH="startsWith",t.ENDS_WITH="endsWith",t}(bl),px=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),ut=function(r){px(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.setParams=function(e){r.prototype.setParams.call(this,e),this.scalarFilterParams=e},t.prototype.evaluateNullValue=function(e){switch(e){case t.EQUALS:case t.NOT_EQUAL:if(this.scalarFilterParams.includeBlanksInEquals)return!0;break;case t.GREATER_THAN:case t.GREATER_THAN_OR_EQUAL:if(this.scalarFilterParams.includeBlanksInGreaterThan)return!0;break;case t.LESS_THAN:case t.LESS_THAN_OR_EQUAL:if(this.scalarFilterParams.includeBlanksInLessThan)return!0;break;case t.IN_RANGE:if(this.scalarFilterParams.includeBlanksInRange)return!0;break;case t.BLANK:return!0;case t.NOT_BLANK:return!1}return!1},t.prototype.evaluateNonNullValue=function(e,o,n){var i=this.comparator(),s=e[0]!=null?i(e[0],o):0;switch(n.type){case t.EQUALS:return s===0;case t.NOT_EQUAL:return s!==0;case t.GREATER_THAN:return s>0;case t.GREATER_THAN_OR_EQUAL:return s>=0;case t.LESS_THAN:return s<0;case t.LESS_THAN_OR_EQUAL:return s<=0;case t.IN_RANGE:{var a=i(e[1],o);return this.scalarFilterParams.inRangeInclusive?s>=0&&a<=0:s>0&&a<0}case t.BLANK:return this.isBlank(o);case t.NOT_BLANK:return!this.isBlank(o);default:return console.warn('AG Grid: Unexpected type of filter "'+n.type+'", it looks like the filter was configured with incorrect Filter Options'),!0}},t}(Je),MC=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),Od=function(){return Od=Object.assign||function(r){for(var t,e=1,o=arguments.length;e<o;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},Od.apply(this,arguments)},hx=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},xf=1e3,Ff=1/0,LC=function(r){MC(t,r);function t(e,o,n){var i=r.call(this,o,n)||this;return i.dateFilterParams=e,i}return t.prototype.conditionToString=function(e,o){var n=e.type,i=(o||{}).numberOfInputs,s=n==Je.IN_RANGE||i===2,a=to(e.dateFrom),l=to(e.dateTo),c=this.dateFilterParams.inRangeFloatingFilterDateFormat;if(s){var u=a!==null?wr(a,c):"null",d=l!==null?wr(l,c):"null";return"".concat(u,"-").concat(d)}return a!=null?wr(a,c):"".concat(n)},t.prototype.updateParams=function(e){r.prototype.updateParams.call(this,e),this.dateFilterParams=e.dateFilterParams},t}(fh),xC=function(r){MC(t,r);function t(){var e=r.call(this,"dateFilter")||this;return e.eConditionPanelsFrom=[],e.eConditionPanelsTo=[],e.dateConditionFromComps=[],e.dateConditionToComps=[],e.minValidYear=xf,e.maxValidYear=Ff,e.minValidDate=null,e.maxValidDate=null,e}return t.prototype.afterGuiAttached=function(e){r.prototype.afterGuiAttached.call(this,e),this.dateConditionFromComps[0].afterGuiAttached(e)},t.prototype.mapValuesFromModel=function(e){var o=e||{},n=o.dateFrom,i=o.dateTo,s=o.type;return[n&&to(n)||null,i&&to(i)||null].slice(0,this.getNumberOfInputs(s))},t.prototype.comparator=function(){return this.dateFilterParams.comparator?this.dateFilterParams.comparator:this.defaultComparator.bind(this)},t.prototype.defaultComparator=function(e,o){var n=o;return o==null||n<e?-1:n>e?1:0},t.prototype.setParams=function(e){this.dateFilterParams=e,r.prototype.setParams.call(this,e);var o=function(n,i){if(e[n]!=null)if(isNaN(e[n]))console.warn("AG Grid: DateFilter ".concat(n," is not a number"));else return e[n]==null?i:Number(e[n]);return i};this.minValidYear=o("minValidYear",xf),this.maxValidYear=o("maxValidYear",Ff),this.minValidYear>this.maxValidYear&&console.warn("AG Grid: DateFilter minValidYear should be <= maxValidYear"),e.minValidDate?this.minValidDate=e.minValidDate instanceof Date?e.minValidDate:to(e.minValidDate):this.minValidDate=null,e.maxValidDate?this.maxValidDate=e.maxValidDate instanceof Date?e.maxValidDate:to(e.maxValidDate):this.maxValidDate=null,this.minValidDate&&this.maxValidDate&&this.minValidDate>this.maxValidDate&&console.warn("AG Grid: DateFilter minValidDate should be <= maxValidDate"),this.filterModelFormatter=new LC(this.dateFilterParams,this.localeService,this.optionsFactory)},t.prototype.createDateCompWrapper=function(e){var o=this,n=new EC(this.getContext(),this.userComponentFactory,{onDateChanged:function(){return o.onUiChanged()},filterParams:this.dateFilterParams},e);return this.addDestroyFunc(function(){return n.destroy()}),n},t.prototype.setElementValue=function(e,o){e.setDate(o)},t.prototype.setElementDisplayed=function(e,o){e.setDisplayed(o)},t.prototype.setElementDisabled=function(e,o){e.setDisabled(o)},t.prototype.getDefaultFilterOptions=function(){return t.DEFAULT_FILTER_OPTIONS},t.prototype.createValueElement=function(){var e=document.createElement("div");return e.classList.add("ag-filter-body"),this.createFromToElement(e,this.eConditionPanelsFrom,this.dateConditionFromComps,"from"),this.createFromToElement(e,this.eConditionPanelsTo,this.dateConditionToComps,"to"),e},t.prototype.createFromToElement=function(e,o,n,i){var s=document.createElement("div");s.classList.add("ag-filter-".concat(i)),s.classList.add("ag-filter-date-".concat(i)),o.push(s),e.appendChild(s),n.push(this.createDateCompWrapper(s))},t.prototype.removeValueElements=function(e,o){this.removeDateComps(this.dateConditionFromComps,e,o),this.removeDateComps(this.dateConditionToComps,e,o),this.removeItems(this.eConditionPanelsFrom,e,o),this.removeItems(this.eConditionPanelsTo,e,o)},t.prototype.removeDateComps=function(e,o,n){var i=this.removeItems(e,o,n);i.forEach(function(s){return s.destroy()})},t.prototype.isValidDateValue=function(e){if(e===null)return!1;if(this.minValidDate){if(e<this.minValidDate)return!1}else if(e.getUTCFullYear()<this.minValidYear)return!1;if(this.maxValidDate){if(e>this.maxValidDate)return!1}else if(e.getUTCFullYear()>this.maxValidYear)return!1;return!0},t.prototype.isConditionUiComplete=function(e){var o=this;if(!r.prototype.isConditionUiComplete.call(this,e))return!1;var n=!0;return this.forEachInput(function(i,s,a,l){a!==e||!n||s>=l||(n=n&&o.isValidDateValue(i.getDate()))}),n},t.prototype.areSimpleModelsEqual=function(e,o){return e.dateFrom===o.dateFrom&&e.dateTo===o.dateTo&&e.type===o.type},t.prototype.getFilterType=function(){return"date"},t.prototype.createCondition=function(e){var o=this.getConditionType(e),n={},i=this.getValues(e);return i.length>0&&(n.dateFrom=bo(i[0])),i.length>1&&(n.dateTo=bo(i[1])),Od({dateFrom:null,dateTo:null,filterType:this.getFilterType(),type:o},n)},t.prototype.resetPlaceholder=function(){var e=this.localeService.getLocaleTextFunc(),o=this.translate("dateFormatOoo"),n=e("ariaFilterValue","Filter Value");this.forEachInput(function(i){i.setInputPlaceholder(o),i.setInputAriaLabel(n)})},t.prototype.getInputs=function(e){return e>=this.dateConditionFromComps.length?[null,null]:[this.dateConditionFromComps[e],this.dateConditionToComps[e]]},t.prototype.getValues=function(e){var o=[];return this.forEachPositionInput(e,function(n,i,s,a){i<a&&o.push(n.getDate())}),o},t.prototype.translate=function(e){return e===ut.LESS_THAN?r.prototype.translate.call(this,"before"):e===ut.GREATER_THAN?r.prototype.translate.call(this,"after"):r.prototype.translate.call(this,e)},t.prototype.getModelAsString=function(e){var o;return(o=this.filterModelFormatter.getModelAsString(e))!==null&&o!==void 0?o:""},t.DEFAULT_FILTER_OPTIONS=[ut.EQUALS,ut.NOT_EQUAL,ut.LESS_THAN,ut.GREATER_THAN,ut.IN_RANGE,ut.BLANK,ut.NOT_BLANK],hx([y("userComponentFactory")],t.prototype,"userComponentFactory",void 0),t}(ut),fx=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),FC=function(r){fx(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getDefaultDebounceMs=function(){return 0},t.prototype.destroy=function(){r.prototype.destroy.call(this)},t.prototype.isEventFromFloatingFilter=function(e){return e&&e.afterFloatingFilter},t.prototype.isEventFromDataChange=function(e){return e==null?void 0:e.afterDataChange},t.prototype.getLastType=function(){return this.lastType},t.prototype.isReadOnly=function(){return this.readOnly},t.prototype.setLastTypeFromModel=function(e){if(!e){this.lastType=this.optionsFactory.getDefaultOption();return}var o=e.operator,n;if(o){var i=e;n=i.conditions[0]}else n=e;this.lastType=n.type},t.prototype.canWeEditAfterModelFromParentFilter=function(e){if(!e)return this.isTypeEditable(this.lastType);var o=e.operator;if(o)return!1;var n=e;return this.isTypeEditable(n.type)},t.prototype.init=function(e){this.setSimpleParams(e,!1)},t.prototype.setSimpleParams=function(e,o){o===void 0&&(o=!0),this.optionsFactory=new RC,this.optionsFactory.init(e.filterParams,this.getDefaultFilterOptions()),o||(this.lastType=this.optionsFactory.getDefaultOption()),this.readOnly=!!e.filterParams.readOnly;var n=this.isTypeEditable(this.lastType);this.setEditable(n)},t.prototype.onParamsUpdated=function(e){this.setSimpleParams(e)},t.prototype.doesFilterHaveSingleInput=function(e){var o=this.optionsFactory.getCustomOption(e),n=(o||{}).numberOfInputs;return n==null||n==1},t.prototype.isTypeEditable=function(e){var o=[Je.IN_RANGE,Je.EMPTY,Je.BLANK,Je.NOT_BLANK];return!!e&&!this.isReadOnly()&&this.doesFilterHaveSingleInput(e)&&o.indexOf(e)<0},t}(Re),gx=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),ru=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},vx=function(r){gx(t,r);function t(){return r.call(this,`
            <div class="ag-floating-filter-input" role="presentation">
                <ag-input-text-field ref="eReadOnlyText"></ag-input-text-field>
                <div ref="eDateWrapper" style="display: flex;"></div>
            </div>`)||this}return t.prototype.getDefaultFilterOptions=function(){return xC.DEFAULT_FILTER_OPTIONS},t.prototype.init=function(e){r.prototype.init.call(this,e),this.params=e,this.filterParams=e.filterParams,this.createDateComponent(),this.filterModelFormatter=new LC(this.filterParams,this.localeService,this.optionsFactory);var o=this.localeService.getLocaleTextFunc();this.eReadOnlyText.setDisabled(!0).setInputAriaLabel(o("ariaDateFilterInput","Date Filter Input"))},t.prototype.onParamsUpdated=function(e){r.prototype.onParamsUpdated.call(this,e),this.params=e,this.filterParams=e.filterParams,this.updateDateComponent(),this.filterModelFormatter.updateParams({optionsFactory:this.optionsFactory,dateFilterParams:this.filterParams}),this.updateCompOnModelChange(e.currentParentModel())},t.prototype.updateCompOnModelChange=function(e){var o=!this.isReadOnly()&&this.canWeEditAfterModelFromParentFilter(e);if(this.setEditable(o),o){if(e){var n=e;this.dateComp.setDate(to(n.dateFrom))}else this.dateComp.setDate(null);this.eReadOnlyText.setValue("")}else this.eReadOnlyText.setValue(this.filterModelFormatter.getModelAsString(e)),this.dateComp.setDate(null)},t.prototype.setEditable=function(e){xe(this.eDateWrapper,e),xe(this.eReadOnlyText.getGui(),!e)},t.prototype.onParentModelChanged=function(e,o){this.isEventFromFloatingFilter(o)||this.isEventFromDataChange(o)||(r.prototype.setLastTypeFromModel.call(this,e),this.updateCompOnModelChange(e))},t.prototype.onDateChanged=function(){var e=this,o=this.dateComp.getDate(),n=bo(o);this.params.parentFilterInstance(function(i){if(i){var s=to(n);i.onFloatingFilterChanged(e.getLastType()||null,s)}})},t.prototype.getDateComponentParams=function(){var e=bl.getDebounceMs(this.params.filterParams,this.getDefaultDebounceMs());return{onDateChanged:Eo(this.onDateChanged.bind(this),e),filterParams:this.params.column.getColDef().filterParams}},t.prototype.createDateComponent=function(){var e=this;this.dateComp=new EC(this.getContext(),this.userComponentFactory,this.getDateComponentParams(),this.eDateWrapper),this.addDestroyFunc(function(){return e.dateComp.destroy()})},t.prototype.updateDateComponent=function(){var e=this.getDateComponentParams(),o=this.gridOptionsService,n=o.api,i=o.columnApi,s=o.context;e.api=n,e.columnApi=i,e.context=s,this.dateComp.updateParams(e)},t.prototype.getFilterModelFormatter=function(){return this.filterModelFormatter},ru([y("userComponentFactory")],t.prototype,"userComponentFactory",void 0),ru([ee("eReadOnlyText")],t.prototype,"eReadOnlyText",void 0),ru([ee("eDateWrapper")],t.prototype,"eDateWrapper",void 0),t}(FC),mx=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),yx=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},Cx=function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var o=e.call(r),n,i=[],s;try{for(;(t===void 0||t-- >0)&&!(n=o.next()).done;)i.push(n.value)}catch(a){s={error:a}}finally{try{n&&!n.done&&(e=o.return)&&e.call(o)}finally{if(s)throw s.error}}return i},wx=function(r){mx(t,r);function t(){return r.call(this,`
            <div class="ag-filter-filter">
                <ag-input-text-field class="ag-date-filter" ref="eDateInput"></ag-input-text-field>
            </div>`)||this}return t.prototype.destroy=function(){r.prototype.destroy.call(this)},t.prototype.init=function(e){var o=this;this.params=e,this.setParams(e);var n=this.gridOptionsService.getDocument(),i=this.eDateInput.getInputElement();this.addManagedListener(i,"mousedown",function(){o.eDateInput.isDisabled()||o.usingSafariDatePicker||i.focus()}),this.addManagedListener(i,"input",function(s){s.target===n.activeElement&&(o.eDateInput.isDisabled()||o.params.onDateChanged())})},t.prototype.setParams=function(e){var o=this.eDateInput.getInputElement(),n=this.shouldUseBrowserDatePicker(e);this.usingSafariDatePicker=n&&Wo(),o.type=n?"date":"text";var i=e.filterParams||{},s=i.minValidYear,a=i.maxValidYear,l=i.minValidDate,c=i.maxValidDate;if(l&&s&&Ee("DateFilter should not have both minValidDate and minValidYear parameters set at the same time! minValidYear will be ignored."),c&&a&&Ee("DateFilter should not have both maxValidDate and maxValidYear parameters set at the same time! maxValidYear will be ignored."),l&&c){var u=Cx([l,c].map(function(h){return h instanceof Date?h:to(h)}),2),d=u[0],p=u[1];d&&p&&d.getTime()>p.getTime()&&Ee("DateFilter parameter minValidDate should always be lower than or equal to parameter maxValidDate.")}l?l instanceof Date?o.min=wr(l):o.min=l:s&&(o.min="".concat(s,"-01-01")),c?c instanceof Date?o.max=wr(c):o.max=c:a&&(o.max="".concat(a,"-12-31"))},t.prototype.onParamsUpdated=function(e){this.params=e,this.setParams(e)},t.prototype.getDate=function(){return to(this.eDateInput.getValue())},t.prototype.setDate=function(e){this.eDateInput.setValue(bo(e,!1))},t.prototype.setInputPlaceholder=function(e){this.eDateInput.setInputPlaceholder(e)},t.prototype.setDisabled=function(e){this.eDateInput.setDisabled(e)},t.prototype.afterGuiAttached=function(e){(!e||!e.suppressFocus)&&this.eDateInput.getInputElement().focus()},t.prototype.shouldUseBrowserDatePicker=function(e){return e.filterParams&&e.filterParams.browserDatePicker!=null?e.filterParams.browserDatePicker:pc()||Zp()||Wo()&&Xp()>=14.1},yx([ee("eDateInput")],t.prototype,"eDateInput",void 0),t}(Re),_x=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),Xi=function(r){_x(t,r);function t(e,o,n){return o===void 0&&(o="ag-text-field"),n===void 0&&(n="text"),r.call(this,e,o,n)||this}return t.prototype.postConstruct=function(){r.prototype.postConstruct.call(this),this.config.allowedCharPattern&&this.preventDisallowedCharacters()},t.prototype.setValue=function(e,o){return this.eInput.value!==e&&(this.eInput.value=W(e)?e:""),r.prototype.setValue.call(this,e,o)},t.prototype.setStartValue=function(e){this.setValue(e,!0)},t.prototype.preventDisallowedCharacters=function(){var e=new RegExp("[".concat(this.config.allowedCharPattern,"]")),o=function(n){gc(n)&&n.key&&!e.test(n.key)&&n.preventDefault()};this.addManagedListener(this.eInput,"keydown",o),this.addManagedListener(this.eInput,"paste",function(n){var i,s=(i=n.clipboardData)===null||i===void 0?void 0:i.getData("text");s&&s.split("").some(function(a){return!e.test(a)})&&n.preventDefault()})},t}(Zn),Sx=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),gh=function(r){Sx(t,r);function t(e){return r.call(this,e,"ag-number-field","number")||this}return t.prototype.postConstruct=function(){var e=this;r.prototype.postConstruct.call(this),this.addManagedListener(this.eInput,"blur",function(){var o=parseFloat(e.eInput.value),n=isNaN(o)?"":e.normalizeValue(o.toString());e.value!==n&&e.setValue(n)}),this.addManagedListener(this.eInput,"wheel",this.onWheel.bind(this)),this.eInput.step="any"},t.prototype.onWheel=function(e){document.activeElement===this.eInput&&e.preventDefault()},t.prototype.normalizeValue=function(e){if(e==="")return"";this.precision!=null&&(e=this.adjustPrecision(e));var o=parseFloat(e);return this.min!=null&&o<this.min?e=this.min.toString():this.max!=null&&o>this.max&&(e=this.max.toString()),e},t.prototype.adjustPrecision=function(e,o){if(this.precision==null)return e;if(o){var n=parseFloat(e).toFixed(this.precision);return parseFloat(n).toString()}var i=String(e).split(".");if(i.length>1){if(i[1].length<=this.precision)return e;if(this.precision>0)return"".concat(i[0],".").concat(i[1].slice(0,this.precision))}return i[0]},t.prototype.setMin=function(e){return this.min===e?this:(this.min=e,dn(this.eInput,"min",e),this)},t.prototype.setMax=function(e){return this.max===e?this:(this.max=e,dn(this.eInput,"max",e),this)},t.prototype.setPrecision=function(e){return this.precision=e,this},t.prototype.setStep=function(e){return this.step===e?this:(this.step=e,dn(this.eInput,"step",e),this)},t.prototype.setValue=function(e,o){var n=this;return this.setValueOrInputValue(function(i){return r.prototype.setValue.call(n,i,o)},function(){return n},e)},t.prototype.setStartValue=function(e){var o=this;return this.setValueOrInputValue(function(n){return r.prototype.setValue.call(o,n,!0)},function(n){o.eInput.value=n},e)},t.prototype.setValueOrInputValue=function(e,o,n){if(W(n)){var i=this.isScientificNotation(n);if(i&&this.eInput.validity.valid)return e(n);if(!i){n=this.adjustPrecision(n);var s=this.normalizeValue(n);i=n!=s}if(i)return o(n)}return e(n)},t.prototype.getValue=function(){if(this.eInput.validity.valid){var e=this.eInput.value;return this.isScientificNotation(e)?this.adjustPrecision(e,!0):r.prototype.getValue.call(this)}},t.prototype.isScientificNotation=function(e){return typeof e=="string"&&e.includes("e")},t}(Xi),NC=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),GC=function(r){NC(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.conditionToString=function(e,o){var n=(o||{}).numberOfInputs,i=e.type==Je.IN_RANGE||n===2;return i?"".concat(this.formatValue(e.filter),"-").concat(this.formatValue(e.filterTo)):e.filter!=null?this.formatValue(e.filter):"".concat(e.type)},t}(fh);function Pd(r){var t=(r??{}).allowedCharPattern;return t??null}var kC=function(r){NC(t,r);function t(){var e=r.call(this,"numberFilter")||this;return e.eValuesFrom=[],e.eValuesTo=[],e}return t.prototype.refresh=function(e){return this.numberFilterParams.allowedCharPattern!==e.allowedCharPattern?!1:r.prototype.refresh.call(this,e)},t.prototype.mapValuesFromModel=function(e){var o=e||{},n=o.filter,i=o.filterTo,s=o.type;return[this.processValue(n),this.processValue(i)].slice(0,this.getNumberOfInputs(s))},t.prototype.getDefaultDebounceMs=function(){return 500},t.prototype.comparator=function(){return function(e,o){return e===o?0:e<o?1:-1}},t.prototype.setParams=function(e){this.numberFilterParams=e,r.prototype.setParams.call(this,e),this.filterModelFormatter=new GC(this.localeService,this.optionsFactory,this.numberFilterParams.numberFormatter)},t.prototype.getDefaultFilterOptions=function(){return t.DEFAULT_FILTER_OPTIONS},t.prototype.setElementValue=function(e,o,n){var i=!n&&this.numberFilterParams.numberFormatter?this.numberFilterParams.numberFormatter(o??null):o;r.prototype.setElementValue.call(this,e,i)},t.prototype.createValueElement=function(){var e=Pd(this.numberFilterParams),o=document.createElement("div");return o.classList.add("ag-filter-body"),yt(o,"presentation"),this.createFromToElement(o,this.eValuesFrom,"from",e),this.createFromToElement(o,this.eValuesTo,"to",e),o},t.prototype.createFromToElement=function(e,o,n,i){var s=this.createManagedBean(i?new Xi({allowedCharPattern:i}):new gh);s.addCssClass("ag-filter-".concat(n)),s.addCssClass("ag-filter-filter"),o.push(s),e.appendChild(s.getGui())},t.prototype.removeValueElements=function(e,o){this.removeComponents(this.eValuesFrom,e,o),this.removeComponents(this.eValuesTo,e,o)},t.prototype.getValues=function(e){var o=this,n=[];return this.forEachPositionInput(e,function(i,s,a,l){s<l&&n.push(o.processValue(o.stringToFloat(i.getValue())))}),n},t.prototype.areSimpleModelsEqual=function(e,o){return e.filter===o.filter&&e.filterTo===o.filterTo&&e.type===o.type},t.prototype.getFilterType=function(){return"number"},t.prototype.processValue=function(e){return e==null||isNaN(e)?null:e},t.prototype.stringToFloat=function(e){if(typeof e=="number")return e;var o=un(e);return o!=null&&o.trim()===""&&(o=null),this.numberFilterParams.numberParser?this.numberFilterParams.numberParser(o):o==null||o.trim()==="-"?null:parseFloat(o)},t.prototype.createCondition=function(e){var o=this.getConditionType(e),n={filterType:this.getFilterType(),type:o},i=this.getValues(e);return i.length>0&&(n.filter=i[0]),i.length>1&&(n.filterTo=i[1]),n},t.prototype.getInputs=function(e){return e>=this.eValuesFrom.length?[null,null]:[this.eValuesFrom[e],this.eValuesTo[e]]},t.prototype.getModelAsString=function(e){var o;return(o=this.filterModelFormatter.getModelAsString(e))!==null&&o!==void 0?o:""},t.prototype.hasInvalidInputs=function(){var e=!1;return this.forEachInput(function(o){if(!o.getInputElement().validity.valid){e=!0;return}}),e},t.DEFAULT_FILTER_OPTIONS=[ut.EQUALS,ut.NOT_EQUAL,ut.GREATER_THAN,ut.GREATER_THAN_OR_EQUAL,ut.LESS_THAN,ut.LESS_THAN_OR_EQUAL,ut.IN_RANGE,ut.BLANK,ut.NOT_BLANK],t}(ut),HC=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),Al=function(){return Al=Object.assign||function(r){for(var t,e=1,o=arguments.length;e<o;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},Al.apply(this,arguments)},VC=function(r){HC(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.conditionToString=function(e,o){var n=(o||{}).numberOfInputs,i=e.type==Je.IN_RANGE||n===2;return i?"".concat(e.filter,"-").concat(e.filterTo):e.filter!=null?"".concat(e.filter):"".concat(e.type)},t}(fh),vh=function(r){HC(t,r);function t(){var e=r.call(this,"textFilter")||this;return e.eValuesFrom=[],e.eValuesTo=[],e}return t.trimInput=function(e){var o=e&&e.trim();return o===""?e:o},t.prototype.getDefaultDebounceMs=function(){return 500},t.prototype.setParams=function(e){this.textFilterParams=e,r.prototype.setParams.call(this,e),this.matcher=this.getTextMatcher(),this.formatter=this.textFilterParams.textFormatter||(this.textFilterParams.caseSensitive?t.DEFAULT_FORMATTER:t.DEFAULT_LOWERCASE_FORMATTER),this.filterModelFormatter=new VC(this.localeService,this.optionsFactory)},t.prototype.getTextMatcher=function(){var e=this.textFilterParams.textCustomComparator;return e?(Ae.warnOnce("textCustomComparator is deprecated, use textMatcher instead."),function(o){var n=o.filterOption,i=o.value,s=o.filterText;return e(n,i,s)}):this.textFilterParams.textMatcher||t.DEFAULT_MATCHER},t.prototype.createCondition=function(e){var o=this.getConditionType(e),n={filterType:this.getFilterType(),type:o},i=this.getValuesWithSideEffects(e,!0);return i.length>0&&(n.filter=i[0]),i.length>1&&(n.filterTo=i[1]),n},t.prototype.getFilterType=function(){return"text"},t.prototype.areSimpleModelsEqual=function(e,o){return e.filter===o.filter&&e.filterTo===o.filterTo&&e.type===o.type},t.prototype.getInputs=function(e){return e>=this.eValuesFrom.length?[null,null]:[this.eValuesFrom[e],this.eValuesTo[e]]},t.prototype.getValues=function(e){return this.getValuesWithSideEffects(e,!1)},t.prototype.getValuesWithSideEffects=function(e,o){var n=this,i=[];return this.forEachPositionInput(e,function(s,a,l,c){var u;if(a<c){var d=un(s.getValue());o&&n.textFilterParams.trimInput&&(d=(u=t.trimInput(d))!==null&&u!==void 0?u:null,s.setValue(d,!0)),i.push(d)}}),i},t.prototype.getDefaultFilterOptions=function(){return t.DEFAULT_FILTER_OPTIONS},t.prototype.createValueElement=function(){var e=document.createElement("div");return e.classList.add("ag-filter-body"),yt(e,"presentation"),this.createFromToElement(e,this.eValuesFrom,"from"),this.createFromToElement(e,this.eValuesTo,"to"),e},t.prototype.createFromToElement=function(e,o,n){var i=this.createManagedBean(new Xi);i.addCssClass("ag-filter-".concat(n)),i.addCssClass("ag-filter-filter"),o.push(i),e.appendChild(i.getGui())},t.prototype.removeValueElements=function(e,o){this.removeComponents(this.eValuesFrom,e,o),this.removeComponents(this.eValuesTo,e,o)},t.prototype.mapValuesFromModel=function(e){var o=e||{},n=o.filter,i=o.filterTo,s=o.type;return[n||null,i||null].slice(0,this.getNumberOfInputs(s))},t.prototype.evaluateNullValue=function(e){var o=[Je.NOT_EQUAL,Je.NOT_CONTAINS,Je.BLANK];return e?o.indexOf(e)>=0:!1},t.prototype.evaluateNonNullValue=function(e,o,n,i){var s=this,a=e.map(function(C){return s.formatter(C)})||[],l=this.formatter(o),c=this.textFilterParams,u=c.api,d=c.colDef,p=c.column,h=c.columnApi,f=c.context,g=c.textFormatter;if(n.type===Je.BLANK)return this.isBlank(o);if(n.type===Je.NOT_BLANK)return!this.isBlank(o);var _={api:u,colDef:d,column:p,columnApi:h,context:f,node:i.node,data:i.data,filterOption:n.type,value:l,textFormatter:g};return a.some(function(C){return s.matcher(Al(Al({},_),{filterText:C}))})},t.prototype.getModelAsString=function(e){var o;return(o=this.filterModelFormatter.getModelAsString(e))!==null&&o!==void 0?o:""},t.DEFAULT_FILTER_OPTIONS=[Je.CONTAINS,Je.NOT_CONTAINS,Je.EQUALS,Je.NOT_EQUAL,Je.STARTS_WITH,Je.ENDS_WITH,Je.BLANK,Je.NOT_BLANK],t.DEFAULT_FORMATTER=function(e){return e},t.DEFAULT_LOWERCASE_FORMATTER=function(e){return e==null?null:e.toString().toLowerCase()},t.DEFAULT_MATCHER=function(e){var o=e.filterOption,n=e.value,i=e.filterText;if(i==null)return!1;switch(o){case t.CONTAINS:return n.indexOf(i)>=0;case t.NOT_CONTAINS:return n.indexOf(i)<0;case t.EQUALS:return n===i;case t.NOT_EQUAL:return n!=i;case t.STARTS_WITH:return n.indexOf(i)===0;case t.ENDS_WITH:var s=n.lastIndexOf(i);return s>=0&&s===n.length-i.length;default:return!1}},t}(Je),BC=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),su=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},UC=function(r){BC(t,r);function t(e){var o=r.call(this)||this;return o.params=e,o.valueChangedListener=function(){},o}return t.prototype.setupGui=function(e){var o=this,n;this.eFloatingFilterTextInput=this.createManagedBean(new Xi((n=this.params)===null||n===void 0?void 0:n.config));var i=this.eFloatingFilterTextInput.getGui();e.appendChild(i),this.addManagedListener(i,"input",function(s){return o.valueChangedListener(s)}),this.addManagedListener(i,"keydown",function(s){return o.valueChangedListener(s)})},t.prototype.setEditable=function(e){this.eFloatingFilterTextInput.setDisabled(!e)},t.prototype.setAutoComplete=function(e){this.eFloatingFilterTextInput.setAutoComplete(e)},t.prototype.getValue=function(){return this.eFloatingFilterTextInput.getValue()},t.prototype.setValue=function(e,o){this.eFloatingFilterTextInput.setValue(e,o)},t.prototype.setValueChangedListener=function(e){this.valueChangedListener=e},t.prototype.setParams=function(e){this.setAriaLabel(e.ariaLabel),e.autoComplete!==void 0&&this.setAutoComplete(e.autoComplete)},t.prototype.setAriaLabel=function(e){this.eFloatingFilterTextInput.setInputAriaLabel(e)},t}(K),jC=function(r){BC(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.postConstruct=function(){this.setTemplate(`
            <div class="ag-floating-filter-input" role="presentation" ref="eFloatingFilterInputContainer"></div>
        `)},t.prototype.getDefaultDebounceMs=function(){return 500},t.prototype.onParentModelChanged=function(e,o){this.isEventFromFloatingFilter(o)||this.isEventFromDataChange(o)||(this.setLastTypeFromModel(e),this.setEditable(this.canWeEditAfterModelFromParentFilter(e)),this.floatingFilterInputService.setValue(this.getFilterModelFormatter().getModelAsString(e)))},t.prototype.init=function(e){this.setupFloatingFilterInputService(e),r.prototype.init.call(this,e),this.setTextInputParams(e)},t.prototype.setupFloatingFilterInputService=function(e){this.floatingFilterInputService=this.createFloatingFilterInputService(e),this.floatingFilterInputService.setupGui(this.eFloatingFilterInputContainer)},t.prototype.setTextInputParams=function(e){var o;this.params=e;var n=(o=e.browserAutoComplete)!==null&&o!==void 0?o:!1;if(this.floatingFilterInputService.setParams({ariaLabel:this.getAriaLabel(e),autoComplete:n}),this.applyActive=bl.isUseApplyButton(this.params.filterParams),!this.isReadOnly()){var i=bl.getDebounceMs(this.params.filterParams,this.getDefaultDebounceMs()),s=Eo(this.syncUpWithParentFilter.bind(this),i);this.floatingFilterInputService.setValueChangedListener(s)}},t.prototype.onParamsUpdated=function(e){r.prototype.onParamsUpdated.call(this,e),this.setTextInputParams(e)},t.prototype.recreateFloatingFilterInputService=function(e){var o=this.floatingFilterInputService.getValue();Et(this.eFloatingFilterInputContainer),this.destroyBean(this.floatingFilterInputService),this.setupFloatingFilterInputService(e),this.floatingFilterInputService.setValue(o,!0)},t.prototype.getAriaLabel=function(e){var o=this.columnModel.getDisplayNameForColumn(e.column,"header",!0),n=this.localeService.getLocaleTextFunc();return"".concat(o," ").concat(n("ariaFilterInput","Filter Input"))},t.prototype.syncUpWithParentFilter=function(e){var o=this,n=e.key===N.ENTER;if(!(this.applyActive&&!n)){var i=this.floatingFilterInputService.getValue();this.params.filterParams.trimInput&&(i=vh.trimInput(i),this.floatingFilterInputService.setValue(i,!0)),this.params.parentFilterInstance(function(s){s&&s.onFloatingFilterChanged(o.getLastType()||null,i||null)})}},t.prototype.setEditable=function(e){this.floatingFilterInputService.setEditable(e)},su([y("columnModel")],t.prototype,"columnModel",void 0),su([ee("eFloatingFilterInputContainer")],t.prototype,"eFloatingFilterInputContainer",void 0),su([Q],t.prototype,"postConstruct",null),t}(FC),WC=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),Ex=function(r){WC(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.valueChangedListener=function(){},e.numberInputActive=!0,e}return t.prototype.setupGui=function(e){var o=this;this.eFloatingFilterNumberInput=this.createManagedBean(new gh),this.eFloatingFilterTextInput=this.createManagedBean(new Xi),this.eFloatingFilterTextInput.setDisabled(!0);var n=this.eFloatingFilterNumberInput.getGui(),i=this.eFloatingFilterTextInput.getGui();e.appendChild(n),e.appendChild(i),this.setupListeners(n,function(s){return o.valueChangedListener(s)}),this.setupListeners(i,function(s){return o.valueChangedListener(s)})},t.prototype.setEditable=function(e){this.numberInputActive=e,this.eFloatingFilterNumberInput.setDisplayed(this.numberInputActive),this.eFloatingFilterTextInput.setDisplayed(!this.numberInputActive)},t.prototype.setAutoComplete=function(e){this.eFloatingFilterNumberInput.setAutoComplete(e),this.eFloatingFilterTextInput.setAutoComplete(e)},t.prototype.getValue=function(){return this.getActiveInputElement().getValue()},t.prototype.setValue=function(e,o){this.getActiveInputElement().setValue(e,o)},t.prototype.getActiveInputElement=function(){return this.numberInputActive?this.eFloatingFilterNumberInput:this.eFloatingFilterTextInput},t.prototype.setValueChangedListener=function(e){this.valueChangedListener=e},t.prototype.setupListeners=function(e,o){this.addManagedListener(e,"input",o),this.addManagedListener(e,"keydown",o)},t.prototype.setParams=function(e){this.setAriaLabel(e.ariaLabel),e.autoComplete!==void 0&&this.setAutoComplete(e.autoComplete)},t.prototype.setAriaLabel=function(e){this.eFloatingFilterNumberInput.setInputAriaLabel(e),this.eFloatingFilterTextInput.setInputAriaLabel(e)},t}(K),Rx=function(r){WC(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.init=function(e){var o;r.prototype.init.call(this,e),this.filterModelFormatter=new GC(this.localeService,this.optionsFactory,(o=e.filterParams)===null||o===void 0?void 0:o.numberFormatter)},t.prototype.onParamsUpdated=function(e){var o=Pd(e.filterParams);o!==this.allowedCharPattern&&this.recreateFloatingFilterInputService(e),r.prototype.onParamsUpdated.call(this,e),this.filterModelFormatter.updateParams({optionsFactory:this.optionsFactory})},t.prototype.getDefaultFilterOptions=function(){return kC.DEFAULT_FILTER_OPTIONS},t.prototype.getFilterModelFormatter=function(){return this.filterModelFormatter},t.prototype.createFloatingFilterInputService=function(e){return this.allowedCharPattern=Pd(e.filterParams),this.allowedCharPattern?this.createManagedBean(new UC({config:{allowedCharPattern:this.allowedCharPattern}})):this.createManagedBean(new Ex)},t}(jC),Tx=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),bx=function(r){Tx(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.init=function(e){r.prototype.init.call(this,e),this.filterModelFormatter=new VC(this.localeService,this.optionsFactory)},t.prototype.onParamsUpdated=function(e){r.prototype.onParamsUpdated.call(this,e),this.filterModelFormatter.updateParams({optionsFactory:this.optionsFactory})},t.prototype.getDefaultFilterOptions=function(){return vh.DEFAULT_FILTER_OPTIONS},t.prototype.getFilterModelFormatter=function(){return this.filterModelFormatter},t.prototype.createFloatingFilterInputService=function(){return this.createManagedBean(new UC)},t}(jC),fo=function(){function r(t,e){e===void 0&&(e=!1);var o=this;this.destroyFuncs=[],this.touching=!1,this.eventService=new si,this.eElement=t,this.preventMouseClick=e;var n=this.onTouchStart.bind(this),i=this.onTouchMove.bind(this),s=this.onTouchEnd.bind(this);this.eElement.addEventListener("touchstart",n,{passive:!0}),this.eElement.addEventListener("touchmove",i,{passive:!0}),this.eElement.addEventListener("touchend",s,{passive:!1}),this.destroyFuncs.push(function(){o.eElement.removeEventListener("touchstart",n,{passive:!0}),o.eElement.removeEventListener("touchmove",i,{passive:!0}),o.eElement.removeEventListener("touchend",s,{passive:!1})})}return r.prototype.getActiveTouch=function(t){for(var e=0;e<t.length;e++){var o=t[e].identifier===this.touchStart.identifier;if(o)return t[e]}return null},r.prototype.addEventListener=function(t,e){this.eventService.addEventListener(t,e)},r.prototype.removeEventListener=function(t,e){this.eventService.removeEventListener(t,e)},r.prototype.onTouchStart=function(t){var e=this;if(!this.touching){this.touchStart=t.touches[0],this.touching=!0,this.moved=!1;var o=this.touchStart;window.setTimeout(function(){var n=e.touchStart===o;if(e.touching&&n&&!e.moved){e.moved=!0;var i={type:r.EVENT_LONG_TAP,touchStart:e.touchStart,touchEvent:t};e.eventService.dispatchEvent(i)}},500)}},r.prototype.onTouchMove=function(t){if(this.touching){var e=this.getActiveTouch(t.touches);if(e){var o=!dh(e,this.touchStart,4);o&&(this.moved=!0)}}},r.prototype.onTouchEnd=function(t){if(this.touching){if(!this.moved){var e={type:r.EVENT_TAP,touchStart:this.touchStart};this.eventService.dispatchEvent(e),this.checkForDoubleTap()}this.preventMouseClick&&t.cancelable&&t.preventDefault(),this.touching=!1}},r.prototype.checkForDoubleTap=function(){var t=new Date().getTime();if(this.lastTapTime&&this.lastTapTime>0){var e=t-this.lastTapTime;if(e>r.DOUBLE_TAP_MILLIS){var o={type:r.EVENT_DOUBLE_TAP,touchStart:this.touchStart};this.eventService.dispatchEvent(o),this.lastTapTime=null}else this.lastTapTime=t}else this.lastTapTime=t},r.prototype.destroy=function(){this.destroyFuncs.forEach(function(t){return t()})},r.EVENT_TAP="tap",r.EVENT_DOUBLE_TAP="doubleTap",r.EVENT_LONG_TAP="longTap",r.DOUBLE_TAP_MILLIS=500,r}(),Ax=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),fi=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},mh=function(r){Ax(t,r);function t(e){var o=r.call(this)||this;return e||o.setTemplate(t.TEMPLATE),o}return t.prototype.attachCustomElements=function(e,o,n,i,s){this.eSortOrder=e,this.eSortAsc=o,this.eSortDesc=n,this.eSortMixed=i,this.eSortNone=s},t.prototype.setupSort=function(e,o){var n=this;o===void 0&&(o=!1),this.column=e,this.suppressOrder=o,this.setupMultiSortIndicator(),this.column.isSortable()&&(this.addInIcon("sortAscending",this.eSortAsc,e),this.addInIcon("sortDescending",this.eSortDesc,e),this.addInIcon("sortUnSort",this.eSortNone,e),this.addManagedPropertyListener("unSortIcon",function(){return n.updateIcons()}),this.addManagedListener(this.eventService,w.EVENT_NEW_COLUMNS_LOADED,function(){return n.updateIcons()}),this.addManagedListener(this.eventService,w.EVENT_SORT_CHANGED,function(){return n.onSortChanged()}),this.addManagedListener(this.eventService,w.EVENT_COLUMN_ROW_GROUP_CHANGED,function(){return n.onSortChanged()}),this.onSortChanged())},t.prototype.addInIcon=function(e,o,n){if(o!=null){var i=at(e,this.gridOptionsService,n);i&&o.appendChild(i)}},t.prototype.onSortChanged=function(){this.updateIcons(),this.suppressOrder||this.updateSortOrder()},t.prototype.updateIcons=function(){var e=this.sortController.getDisplaySortForColumn(this.column);if(this.eSortAsc){var o=e==="asc";xe(this.eSortAsc,o,{skipAriaHidden:!0})}if(this.eSortDesc){var n=e==="desc";xe(this.eSortDesc,n,{skipAriaHidden:!0})}if(this.eSortNone){var i=!this.column.getColDef().unSortIcon&&!this.gridOptionsService.get("unSortIcon"),s=e==null;xe(this.eSortNone,!i&&s,{skipAriaHidden:!0})}},t.prototype.setupMultiSortIndicator=function(){var e=this;this.addInIcon("sortUnSort",this.eSortMixed,this.column);var o=this.column.getColDef().showRowGroup,n=this.gridOptionsService.isColumnsSortingCoupledToGroup();n&&o&&(this.addManagedListener(this.eventService,w.EVENT_SORT_CHANGED,function(){return e.updateMultiSortIndicator()}),this.addManagedListener(this.eventService,w.EVENT_COLUMN_ROW_GROUP_CHANGED,function(){return e.updateMultiSortIndicator()}),this.updateMultiSortIndicator())},t.prototype.updateMultiSortIndicator=function(){if(this.eSortMixed){var e=this.sortController.getDisplaySortForColumn(this.column)==="mixed";xe(this.eSortMixed,e,{skipAriaHidden:!0})}},t.prototype.updateSortOrder=function(){var e=this,o;if(this.eSortOrder){var n=this.sortController.getColumnsWithSortingOrdered(),i=(o=this.sortController.getDisplaySortIndexForColumn(this.column))!==null&&o!==void 0?o:-1,s=n.some(function(l){var c;return(c=e.sortController.getDisplaySortIndexForColumn(l))!==null&&c!==void 0?c:-1>=1}),a=i>=0&&s;xe(this.eSortOrder,a,{skipAriaHidden:!0}),i>=0?this.eSortOrder.innerHTML=(i+1).toString():Et(this.eSortOrder)}},t.TEMPLATE=`<span class="ag-sort-indicator-container">
            <span ref="eSortOrder" class="ag-sort-indicator-icon ag-sort-order ag-hidden" aria-hidden="true"></span>
            <span ref="eSortAsc" class="ag-sort-indicator-icon ag-sort-ascending-icon ag-hidden" aria-hidden="true"></span>
            <span ref="eSortDesc" class="ag-sort-indicator-icon ag-sort-descending-icon ag-hidden" aria-hidden="true"></span>
            <span ref="eSortMixed" class="ag-sort-indicator-icon ag-sort-mixed-icon ag-hidden" aria-hidden="true"></span>
            <span ref="eSortNone" class="ag-sort-indicator-icon ag-sort-none-icon ag-hidden" aria-hidden="true"></span>
        </span>`,fi([ee("eSortOrder")],t.prototype,"eSortOrder",void 0),fi([ee("eSortAsc")],t.prototype,"eSortAsc",void 0),fi([ee("eSortDesc")],t.prototype,"eSortDesc",void 0),fi([ee("eSortMixed")],t.prototype,"eSortMixed",void 0),fi([ee("eSortNone")],t.prototype,"eSortNone",void 0),fi([y("columnModel")],t.prototype,"columnModel",void 0),fi([y("sortController")],t.prototype,"sortController",void 0),t}(Re),Ox=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),ro=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},Px=function(r){Ox(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.lastMovingChanged=0,e}return t.prototype.destroy=function(){r.prototype.destroy.call(this)},t.prototype.refresh=function(e){return this.params=e,this.workOutTemplate()!=this.currentTemplate||this.workOutShowMenu()!=this.currentShowMenu||this.workOutSort()!=this.currentSort||this.shouldSuppressMenuHide()!=this.currentSuppressMenuHide?!1:(this.setDisplayName(e),!0)},t.prototype.workOutTemplate=function(){var e=Ly(this.params.template,t.TEMPLATE);return e=e&&e.trim?e.trim():e,e},t.prototype.init=function(e){this.params=e,this.currentTemplate=this.workOutTemplate(),this.setTemplate(this.currentTemplate),this.setupTap(),this.setupIcons(e.column),this.setMenu(),this.setupSort(),this.setupFilterIcon(),this.setDisplayName(e)},t.prototype.setDisplayName=function(e){if(this.currentDisplayName!=e.displayName){this.currentDisplayName=e.displayName;var o=ht(this.currentDisplayName);this.eText&&(this.eText.innerHTML=o)}},t.prototype.setupIcons=function(e){this.addInIcon("menu",this.eMenu,e),this.addInIcon("filter",this.eFilter,e)},t.prototype.addInIcon=function(e,o,n){if(o!=null){var i=at(e,this.gridOptionsService,n);i&&o.appendChild(i)}},t.prototype.setupTap=function(){var e=this,o=this.gridOptionsService;if(!o.get("suppressTouch")){var n=new fo(this.getGui(),!0),i=o.get("suppressMenuHide"),s=i&&W(this.eMenu),a=s?new fo(this.eMenu,!0):n;if(this.params.enableMenu){var l=s?"EVENT_TAP":"EVENT_LONG_TAP",c=function(d){o.api.showColumnMenuAfterMouseClick(e.params.column,d.touchStart)};this.addManagedListener(a,fo[l],c)}if(this.params.enableSorting){var u=function(d){var p=d.touchStart.target;i&&e.eMenu.contains(p)||e.sortController.progressSort(e.params.column,!1,"uiColumnSorted")};this.addManagedListener(n,fo.EVENT_TAP,u)}this.addDestroyFunc(function(){return n.destroy()}),s&&this.addDestroyFunc(function(){return a.destroy()})}},t.prototype.workOutShowMenu=function(){var e=!this.gridOptionsService.get("suppressMenuHide"),o=ai()&&e,n=this.params.enableMenu&&!o;return n},t.prototype.shouldSuppressMenuHide=function(){return this.gridOptionsService.get("suppressMenuHide")},t.prototype.setMenu=function(){var e=this;if(this.eMenu){if(this.currentShowMenu=this.workOutShowMenu(),!this.currentShowMenu){bn(this.eMenu);return}this.currentSuppressMenuHide=this.shouldSuppressMenuHide(),this.addManagedListener(this.eMenu,"click",function(){return e.showMenu(e.eMenu)}),this.eMenu.classList.toggle("ag-header-menu-always-show",this.currentSuppressMenuHide)}},t.prototype.showMenu=function(e){e||(e=this.eMenu),this.menuFactory.showMenuAfterButtonClick(this.params.column,e,"columnMenu")},t.prototype.workOutSort=function(){return this.params.enableSorting},t.prototype.setupSort=function(){var e=this;if(this.currentSort=this.params.enableSorting,this.eSortIndicator||(this.eSortIndicator=this.context.createBean(new mh(!0)),this.eSortIndicator.attachCustomElements(this.eSortOrder,this.eSortAsc,this.eSortDesc,this.eSortMixed,this.eSortNone)),this.eSortIndicator.setupSort(this.params.column),!!this.currentSort){this.addManagedListener(this.params.column,We.EVENT_MOVING_CHANGED,function(){e.lastMovingChanged=new Date().getTime()}),this.eLabel&&this.addManagedListener(this.eLabel,"click",function(n){var i=e.params.column.isMoving(),s=new Date().getTime(),a=s-e.lastMovingChanged<50,l=i||a;if(!l){var c=e.gridOptionsService.get("multiSortKey")==="ctrl",u=c?n.ctrlKey||n.metaKey:n.shiftKey;e.params.progressSort(u)}});var o=function(){if(e.addOrRemoveCssClass("ag-header-cell-sorted-asc",e.params.column.isSortAscending()),e.addOrRemoveCssClass("ag-header-cell-sorted-desc",e.params.column.isSortDescending()),e.addOrRemoveCssClass("ag-header-cell-sorted-none",e.params.column.isSortNone()),e.params.column.getColDef().showRowGroup){var n=e.columnModel.getSourceColumnsForGroupColumn(e.params.column),i=n==null?void 0:n.every(function(a){return e.params.column.getSort()==a.getSort()}),s=!i;e.addOrRemoveCssClass("ag-header-cell-sorted-mixed",s)}};this.addManagedListener(this.eventService,w.EVENT_SORT_CHANGED,o),this.addManagedListener(this.eventService,w.EVENT_COLUMN_ROW_GROUP_CHANGED,o)}},t.prototype.setupFilterIcon=function(){this.eFilter&&(this.addManagedListener(this.params.column,We.EVENT_FILTER_CHANGED,this.onFilterChanged.bind(this)),this.onFilterChanged())},t.prototype.onFilterChanged=function(){var e=this.params.column.isFilterActive();xe(this.eFilter,e,{skipAriaHidden:!0})},t.TEMPLATE=`<div class="ag-cell-label-container" role="presentation">
            <span ref="eMenu" class="ag-header-icon ag-header-cell-menu-button" aria-hidden="true"></span>
            <div ref="eLabel" class="ag-header-cell-label" role="presentation">
                <span ref="eText" class="ag-header-cell-text"></span>
                <span ref="eFilter" class="ag-header-icon ag-header-label-icon ag-filter-icon" aria-hidden="true"></span>
                <ag-sort-indicator ref="eSortIndicator"></ag-sort-indicator>
            </div>
        </div>`,ro([y("sortController")],t.prototype,"sortController",void 0),ro([y("menuFactory")],t.prototype,"menuFactory",void 0),ro([y("columnModel")],t.prototype,"columnModel",void 0),ro([ee("eFilter")],t.prototype,"eFilter",void 0),ro([ee("eSortIndicator")],t.prototype,"eSortIndicator",void 0),ro([ee("eMenu")],t.prototype,"eMenu",void 0),ro([ee("eLabel")],t.prototype,"eLabel",void 0),ro([ee("eText")],t.prototype,"eText",void 0),ro([ee("eSortOrder")],t.prototype,"eSortOrder",void 0),ro([ee("eSortAsc")],t.prototype,"eSortAsc",void 0),ro([ee("eSortDesc")],t.prototype,"eSortDesc",void 0),ro([ee("eSortMixed")],t.prototype,"eSortMixed",void 0),ro([ee("eSortNone")],t.prototype,"eSortNone",void 0),t}(Re),Ix=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),au=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},Dx=function(r){Ix(t,r);function t(){return r.call(this,t.TEMPLATE)||this}return t.prototype.destroy=function(){r.prototype.destroy.call(this)},t.prototype.init=function(e){this.params=e,this.checkWarnings(),this.setupLabel(),this.addGroupExpandIcon(),this.setupExpandIcons()},t.prototype.checkWarnings=function(){var e=this.params;e.template&&Ee("A template was provided for Header Group Comp - templates are only supported for Header Comps (not groups)")},t.prototype.setupExpandIcons=function(){var e=this;this.addInIcon("columnGroupOpened","agOpened"),this.addInIcon("columnGroupClosed","agClosed");var o=function(s){if(!Uo(s)){var a=!e.params.columnGroup.isExpanded();e.columnModel.setColumnGroupOpened(e.params.columnGroup.getProvidedColumnGroup(),a,"uiColumnExpanded")}};this.addTouchAndClickListeners(this.eCloseIcon,o),this.addTouchAndClickListeners(this.eOpenIcon,o);var n=function(s){hn(s)};this.addManagedListener(this.eCloseIcon,"dblclick",n),this.addManagedListener(this.eOpenIcon,"dblclick",n),this.addManagedListener(this.getGui(),"dblclick",o),this.updateIconVisibility();var i=this.params.columnGroup.getProvidedColumnGroup();this.addManagedListener(i,st.EVENT_EXPANDED_CHANGED,this.updateIconVisibility.bind(this)),this.addManagedListener(i,st.EVENT_EXPANDABLE_CHANGED,this.updateIconVisibility.bind(this))},t.prototype.addTouchAndClickListeners=function(e,o){var n=new fo(e,!0);this.addManagedListener(n,fo.EVENT_TAP,o),this.addDestroyFunc(function(){return n.destroy()}),this.addManagedListener(e,"click",o)},t.prototype.updateIconVisibility=function(){var e=this.params.columnGroup;if(e.isExpandable()){var o=this.params.columnGroup.isExpanded();xe(this.eOpenIcon,o),xe(this.eCloseIcon,!o)}else xe(this.eOpenIcon,!1),xe(this.eCloseIcon,!1)},t.prototype.addInIcon=function(e,o){var n=at(e,this.gridOptionsService,null);n&&this.getRefElement(o).appendChild(n)},t.prototype.addGroupExpandIcon=function(){if(!this.params.columnGroup.isExpandable()){xe(this.eOpenIcon,!1),xe(this.eCloseIcon,!1);return}},t.prototype.setupLabel=function(){var e,o=this.params,n=o.displayName,i=o.columnGroup;if(W(n)){var s=ht(n);this.getRefElement("agLabel").innerHTML=s}this.addOrRemoveCssClass("ag-sticky-label",!(!((e=i.getColGroupDef())===null||e===void 0)&&e.suppressStickyLabel))},t.TEMPLATE=`<div class="ag-header-group-cell-label" ref="agContainer" role="presentation">
            <span ref="agLabel" class="ag-header-group-text" role="presentation"></span>
            <span ref="agOpened" class="ag-header-icon ag-header-expand-icon ag-header-expand-icon-expanded"></span>
            <span ref="agClosed" class="ag-header-icon ag-header-expand-icon ag-header-expand-icon-collapsed"></span>
        </div>`,au([y("columnModel")],t.prototype,"columnModel",void 0),au([ee("agOpened")],t.prototype,"eOpenIcon",void 0),au([ee("agClosed")],t.prototype,"eCloseIcon",void 0),t}(Re),Mx=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),Zi=function(r){Mx(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.isPopup=function(){return!0},t.prototype.setParentComponent=function(e){e.addCssClass("ag-has-popup"),r.prototype.setParentComponent.call(this,e)},t.prototype.destroy=function(){var e=this.parentComponent,o=e&&e.isAlive();o&&e.getGui().classList.remove("ag-has-popup"),r.prototype.destroy.call(this)},t}(Re),Lx=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),xx=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},Fx=function(r){Lx(t,r);function t(){return r.call(this,t.TEMPLATE)||this}return t.prototype.init=function(e){this.params=e,this.focusAfterAttached=e.cellStartedEdit,this.eTextArea.setMaxLength(e.maxLength||200).setCols(e.cols||60).setRows(e.rows||10),W(e.value,!0)&&this.eTextArea.setValue(e.value.toString(),!0),this.addGuiEventListener("keydown",this.onKeyDown.bind(this)),this.activateTabIndex()},t.prototype.onKeyDown=function(e){var o=e.key;(o===N.LEFT||o===N.UP||o===N.RIGHT||o===N.DOWN||e.shiftKey&&o===N.ENTER)&&e.stopPropagation()},t.prototype.afterGuiAttached=function(){var e=this.localeService.getLocaleTextFunc();this.eTextArea.setInputAriaLabel(e("ariaInputEditor","Input Editor")),this.focusAfterAttached&&this.eTextArea.getFocusableElement().focus()},t.prototype.getValue=function(){var e=this.eTextArea.getValue();return!W(e)&&!W(this.params.value)?this.params.value:this.params.parseValue(e)},t.TEMPLATE=`<div class="ag-large-text">
            <ag-input-text-area ref="eTextArea" class="ag-large-text-input"></ag-input-text-area>
        </div>`,xx([ee("eTextArea")],t.prototype,"eTextArea",void 0),t}(Zi),Nx=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),Nf=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},Gx=function(r){Nx(t,r);function t(){var e=r.call(this,`<div class="ag-cell-edit-wrapper">
                <ag-select class="ag-cell-editor" ref="eSelect"></ag-select>
            </div>`)||this;return e.startedByEnter=!1,e}return t.prototype.init=function(e){this.focusAfterAttached=e.cellStartedEdit;var o=this,n=o.eSelect,i=o.valueFormatterService,s=o.gridOptionsService,a=e.values,l=e.value,c=e.eventKey;if(pe(a)){console.warn("AG Grid: no values found for select cellEditor");return}this.startedByEnter=c!=null?c===N.ENTER:!1;var u=!1;a.forEach(function(f){var g={value:f},_=i.formatValue(e.column,null,f),C=_!=null;g.text=C?_:f,n.addOption(g),u=u||l===f}),u?n.setValue(e.value,!0):e.values.length&&n.setValue(e.values[0],!0);var d=e.valueListGap,p=e.valueListMaxWidth,h=e.valueListMaxHeight;d!=null&&n.setPickerGap(d),h!=null&&n.setPickerMaxHeight(h),p!=null&&n.setPickerMaxWidth(p),s.get("editType")!=="fullRow"&&this.addManagedListener(this.eSelect,vc.EVENT_ITEM_SELECTED,function(){return e.stopEditing()})},t.prototype.afterGuiAttached=function(){var e=this;this.focusAfterAttached&&this.eSelect.getFocusableElement().focus(),this.startedByEnter&&setTimeout(function(){e.isAlive()&&e.eSelect.showPicker()})},t.prototype.focusIn=function(){this.eSelect.getFocusableElement().focus()},t.prototype.getValue=function(){return this.eSelect.getValue()},t.prototype.isPopup=function(){return!1},Nf([y("valueFormatterService")],t.prototype,"valueFormatterService",void 0),Nf([ee("eSelect")],t.prototype,"eSelect",void 0),t}(Zi),kx=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),Hx=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},yc=function(r){kx(t,r);function t(e){var o=r.call(this,`
            <div class="ag-cell-edit-wrapper">
                `.concat(e.getTemplate(),`
            </div>`))||this;return o.cellEditorInput=e,o}return t.prototype.init=function(e){this.params=e;var o=this.eInput;this.cellEditorInput.init(o,e);var n;if(e.cellStartedEdit){this.focusAfterAttached=!0;var i=e.eventKey;i===N.BACKSPACE||e.eventKey===N.DELETE?n="":i&&i.length===1?n=i:(n=this.cellEditorInput.getStartValue(),i!==N.F2&&(this.highlightAllOnFocus=!0))}else this.focusAfterAttached=!1,n=this.cellEditorInput.getStartValue();n!=null&&o.setStartValue(n),this.addManagedListener(o.getGui(),"keydown",function(s){var a=s.key;(a===N.PAGE_UP||a===N.PAGE_DOWN)&&s.preventDefault()})},t.prototype.afterGuiAttached=function(){var e,o,n=this.localeService.getLocaleTextFunc(),i=this.eInput;if(i.setInputAriaLabel(n("ariaInputEditor","Input Editor")),!!this.focusAfterAttached){Wo()||i.getFocusableElement().focus();var s=i.getInputElement();this.highlightAllOnFocus?s.select():(o=(e=this.cellEditorInput).setCaret)===null||o===void 0||o.call(e)}},t.prototype.focusIn=function(){var e=this.eInput,o=e.getFocusableElement(),n=e.getInputElement();o.focus(),n.select()},t.prototype.getValue=function(){return this.cellEditorInput.getValue()},t.prototype.isPopup=function(){return!1},Hx([ee("eInput")],t.prototype,"eInput",void 0),t}(Zi),Vx=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),Bx=function(){function r(){}return r.prototype.getTemplate=function(){return'<ag-input-text-field class="ag-cell-editor" ref="eInput"></ag-input-text-field>'},r.prototype.init=function(t,e){this.eInput=t,this.params=e,e.maxLength!=null&&t.setMaxLength(e.maxLength)},r.prototype.getValue=function(){var t=this.eInput.getValue();return!W(t)&&!W(this.params.value)?this.params.value:this.params.parseValue(t)},r.prototype.getStartValue=function(){var t=this.params.useFormatter||this.params.column.getColDef().refData;return t?this.params.formatValue(this.params.value):this.params.value},r.prototype.setCaret=function(){var t=this.eInput.getValue(),e=W(t)&&t.length||0;e&&this.eInput.getInputElement().setSelectionRange(e,e)},r}(),Gf=function(r){Vx(t,r);function t(){return r.call(this,new Bx)||this}return t}(yc),Ux=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),jx=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},Wx="",zx="",$x=function(r){Ux(t,r);function t(){var e=r.call(this,t.TEMPLATE)||this;return e.refreshCount=0,e}return t.prototype.init=function(e){this.eValue=this.queryForHtmlElement(".ag-value-change-value"),this.eDelta=this.queryForHtmlElement(".ag-value-change-delta"),this.refresh(e)},t.prototype.showDelta=function(e,o){var n=Math.abs(o),i=e.formatValue(n),s=W(i)?i:n,a=o>=0;a?this.eDelta.innerHTML=Wx+s:this.eDelta.innerHTML=zx+s,this.eDelta.classList.toggle("ag-value-change-delta-up",a),this.eDelta.classList.toggle("ag-value-change-delta-down",!a)},t.prototype.setTimerToRemoveDelta=function(){var e=this;this.refreshCount++;var o=this.refreshCount;window.setTimeout(function(){o===e.refreshCount&&e.hideDeltaValue()},2e3)},t.prototype.hideDeltaValue=function(){this.eValue.classList.remove("ag-value-change-value-highlight"),Et(this.eDelta)},t.prototype.refresh=function(e){var o=e.value;if(o===this.lastValue||(W(e.valueFormatted)?this.eValue.innerHTML=e.valueFormatted:W(e.value)?this.eValue.innerHTML=o:Et(this.eValue),this.filterManager.isSuppressFlashingCellsBecauseFiltering()))return!1;if(typeof o=="number"&&typeof this.lastValue=="number"){var n=o-this.lastValue;this.showDelta(e,n)}return this.lastValue&&this.eValue.classList.add("ag-value-change-value-highlight"),this.setTimerToRemoveDelta(),this.lastValue=o,!0},t.TEMPLATE='<span><span class="ag-value-change-delta"></span><span class="ag-value-change-value"></span></span>',jx([y("filterManager")],t.prototype,"filterManager",void 0),t}(Re),Kx=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),Yx=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},qx=function(r){Kx(t,r);function t(){var e=r.call(this,t.TEMPLATE)||this;return e.refreshCount=0,e.eCurrent=e.queryForHtmlElement(".ag-value-slide-current"),e}return t.prototype.init=function(e){this.refresh(e)},t.prototype.addSlideAnimation=function(){var e=this;this.refreshCount++;var o=this.refreshCount;this.ePrevious&&this.getGui().removeChild(this.ePrevious),this.ePrevious=Ot('<span class="ag-value-slide-previous ag-value-slide-out"></span>'),this.ePrevious.innerHTML=this.eCurrent.innerHTML,this.getGui().insertBefore(this.ePrevious,this.eCurrent),window.setTimeout(function(){o===e.refreshCount&&e.ePrevious.classList.add("ag-value-slide-out-end")},50),window.setTimeout(function(){o===e.refreshCount&&(e.getGui().removeChild(e.ePrevious),e.ePrevious=null)},3e3)},t.prototype.refresh=function(e){var o=e.value;return pe(o)&&(o=""),o===this.lastValue||this.filterManager.isSuppressFlashingCellsBecauseFiltering()?!1:(this.addSlideAnimation(),this.lastValue=o,W(e.valueFormatted)?this.eCurrent.innerHTML=e.valueFormatted:W(e.value)?this.eCurrent.innerHTML=o:Et(this.eCurrent),!0)},t.TEMPLATE=`<span>
            <span class="ag-value-slide-current"></span>
        </span>`,Yx([y("filterManager")],t.prototype,"filterManager",void 0),t}(Re),hr=function(){return hr=Object.assign||function(r){for(var t,e=1,o=arguments.length;e<o;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},hr.apply(this,arguments)},be=function(){function r(t){this.rowIndex=null,this.key=null,this.childrenMapped={},this.displayed=!1,this.rowTop=null,this.oldRowTop=null,this.selectable=!0,this.__objectId=r.OBJECT_ID_SEQUENCE++,this.__autoHeights={},this.alreadyRendered=!1,this.highlighted=null,this.hovered=!1,this.selected=!1,this.beans=t}return r.prototype.setData=function(t){this.setDataCommon(t,!1)},r.prototype.updateData=function(t){this.setDataCommon(t,!0)},r.prototype.setDataCommon=function(t,e){var o=this.data;this.data=t,this.beans.valueCache.onDataChanged(),this.updateDataOnDetailNode(),this.checkRowSelectable(),this.resetQuickFilterAggregateText();var n=this.createDataChangedEvent(t,o,e);this.dispatchLocalEvent(n)},r.prototype.updateDataOnDetailNode=function(){this.detailNode&&(this.detailNode.data=this.data)},r.prototype.createDataChangedEvent=function(t,e,o){return{type:r.EVENT_DATA_CHANGED,node:this,oldData:e,newData:t,update:o}},r.prototype.createLocalRowEvent=function(t){return{type:t,node:this}},r.prototype.getRowIndexString=function(){return this.rowPinned==="top"?"t-"+this.rowIndex:this.rowPinned==="bottom"?"b-"+this.rowIndex:this.rowIndex.toString()},r.prototype.createDaemonNode=function(){var t=new r(this.beans);return t.id=this.id,t.data=this.data,t.__daemon=!0,t.selected=this.selected,t.level=this.level,t},r.prototype.setDataAndId=function(t,e){var o=W(this.id)?this.createDaemonNode():null,n=this.data;this.data=t,this.updateDataOnDetailNode(),this.setId(e),this.checkRowSelectable(),this.beans.selectionService.syncInRowNode(this,o);var i=this.createDataChangedEvent(t,n,!1);this.dispatchLocalEvent(i)},r.prototype.checkRowSelectable=function(){var t=this.beans.gridOptionsService.get("isRowSelectable");this.setRowSelectable(t?t(this):!0)},r.prototype.setRowSelectable=function(t,e){if(this.selectable!==t){if(this.selectable=t,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(r.EVENT_SELECTABLE_CHANGED)),e)return;var o=this.beans.gridOptionsService.get("groupSelectsChildren");if(o){var n=this.calculateSelectedFromChildren();this.setSelectedParams({newValue:n??!1,source:"selectableChanged"});return}this.isSelected()&&!this.selectable&&this.setSelectedParams({newValue:!1,source:"selectableChanged"})}},r.prototype.setId=function(t){var e=this.beans.gridOptionsService.getCallback("getRowId");if(e)if(this.data){var o=this.getGroupKeys(!0);this.id=e({data:this.data,parentKeys:o.length>0?o:void 0,level:this.level}),this.id!==null&&typeof this.id=="string"&&this.id.startsWith(r.ID_PREFIX_ROW_GROUP)&&console.error("AG Grid: Row IDs cannot start with ".concat(r.ID_PREFIX_ROW_GROUP,", this is a reserved prefix for AG Grid's row grouping feature.")),this.id!==null&&typeof this.id!="string"&&(this.id=""+this.id)}else this.id=void 0;else this.id=t},r.prototype.getGroupKeys=function(t){t===void 0&&(t=!1);var e=[],o=this;for(t&&(o=o.parent);o&&o.level>=0;)e.push(o.key),o=o.parent;return e.reverse(),e},r.prototype.isPixelInRange=function(t){return!W(this.rowTop)||!W(this.rowHeight)?!1:t>=this.rowTop&&t<this.rowTop+this.rowHeight},r.prototype.setFirstChild=function(t){this.firstChild!==t&&(this.firstChild=t,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(r.EVENT_FIRST_CHILD_CHANGED)))},r.prototype.setLastChild=function(t){this.lastChild!==t&&(this.lastChild=t,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(r.EVENT_LAST_CHILD_CHANGED)))},r.prototype.setChildIndex=function(t){this.childIndex!==t&&(this.childIndex=t,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(r.EVENT_CHILD_INDEX_CHANGED)))},r.prototype.setRowTop=function(t){this.oldRowTop=this.rowTop,this.rowTop!==t&&(this.rowTop=t,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(r.EVENT_TOP_CHANGED)),this.setDisplayed(t!==null))},r.prototype.clearRowTopAndRowIndex=function(){this.oldRowTop=null,this.setRowTop(null),this.setRowIndex(null)},r.prototype.setDisplayed=function(t){this.displayed!==t&&(this.displayed=t,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(r.EVENT_DISPLAYED_CHANGED)))},r.prototype.setDragging=function(t){this.dragging!==t&&(this.dragging=t,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(r.EVENT_DRAGGING_CHANGED)))},r.prototype.setHighlighted=function(t){t!==this.highlighted&&(this.highlighted=t,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(r.EVENT_HIGHLIGHT_CHANGED)))},r.prototype.setHovered=function(t){this.hovered!==t&&(this.hovered=t)},r.prototype.isHovered=function(){return this.hovered},r.prototype.setAllChildrenCount=function(t){this.allChildrenCount!==t&&(this.allChildrenCount=t,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(r.EVENT_ALL_CHILDREN_COUNT_CHANGED)))},r.prototype.setMaster=function(t){this.master!==t&&(this.master&&!t&&(this.expanded=!1),this.master=t,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(r.EVENT_MASTER_CHANGED)))},r.prototype.setGroup=function(t){this.group!==t&&(this.group&&!t&&(this.expanded=!1),this.group=t,this.updateHasChildren(),this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(r.EVENT_GROUP_CHANGED)))},r.prototype.setRowHeight=function(t,e){e===void 0&&(e=!1),this.rowHeight=t,this.rowHeightEstimated=e,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(r.EVENT_HEIGHT_CHANGED))},r.prototype.setRowAutoHeight=function(t,e){this.__autoHeights||(this.__autoHeights={}),this.__autoHeights[e.getId()]=t,t!=null&&(this.checkAutoHeightsDebounced==null&&(this.checkAutoHeightsDebounced=Eo(this.checkAutoHeights.bind(this),1)),this.checkAutoHeightsDebounced())},r.prototype.checkAutoHeights=function(){var t=this,e=!1,o=!0,n=0,i=this.__autoHeights;if(i!=null){var s=this.beans.columnModel.getAllDisplayedAutoHeightCols();if(s.forEach(function(l){var c=i[l.getId()];if(c==null)if(t.beans.columnModel.isColSpanActive()){var u=[];switch(l.getPinned()){case"left":u=t.beans.columnModel.getDisplayedLeftColumnsForRow(t);break;case"right":u=t.beans.columnModel.getDisplayedRightColumnsForRow(t);break;case null:u=t.beans.columnModel.getViewportCenterColumnsForRow(t);break}if(u.includes(l)){e=!0;return}c=-1}else{e=!0;return}else o=!1;c>n&&(n=c)}),!e&&((o||n<10)&&(n=this.beans.gridOptionsService.getRowHeightForNode(this).height),n!=this.rowHeight)){this.setRowHeight(n);var a=this.beans.rowModel;a.onRowHeightChangedDebounced&&a.onRowHeightChangedDebounced()}}},r.prototype.setRowIndex=function(t){this.rowIndex!==t&&(this.rowIndex=t,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(r.EVENT_ROW_INDEX_CHANGED)))},r.prototype.setUiLevel=function(t){this.uiLevel!==t&&(this.uiLevel=t,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(r.EVENT_UI_LEVEL_CHANGED)))},r.prototype.setExpanded=function(t,e){if(this.expanded!==t){this.expanded=t,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(r.EVENT_EXPANDED_CHANGED));var o=Object.assign({},this.createGlobalRowEvent(w.EVENT_ROW_GROUP_OPENED),{expanded:t,event:e||null});this.beans.rowNodeEventThrottle.dispatchExpanded(o),this.sibling&&this.beans.rowRenderer.refreshCells({rowNodes:[this]})}},r.prototype.createGlobalRowEvent=function(t){return{type:t,node:this,data:this.data,rowIndex:this.rowIndex,rowPinned:this.rowPinned,context:this.beans.gridOptionsService.context,api:this.beans.gridOptionsService.api,columnApi:this.beans.gridOptionsService.columnApi}},r.prototype.dispatchLocalEvent=function(t){this.eventService&&this.eventService.dispatchEvent(t)},r.prototype.setDataValue=function(t,e,o){var n=this,i=function(){var c;return typeof t!="string"?t:(c=n.beans.columnModel.getGridColumn(t))!==null&&c!==void 0?c:n.beans.columnModel.getPrimaryColumn(t)},s=i(),a=this.getValueFromValueService(s);if(this.beans.gridOptionsService.get("readOnlyEdit"))return this.dispatchEventForSaveValueReadOnly(s,a,e,o),!1;var l=this.beans.valueService.setValue(this,s,e,o);return this.dispatchCellChangedEvent(s,e,a),this.checkRowSelectable(),l},r.prototype.getValueFromValueService=function(t){var e=this.leafGroup&&this.beans.columnModel.isPivotMode(),o=this.group&&this.expanded&&!this.footer&&!e,n=this.beans.gridOptionsService.getGroupIncludeFooter(),i=n({node:this}),s=this.beans.gridOptionsService.get("groupSuppressBlankHeader"),a=o&&i&&!s,l=this.beans.valueService.getValue(t,this,!1,a);return l},r.prototype.dispatchEventForSaveValueReadOnly=function(t,e,o,n){var i={type:w.EVENT_CELL_EDIT_REQUEST,event:null,rowIndex:this.rowIndex,rowPinned:this.rowPinned,column:t,colDef:t.getColDef(),context:this.beans.gridOptionsService.context,api:this.beans.gridOptionsService.api,columnApi:this.beans.gridOptionsService.columnApi,data:this.data,node:this,oldValue:e,newValue:o,value:o,source:n};this.beans.eventService.dispatchEvent(i)},r.prototype.setGroupValue=function(t,e){var o=this.beans.columnModel.getGridColumn(t);pe(this.groupData)&&(this.groupData={});var n=o.getColId(),i=this.groupData[n];i!==e&&(this.groupData[n]=e,this.dispatchCellChangedEvent(o,e,i))},r.prototype.setAggData=function(t){var e=this,o=by([this.aggData,t]),n=this.aggData;this.aggData=t,this.eventService&&o.forEach(function(i){var s=e.aggData?e.aggData[i]:void 0,a=n?n[i]:void 0;if(s!==a){var l=e.beans.columnModel.lookupGridColumn(i);l&&e.dispatchCellChangedEvent(l,s,a)}})},r.prototype.updateHasChildren=function(){var t=this.group&&!this.footer||this.childrenAfterGroup&&this.childrenAfterGroup.length>0,e=this.beans.gridOptionsService.isRowModelType("serverSide");if(e){var o=this.beans.gridOptionsService.get("treeData"),n=this.beans.gridOptionsService.get("isServerSideGroup");t=!this.stub&&!this.footer&&(o?!!n&&n(this.data):!!this.group)}t!==this.__hasChildren&&(this.__hasChildren=!!t,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(r.EVENT_HAS_CHILDREN_CHANGED)))},r.prototype.hasChildren=function(){return this.__hasChildren==null&&this.updateHasChildren(),this.__hasChildren},r.prototype.isEmptyRowGroupNode=function(){return this.group&&Jt(this.childrenAfterGroup)},r.prototype.dispatchCellChangedEvent=function(t,e,o){var n={type:r.EVENT_CELL_CHANGED,node:this,column:t,newValue:e,oldValue:o};this.dispatchLocalEvent(n)},r.prototype.resetQuickFilterAggregateText=function(){this.quickFilterAggregateText=null},r.prototype.isExpandable=function(){return this.footer?!1:this.beans.columnModel.isPivotMode()?this.hasChildren()&&!this.leafGroup:this.hasChildren()||!!this.master},r.prototype.isSelected=function(){return this.footer?this.sibling.isSelected():this.selected},r.prototype.depthFirstSearch=function(t){this.childrenAfterGroup&&this.childrenAfterGroup.forEach(function(e){return e.depthFirstSearch(t)}),t(this)},r.prototype.calculateSelectedFromChildren=function(){var t,e=!1,o=!1,n=!1;if(!(!((t=this.childrenAfterGroup)===null||t===void 0)&&t.length))return this.selectable?this.selected:null;for(var i=0;i<this.childrenAfterGroup.length;i++){var s=this.childrenAfterGroup[i],a=s.isSelected();if(!s.selectable){var l=s.calculateSelectedFromChildren();if(l===null)continue;a=l}switch(a){case!0:e=!0;break;case!1:o=!0;break;default:n=!0;break}}if(!(n||e&&o))return e?!0:o?!1:this.selectable?this.selected:null},r.prototype.setSelectedInitialValue=function(t){this.selected=t},r.prototype.selectThisNode=function(t,e,o){o===void 0&&(o="api");var n=!this.selectable&&t,i=this.selected===t;if(n||i)return!1;if(this.selected=t,this.eventService){this.dispatchLocalEvent(this.createLocalRowEvent(r.EVENT_ROW_SELECTED));var s=this.sibling;s&&s.footer&&s.dispatchLocalEvent(s.createLocalRowEvent(r.EVENT_ROW_SELECTED))}var a=hr(hr({},this.createGlobalRowEvent(w.EVENT_ROW_SELECTED)),{event:e||null,source:o});return this.beans.eventService.dispatchEvent(a),!0},r.prototype.setSelected=function(t,e,o){if(e===void 0&&(e=!1),o===void 0&&(o="api"),typeof o=="boolean"){console.warn("AG Grid: since version v30, rowNode.setSelected() property `suppressFinishActions` has been removed, please use `gridApi.setNodesSelected()` for bulk actions, and the event `source` property for ignoring events instead.");return}this.setSelectedParams({newValue:t,clearSelection:e,rangeSelect:!1,source:o})},r.prototype.setSelectedParams=function(t){return this.rowPinned?(console.warn("AG Grid: cannot select pinned rows"),0):this.id===void 0?(console.warn("AG Grid: cannot select node until id for node is known"),0):this.beans.selectionService.setNodesSelected(hr(hr({},t),{nodes:[this.footer?this.sibling:this]}))},r.prototype.isRowPinned=function(){return this.rowPinned==="top"||this.rowPinned==="bottom"},r.prototype.isParentOfNode=function(t){for(var e=this.parent;e;){if(e===t)return!0;e=e.parent}return!1},r.prototype.addEventListener=function(t,e){this.eventService||(this.eventService=new si),this.eventService.addEventListener(t,e)},r.prototype.removeEventListener=function(t,e){this.eventService&&(this.eventService.removeEventListener(t,e),this.eventService.noRegisteredListenersExist()&&(this.eventService=null))},r.prototype.onMouseEnter=function(){this.dispatchLocalEvent(this.createLocalRowEvent(r.EVENT_MOUSE_ENTER))},r.prototype.onMouseLeave=function(){this.dispatchLocalEvent(this.createLocalRowEvent(r.EVENT_MOUSE_LEAVE))},r.prototype.getFirstChildOfFirstChild=function(t){for(var e=this,o=!0,n=!1,i=null;o&&!n;){var s=e.parent,a=W(s)&&e.firstChild;a?s.rowGroupColumn===t&&(n=!0,i=s):o=!1,e=s}return n?i:null},r.prototype.isFullWidthCell=function(){if(this.detail)return!0;var t=this.beans.gridOptionsService.getCallback("isFullWidthRow");return t?t({rowNode:this}):!1},r.prototype.getRoute=function(){if(this.key!=null){for(var t=[],e=this;e.key!=null;)t.push(e.key),e=e.parent;return t.reverse()}},r.prototype.createFooter=function(){var t=this;if(!this.sibling){var e=new Set(["eventService","__objectId","sticky"]),o=new r(this.beans);Object.keys(this).forEach(function(n){e.has(n)||(o[n]=t[n])}),o.footer=!0,o.setRowTop(null),o.setRowIndex(null),o.oldRowTop=null,o.id="rowGroupFooter_"+this.id,o.sibling=this,this.sibling=o}},r.prototype.destroyFooter=function(){this.sibling&&(this.sibling.setRowTop(null),this.sibling.setRowIndex(null),this.sibling=void 0)},r.ID_PREFIX_ROW_GROUP="row-group-",r.ID_PREFIX_TOP_PINNED="t-",r.ID_PREFIX_BOTTOM_PINNED="b-",r.OBJECT_ID_SEQUENCE=0,r.EVENT_ROW_SELECTED="rowSelected",r.EVENT_DATA_CHANGED="dataChanged",r.EVENT_CELL_CHANGED="cellChanged",r.EVENT_ALL_CHILDREN_COUNT_CHANGED="allChildrenCountChanged",r.EVENT_MASTER_CHANGED="masterChanged",r.EVENT_GROUP_CHANGED="groupChanged",r.EVENT_MOUSE_ENTER="mouseEnter",r.EVENT_MOUSE_LEAVE="mouseLeave",r.EVENT_HEIGHT_CHANGED="heightChanged",r.EVENT_TOP_CHANGED="topChanged",r.EVENT_DISPLAYED_CHANGED="displayedChanged",r.EVENT_FIRST_CHILD_CHANGED="firstChildChanged",r.EVENT_LAST_CHILD_CHANGED="lastChildChanged",r.EVENT_CHILD_INDEX_CHANGED="childIndexChanged",r.EVENT_ROW_INDEX_CHANGED="rowIndexChanged",r.EVENT_EXPANDED_CHANGED="expandedChanged",r.EVENT_HAS_CHILDREN_CHANGED="hasChildrenChanged",r.EVENT_SELECTABLE_CHANGED="selectableChanged",r.EVENT_UI_LEVEL_CHANGED="uiLevelChanged",r.EVENT_HIGHLIGHT_CHANGED="rowHighlightChanged",r.EVENT_DRAGGING_CHANGED="draggingChanged",r}(),Qx=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),Ol=function(){return Ol=Object.assign||function(r){for(var t,e=1,o=arguments.length;e<o;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},Ol.apply(this,arguments)},kf=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},zC=function(r){Qx(t,r);function t(){return r.call(this,`
            <div class="ag-selection-checkbox" role="presentation">
                <ag-checkbox role="presentation" ref="eCheckbox"></ag-checkbox>
            </div>`)||this}return t.prototype.postConstruct=function(){this.eCheckbox.setPassive(!0),jp(this.eCheckbox.getInputElement(),"polite")},t.prototype.getCheckboxId=function(){return this.eCheckbox.getInputElement().id},t.prototype.onDataChanged=function(){this.onSelectionChanged()},t.prototype.onSelectableChanged=function(){this.showOrHideSelect()},t.prototype.onSelectionChanged=function(){var e=this.localeService.getLocaleTextFunc(),o=this.rowNode.isSelected(),n=dc(e,o),i=e("ariaRowToggleSelection","Press Space to toggle row selection");this.eCheckbox.setValue(o,!0),this.eCheckbox.setInputAriaLabel("".concat(i," (").concat(n,")"))},t.prototype.onClicked=function(e,o,n){return this.rowNode.setSelectedParams({newValue:e,rangeSelect:n.shiftKey,groupSelectsFiltered:o,event:n,source:"checkboxSelected"})},t.prototype.init=function(e){var o=this;this.rowNode=e.rowNode,this.column=e.column,this.overrides=e.overrides,this.onSelectionChanged(),this.addManagedListener(this.eCheckbox.getInputElement(),"dblclick",function(a){hn(a)}),this.addManagedListener(this.eCheckbox.getInputElement(),"click",function(a){hn(a);var l=o.gridOptionsService.get("groupSelectsFiltered"),c=o.eCheckbox.getValue();if(o.shouldHandleIndeterminateState(c,l)){var u=o.onClicked(!0,l,a||{});u===0&&o.onClicked(!1,l,a)}else c?o.onClicked(!1,l,a):o.onClicked(!0,l,a||{})}),this.addManagedListener(this.rowNode,be.EVENT_ROW_SELECTED,this.onSelectionChanged.bind(this)),this.addManagedListener(this.rowNode,be.EVENT_DATA_CHANGED,this.onDataChanged.bind(this)),this.addManagedListener(this.rowNode,be.EVENT_SELECTABLE_CHANGED,this.onSelectableChanged.bind(this));var n=this.gridOptionsService.get("isRowSelectable"),i=n||typeof this.getIsVisible()=="function";if(i){var s=this.showOrHideSelect.bind(this);this.addManagedListener(this.eventService,w.EVENT_DISPLAYED_COLUMNS_CHANGED,s),this.addManagedListener(this.rowNode,be.EVENT_DATA_CHANGED,s),this.addManagedListener(this.rowNode,be.EVENT_CELL_CHANGED,s),this.showOrHideSelect()}this.eCheckbox.getInputElement().setAttribute("tabindex","-1")},t.prototype.shouldHandleIndeterminateState=function(e,o){return o&&(this.eCheckbox.getPreviousValue()===void 0||e===void 0)&&this.gridOptionsService.isRowModelType("clientSide")},t.prototype.showOrHideSelect=function(){var e,o,n,i,s=this.rowNode.selectable,a=this.getIsVisible();if(s)if(typeof a=="function"){var l=(e=this.overrides)===null||e===void 0?void 0:e.callbackParams,c=(o=this.column)===null||o===void 0?void 0:o.createColumnFunctionCallbackParams(this.rowNode);s=c?a(Ol(Ol({},l),c)):!1}else s=a??!1;var u=(n=this.column)===null||n===void 0?void 0:n.getColDef().showDisabledCheckboxes;if(u){this.eCheckbox.setDisabled(!s),this.setVisible(!0),this.setDisplayed(!0);return}if(!((i=this.overrides)===null||i===void 0)&&i.removeHidden){this.setDisplayed(s);return}this.setVisible(s)},t.prototype.getIsVisible=function(){var e,o;return this.overrides?this.overrides.isVisible:(o=(e=this.column)===null||e===void 0?void 0:e.getColDef())===null||o===void 0?void 0:o.checkboxSelection},kf([ee("eCheckbox")],t.prototype,"eCheckbox",void 0),kf([Q],t.prototype,"postConstruct",null),t}(Re),Fr;(function(r){r[r.Up=0]="Up",r[r.Down=1]="Down"})(Fr||(Fr={}));var Bt;(function(r){r[r.Left=0]="Left",r[r.Right=1]="Right"})(Bt||(Bt={}));var Xx=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),gi=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},Ia=function(r){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&r[t],o=0;if(e)return e.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&o>=r.length&&(r=void 0),{value:r&&r[o++],done:!r}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},no;(function(r){r[r.ToolPanel=0]="ToolPanel",r[r.HeaderCell=1]="HeaderCell",r[r.RowDrag=2]="RowDrag",r[r.ChartPanel=3]="ChartPanel",r[r.AdvancedFilterBuilder=4]="AdvancedFilterBuilder"})(no||(no={}));var St=function(r){Xx(t,r);function t(){var o=r!==null&&r.apply(this,arguments)||this;return o.dragSourceAndParamsList=[],o.dropTargets=[],o}e=t,t.prototype.init=function(){this.ePinnedIcon=wo("columnMovePin",this.gridOptionsService,null),this.eHideIcon=wo("columnMoveHide",this.gridOptionsService,null),this.eMoveIcon=wo("columnMoveMove",this.gridOptionsService,null),this.eLeftIcon=wo("columnMoveLeft",this.gridOptionsService,null),this.eRightIcon=wo("columnMoveRight",this.gridOptionsService,null),this.eGroupIcon=wo("columnMoveGroup",this.gridOptionsService,null),this.eAggregateIcon=wo("columnMoveValue",this.gridOptionsService,null),this.ePivotIcon=wo("columnMovePivot",this.gridOptionsService,null),this.eDropNotAllowedIcon=wo("dropNotAllowed",this.gridOptionsService,null)},t.prototype.addDragSource=function(o,n){n===void 0&&(n=!1);var i={eElement:o.eElement,dragStartPixels:o.dragStartPixels,onDragStart:this.onDragStart.bind(this,o),onDragStop:this.onDragStop.bind(this),onDragging:this.onDragging.bind(this),includeTouch:n};this.dragSourceAndParamsList.push({params:i,dragSource:o}),this.dragService.addDragSource(i)},t.prototype.removeDragSource=function(o){var n=this.dragSourceAndParamsList.find(function(i){return i.dragSource===o});n&&(this.dragService.removeDragSource(n.params),uo(this.dragSourceAndParamsList,n))},t.prototype.clearDragSourceParamsList=function(){var o=this;this.dragSourceAndParamsList.forEach(function(n){return o.dragService.removeDragSource(n.params)}),this.dragSourceAndParamsList.length=0,this.dropTargets.length=0},t.prototype.nudge=function(){this.dragging&&this.onDragging(this.eventLastTime,!0)},t.prototype.onDragStart=function(o,n){this.dragging=!0,this.dragSource=o,this.eventLastTime=n,this.dragItem=this.dragSource.getDragItem(),this.lastDropTarget=this.dragSource.dragSourceDropTarget,this.dragSource.onDragStarted&&this.dragSource.onDragStarted(),this.createGhost()},t.prototype.onDragStop=function(o){if(this.eventLastTime=null,this.dragging=!1,this.dragSource.onDragStopped&&this.dragSource.onDragStopped(),this.lastDropTarget&&this.lastDropTarget.onDragStop){var n=this.createDropTargetEvent(this.lastDropTarget,o,null,null,!1);this.lastDropTarget.onDragStop(n)}this.lastDropTarget=null,this.dragItem=null,this.removeGhost()},t.prototype.onDragging=function(o,n){var i=this,s,a,l,c,u=this.getHorizontalDirection(o),d=this.getVerticalDirection(o);this.eventLastTime=o,this.positionGhost(o);var p=this.dropTargets.filter(function(g){return i.isMouseOnDropTarget(o,g)}),h=this.findCurrentDropTarget(o,p);if(h!==this.lastDropTarget)this.leaveLastTargetIfExists(o,u,d,n),this.lastDropTarget!==null&&h===null&&((a=(s=this.dragSource).onGridExit)===null||a===void 0||a.call(s,this.dragItem)),this.lastDropTarget===null&&h!==null&&((c=(l=this.dragSource).onGridEnter)===null||c===void 0||c.call(l,this.dragItem)),this.enterDragTargetIfExists(h,o,u,d,n),this.lastDropTarget=h;else if(h&&h.onDragging){var f=this.createDropTargetEvent(h,o,u,d,n);h.onDragging(f)}},t.prototype.getAllContainersFromDropTarget=function(o){var n=o.getSecondaryContainers?o.getSecondaryContainers():null,i=[[o.getContainer()]];return n?i.concat(n):i},t.prototype.allContainersIntersect=function(o,n){var i,s;try{for(var a=Ia(n),l=a.next();!l.done;l=a.next()){var c=l.value,u=c.getBoundingClientRect();if(u.width===0||u.height===0)return!1;var d=o.clientX>=u.left&&o.clientX<u.right,p=o.clientY>=u.top&&o.clientY<u.bottom;if(!d||!p)return!1}}catch(h){i={error:h}}finally{try{l&&!l.done&&(s=a.return)&&s.call(a)}finally{if(i)throw i.error}}return!0},t.prototype.isMouseOnDropTarget=function(o,n){var i,s,a=this.getAllContainersFromDropTarget(n),l=!1;try{for(var c=Ia(a),u=c.next();!u.done;u=c.next()){var d=u.value;if(this.allContainersIntersect(o,d)){l=!0;break}}}catch(p){i={error:p}}finally{try{u&&!u.done&&(s=c.return)&&s.call(c)}finally{if(i)throw i.error}}return n.targetContainsSource&&!n.getContainer().contains(this.dragSource.eElement)?!1:l&&n.isInterestedIn(this.dragSource.type,this.dragSource.eElement)},t.prototype.findCurrentDropTarget=function(o,n){var i,s,a,l,c=n.length;if(c===0)return null;if(c===1)return n[0];var u=this.gridOptionsService.getRootNode(),d=u.elementsFromPoint(o.clientX,o.clientY);try{for(var p=Ia(d),h=p.next();!h.done;h=p.next()){var f=h.value;try{for(var g=(a=void 0,Ia(n)),_=g.next();!_.done;_=g.next()){var C=_.value,E=Gy(this.getAllContainersFromDropTarget(C));if(E.indexOf(f)!==-1)return C}}catch(T){a={error:T}}finally{try{_&&!_.done&&(l=g.return)&&l.call(g)}finally{if(a)throw a.error}}}}catch(T){i={error:T}}finally{try{h&&!h.done&&(s=p.return)&&s.call(p)}finally{if(i)throw i.error}}return null},t.prototype.enterDragTargetIfExists=function(o,n,i,s,a){if(o){if(o.onDragEnter){var l=this.createDropTargetEvent(o,n,i,s,a);o.onDragEnter(l)}this.setGhostIcon(o.getIconName?o.getIconName():null)}},t.prototype.leaveLastTargetIfExists=function(o,n,i,s){if(this.lastDropTarget){if(this.lastDropTarget.onDragLeave){var a=this.createDropTargetEvent(this.lastDropTarget,o,n,i,s);this.lastDropTarget.onDragLeave(a)}this.setGhostIcon(null)}},t.prototype.addDropTarget=function(o){this.dropTargets.push(o)},t.prototype.removeDropTarget=function(o){this.dropTargets=this.dropTargets.filter(function(n){return n.getContainer()!==o.getContainer()})},t.prototype.hasExternalDropZones=function(){return this.dropTargets.some(function(o){return o.external})},t.prototype.findExternalZone=function(o){var n=this.dropTargets.filter(function(i){return i.external});return n.find(function(i){return i.getContainer()===o.getContainer()})||null},t.prototype.getHorizontalDirection=function(o){var n=this.eventLastTime&&this.eventLastTime.clientX,i=o.clientX;return n===i?null:n>i?Bt.Left:Bt.Right},t.prototype.getVerticalDirection=function(o){var n=this.eventLastTime&&this.eventLastTime.clientY,i=o.clientY;return n===i?null:n>i?Fr.Up:Fr.Down},t.prototype.createDropTargetEvent=function(o,n,i,s,a){var l=o.getContainer(),c=l.getBoundingClientRect(),u=this,d=u.gridApi,p=u.columnApi,h=u.dragItem,f=u.dragSource,g=n.clientX-c.left,_=n.clientY-c.top;return{event:n,x:g,y:_,vDirection:s,hDirection:i,dragSource:f,fromNudge:a,dragItem:h,api:d,columnApi:p,dropZoneTarget:l}},t.prototype.positionGhost=function(o){var n=this.eGhost;if(n){var i=n.getBoundingClientRect(),s=i.height,a=sC()-2,l=aC()-2,c=rh(n.offsetParent),u=o.clientY,d=o.clientX,p=u-c.top-s/2,h=d-c.left-10,f=this.gridOptionsService.getDocument(),g=f.defaultView||window,_=g.pageYOffset||f.documentElement.scrollTop,C=g.pageXOffset||f.documentElement.scrollLeft;a>0&&h+n.clientWidth>a+C&&(h=a+C-n.clientWidth),h<0&&(h=0),l>0&&p+n.clientHeight>l+_&&(p=l+_-n.clientHeight),p<0&&(p=0),n.style.left="".concat(h,"px"),n.style.top="".concat(p,"px")}},t.prototype.removeGhost=function(){this.eGhost&&this.eGhostParent&&this.eGhostParent.removeChild(this.eGhost),this.eGhost=null},t.prototype.createGhost=function(){this.eGhost=Ot(e.GHOST_TEMPLATE),this.mouseEventService.stampTopLevelGridCompWithGridInstance(this.eGhost);var o=this.environment.getTheme().theme;o&&this.eGhost.classList.add(o),this.eGhostIcon=this.eGhost.querySelector(".ag-dnd-ghost-icon"),this.setGhostIcon(null);var n=this.eGhost.querySelector(".ag-dnd-ghost-label"),i=this.dragSource.dragItemName;cc(i)&&(i=i()),n.innerHTML=ht(i)||"",this.eGhost.style.height="25px",this.eGhost.style.top="20px",this.eGhost.style.left="20px";var s=this.gridOptionsService.getDocument(),a=null,l=null;try{a=s.fullscreenElement}catch{}finally{a||(a=this.gridOptionsService.getRootNode());var c=a.querySelector("body");c?l=c:a instanceof ShadowRoot?l=a:a instanceof Document?l=a==null?void 0:a.documentElement:l=a}this.eGhostParent=l,this.eGhostParent?this.eGhostParent.appendChild(this.eGhost):console.warn("AG Grid: could not find document body, it is needed for dragging columns")},t.prototype.setGhostIcon=function(o,n){n===void 0&&(n=!1),Et(this.eGhostIcon);var i=null;switch(o||(o=this.dragSource.getDefaultIconName?this.dragSource.getDefaultIconName():e.ICON_NOT_ALLOWED),o){case e.ICON_PINNED:i=this.ePinnedIcon;break;case e.ICON_MOVE:i=this.eMoveIcon;break;case e.ICON_LEFT:i=this.eLeftIcon;break;case e.ICON_RIGHT:i=this.eRightIcon;break;case e.ICON_GROUP:i=this.eGroupIcon;break;case e.ICON_AGGREGATE:i=this.eAggregateIcon;break;case e.ICON_PIVOT:i=this.ePivotIcon;break;case e.ICON_NOT_ALLOWED:i=this.eDropNotAllowedIcon;break;case e.ICON_HIDE:i=this.eHideIcon;break}this.eGhostIcon.classList.toggle("ag-shake-left-to-right",n),!(i===this.eHideIcon&&this.gridOptionsService.get("suppressDragLeaveHidesColumns"))&&i&&this.eGhostIcon.appendChild(i)};var e;return t.ICON_PINNED="pinned",t.ICON_MOVE="move",t.ICON_LEFT="left",t.ICON_RIGHT="right",t.ICON_GROUP="group",t.ICON_AGGREGATE="aggregate",t.ICON_PIVOT="pivot",t.ICON_NOT_ALLOWED="notAllowed",t.ICON_HIDE="hide",t.GHOST_TEMPLATE=`<div class="ag-dnd-ghost ag-unselectable">
            <span class="ag-dnd-ghost-icon ag-shake-left-to-right"></span>
            <div class="ag-dnd-ghost-label"></div>
        </div>`,gi([y("dragService")],t.prototype,"dragService",void 0),gi([y("mouseEventService")],t.prototype,"mouseEventService",void 0),gi([y("columnApi")],t.prototype,"columnApi",void 0),gi([y("gridApi")],t.prototype,"gridApi",void 0),gi([Q],t.prototype,"init",null),gi([zt],t.prototype,"clearDragSourceParamsList",null),t=e=gi([ne("dragAndDropService")],t),t}(K),Cc=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),Hs=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},Pl=function(r){Cc(t,r);function t(e,o,n,i,s,a){var l=r.call(this)||this;return l.cellValueFn=e,l.rowNode=o,l.column=n,l.customGui=i,l.dragStartPixels=s,l.suppressVisibilityChange=a,l.dragSource=null,l}return t.prototype.isCustomGui=function(){return this.customGui!=null},t.prototype.postConstruct=function(){if(this.customGui?this.setDragElement(this.customGui,this.dragStartPixels):(this.setTemplate('<div class="ag-drag-handle ag-row-drag" aria-hidden="true"></div>'),this.getGui().appendChild(at("rowDrag",this.gridOptionsService,null)),this.addDragSource()),this.checkCompatibility(),!this.suppressVisibilityChange){var e=this.gridOptionsService.get("rowDragManaged")?new Jx(this,this.beans,this.rowNode,this.column):new Zx(this,this.beans,this.rowNode,this.column);this.createManagedBean(e,this.beans.context)}},t.prototype.setDragElement=function(e,o){this.setTemplateFromElement(e),this.addDragSource(o)},t.prototype.getSelectedNodes=function(){var e=this.gridOptionsService.get("rowDragMultiRow");if(!e)return[this.rowNode];var o=this.beans.selectionService.getSelectedNodes();return o.indexOf(this.rowNode)!==-1?o:[this.rowNode]},t.prototype.checkCompatibility=function(){var e=this.gridOptionsService.get("rowDragManaged"),o=this.gridOptionsService.get("treeData");o&&e&&Ee("If using row drag with tree data, you cannot have rowDragManaged=true")},t.prototype.getDragItem=function(){return{rowNode:this.rowNode,rowNodes:this.getSelectedNodes(),columns:this.column?[this.column]:void 0,defaultTextValue:this.cellValueFn()}},t.prototype.getRowDragText=function(e){if(e){var o=e.getColDef();if(o.rowDragText)return o.rowDragText}return this.gridOptionsService.get("rowDragText")},t.prototype.addDragSource=function(e){var o=this;e===void 0&&(e=4),this.dragSource&&this.removeDragSource();var n=this.localeService.getLocaleTextFunc();this.dragSource={type:no.RowDrag,eElement:this.getGui(),dragItemName:function(){var i,s=o.getDragItem(),a=((i=s.rowNodes)===null||i===void 0?void 0:i.length)||1,l=o.getRowDragText(o.column);return l?l(s,a):a===1?o.cellValueFn():"".concat(a," ").concat(n("rowDragRows","rows"))},getDragItem:function(){return o.getDragItem()},dragStartPixels:e,dragSourceDomDataKey:this.gridOptionsService.getDomDataKey()},this.beans.dragAndDropService.addDragSource(this.dragSource,!0)},t.prototype.removeDragSource=function(){this.dragSource&&this.beans.dragAndDropService.removeDragSource(this.dragSource),this.dragSource=null},Hs([y("beans")],t.prototype,"beans",void 0),Hs([Q],t.prototype,"postConstruct",null),Hs([zt],t.prototype,"removeDragSource",null),t}(Re),$C=function(r){Cc(t,r);function t(e,o,n){var i=r.call(this)||this;return i.parent=e,i.rowNode=o,i.column=n,i}return t.prototype.setDisplayedOrVisible=function(e){var o={skipAriaHidden:!0};if(e)this.parent.setDisplayed(!1,o);else{var n=!0,i=!1;this.column&&(n=this.column.isRowDrag(this.rowNode)||this.parent.isCustomGui(),i=cc(this.column.getColDef().rowDrag)),i?(this.parent.setDisplayed(!0,o),this.parent.setVisible(n,o)):(this.parent.setDisplayed(n,o),this.parent.setVisible(!0,o))}},t}(K),Zx=function(r){Cc(t,r);function t(e,o,n,i){var s=r.call(this,e,n,i)||this;return s.beans=o,s}return t.prototype.postConstruct=function(){this.addManagedPropertyListener("suppressRowDrag",this.onSuppressRowDrag.bind(this)),this.addManagedListener(this.rowNode,be.EVENT_DATA_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.rowNode,be.EVENT_CELL_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.rowNode,be.EVENT_CELL_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.beans.eventService,w.EVENT_NEW_COLUMNS_LOADED,this.workOutVisibility.bind(this)),this.workOutVisibility()},t.prototype.onSuppressRowDrag=function(){this.workOutVisibility()},t.prototype.workOutVisibility=function(){var e=this.gridOptionsService.get("suppressRowDrag");this.setDisplayedOrVisible(e)},Hs([Q],t.prototype,"postConstruct",null),t}($C),Jx=function(r){Cc(t,r);function t(e,o,n,i){var s=r.call(this,e,n,i)||this;return s.beans=o,s}return t.prototype.postConstruct=function(){this.addManagedListener(this.beans.eventService,w.EVENT_SORT_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.beans.eventService,w.EVENT_FILTER_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.beans.eventService,w.EVENT_COLUMN_ROW_GROUP_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.beans.eventService,w.EVENT_NEW_COLUMNS_LOADED,this.workOutVisibility.bind(this)),this.addManagedListener(this.rowNode,be.EVENT_DATA_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.rowNode,be.EVENT_CELL_CHANGED,this.workOutVisibility.bind(this)),this.addManagedPropertyListener("suppressRowDrag",this.onSuppressRowDrag.bind(this)),this.workOutVisibility()},t.prototype.onSuppressRowDrag=function(){this.workOutVisibility()},t.prototype.workOutVisibility=function(){var e=this.beans.ctrlsService.getGridBodyCtrl(),o=e.getRowDragFeature(),n=o&&o.shouldPreventRowMove(),i=this.gridOptionsService.get("suppressRowDrag"),s=this.beans.dragAndDropService.hasExternalDropZones(),a=n&&!s||i;this.setDisplayedOrVisible(a)},Hs([Q],t.prototype,"postConstruct",null),t}($C),eF=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),Il=function(){return Il=Object.assign||function(r){for(var t,e=1,o=arguments.length;e<o;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},Il.apply(this,arguments)},Jr=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},tF=function(r){eF(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.init=function(e,o,n,i,s,a,l){var c,u,d,p;this.params=l,this.eGui=o,this.eCheckbox=n,this.eExpanded=i,this.eContracted=s,this.comp=e,this.compClass=a;var h=l.node;l.value;var f=l.colDef,g=this.isTopLevelFooter();if(!g){var _=this.isEmbeddedRowMismatch();if(_)return;if(h.footer&&this.gridOptionsService.get("groupHideOpenParents")){var C=f&&f.showRowGroup,E=h.rowGroupColumn&&h.rowGroupColumn.getColId();if(C!==E)return}}if(this.setupShowingValueForOpenedParent(),this.findDisplayedGroupNode(),!g){var T=l.node.footer&&l.node.rowGroupIndex===this.columnModel.getRowGroupColumns().findIndex(function(k){var M;return k.getColId()===((M=l.colDef)===null||M===void 0?void 0:M.showRowGroup)}),P=this.gridOptionsService.get("groupDisplayType")!="multipleColumns"||this.gridOptionsService.get("treeData"),A=P||this.gridOptionsService.get("showOpenedGroup")&&!l.node.footer&&(!l.node.group||l.node.rowGroupIndex!=null&&l.node.rowGroupIndex>this.columnModel.getRowGroupColumns().findIndex(function(k){var M;return k.getColId()===((M=l.colDef)===null||M===void 0?void 0:M.showRowGroup)})),b=!h.group&&(((c=this.params.colDef)===null||c===void 0?void 0:c.field)||((u=this.params.colDef)===null||u===void 0?void 0:u.valueGetter)),I=this.isExpandable(),F=this.columnModel.isPivotMode()&&h.leafGroup&&((d=h.rowGroupColumn)===null||d===void 0?void 0:d.getColId())===((p=l.column)===null||p===void 0?void 0:p.getColDef().showRowGroup),U=!this.showingValueForOpenedParent&&!I&&!b&&!A&&!T&&!F;if(U)return}this.addExpandAndContract(),this.addFullWidthRowDraggerIfNeeded(),this.addCheckboxIfNeeded(),this.addValueElement(),this.setupIndent(),this.refreshAriaExpanded()},t.prototype.getCellAriaRole=function(){var e,o,n=(e=this.params.colDef)===null||e===void 0?void 0:e.cellAriaRole,i=(o=this.params.column)===null||o===void 0?void 0:o.getColDef().cellAriaRole;return n||i||"gridcell"},t.prototype.destroy=function(){r.prototype.destroy.call(this),this.expandListener=null},t.prototype.refreshAriaExpanded=function(){var e=this.params,o=e.node,n=e.eParentOfValue;if(this.expandListener&&(this.expandListener=this.expandListener()),!this.isExpandable()){Zy(n);return}var i=function(){ko(n,!!o.expanded)};this.expandListener=this.addManagedListener(o,be.EVENT_EXPANDED_CHANGED,i)||null,i()},t.prototype.isTopLevelFooter=function(){if(!this.gridOptionsService.get("groupIncludeTotalFooter")||this.params.value!=null||this.params.node.level!=-1)return!1;var e=this.params.colDef,o=e==null;if(o||e.showRowGroup===!0)return!0;var n=this.columnModel.getRowGroupColumns();if(!n||n.length===0)return!0;var i=n[0];return i.getId()===e.showRowGroup},t.prototype.isEmbeddedRowMismatch=function(){if(!this.params.fullWidth||!this.gridOptionsService.get("embedFullWidthRows"))return!1;var e=this.params.pinned==="left",o=this.params.pinned==="right",n=!e&&!o;return this.gridOptionsService.get("enableRtl")?this.columnModel.isPinningLeft()?!o:!n:this.columnModel.isPinningLeft()?!e:!n},t.prototype.findDisplayedGroupNode=function(){var e=this.params.column,o=this.params.node;if(this.showingValueForOpenedParent)for(var n=o.parent;n!=null;){if(n.rowGroupColumn&&e.isRowGroupDisplayed(n.rowGroupColumn.getId())){this.displayedGroupNode=n;break}n=n.parent}pe(this.displayedGroupNode)&&(this.displayedGroupNode=o)},t.prototype.setupShowingValueForOpenedParent=function(){var e=this.params.node,o=this.params.column;if(!this.gridOptionsService.get("groupHideOpenParents")){this.showingValueForOpenedParent=!1;return}if(!e.groupData){this.showingValueForOpenedParent=!1;return}var n=e.rowGroupColumn!=null;if(n){var i=e.rowGroupColumn.getId(),s=o.isRowGroupDisplayed(i);if(s){this.showingValueForOpenedParent=!1;return}}var a=e.groupData[o.getId()]!=null;this.showingValueForOpenedParent=a},t.prototype.addValueElement=function(){this.displayedGroupNode.footer?this.addFooterValue():(this.addGroupValue(),this.addChildCount())},t.prototype.addGroupValue=function(){var e,o=this.adjustParamsWithDetailsFromRelatedColumn(),n=this.getInnerCompDetails(o),i=o.valueFormatted,s=o.value,a=i;if(a==null){var l=this.displayedGroupNode.rowGroupColumn&&((e=this.params.column)===null||e===void 0?void 0:e.isRowGroupDisplayed(this.displayedGroupNode.rowGroupColumn.getId()));if(this.displayedGroupNode.key===""&&this.displayedGroupNode.group&&l){var c=this.localeService.getLocaleTextFunc();a=c("blanks","(Blanks)")}else a=s??null}this.comp.setInnerRenderer(n,a)},t.prototype.adjustParamsWithDetailsFromRelatedColumn=function(){var e=this.displayedGroupNode.rowGroupColumn,o=this.params.column;if(!e)return this.params;var n=o!=null;if(n){var i=o.isRowGroupDisplayed(e.getId());if(!i)return this.params}var s=this.params,a=this.params,l=a.value,c=a.node,u=this.valueFormatterService.formatValue(e,c,l),d=Il(Il({},s),{valueFormatted:u});return d},t.prototype.addFooterValue=function(){var e=this.params.footerValueGetter,o="";if(e){var n=kp(this.params);n.value=this.params.value,typeof e=="function"?o=e(n):typeof e=="string"?o=this.expressionService.evaluate(e,n):console.warn("AG Grid: footerValueGetter should be either a function or a string (expression)")}else o="Total "+(this.params.value!=null?this.params.value:"");var i=this.getInnerCompDetails(this.params);this.comp.setInnerRenderer(i,o)},t.prototype.getInnerCompDetails=function(e){var o=this;if(e.fullWidth)return this.userComponentFactory.getFullWidthGroupRowInnerCellRenderer(this.gridOptionsService.get("groupRowRendererParams"),e);var n=this.userComponentFactory.getInnerRendererDetails(e,e),i=function(u){return u&&u.componentClass==o.compClass};if(n&&!i(n))return n;var s=this.displayedGroupNode.rowGroupColumn,a=s?s.getColDef():void 0;if(a){var l=this.userComponentFactory.getCellRendererDetails(a,e);if(l&&!i(l))return l;if(i(l)&&a.cellRendererParams&&a.cellRendererParams.innerRenderer){var c=this.userComponentFactory.getInnerRendererDetails(a.cellRendererParams,e);return c}}},t.prototype.addChildCount=function(){this.params.suppressCount||(this.addManagedListener(this.displayedGroupNode,be.EVENT_ALL_CHILDREN_COUNT_CHANGED,this.updateChildCount.bind(this)),this.updateChildCount())},t.prototype.updateChildCount=function(){var e=this.displayedGroupNode.allChildrenCount,o=this.isShowRowGroupForThisRow(),n=o&&e!=null&&e>=0,i=n?"(".concat(e,")"):"";this.comp.setChildCount(i)},t.prototype.isShowRowGroupForThisRow=function(){if(this.gridOptionsService.get("treeData"))return!0;var e=this.displayedGroupNode.rowGroupColumn;if(!e)return!1;var o=this.params.column,n=o==null||o.isRowGroupDisplayed(e.getId());return n},t.prototype.addExpandAndContract=function(){var e,o=this.params,n=at("groupExpanded",this.gridOptionsService,null),i=at("groupContracted",this.gridOptionsService,null);n&&this.eExpanded.appendChild(n),i&&this.eContracted.appendChild(i);var s=o.eGridCell,a=((e=this.params.column)===null||e===void 0?void 0:e.isCellEditable(o.node))&&this.gridOptionsService.get("enableGroupEdit");!a&&this.isExpandable()&&!o.suppressDoubleClickExpand&&this.addManagedListener(s,"dblclick",this.onCellDblClicked.bind(this)),this.addManagedListener(this.eExpanded,"click",this.onExpandClicked.bind(this)),this.addManagedListener(this.eContracted,"click",this.onExpandClicked.bind(this)),this.addManagedListener(s,"keydown",this.onKeyDown.bind(this)),this.addManagedListener(o.node,be.EVENT_EXPANDED_CHANGED,this.showExpandAndContractIcons.bind(this)),this.showExpandAndContractIcons();var l=this.onRowNodeIsExpandableChanged.bind(this);this.addManagedListener(this.displayedGroupNode,be.EVENT_ALL_CHILDREN_COUNT_CHANGED,l),this.addManagedListener(this.displayedGroupNode,be.EVENT_MASTER_CHANGED,l),this.addManagedListener(this.displayedGroupNode,be.EVENT_GROUP_CHANGED,l),this.addManagedListener(this.displayedGroupNode,be.EVENT_HAS_CHILDREN_CHANGED,l)},t.prototype.onExpandClicked=function(e){Uo(e)||(hn(e),this.onExpandOrContract(e))},t.prototype.onExpandOrContract=function(e){var o=this.displayedGroupNode,n=!o.expanded;!n&&o.sticky&&this.scrollToStickyNode(o),o.setExpanded(n,e)},t.prototype.scrollToStickyNode=function(e){var o=this.ctrlsService.getGridBodyCtrl(),n=o.getScrollFeature();n.setVerticalScrollPosition(e.rowTop-e.stickyRowTop)},t.prototype.isExpandable=function(){if(this.showingValueForOpenedParent)return!0;var e=this.displayedGroupNode,o=this.columnModel.isPivotMode()&&e.leafGroup,n=e.isExpandable()&&!e.footer&&!o;if(!n)return!1;var i=this.params.column,s=i!=null&&typeof i.getColDef().showRowGroup=="string";if(s){var a=this.isShowRowGroupForThisRow();return a}return!0},t.prototype.showExpandAndContractIcons=function(){var e=this,o=e.params,n=e.displayedGroupNode,i=e.columnModel,s=o.node,a=this.isExpandable();if(a){var l=this.showingValueForOpenedParent?!0:s.expanded;this.comp.setExpandedDisplayed(l),this.comp.setContractedDisplayed(!l)}else this.comp.setExpandedDisplayed(!1),this.comp.setContractedDisplayed(!1);var c=i.isPivotMode(),u=c&&n.leafGroup,d=a&&!u,p=s.footer&&s.level===-1;this.comp.addOrRemoveCssClass("ag-cell-expandable",d),this.comp.addOrRemoveCssClass("ag-row-group",d),c?this.comp.addOrRemoveCssClass("ag-pivot-leaf-group",u):p||this.comp.addOrRemoveCssClass("ag-row-group-leaf-indent",!d)},t.prototype.onRowNodeIsExpandableChanged=function(){this.showExpandAndContractIcons(),this.setIndent(),this.refreshAriaExpanded()},t.prototype.setupIndent=function(){var e=this.params.node,o=this.params.suppressPadding;o||(this.addManagedListener(e,be.EVENT_UI_LEVEL_CHANGED,this.setIndent.bind(this)),this.setIndent())},t.prototype.setIndent=function(){if(!this.gridOptionsService.get("groupHideOpenParents")){var e=this.params,o=e.node,n=!!e.colDef,i=this.gridOptionsService.get("treeData"),s=!n||i||e.colDef.showRowGroup===!0,a=s?o.uiLevel:0;this.indentClass&&this.comp.addOrRemoveCssClass(this.indentClass,!1),this.indentClass="ag-row-group-indent-"+a,this.comp.addOrRemoveCssClass(this.indentClass,!0)}},t.prototype.addFullWidthRowDraggerIfNeeded=function(){var e=this;if(!(!this.params.fullWidth||!this.params.rowDrag)){var o=new Pl(function(){return e.params.value},this.params.node);this.createManagedBean(o,this.context),this.eGui.insertAdjacentElement("afterbegin",o.getGui())}},t.prototype.isUserWantsSelected=function(){var e=this.params.checkbox;return typeof e=="function"||e===!0},t.prototype.addCheckboxIfNeeded=function(){var e=this,o=this.displayedGroupNode,n=this.isUserWantsSelected()&&!o.footer&&!o.rowPinned&&!o.detail;if(n){var i=new zC;this.getContext().createBean(i),i.init({rowNode:this.params.node,column:this.params.column,overrides:{isVisible:this.params.checkbox,callbackParams:this.params,removeHidden:!0}}),this.eCheckbox.appendChild(i.getGui()),this.addDestroyFunc(function(){return e.getContext().destroyBean(i)})}this.comp.setCheckboxVisible(n)},t.prototype.onKeyDown=function(e){var o=e.key===N.ENTER;if(!(!o||this.params.suppressEnterExpand)){var n=this.params.column&&this.params.column.isCellEditable(this.params.node);n||this.onExpandOrContract(e)}},t.prototype.onCellDblClicked=function(e){if(!Uo(e)){var o=Sl(this.eExpanded,e)||Sl(this.eContracted,e);o||this.onExpandOrContract(e)}},Jr([y("expressionService")],t.prototype,"expressionService",void 0),Jr([y("valueFormatterService")],t.prototype,"valueFormatterService",void 0),Jr([y("columnModel")],t.prototype,"columnModel",void 0),Jr([y("userComponentFactory")],t.prototype,"userComponentFactory",void 0),Jr([y("ctrlsService")],t.prototype,"ctrlsService",void 0),t}(K),oF=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),es=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},Hf=function(r){oF(t,r);function t(){return r.call(this,t.TEMPLATE)||this}return t.prototype.init=function(e){var o=this,n={setInnerRenderer:function(l,c){return o.setRenderDetails(l,c)},setChildCount:function(l){return o.eChildCount.innerHTML=l},addOrRemoveCssClass:function(l,c){return o.addOrRemoveCssClass(l,c)},setContractedDisplayed:function(l){return xe(o.eContracted,l)},setExpandedDisplayed:function(l){return xe(o.eExpanded,l)},setCheckboxVisible:function(l){return o.eCheckbox.classList.toggle("ag-invisible",!l)}},i=this.createManagedBean(new tF),s=!e.colDef,a=this.getGui();i.init(n,a,this.eCheckbox,this.eExpanded,this.eContracted,this.constructor,e),s&&yt(a,i.getCellAriaRole())},t.prototype.setRenderDetails=function(e,o){var n=this;if(e){var i=e.newAgStackInstance();if(!i)return;i.then(function(s){if(s){var a=function(){return n.context.destroyBean(s)};n.isAlive()?(n.eValue.appendChild(s.getGui()),n.addDestroyFunc(a)):a()}})}else this.eValue.innerText=o},t.prototype.destroy=function(){this.getContext().destroyBean(this.innerCellRenderer),r.prototype.destroy.call(this)},t.prototype.refresh=function(){return!1},t.TEMPLATE=`<span class="ag-cell-wrapper">
            <span class="ag-group-expanded" ref="eExpanded"></span>
            <span class="ag-group-contracted" ref="eContracted"></span>
            <span class="ag-group-checkbox ag-invisible" ref="eCheckbox"></span>
            <span class="ag-group-value" ref="eValue"></span>
            <span class="ag-group-child-count" ref="eChildCount"></span>
        </span>`,es([ee("eExpanded")],t.prototype,"eExpanded",void 0),es([ee("eContracted")],t.prototype,"eContracted",void 0),es([ee("eCheckbox")],t.prototype,"eCheckbox",void 0),es([ee("eValue")],t.prototype,"eValue",void 0),es([ee("eChildCount")],t.prototype,"eChildCount",void 0),t}(Re),nF=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),Vf=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},iF=function(r){nF(t,r);function t(){return r.call(this,t.TEMPLATE)||this}return t.prototype.init=function(e){e.node.failedLoad?this.setupFailed():this.setupLoading()},t.prototype.setupFailed=function(){var e=this.localeService.getLocaleTextFunc();this.eLoadingText.innerText=e("loadingError","ERR")},t.prototype.setupLoading=function(){var e=at("groupLoading",this.gridOptionsService,null);e&&this.eLoadingIcon.appendChild(e);var o=this.localeService.getLocaleTextFunc();this.eLoadingText.innerText=o("loadingOoo","Loading")},t.prototype.refresh=function(e){return!1},t.prototype.destroy=function(){r.prototype.destroy.call(this)},t.TEMPLATE=`<div class="ag-loading">
            <span class="ag-loading-icon" ref="eLoadingIcon"></span>
            <span class="ag-loading-text" ref="eLoadingText"></span>
        </div>`,Vf([ee("eLoadingIcon")],t.prototype,"eLoadingIcon",void 0),Vf([ee("eLoadingText")],t.prototype,"eLoadingText",void 0),t}(Re),rF=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),sF=function(r){rF(t,r);function t(){return r.call(this)||this}return t.prototype.destroy=function(){r.prototype.destroy.call(this)},t.prototype.init=function(e){var o,n=(o=this.gridOptionsService.get("overlayLoadingTemplate"))!==null&&o!==void 0?o:t.DEFAULT_LOADING_OVERLAY_TEMPLATE,i=this.localeService.getLocaleTextFunc(),s=n.replace("[LOADING...]",i("loadingOoo","Loading..."));this.setTemplate(s)},t.DEFAULT_LOADING_OVERLAY_TEMPLATE='<span class="ag-overlay-loading-center">[LOADING...]</span>',t}(Re),aF=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),lF=function(r){aF(t,r);function t(){return r.call(this)||this}return t.prototype.destroy=function(){r.prototype.destroy.call(this)},t.prototype.init=function(e){var o,n=(o=this.gridOptionsService.get("overlayNoRowsTemplate"))!==null&&o!==void 0?o:t.DEFAULT_NO_ROWS_TEMPLATE,i=this.localeService.getLocaleTextFunc(),s=n.replace("[NO_ROWS_TO_SHOW]",i("noRowsToShow","No Rows To Show"));this.setTemplate(s)},t.DEFAULT_NO_ROWS_TEMPLATE='<span class="ag-overlay-no-rows-center">[NO_ROWS_TO_SHOW]</span>',t}(Re),cF=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),uF=function(r){cF(t,r);function t(){return r.call(this,'<div class="ag-tooltip"></div>')||this}return t.prototype.init=function(e){var o=e.value;this.getGui().innerHTML=ht(o)},t}(Zi),dF=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),pF=function(){function r(){}return r.prototype.getTemplate=function(){return'<ag-input-number-field class="ag-cell-editor" ref="eInput"></ag-input-number-field>'},r.prototype.init=function(t,e){this.eInput=t,this.params=e,e.max!=null&&t.setMax(e.max),e.min!=null&&t.setMin(e.min),e.precision!=null&&t.setPrecision(e.precision),e.step!=null&&t.setStep(e.step);var o=t.getInputElement();e.preventStepping?t.addManagedListener(o,"keydown",this.preventStepping):e.showStepperButtons&&o.classList.add("ag-number-field-input-stepper")},r.prototype.preventStepping=function(t){(t.key===N.UP||t.key===N.DOWN)&&t.preventDefault()},r.prototype.getValue=function(){var t=this.eInput.getValue();if(!W(t)&&!W(this.params.value))return this.params.value;var e=this.params.parseValue(t);if(e==null)return e;if(typeof e=="string"){if(e==="")return null;e=Number(e)}return isNaN(e)?null:e},r.prototype.getStartValue=function(){return this.params.value},r}(),hF=function(r){dF(t,r);function t(){return r.call(this,new pF)||this}return t}(yc),fF=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),gF=function(){function r(){}return r.prototype.getTemplate=function(){return'<ag-input-date-field class="ag-cell-editor" ref="eInput"></ag-input-date-field>'},r.prototype.init=function(t,e){this.eInput=t,this.params=e,e.min!=null&&t.setMin(e.min),e.max!=null&&t.setMax(e.max),e.step!=null&&t.setStep(e.step)},r.prototype.getValue=function(){var t=this.eInput.getDate();return!W(t)&&!W(this.params.value)?this.params.value:t??null},r.prototype.getStartValue=function(){var t=this.params.value;if(t instanceof Date)return bo(t,!1)},r}(),vF=function(r){fF(t,r);function t(){return r.call(this,new gF)||this}return t}(yc),mF=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),yF=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},CF=function(){function r(t){this.getDataTypeService=t}return r.prototype.getTemplate=function(){return'<ag-input-date-field class="ag-cell-editor" ref="eInput"></ag-input-date-field>'},r.prototype.init=function(t,e){this.eInput=t,this.params=e,e.min!=null&&t.setMin(e.min),e.max!=null&&t.setMax(e.max),e.step!=null&&t.setStep(e.step)},r.prototype.getValue=function(){var t=this.formatDate(this.eInput.getDate());return!W(t)&&!W(this.params.value)?this.params.value:this.params.parseValue(t??"")},r.prototype.getStartValue=function(){var t,e;return bo((e=this.parseDate((t=this.params.value)!==null&&t!==void 0?t:void 0))!==null&&e!==void 0?e:null,!1)},r.prototype.parseDate=function(t){return this.getDataTypeService().getDateParserFunction()(t)},r.prototype.formatDate=function(t){return this.getDataTypeService().getDateFormatterFunction()(t)},r}(),wF=function(r){mF(t,r);function t(){var e=r.call(this,new CF(function(){return e.dataTypeService}))||this;return e}return yF([y("dataTypeService")],t.prototype,"dataTypeService",void 0),t}(yc),_F=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),SF=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},EF=function(r){_F(t,r);function t(){return r.call(this,t.TEMPLATE)||this}return t.prototype.init=function(e){var o=this;this.params=e,this.updateCheckbox(e);var n=this.eCheckbox.getInputElement();n.setAttribute("tabindex","-1"),jp(n,"polite"),this.addManagedListener(n,"click",function(s){if(hn(s),!o.eCheckbox.isDisabled()){var a=o.eCheckbox.getValue();o.onCheckboxChanged(a)}}),this.addManagedListener(n,"dblclick",function(s){hn(s)});var i=this.gridOptionsService.getDocument();this.addManagedListener(this.params.eGridCell,"keydown",function(s){if(s.key===N.SPACE&&!o.eCheckbox.isDisabled()){o.params.eGridCell===i.activeElement&&o.eCheckbox.toggle();var a=o.eCheckbox.getValue();o.onCheckboxChanged(a),s.preventDefault()}})},t.prototype.refresh=function(e){return this.params=e,this.updateCheckbox(e),!0},t.prototype.updateCheckbox=function(e){var o,n,i,s,a=!0;if(e.node.group&&e.column){var l=e.column.getColId();l.startsWith(Hi)?s=e.value==null||e.value===""?void 0:e.value==="true":e.node.aggData&&e.node.aggData[l]!==void 0?s=(o=e.value)!==null&&o!==void 0?o:void 0:a=!1}else s=(n=e.value)!==null&&n!==void 0?n:void 0;if(!a){this.eCheckbox.setDisplayed(!1);return}this.eCheckbox.setValue(s);var c=e.disabled!=null?e.disabled:!(!((i=e.column)===null||i===void 0)&&i.isCellEditable(e.node));this.eCheckbox.setDisabled(c);var u=this.localeService.getLocaleTextFunc(),d=dc(u,s),p=c?d:"".concat(u("ariaToggleCellValue","Press SPACE to toggle cell value")," (").concat(d,")");this.eCheckbox.setInputAriaLabel(p)},t.prototype.onCheckboxChanged=function(e){var o=this.params,n=o.column,i=o.node,s=o.rowIndex,a=o.value,l={type:w.EVENT_CELL_EDITING_STARTED,column:n,colDef:n==null?void 0:n.getColDef(),data:i.data,node:i,rowIndex:s,rowPinned:i.rowPinned,value:a};this.eventService.dispatchEvent(l);var c=this.params.node.setDataValue(this.params.column,e,"edit"),u={type:w.EVENT_CELL_EDITING_STOPPED,column:n,colDef:n==null?void 0:n.getColDef(),data:i.data,node:i,rowIndex:s,rowPinned:i.rowPinned,value:a,oldValue:a,newValue:e,valueChanged:c};this.eventService.dispatchEvent(u)},t.TEMPLATE=`
        <div class="ag-cell-wrapper ag-checkbox-cell" role="presentation">
            <ag-checkbox role="presentation" ref="eCheckbox"></ag-checkbox>
        </div>`,SF([ee("eCheckbox")],t.prototype,"eCheckbox",void 0),t}(Re),RF=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),TF=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},bF=function(r){RF(t,r);function t(){return r.call(this,`
            <div class="ag-cell-wrapper ag-cell-edit-wrapper ag-checkbox-edit">
                <ag-checkbox role="presentation" ref="eCheckbox"></ag-checkbox>
            </div>`)||this}return t.prototype.init=function(e){var o=this,n;this.params=e;var i=(n=e.value)!==null&&n!==void 0?n:void 0;this.eCheckbox.setValue(i);var s=this.eCheckbox.getInputElement();s.setAttribute("tabindex","-1"),this.setAriaLabel(i),this.addManagedListener(this.eCheckbox,w.EVENT_FIELD_VALUE_CHANGED,function(a){return o.setAriaLabel(a.selected)})},t.prototype.getValue=function(){return this.eCheckbox.getValue()},t.prototype.focusIn=function(){this.eCheckbox.getFocusableElement().focus()},t.prototype.afterGuiAttached=function(){this.params.cellStartedEdit&&this.focusIn()},t.prototype.isPopup=function(){return!1},t.prototype.setAriaLabel=function(e){var o=this.localeService.getLocaleTextFunc(),n=dc(o,e),i=o("ariaToggleCellValue","Press SPACE to toggle cell value");this.eCheckbox.setInputAriaLabel("".concat(i," (").concat(n,")"))},TF([ee("eCheckbox")],t.prototype,"eCheckbox",void 0),t}(Zi),AF=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),lu=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},Bf=function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var o=e.call(r),n,i=[],s;try{for(;(t===void 0||t-- >0)&&!(n=o.next()).done;)i.push(n.value)}catch(a){s={error:a}}finally{try{n&&!n.done&&(e=o.return)&&e.call(o)}finally{if(s)throw s.error}}return i},Uf=function(r,t,e){if(e||arguments.length===2)for(var o=0,n=t.length,i;o<n;o++)(i||!(o in t))&&(i||(i=Array.prototype.slice.call(t,0,o)),i[o]=t[o]);return r.concat(i||Array.prototype.slice.call(t))},OF=function(r){AF(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.agGridDefaults={agDateInput:wx,agColumnHeader:Px,agColumnGroupHeader:Dx,agSortIndicator:mh,agTextColumnFloatingFilter:bx,agNumberColumnFloatingFilter:Rx,agDateColumnFloatingFilter:vx,agReadOnlyFloatingFilter:KL,agAnimateShowChangeCellRenderer:$x,agAnimateSlideCellRenderer:qx,agGroupCellRenderer:Hf,agGroupRowRenderer:Hf,agLoadingCellRenderer:iF,agCheckboxCellRenderer:EF,agCellEditor:Gf,agTextCellEditor:Gf,agNumberCellEditor:hF,agDateCellEditor:vF,agDateStringCellEditor:wF,agSelectCellEditor:Gx,agLargeTextCellEditor:Fx,agCheckboxCellEditor:bF,agTextColumnFilter:vh,agNumberColumnFilter:kC,agDateColumnFilter:xC,agLoadingOverlay:sF,agNoRowsOverlay:lF,agTooltipComponent:uF},e.enterpriseAgDefaultCompsModule={agSetColumnFilter:ie.SetFilterModule,agSetColumnFloatingFilter:ie.SetFilterModule,agMultiColumnFilter:ie.MultiFilterModule,agMultiColumnFloatingFilter:ie.MultiFilterModule,agGroupColumnFilter:ie.RowGroupingModule,agGroupColumnFloatingFilter:ie.RowGroupingModule,agRichSelect:ie.RichSelectModule,agRichSelectCellEditor:ie.RichSelectModule,agDetailCellRenderer:ie.MasterDetailModule,agSparklineCellRenderer:ie.SparklinesModule},e.jsComps={},e}return t.prototype.init=function(){var e=this;this.gridOptions.components!=null&&Gt(this.gridOptions.components,function(o,n){return e.registerJsComponent(o,n)})},t.prototype.registerDefaultComponent=function(e,o){if(this.agGridDefaults[e]){console.error("Trying to overwrite a default component. You should call registerComponent");return}this.agGridDefaults[e]=o},t.prototype.registerJsComponent=function(e,o){this.jsComps[e]=o},t.prototype.retrieve=function(e,o){var n=this,i=function(d,p){return{componentFromFramework:p,component:d}},s=this.getFrameworkOverrides().frameworkComponent(o,this.gridOptions.components);if(s!=null)return i(s,!0);var a=this.jsComps[o];if(a){var l=this.getFrameworkOverrides().isFrameworkComponent(a);return i(a,l)}var c=this.agGridDefaults[o];if(c)return i(c,!1);var u=this.enterpriseAgDefaultCompsModule[o];return u?Se.__assertRegistered(u,"AG Grid '".concat(e,"' component: ").concat(o),this.context.getGridId()):Dr(function(){n.warnAboutMissingComponent(e,o)},"MissingComp"+o),null},t.prototype.warnAboutMissingComponent=function(e,o){var n=Uf(Uf([],Bf(Object.keys(this.agGridDefaults).filter(function(s){return!["agCellEditor","agGroupRowRenderer","agSortIndicator"].includes(s)})),!1),Bf(Object.keys(this.jsComps)),!1),i=pa(o,n,!0,.8).values;console.warn("AG Grid: Could not find '".concat(o,`' component. It was configured as "`).concat(e,": '").concat(o,`'" but it wasn't found in the list of registered components.`)),i.length>0&&console.warn("         Did you mean: [".concat(i.slice(0,3),"]?")),console.warn("If using a custom component check it has been registered as described in: ".concat(this.getFrameworkOverrides().getDocLink("components/")))},lu([y("gridOptions")],t.prototype,"gridOptions",void 0),lu([Q],t.prototype,"init",null),t=lu([ne("userComponentRegistry")],t),t}(K),PF={propertyName:"dateComponent",cellRenderer:!1},IF={propertyName:"headerComponent",cellRenderer:!1},DF={propertyName:"headerGroupComponent",cellRenderer:!1},jf={propertyName:"cellRenderer",cellRenderer:!0},MF={propertyName:"cellEditor",cellRenderer:!1},Wf={propertyName:"innerRenderer",cellRenderer:!0},LF={propertyName:"loadingOverlayComponent",cellRenderer:!1},xF={propertyName:"noRowsOverlayComponent",cellRenderer:!1},FF={propertyName:"tooltipComponent",cellRenderer:!1},Id={propertyName:"filter",cellRenderer:!1},NF={propertyName:"floatingFilterComponent",cellRenderer:!1},GF={propertyName:"toolPanel",cellRenderer:!1},kF={propertyName:"statusPanel",cellRenderer:!1},HF={propertyName:"fullWidthCellRenderer",cellRenderer:!0},VF={propertyName:"loadingCellRenderer",cellRenderer:!0},BF={propertyName:"groupRowRenderer",cellRenderer:!0},UF={propertyName:"detailCellRenderer",cellRenderer:!0},jF=function(){function r(){}return r.getFloatingFilterType=function(t){return this.filterToFloatingFilterMapping[t]},r.filterToFloatingFilterMapping={set:"agSetColumnFloatingFilter",agSetColumnFilter:"agSetColumnFloatingFilter",multi:"agMultiColumnFloatingFilter",agMultiColumnFilter:"agMultiColumnFloatingFilter",group:"agGroupColumnFloatingFilter",agGroupColumnFilter:"agGroupColumnFloatingFilter",number:"agNumberColumnFloatingFilter",agNumberColumnFilter:"agNumberColumnFloatingFilter",date:"agDateColumnFloatingFilter",agDateColumnFilter:"agDateColumnFloatingFilter",text:"agTextColumnFloatingFilter",agTextColumnFilter:"agTextColumnFloatingFilter"},r}(),WF=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),or=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},zF=function(r){WF(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getHeaderCompDetails=function(e,o){return this.getCompDetails(e,IF,"agColumnHeader",o)},t.prototype.getHeaderGroupCompDetails=function(e){var o=e.columnGroup.getColGroupDef();return this.getCompDetails(o,DF,"agColumnGroupHeader",e)},t.prototype.getFullWidthCellRendererDetails=function(e){return this.getCompDetails(this.gridOptions,HF,null,e,!0)},t.prototype.getFullWidthLoadingCellRendererDetails=function(e){return this.getCompDetails(this.gridOptions,VF,"agLoadingCellRenderer",e,!0)},t.prototype.getFullWidthGroupCellRendererDetails=function(e){return this.getCompDetails(this.gridOptions,BF,"agGroupRowRenderer",e,!0)},t.prototype.getFullWidthDetailCellRendererDetails=function(e){return this.getCompDetails(this.gridOptions,UF,"agDetailCellRenderer",e,!0)},t.prototype.getInnerRendererDetails=function(e,o){return this.getCompDetails(e,Wf,null,o)},t.prototype.getFullWidthGroupRowInnerCellRenderer=function(e,o){return this.getCompDetails(e,Wf,null,o)},t.prototype.getCellRendererDetails=function(e,o){return this.getCompDetails(e,jf,null,o)},t.prototype.getCellEditorDetails=function(e,o){return this.getCompDetails(e,MF,"agCellEditor",o,!0)},t.prototype.getFilterDetails=function(e,o,n){return this.getCompDetails(e,Id,n,o,!0)},t.prototype.getDateCompDetails=function(e){return this.getCompDetails(this.gridOptions,PF,"agDateInput",e,!0)},t.prototype.getLoadingOverlayCompDetails=function(e){return this.getCompDetails(this.gridOptions,LF,"agLoadingOverlay",e,!0)},t.prototype.getNoRowsOverlayCompDetails=function(e){return this.getCompDetails(this.gridOptions,xF,"agNoRowsOverlay",e,!0)},t.prototype.getTooltipCompDetails=function(e){return this.getCompDetails(e.colDef,FF,"agTooltipComponent",e,!0)},t.prototype.getSetFilterCellRendererDetails=function(e,o){return this.getCompDetails(e,jf,null,o)},t.prototype.getFloatingFilterCompDetails=function(e,o,n){return this.getCompDetails(e,NF,n,o)},t.prototype.getToolPanelCompDetails=function(e,o){return this.getCompDetails(e,GF,null,o,!0)},t.prototype.getStatusPanelCompDetails=function(e,o){return this.getCompDetails(e,kF,null,o,!0)},t.prototype.getCompDetails=function(e,o,n,i,s){var a=this;s===void 0&&(s=!1);var l=o.propertyName,c=o.cellRenderer,u=this.getCompKeys(e,o,i),d=u.compName,p=u.jsComp,h=u.fwComp,f=u.paramsFromSelector,g=u.popupFromSelector,_=u.popupPositionFromSelector,C=function(A){var b=a.userComponentRegistry.retrieve(l,A);b&&(p=b.componentFromFramework?void 0:b.component,h=b.componentFromFramework?b.component:void 0)};if(d!=null&&C(d),p==null&&h==null&&n!=null&&C(n),p&&c&&!this.agComponentUtils.doesImplementIComponent(p)&&(p=this.agComponentUtils.adaptFunction(l,p)),!p&&!h){s&&console.error("AG Grid: Could not find component ".concat(d,", did you forget to configure this component?"));return}var E=this.mergeParamsWithApplicationProvidedParams(e,o,i,f),T=p==null,P=p||h;return{componentFromFramework:T,componentClass:P,params:E,type:o,popupFromSelector:g,popupPositionFromSelector:_,newAgStackInstance:function(){return a.newAgStackInstance(P,T,E,o)}}},t.prototype.getCompKeys=function(e,o,n){var i=this,s=o.propertyName,a,l,c,u,d,p;if(e){var h=e,f=h[s+"Selector"],g=f?f(n):null,_=function(C){if(typeof C=="string")a=C;else if(C!=null&&C!==!0){var E=i.getFrameworkOverrides().isFrameworkComponent(C);E?c=C:l=C}};g?(_(g.component),u=g.params,d=g.popup,p=g.popupPosition):_(h[s])}return{compName:a,jsComp:l,fwComp:c,paramsFromSelector:u,popupFromSelector:d,popupPositionFromSelector:p}},t.prototype.newAgStackInstance=function(e,o,n,i){var s=i.propertyName,a=!o,l;if(a)l=new e;else{var c=this.componentMetadataProvider.retrieve(s);l=this.frameworkComponentWrapper.wrap(e,c.mandatoryMethodList,c.optionalMethodList,i)}var u=this.initComponent(l,n);return u==null?on.resolve(l):u.then(function(){return l})},t.prototype.mergeParamsWithApplicationProvidedParams=function(e,o,n,i){i===void 0&&(i=null);var s={context:this.gridOptionsService.context,columnApi:this.gridOptionsService.columnApi,api:this.gridOptionsService.api};ho(s,n);var a=e,l=a&&a[o.propertyName+"Params"];if(typeof l=="function"){var c=l(n);ho(s,c)}else typeof l=="object"&&ho(s,l);return ho(s,i),s},t.prototype.initComponent=function(e,o){if(this.context.createBean(e),e.init!=null)return e.init(o)},t.prototype.getDefaultFloatingFilterType=function(e,o){if(e==null)return null;var n=null,i=this.getCompKeys(e,Id),s=i.compName,a=i.jsComp,l=i.fwComp;if(s)n=jF.getFloatingFilterType(s);else{var c=a==null&&l==null&&e.filter===!0;c&&(n=o())}return n},or([y("gridOptions")],t.prototype,"gridOptions",void 0),or([y("agComponentUtils")],t.prototype,"agComponentUtils",void 0),or([y("componentMetadataProvider")],t.prototype,"componentMetadataProvider",void 0),or([y("userComponentRegistry")],t.prototype,"userComponentRegistry",void 0),or([Le("frameworkComponentWrapper")],t.prototype,"frameworkComponentWrapper",void 0),t=or([ne("userComponentFactory")],t),t}(K),$F=function(){function r(){}return r.ColDefPropertyMap={headerName:void 0,columnGroupShow:void 0,headerClass:void 0,toolPanelClass:void 0,headerValueGetter:void 0,pivotKeys:void 0,groupId:void 0,colId:void 0,sort:void 0,initialSort:void 0,field:void 0,type:void 0,cellDataType:void 0,tooltipComponent:void 0,tooltipField:void 0,headerTooltip:void 0,cellClass:void 0,showRowGroup:void 0,filter:void 0,initialAggFunc:void 0,defaultAggFunc:void 0,aggFunc:void 0,pinned:void 0,initialPinned:void 0,chartDataType:void 0,cellAriaRole:void 0,cellEditorPopupPosition:void 0,headerGroupComponent:void 0,headerGroupComponentParams:void 0,cellStyle:void 0,cellRenderer:void 0,cellRendererParams:void 0,cellEditor:void 0,cellEditorParams:void 0,filterParams:void 0,pivotValueColumn:void 0,headerComponent:void 0,headerComponentParams:void 0,floatingFilterComponent:void 0,floatingFilterComponentParams:void 0,tooltipComponentParams:void 0,refData:void 0,columnsMenuParams:void 0,children:void 0,sortingOrder:void 0,allowedAggFuncs:void 0,menuTabs:void 0,pivotTotalColumnIds:void 0,cellClassRules:void 0,icons:void 0,sortIndex:void 0,initialSortIndex:void 0,flex:void 0,initialFlex:void 0,width:void 0,initialWidth:void 0,minWidth:void 0,maxWidth:void 0,rowGroupIndex:void 0,initialRowGroupIndex:void 0,pivotIndex:void 0,initialPivotIndex:void 0,suppressCellFlash:void 0,suppressColumnsToolPanel:void 0,suppressFiltersToolPanel:void 0,openByDefault:void 0,marryChildren:void 0,suppressStickyLabel:void 0,hide:void 0,initialHide:void 0,rowGroup:void 0,initialRowGroup:void 0,pivot:void 0,initialPivot:void 0,checkboxSelection:void 0,showDisabledCheckboxes:void 0,headerCheckboxSelection:void 0,headerCheckboxSelectionFilteredOnly:void 0,headerCheckboxSelectionCurrentPageOnly:void 0,suppressMenu:void 0,suppressMovable:void 0,lockPosition:void 0,lockVisible:void 0,lockPinned:void 0,unSortIcon:void 0,suppressSizeToFit:void 0,suppressAutoSize:void 0,enableRowGroup:void 0,enablePivot:void 0,enableValue:void 0,editable:void 0,suppressPaste:void 0,suppressNavigable:void 0,enableCellChangeFlash:void 0,rowDrag:void 0,dndSource:void 0,autoHeight:void 0,wrapText:void 0,sortable:void 0,resizable:void 0,singleClickEdit:void 0,floatingFilter:void 0,cellEditorPopup:void 0,suppressFillHandle:void 0,wrapHeaderText:void 0,autoHeaderHeight:void 0,dndSourceOnRowDrag:void 0,valueGetter:void 0,valueSetter:void 0,filterValueGetter:void 0,keyCreator:void 0,valueFormatter:void 0,valueParser:void 0,comparator:void 0,equals:void 0,pivotComparator:void 0,suppressKeyboardEvent:void 0,suppressHeaderKeyboardEvent:void 0,colSpan:void 0,rowSpan:void 0,getQuickFilterText:void 0,onCellValueChanged:void 0,onCellClicked:void 0,onCellDoubleClicked:void 0,onCellContextMenu:void 0,rowDragText:void 0,tooltipValueGetter:void 0,cellRendererSelector:void 0,cellEditorSelector:void 0,suppressSpanHeaderHeight:void 0,useValueFormatterForExport:void 0,useValueParserForImport:void 0},r.ALL_PROPERTIES=Object.keys(r.ColDefPropertyMap),r}(),Dl;(function(r){r[r.SINGLE_SHEET=0]="SINGLE_SHEET",r[r.MULTI_SHEET=1]="MULTI_SHEET"})(Dl||(Dl={}));var KF=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),cu=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},YF=function(r){KF(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.dragEndFunctions=[],e.dragSources=[],e}return t.prototype.removeAllListeners=function(){this.dragSources.forEach(this.removeListener.bind(this)),this.dragSources.length=0},t.prototype.removeListener=function(e){var o=e.dragSource.eElement,n=e.mouseDownListener;if(o.removeEventListener("mousedown",n),e.touchEnabled){var i=e.touchStartListener;o.removeEventListener("touchstart",i,{passive:!0})}},t.prototype.removeDragSource=function(e){var o=this.dragSources.find(function(n){return n.dragSource===e});o&&(this.removeListener(o),uo(this.dragSources,o))},t.prototype.isDragging=function(){return this.dragging},t.prototype.addDragSource=function(e){var o=this,n=this.onMouseDown.bind(this,e),i=e.eElement,s=e.includeTouch,a=e.stopPropagationForTouch;i.addEventListener("mousedown",n);var l=null,c=this.gridOptionsService.get("suppressTouch");s&&!c&&(l=function(u){nh(u.target)||(u.cancelable&&(u.preventDefault(),a&&u.stopPropagation()),o.onTouchStart(e,u))},i.addEventListener("touchstart",l,{passive:!1})),this.dragSources.push({dragSource:e,mouseDownListener:n,touchStartListener:l,touchEnabled:!!s})},t.prototype.getStartTarget=function(){return this.startTarget},t.prototype.onTouchStart=function(e,o){var n=this;this.currentDragParams=e,this.dragging=!1;var i=o.touches[0];this.touchLastTime=i,this.touchStart=i;var s=function(d){return n.onTouchMove(d,e.eElement)},a=function(d){return n.onTouchUp(d,e.eElement)},l=function(d){d.cancelable&&d.preventDefault()},c=o.target,u=[{target:this.gridOptionsService.getRootNode(),type:"touchmove",listener:l,options:{passive:!1}},{target:c,type:"touchmove",listener:s,options:{passive:!0}},{target:c,type:"touchend",listener:a,options:{passive:!0}},{target:c,type:"touchcancel",listener:a,options:{passive:!0}}];this.addTemporaryEvents(u),e.dragStartPixels===0&&this.onCommonMove(i,this.touchStart,e.eElement)},t.prototype.onMouseDown=function(e,o){var n=this,i=o;if(!(e.skipMouseEvent&&e.skipMouseEvent(o))&&!i._alreadyProcessedByDragService&&(i._alreadyProcessedByDragService=!0,o.button===0)){this.shouldPreventMouseEvent(o)&&o.preventDefault(),this.currentDragParams=e,this.dragging=!1,this.mouseStartEvent=o,this.startTarget=o.target;var s=function(d){return n.onMouseMove(d,e.eElement)},a=function(d){return n.onMouseUp(d,e.eElement)},l=function(d){return d.preventDefault()},c=this.gridOptionsService.getRootNode(),u=[{target:c,type:"mousemove",listener:s},{target:c,type:"mouseup",listener:a},{target:c,type:"contextmenu",listener:l}];this.addTemporaryEvents(u),e.dragStartPixels===0&&this.onMouseMove(o,e.eElement)}},t.prototype.addTemporaryEvents=function(e){e.forEach(function(o){var n=o.target,i=o.type,s=o.listener,a=o.options;n.addEventListener(i,s,a)}),this.dragEndFunctions.push(function(){e.forEach(function(o){var n=o.target,i=o.type,s=o.listener,a=o.options;n.removeEventListener(i,s,a)})})},t.prototype.isEventNearStartEvent=function(e,o){var n=this.currentDragParams.dragStartPixels,i=W(n)?n:4;return dh(e,o,i)},t.prototype.getFirstActiveTouch=function(e){for(var o=0;o<e.length;o++)if(e[o].identifier===this.touchStart.identifier)return e[o];return null},t.prototype.onCommonMove=function(e,o,n){if(!this.dragging){if(!this.dragging&&this.isEventNearStartEvent(e,o))return;this.dragging=!0;var i={type:w.EVENT_DRAG_STARTED,target:n};this.eventService.dispatchEvent(i),this.currentDragParams.onDragStart(o),this.currentDragParams.onDragging(o)}this.currentDragParams.onDragging(e)},t.prototype.onTouchMove=function(e,o){var n=this.getFirstActiveTouch(e.touches);n&&this.onCommonMove(n,this.touchStart,o)},t.prototype.onMouseMove=function(e,o){var n;if(Wo()){var i=this.gridOptionsService.getDocument();(n=i.getSelection())===null||n===void 0||n.removeAllRanges()}this.shouldPreventMouseEvent(e)&&e.preventDefault(),this.onCommonMove(e,this.mouseStartEvent,o)},t.prototype.shouldPreventMouseEvent=function(e){var o=this.gridOptionsService.get("enableCellTextSelection"),n=e.type==="mousemove";return o&&n&&e.cancelable&&this.mouseEventService.isEventFromThisGrid(e)&&!this.isOverFormFieldElement(e)},t.prototype.isOverFormFieldElement=function(e){var o=e.target,n=o==null?void 0:o.tagName.toLocaleLowerCase();return!!(n!=null&&n.match("^a$|textarea|input|select|button"))},t.prototype.onTouchUp=function(e,o){var n=this.getFirstActiveTouch(e.changedTouches);n||(n=this.touchLastTime),this.onUpCommon(n,o)},t.prototype.onMouseUp=function(e,o){this.onUpCommon(e,o)},t.prototype.onUpCommon=function(e,o){if(this.dragging){this.dragging=!1,this.currentDragParams.onDragStop(e);var n={type:w.EVENT_DRAG_STOPPED,target:o};this.eventService.dispatchEvent(n)}this.mouseStartEvent=null,this.startTarget=null,this.touchStart=null,this.touchLastTime=null,this.currentDragParams=null,this.dragEndFunctions.forEach(function(i){return i()}),this.dragEndFunctions.length=0},cu([y("mouseEventService")],t.prototype,"mouseEventService",void 0),cu([zt],t.prototype,"removeAllListeners",null),t=cu([ne("dragService")],t),t}(K),KC=function(){function r(t){this.tickingInterval=null,this.onScrollCallback=null,this.scrollContainer=t.scrollContainer,this.scrollHorizontally=t.scrollAxis.indexOf("x")!==-1,this.scrollVertically=t.scrollAxis.indexOf("y")!==-1,this.scrollByTick=t.scrollByTick!=null?t.scrollByTick:20,t.onScrollCallback&&(this.onScrollCallback=t.onScrollCallback),this.scrollVertically&&(this.getVerticalPosition=t.getVerticalPosition,this.setVerticalPosition=t.setVerticalPosition),this.scrollHorizontally&&(this.getHorizontalPosition=t.getHorizontalPosition,this.setHorizontalPosition=t.setHorizontalPosition),this.shouldSkipVerticalScroll=t.shouldSkipVerticalScroll||function(){return!1},this.shouldSkipHorizontalScroll=t.shouldSkipHorizontalScroll||function(){return!1}}return r.prototype.check=function(t,e){e===void 0&&(e=!1);var o=e||this.shouldSkipVerticalScroll();if(!(o&&this.shouldSkipHorizontalScroll())){var n=this.scrollContainer.getBoundingClientRect(),i=this.scrollByTick;this.tickLeft=t.clientX<n.left+i,this.tickRight=t.clientX>n.right-i,this.tickUp=t.clientY<n.top+i&&!o,this.tickDown=t.clientY>n.bottom-i&&!o,this.tickLeft||this.tickRight||this.tickUp||this.tickDown?this.ensureTickingStarted():this.ensureCleared()}},r.prototype.ensureTickingStarted=function(){this.tickingInterval===null&&(this.tickingInterval=window.setInterval(this.doTick.bind(this),100),this.tickCount=0)},r.prototype.doTick=function(){this.tickCount++;var t;if(t=this.tickCount>20?200:this.tickCount>10?80:40,this.scrollVertically){var e=this.getVerticalPosition();this.tickUp&&this.setVerticalPosition(e-t),this.tickDown&&this.setVerticalPosition(e+t)}if(this.scrollHorizontally){var o=this.getHorizontalPosition();this.tickLeft&&this.setHorizontalPosition(o-t),this.tickRight&&this.setHorizontalPosition(o+t)}this.onScrollCallback&&this.onScrollCallback()},r.prototype.ensureCleared=function(){this.tickingInterval&&(window.clearInterval(this.tickingInterval),this.tickingInterval=null)},r}(),qF=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),zf=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},uu="ag-list-item-hovered";(function(r){qF(t,r);function t(e,o,n){var i=r.call(this)||this;return i.comp=e,i.virtualList=o,i.params=n,i.currentDragValue=null,i.lastHoveredListItem=null,i}return t.prototype.postConstruct=function(){this.addManagedListener(this.params.eventSource,this.params.listItemDragStartEvent,this.listItemDragStart.bind(this)),this.addManagedListener(this.params.eventSource,this.params.listItemDragEndEvent,this.listItemDragEnd.bind(this)),this.createDropTarget(),this.createAutoScrollService()},t.prototype.listItemDragStart=function(e){this.currentDragValue=this.params.getCurrentDragValue(e),this.moveBlocked=this.params.isMoveBlocked(this.currentDragValue)},t.prototype.listItemDragEnd=function(){var e=this;window.setTimeout(function(){e.currentDragValue=null,e.moveBlocked=!1},10)},t.prototype.createDropTarget=function(){var e=this,o={isInterestedIn:function(n){return n===e.params.dragSourceType},getIconName:function(){return St[e.moveBlocked?"ICON_NOT_ALLOWED":"ICON_MOVE"]},getContainer:function(){return e.comp.getGui()},onDragging:function(n){return e.onDragging(n)},onDragStop:function(){return e.onDragStop()},onDragLeave:function(){return e.onDragLeave()}};this.dragAndDropService.addDropTarget(o)},t.prototype.createAutoScrollService=function(){var e=this.virtualList.getGui();this.autoScrollService=new KC({scrollContainer:e,scrollAxis:"y",getVerticalPosition:function(){return e.scrollTop},setVerticalPosition:function(o){return e.scrollTop=o}})},t.prototype.onDragging=function(e){if(!(!this.currentDragValue||this.moveBlocked)){var o=this.getListDragItem(e),n=this.virtualList.getComponentAt(o.rowIndex);if(n){var i=n.getGui().parentElement;this.lastHoveredListItem&&this.lastHoveredListItem.rowIndex===o.rowIndex&&this.lastHoveredListItem.position===o.position||(this.autoScrollService.check(e.event),this.clearHoveredItems(),this.lastHoveredListItem=o,Ed(i,uu),Ed(i,"ag-item-highlight-".concat(o.position)))}}},t.prototype.getListDragItem=function(e){var o=this.virtualList.getGui(),n=parseFloat(window.getComputedStyle(o).paddingTop),i=this.virtualList.getRowHeight(),s=this.virtualList.getScrollTop(),a=Math.max(0,(e.y-n+s)/i),l=this.params.getNumRows(this.comp)-1,c=Math.min(l,a)|0;return{rowIndex:c,position:Math.round(a)>a||a>l?"bottom":"top",component:this.virtualList.getComponentAt(c)}},t.prototype.onDragStop=function(){this.moveBlocked||(this.params.moveItem(this.currentDragValue,this.lastHoveredListItem),this.clearHoveredItems(),this.autoScrollService.ensureCleared())},t.prototype.onDragLeave=function(){this.clearHoveredItems(),this.autoScrollService.ensureCleared()},t.prototype.clearHoveredItems=function(){var e=this.virtualList.getGui();e.querySelectorAll(".".concat(uu)).forEach(function(o){[uu,"ag-item-highlight-top","ag-item-highlight-bottom"].forEach(function(n){o.classList.remove(n)})}),this.lastHoveredListItem=null},zf([y("dragAndDropService")],t.prototype,"dragAndDropService",void 0),zf([Q],t.prototype,"postConstruct",null),t})(K);var On;(function(r){r[r.Above=0]="Above",r[r.Below=1]="Below"})(On||(On={}));var Pe=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i};function Ri(r){var t=r,e=t!=null&&t.getFrameworkComponentInstance!=null;return e?t.getFrameworkComponentInstance():r}var YC=function(){function r(){this.detailGridInfoMap={},this.destroyCalled=!1}return r.prototype.init=function(){var t=this;switch(this.rowModel.getType()){case"clientSide":this.clientSideRowModel=this.rowModel;break;case"infinite":this.infiniteRowModel=this.rowModel;break;case"serverSide":this.serverSideRowModel=this.rowModel;break}this.ctrlsService.whenReady(function(){t.gridBodyCtrl=t.ctrlsService.getGridBodyCtrl()})},r.prototype.__getAlignedGridService=function(){return this.alignedGridsService},r.prototype.__getContext=function(){return this.context},r.prototype.getGridId=function(){return this.context.getGridId()},r.prototype.addDetailGridInfo=function(t,e){this.detailGridInfoMap[t]=e},r.prototype.removeDetailGridInfo=function(t){this.detailGridInfoMap[t]=void 0},r.prototype.getDetailGridInfo=function(t){return this.detailGridInfoMap[t]},r.prototype.forEachDetailGridInfo=function(t){var e=0;Gt(this.detailGridInfoMap,function(o,n){W(n)&&(t(n,e),e++)})},r.prototype.getDataAsCsv=function(t){if(Se.__assertRegistered(ie.CsvExportModule,"api.getDataAsCsv",this.context.getGridId()))return this.csvCreator.getDataAsCsv(t)},r.prototype.exportDataAsCsv=function(t){Se.__assertRegistered(ie.CsvExportModule,"api.exportDataAsCSv",this.context.getGridId())&&this.csvCreator.exportDataAsCsv(t)},r.prototype.assertNotExcelMultiSheet=function(t,e){return Se.__assertRegistered(ie.ExcelExportModule,"api."+t,this.context.getGridId())?this.excelCreator.getFactoryMode()===Dl.MULTI_SHEET?(console.warn("AG Grid: The Excel Exporter is currently on Multi Sheet mode. End that operation by calling 'api.getMultipleSheetAsExcel()' or 'api.exportMultipleSheetsAsExcel()'"),!1):!0:!1},r.prototype.getDataAsExcel=function(t){if(this.assertNotExcelMultiSheet("getDataAsExcel",t))return this.excelCreator.getDataAsExcel(t)},r.prototype.exportDataAsExcel=function(t){this.assertNotExcelMultiSheet("exportDataAsExcel",t)&&this.excelCreator.exportDataAsExcel(t)},r.prototype.getSheetDataForExcel=function(t){if(Se.__assertRegistered(ie.ExcelExportModule,"api.getSheetDataForExcel",this.context.getGridId()))return this.excelCreator.setFactoryMode(Dl.MULTI_SHEET),this.excelCreator.getSheetDataForExcel(t)},r.prototype.getMultipleSheetsAsExcel=function(t){if(Se.__assertRegistered(ie.ExcelExportModule,"api.getMultipleSheetsAsExcel",this.context.getGridId()))return this.excelCreator.getMultipleSheetsAsExcel(t)},r.prototype.exportMultipleSheetsAsExcel=function(t){if(Se.__assertRegistered(ie.ExcelExportModule,"api.exportMultipleSheetsAsExcel",this.context.getGridId()))return this.excelCreator.exportMultipleSheetsAsExcel(t)},r.prototype.setGridAriaProperty=function(t,e){if(t){var o=this.ctrlsService.getGridBodyCtrl().getGui(),n="aria-".concat(t);e===null?o.removeAttribute(n):o.setAttribute(n,e)}},r.prototype.logMissingRowModel=function(t){for(var e=[],o=1;o<arguments.length;o++)e[o-1]=arguments[o];console.error("AG Grid: api.".concat(t," can only be called when gridOptions.rowModelType is ").concat(e.join(" or ")))},r.prototype.getPinnedTopRowCount=function(){return this.pinnedRowModel.getPinnedTopRowCount()},r.prototype.getPinnedBottomRowCount=function(){return this.pinnedRowModel.getPinnedBottomRowCount()},r.prototype.getPinnedTopRow=function(t){return this.pinnedRowModel.getPinnedTopRow(t)},r.prototype.getPinnedBottomRow=function(t){return this.pinnedRowModel.getPinnedBottomRow(t)},r.prototype.expireValueCache=function(){this.valueCache.expire()},r.prototype.getVerticalPixelRange=function(){return this.gridBodyCtrl.getScrollFeature().getVScrollPosition()},r.prototype.getHorizontalPixelRange=function(){return this.gridBodyCtrl.getScrollFeature().getHScrollPosition()},r.prototype.refreshCells=function(t){t===void 0&&(t={}),this.rowRenderer.refreshCells(t)},r.prototype.flashCells=function(t){t===void 0&&(t={}),this.rowRenderer.flashCells(t)},r.prototype.redrawRows=function(t){t===void 0&&(t={});var e=t?t.rowNodes:void 0;this.rowRenderer.redrawRows(e)},r.prototype.refreshHeader=function(){this.ctrlsService.getHeaderRowContainerCtrls().forEach(function(t){return t.refresh()})},r.prototype.isAnyFilterPresent=function(){return this.filterManager.isAnyFilterPresent()},r.prototype.isColumnFilterPresent=function(){return this.filterManager.isColumnFilterPresent()||this.filterManager.isAggregateFilterPresent()},r.prototype.isQuickFilterPresent=function(){return this.filterManager.isQuickFilterPresent()},r.prototype.getModel=function(){return this.rowModel},r.prototype.setRowNodeExpanded=function(t,e,o){this.expansionService.setRowNodeExpanded(t,e,o)},r.prototype.onGroupExpandedOrCollapsed=function(){if(pe(this.clientSideRowModel)){this.logMissingRowModel("onGroupExpandedOrCollapsed","clientSide");return}this.expansionService.onGroupExpandedOrCollapsed()},r.prototype.refreshClientSideRowModel=function(t){if(pe(this.clientSideRowModel)){this.logMissingRowModel("refreshClientSideRowModel","clientSide");return}this.clientSideRowModel.refreshModel(t)},r.prototype.isAnimationFrameQueueEmpty=function(){return this.animationFrameService.isQueueEmpty()},r.prototype.flushAllAnimationFrames=function(){this.animationFrameService.flushAllFrames()},r.prototype.getRowNode=function(t){return this.rowModel.getRowNode(t)},r.prototype.getSizesForCurrentTheme=function(){return{rowHeight:this.gos.getRowHeightAsNumber(),headerHeight:this.columnModel.getHeaderHeight()}},r.prototype.expandAll=function(){this.clientSideRowModel||this.serverSideRowModel?this.expansionService.expandAll(!0):this.logMissingRowModel("expandAll","clientSide","serverSide")},r.prototype.collapseAll=function(){this.clientSideRowModel||this.serverSideRowModel?this.expansionService.expandAll(!1):this.logMissingRowModel("collapseAll","clientSide","serverSide")},r.prototype.addRenderedRowListener=function(t,e,o){this.rowRenderer.addRenderedRowListener(t,e,o)},r.prototype.getQuickFilter=function(){return this.gos.get("quickFilterText")},r.prototype.getAdvancedFilterModel=function(){return Se.__assertRegistered(ie.AdvancedFilterModule,"api.getAdvancedFilterModel",this.context.getGridId())?this.filterManager.getAdvancedFilterModel():null},r.prototype.setAdvancedFilterModel=function(t){this.filterManager.setAdvancedFilterModel(t)},r.prototype.showAdvancedFilterBuilder=function(){Se.__assertRegistered(ie.AdvancedFilterModule,"api.setAdvancedFilterModel",this.context.getGridId())&&this.filterManager.showAdvancedFilterBuilder("api")},r.prototype.setNodesSelected=function(t){var e=t.nodes.every(function(a){return a.rowPinned?(console.warn("AG Grid: cannot select pinned rows"),!1):a.id===void 0?(console.warn("AG Grid: cannot select node until id for node is known"),!1):!0});if(e){var o=t.nodes,n=t.source,i=t.newValue,s=o;this.selectionService.setNodesSelected({nodes:s,source:n??"api",newValue:i})}},r.prototype.selectAll=function(t){t===void 0&&(t="apiSelectAll"),this.selectionService.selectAllRowNodes({source:t})},r.prototype.deselectAll=function(t){t===void 0&&(t="apiSelectAll"),this.selectionService.deselectAllRowNodes({source:t})},r.prototype.selectAllFiltered=function(t){t===void 0&&(t="apiSelectAllFiltered"),this.selectionService.selectAllRowNodes({source:t,justFiltered:!0})},r.prototype.deselectAllFiltered=function(t){t===void 0&&(t="apiSelectAllFiltered"),this.selectionService.deselectAllRowNodes({source:t,justFiltered:!0})},r.prototype.getServerSideSelectionState=function(){return pe(this.serverSideRowModel)?(this.logMissingRowModel("getServerSideSelectionState","serverSide"),null):this.selectionService.getSelectionState()},r.prototype.setServerSideSelectionState=function(t){if(pe(this.serverSideRowModel)){this.logMissingRowModel("setServerSideSelectionState","serverSide");return}this.selectionService.setSelectionState(t,"api")},r.prototype.selectAllOnCurrentPage=function(t){t===void 0&&(t="apiSelectAllCurrentPage"),this.selectionService.selectAllRowNodes({source:t,justCurrentPage:!0})},r.prototype.deselectAllOnCurrentPage=function(t){t===void 0&&(t="apiSelectAllCurrentPage"),this.selectionService.deselectAllRowNodes({source:t,justCurrentPage:!0})},r.prototype.showLoadingOverlay=function(){this.overlayService.showLoadingOverlay()},r.prototype.showNoRowsOverlay=function(){this.overlayService.showNoRowsOverlay()},r.prototype.hideOverlay=function(){this.overlayService.hideOverlay()},r.prototype.getSelectedNodes=function(){return this.selectionService.getSelectedNodes()},r.prototype.getSelectedRows=function(){return this.selectionService.getSelectedRows()},r.prototype.getBestCostNodeSelection=function(){if(pe(this.clientSideRowModel)){this.logMissingRowModel("getBestCostNodeSelection","clientSide");return}return this.selectionService.getBestCostNodeSelection()},r.prototype.getRenderedNodes=function(){return this.rowRenderer.getRenderedNodes()},r.prototype.ensureColumnVisible=function(t,e){e===void 0&&(e="auto"),this.gridBodyCtrl.getScrollFeature().ensureColumnVisible(t,e)},r.prototype.ensureIndexVisible=function(t,e){this.gridBodyCtrl.getScrollFeature().ensureIndexVisible(t,e)},r.prototype.ensureNodeVisible=function(t,e){e===void 0&&(e=null),this.gridBodyCtrl.getScrollFeature().ensureNodeVisible(t,e)},r.prototype.forEachLeafNode=function(t){if(pe(this.clientSideRowModel)){this.logMissingRowModel("forEachLeafNode","clientSide");return}this.clientSideRowModel.forEachLeafNode(t)},r.prototype.forEachNode=function(t,e){this.rowModel.forEachNode(t,e)},r.prototype.forEachNodeAfterFilter=function(t){if(pe(this.clientSideRowModel)){this.logMissingRowModel("forEachNodeAfterFilter","clientSide");return}this.clientSideRowModel.forEachNodeAfterFilter(t)},r.prototype.forEachNodeAfterFilterAndSort=function(t){if(pe(this.clientSideRowModel)){this.logMissingRowModel("forEachNodeAfterFilterAndSort","clientSide");return}this.clientSideRowModel.forEachNodeAfterFilterAndSort(t)},r.prototype.getFilterInstance=function(t,e){return this.filterManager.getFilterInstance(t,e)},r.prototype.destroyFilter=function(t){var e=this.columnModel.getPrimaryColumn(t);if(e)return this.filterManager.destroyFilter(e,"api")},r.prototype.getStatusPanel=function(t){if(Se.__assertRegistered(ie.StatusBarModule,"api.getStatusPanel",this.context.getGridId())){var e=this.statusBarService.getStatusPanel(t);return Ri(e)}},r.prototype.getColumnDef=function(t){var e=this.columnModel.getPrimaryColumn(t);return e?e.getColDef():null},r.prototype.getColumnDefs=function(){return this.columnModel.getColumnDefs()},r.prototype.onFilterChanged=function(t){t===void 0&&(t="api"),this.filterManager.onFilterChanged({source:t})},r.prototype.onSortChanged=function(){this.sortController.onSortChanged("api")},r.prototype.setFilterModel=function(t){this.filterManager.setFilterModel(t)},r.prototype.getFilterModel=function(){return this.filterManager.getFilterModel()},r.prototype.getFocusedCell=function(){return this.focusService.getFocusedCell()},r.prototype.clearFocusedCell=function(){return this.focusService.clearFocusedCell()},r.prototype.setFocusedCell=function(t,e,o){this.focusService.setFocusedCell({rowIndex:t,column:e,rowPinned:o,forceBrowserFocus:!0})},r.prototype.addRowDropZone=function(t){this.gridBodyCtrl.getRowDragFeature().addRowDropZone(t)},r.prototype.removeRowDropZone=function(t){var e=this.dragAndDropService.findExternalZone(t);e&&this.dragAndDropService.removeDropTarget(e)},r.prototype.getRowDropZoneParams=function(t){return this.gridBodyCtrl.getRowDragFeature().getRowDropZone(t)},r.prototype.assertSideBarLoaded=function(t){return Se.__assertRegistered(ie.SideBarModule,"api."+t,this.context.getGridId())},r.prototype.isSideBarVisible=function(){return this.assertSideBarLoaded("isSideBarVisible")&&this.sideBarService.getSideBarComp().isDisplayed()},r.prototype.setSideBarVisible=function(t){this.assertSideBarLoaded("setSideBarVisible")&&this.sideBarService.getSideBarComp().setDisplayed(t)},r.prototype.setSideBarPosition=function(t){this.assertSideBarLoaded("setSideBarPosition")&&this.sideBarService.getSideBarComp().setSideBarPosition(t)},r.prototype.openToolPanel=function(t){this.assertSideBarLoaded("openToolPanel")&&this.sideBarService.getSideBarComp().openToolPanel(t,"api")},r.prototype.closeToolPanel=function(){this.assertSideBarLoaded("closeToolPanel")&&this.sideBarService.getSideBarComp().close("api")},r.prototype.getOpenedToolPanel=function(){return this.assertSideBarLoaded("getOpenedToolPanel")?this.sideBarService.getSideBarComp().openedItem():null},r.prototype.refreshToolPanel=function(){this.assertSideBarLoaded("refreshToolPanel")&&this.sideBarService.getSideBarComp().refresh()},r.prototype.isToolPanelShowing=function(){return this.assertSideBarLoaded("isToolPanelShowing")&&this.sideBarService.getSideBarComp().isToolPanelShowing()},r.prototype.getToolPanelInstance=function(t){if(this.assertSideBarLoaded("getToolPanelInstance")){var e=this.sideBarService.getSideBarComp().getToolPanelInstance(t);return Ri(e)}},r.prototype.getSideBar=function(){if(this.assertSideBarLoaded("getSideBar"))return this.sideBarService.getSideBarComp().getDef()},r.prototype.resetRowHeights=function(){if(W(this.clientSideRowModel)){if(this.columnModel.isAutoRowHeightActive()){console.warn("AG Grid: calling gridApi.resetRowHeights() makes no sense when using Auto Row Height.");return}this.clientSideRowModel.resetRowHeights()}},r.prototype.setRowCount=function(t,e){if(this.serverSideRowModel){if(this.columnModel.isRowGroupEmpty()){this.serverSideRowModel.setRowCount(t,e);return}console.error("AG Grid: setRowCount cannot be used while using row grouping.");return}if(this.infiniteRowModel){this.infiniteRowModel.setRowCount(t,e);return}this.logMissingRowModel("setRowCount","infinite","serverSide")},r.prototype.onRowHeightChanged=function(){this.clientSideRowModel?this.clientSideRowModel.onRowHeightChanged():this.serverSideRowModel&&this.serverSideRowModel.onRowHeightChanged()},r.prototype.getValue=function(t,e){var o=this.columnModel.getPrimaryColumn(t);return pe(o)&&(o=this.columnModel.getGridColumn(t)),pe(o)?null:this.valueService.getValue(o,e)},r.prototype.addEventListener=function(t,e){this.apiEventService.addEventListener(t,e)},r.prototype.addGlobalListener=function(t){this.apiEventService.addGlobalListener(t)},r.prototype.removeEventListener=function(t,e){this.apiEventService.removeEventListener(t,e)},r.prototype.removeGlobalListener=function(t){this.apiEventService.removeGlobalListener(t)},r.prototype.dispatchEvent=function(t){this.eventService.dispatchEvent(t)},r.prototype.destroy=function(){var t="See ".concat(this.frameworkOverrides.getDocLink("grid-lifecycle/#grid-pre-destroyed"));if(!this.destroyCalled){var e={type:w.EVENT_GRID_PRE_DESTROYED,state:this.getState()};this.dispatchEvent(e),this.destroyCalled=!0;var o=this.ctrlsService.getGridCtrl();o&&o.destroyGridUi(),this.context.destroy(),Ay(this,["isDestroyed"],t)}},r.prototype.isDestroyed=function(){return this.destroyCalled},r.prototype.resetQuickFilter=function(){this.filterManager.resetQuickFilterCache()},r.prototype.getCellRanges=function(){return this.rangeService?this.rangeService.getCellRanges():(Se.__assertRegistered(ie.RangeSelectionModule,"api.getCellRanges",this.context.getGridId()),null)},r.prototype.addCellRange=function(t){if(this.rangeService){this.rangeService.addCellRange(t);return}Se.__assertRegistered(ie.RangeSelectionModule,"api.addCellRange",this.context.getGridId())},r.prototype.clearRangeSelection=function(){this.rangeService&&this.rangeService.removeAllCellRanges(),Se.__assertRegistered(ie.RangeSelectionModule,"gridApi.clearRangeSelection",this.context.getGridId())},r.prototype.undoCellEditing=function(){this.undoRedoService.undo("api")},r.prototype.redoCellEditing=function(){this.undoRedoService.redo("api")},r.prototype.getCurrentUndoSize=function(){return this.undoRedoService.getCurrentUndoStackSize()},r.prototype.getCurrentRedoSize=function(){return this.undoRedoService.getCurrentRedoStackSize()},r.prototype.getChartModels=function(){if(Se.__assertRegistered(ie.GridChartsModule,"api.getChartModels",this.context.getGridId()))return this.chartService.getChartModels()},r.prototype.getChartRef=function(t){if(Se.__assertRegistered(ie.GridChartsModule,"api.getChartRef",this.context.getGridId()))return this.chartService.getChartRef(t)},r.prototype.getChartImageDataURL=function(t){if(Se.__assertRegistered(ie.GridChartsModule,"api.getChartImageDataURL",this.context.getGridId()))return this.chartService.getChartImageDataURL(t)},r.prototype.downloadChart=function(t){if(Se.__assertRegistered(ie.GridChartsModule,"api.downloadChart",this.context.getGridId()))return this.chartService.downloadChart(t)},r.prototype.openChartToolPanel=function(t){if(Se.__assertRegistered(ie.GridChartsModule,"api.openChartToolPanel",this.context.getGridId()))return this.chartService.openChartToolPanel(t)},r.prototype.closeChartToolPanel=function(t){if(Se.__assertRegistered(ie.GridChartsModule,"api.closeChartToolPanel",this.context.getGridId()))return this.chartService.closeChartToolPanel(t.chartId)},r.prototype.createRangeChart=function(t){if(Se.__assertRegistered(ie.GridChartsModule,"api.createRangeChart",this.context.getGridId()))return this.chartService.createRangeChart(t)},r.prototype.createPivotChart=function(t){if(Se.__assertRegistered(ie.GridChartsModule,"api.createPivotChart",this.context.getGridId()))return this.chartService.createPivotChart(t)},r.prototype.createCrossFilterChart=function(t){if(Se.__assertRegistered(ie.GridChartsModule,"api.createCrossFilterChart",this.context.getGridId()))return this.chartService.createCrossFilterChart(t)},r.prototype.updateChart=function(t){Se.__assertRegistered(ie.GridChartsModule,"api.updateChart",this.context.getGridId())&&this.chartService.updateChart(t)},r.prototype.restoreChart=function(t,e){if(Se.__assertRegistered(ie.GridChartsModule,"api.restoreChart",this.context.getGridId()))return this.chartService.restoreChart(t,e)},r.prototype.copyToClipboard=function(t){Se.__assertRegistered(ie.ClipboardModule,"api.copyToClipboard",this.context.getGridId())&&this.clipboardService.copyToClipboard(t)},r.prototype.cutToClipboard=function(t){Se.__assertRegistered(ie.ClipboardModule,"api.cutToClipboard",this.context.getGridId())&&this.clipboardService.cutToClipboard(t,"api")},r.prototype.copySelectedRowsToClipboard=function(t){Se.__assertRegistered(ie.ClipboardModule,"api.copySelectedRowsToClipboard",this.context.getGridId())&&this.clipboardService.copySelectedRowsToClipboard(t)},r.prototype.copySelectedRangeToClipboard=function(t){Se.__assertRegistered(ie.ClipboardModule,"api.copySelectedRangeToClipboard",this.context.getGridId())&&this.clipboardService.copySelectedRangeToClipboard(t)},r.prototype.copySelectedRangeDown=function(){Se.__assertRegistered(ie.ClipboardModule,"api.copySelectedRangeDown",this.context.getGridId())&&this.clipboardService.copyRangeDown()},r.prototype.pasteFromClipboard=function(){Se.__assertRegistered(ie.ClipboardModule,"api.pasteFromClipboard",this.context.getGridId())&&this.clipboardService.pasteFromClipboard()},r.prototype.showColumnMenuAfterButtonClick=function(t,e){var o=this.columnModel.getGridColumn(t);this.menuFactory.showMenuAfterButtonClick(o,e,"columnMenu")},r.prototype.showColumnMenuAfterMouseClick=function(t,e){var o=this.columnModel.getGridColumn(t);if(o||(o=this.columnModel.getPrimaryColumn(t)),!o){console.error("AG Grid: column '".concat(t,"' not found"));return}this.menuFactory.showMenuAfterMouseEvent(o,e)},r.prototype.hidePopupMenu=function(){this.contextMenuFactory&&this.contextMenuFactory.hideActiveMenu(),this.menuFactory.hideActiveMenu()},r.prototype.tabToNextCell=function(t){return this.navigationService.tabToNextCell(!1,t)},r.prototype.tabToPreviousCell=function(t){return this.navigationService.tabToNextCell(!0,t)},r.prototype.getCellRendererInstances=function(t){t===void 0&&(t={});var e=this.rowRenderer.getCellRendererInstances(t),o=e.map(Ri);return o},r.prototype.getCellEditorInstances=function(t){t===void 0&&(t={});var e=this.rowRenderer.getCellEditorInstances(t),o=e.map(Ri);return o},r.prototype.getEditingCells=function(){return this.rowRenderer.getEditingCells()},r.prototype.stopEditing=function(t){t===void 0&&(t=!1),this.rowRenderer.stopEditing(t)},r.prototype.startEditingCell=function(t){var e=this.columnModel.getGridColumn(t.colKey);if(!e){console.warn("AG Grid: no column found for ".concat(t.colKey));return}var o={rowIndex:t.rowIndex,rowPinned:t.rowPinned||null,column:e},n=t.rowPinned==null;n&&this.gridBodyCtrl.getScrollFeature().ensureIndexVisible(t.rowIndex);var i=this.navigationService.getCellByPosition(o);i&&(this.focusService.isCellFocused(o)||this.focusService.setFocusedCell(o),i.startRowOrCellEdit(t.key))},r.prototype.addAggFunc=function(t,e){this.aggFuncService&&this.aggFuncService.addAggFunc(t,e)},r.prototype.addAggFuncs=function(t){this.aggFuncService&&this.aggFuncService.addAggFuncs(t)},r.prototype.clearAggFuncs=function(){this.aggFuncService&&this.aggFuncService.clear()},r.prototype.applyServerSideTransaction=function(t){if(!this.serverSideTransactionManager){this.logMissingRowModel("applyServerSideTransaction","serverSide");return}return this.serverSideTransactionManager.applyTransaction(t)},r.prototype.applyServerSideTransactionAsync=function(t,e){if(!this.serverSideTransactionManager){this.logMissingRowModel("applyServerSideTransactionAsync","serverSide");return}return this.serverSideTransactionManager.applyTransactionAsync(t,e)},r.prototype.applyServerSideRowData=function(t){var e,o,n=(e=t.startRow)!==null&&e!==void 0?e:0,i=(o=t.route)!==null&&o!==void 0?o:[];if(n<0){console.warn("AG Grid: invalid value ".concat(t.startRow," for startRow, the value should be >= 0"));return}this.serverSideRowModel?this.serverSideRowModel.applyRowData(t.successParams,n,i):this.logMissingRowModel("setServerSideDatasource","serverSide")},r.prototype.retryServerSideLoads=function(){if(!this.serverSideRowModel){this.logMissingRowModel("retryServerSideLoads","serverSide");return}this.serverSideRowModel.retryLoads()},r.prototype.flushServerSideAsyncTransactions=function(){if(!this.serverSideTransactionManager){this.logMissingRowModel("flushServerSideAsyncTransactions","serverSide");return}return this.serverSideTransactionManager.flushAsyncTransactions()},r.prototype.applyTransaction=function(t){if(!this.clientSideRowModel){this.logMissingRowModel("applyTransaction","clientSide");return}return this.clientSideRowModel.updateRowData(t)},r.prototype.applyTransactionAsync=function(t,e){if(!this.clientSideRowModel){this.logMissingRowModel("applyTransactionAsync","clientSide");return}this.clientSideRowModel.batchUpdateRowData(t,e)},r.prototype.flushAsyncTransactions=function(){if(!this.clientSideRowModel){this.logMissingRowModel("flushAsyncTransactions","clientSide");return}this.clientSideRowModel.flushAsyncTransactions()},r.prototype.refreshInfiniteCache=function(){this.infiniteRowModel?this.infiniteRowModel.refreshCache():this.logMissingRowModel("refreshInfiniteCache","infinite")},r.prototype.purgeInfiniteCache=function(){this.infiniteRowModel?this.infiniteRowModel.purgeCache():this.logMissingRowModel("purgeInfiniteCache","infinite")},r.prototype.refreshServerSide=function(t){if(!this.serverSideRowModel){this.logMissingRowModel("refreshServerSide","serverSide");return}this.serverSideRowModel.refreshStore(t)},r.prototype.getServerSideGroupLevelState=function(){return this.serverSideRowModel?this.serverSideRowModel.getStoreState():(this.logMissingRowModel("getServerSideGroupLevelState","serverSide"),[])},r.prototype.getInfiniteRowCount=function(){if(this.infiniteRowModel)return this.infiniteRowModel.getRowCount();this.logMissingRowModel("getInfiniteRowCount","infinite")},r.prototype.isLastRowIndexKnown=function(){if(this.infiniteRowModel)return this.infiniteRowModel.isLastRowIndexKnown();this.logMissingRowModel("isLastRowIndexKnown","infinite")},r.prototype.getCacheBlockState=function(){return this.rowNodeBlockLoader.getBlockState()},r.prototype.getFirstDisplayedRow=function(){return this.rowRenderer.getFirstVirtualRenderedRow()},r.prototype.getLastDisplayedRow=function(){return this.rowRenderer.getLastVirtualRenderedRow()},r.prototype.getDisplayedRowAtIndex=function(t){return this.rowModel.getRow(t)},r.prototype.getDisplayedRowCount=function(){return this.rowModel.getRowCount()},r.prototype.paginationIsLastPageFound=function(){return this.paginationProxy.isLastPageFound()},r.prototype.paginationGetPageSize=function(){return this.paginationProxy.getPageSize()},r.prototype.paginationGetCurrentPage=function(){return this.paginationProxy.getCurrentPage()},r.prototype.paginationGetTotalPages=function(){return this.paginationProxy.getTotalPages()},r.prototype.paginationGetRowCount=function(){return this.paginationProxy.getMasterRowCount()},r.prototype.paginationGoToNextPage=function(){this.paginationProxy.goToNextPage()},r.prototype.paginationGoToPreviousPage=function(){this.paginationProxy.goToPreviousPage()},r.prototype.paginationGoToFirstPage=function(){this.paginationProxy.goToFirstPage()},r.prototype.paginationGoToLastPage=function(){this.paginationProxy.goToLastPage()},r.prototype.paginationGoToPage=function(t){this.paginationProxy.goToPage(t)},r.prototype.sizeColumnsToFit=function(t){typeof t=="number"?this.columnModel.sizeColumnsToFit(t,"api"):this.gridBodyCtrl.sizeColumnsToFit(t)},r.prototype.setColumnGroupOpened=function(t,e){this.columnModel.setColumnGroupOpened(t,e,"api")},r.prototype.getColumnGroup=function(t,e){return this.columnModel.getColumnGroup(t,e)},r.prototype.getProvidedColumnGroup=function(t){return this.columnModel.getProvidedColumnGroup(t)},r.prototype.getDisplayNameForColumn=function(t,e){return this.columnModel.getDisplayNameForColumn(t,e)||""},r.prototype.getDisplayNameForColumnGroup=function(t,e){return this.columnModel.getDisplayNameForColumnGroup(t,e)||""},r.prototype.getColumn=function(t){return this.columnModel.getPrimaryColumn(t)},r.prototype.getColumns=function(){return this.columnModel.getAllPrimaryColumns()},r.prototype.applyColumnState=function(t){return this.columnModel.applyColumnState(t,"api")},r.prototype.getColumnState=function(){return this.columnModel.getColumnState()},r.prototype.resetColumnState=function(){this.columnModel.resetColumnState("api")},r.prototype.getColumnGroupState=function(){return this.columnModel.getColumnGroupState()},r.prototype.setColumnGroupState=function(t){this.columnModel.setColumnGroupState(t,"api")},r.prototype.resetColumnGroupState=function(){this.columnModel.resetColumnGroupState("api")},r.prototype.isPinning=function(){return this.columnModel.isPinningLeft()||this.columnModel.isPinningRight()},r.prototype.isPinningLeft=function(){return this.columnModel.isPinningLeft()},r.prototype.isPinningRight=function(){return this.columnModel.isPinningRight()},r.prototype.getDisplayedColAfter=function(t){return this.columnModel.getDisplayedColAfter(t)},r.prototype.getDisplayedColBefore=function(t){return this.columnModel.getDisplayedColBefore(t)},r.prototype.setColumnVisible=function(t,e){this.columnModel.setColumnVisible(t,e,"api")},r.prototype.setColumnsVisible=function(t,e){this.columnModel.setColumnsVisible(t,e,"api")},r.prototype.setColumnPinned=function(t,e){this.columnModel.setColumnPinned(t,e,"api")},r.prototype.setColumnsPinned=function(t,e){this.columnModel.setColumnsPinned(t,e,"api")},r.prototype.getAllGridColumns=function(){return this.columnModel.getAllGridColumns()},r.prototype.getDisplayedLeftColumns=function(){return this.columnModel.getDisplayedLeftColumns()},r.prototype.getDisplayedCenterColumns=function(){return this.columnModel.getDisplayedCenterColumns()},r.prototype.getDisplayedRightColumns=function(){return this.columnModel.getDisplayedRightColumns()},r.prototype.getAllDisplayedColumns=function(){return this.columnModel.getAllDisplayedColumns()},r.prototype.getAllDisplayedVirtualColumns=function(){return this.columnModel.getViewportColumns()},r.prototype.moveColumn=function(t,e){this.columnModel.moveColumn(t,e,"api")},r.prototype.moveColumnByIndex=function(t,e){this.columnModel.moveColumnByIndex(t,e,"api")},r.prototype.moveColumns=function(t,e){this.columnModel.moveColumns(t,e,"api")},r.prototype.moveRowGroupColumn=function(t,e){this.columnModel.moveRowGroupColumn(t,e)},r.prototype.setColumnAggFunc=function(t,e){this.columnModel.setColumnAggFunc(t,e)},r.prototype.setColumnWidth=function(t,e,o,n){o===void 0&&(o=!0),this.columnModel.setColumnWidths([{key:t,newWidth:e}],!1,o,n)},r.prototype.setColumnWidths=function(t,e,o){e===void 0&&(e=!0),this.columnModel.setColumnWidths(t,!1,e,o)},r.prototype.isPivotMode=function(){return this.columnModel.isPivotMode()},r.prototype.getPivotResultColumn=function(t,e){return this.columnModel.getSecondaryPivotColumn(t,e)},r.prototype.setValueColumns=function(t){this.columnModel.setValueColumns(t,"api")},r.prototype.getValueColumns=function(){return this.columnModel.getValueColumns()},r.prototype.removeValueColumn=function(t){this.columnModel.removeValueColumn(t,"api")},r.prototype.removeValueColumns=function(t){this.columnModel.removeValueColumns(t,"api")},r.prototype.addValueColumn=function(t){this.columnModel.addValueColumn(t,"api")},r.prototype.addValueColumns=function(t){this.columnModel.addValueColumns(t,"api")},r.prototype.setRowGroupColumns=function(t){this.columnModel.setRowGroupColumns(t,"api")},r.prototype.removeRowGroupColumn=function(t){this.columnModel.removeRowGroupColumn(t,"api")},r.prototype.removeRowGroupColumns=function(t){this.columnModel.removeRowGroupColumns(t,"api")},r.prototype.addRowGroupColumn=function(t){this.columnModel.addRowGroupColumn(t,"api")},r.prototype.addRowGroupColumns=function(t){this.columnModel.addRowGroupColumns(t,"api")},r.prototype.getRowGroupColumns=function(){return this.columnModel.getRowGroupColumns()},r.prototype.setPivotColumns=function(t){this.columnModel.setPivotColumns(t,"api")},r.prototype.removePivotColumn=function(t){this.columnModel.removePivotColumn(t,"api")},r.prototype.removePivotColumns=function(t){this.columnModel.removePivotColumns(t,"api")},r.prototype.addPivotColumn=function(t){this.columnModel.addPivotColumn(t,"api")},r.prototype.addPivotColumns=function(t){this.columnModel.addPivotColumns(t,"api")},r.prototype.getPivotColumns=function(){return this.columnModel.getPivotColumns()},r.prototype.getLeftDisplayedColumnGroups=function(){return this.columnModel.getDisplayedTreeLeft()},r.prototype.getCenterDisplayedColumnGroups=function(){return this.columnModel.getDisplayedTreeCentre()},r.prototype.getRightDisplayedColumnGroups=function(){return this.columnModel.getDisplayedTreeRight()},r.prototype.getAllDisplayedColumnGroups=function(){return this.columnModel.getAllDisplayedTrees()},r.prototype.autoSizeColumn=function(t,e){return this.columnModel.autoSizeColumn(t,e,"api")},r.prototype.autoSizeColumns=function(t,e){this.columnModel.autoSizeColumns({columns:t,skipHeader:e})},r.prototype.autoSizeAllColumns=function(t){this.columnModel.autoSizeAllColumns(t,"api")},r.prototype.setPivotResultColumns=function(t){this.columnModel.setSecondaryColumns(t,"api")},r.prototype.getPivotResultColumns=function(){return this.columnModel.getSecondaryColumns()},r.prototype.getState=function(){return this.stateService.getState()},r.prototype.getGridOption=function(t){return this.gos.get(t)},r.prototype.setGridOption=function(t,e){var o;this.updateGridOptions((o={},o[t]=e,o))},r.prototype.updateGridOptions=function(t){this.gos.updateGridOptions({options:t})},r.prototype.__internalUpdateGridOptions=function(t){this.gos.updateGridOptions({options:t,source:"gridOptionsUpdated"})},r.prototype.deprecatedUpdateGridOption=function(t,e){Ee("set".concat(t.charAt(0).toUpperCase()).concat(t.slice(1,t.length)," is deprecated. Please use 'api.setGridOption('").concat(t,"', newValue)' or 'api.updateGridOptions({ ").concat(t,": newValue })' instead.")),this.setGridOption(t,e)},r.prototype.setPivotMode=function(t){this.deprecatedUpdateGridOption("pivotMode",t)},r.prototype.setPinnedTopRowData=function(t){this.deprecatedUpdateGridOption("pinnedTopRowData",t)},r.prototype.setPinnedBottomRowData=function(t){this.deprecatedUpdateGridOption("pinnedBottomRowData",t)},r.prototype.setPopupParent=function(t){this.deprecatedUpdateGridOption("popupParent",t)},r.prototype.setSuppressModelUpdateAfterUpdateTransaction=function(t){this.deprecatedUpdateGridOption("suppressModelUpdateAfterUpdateTransaction",t)},r.prototype.setDataTypeDefinitions=function(t){this.deprecatedUpdateGridOption("dataTypeDefinitions",t)},r.prototype.setPagination=function(t){this.deprecatedUpdateGridOption("pagination",t)},r.prototype.paginationSetPageSize=function(t){this.deprecatedUpdateGridOption("paginationPageSize",t)},r.prototype.setSideBar=function(t){this.deprecatedUpdateGridOption("sideBar",t)},r.prototype.setSuppressClipboardPaste=function(t){this.deprecatedUpdateGridOption("suppressClipboardPaste",t)},r.prototype.setGroupRemoveSingleChildren=function(t){this.deprecatedUpdateGridOption("groupRemoveSingleChildren",t)},r.prototype.setGroupRemoveLowestSingleChildren=function(t){this.deprecatedUpdateGridOption("groupRemoveLowestSingleChildren",t)},r.prototype.setGroupDisplayType=function(t){this.deprecatedUpdateGridOption("groupDisplayType",t)},r.prototype.setGroupIncludeFooter=function(t){this.deprecatedUpdateGridOption("groupIncludeFooter",t)},r.prototype.setGroupIncludeTotalFooter=function(t){this.deprecatedUpdateGridOption("groupIncludeTotalFooter",t)},r.prototype.setRowClass=function(t){this.deprecatedUpdateGridOption("rowClass",t)},r.prototype.setDeltaSort=function(t){this.deprecatedUpdateGridOption("deltaSort",t)},r.prototype.setSuppressRowDrag=function(t){this.deprecatedUpdateGridOption("suppressRowDrag",t)},r.prototype.setSuppressMoveWhenRowDragging=function(t){this.deprecatedUpdateGridOption("suppressMoveWhenRowDragging",t)},r.prototype.setSuppressRowClickSelection=function(t){this.deprecatedUpdateGridOption("suppressRowClickSelection",t)},r.prototype.setEnableAdvancedFilter=function(t){this.deprecatedUpdateGridOption("enableAdvancedFilter",t)},r.prototype.setIncludeHiddenColumnsInAdvancedFilter=function(t){this.deprecatedUpdateGridOption("includeHiddenColumnsInAdvancedFilter",t)},r.prototype.setAdvancedFilterParent=function(t){this.deprecatedUpdateGridOption("advancedFilterParent",t)},r.prototype.setAdvancedFilterBuilderParams=function(t){this.deprecatedUpdateGridOption("advancedFilterBuilderParams",t)},r.prototype.setQuickFilter=function(t){Ee("setQuickFilter is deprecated. Please use 'api.setGridOption('quickFilterText', newValue)' or 'api.updateGridOptions({ quickFilterText: newValue })' instead."),this.gos.updateGridOptions({options:{quickFilterText:t}})},r.prototype.setExcludeHiddenColumnsFromQuickFilter=function(t){this.deprecatedUpdateGridOption("includeHiddenColumnsInQuickFilter",!t)},r.prototype.setIncludeHiddenColumnsInQuickFilter=function(t){this.deprecatedUpdateGridOption("includeHiddenColumnsInQuickFilter",t)},r.prototype.setQuickFilterParser=function(t){this.deprecatedUpdateGridOption("quickFilterParser",t)},r.prototype.setQuickFilterMatcher=function(t){this.deprecatedUpdateGridOption("quickFilterMatcher",t)},r.prototype.setAlwaysShowHorizontalScroll=function(t){this.deprecatedUpdateGridOption("alwaysShowHorizontalScroll",t)},r.prototype.setAlwaysShowVerticalScroll=function(t){this.deprecatedUpdateGridOption("alwaysShowVerticalScroll",t)},r.prototype.setFunctionsReadOnly=function(t){this.deprecatedUpdateGridOption("functionsReadOnly",t)},r.prototype.setColumnDefs=function(t,e){e===void 0&&(e="api"),Ee("setColumnDefs is deprecated. Please use 'api.setGridOption('columnDefs', newValue)' or 'api.updateGridOptions({ columnDefs: newValue })' instead."),this.gos.updateGridOptions({options:{columnDefs:t},source:e})},r.prototype.setAutoGroupColumnDef=function(t,e){e===void 0&&(e="api"),Ee("setAutoGroupColumnDef is deprecated. Please use 'api.setGridOption('autoGroupColumnDef', newValue)' or 'api.updateGridOptions({ autoGroupColumnDef: newValue })' instead."),this.gos.updateGridOptions({options:{autoGroupColumnDef:t},source:e})},r.prototype.setDefaultColDef=function(t,e){e===void 0&&(e="api"),Ee("setDefaultColDef is deprecated. Please use 'api.setGridOption('defaultColDef', newValue)' or 'api.updateGridOptions({ defaultColDef: newValue })' instead."),this.gos.updateGridOptions({options:{defaultColDef:t},source:e})},r.prototype.setColumnTypes=function(t,e){e===void 0&&(e="api"),Ee("setColumnTypes is deprecated. Please use 'api.setGridOption('columnTypes', newValue)' or 'api.updateGridOptions({ columnTypes: newValue })' instead."),this.gos.updateGridOptions({options:{columnTypes:t},source:e})},r.prototype.setTreeData=function(t){this.deprecatedUpdateGridOption("treeData",t)},r.prototype.setServerSideDatasource=function(t){this.deprecatedUpdateGridOption("serverSideDatasource",t)},r.prototype.setCacheBlockSize=function(t){this.deprecatedUpdateGridOption("cacheBlockSize",t)},r.prototype.setDatasource=function(t){this.deprecatedUpdateGridOption("datasource",t)},r.prototype.setViewportDatasource=function(t){this.deprecatedUpdateGridOption("viewportDatasource",t)},r.prototype.setRowData=function(t){this.deprecatedUpdateGridOption("rowData",t)},r.prototype.setEnableCellTextSelection=function(t){this.deprecatedUpdateGridOption("enableCellTextSelection",t)},r.prototype.setHeaderHeight=function(t){this.deprecatedUpdateGridOption("headerHeight",t)},r.prototype.setDomLayout=function(t){this.deprecatedUpdateGridOption("domLayout",t)},r.prototype.setFillHandleDirection=function(t){this.deprecatedUpdateGridOption("fillHandleDirection",t)},r.prototype.setGroupHeaderHeight=function(t){this.deprecatedUpdateGridOption("groupHeaderHeight",t)},r.prototype.setFloatingFiltersHeight=function(t){this.deprecatedUpdateGridOption("floatingFiltersHeight",t)},r.prototype.setPivotHeaderHeight=function(t){this.deprecatedUpdateGridOption("pivotHeaderHeight",t)},r.prototype.setPivotGroupHeaderHeight=function(t){this.deprecatedUpdateGridOption("pivotGroupHeaderHeight",t)},r.prototype.setAnimateRows=function(t){this.deprecatedUpdateGridOption("animateRows",t)},r.prototype.setIsExternalFilterPresent=function(t){this.deprecatedUpdateGridOption("isExternalFilterPresent",t)},r.prototype.setDoesExternalFilterPass=function(t){this.deprecatedUpdateGridOption("doesExternalFilterPass",t)},r.prototype.setNavigateToNextCell=function(t){this.deprecatedUpdateGridOption("navigateToNextCell",t)},r.prototype.setTabToNextCell=function(t){this.deprecatedUpdateGridOption("tabToNextCell",t)},r.prototype.setTabToNextHeader=function(t){this.deprecatedUpdateGridOption("tabToNextHeader",t)},r.prototype.setNavigateToNextHeader=function(t){this.deprecatedUpdateGridOption("navigateToNextHeader",t)},r.prototype.setRowGroupPanelShow=function(t){this.deprecatedUpdateGridOption("rowGroupPanelShow",t)},r.prototype.setGetGroupRowAgg=function(t){this.deprecatedUpdateGridOption("getGroupRowAgg",t)},r.prototype.setGetBusinessKeyForNode=function(t){this.deprecatedUpdateGridOption("getBusinessKeyForNode",t)},r.prototype.setGetChildCount=function(t){this.deprecatedUpdateGridOption("getChildCount",t)},r.prototype.setProcessRowPostCreate=function(t){this.deprecatedUpdateGridOption("processRowPostCreate",t)},r.prototype.setGetRowId=function(t){Ee("getRowId is a static property and can no longer be updated.")},r.prototype.setGetRowClass=function(t){this.deprecatedUpdateGridOption("getRowClass",t)},r.prototype.setIsFullWidthRow=function(t){this.deprecatedUpdateGridOption("isFullWidthRow",t)},r.prototype.setIsRowSelectable=function(t){this.deprecatedUpdateGridOption("isRowSelectable",t)},r.prototype.setIsRowMaster=function(t){this.deprecatedUpdateGridOption("isRowMaster",t)},r.prototype.setPostSortRows=function(t){this.deprecatedUpdateGridOption("postSortRows",t)},r.prototype.setGetDocument=function(t){this.deprecatedUpdateGridOption("getDocument",t)},r.prototype.setGetContextMenuItems=function(t){this.deprecatedUpdateGridOption("getContextMenuItems",t)},r.prototype.setGetMainMenuItems=function(t){this.deprecatedUpdateGridOption("getMainMenuItems",t)},r.prototype.setProcessCellForClipboard=function(t){this.deprecatedUpdateGridOption("processCellForClipboard",t)},r.prototype.setSendToClipboard=function(t){this.deprecatedUpdateGridOption("sendToClipboard",t)},r.prototype.setProcessCellFromClipboard=function(t){this.deprecatedUpdateGridOption("processCellFromClipboard",t)},r.prototype.setProcessPivotResultColDef=function(t){this.deprecatedUpdateGridOption("processPivotResultColDef",t)},r.prototype.setProcessPivotResultColGroupDef=function(t){this.deprecatedUpdateGridOption("processPivotResultColGroupDef",t)},r.prototype.setPostProcessPopup=function(t){this.deprecatedUpdateGridOption("postProcessPopup",t)},r.prototype.setInitialGroupOrderComparator=function(t){this.deprecatedUpdateGridOption("initialGroupOrderComparator",t)},r.prototype.setGetChartToolbarItems=function(t){this.deprecatedUpdateGridOption("getChartToolbarItems",t)},r.prototype.setPaginationNumberFormatter=function(t){this.deprecatedUpdateGridOption("paginationNumberFormatter",t)},r.prototype.setGetServerSideGroupLevelParams=function(t){this.deprecatedUpdateGridOption("getServerSideGroupLevelParams",t)},r.prototype.setIsServerSideGroupOpenByDefault=function(t){this.deprecatedUpdateGridOption("isServerSideGroupOpenByDefault",t)},r.prototype.setIsApplyServerSideTransaction=function(t){this.deprecatedUpdateGridOption("isApplyServerSideTransaction",t)},r.prototype.setIsServerSideGroup=function(t){this.deprecatedUpdateGridOption("isServerSideGroup",t)},r.prototype.setGetServerSideGroupKey=function(t){this.deprecatedUpdateGridOption("getServerSideGroupKey",t)},r.prototype.setGetRowStyle=function(t){this.deprecatedUpdateGridOption("getRowStyle",t)},r.prototype.setGetRowHeight=function(t){this.deprecatedUpdateGridOption("getRowHeight",t)},Pe([Le("csvCreator")],r.prototype,"csvCreator",void 0),Pe([Le("excelCreator")],r.prototype,"excelCreator",void 0),Pe([y("rowRenderer")],r.prototype,"rowRenderer",void 0),Pe([y("navigationService")],r.prototype,"navigationService",void 0),Pe([y("filterManager")],r.prototype,"filterManager",void 0),Pe([y("columnModel")],r.prototype,"columnModel",void 0),Pe([y("selectionService")],r.prototype,"selectionService",void 0),Pe([y("gridOptionsService")],r.prototype,"gos",void 0),Pe([y("valueService")],r.prototype,"valueService",void 0),Pe([y("alignedGridsService")],r.prototype,"alignedGridsService",void 0),Pe([y("eventService")],r.prototype,"eventService",void 0),Pe([y("pinnedRowModel")],r.prototype,"pinnedRowModel",void 0),Pe([y("context")],r.prototype,"context",void 0),Pe([y("rowModel")],r.prototype,"rowModel",void 0),Pe([y("sortController")],r.prototype,"sortController",void 0),Pe([y("paginationProxy")],r.prototype,"paginationProxy",void 0),Pe([y("focusService")],r.prototype,"focusService",void 0),Pe([y("dragAndDropService")],r.prototype,"dragAndDropService",void 0),Pe([Le("rangeService")],r.prototype,"rangeService",void 0),Pe([Le("clipboardService")],r.prototype,"clipboardService",void 0),Pe([Le("aggFuncService")],r.prototype,"aggFuncService",void 0),Pe([y("menuFactory")],r.prototype,"menuFactory",void 0),Pe([Le("contextMenuFactory")],r.prototype,"contextMenuFactory",void 0),Pe([y("valueCache")],r.prototype,"valueCache",void 0),Pe([y("animationFrameService")],r.prototype,"animationFrameService",void 0),Pe([Le("statusBarService")],r.prototype,"statusBarService",void 0),Pe([Le("chartService")],r.prototype,"chartService",void 0),Pe([Le("undoRedoService")],r.prototype,"undoRedoService",void 0),Pe([Le("rowNodeBlockLoader")],r.prototype,"rowNodeBlockLoader",void 0),Pe([Le("ssrmTransactionManager")],r.prototype,"serverSideTransactionManager",void 0),Pe([y("ctrlsService")],r.prototype,"ctrlsService",void 0),Pe([y("overlayService")],r.prototype,"overlayService",void 0),Pe([Le("sideBarService")],r.prototype,"sideBarService",void 0),Pe([y("stateService")],r.prototype,"stateService",void 0),Pe([y("expansionService")],r.prototype,"expansionService",void 0),Pe([y("apiEventService")],r.prototype,"apiEventService",void 0),Pe([y("frameworkOverrides")],r.prototype,"frameworkOverrides",void 0),Pe([Q],r.prototype,"init",null),r=Pe([ne("gridApi")],r),r}(),QF=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),ts=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},qC=function(r){QF(t,r);function t(){var o=r!==null&&r.apply(this,arguments)||this;return o.quickFilter=null,o.quickFilterParts=null,o}e=t,t.prototype.postConstruct=function(){var o=this;this.addManagedListener(this.eventService,w.EVENT_COLUMN_PIVOT_MODE_CHANGED,function(){return o.resetQuickFilterCache()}),this.addManagedListener(this.eventService,w.EVENT_NEW_COLUMNS_LOADED,function(){return o.resetQuickFilterCache()}),this.addManagedListener(this.eventService,w.EVENT_COLUMN_ROW_GROUP_CHANGED,function(){return o.resetQuickFilterCache()}),this.addManagedListener(this.eventService,w.EVENT_COLUMN_VISIBLE,function(){o.gridOptionsService.get("includeHiddenColumnsInQuickFilter")||o.resetQuickFilterCache()}),this.addManagedPropertyListener("quickFilterText",function(n){return o.setQuickFilter(n.currentValue)}),this.addManagedPropertyListener("includeHiddenColumnsInQuickFilter",function(){return o.onIncludeHiddenColumnsInQuickFilterChanged()}),this.quickFilter=this.parseQuickFilter(this.gridOptionsService.get("quickFilterText")),this.parser=this.gridOptionsService.get("quickFilterParser"),this.matcher=this.gridOptionsService.get("quickFilterMatcher"),this.setQuickFilterParts(),this.addManagedPropertyListeners(["quickFilterMatcher","quickFilterParser"],function(){return o.setQuickFilterParserAndMatcher()})},t.prototype.isQuickFilterPresent=function(){return this.quickFilter!==null},t.prototype.doesRowPassQuickFilter=function(o){var n=this,i=this.gridOptionsService.get("cacheQuickFilter");return this.matcher?this.doesRowPassQuickFilterMatcher(i,o):this.quickFilterParts.every(function(s){return i?n.doesRowPassQuickFilterCache(o,s):n.doesRowPassQuickFilterNoCache(o,s)})},t.prototype.resetQuickFilterCache=function(){this.rowModel.forEachNode(function(o){return o.quickFilterAggregateText=null})},t.prototype.setQuickFilterParts=function(){var o=this,n=o.quickFilter,i=o.parser;n?this.quickFilterParts=i?i(n):n.split(" "):this.quickFilterParts=null},t.prototype.parseQuickFilter=function(o){return W(o)?this.gridOptionsService.isRowModelType("clientSide")?o.toUpperCase():(console.warn("AG Grid - Quick filtering only works with the Client-Side Row Model"),null):null},t.prototype.setQuickFilter=function(o){if(o!=null&&typeof o!="string"){console.warn("AG Grid - Grid option quickFilterText only supports string inputs, received: ".concat(typeof o));return}var n=this.parseQuickFilter(o);this.quickFilter!==n&&(this.quickFilter=n,this.setQuickFilterParts(),this.dispatchEvent({type:e.EVENT_QUICK_FILTER_CHANGED}))},t.prototype.setQuickFilterParserAndMatcher=function(){var o=this.gridOptionsService.get("quickFilterParser"),n=this.gridOptionsService.get("quickFilterMatcher"),i=o!==this.parser||n!==this.matcher;this.parser=o,this.matcher=n,i&&(this.setQuickFilterParts(),this.dispatchEvent({type:e.EVENT_QUICK_FILTER_CHANGED}))},t.prototype.onIncludeHiddenColumnsInQuickFilterChanged=function(){this.columnModel.refreshQuickFilterColumns(),this.resetQuickFilterCache(),this.isQuickFilterPresent()&&this.dispatchEvent({type:e.EVENT_QUICK_FILTER_CHANGED})},t.prototype.doesRowPassQuickFilterNoCache=function(o,n){var i=this,s=this.columnModel.getAllColumnsForQuickFilter();return s.some(function(a){var l=i.getQuickFilterTextForColumn(a,o);return W(l)&&l.indexOf(n)>=0})},t.prototype.doesRowPassQuickFilterCache=function(o,n){return this.checkGenerateQuickFilterAggregateText(o),o.quickFilterAggregateText.indexOf(n)>=0},t.prototype.doesRowPassQuickFilterMatcher=function(o,n){var i;o?(this.checkGenerateQuickFilterAggregateText(n),i=n.quickFilterAggregateText):i=this.getQuickFilterAggregateText(n);var s=this,a=s.quickFilterParts,l=s.matcher;return l(a,i)},t.prototype.checkGenerateQuickFilterAggregateText=function(o){o.quickFilterAggregateText||(o.quickFilterAggregateText=this.getQuickFilterAggregateText(o))},t.prototype.getQuickFilterTextForColumn=function(o,n){var i=this.valueService.getValue(o,n,!0),s=o.getColDef();if(s.getQuickFilterText){var a={value:i,node:n,data:n.data,column:o,colDef:s,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context};i=s.getQuickFilterText(a)}return W(i)?i.toString().toUpperCase():null},t.prototype.getQuickFilterAggregateText=function(o){var n=this,i=[],s=this.columnModel.getAllColumnsForQuickFilter();return s.forEach(function(a){var l=n.getQuickFilterTextForColumn(a,o);W(l)&&i.push(l)}),i.join(e.QUICK_FILTER_SEPARATOR)};var e;return t.EVENT_QUICK_FILTER_CHANGED="quickFilterChanged",t.QUICK_FILTER_SEPARATOR=`
`,ts([y("valueService")],t.prototype,"valueService",void 0),ts([y("columnModel")],t.prototype,"columnModel",void 0),ts([y("rowModel")],t.prototype,"rowModel",void 0),ts([Q],t.prototype,"postConstruct",null),t=e=ts([ne("quickFilterService")],t),t}(K),XF=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),_i=function(){return _i=Object.assign||function(r){for(var t,e=1,o=arguments.length;e<o;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},_i.apply(this,arguments)},$o=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},ZF=function(r){XF(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.allColumnFilters=new Map,e.allColumnListeners=new Map,e.activeAggregateFilters=[],e.activeColumnFilters=[],e.processingFilterChange=!1,e.filterModelUpdateQueue=[],e.advancedFilterModelUpdateQueue=[],e}return t.prototype.init=function(){var e=this;this.addManagedListener(this.eventService,w.EVENT_GRID_COLUMNS_CHANGED,function(){return e.onColumnsChanged()}),this.addManagedListener(this.eventService,w.EVENT_COLUMN_VALUE_CHANGED,function(){return e.refreshFiltersForAggregations()}),this.addManagedListener(this.eventService,w.EVENT_COLUMN_PIVOT_CHANGED,function(){return e.refreshFiltersForAggregations()}),this.addManagedListener(this.eventService,w.EVENT_COLUMN_PIVOT_MODE_CHANGED,function(){return e.refreshFiltersForAggregations()}),this.addManagedListener(this.eventService,w.EVENT_NEW_COLUMNS_LOADED,function(){return e.updateAdvancedFilterColumns()}),this.addManagedListener(this.eventService,w.EVENT_COLUMN_VISIBLE,function(){return e.updateAdvancedFilterColumns()}),this.addManagedListener(this.eventService,w.EVENT_ROW_DATA_UPDATED,function(){return e.onNewRowsLoaded("rowDataUpdated")}),this.externalFilterPresent=this.isExternalFilterPresentCallback(),this.addManagedPropertyListeners(["isExternalFilterPresent","doesExternalFilterPass"],function(){e.onFilterChanged({source:"api"})}),this.updateAggFiltering(),this.addManagedPropertyListener("groupAggFiltering",function(){e.updateAggFiltering(),e.onFilterChanged()}),this.addManagedPropertyListener("advancedFilterModel",function(o){return e.setAdvancedFilterModel(o.currentValue)}),this.addManagedListener(this.eventService,w.EVENT_ADVANCED_FILTER_ENABLED_CHANGED,function(o){var n=o.enabled;return e.onAdvancedFilterEnabledChanged(n)}),this.addManagedListener(this.eventService,w.EVENT_DATA_TYPES_INFERRED,function(){return e.processFilterModelUpdateQueue()}),this.addManagedListener(this.quickFilterService,qC.EVENT_QUICK_FILTER_CHANGED,function(){return e.onFilterChanged({source:"quickFilter"})})},t.prototype.isExternalFilterPresentCallback=function(){var e=this.gridOptionsService.getCallback("isExternalFilterPresent");return typeof e=="function"?e({}):!1},t.prototype.doesExternalFilterPass=function(e){var o=this.gridOptionsService.get("doesExternalFilterPass");return typeof o=="function"?o(e):!1},t.prototype.setFilterModel=function(e,o){var n=this;if(o===void 0&&(o="api"),this.isAdvancedFilterEnabled()){this.warnAdvancedFilters();return}if(this.dataTypeService.isPendingInference()){this.filterModelUpdateQueue.push({model:e,source:o});return}var i=[],s=this.getFilterModel();if(e){var a=ph(Object.keys(e));this.allColumnFilters.forEach(function(l,c){var u=e[c];i.push(n.setModelOnFilterWrapper(l.filterPromise,u)),a.delete(c)}),a.forEach(function(l){var c=n.columnModel.getPrimaryColumn(l)||n.columnModel.getGridColumn(l);if(!c){console.warn("AG Grid: setFilterModel() - no column found for colId: "+l);return}if(!c.isFilterAllowed()){console.warn("AG Grid: setFilterModel() - unable to fully apply model, filtering disabled for colId: "+l);return}var u=n.getOrCreateFilterWrapper(c,"NO_UI");if(!u){console.warn("AG-Grid: setFilterModel() - unable to fully apply model, unable to create filter for colId: "+l);return}i.push(n.setModelOnFilterWrapper(u.filterPromise,e[l]))})}else this.allColumnFilters.forEach(function(l){i.push(n.setModelOnFilterWrapper(l.filterPromise,null))});on.all(i).then(function(){var l=n.getFilterModel(),c=[];n.allColumnFilters.forEach(function(u,d){var p=s?s[d]:null,h=l?l[d]:null;Ae.jsonEquals(p,h)||c.push(u.column)}),c.length>0&&n.onFilterChanged({columns:c,source:o})})},t.prototype.setModelOnFilterWrapper=function(e,o){return new on(function(n){e.then(function(i){typeof i.setModel!="function"&&(console.warn("AG Grid: filter missing setModel method, which is needed for setFilterModel"),n()),(i.setModel(o)||on.resolve()).then(function(){return n()})})})},t.prototype.getFilterModel=function(){var e={};return this.allColumnFilters.forEach(function(o,n){var i=o.filterPromise,s=i.resolveNow(null,function(l){return l});if(s==null)return null;if(typeof s.getModel!="function"){console.warn("AG Grid: filter API missing getModel method, which is needed for getFilterModel");return}var a=s.getModel();W(a)&&(e[n]=a)}),e},t.prototype.isColumnFilterPresent=function(){return this.activeColumnFilters.length>0},t.prototype.isAggregateFilterPresent=function(){return!!this.activeAggregateFilters.length},t.prototype.isExternalFilterPresent=function(){return this.externalFilterPresent},t.prototype.isChildFilterPresent=function(){return this.isColumnFilterPresent()||this.isQuickFilterPresent()||this.isExternalFilterPresent()||this.isAdvancedFilterPresent()},t.prototype.isAdvancedFilterPresent=function(){return this.isAdvancedFilterEnabled()&&this.advancedFilterService.isFilterPresent()},t.prototype.onAdvancedFilterEnabledChanged=function(e){var o=this,n;e?this.allColumnFilters.size&&(this.allColumnFilters.forEach(function(i){return o.disposeFilterWrapper(i,"advancedFilterEnabled")}),this.onFilterChanged({source:"advancedFilter"})):!((n=this.advancedFilterService)===null||n===void 0)&&n.isFilterPresent()&&(this.advancedFilterService.setModel(null),this.onFilterChanged({source:"advancedFilter"}))},t.prototype.isAdvancedFilterEnabled=function(){var e;return(e=this.advancedFilterService)===null||e===void 0?void 0:e.isEnabled()},t.prototype.isAdvancedFilterHeaderActive=function(){return this.isAdvancedFilterEnabled()&&this.advancedFilterService.isHeaderActive()},t.prototype.doAggregateFiltersPass=function(e,o){return this.doColumnFiltersPass(e,o,!0)},t.prototype.updateActiveFilters=function(){var e=this;this.activeColumnFilters.length=0,this.activeAggregateFilters.length=0;var o=function(s){return s?s.isFilterActive?s.isFilterActive():(console.warn("AG Grid: Filter is missing isFilterActive() method"),!1):!1},n=!!this.gridOptionsService.getGroupAggFiltering(),i=function(s){var a=!s.isPrimary();if(a)return!0;var l=!e.columnModel.isPivotActive(),c=s.isValueActive();return!c||!l?!1:e.columnModel.isPivotMode()?!0:n};this.allColumnFilters.forEach(function(s){if(s.filterPromise.resolveNow(!1,o)){var a=s.filterPromise.resolveNow(null,function(l){return l});i(s.column)?e.activeAggregateFilters.push(a):e.activeColumnFilters.push(a)}})},t.prototype.updateFilterFlagInColumns=function(e,o){this.allColumnFilters.forEach(function(n){var i=n.filterPromise.resolveNow(!1,function(s){return s.isFilterActive()});n.column.setFilterActive(i,e,o)})},t.prototype.isAnyFilterPresent=function(){return this.isQuickFilterPresent()||this.isColumnFilterPresent()||this.isAggregateFilterPresent()||this.isExternalFilterPresent()},t.prototype.doColumnFiltersPass=function(e,o,n){for(var i=e.data,s=e.aggData,a=n?this.activeAggregateFilters:this.activeColumnFilters,l=n?s:i,c=0;c<a.length;c++){var u=a[c];if(!(u==null||u===o)){if(typeof u.doesFilterPass!="function")throw new Error("Filter is missing method doesFilterPass");if(!u.doesFilterPass({node:e,data:l}))return!1}}return!0},t.prototype.resetQuickFilterCache=function(){this.quickFilterService.resetQuickFilterCache()},t.prototype.refreshFiltersForAggregations=function(){var e=this.gridOptionsService.getGroupAggFiltering();e&&this.onFilterChanged()},t.prototype.callOnFilterChangedOutsideRenderCycle=function(e){var o=this,n=function(){return o.onFilterChanged(e)};this.rowRenderer.isRefreshInProgress()?setTimeout(n,0):n()},t.prototype.onFilterChanged=function(e){e===void 0&&(e={});var o=e.source,n=e.filterInstance,i=e.additionalEventAttributes,s=e.columns;this.updateDependantFilters(),this.updateActiveFilters(),this.updateFilterFlagInColumns("filterChanged",i),this.externalFilterPresent=this.isExternalFilterPresentCallback(),this.allColumnFilters.forEach(function(l){l.filterPromise&&l.filterPromise.then(function(c){c&&c!==n&&c.onAnyFilterChanged&&c.onAnyFilterChanged()})});var a={source:o,type:w.EVENT_FILTER_CHANGED,columns:s||[]};i&&ho(a,i),this.processingFilterChange=!0,this.eventService.dispatchEvent(a),this.processingFilterChange=!1},t.prototype.isSuppressFlashingCellsBecauseFiltering=function(){var e,o=(e=this.gridOptionsService.get("allowShowChangeAfterFilter"))!==null&&e!==void 0?e:!1;return!o&&this.processingFilterChange},t.prototype.isQuickFilterPresent=function(){return this.quickFilterService.isQuickFilterPresent()},t.prototype.updateAggFiltering=function(){this.aggFiltering=!!this.gridOptionsService.getGroupAggFiltering()},t.prototype.isAggregateQuickFilterPresent=function(){return this.isQuickFilterPresent()&&(this.aggFiltering||this.columnModel.isPivotMode())},t.prototype.isNonAggregateQuickFilterPresent=function(){return this.isQuickFilterPresent()&&!(this.aggFiltering||this.columnModel.isPivotMode())},t.prototype.doesRowPassOtherFilters=function(e,o){return this.doesRowPassFilter({rowNode:o,filterInstanceToSkip:e})},t.prototype.doesRowPassAggregateFilters=function(e){return!(this.isAggregateQuickFilterPresent()&&!this.quickFilterService.doesRowPassQuickFilter(e.rowNode)||this.isAggregateFilterPresent()&&!this.doAggregateFiltersPass(e.rowNode,e.filterInstanceToSkip))},t.prototype.doesRowPassFilter=function(e){return!(this.isNonAggregateQuickFilterPresent()&&!this.quickFilterService.doesRowPassQuickFilter(e.rowNode)||this.isExternalFilterPresent()&&!this.doesExternalFilterPass(e.rowNode)||this.isColumnFilterPresent()&&!this.doColumnFiltersPass(e.rowNode,e.filterInstanceToSkip)||this.isAdvancedFilterPresent()&&!this.advancedFilterService.doesFilterPass(e.rowNode))},t.prototype.onNewRowsLoaded=function(e){this.allColumnFilters.forEach(function(o){o.filterPromise.then(function(n){n.onNewRowsLoaded&&n.onNewRowsLoaded()})}),this.updateFilterFlagInColumns(e,{afterDataChange:!0}),this.updateActiveFilters()},t.prototype.createValueGetter=function(e){var o=this;return function(n){var i=n.node;return o.valueService.getValue(e,i,!0)}},t.prototype.createGetValue=function(e){var o=this;return function(n,i){var s=i?o.columnModel.getGridColumn(i):e;return s?o.valueService.getValue(s,n,!0):void 0}},t.prototype.getFilterComponent=function(e,o,n){var i;if(n===void 0&&(n=!0),n)return((i=this.getOrCreateFilterWrapper(e,o))===null||i===void 0?void 0:i.filterPromise)||null;var s=this.cachedFilter(e);return s?s.filterPromise:null},t.prototype.isFilterActive=function(e){var o=this.cachedFilter(e);return!!o&&o.filterPromise.resolveNow(!1,function(n){return n.isFilterActive()})},t.prototype.getOrCreateFilterWrapper=function(e,o){if(!e.isFilterAllowed())return null;var n=this.cachedFilter(e);return n?o!=="NO_UI"&&this.putIntoGui(n,o):(n=this.createFilterWrapper(e,o),this.setColumnFilterWrapper(e,n)),n},t.prototype.cachedFilter=function(e){return this.allColumnFilters.get(e.getColId())},t.prototype.getDefaultFilter=function(e){var o;if(Se.__isRegistered(ie.SetFilterModule,this.context.getGridId()))o="agSetColumnFilter";else{var n=e.getColDef().cellDataType;n==="number"?o="agNumberColumnFilter":n==="date"||n==="dateString"?o="agDateColumnFilter":o="agTextColumnFilter"}return o},t.prototype.getDefaultFloatingFilter=function(e){var o;if(Se.__isRegistered(ie.SetFilterModule,this.context.getGridId()))o="agSetColumnFloatingFilter";else{var n=e.getColDef().cellDataType;n==="number"?o="agNumberColumnFloatingFilter":n==="date"||n==="dateString"?o="agDateColumnFloatingFilter":o="agTextColumnFloatingFilter"}return o},t.prototype.createFilterInstance=function(e){var o=this,n=this.getDefaultFilter(e),i=e.getColDef(),s,a=_i(_i({},this.createFilterParams(e,i)),{filterModifiedCallback:function(){return o.filterModifiedCallbackFactory(s,e)()},filterChangedCallback:function(c){return o.filterChangedCallbackFactory(s,e)(c)},doesRowPassOtherFilter:function(c){return o.doesRowPassOtherFilters(s,c)}}),l=this.userComponentFactory.getFilterDetails(i,a,n);return l?{filterPromise:function(){var c=l.newAgStackInstance();return c&&c.then(function(u){return s=u}),c},compDetails:l}:{filterPromise:null,compDetails:null}},t.prototype.createFilterParams=function(e,o){var n={column:e,colDef:kp(o),rowModel:this.rowModel,filterChangedCallback:function(){},filterModifiedCallback:function(){},valueGetter:this.createValueGetter(e),getValue:this.createGetValue(e),doesRowPassOtherFilter:function(){return!0},api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context};return n},t.prototype.createFilterWrapper=function(e,o){var n,i={column:e,filterPromise:null,compiledElement:null,guiPromise:on.resolve(null),compDetails:null},s=this.createFilterInstance(e),a=s.filterPromise,l=s.compDetails;return i.filterPromise=(n=a==null?void 0:a())!==null&&n!==void 0?n:null,i.compDetails=l,a&&this.putIntoGui(i,o),i},t.prototype.putIntoGui=function(e,o){var n=this,i=document.createElement("div");i.className="ag-filter",e.guiPromise=new on(function(s){e.filterPromise.then(function(a){var l=a.getGui();W(l)||console.warn("AG Grid: getGui method from filter returned ".concat(l,", it should be a DOM element or an HTML template string.")),typeof l=="string"&&(l=Ot(l)),i.appendChild(l),s(i);var c={type:w.EVENT_FILTER_OPENED,column:e.column,source:o,eGui:i};n.eventService.dispatchEvent(c)})})},t.prototype.onColumnsChanged=function(){var e=this,o=[];this.allColumnFilters.forEach(function(n,i){var s;n.column.isPrimary()?s=e.columnModel.getPrimaryColumn(i):s=e.columnModel.getGridColumn(i),!s&&(o.push(n.column),e.disposeFilterWrapper(n,"columnChanged"),e.disposeColumnListener(i))}),o.length>0?this.onFilterChanged({columns:o,source:"api"}):this.updateDependantFilters()},t.prototype.updateDependantFilters=function(){var e=this,o=this.columnModel.getGroupAutoColumns();o==null||o.forEach(function(n){n.getColDef().filter==="agGroupColumnFilter"&&e.getOrCreateFilterWrapper(n,"NO_UI")})},t.prototype.isFilterAllowed=function(e){var o,n;if(this.isAdvancedFilterEnabled())return!1;var i=e.isFilterAllowed();if(!i)return!1;var s=this.allColumnFilters.get(e.getColId());return(n=(o=s==null?void 0:s.filterPromise)===null||o===void 0?void 0:o.resolveNow(!0,function(a){return typeof(a==null?void 0:a.isFilterAllowed)=="function"?a==null?void 0:a.isFilterAllowed():!0}))!==null&&n!==void 0?n:!0},t.prototype.getFloatingFilterCompDetails=function(e,o){var n=this,i=e.getColDef(),s=this.createFilterParams(e,i),a=this.userComponentFactory.mergeParamsWithApplicationProvidedParams(i,Id,s),l=this.userComponentFactory.getDefaultFloatingFilterType(i,function(){return n.getDefaultFloatingFilter(e)});l==null&&(l="agReadOnlyFloatingFilter");var c=function(d){var p=n.getFilterComponent(e,"NO_UI");p!=null&&p.then(function(h){d(Ri(h))})},u={column:e,filterParams:a,currentParentModel:function(){return n.getCurrentFloatingFilterParentModel(e)},parentFilterInstance:c,showParentFilter:o,suppressFilterButton:!1};return this.userComponentFactory.getFloatingFilterCompDetails(i,u,l)},t.prototype.getCurrentFloatingFilterParentModel=function(e){var o=this.getFilterComponent(e,"NO_UI",!1);return o?o.resolveNow(null,function(n){return n&&n.getModel()}):null},t.prototype.destroyFilter=function(e,o){o===void 0&&(o="api");var n=e.getColId(),i=this.allColumnFilters.get(n);this.disposeColumnListener(n),i&&(this.disposeFilterWrapper(i,o),this.onFilterChanged({columns:[e],source:"api"}))},t.prototype.disposeColumnListener=function(e){var o=this.allColumnListeners.get(e);o&&(this.allColumnListeners.delete(e),o())},t.prototype.disposeFilterWrapper=function(e,o){var n=this;e.filterPromise.then(function(i){n.getContext().destroyBean(i),e.column.setFilterActive(!1,"filterDestroyed"),n.allColumnFilters.delete(e.column.getColId());var s={type:w.EVENT_FILTER_DESTROYED,source:o,column:e.column};n.eventService.dispatchEvent(s)})},t.prototype.filterModifiedCallbackFactory=function(e,o){var n=this;return function(){var i={type:w.EVENT_FILTER_MODIFIED,column:o,filterInstance:e};n.eventService.dispatchEvent(i)}},t.prototype.filterChangedCallbackFactory=function(e,o){var n=this;return function(i){var s,a=(s=i==null?void 0:i.source)!==null&&s!==void 0?s:"api",l={filter:e,additionalEventAttributes:i,columns:[o],source:a};n.callOnFilterChangedOutsideRenderCycle(l)}},t.prototype.checkDestroyFilter=function(e){var o=this,n=this.allColumnFilters.get(e);if(n){var i=n.column,s=(i.isFilterAllowed()?this.createFilterInstance(i):{compDetails:null}).compDetails;if(this.areFilterCompsDifferent(n.compDetails,s)){this.destroyFilter(i,"columnChanged");return}var a=i.getColDef().filterParams;if(!n.filterPromise){this.destroyFilter(i,"columnChanged");return}n.filterPromise.then(function(l){var c=l!=null&&l.refresh?l.refresh(_i(_i(_i({},o.createFilterParams(i,i.getColDef())),{filterModifiedCallback:o.filterModifiedCallbackFactory(l,i),filterChangedCallback:o.filterChangedCallbackFactory(l,i),doesRowPassOtherFilter:function(u){return o.doesRowPassOtherFilters(l,u)}}),a)):!0;c||o.destroyFilter(i,"columnChanged")})}},t.prototype.setColumnFilterWrapper=function(e,o){var n=this,i=e.getColId();this.allColumnFilters.set(i,o),this.allColumnListeners.set(i,this.addManagedListener(e,We.EVENT_COL_DEF_CHANGED,function(){return n.checkDestroyFilter(i)}))},t.prototype.areFilterCompsDifferent=function(e,o){if(!o||!e)return!0;var n=e.componentClass,i=o.componentClass,s=n===i||(n==null?void 0:n.render)&&(i==null?void 0:i.render)&&n.render===i.render;return!s},t.prototype.getAdvancedFilterModel=function(){return this.isAdvancedFilterEnabled()?this.advancedFilterService.getModel():null},t.prototype.setAdvancedFilterModel=function(e){if(this.isAdvancedFilterEnabled()){if(this.dataTypeService.isPendingInference()){this.advancedFilterModelUpdateQueue.push(e);return}this.advancedFilterService.setModel(e??null),this.onFilterChanged({source:"advancedFilter"})}},t.prototype.showAdvancedFilterBuilder=function(e){this.isAdvancedFilterEnabled()&&this.advancedFilterService.getCtrl().toggleFilterBuilder(e,!0)},t.prototype.updateAdvancedFilterColumns=function(){this.isAdvancedFilterEnabled()&&this.advancedFilterService.updateValidity()&&this.onFilterChanged({source:"advancedFilter"})},t.prototype.hasFloatingFilters=function(){if(this.isAdvancedFilterEnabled())return!1;var e=this.columnModel.getAllGridColumns();return e.some(function(o){return o.getColDef().floatingFilter})},t.prototype.getFilterInstance=function(e,o){if(this.isAdvancedFilterEnabled()){this.warnAdvancedFilters();return}var n=this.getFilterInstanceImpl(e,function(s){if(o){var a=Ri(s);o(a)}}),i=Ri(n);return i},t.prototype.getFilterInstanceImpl=function(e,o){var n=this.columnModel.getPrimaryColumn(e);if(n){var i=this.getFilterComponent(n,"NO_UI"),s=i&&i.resolveNow(null,function(a){return a});return s?setTimeout(o,0,s):i&&i.then(function(a){o(a)}),s}},t.prototype.warnAdvancedFilters=function(){Ee("Column Filter API methods have been disabled as Advanced Filters are enabled.")},t.prototype.setupAdvancedFilterHeaderComp=function(e){var o;(o=this.advancedFilterService)===null||o===void 0||o.getCtrl().setupHeaderComp(e)},t.prototype.getHeaderRowCount=function(){return this.isAdvancedFilterHeaderActive()?1:0},t.prototype.getHeaderHeight=function(){return this.isAdvancedFilterHeaderActive()?this.advancedFilterService.getCtrl().getHeaderHeight():0},t.prototype.processFilterModelUpdateQueue=function(){var e=this;this.filterModelUpdateQueue.forEach(function(o){var n=o.model,i=o.source;return e.setFilterModel(n,i)}),this.filterModelUpdateQueue=[],this.advancedFilterModelUpdateQueue.forEach(function(o){return e.setAdvancedFilterModel(o)}),this.advancedFilterModelUpdateQueue=[]},t.prototype.destroy=function(){var e=this;r.prototype.destroy.call(this),this.allColumnFilters.forEach(function(o){return e.disposeFilterWrapper(o,"gridDestroyed")}),this.allColumnListeners.clear()},$o([y("valueService")],t.prototype,"valueService",void 0),$o([y("columnModel")],t.prototype,"columnModel",void 0),$o([y("rowModel")],t.prototype,"rowModel",void 0),$o([y("userComponentFactory")],t.prototype,"userComponentFactory",void 0),$o([y("rowRenderer")],t.prototype,"rowRenderer",void 0),$o([y("dataTypeService")],t.prototype,"dataTypeService",void 0),$o([y("quickFilterService")],t.prototype,"quickFilterService",void 0),$o([Le("advancedFilterService")],t.prototype,"advancedFilterService",void 0),$o([Q],t.prototype,"init",null),t=$o([ne("filterManager")],t),t}(K),JF=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),yh=function(r){JF(t,r);function t(e,o){var n=r.call(this,e)||this;return n.ctrl=o,n}return t.prototype.getCtrl=function(){return this.ctrl},t}(Re),eN=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),os=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},tN=function(r){eN(t,r);function t(e){return r.call(this,t.TEMPLATE,e)||this}return t.prototype.postConstruct=function(){var e=this,o=this.getGui(),n={addOrRemoveCssClass:function(i,s){return e.addOrRemoveCssClass(i,s)},addOrRemoveBodyCssClass:function(i,s){return e.eFloatingFilterBody.classList.toggle(i,s)},setButtonWrapperDisplayed:function(i){return xe(e.eButtonWrapper,i)},setCompDetails:function(i){return e.setCompDetails(i)},getFloatingFilterComp:function(){return e.compPromise},setWidth:function(i){return o.style.width=i},setMenuIcon:function(i){return e.eButtonShowMainFilter.appendChild(i)}};this.ctrl.setComp(n,o,this.eButtonShowMainFilter,this.eFloatingFilterBody)},t.prototype.setCompDetails=function(e){var o=this;if(!e){this.destroyFloatingFilterComp(),this.compPromise=null;return}this.compPromise=e.newAgStackInstance(),this.compPromise.then(function(n){return o.afterCompCreated(n)})},t.prototype.destroyFloatingFilterComp=function(){this.floatingFilterComp&&(this.eFloatingFilterBody.removeChild(this.floatingFilterComp.getGui()),this.floatingFilterComp=this.destroyBean(this.floatingFilterComp))},t.prototype.afterCompCreated=function(e){if(e){if(!this.isAlive()){this.destroyBean(e);return}this.destroyFloatingFilterComp(),this.floatingFilterComp=e,this.eFloatingFilterBody.appendChild(e.getGui()),e.afterGuiAttached&&e.afterGuiAttached()}},t.TEMPLATE=`<div class="ag-header-cell ag-floating-filter" role="gridcell" tabindex="-1">
            <div ref="eFloatingFilterBody" role="presentation"></div>
            <div class="ag-floating-filter-button ag-hidden" ref="eButtonWrapper" role="presentation">
                <button type="button" class="ag-button ag-floating-filter-button-button" ref="eButtonShowMainFilter" tabindex="-1"></button>
            </div>
        </div>`,os([ee("eFloatingFilterBody")],t.prototype,"eFloatingFilterBody",void 0),os([ee("eButtonWrapper")],t.prototype,"eButtonWrapper",void 0),os([ee("eButtonShowMainFilter")],t.prototype,"eButtonShowMainFilter",void 0),os([Q],t.prototype,"postConstruct",null),os([zt],t.prototype,"destroyFloatingFilterComp",null),t}(yh),oN=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),nN=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},pt;(function(r){r.AUTO_HEIGHT="ag-layout-auto-height",r.NORMAL="ag-layout-normal",r.PRINT="ag-layout-print"})(pt||(pt={}));var Ch=function(r){oN(t,r);function t(e){var o=r.call(this)||this;return o.view=e,o}return t.prototype.postConstruct=function(){this.addManagedPropertyListener("domLayout",this.updateLayoutClasses.bind(this)),this.updateLayoutClasses()},t.prototype.updateLayoutClasses=function(){var e=this.getDomLayout(),o={autoHeight:e==="autoHeight",normal:e==="normal",print:e==="print"},n=o.autoHeight?pt.AUTO_HEIGHT:o.print?pt.PRINT:pt.NORMAL;this.view.updateLayoutClasses(n,o)},t.prototype.getDomLayout=function(){var e,o=(e=this.gridOptionsService.get("domLayout"))!==null&&e!==void 0?e:"normal",n=["normal","print","autoHeight"];return n.indexOf(o)===-1?(Ee("".concat(o," is not valid for DOM Layout, valid values are 'normal', 'autoHeight', 'print'.")),"normal"):o},nN([Q],t.prototype,"postConstruct",null),t}(K),iN=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),Ml=function(){return Ml=Object.assign||function(r){for(var t,e=1,o=arguments.length;e<o;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},Ml.apply(this,arguments)},Fn=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},xt;(function(r){r[r.Vertical=0]="Vertical",r[r.Horizontal=1]="Horizontal"})(xt||(xt={}));var Vt;(function(r){r[r.Container=0]="Container",r[r.FakeContainer=1]="FakeContainer"})(Vt||(Vt={}));var rN=function(r){iN(t,r);function t(e){var o=r.call(this)||this;return o.lastScrollSource=[null,null],o.scrollLeft=-1,o.nextScrollTop=-1,o.scrollTop=-1,o.eBodyViewport=e,o.resetLastHScrollDebounced=Eo(function(){return o.lastScrollSource[xt.Horizontal]=null},500),o.resetLastVScrollDebounced=Eo(function(){return o.lastScrollSource[xt.Vertical]=null},500),o}return t.prototype.postConstruct=function(){var e=this;this.enableRtl=this.gridOptionsService.get("enableRtl"),this.addManagedListener(this.eventService,w.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,this.onDisplayedColumnsWidthChanged.bind(this)),this.ctrlsService.whenReady(function(o){e.centerRowContainerCtrl=o.centerRowContainerCtrl,e.onDisplayedColumnsWidthChanged(),e.addScrollListener()})},t.prototype.addScrollListener=function(){var e=this.ctrlsService.getFakeHScrollComp(),o=this.ctrlsService.getFakeVScrollComp();this.addManagedListener(this.centerRowContainerCtrl.getViewportElement(),"scroll",this.onHScroll.bind(this)),e.onScrollCallback(this.onFakeHScroll.bind(this));var n=this.gridOptionsService.get("debounceVerticalScrollbar"),i=n?Eo(this.onVScroll.bind(this),100):this.onVScroll.bind(this),s=n?Eo(this.onFakeVScroll.bind(this),100):this.onFakeVScroll.bind(this);this.addManagedListener(this.eBodyViewport,"scroll",i),o.onScrollCallback(s)},t.prototype.onDisplayedColumnsWidthChanged=function(){this.enableRtl&&this.horizontallyScrollHeaderCenterAndFloatingCenter()},t.prototype.horizontallyScrollHeaderCenterAndFloatingCenter=function(e){var o=this.centerRowContainerCtrl==null;if(!o){e===void 0&&(e=this.centerRowContainerCtrl.getCenterViewportScrollLeft());var n=this.enableRtl?e:-e,i=this.ctrlsService.getTopCenterRowContainerCtrl(),s=this.ctrlsService.getStickyTopCenterRowContainerCtrl(),a=this.ctrlsService.getBottomCenterRowContainerCtrl(),l=this.ctrlsService.getFakeHScrollComp(),c=this.ctrlsService.getHeaderRowContainerCtrl();c.setHorizontalScroll(-n),a.setContainerTranslateX(n),i.setContainerTranslateX(n),s.setContainerTranslateX(n);var u=this.centerRowContainerCtrl.getViewportElement(),d=this.lastScrollSource[xt.Horizontal]===Vt.Container;e=Math.abs(e),d?l.setScrollPosition(e):Qs(u,e,this.enableRtl)}},t.prototype.isControllingScroll=function(e,o){return this.lastScrollSource[o]==null?(this.lastScrollSource[o]=e,!0):this.lastScrollSource[o]===e},t.prototype.onFakeHScroll=function(){this.isControllingScroll(Vt.FakeContainer,xt.Horizontal)&&this.onHScrollCommon(Vt.FakeContainer)},t.prototype.onHScroll=function(){this.isControllingScroll(Vt.Container,xt.Horizontal)&&this.onHScrollCommon(Vt.Container)},t.prototype.onHScrollCommon=function(e){var o=this.centerRowContainerCtrl.getViewportElement(),n=o.scrollLeft;if(!this.shouldBlockScrollUpdate(xt.Horizontal,n,!0)){var i;e===Vt.Container?i=qs(o,this.enableRtl):i=this.ctrlsService.getFakeHScrollComp().getScrollPosition(),this.doHorizontalScroll(Math.round(i)),this.resetLastHScrollDebounced()}},t.prototype.onFakeVScroll=function(){this.isControllingScroll(Vt.FakeContainer,xt.Vertical)&&this.onVScrollCommon(Vt.FakeContainer)},t.prototype.onVScroll=function(){this.isControllingScroll(Vt.Container,xt.Vertical)&&this.onVScrollCommon(Vt.Container)},t.prototype.onVScrollCommon=function(e){var o;e===Vt.Container?o=this.eBodyViewport.scrollTop:o=this.ctrlsService.getFakeVScrollComp().getScrollPosition(),!this.shouldBlockScrollUpdate(xt.Vertical,o,!0)&&(this.animationFrameService.setScrollTop(o),this.nextScrollTop=o,e===Vt.Container?this.ctrlsService.getFakeVScrollComp().setScrollPosition(o):this.eBodyViewport.scrollTop=o,this.gridOptionsService.get("suppressAnimationFrame")?this.scrollGridIfNeeded():this.animationFrameService.schedule(),this.resetLastVScrollDebounced())},t.prototype.doHorizontalScroll=function(e){var o=this.ctrlsService.getFakeHScrollComp().getScrollPosition();this.scrollLeft===e&&e===o||(this.scrollLeft=e,this.fireScrollEvent(xt.Horizontal),this.horizontallyScrollHeaderCenterAndFloatingCenter(e),this.centerRowContainerCtrl.onHorizontalViewportChanged(!0))},t.prototype.fireScrollEvent=function(e){var o=this,n={type:w.EVENT_BODY_SCROLL,direction:e===xt.Horizontal?"horizontal":"vertical",left:this.scrollLeft,top:this.scrollTop};this.eventService.dispatchEvent(n),window.clearTimeout(this.scrollTimer),this.scrollTimer=void 0,this.scrollTimer=window.setTimeout(function(){var i=Ml(Ml({},n),{type:w.EVENT_BODY_SCROLL_END});o.eventService.dispatchEvent(i)},100)},t.prototype.shouldBlockScrollUpdate=function(e,o,n){return n===void 0&&(n=!1),n&&!ai()?!1:e===xt.Vertical?this.shouldBlockVerticalScroll(o):this.shouldBlockHorizontalScroll(o)},t.prototype.shouldBlockVerticalScroll=function(e){var o=ua(this.eBodyViewport),n=this.eBodyViewport.scrollHeight;return e<0||e+o>n},t.prototype.shouldBlockHorizontalScroll=function(e){var o=this.centerRowContainerCtrl.getCenterWidth(),n=this.centerRowContainerCtrl.getViewportElement().scrollWidth;if(this.enableRtl&&Ys()){if(e>0)return!0}else if(e<0)return!0;return Math.abs(e)+o>n},t.prototype.redrawRowsAfterScroll=function(){this.fireScrollEvent(xt.Vertical)},t.prototype.checkScrollLeft=function(){this.scrollLeft!==this.centerRowContainerCtrl.getCenterViewportScrollLeft()&&this.onHScrollCommon(Vt.Container)},t.prototype.scrollGridIfNeeded=function(){var e=this.scrollTop!=this.nextScrollTop;return e&&(this.scrollTop=this.nextScrollTop,this.redrawRowsAfterScroll()),e},t.prototype.setHorizontalScrollPosition=function(e,o){o===void 0&&(o=!1);var n=0,i=this.centerRowContainerCtrl.getViewportElement().scrollWidth-this.centerRowContainerCtrl.getCenterWidth();!o&&this.shouldBlockScrollUpdate(xt.Horizontal,e)&&(this.enableRtl&&Ys()?e=e>0?0:i:e=Math.min(Math.max(e,n),i)),Qs(this.centerRowContainerCtrl.getViewportElement(),Math.abs(e),this.enableRtl),this.doHorizontalScroll(e)},t.prototype.setVerticalScrollPosition=function(e){this.eBodyViewport.scrollTop=e},t.prototype.getVScrollPosition=function(){var e={top:this.eBodyViewport.scrollTop,bottom:this.eBodyViewport.scrollTop+this.eBodyViewport.offsetHeight};return e},t.prototype.getHScrollPosition=function(){return this.centerRowContainerCtrl.getHScrollPosition()},t.prototype.isHorizontalScrollShowing=function(){return this.centerRowContainerCtrl.isHorizontalScrollShowing()},t.prototype.scrollHorizontally=function(e){var o=this.centerRowContainerCtrl.getViewportElement().scrollLeft;return this.setHorizontalScrollPosition(o+e),this.centerRowContainerCtrl.getViewportElement().scrollLeft-o},t.prototype.scrollToTop=function(){this.eBodyViewport.scrollTop=0},t.prototype.ensureNodeVisible=function(e,o){o===void 0&&(o=null);for(var n=this.rowModel.getRowCount(),i=-1,s=0;s<n;s++){var a=this.rowModel.getRow(s);if(typeof e=="function"){var l=e;if(a&&l(a)){i=s;break}}else if(e===a||e===a.data){i=s;break}}i>=0&&this.ensureIndexVisible(i,o)},t.prototype.ensureIndexVisible=function(e,o){if(!this.gridOptionsService.isDomLayout("print")){var n=this.paginationProxy.getRowCount();if(typeof e!="number"||e<0||e>=n){console.warn("AG Grid: Invalid row index for ensureIndexVisible: "+e);return}var i=this.gridOptionsService.get("pagination"),s=i&&!this.gridOptionsService.get("suppressPaginationPanel");s||this.paginationProxy.goToPageWithIndex(e);var a=this.ctrlsService.getGridBodyCtrl(),l=a.getStickyTopHeight(),c=this.paginationProxy.getRow(e),u;do{var d=c.rowTop,p=c.rowHeight,h=this.paginationProxy.getPixelOffset(),f=c.rowTop-h,g=f+c.rowHeight,_=this.getVScrollPosition(),C=this.heightScaler.getDivStretchOffset(),E=_.top+C,T=_.bottom+C,P=T-E,A=this.heightScaler.getScrollPositionForPixel(f),b=this.heightScaler.getScrollPositionForPixel(g-P),I=Math.min((A+b)/2,f),F=E+l>f,U=T<g,k=null;o==="top"?k=A:o==="bottom"?k=b:o==="middle"?k=I:F?k=A-l:U&&(k=b),k!==null&&(this.setVerticalScrollPosition(k),this.rowRenderer.redraw({afterScroll:!0})),u=d!==c.rowTop||p!==c.rowHeight}while(u);this.animationFrameService.flushAllFrames()}},t.prototype.ensureColumnVisible=function(e,o){o===void 0&&(o="auto");var n=this.columnModel.getGridColumn(e);if(n&&!n.isPinned()&&this.columnModel.isColumnDisplayed(n)){var i=this.getPositionedHorizontalScroll(n,o);i!==null&&this.centerRowContainerCtrl.setCenterViewportScrollLeft(i),this.centerRowContainerCtrl.onHorizontalViewportChanged(),this.animationFrameService.flushAllFrames()}},t.prototype.setScrollPosition=function(e,o){this.centerRowContainerCtrl.setCenterViewportScrollLeft(o),this.setVerticalScrollPosition(e),this.rowRenderer.redraw({afterScroll:!0}),this.animationFrameService.flushAllFrames()},t.prototype.getPositionedHorizontalScroll=function(e,o){var n=this.isColumnOutsideViewport(e),i=n.columnBeforeStart,s=n.columnAfterEnd,a=this.centerRowContainerCtrl.getCenterWidth()<e.getActualWidth(),l=this.centerRowContainerCtrl.getCenterWidth(),c=this.enableRtl,u=(c?i:s)||a,d=c?s:i;o!=="auto"&&(u=o==="start",d=o==="end");var p=o==="middle";if(u||d||p){var h=this.getColumnBounds(e),f=h.colLeft,g=h.colMiddle,_=h.colRight;return p?g-l/2:u?c?_:f:c?f-l:_-l}return null},t.prototype.isColumnOutsideViewport=function(e){var o=this.getViewportBounds(),n=o.start,i=o.end,s=this.getColumnBounds(e),a=s.colLeft,l=s.colRight,c=this.enableRtl,u=c?n>l:i<l,d=c?i<a:n>a;return{columnBeforeStart:u,columnAfterEnd:d}},t.prototype.getColumnBounds=function(e){var o=this.enableRtl,n=this.columnModel.getBodyContainerWidth(),i=e.getActualWidth(),s=e.getLeft(),a=o?-1:1,l=o?n-s:s,c=l+i*a,u=l+i/2*a;return{colLeft:l,colMiddle:u,colRight:c}},t.prototype.getViewportBounds=function(){var e=this.centerRowContainerCtrl.getCenterWidth(),o=this.centerRowContainerCtrl.getCenterViewportScrollLeft(),n=o,i=e+o;return{start:n,end:i,width:e}},Fn([y("ctrlsService")],t.prototype,"ctrlsService",void 0),Fn([y("animationFrameService")],t.prototype,"animationFrameService",void 0),Fn([y("paginationProxy")],t.prototype,"paginationProxy",void 0),Fn([y("rowModel")],t.prototype,"rowModel",void 0),Fn([y("rowContainerHeightService")],t.prototype,"heightScaler",void 0),Fn([y("rowRenderer")],t.prototype,"rowRenderer",void 0),Fn([y("columnModel")],t.prototype,"columnModel",void 0),Fn([Q],t.prototype,"postConstruct",null),t}(K),sN=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),Dd=function(){return Dd=Object.assign||function(r){for(var t,e=1,o=arguments.length;e<o;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},Dd.apply(this,arguments)},yo=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},aN=function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var o=e.call(r),n,i=[],s;try{for(;(t===void 0||t-- >0)&&!(n=o.next()).done;)i.push(n.value)}catch(a){s={error:a}}finally{try{n&&!n.done&&(e=o.return)&&e.call(o)}finally{if(s)throw s.error}}return i},lN=function(r,t,e){if(e||arguments.length===2)for(var o=0,n=t.length,i;o<n;o++)(i||!(o in t))&&(i||(i=Array.prototype.slice.call(t,0,o)),i[o]=t[o]);return r.concat(i||Array.prototype.slice.call(t))},cN=function(r){sN(t,r);function t(e){var o=r.call(this)||this;return o.isMultiRowDrag=!1,o.isGridSorted=!1,o.isGridFiltered=!1,o.isRowGroupActive=!1,o.eContainer=e,o}return t.prototype.postConstruct=function(){var e=this;this.gridOptionsService.isRowModelType("clientSide")&&(this.clientSideRowModel=this.rowModel);var o=function(){e.onSortChanged(),e.onFilterChanged(),e.onRowGroupChanged()};this.addManagedListener(this.eventService,w.EVENT_SORT_CHANGED,this.onSortChanged.bind(this)),this.addManagedListener(this.eventService,w.EVENT_FILTER_CHANGED,this.onFilterChanged.bind(this)),this.addManagedListener(this.eventService,w.EVENT_COLUMN_ROW_GROUP_CHANGED,this.onRowGroupChanged.bind(this)),this.addManagedListener(this.eventService,w.EVENT_MODEL_UPDATED,function(){o()}),o(),this.ctrlsService.whenReady(function(){var n=e.ctrlsService.getGridBodyCtrl();e.autoScrollService=new KC({scrollContainer:n.getBodyViewportElement(),scrollAxis:"y",getVerticalPosition:function(){return n.getScrollFeature().getVScrollPosition().top},setVerticalPosition:function(i){return n.getScrollFeature().setVerticalScrollPosition(i)},onScrollCallback:function(){e.onDragging(e.lastDraggingEvent)}})})},t.prototype.onSortChanged=function(){this.isGridSorted=this.sortController.isSortActive()},t.prototype.onFilterChanged=function(){this.isGridFiltered=this.filterManager.isAnyFilterPresent()},t.prototype.onRowGroupChanged=function(){var e=this.columnModel.getRowGroupColumns();this.isRowGroupActive=!Jt(e)},t.prototype.getContainer=function(){return this.eContainer},t.prototype.isInterestedIn=function(e){return e===no.RowDrag},t.prototype.getIconName=function(){var e=this.gridOptionsService.get("rowDragManaged");return e&&this.shouldPreventRowMove()?St.ICON_NOT_ALLOWED:St.ICON_MOVE},t.prototype.shouldPreventRowMove=function(){return this.isGridSorted||this.isGridFiltered||this.isRowGroupActive},t.prototype.getRowNodes=function(e){var o=this;if(!this.isFromThisGrid(e))return e.dragItem.rowNodes||[];var n=this.gridOptionsService.get("rowDragMultiRow"),i=lN([],aN(this.selectionService.getSelectedNodes()),!1).sort(function(a,l){return a.rowIndex==null||l.rowIndex==null?0:o.getRowIndexNumber(a)-o.getRowIndexNumber(l)}),s=e.dragItem.rowNode;return n&&i.indexOf(s)!==-1?(this.isMultiRowDrag=!0,i):(this.isMultiRowDrag=!1,[s])},t.prototype.onDragEnter=function(e){e.dragItem.rowNodes=this.getRowNodes(e),this.dispatchGridEvent(w.EVENT_ROW_DRAG_ENTER,e),this.getRowNodes(e).forEach(function(o){o.setDragging(!0)}),this.onEnterOrDragging(e)},t.prototype.onDragging=function(e){this.onEnterOrDragging(e)},t.prototype.isFromThisGrid=function(e){var o=e.dragSource.dragSourceDomDataKey;return o===this.gridOptionsService.getDomDataKey()},t.prototype.isDropZoneWithinThisGrid=function(e){var o=this.ctrlsService.getGridBodyCtrl(),n=o.getGui(),i=e.dropZoneTarget;return!n.contains(i)},t.prototype.onEnterOrDragging=function(e){this.dispatchGridEvent(w.EVENT_ROW_DRAG_MOVE,e),this.lastDraggingEvent=e;var o=this.mouseEventService.getNormalisedPosition(e).y,n=this.gridOptionsService.get("rowDragManaged");n&&this.doManagedDrag(e,o),this.autoScrollService.check(e.event)},t.prototype.doManagedDrag=function(e,o){var n=this.isFromThisGrid(e),i=this.gridOptionsService.get("rowDragManaged"),s=e.dragItem.rowNodes;i&&this.shouldPreventRowMove()||(this.gridOptionsService.get("suppressMoveWhenRowDragging")||!n?this.isDropZoneWithinThisGrid(e)||this.clientSideRowModel.highlightRowAtPixel(s[0],o):this.moveRows(s,o))},t.prototype.getRowIndexNumber=function(e){return parseInt(Ge(e.getRowIndexString().split("-")),10)},t.prototype.moveRowAndClearHighlight=function(e){var o=this,n=this.clientSideRowModel.getLastHighlightedRowNode(),i=n&&n.highlighted===On.Below,s=this.mouseEventService.getNormalisedPosition(e).y,a=e.dragItem.rowNodes,l=i?1:0;if(this.isFromThisGrid(e))a.forEach(function(d){d.rowTop<s&&(l-=1)}),this.moveRows(a,s,l);else{var c=this.gridOptionsService.getCallback("getRowId"),u=this.clientSideRowModel.getRowIndexAtPixel(s)+1;this.clientSideRowModel.getHighlightPosition(s)===On.Above&&u--,this.clientSideRowModel.updateRowData({add:a.map(function(d){return d.data}).filter(function(d){return!o.clientSideRowModel.getRowNode(c?c({data:d,level:0}):d.id)}),addIndex:u})}this.clearRowHighlight()},t.prototype.clearRowHighlight=function(){this.clientSideRowModel.highlightRowAtPixel(null)},t.prototype.moveRows=function(e,o,n){n===void 0&&(n=0);var i=this.clientSideRowModel.ensureRowsAtPixel(e,o,n);i&&(this.focusService.clearFocusedCell(),this.rangeService&&this.rangeService.removeAllCellRanges())},t.prototype.addRowDropZone=function(e){var o=this;if(!e.getContainer()){Ee("addRowDropZone - A container target needs to be provided");return}if(this.dragAndDropService.findExternalZone(e)){console.warn("AG Grid: addRowDropZone - target already exists in the list of DropZones. Use `removeRowDropZone` before adding it again.");return}var n={getContainer:e.getContainer};e.fromGrid?(e.fromGrid=void 0,n=e):(e.onDragEnter&&(n.onDragEnter=function(i){e.onDragEnter(o.draggingToRowDragEvent(w.EVENT_ROW_DRAG_ENTER,i))}),e.onDragLeave&&(n.onDragLeave=function(i){e.onDragLeave(o.draggingToRowDragEvent(w.EVENT_ROW_DRAG_LEAVE,i))}),e.onDragging&&(n.onDragging=function(i){e.onDragging(o.draggingToRowDragEvent(w.EVENT_ROW_DRAG_MOVE,i))}),e.onDragStop&&(n.onDragStop=function(i){e.onDragStop(o.draggingToRowDragEvent(w.EVENT_ROW_DRAG_END,i))})),this.dragAndDropService.addDropTarget(Dd({isInterestedIn:function(i){return i===no.RowDrag},getIconName:function(){return St.ICON_MOVE},external:!0},n))},t.prototype.getRowDropZone=function(e){var o=this,n=this.getContainer.bind(this),i=this.onDragEnter.bind(this),s=this.onDragLeave.bind(this),a=this.onDragging.bind(this),l=this.onDragStop.bind(this);return e?{getContainer:n,onDragEnter:e.onDragEnter?function(c){i(c),e.onDragEnter(o.draggingToRowDragEvent(w.EVENT_ROW_DRAG_ENTER,c))}:i,onDragLeave:e.onDragLeave?function(c){s(c),e.onDragLeave(o.draggingToRowDragEvent(w.EVENT_ROW_DRAG_LEAVE,c))}:s,onDragging:e.onDragging?function(c){a(c),e.onDragging(o.draggingToRowDragEvent(w.EVENT_ROW_DRAG_MOVE,c))}:a,onDragStop:e.onDragStop?function(c){l(c),e.onDragStop(o.draggingToRowDragEvent(w.EVENT_ROW_DRAG_END,c))}:l,fromGrid:!0}:{getContainer:n,onDragEnter:i,onDragLeave:s,onDragging:a,onDragStop:l,fromGrid:!0}},t.prototype.draggingToRowDragEvent=function(e,o){var n=this.mouseEventService.getNormalisedPosition(o).y,i=n>this.paginationProxy.getCurrentPageHeight(),s=-1,a;i||(s=this.rowModel.getRowIndexAtPixel(n),a=this.rowModel.getRow(s));var l;switch(o.vDirection){case Fr.Down:l="down";break;case Fr.Up:l="up";break;default:l=null;break}var c={type:e,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context,event:o.event,node:o.dragItem.rowNode,nodes:o.dragItem.rowNodes,overIndex:s,overNode:a,y:n,vDirection:l};return c},t.prototype.dispatchGridEvent=function(e,o){var n=this.draggingToRowDragEvent(e,o);this.eventService.dispatchEvent(n)},t.prototype.onDragLeave=function(e){this.dispatchGridEvent(w.EVENT_ROW_DRAG_LEAVE,e),this.stopDragging(e),this.gridOptionsService.get("rowDragManaged")&&this.clearRowHighlight(),this.isFromThisGrid(e)&&(this.isMultiRowDrag=!1)},t.prototype.onDragStop=function(e){this.dispatchGridEvent(w.EVENT_ROW_DRAG_END,e),this.stopDragging(e),this.gridOptionsService.get("rowDragManaged")&&(this.gridOptionsService.get("suppressMoveWhenRowDragging")||!this.isFromThisGrid(e))&&!this.isDropZoneWithinThisGrid(e)&&this.moveRowAndClearHighlight(e)},t.prototype.stopDragging=function(e){this.autoScrollService.ensureCleared(),this.getRowNodes(e).forEach(function(o){o.setDragging(!1)})},yo([y("dragAndDropService")],t.prototype,"dragAndDropService",void 0),yo([y("rowModel")],t.prototype,"rowModel",void 0),yo([y("paginationProxy")],t.prototype,"paginationProxy",void 0),yo([y("columnModel")],t.prototype,"columnModel",void 0),yo([y("focusService")],t.prototype,"focusService",void 0),yo([y("sortController")],t.prototype,"sortController",void 0),yo([y("filterManager")],t.prototype,"filterManager",void 0),yo([y("selectionService")],t.prototype,"selectionService",void 0),yo([y("mouseEventService")],t.prototype,"mouseEventService",void 0),yo([y("ctrlsService")],t.prototype,"ctrlsService",void 0),yo([Le("rangeService")],t.prototype,"rangeService",void 0),yo([Q],t.prototype,"postConstruct",null),t}(K),uN=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),$t=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},Nr;(function(r){r.ANIMATION_ON="ag-row-animation",r.ANIMATION_OFF="ag-row-no-animation"})(Nr||(Nr={}));var QC="ag-force-vertical-scroll",dN="ag-selectable",pN="ag-column-moving",hN=function(r){uN(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.stickyTopHeight=0,e}return t.prototype.getScrollFeature=function(){return this.bodyScrollFeature},t.prototype.getBodyViewportElement=function(){return this.eBodyViewport},t.prototype.setComp=function(e,o,n,i,s,a){var l=this;this.comp=e,this.eGridBody=o,this.eBodyViewport=n,this.eTop=i,this.eBottom=s,this.eStickyTop=a,this.setCellTextSelection(this.gridOptionsService.get("enableCellTextSelection")),this.addManagedPropertyListener("enableCellTextSelection",function(c){return l.setCellTextSelection(c.currentValue)}),this.createManagedBean(new Ch(this.comp)),this.bodyScrollFeature=this.createManagedBean(new rN(this.eBodyViewport)),this.addRowDragListener(),this.setupRowAnimationCssClass(),this.addEventListeners(),this.addFocusListeners([i,n,s,a]),this.onGridColumnsChanged(),this.addBodyViewportListener(),this.setFloatingHeights(),this.disableBrowserDragging(),this.addStopEditingWhenGridLosesFocus(),this.filterManager.setupAdvancedFilterHeaderComp(i),this.ctrlsService.registerGridBodyCtrl(this)},t.prototype.getComp=function(){return this.comp},t.prototype.addEventListeners=function(){this.addManagedListener(this.eventService,w.EVENT_GRID_COLUMNS_CHANGED,this.onGridColumnsChanged.bind(this)),this.addManagedListener(this.eventService,w.EVENT_SCROLL_VISIBILITY_CHANGED,this.onScrollVisibilityChanged.bind(this)),this.addManagedListener(this.eventService,w.EVENT_PINNED_ROW_DATA_CHANGED,this.onPinnedRowDataChanged.bind(this)),this.addManagedListener(this.eventService,w.EVENT_HEADER_HEIGHT_CHANGED,this.onHeaderHeightChanged.bind(this))},t.prototype.addFocusListeners=function(e){var o=this;e.forEach(function(n){o.addManagedListener(n,"focusin",function(i){var s=i.target,a=Ai(s,"ag-root",n);n.classList.toggle("ag-has-focus",!a)}),o.addManagedListener(n,"focusout",function(i){var s=i.target,a=i.relatedTarget,l=n.contains(a),c=Ai(a,"ag-root",n),u=Ai(s,"ag-root",n);u||(!l||c)&&n.classList.remove("ag-has-focus")})})},t.prototype.setColumnMovingCss=function(e){this.comp.setColumnMovingCss(pN,e)},t.prototype.setCellTextSelection=function(e){e===void 0&&(e=!1),this.comp.setCellSelectableCss(dN,e)},t.prototype.onScrollVisibilityChanged=function(){var e=this,o=this.scrollVisibleService.isVerticalScrollShowing();this.setVerticalScrollPaddingVisible(o),this.setStickyTopWidth(o);var n=o&&this.gridOptionsService.getScrollbarWidth()||0,i=eh()?16:0,s="calc(100% + ".concat(n+i,"px)");this.animationFrameService.requestAnimationFrame(function(){return e.comp.setBodyViewportWidth(s)})},t.prototype.onGridColumnsChanged=function(){var e=this.columnModel.getAllGridColumns();this.comp.setColumnCount(e.length)},t.prototype.disableBrowserDragging=function(){this.addManagedListener(this.eGridBody,"dragstart",function(e){if(e.target instanceof HTMLImageElement)return e.preventDefault(),!1})},t.prototype.addStopEditingWhenGridLosesFocus=function(){var e=this;if(this.gridOptionsService.get("stopEditingWhenCellsLoseFocus")){var o=function(i){var s=i.relatedTarget;if(Rl(s)===null){e.rowRenderer.stopEditing();return}var a=n.some(function(c){return c.contains(s)})&&e.mouseEventService.isElementInThisGrid(s);if(!a){var l=e.popupService;a=l.getActivePopups().some(function(c){return c.contains(s)})||l.isElementWithinCustomPopup(s)}a||e.rowRenderer.stopEditing()},n=[this.eBodyViewport,this.eBottom,this.eTop,this.eStickyTop];n.forEach(function(i){return e.addManagedListener(i,"focusout",o)})}},t.prototype.updateRowCount=function(){var e=this.headerNavigationService.getHeaderRowCount()+this.filterManager.getHeaderRowCount(),o=this.rowModel.isLastRowIndexKnown()?this.rowModel.getRowCount():-1,n=o===-1?-1:e+o;this.comp.setRowCount(n)},t.prototype.registerBodyViewportResizeListener=function(e){this.comp.registerBodyViewportResizeListener(e)},t.prototype.setVerticalScrollPaddingVisible=function(e){var o=e?"scroll":"hidden";this.comp.setPinnedTopBottomOverflowY(o)},t.prototype.isVerticalScrollShowing=function(){var e=this.gridOptionsService.get("alwaysShowVerticalScroll"),o=e?QC:null,n=this.gridOptionsService.isDomLayout("normal");return this.comp.setAlwaysVerticalScrollClass(o,e),e||n&&gC(this.eBodyViewport)},t.prototype.setupRowAnimationCssClass=function(){var e=this,o=function(){var n=e.gridOptionsService.isAnimateRows()&&!e.rowContainerHeightService.isStretching(),i=n?Nr.ANIMATION_ON:Nr.ANIMATION_OFF;e.comp.setRowAnimationCssOnBodyViewport(i,n)};o(),this.addManagedListener(this.eventService,w.EVENT_HEIGHT_SCALE_CHANGED,o),this.addManagedPropertyListener("animateRows",o)},t.prototype.getGridBodyElement=function(){return this.eGridBody},t.prototype.addBodyViewportListener=function(){var e=this.onBodyViewportContextMenu.bind(this);this.addManagedListener(this.eBodyViewport,"contextmenu",e),this.mockContextMenuForIPad(e),this.addManagedListener(this.eBodyViewport,"wheel",this.onBodyViewportWheel.bind(this)),this.addManagedListener(this.eStickyTop,"wheel",this.onStickyTopWheel.bind(this)),this.addFullWidthContainerWheelListener()},t.prototype.addFullWidthContainerWheelListener=function(){var e=this,o=this.eBodyViewport.querySelector(".ag-full-width-container"),n=this.eBodyViewport.querySelector(".ag-center-cols-viewport");o&&n&&this.addManagedListener(o,"wheel",function(i){return e.onFullWidthContainerWheel(i,n)})},t.prototype.onFullWidthContainerWheel=function(e,o){!e.deltaX||Math.abs(e.deltaY)>Math.abs(e.deltaX)||!this.mouseEventService.isEventFromThisGrid(e)||(e.preventDefault(),o.scrollBy({left:e.deltaX}))},t.prototype.onBodyViewportContextMenu=function(e,o,n){if(!(!e&&!n)){if(this.gridOptionsService.get("preventDefaultOnContextMenu")){var i=e||n;i.preventDefault()}var s=(e||o).target;if(s===this.eBodyViewport||s===this.ctrlsService.getCenterRowContainerCtrl().getViewportElement()){if(!this.contextMenuFactory)return;e?this.contextMenuFactory.onContextMenu(e,null,null,null,null,this.eGridBody):n&&this.contextMenuFactory.onContextMenu(null,n,null,null,null,this.eGridBody)}}},t.prototype.mockContextMenuForIPad=function(e){if(ai()){var o=new fo(this.eBodyViewport),n=function(i){e(void 0,i.touchStart,i.touchEvent)};this.addManagedListener(o,fo.EVENT_LONG_TAP,n),this.addDestroyFunc(function(){return o.destroy()})}},t.prototype.onBodyViewportWheel=function(e){this.gridOptionsService.get("suppressScrollWhenPopupsAreOpen")&&this.popupService.hasAnchoredPopup()&&e.preventDefault()},t.prototype.onStickyTopWheel=function(e){e.preventDefault(),e.offsetY&&this.scrollVertically(e.deltaY)},t.prototype.getGui=function(){return this.eGridBody},t.prototype.scrollVertically=function(e){var o=this.eBodyViewport.scrollTop;return this.bodyScrollFeature.setVerticalScrollPosition(o+e),this.eBodyViewport.scrollTop-o},t.prototype.addRowDragListener=function(){this.rowDragFeature=this.createManagedBean(new cN(this.eBodyViewport)),this.dragAndDropService.addDropTarget(this.rowDragFeature)},t.prototype.getRowDragFeature=function(){return this.rowDragFeature},t.prototype.onPinnedRowDataChanged=function(){this.setFloatingHeights()},t.prototype.setFloatingHeights=function(){var e=this.pinnedRowModel,o=e.getPinnedTopTotalHeight();o&&(o+=1);var n=e.getPinnedBottomTotalHeight();n&&(n+=1),this.comp.setTopHeight(o),this.comp.setBottomHeight(n),this.comp.setTopDisplay(o?"inherit":"none"),this.comp.setBottomDisplay(n?"inherit":"none"),this.setStickyTopOffsetTop()},t.prototype.setStickyTopHeight=function(e){e===void 0&&(e=0),this.comp.setStickyTopHeight("".concat(e,"px")),this.stickyTopHeight=e},t.prototype.getStickyTopHeight=function(){return this.stickyTopHeight},t.prototype.setStickyTopWidth=function(e){if(!e)this.comp.setStickyTopWidth("100%");else{var o=this.gridOptionsService.getScrollbarWidth();this.comp.setStickyTopWidth("calc(100% - ".concat(o,"px)"))}},t.prototype.onHeaderHeightChanged=function(){this.setStickyTopOffsetTop()},t.prototype.setStickyTopOffsetTop=function(){var e=this.ctrlsService.getGridHeaderCtrl(),o=e.getHeaderHeight()+this.filterManager.getHeaderHeight(),n=this.pinnedRowModel.getPinnedTopTotalHeight(),i=0;o>0&&(i+=o+1),n>0&&(i+=n+1),this.comp.setStickyTopTop("".concat(i,"px"))},t.prototype.sizeColumnsToFit=function(e,o){var n=this,i=this.isVerticalScrollShowing(),s=i?this.gridOptionsService.getScrollbarWidth():0,a=Qi(this.eGridBody),l=a-s;if(l>0){this.columnModel.sizeColumnsToFit(l,"sizeColumnsToFit",!1,e);return}o===void 0?window.setTimeout(function(){n.sizeColumnsToFit(e,100)},0):o===100?window.setTimeout(function(){n.sizeColumnsToFit(e,500)},100):o===500?window.setTimeout(function(){n.sizeColumnsToFit(e,-1)},500):console.warn("AG Grid: tried to call sizeColumnsToFit() but the grid is coming back with zero width, maybe the grid is not visible yet on the screen?")},t.prototype.addScrollEventListener=function(e){this.eBodyViewport.addEventListener("scroll",e,{passive:!0})},t.prototype.removeScrollEventListener=function(e){this.eBodyViewport.removeEventListener("scroll",e)},$t([y("animationFrameService")],t.prototype,"animationFrameService",void 0),$t([y("rowContainerHeightService")],t.prototype,"rowContainerHeightService",void 0),$t([y("ctrlsService")],t.prototype,"ctrlsService",void 0),$t([y("columnModel")],t.prototype,"columnModel",void 0),$t([y("scrollVisibleService")],t.prototype,"scrollVisibleService",void 0),$t([Le("contextMenuFactory")],t.prototype,"contextMenuFactory",void 0),$t([y("headerNavigationService")],t.prototype,"headerNavigationService",void 0),$t([y("dragAndDropService")],t.prototype,"dragAndDropService",void 0),$t([y("pinnedRowModel")],t.prototype,"pinnedRowModel",void 0),$t([y("rowRenderer")],t.prototype,"rowRenderer",void 0),$t([y("popupService")],t.prototype,"popupService",void 0),$t([y("mouseEventService")],t.prototype,"mouseEventService",void 0),$t([y("rowModel")],t.prototype,"rowModel",void 0),$t([y("filterManager")],t.prototype,"filterManager",void 0),t}(K),Ll;(function(r){r[r.FILL=0]="FILL",r[r.RANGE=1]="RANGE"})(Ll||(Ll={}));var fr;(function(r){r[r.VALUE=0]="VALUE",r[r.DIMENSION=1]="DIMENSION"})(fr||(fr={}));var ns="ag-cell-range-selected",fN="ag-cell-range-chart",gN="ag-cell-range-single-cell",vN="ag-cell-range-chart-category",mN="ag-cell-range-handle",yN="ag-cell-range-top",CN="ag-cell-range-right",wN="ag-cell-range-bottom",_N="ag-cell-range-left",SN=function(){function r(t,e){this.beans=t,this.cellCtrl=e}return r.prototype.setComp=function(t,e){this.cellComp=t,this.eGui=e,this.onRangeSelectionChanged()},r.prototype.onRangeSelectionChanged=function(){this.cellComp&&(this.rangeCount=this.beans.rangeService.getCellRangeCount(this.cellCtrl.getCellPosition()),this.hasChartRange=this.getHasChartRange(),this.cellComp.addOrRemoveCssClass(ns,this.rangeCount!==0),this.cellComp.addOrRemoveCssClass("".concat(ns,"-1"),this.rangeCount===1),this.cellComp.addOrRemoveCssClass("".concat(ns,"-2"),this.rangeCount===2),this.cellComp.addOrRemoveCssClass("".concat(ns,"-3"),this.rangeCount===3),this.cellComp.addOrRemoveCssClass("".concat(ns,"-4"),this.rangeCount>=4),this.cellComp.addOrRemoveCssClass(fN,this.hasChartRange),Mr(this.eGui,this.rangeCount>0?!0:void 0),this.cellComp.addOrRemoveCssClass(gN,this.isSingleCell()),this.updateRangeBorders(),this.refreshHandle())},r.prototype.updateRangeBorders=function(){var t=this.getRangeBorders(),e=this.isSingleCell(),o=!e&&t.top,n=!e&&t.right,i=!e&&t.bottom,s=!e&&t.left;this.cellComp.addOrRemoveCssClass(yN,o),this.cellComp.addOrRemoveCssClass(CN,n),this.cellComp.addOrRemoveCssClass(wN,i),this.cellComp.addOrRemoveCssClass(_N,s)},r.prototype.isSingleCell=function(){var t=this.beans.rangeService;return this.rangeCount===1&&t&&!t.isMoreThanOneCell()},r.prototype.getHasChartRange=function(){var t=this.beans.rangeService;if(!this.rangeCount||!t)return!1;var e=t.getCellRanges();return e.length>0&&e.every(function(o){return To([fr.DIMENSION,fr.VALUE],o.type)})},r.prototype.updateRangeBordersIfRangeCount=function(){this.rangeCount>0&&(this.updateRangeBorders(),this.refreshHandle())},r.prototype.getRangeBorders=function(){var t=this,e=this.beans.gridOptionsService.get("enableRtl"),o=!1,n=!1,i=!1,s=!1,a=this.cellCtrl.getCellPosition().column,l=this.beans,c=l.rangeService,u=l.columnModel,d,p;e?(d=u.getDisplayedColAfter(a),p=u.getDisplayedColBefore(a)):(d=u.getDisplayedColBefore(a),p=u.getDisplayedColAfter(a));var h=c.getCellRanges().filter(function(E){return c.isCellInSpecificRange(t.cellCtrl.getCellPosition(),E)});d||(s=!0),p||(n=!0);for(var f=0;f<h.length&&!(o&&n&&i&&s);f++){var g=h[f],_=c.getRangeStartRow(g),C=c.getRangeEndRow(g);!o&&this.beans.rowPositionUtils.sameRow(_,this.cellCtrl.getCellPosition())&&(o=!0),!i&&this.beans.rowPositionUtils.sameRow(C,this.cellCtrl.getCellPosition())&&(i=!0),!s&&d&&g.columns.indexOf(d)<0&&(s=!0),!n&&p&&g.columns.indexOf(p)<0&&(n=!0)}return{top:o,right:n,bottom:i,left:s}},r.prototype.refreshHandle=function(){if(this.beans.rangeService){var t=this.shouldHaveSelectionHandle();this.selectionHandle&&!t&&(this.selectionHandle=this.beans.context.destroyBean(this.selectionHandle)),t&&this.addSelectionHandle(),this.cellComp.addOrRemoveCssClass(mN,!!this.selectionHandle)}},r.prototype.shouldHaveSelectionHandle=function(){var t=this.beans,e=t.gridOptionsService,o=t.rangeService,n=o.getCellRanges(),i=n.length;if(this.rangeCount<1||i<1)return!1;var s=Ge(n),a=this.cellCtrl.getCellPosition(),l=e.get("enableFillHandle")&&!this.cellCtrl.isSuppressFillHandle(),c=e.get("enableRangeHandle"),u=i===1&&!this.cellCtrl.isEditing()&&(l||c);if(this.hasChartRange){var d=n[0].type===fr.DIMENSION,p=d&&o.isCellInSpecificRange(a,n[0]);this.cellComp.addOrRemoveCssClass(vN,p),u=s.type===fr.VALUE}return u&&s.endRow!=null&&o.isContiguousRange(s)&&o.isBottomRightCell(s,a)},r.prototype.addSelectionHandle=function(){var t=this.beans,e=t.gridOptionsService,o=t.rangeService,n=Ge(o.getCellRanges()).type,i=e.get("enableFillHandle")&&pe(n),s=i?Ll.FILL:Ll.RANGE;this.selectionHandle&&this.selectionHandle.getType()!==s&&(this.selectionHandle=this.beans.context.destroyBean(this.selectionHandle)),this.selectionHandle||(this.selectionHandle=this.beans.selectionHandleFactory.createSelectionHandle(s)),this.selectionHandle.refresh(this.cellCtrl)},r.prototype.destroy=function(){this.beans.context.destroyBean(this.selectionHandle)},r}(),EN=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),RN=function(r){EN(t,r);function t(e,o){var n=r.call(this)||this;return n.cellCtrl=e,n.beans=o,n.column=e.getColumn(),n.rowNode=e.getRowNode(),n.setupColSpan(),n.setupRowSpan(),n}return t.prototype.setupRowSpan=function(){var e=this;this.rowSpan=this.column.getRowSpan(this.rowNode),this.addManagedListener(this.beans.eventService,w.EVENT_NEW_COLUMNS_LOADED,function(){return e.onNewColumnsLoaded()})},t.prototype.setComp=function(e){this.eGui=e,this.onLeftChanged(),this.onWidthChanged(),this.applyRowSpan()},t.prototype.onNewColumnsLoaded=function(){var e=this.column.getRowSpan(this.rowNode);this.rowSpan!==e&&(this.rowSpan=e,this.applyRowSpan(!0))},t.prototype.onDisplayColumnsChanged=function(){var e=this.getColSpanningList();Tn(this.colsSpanning,e)||(this.colsSpanning=e,this.onWidthChanged(),this.onLeftChanged())},t.prototype.setupColSpan=function(){this.column.getColDef().colSpan!=null&&(this.colsSpanning=this.getColSpanningList(),this.addManagedListener(this.beans.eventService,w.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayColumnsChanged.bind(this)),this.addManagedListener(this.beans.eventService,w.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,this.onWidthChanged.bind(this)))},t.prototype.onWidthChanged=function(){if(this.eGui){var e=this.getCellWidth();this.eGui.style.width="".concat(e,"px")}},t.prototype.getCellWidth=function(){return this.colsSpanning?this.colsSpanning.reduce(function(e,o){return e+o.getActualWidth()},0):this.column.getActualWidth()},t.prototype.getColSpanningList=function(){var e=this.column.getColSpan(this.rowNode),o=[];if(e===1)o.push(this.column);else for(var n=this.column,i=this.column.getPinned(),s=0;n&&s<e&&(o.push(n),n=this.beans.columnModel.getDisplayedColAfter(n),!(!n||pe(n)||i!==n.getPinned()));s++);return o},t.prototype.onLeftChanged=function(){if(this.eGui){var e=this.modifyLeftForPrintLayout(this.getCellLeft());this.eGui.style.left=e+"px"}},t.prototype.getCellLeft=function(){var e;return this.beans.gridOptionsService.get("enableRtl")&&this.colsSpanning?e=Ge(this.colsSpanning):e=this.column,e.getLeft()},t.prototype.modifyLeftForPrintLayout=function(e){if(!this.cellCtrl.isPrintLayout()||this.column.getPinned()==="left")return e;var o=this.beans.columnModel.getDisplayedColumnsLeftWidth();if(this.column.getPinned()==="right"){var n=this.beans.columnModel.getBodyContainerWidth();return o+n+(e||0)}return o+(e||0)},t.prototype.applyRowSpan=function(e){if(!(this.rowSpan===1&&!e)){var o=this.beans.gridOptionsService.getRowHeightAsNumber(),n=o*this.rowSpan;this.eGui.style.height="".concat(n,"px"),this.eGui.style.zIndex="1"}},t.prototype.destroy=function(){r.prototype.destroy.call(this)},t}(K),TN=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),bN=function(r){TN(t,r);function t(e,o){var n=r.call(this)||this;return n.staticClasses=[],n.cellCtrl=e,n.beans=o,n.column=e.getColumn(),n.rowNode=e.getRowNode(),n}return t.prototype.setComp=function(e){this.cellComp=e,this.applyUserStyles(),this.applyCellClassRules(),this.applyClassesFromColDef()},t.prototype.applyCellClassRules=function(){var e=this,o=this.column.getColDef(),n=o.cellClassRules,i={value:this.cellCtrl.getValue(),data:this.rowNode.data,node:this.rowNode,colDef:o,column:this.column,rowIndex:this.rowNode.rowIndex,api:this.beans.gridOptionsService.api,columnApi:this.beans.gridOptionsService.columnApi,context:this.beans.gridOptionsService.context};this.beans.stylingService.processClassRules(n===this.cellClassRules?void 0:this.cellClassRules,n,i,function(s){return e.cellComp.addOrRemoveCssClass(s,!0)},function(s){return e.cellComp.addOrRemoveCssClass(s,!1)}),this.cellClassRules=n},t.prototype.applyUserStyles=function(){var e=this.column.getColDef();if(e.cellStyle){var o;if(typeof e.cellStyle=="function"){var n={column:this.column,value:this.cellCtrl.getValue(),colDef:e,data:this.rowNode.data,node:this.rowNode,rowIndex:this.rowNode.rowIndex,api:this.beans.gridOptionsService.api,columnApi:this.beans.gridOptionsService.columnApi,context:this.beans.gridOptionsService.context},i=e.cellStyle;o=i(n)}else o=e.cellStyle;o&&this.cellComp.setUserStyles(o)}},t.prototype.applyClassesFromColDef=function(){var e=this,o=this.column.getColDef(),n={value:this.cellCtrl.getValue(),data:this.rowNode.data,node:this.rowNode,column:this.column,colDef:o,rowIndex:this.rowNode.rowIndex,api:this.beans.gridOptionsService.api,columnApi:this.beans.gridOptionsService.columnApi,context:this.beans.gridOptionsService.context};this.staticClasses.length&&this.staticClasses.forEach(function(i){return e.cellComp.addOrRemoveCssClass(i,!1)}),this.staticClasses=this.beans.stylingService.getStaticCellClasses(o,n),this.staticClasses.length&&this.staticClasses.forEach(function(i){return e.cellComp.addOrRemoveCssClass(i,!0)})},t.prototype.destroy=function(){r.prototype.destroy.call(this)},t}(K),AN=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),wh=function(r){AN(t,r);function t(e,o){var n=r.call(this)||this;return n.ctrl=e,n.beans=o,n}return t.prototype.setComp=function(e){this.eGui=e,this.setupTooltip()},t.prototype.setBrowserTooltip=function(e){var o="title";e!=null&&e!=""?this.eGui.setAttribute(o,e):this.eGui.removeAttribute(o)},t.prototype.setupTooltip=function(){this.browserTooltips=this.beans.gridOptionsService.get("enableBrowserTooltips"),this.updateTooltipText(),this.browserTooltips?this.setBrowserTooltip(this.tooltip):this.createTooltipFeatureIfNeeded()},t.prototype.updateTooltipText=function(){this.tooltip=this.ctrl.getTooltipValue()},t.prototype.createTooltipFeatureIfNeeded=function(){var e=this,o,n,i,s;if(this.genericTooltipFeature==null){var a={getTooltipParams:function(){return e.getTooltipParams()},getGui:function(){return e.ctrl.getGui()}};this.genericTooltipFeature=this.createManagedBean(new hh(a,(n=(o=this.ctrl).getTooltipShowDelayOverride)===null||n===void 0?void 0:n.call(o),(s=(i=this.ctrl).getTooltipHideDelayOverride)===null||s===void 0?void 0:s.call(i)),this.beans.context)}},t.prototype.refreshToolTip=function(){this.updateTooltipText(),this.browserTooltips&&this.setBrowserTooltip(this.tooltip)},t.prototype.getTooltipParams=function(){var e=this,o=this.ctrl,n=o.getColumn?o.getColumn():void 0,i=o.getColDef?o.getColDef():void 0,s=o.getRowNode?o.getRowNode():void 0;return{location:o.getLocation(),colDef:i,column:n,rowIndex:o.getRowIndex?o.getRowIndex():void 0,node:s,data:s?s.data:void 0,value:this.getTooltipText(),valueFormatted:o.getValueFormatted?o.getValueFormatted():void 0,hideTooltipCallback:function(){return e.genericTooltipFeature.hideTooltip(!0)}}},t.prototype.getTooltipText=function(){return this.tooltip},t.prototype.destroy=function(){r.prototype.destroy.call(this)},t}(K),we=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},XC=function(){function r(){}return r.prototype.postConstruct=function(){this.gridOptionsService.isRowModelType("clientSide")&&(this.clientSideRowModel=this.rowModel),this.gridOptionsService.isRowModelType("serverSide")&&(this.serverSideRowModel=this.rowModel)},we([y("resizeObserverService")],r.prototype,"resizeObserverService",void 0),we([y("paginationProxy")],r.prototype,"paginationProxy",void 0),we([y("context")],r.prototype,"context",void 0),we([y("columnApi")],r.prototype,"columnApi",void 0),we([y("gridApi")],r.prototype,"gridApi",void 0),we([y("gridOptionsService")],r.prototype,"gridOptionsService",void 0),we([y("expressionService")],r.prototype,"expressionService",void 0),we([y("environment")],r.prototype,"environment",void 0),we([y("rowRenderer")],r.prototype,"rowRenderer",void 0),we([y("templateService")],r.prototype,"templateService",void 0),we([y("valueService")],r.prototype,"valueService",void 0),we([y("eventService")],r.prototype,"eventService",void 0),we([y("columnModel")],r.prototype,"columnModel",void 0),we([y("headerNavigationService")],r.prototype,"headerNavigationService",void 0),we([y("navigationService")],r.prototype,"navigationService",void 0),we([y("columnAnimationService")],r.prototype,"columnAnimationService",void 0),we([Le("rangeService")],r.prototype,"rangeService",void 0),we([y("focusService")],r.prototype,"focusService",void 0),we([Le("contextMenuFactory")],r.prototype,"contextMenuFactory",void 0),we([y("popupService")],r.prototype,"popupService",void 0),we([y("valueFormatterService")],r.prototype,"valueFormatterService",void 0),we([y("stylingService")],r.prototype,"stylingService",void 0),we([y("columnHoverService")],r.prototype,"columnHoverService",void 0),we([y("userComponentFactory")],r.prototype,"userComponentFactory",void 0),we([y("userComponentRegistry")],r.prototype,"userComponentRegistry",void 0),we([y("animationFrameService")],r.prototype,"animationFrameService",void 0),we([y("dragService")],r.prototype,"dragService",void 0),we([y("dragAndDropService")],r.prototype,"dragAndDropService",void 0),we([y("sortController")],r.prototype,"sortController",void 0),we([y("filterManager")],r.prototype,"filterManager",void 0),we([y("rowContainerHeightService")],r.prototype,"rowContainerHeightService",void 0),we([y("frameworkOverrides")],r.prototype,"frameworkOverrides",void 0),we([y("cellPositionUtils")],r.prototype,"cellPositionUtils",void 0),we([y("rowPositionUtils")],r.prototype,"rowPositionUtils",void 0),we([y("selectionService")],r.prototype,"selectionService",void 0),we([Le("selectionHandleFactory")],r.prototype,"selectionHandleFactory",void 0),we([y("rowCssClassCalculator")],r.prototype,"rowCssClassCalculator",void 0),we([y("rowModel")],r.prototype,"rowModel",void 0),we([y("ctrlsService")],r.prototype,"ctrlsService",void 0),we([y("ctrlsFactory")],r.prototype,"ctrlsFactory",void 0),we([y("agStackComponentsRegistry")],r.prototype,"agStackComponentsRegistry",void 0),we([y("valueCache")],r.prototype,"valueCache",void 0),we([y("rowNodeEventThrottle")],r.prototype,"rowNodeEventThrottle",void 0),we([y("localeService")],r.prototype,"localeService",void 0),we([y("valueParserService")],r.prototype,"valueParserService",void 0),we([y("syncService")],r.prototype,"syncService",void 0),we([Q],r.prototype,"postConstruct",null),r=we([ne("beans")],r),r}(),ON=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),PN=function(r){ON(t,r);function t(e,o,n){var i=r.call(this)||this;return i.cellCtrl=e,i.beans=o,i.column=n,i}return t.prototype.onMouseEvent=function(e,o){if(!Uo(o))switch(e){case"click":this.onCellClicked(o);break;case"mousedown":case"touchstart":this.onMouseDown(o);break;case"dblclick":this.onCellDoubleClicked(o);break;case"mouseout":this.onMouseOut(o);break;case"mouseover":this.onMouseOver(o);break}},t.prototype.onCellClicked=function(e){if(this.isDoubleClickOnIPad()){this.onCellDoubleClicked(e),e.preventDefault();return}var o=this.beans,n=o.eventService,i=o.rangeService,s=o.gridOptionsService,a=e.ctrlKey||e.metaKey;i&&a&&i.getCellRangeCount(this.cellCtrl.getCellPosition())>1&&i.intersectLastRange(!0);var l=this.cellCtrl.createEvent(e,w.EVENT_CELL_CLICKED);n.dispatchEvent(l);var c=this.column.getColDef();c.onCellClicked&&window.setTimeout(function(){return c.onCellClicked(l)},0);var u=(s.get("singleClickEdit")||c.singleClickEdit)&&!s.get("suppressClickEdit");u&&!(e.shiftKey&&(i==null?void 0:i.getCellRanges().length)!=0)&&this.cellCtrl.startRowOrCellEdit()},t.prototype.isDoubleClickOnIPad=function(){if(!ai()||Bp("dblclick"))return!1;var e=new Date().getTime(),o=e-this.lastIPadMouseClickEvent<200;return this.lastIPadMouseClickEvent=e,o},t.prototype.onCellDoubleClicked=function(e){var o=this.column.getColDef(),n=this.cellCtrl.createEvent(e,w.EVENT_CELL_DOUBLE_CLICKED);this.beans.eventService.dispatchEvent(n),typeof o.onCellDoubleClicked=="function"&&window.setTimeout(function(){return o.onCellDoubleClicked(n)},0);var i=!this.beans.gridOptionsService.get("singleClickEdit")&&!this.beans.gridOptionsService.get("suppressClickEdit");i&&this.cellCtrl.startRowOrCellEdit(null,e)},t.prototype.onMouseDown=function(e){var o=e.ctrlKey,n=e.metaKey,i=e.shiftKey,s=e.target,a=this,l=a.cellCtrl,c=a.beans,u=c.eventService,d=c.rangeService,p=c.focusService;if(!this.isRightClickInExistingRange(e)){var h=d&&d.getCellRanges().length!=0;if(!i||!h){var f=Wo()&&!l.isEditing()&&!nh(s);l.focusCell(f)}if(i&&h&&!p.isCellFocused(l.getCellPosition())){e.preventDefault();var g=p.getFocusedCell();if(g){var _=g.column,C=g.rowIndex,E=g.rowPinned,T=c.rowRenderer.getRowByPosition({rowIndex:C,rowPinned:E}),P=T==null?void 0:T.getCellCtrl(_);P!=null&&P.isEditing()&&P.stopEditing(),p.setFocusedCell({column:_,rowIndex:C,rowPinned:E,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0})}}if(!this.containsWidget(s)){if(d){var A=this.cellCtrl.getCellPosition();if(i)d.extendLatestRangeToCell(A);else{var b=o||n;d.setRangeToCell(A,b)}}u.dispatchEvent(this.cellCtrl.createEvent(e,w.EVENT_CELL_MOUSE_DOWN))}}},t.prototype.isRightClickInExistingRange=function(e){var o=this.beans.rangeService;if(o){var n=o.isCellInAnyRange(this.cellCtrl.getCellPosition()),i=e.button===2||e.ctrlKey&&this.beans.gridOptionsService.get("allowContextMenuWithControlKey");if(n&&i)return!0}return!1},t.prototype.containsWidget=function(e){return Ai(e,"ag-selection-checkbox",3)},t.prototype.onMouseOut=function(e){if(!this.mouseStayingInsideCell(e)){var o=this.cellCtrl.createEvent(e,w.EVENT_CELL_MOUSE_OUT);this.beans.eventService.dispatchEvent(o),this.beans.columnHoverService.clearMouseOver()}},t.prototype.onMouseOver=function(e){if(!this.mouseStayingInsideCell(e)){var o=this.cellCtrl.createEvent(e,w.EVENT_CELL_MOUSE_OVER);this.beans.eventService.dispatchEvent(o),this.beans.columnHoverService.setMouseOver([this.column])}},t.prototype.mouseStayingInsideCell=function(e){if(!e.target||!e.relatedTarget)return!1;var o=this.cellCtrl.getGui(),n=o.contains(e.target),i=o.contains(e.relatedTarget);return n&&i},t.prototype.destroy=function(){},t}(XC),IN=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),DN=function(r){IN(t,r);function t(e,o,n,i,s){var a=r.call(this)||this;return a.cellCtrl=e,a.beans=o,a.rowNode=i,a.rowCtrl=s,a}return t.prototype.setComp=function(e){this.eGui=e},t.prototype.onKeyDown=function(e){var o=e.key;switch(o){case N.ENTER:this.onEnterKeyDown(e);break;case N.F2:this.onF2KeyDown(e);break;case N.ESCAPE:this.onEscapeKeyDown(e);break;case N.TAB:this.onTabKeyDown(e);break;case N.BACKSPACE:case N.DELETE:this.onBackspaceOrDeleteKeyDown(o,e);break;case N.DOWN:case N.UP:case N.RIGHT:case N.LEFT:this.onNavigationKeyDown(e,o);break}},t.prototype.onNavigationKeyDown=function(e,o){this.cellCtrl.isEditing()||(e.shiftKey&&this.cellCtrl.isRangeSelectionEnabled()?this.onShiftRangeSelect(e):this.beans.navigationService.navigateToNextCell(e,o,this.cellCtrl.getCellPosition(),!0),e.preventDefault())},t.prototype.onShiftRangeSelect=function(e){if(this.beans.rangeService){var o=this.beans.rangeService.extendLatestRangeInDirection(e);o&&this.beans.navigationService.ensureCellVisible(o)}},t.prototype.onTabKeyDown=function(e){this.beans.navigationService.onTabKeyDown(this.cellCtrl,e)},t.prototype.onBackspaceOrDeleteKeyDown=function(e,o){var n=this,i=n.cellCtrl,s=n.beans,a=n.rowNode,l=s.gridOptionsService,c=s.rangeService,u=s.eventService;i.isEditing()||(u.dispatchEvent({type:w.EVENT_KEY_SHORTCUT_CHANGED_CELL_START}),SC(e,l.get("enableCellEditingOnBackspace"))?c&&l.get("enableRangeSelection")?c.clearCellRangeCellValues({dispatchWrapperEvents:!0,wrapperEventSource:"deleteKey"}):i.isCellEditable()&&a.setDataValue(i.getColumn(),null,"cellClear"):i.startRowOrCellEdit(e,o),u.dispatchEvent({type:w.EVENT_KEY_SHORTCUT_CHANGED_CELL_END}))},t.prototype.onEnterKeyDown=function(e){if(this.cellCtrl.isEditing()||this.rowCtrl.isEditing())this.cellCtrl.stopEditingAndFocus(!1,e.shiftKey);else if(this.beans.gridOptionsService.get("enterNavigatesVertically")){var o=e.shiftKey?N.UP:N.DOWN;this.beans.navigationService.navigateToNextCell(null,o,this.cellCtrl.getCellPosition(),!1)}else this.cellCtrl.startRowOrCellEdit(N.ENTER,e),this.cellCtrl.isEditing()&&e.preventDefault()},t.prototype.onF2KeyDown=function(e){this.cellCtrl.isEditing()||this.cellCtrl.startRowOrCellEdit(N.F2,e)},t.prototype.onEscapeKeyDown=function(e){this.cellCtrl.isEditing()&&(this.cellCtrl.stopRowOrCellEdit(!0),this.cellCtrl.focusCell(!0))},t.prototype.processCharacter=function(e){var o=e.target,n=o!==this.eGui;if(!(n||this.cellCtrl.isEditing())){var i=e.key;i===" "?this.onSpaceKeyDown(e):(this.cellCtrl.startRowOrCellEdit(i,e),e.preventDefault())}},t.prototype.onSpaceKeyDown=function(e){var o=this.beans.gridOptionsService;if(!this.cellCtrl.isEditing()&&o.isRowSelection()){var n=this.rowNode.isSelected(),i=!n;if(i||!o.get("suppressRowDeselection")){var s=this.beans.gridOptionsService.get("groupSelectsFiltered"),a=this.rowNode.setSelectedParams({newValue:i,rangeSelect:e.shiftKey,groupSelectsFiltered:s,event:e,source:"spaceKey"});n===void 0&&a===0&&this.rowNode.setSelectedParams({newValue:!1,rangeSelect:e.shiftKey,groupSelectsFiltered:s,event:e,source:"spaceKey"})}}e.preventDefault()},t.prototype.destroy=function(){r.prototype.destroy.call(this)},t}(K),MN=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),LN=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},xN=function(r){MN(t,r);function t(e,o,n){var i=r.call(this,'<div class="ag-drag-handle ag-row-drag" draggable="true"></div>')||this;return i.rowNode=e,i.column=o,i.eCell=n,i}return t.prototype.postConstruct=function(){var e=this.getGui();e.appendChild(at("rowDrag",this.gridOptionsService,null)),this.addGuiEventListener("mousedown",function(o){o.stopPropagation()}),this.addDragSource(),this.checkVisibility()},t.prototype.addDragSource=function(){this.addGuiEventListener("dragstart",this.onDragStart.bind(this))},t.prototype.onDragStart=function(e){var o=this,n=this.column.getColDef().dndSourceOnRowDrag;e.dataTransfer.setDragImage(this.eCell,0,0);var i=function(){try{var a=JSON.stringify(o.rowNode.data);e.dataTransfer.setData("application/json",a),e.dataTransfer.setData("text/plain",a)}catch{}};if(n){var s={rowNode:this.rowNode,dragEvent:e,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context};n(s)}else i()},t.prototype.checkVisibility=function(){var e=this.column.isDndSource(this.rowNode);this.setDisplayed(e)},LN([Q],t.prototype,"postConstruct",null),t}(Re),FN=function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var o=e.call(r),n,i=[],s;try{for(;(t===void 0||t-- >0)&&!(n=o.next()).done;)i.push(n.value)}catch(a){s={error:a}}finally{try{n&&!n.done&&(e=o.return)&&e.call(o)}finally{if(s)throw s.error}}return i},NN=function(r,t,e){if(e||arguments.length===2)for(var o=0,n=t.length,i;o<n;o++)(i||!(o in t))&&(i||(i=Array.prototype.slice.call(t,0,o)),i[o]=t[o]);return r.concat(i||Array.prototype.slice.call(t))},GN="ag-column-first",kN="ag-column-last",wc=function(){function r(){}return r.getHeaderClassesFromColDef=function(t,e,o,n){return pe(t)?[]:this.getColumnClassesFromCollDef(t.headerClass,t,e,o,n)},r.getToolPanelClassesFromColDef=function(t,e,o,n){return pe(t)?[]:this.getColumnClassesFromCollDef(t.toolPanelClass,t,e,o,n)},r.refreshFirstAndLastStyles=function(t,e,o){t.addOrRemoveCssClass(GN,o.isColumnAtEdge(e,"first")),t.addOrRemoveCssClass(kN,o.isColumnAtEdge(e,"last"))},r.getClassParams=function(t,e,o,n){return{colDef:t,column:o,columnGroup:n,api:e.api,columnApi:e.columnApi,context:e.context}},r.getColumnClassesFromCollDef=function(t,e,o,n,i){if(pe(t))return[];var s;if(typeof t=="function"){var a=this.getClassParams(e,o,n,i);s=t(a)}else s=t;return typeof s=="string"?[s]:Array.isArray(s)?NN([],FN(s),!1):[]},r}(),HN=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),xl=function(){return xl=Object.assign||function(r){for(var t,e=1,o=arguments.length;e<o;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},xl.apply(this,arguments)},VN="ag-cell",BN="ag-cell-auto-height",UN="ag-cell-normal-height",jN="ag-cell-focus",WN="ag-cell-first-right-pinned",zN="ag-cell-last-left-pinned",$N="ag-cell-not-inline-editing",KN="ag-column-hover",YN="ag-cell-wrap-text",qN=0,Pi=function(r){HN(t,r);function t(e,o,n,i){var s=r.call(this)||this;s.cellRangeFeature=null,s.cellPositionFeature=null,s.cellCustomStyleFeature=null,s.tooltipFeature=null,s.cellMouseListenerFeature=null,s.cellKeyboardListenerFeature=null,s.suppressRefreshCell=!1,s.onCellCompAttachedFuncs=[],s.column=e,s.rowNode=o,s.beans=n,s.rowCtrl=i,s.instanceId=e.getId()+"-"+qN++;var a=s.column.getColDef();return s.colIdSanitised=ht(s.column.getId()),s.beans.gridOptionsService.get("suppressCellFocus")||(s.tabIndex=-1),s.isCellRenderer=a.cellRenderer!=null||a.cellRendererSelector!=null,s.createCellPosition(),s.addFeatures(),s.updateAndFormatValue(!1),s}return t.prototype.shouldRestoreFocus=function(){return this.beans.focusService.shouldRestoreFocus(this.cellPosition)},t.prototype.addFeatures=function(){var e=this;this.cellPositionFeature=new RN(this,this.beans),this.addDestroyFunc(function(){var n;(n=e.cellPositionFeature)===null||n===void 0||n.destroy(),e.cellPositionFeature=null}),this.cellCustomStyleFeature=new bN(this,this.beans),this.addDestroyFunc(function(){var n;(n=e.cellCustomStyleFeature)===null||n===void 0||n.destroy(),e.cellCustomStyleFeature=null}),this.cellMouseListenerFeature=new PN(this,this.beans,this.column),this.addDestroyFunc(function(){var n;(n=e.cellMouseListenerFeature)===null||n===void 0||n.destroy(),e.cellMouseListenerFeature=null}),this.cellKeyboardListenerFeature=new DN(this,this.beans,this.column,this.rowNode,this.rowCtrl),this.addDestroyFunc(function(){var n;(n=e.cellKeyboardListenerFeature)===null||n===void 0||n.destroy(),e.cellKeyboardListenerFeature=null}),this.column.isTooltipEnabled()&&(this.enableTooltipFeature(),this.addDestroyFunc(function(){e.disableTooltipFeature()}));var o=this.beans.rangeService&&this.beans.gridOptionsService.get("enableRangeSelection");o&&(this.cellRangeFeature=new SN(this.beans,this),this.addDestroyFunc(function(){var n;(n=e.cellRangeFeature)===null||n===void 0||n.destroy(),e.cellRangeFeature=null}))},t.prototype.enableTooltipFeature=function(){var e=this,o=function(){var i=e.column.getColDef(),s=e.rowNode.data;if(i.tooltipField&&W(s))return yr(s,i.tooltipField,e.column.isTooltipFieldContainsDots());var a=i.tooltipValueGetter;return a?a({location:"cell",api:e.beans.gridOptionsService.api,columnApi:e.beans.gridOptionsService.columnApi,context:e.beans.gridOptionsService.context,colDef:e.column.getColDef(),column:e.column,rowIndex:e.cellPosition.rowIndex,node:e.rowNode,data:e.rowNode.data,value:e.value,valueFormatted:e.valueFormatted}):null},n={getColumn:function(){return e.column},getColDef:function(){return e.column.getColDef()},getRowIndex:function(){return e.cellPosition.rowIndex},getRowNode:function(){return e.rowNode},getGui:function(){return e.getGui()},getLocation:function(){return"cell"},getTooltipValue:o,getValueFormatted:function(){return e.valueFormatted}};this.tooltipFeature=new wh(n,this.beans)},t.prototype.disableTooltipFeature=function(){this.tooltipFeature&&(this.tooltipFeature.destroy(),this.tooltipFeature=null)},t.prototype.setComp=function(e,o,n,i,s){var a,l,c,u;this.cellComp=e,this.eGui=o,this.printLayout=i,this.addDomData(),this.onCellFocused(this.focusEventToRestore),this.applyStaticCssClasses(),this.setWrapText(),this.onFirstRightPinnedChanged(),this.onLastLeftPinnedChanged(),this.onColumnHover(),this.setupControlComps(),this.setupAutoHeight(n),this.refreshFirstAndLastStyles(),this.refreshAriaColIndex(),(a=this.cellPositionFeature)===null||a===void 0||a.setComp(o),(l=this.cellCustomStyleFeature)===null||l===void 0||l.setComp(e),(c=this.tooltipFeature)===null||c===void 0||c.setComp(o),(u=this.cellKeyboardListenerFeature)===null||u===void 0||u.setComp(this.eGui),this.cellRangeFeature&&this.cellRangeFeature.setComp(e,o),s&&this.isCellEditable()?this.startEditing():this.showValue(),this.onCellCompAttachedFuncs.length&&(this.onCellCompAttachedFuncs.forEach(function(d){return d()}),this.onCellCompAttachedFuncs=[])},t.prototype.setupAutoHeight=function(e){var o=this;if(this.isAutoHeight=this.column.isAutoHeight(),!(!this.isAutoHeight||!e)){var n=e.parentElement,i=this.beans.gridOptionsService.getRowHeightForNode(this.rowNode).height,s=function(c){if(!o.editing&&o.isAlive()){var u=li(n),d=u.paddingTop,p=u.paddingBottom,h=u.borderBottomWidth,f=u.borderTopWidth,g=d+p+h+f,_=e.offsetHeight,C=_+g;if(c<5){var E=o.beans.gridOptionsService.getDocument(),T=!E||!E.contains(e),P=C==0;if(T||P){o.beans.frameworkOverrides.setTimeout(function(){return s(c+1)},0);return}}var A=Math.max(C,i);o.rowNode.setRowAutoHeight(A,o.column)}},a=function(){return s(0)};a();var l=this.beans.resizeObserverService.observeResize(e,a);this.addDestroyFunc(function(){l(),o.rowNode.setRowAutoHeight(void 0,o.column)})}},t.prototype.getCellAriaRole=function(){var e;return(e=this.column.getColDef().cellAriaRole)!==null&&e!==void 0?e:"gridcell"},t.prototype.getInstanceId=function(){return this.instanceId},t.prototype.getIncludeSelection=function(){return this.includeSelection},t.prototype.getIncludeRowDrag=function(){return this.includeRowDrag},t.prototype.getIncludeDndSource=function(){return this.includeDndSource},t.prototype.getColumnIdSanitised=function(){return this.colIdSanitised},t.prototype.getTabIndex=function(){return this.tabIndex},t.prototype.getIsCellRenderer=function(){return this.isCellRenderer},t.prototype.getValueToDisplay=function(){return this.valueFormatted!=null?this.valueFormatted:this.value},t.prototype.showValue=function(e){e===void 0&&(e=!1);var o=this.getValueToDisplay(),n;if(this.isCellRenderer){var i=this.createCellRendererParams();n=this.beans.userComponentFactory.getCellRendererDetails(this.column.getColDef(),i)}this.cellComp.setRenderDetails(n,o,e),this.refreshHandle()},t.prototype.setupControlComps=function(){var e=this.column.getColDef();this.includeSelection=this.isIncludeControl(e.checkboxSelection),this.includeRowDrag=this.isIncludeControl(e.rowDrag),this.includeDndSource=this.isIncludeControl(e.dndSource),this.cellComp.setIncludeSelection(this.includeSelection),this.cellComp.setIncludeDndSource(this.includeDndSource),this.cellComp.setIncludeRowDrag(this.includeRowDrag)},t.prototype.isForceWrapper=function(){var e=this.beans.gridOptionsService.get("enableCellTextSelection")||this.column.isAutoHeight();return e},t.prototype.isIncludeControl=function(e){var o=this.rowNode.rowPinned!=null,n=typeof e=="function",i=o?!1:n||e===!0;return i},t.prototype.refreshShouldDestroy=function(){var e=this.column.getColDef(),o=this.includeSelection!=this.isIncludeControl(e.checkboxSelection),n=this.includeRowDrag!=this.isIncludeControl(e.rowDrag),i=this.includeDndSource!=this.isIncludeControl(e.dndSource);return o||n||i},t.prototype.startEditing=function(e,o,n){var i=this;if(e===void 0&&(e=null),o===void 0&&(o=!1),n===void 0&&(n=null),!(!this.isCellEditable()||this.editing)){if(!this.cellComp){this.onCellCompAttachedFuncs.push(function(){i.startEditing(e,o,n)});return}var s=this.createCellEditorParams(e,o),a=this.column.getColDef(),l=this.beans.userComponentFactory.getCellEditorDetails(a,s),c=(l==null?void 0:l.popupFromSelector)!=null?l.popupFromSelector:!!a.cellEditorPopup,u=(l==null?void 0:l.popupPositionFromSelector)!=null?l.popupPositionFromSelector:a.cellEditorPopupPosition;this.setEditing(!0),this.cellComp.setEditDetails(l,c,u);var d=this.createEvent(n,w.EVENT_CELL_EDITING_STARTED);this.beans.eventService.dispatchEvent(d)}},t.prototype.setEditing=function(e){this.editing!==e&&(this.editing=e,this.refreshHandle())},t.prototype.stopRowOrCellEdit=function(e){e===void 0&&(e=!1),this.beans.gridOptionsService.get("editType")==="fullRow"?this.rowCtrl.stopRowEditing(e):this.stopEditing(e)},t.prototype.onPopupEditorClosed=function(){this.isEditing()&&this.stopEditingAndFocus()},t.prototype.takeValueFromCellEditor=function(e){var o={newValueExists:!1};if(e)return o;var n=this.cellComp.getCellEditor();if(!n)return o;var i=n.isCancelAfterEnd&&n.isCancelAfterEnd();if(i)return o;var s=n.getValue();return{newValue:s,newValueExists:!0}},t.prototype.saveNewValue=function(e,o){if(o===e)return!1;this.suppressRefreshCell=!0;var n=this.rowNode.setDataValue(this.column,o,"edit");return this.suppressRefreshCell=!1,n},t.prototype.stopEditing=function(e){if(e===void 0&&(e=!1),!this.editing)return!1;var o=this.takeValueFromCellEditor(e),n=o.newValue,i=o.newValueExists,s=this.rowNode.getValueFromValueService(this.column),a=!1;return i&&(a=this.saveNewValue(s,n)),this.setEditing(!1),this.cellComp.setEditDetails(),this.updateAndFormatValue(!1),this.refreshCell({forceRefresh:!0,suppressFlash:!0}),this.dispatchEditingStoppedEvent(s,n,!e&&!!a),a},t.prototype.dispatchEditingStoppedEvent=function(e,o,n){var i=xl(xl({},this.createEvent(null,w.EVENT_CELL_EDITING_STOPPED)),{oldValue:e,newValue:o,valueChanged:n});this.beans.eventService.dispatchEvent(i)},t.prototype.createCellEditorParams=function(e,o){return{value:this.rowNode.getValueFromValueService(this.column),eventKey:e,column:this.column,colDef:this.column.getColDef(),rowIndex:this.getCellPosition().rowIndex,node:this.rowNode,data:this.rowNode.data,api:this.beans.gridOptionsService.api,cellStartedEdit:o,columnApi:this.beans.gridOptionsService.columnApi,context:this.beans.gridOptionsService.context,onKeyDown:this.onKeyDown.bind(this),stopEditing:this.stopEditingAndFocus.bind(this),eGridCell:this.getGui(),parseValue:this.parseValue.bind(this),formatValue:this.formatValue.bind(this)}},t.prototype.createCellRendererParams=function(){var e=this,o={value:this.value,valueFormatted:this.valueFormatted,getValue:function(){return e.rowNode.getValueFromValueService(e.column)},setValue:function(n){return e.beans.valueService.setValue(e.rowNode,e.column,n)},formatValue:this.formatValue.bind(this),data:this.rowNode.data,node:this.rowNode,pinned:this.column.getPinned(),colDef:this.column.getColDef(),column:this.column,rowIndex:this.getCellPosition().rowIndex,api:this.beans.gridOptionsService.api,columnApi:this.beans.gridOptionsService.columnApi,context:this.beans.gridOptionsService.context,refreshCell:this.refreshCell.bind(this),eGridCell:this.getGui(),eParentOfValue:this.cellComp.getParentOfValue(),registerRowDragger:function(n,i,s,a){return e.registerRowDragger(n,i,a)}};return o},t.prototype.parseValue=function(e){return this.beans.valueParserService.parseValue(this.column,this.rowNode,e,this.getValue())},t.prototype.setFocusOutOnEditor=function(){if(this.editing){var e=this.cellComp.getCellEditor();e&&e.focusOut&&e.focusOut()}},t.prototype.setFocusInOnEditor=function(){if(this.editing){var e=this.cellComp.getCellEditor();e&&e.focusIn?e.focusIn():this.focusCell(!0)}},t.prototype.onCellChanged=function(e){var o=e.column===this.column;o&&this.refreshCell({})},t.prototype.refreshOrDestroyCell=function(e){var o;this.refreshShouldDestroy()?(o=this.rowCtrl)===null||o===void 0||o.refreshCell(this):this.refreshCell(e)},t.prototype.refreshCell=function(e){var o,n,i;if(!(this.suppressRefreshCell||this.editing)){var s=this.column.getColDef(),a=e!=null&&!!e.newData,l=e!=null&&!!e.suppressFlash||!!s.suppressCellFlash,c=s.field==null&&s.valueGetter==null&&s.showRowGroup==null,u=e&&e.forceRefresh||c||a,d=!!this.cellComp,p=this.updateAndFormatValue(d),h=u||p;if(d){if(h){this.showValue(a);var f=this.beans.filterManager.isSuppressFlashingCellsBecauseFiltering(),g=!l&&!f&&(this.beans.gridOptionsService.get("enableCellChangeFlash")||s.enableCellChangeFlash);g&&this.flashCell(),(o=this.cellCustomStyleFeature)===null||o===void 0||o.applyUserStyles(),(n=this.cellCustomStyleFeature)===null||n===void 0||n.applyClassesFromColDef()}this.refreshToolTip(),(i=this.cellCustomStyleFeature)===null||i===void 0||i.applyCellClassRules()}}},t.prototype.stopEditingAndFocus=function(e,o){e===void 0&&(e=!1),o===void 0&&(o=!1),this.stopRowOrCellEdit(),this.focusCell(!0),e||this.navigateAfterEdit(o)},t.prototype.navigateAfterEdit=function(e){var o=this.beans.gridOptionsService.get("enterNavigatesVerticallyAfterEdit");if(o){var n=e?N.UP:N.DOWN;this.beans.navigationService.navigateToNextCell(null,n,this.getCellPosition(),!1)}},t.prototype.flashCell=function(e){var o=e&&e.flashDelay,n=e&&e.fadeDelay;this.animateCell("data-changed",o,n)},t.prototype.animateCell=function(e,o,n){var i=this;if(this.cellComp){var s="ag-cell-".concat(e),a="ag-cell-".concat(e,"-animation"),l=this.beans.gridOptionsService;o||(o=l.get("cellFlashDelay")),W(n)||(n=l.get("cellFadeDelay")),this.cellComp.addOrRemoveCssClass(s,!0),this.cellComp.addOrRemoveCssClass(a,!1),window.setTimeout(function(){i.isAlive()&&(i.cellComp.addOrRemoveCssClass(s,!1),i.cellComp.addOrRemoveCssClass(a,!0),i.eGui.style.transition="background-color ".concat(n,"ms"),window.setTimeout(function(){i.isAlive()&&(i.cellComp.addOrRemoveCssClass(a,!1),i.eGui.style.transition="")},n))},o)}},t.prototype.onFlashCells=function(e){if(this.cellComp){var o=this.beans.cellPositionUtils.createId(this.getCellPosition()),n=e.cells[o];n&&this.animateCell("highlight")}},t.prototype.isCellEditable=function(){return this.column.isCellEditable(this.rowNode)},t.prototype.isSuppressFillHandle=function(){return this.column.isSuppressFillHandle()},t.prototype.formatValue=function(e){var o;return(o=this.callValueFormatter(e))!==null&&o!==void 0?o:e},t.prototype.callValueFormatter=function(e){return this.beans.valueFormatterService.formatValue(this.column,this.rowNode,e)},t.prototype.updateAndFormatValue=function(e){var o=this.value,n=this.valueFormatted;return this.value=this.rowNode.getValueFromValueService(this.column),this.valueFormatted=this.callValueFormatter(this.value),e?!this.valuesAreEqual(o,this.value)||this.valueFormatted!=n:!0},t.prototype.valuesAreEqual=function(e,o){var n=this.column.getColDef();return n.equals?n.equals(e,o):e===o},t.prototype.getComp=function(){return this.cellComp},t.prototype.getValue=function(){return this.value},t.prototype.getValueFormatted=function(){return this.valueFormatted},t.prototype.addDomData=function(){var e=this,o=this.getGui();this.beans.gridOptionsService.setDomData(o,t.DOM_DATA_KEY_CELL_CTRL,this),this.addDestroyFunc(function(){return e.beans.gridOptionsService.setDomData(o,t.DOM_DATA_KEY_CELL_CTRL,null)})},t.prototype.createEvent=function(e,o){var n={type:o,node:this.rowNode,data:this.rowNode.data,value:this.value,column:this.column,colDef:this.column.getColDef(),context:this.beans.gridOptionsService.context,api:this.beans.gridApi,columnApi:this.beans.columnApi,rowPinned:this.rowNode.rowPinned,event:e,rowIndex:this.rowNode.rowIndex};return n},t.prototype.processCharacter=function(e){var o;(o=this.cellKeyboardListenerFeature)===null||o===void 0||o.processCharacter(e)},t.prototype.onKeyDown=function(e){var o;(o=this.cellKeyboardListenerFeature)===null||o===void 0||o.onKeyDown(e)},t.prototype.onMouseEvent=function(e,o){var n;(n=this.cellMouseListenerFeature)===null||n===void 0||n.onMouseEvent(e,o)},t.prototype.getGui=function(){return this.eGui},t.prototype.refreshToolTip=function(){var e;(e=this.tooltipFeature)===null||e===void 0||e.refreshToolTip()},t.prototype.getColSpanningList=function(){return this.cellPositionFeature.getColSpanningList()},t.prototype.onLeftChanged=function(){var e;this.cellComp&&((e=this.cellPositionFeature)===null||e===void 0||e.onLeftChanged())},t.prototype.onDisplayedColumnsChanged=function(){this.eGui&&(this.refreshAriaColIndex(),this.refreshFirstAndLastStyles())},t.prototype.refreshFirstAndLastStyles=function(){var e=this,o=e.cellComp,n=e.column,i=e.beans;wc.refreshFirstAndLastStyles(o,n,i.columnModel)},t.prototype.refreshAriaColIndex=function(){var e=this.beans.columnModel.getAriaColumnIndex(this.column);qp(this.getGui(),e)},t.prototype.isSuppressNavigable=function(){return this.column.isSuppressNavigable(this.rowNode)},t.prototype.onWidthChanged=function(){var e;return(e=this.cellPositionFeature)===null||e===void 0?void 0:e.onWidthChanged()},t.prototype.getColumn=function(){return this.column},t.prototype.getRowNode=function(){return this.rowNode},t.prototype.getBeans=function(){return this.beans},t.prototype.isPrintLayout=function(){return this.printLayout},t.prototype.appendChild=function(e){this.eGui.appendChild(e)},t.prototype.refreshHandle=function(){this.cellRangeFeature&&this.cellRangeFeature.refreshHandle()},t.prototype.getCellPosition=function(){return this.cellPosition},t.prototype.isEditing=function(){return this.editing},t.prototype.startRowOrCellEdit=function(e,o){o===void 0&&(o=null),this.cellComp&&(this.beans.gridOptionsService.get("editType")==="fullRow"?this.rowCtrl.startRowEditing(e,this):this.startEditing(e,!0,o))},t.prototype.getRowCtrl=function(){return this.rowCtrl},t.prototype.getRowPosition=function(){return{rowIndex:this.cellPosition.rowIndex,rowPinned:this.cellPosition.rowPinned}},t.prototype.updateRangeBordersIfRangeCount=function(){this.cellComp&&this.cellRangeFeature&&this.cellRangeFeature.updateRangeBordersIfRangeCount()},t.prototype.onRangeSelectionChanged=function(){this.cellComp&&this.cellRangeFeature&&this.cellRangeFeature.onRangeSelectionChanged()},t.prototype.isRangeSelectionEnabled=function(){return this.cellRangeFeature!=null},t.prototype.focusCell=function(e){e===void 0&&(e=!1),this.beans.focusService.setFocusedCell({rowIndex:this.getCellPosition().rowIndex,column:this.column,rowPinned:this.rowNode.rowPinned,forceBrowserFocus:e})},t.prototype.onRowIndexChanged=function(){this.createCellPosition(),this.onCellFocused(),this.cellRangeFeature&&this.cellRangeFeature.onRangeSelectionChanged()},t.prototype.onFirstRightPinnedChanged=function(){if(this.cellComp){var e=this.column.isFirstRightPinned();this.cellComp.addOrRemoveCssClass(WN,e)}},t.prototype.onLastLeftPinnedChanged=function(){if(this.cellComp){var e=this.column.isLastLeftPinned();this.cellComp.addOrRemoveCssClass(zN,e)}},t.prototype.onCellFocused=function(e){if(!this.beans.gridOptionsService.get("suppressCellFocus")){var o=this.beans.focusService.isCellFocused(this.cellPosition);if(!this.cellComp){o&&(e!=null&&e.forceBrowserFocus)&&(this.focusEventToRestore=e);return}if(this.focusEventToRestore=void 0,this.cellComp.addOrRemoveCssClass(jN,o),o&&e&&e.forceBrowserFocus){var n=this.cellComp.getFocusableElement();n.focus({preventScroll:!!e.preventScrollOnBrowserFocus})}var i=this.beans.gridOptionsService.get("editType")==="fullRow";!o&&!i&&this.editing&&this.stopRowOrCellEdit()}},t.prototype.createCellPosition=function(){this.cellPosition={rowIndex:this.rowNode.rowIndex,rowPinned:un(this.rowNode.rowPinned),column:this.column}},t.prototype.applyStaticCssClasses=function(){this.cellComp.addOrRemoveCssClass(VN,!0),this.cellComp.addOrRemoveCssClass($N,!0);var e=this.column.isAutoHeight()==!0;this.cellComp.addOrRemoveCssClass(BN,e),this.cellComp.addOrRemoveCssClass(UN,!e)},t.prototype.onColumnHover=function(){if(this.cellComp&&this.beans.gridOptionsService.get("columnHoverHighlight")){var e=this.beans.columnHoverService.isHovered(this.column);this.cellComp.addOrRemoveCssClass(KN,e)}},t.prototype.onColDefChanged=function(){var e,o;if(this.cellComp){var n=this.column.isAutoHeight();n!==this.isAutoHeight&&((e=this.rowCtrl)===null||e===void 0||e.refreshCell(this));var i=this.column.isTooltipEnabled();i?(this.disableTooltipFeature(),this.enableTooltipFeature(),(o=this.tooltipFeature)===null||o===void 0||o.setComp(this.eGui)):this.disableTooltipFeature(),this.setWrapText(),this.editing||this.refreshOrDestroyCell({forceRefresh:!0,suppressFlash:!0})}},t.prototype.setWrapText=function(){var e=this.column.getColDef().wrapText==!0;this.cellComp.addOrRemoveCssClass(YN,e)},t.prototype.dispatchCellContextMenuEvent=function(e){var o=this.column.getColDef(),n=this.createEvent(e,w.EVENT_CELL_CONTEXT_MENU);this.beans.eventService.dispatchEvent(n),o.onCellContextMenu&&window.setTimeout(function(){return o.onCellContextMenu(n)},0)},t.prototype.getCellRenderer=function(){return this.cellComp?this.cellComp.getCellRenderer():null},t.prototype.getCellEditor=function(){return this.cellComp?this.cellComp.getCellEditor():null},t.prototype.destroy=function(){this.onCellCompAttachedFuncs=[],r.prototype.destroy.call(this)},t.prototype.createSelectionCheckbox=function(){var e=new zC;return this.beans.context.createBean(e),e.init({rowNode:this.rowNode,column:this.column}),e},t.prototype.createDndSource=function(){var e=new xN(this.rowNode,this.column,this.eGui);return this.beans.context.createBean(e),e},t.prototype.registerRowDragger=function(e,o,n){var i=this;if(this.customRowDragComp){this.customRowDragComp.setDragElement(e,o);return}var s=this.createRowDragComp(e,o,n);s&&(this.customRowDragComp=s,this.addDestroyFunc(function(){i.beans.context.destroyBean(s),i.customRowDragComp=null}))},t.prototype.createRowDragComp=function(e,o,n){var i=this,s=this.beans.gridOptionsService.get("pagination"),a=this.beans.gridOptionsService.get("rowDragManaged"),l=this.beans.gridOptionsService.isRowModelType("clientSide");if(a){if(!l){Ee("managed row dragging is only allowed in the Client Side Row Model");return}if(s){Ee("managed row dragging is not possible when doing pagination");return}}var c=new Pl(function(){return i.value},this.rowNode,this.column,e,o,n);return this.beans.context.createBean(c),c},t.DOM_DATA_KEY_CELL_CTRL="cellCtrl",t}(K),QN=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),XN=function(r){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&r[t],o=0;if(e)return e.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&o>=r.length&&(r=void 0),{value:r&&r[o++],done:!r}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},du=function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var o=e.call(r),n,i=[],s;try{for(;(t===void 0||t-- >0)&&!(n=o.next()).done;)i.push(n.value)}catch(a){s={error:a}}finally{try{n&&!n.done&&(e=o.return)&&e.call(o)}finally{if(s)throw s.error}}return i},pu=function(r,t,e){if(e||arguments.length===2)for(var o=0,n=t.length,i;o<n;o++)(i||!(o in t))&&(i||(i=Array.prototype.slice.call(t,0,o)),i[o]=t[o]);return r.concat(i||Array.prototype.slice.call(t))},Xt;(function(r){r.Normal="Normal",r.FullWidth="FullWidth",r.FullWidthLoading="FullWidthLoading",r.FullWidthGroup="FullWidthGroup",r.FullWidthDetail="FullWidthDetail"})(Xt||(Xt={}));var ZN=0,Ii=function(r){QN(t,r);function t(e,o,n,i,s){var a=r.call(this)||this;return a.allRowGuis=[],a.active=!0,a.centerCellCtrls={list:[],map:{}},a.leftCellCtrls={list:[],map:{}},a.rightCellCtrls={list:[],map:{}},a.slideInAnimation={left:!1,center:!1,right:!1,fullWidth:!1},a.fadeInAnimation={left:!1,center:!1,right:!1,fullWidth:!1},a.rowDragComps=[],a.lastMouseDownOnDragger=!1,a.emptyStyle={},a.updateColumnListsPending=!1,a.rowId=null,a.businessKeySanitised=null,a.beans=o,a.gridOptionsService=o.gridOptionsService,a.rowNode=e,a.paginationPage=o.paginationProxy.getCurrentPage(),a.useAnimationFrameForCreate=i,a.printLayout=s,a.instanceId=e.id+"-"+ZN++,a.rowId=ht(e.id),a.initRowBusinessKey(),a.rowFocused=o.focusService.isRowFocused(a.rowNode.rowIndex,a.rowNode.rowPinned),a.rowLevel=o.rowCssClassCalculator.calculateRowLevel(a.rowNode),a.setRowType(),a.setAnimateFlags(n),a.rowStyles=a.processStylesFromGridOptions(),a.isFullWidth()&&!a.gridOptionsService.get("suppressCellFocus")&&(a.tabIndex=-1),a.addListeners(),a}return t.prototype.initRowBusinessKey=function(){this.businessKeyForNodeFunc=this.gridOptionsService.get("getBusinessKeyForNode"),this.updateRowBusinessKey()},t.prototype.updateRowBusinessKey=function(){if(typeof this.businessKeyForNodeFunc=="function"){var e=this.businessKeyForNodeFunc(this.rowNode);this.businessKeySanitised=ht(e)}},t.prototype.getRowId=function(){return this.rowId},t.prototype.getRowStyles=function(){return this.rowStyles},t.prototype.getTabIndex=function(){return this.tabIndex},t.prototype.isSticky=function(){return this.rowNode.sticky},t.prototype.getBeans=function(){return this.beans},t.prototype.getInstanceId=function(){return this.instanceId},t.prototype.setComp=function(e,o,n){var i={rowComp:e,element:o,containerType:n};this.allRowGuis.push(i),n===ft.LEFT?this.leftGui=i:n===ft.RIGHT?this.rightGui=i:n===ft.FULL_WIDTH?this.fullWidthGui=i:this.centerGui=i,this.initialiseRowComp(i),this.rowType!=="FullWidthLoading"&&!this.rowNode.rowPinned&&this.beans.rowRenderer.dispatchFirstDataRenderedEvent()},t.prototype.unsetComp=function(e){switch(this.allRowGuis=this.allRowGuis.filter(function(o){return o.containerType!==e}),e){case ft.LEFT:this.leftGui=void 0;break;case ft.RIGHT:this.rightGui=void 0;break;case ft.FULL_WIDTH:this.fullWidthGui=void 0;break;case ft.CENTER:this.centerGui=void 0;break}},t.prototype.isCacheable=function(){return this.rowType===Xt.FullWidthDetail&&this.gridOptionsService.get("keepDetailRows")},t.prototype.setCached=function(e){var o=e?"none":"";this.allRowGuis.forEach(function(n){return n.element.style.display=o})},t.prototype.initialiseRowComp=function(e){var o=this,n=this.gridOptionsService;this.listenOnDomOrder(e),this.beans.columnModel.wasAutoRowHeightEverActive()&&this.rowNode.checkAutoHeights(),this.onRowHeightChanged(e),this.updateRowIndexes(e),this.setFocusedClasses(e),this.setStylesFromGridOptions(!1,e),n.isRowSelection()&&this.rowNode.selectable&&this.onRowSelected(e),this.updateColumnLists(!this.useAnimationFrameForCreate);var i=e.rowComp,s=this.getInitialRowClasses(e.containerType);s.forEach(function(a){return i.addOrRemoveCssClass(a,!0)}),this.executeSlideAndFadeAnimations(e),this.rowNode.group&&ko(e.element,this.rowNode.expanded==!0),this.setRowCompRowId(i),this.setRowCompRowBusinessKey(i),n.setDomData(e.element,t.DOM_DATA_KEY_ROW_CTRL,this),this.addDestroyFunc(function(){return n.setDomData(e.element,t.DOM_DATA_KEY_ROW_CTRL,null)}),this.useAnimationFrameForCreate?this.beans.animationFrameService.createTask(this.addHoverFunctionality.bind(this,e.element),this.rowNode.rowIndex,"createTasksP2"):this.addHoverFunctionality(e.element),this.isFullWidth()&&this.setupFullWidth(e),n.get("rowDragEntireRow")&&this.addRowDraggerToRow(e),this.useAnimationFrameForCreate&&this.beans.animationFrameService.addDestroyTask(function(){o.isAlive()&&e.rowComp.addOrRemoveCssClass("ag-after-created",!0)}),this.executeProcessRowPostCreateFunc()},t.prototype.setRowCompRowBusinessKey=function(e){this.businessKeySanitised!=null&&e.setRowBusinessKey(this.businessKeySanitised)},t.prototype.getBusinessKey=function(){return this.businessKeySanitised},t.prototype.setRowCompRowId=function(e){this.rowId=ht(this.rowNode.id),this.rowId!=null&&e.setRowId(this.rowId)},t.prototype.executeSlideAndFadeAnimations=function(e){var o=this,n=e.containerType,i=this.slideInAnimation[n];i&&(vd(function(){o.onTopChanged()}),this.slideInAnimation[n]=!1);var s=this.fadeInAnimation[n];s&&(vd(function(){e.rowComp.addOrRemoveCssClass("ag-opacity-zero",!1)}),this.fadeInAnimation[n]=!1)},t.prototype.addRowDraggerToRow=function(e){if(this.gridOptionsService.get("enableRangeSelection")){Ee("Setting `rowDragEntireRow: true` in the gridOptions doesn't work with `enableRangeSelection: true`");return}var o=this.beans.localeService.getLocaleTextFunc(),n=new Pl(function(){return"1 ".concat(o("rowDragRow","row"))},this.rowNode,void 0,e.element,void 0,!0),i=this.createBean(n,this.beans.context);this.rowDragComps.push(i)},t.prototype.setupFullWidth=function(e){var o=this.getPinnedForContainer(e.containerType),n=this.createFullWidthParams(e.element,o);if(!(this.rowType==Xt.FullWidthDetail&&!Se.__assertRegistered(ie.MasterDetailModule,"cell renderer 'agDetailCellRenderer' (for master detail)",this.beans.context.getGridId()))){var i;switch(this.rowType){case Xt.FullWidthDetail:i=this.beans.userComponentFactory.getFullWidthDetailCellRendererDetails(n);break;case Xt.FullWidthGroup:i=this.beans.userComponentFactory.getFullWidthGroupCellRendererDetails(n);break;case Xt.FullWidthLoading:i=this.beans.userComponentFactory.getFullWidthLoadingCellRendererDetails(n);break;default:i=this.beans.userComponentFactory.getFullWidthCellRendererDetails(n);break}e.rowComp.showFullWidth(i)}},t.prototype.isPrintLayout=function(){return this.printLayout},t.prototype.getFullWidthCellRenderer=function(){var e,o;return(o=(e=this.fullWidthGui)===null||e===void 0?void 0:e.rowComp)===null||o===void 0?void 0:o.getFullWidthCellRenderer()},t.prototype.getCellElement=function(e){var o=this.getCellCtrl(e);return o?o.getGui():null},t.prototype.executeProcessRowPostCreateFunc=function(){var e=this.gridOptionsService.getCallback("processRowPostCreate");if(!(!e||!this.areAllContainersReady())){var o={eRow:this.centerGui.element,ePinnedLeftRow:this.leftGui?this.leftGui.element:void 0,ePinnedRightRow:this.rightGui?this.rightGui.element:void 0,node:this.rowNode,rowIndex:this.rowNode.rowIndex,addRenderedRowListener:this.addEventListener.bind(this)};e(o)}},t.prototype.areAllContainersReady=function(){var e=!!this.leftGui||!this.beans.columnModel.isPinningLeft(),o=!!this.centerGui,n=!!this.rightGui||!this.beans.columnModel.isPinningRight();return e&&o&&n},t.prototype.setRowType=function(){var e=this.rowNode.stub,o=this.rowNode.isFullWidthCell(),n=this.gridOptionsService.get("masterDetail")&&this.rowNode.detail,i=this.beans.columnModel.isPivotMode(),s=!!this.rowNode.group&&!this.rowNode.footer,a=s&&this.gridOptionsService.isGroupUseEntireRow(i);e?this.rowType=Xt.FullWidthLoading:n?this.rowType=Xt.FullWidthDetail:o?this.rowType=Xt.FullWidth:a?this.rowType=Xt.FullWidthGroup:this.rowType=Xt.Normal},t.prototype.updateColumnLists=function(e,o){var n=this;if(e===void 0&&(e=!1),o===void 0&&(o=!1),!this.isFullWidth()){var i=e||this.gridOptionsService.get("suppressAnimationFrame")||this.printLayout;if(i){this.updateColumnListsImpl(o);return}this.updateColumnListsPending||(this.beans.animationFrameService.createTask(function(){n.active&&n.updateColumnListsImpl(!0)},this.rowNode.rowIndex,"createTasksP1"),this.updateColumnListsPending=!0)}},t.prototype.createCellCtrls=function(e,o,n){var i=this;n===void 0&&(n=null);var s={list:[],map:{}},a=function(l,c){s.list.push(c),s.map[l]=c};return o.forEach(function(l){var c=l.getInstanceId(),u=e.map[c];u||(u=new Pi(l,i.rowNode,i.beans,i)),a(c,u)}),e.list.forEach(function(l){var c=s.map[l.getColumn().getInstanceId()]!=null;if(!c){var u=!i.isCellEligibleToBeRemoved(l,n);if(u){a(l.getColumn().getInstanceId(),l);return}l.destroy()}}),s},t.prototype.updateColumnListsImpl=function(e){this.updateColumnListsPending=!1,this.createAllCellCtrls(),this.setCellCtrls(e)},t.prototype.setCellCtrls=function(e){var o=this;this.allRowGuis.forEach(function(n){var i=o.getCellCtrlsForContainer(n.containerType);n.rowComp.setCellCtrls(i,e)})},t.prototype.getCellCtrlsForContainer=function(e){switch(e){case ft.LEFT:return this.leftCellCtrls.list;case ft.RIGHT:return this.rightCellCtrls.list;case ft.FULL_WIDTH:return[];case ft.CENTER:return this.centerCellCtrls.list;default:var o=e;throw new Error("Unhandled case: ".concat(o))}},t.prototype.createAllCellCtrls=function(){var e=this.beans.columnModel;if(this.printLayout)this.centerCellCtrls=this.createCellCtrls(this.centerCellCtrls,e.getAllDisplayedColumns()),this.leftCellCtrls={list:[],map:{}},this.rightCellCtrls={list:[],map:{}};else{var o=e.getViewportCenterColumnsForRow(this.rowNode);this.centerCellCtrls=this.createCellCtrls(this.centerCellCtrls,o);var n=e.getDisplayedLeftColumnsForRow(this.rowNode);this.leftCellCtrls=this.createCellCtrls(this.leftCellCtrls,n,"left");var i=e.getDisplayedRightColumnsForRow(this.rowNode);this.rightCellCtrls=this.createCellCtrls(this.rightCellCtrls,i,"right")}},t.prototype.isCellEligibleToBeRemoved=function(e,o){var n=!0,i=!1,s=e.getColumn();if(s.getPinned()!=o)return n;var a=e.isEditing(),l=this.beans.focusService.isCellFocused(e.getCellPosition()),c=a||l;if(c){var u=e.getColumn(),d=this.beans.columnModel.getAllDisplayedColumns(),p=d.indexOf(u)>=0;return p?i:n}return n},t.prototype.getDomOrder=function(){var e=this.gridOptionsService.get("ensureDomOrder");return e||this.gridOptionsService.isDomLayout("print")},t.prototype.listenOnDomOrder=function(e){var o=this,n=function(){e.rowComp.setDomOrder(o.getDomOrder())};this.addManagedPropertyListener("domLayout",n),this.addManagedPropertyListener("ensureDomOrder",n)},t.prototype.setAnimateFlags=function(e){if(!(this.isSticky()||!e)){var o=W(this.rowNode.oldRowTop),n=this.beans.columnModel.isPinningLeft(),i=this.beans.columnModel.isPinningRight();if(o){if(this.isFullWidth()&&!this.gridOptionsService.get("embedFullWidthRows")){this.slideInAnimation.fullWidth=!0;return}this.slideInAnimation.center=!0,this.slideInAnimation.left=n,this.slideInAnimation.right=i}else{if(this.isFullWidth()&&!this.gridOptionsService.get("embedFullWidthRows")){this.fadeInAnimation.fullWidth=!0;return}this.fadeInAnimation.center=!0,this.fadeInAnimation.left=n,this.fadeInAnimation.right=i}}},t.prototype.isEditing=function(){return this.editingRow},t.prototype.stopRowEditing=function(e){this.stopEditing(e)},t.prototype.isFullWidth=function(){return this.rowType!==Xt.Normal},t.prototype.getRowType=function(){return this.rowType},t.prototype.refreshFullWidth=function(){var e=this,o=function(c,u){if(!c)return!0;var d=c.rowComp.getFullWidthCellRenderer();if(!d||!d.refresh)return!1;var p=e.createFullWidthParams(c.element,u),h=d.refresh(p);return h},n=o(this.fullWidthGui,null),i=o(this.centerGui,null),s=o(this.leftGui,"left"),a=o(this.rightGui,"right"),l=n&&i&&s&&a;return l},t.prototype.addListeners=function(){var e=this;this.addManagedListener(this.rowNode,be.EVENT_HEIGHT_CHANGED,function(){return e.onRowHeightChanged()}),this.addManagedListener(this.rowNode,be.EVENT_ROW_SELECTED,function(){return e.onRowSelected()}),this.addManagedListener(this.rowNode,be.EVENT_ROW_INDEX_CHANGED,this.onRowIndexChanged.bind(this)),this.addManagedListener(this.rowNode,be.EVENT_TOP_CHANGED,this.onTopChanged.bind(this)),this.addManagedListener(this.rowNode,be.EVENT_EXPANDED_CHANGED,this.updateExpandedCss.bind(this)),this.addManagedListener(this.rowNode,be.EVENT_HAS_CHILDREN_CHANGED,this.updateExpandedCss.bind(this)),this.rowNode.detail&&this.addManagedListener(this.rowNode.parent,be.EVENT_DATA_CHANGED,this.onRowNodeDataChanged.bind(this)),this.addManagedListener(this.rowNode,be.EVENT_DATA_CHANGED,this.onRowNodeDataChanged.bind(this)),this.addManagedListener(this.rowNode,be.EVENT_CELL_CHANGED,this.onRowNodeCellChanged.bind(this)),this.addManagedListener(this.rowNode,be.EVENT_HIGHLIGHT_CHANGED,this.onRowNodeHighlightChanged.bind(this)),this.addManagedListener(this.rowNode,be.EVENT_DRAGGING_CHANGED,this.onRowNodeDraggingChanged.bind(this)),this.addManagedListener(this.rowNode,be.EVENT_UI_LEVEL_CHANGED,this.onUiLevelChanged.bind(this));var o=this.beans.eventService;this.addManagedListener(o,w.EVENT_PAGINATION_PIXEL_OFFSET_CHANGED,this.onPaginationPixelOffsetChanged.bind(this)),this.addManagedListener(o,w.EVENT_HEIGHT_SCALE_CHANGED,this.onTopChanged.bind(this)),this.addManagedListener(o,w.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.addManagedListener(o,w.EVENT_VIRTUAL_COLUMNS_CHANGED,this.onVirtualColumnsChanged.bind(this)),this.addManagedListener(o,w.EVENT_CELL_FOCUSED,this.onCellFocused.bind(this)),this.addManagedListener(o,w.EVENT_CELL_FOCUS_CLEARED,this.onCellFocusCleared.bind(this)),this.addManagedListener(o,w.EVENT_PAGINATION_CHANGED,this.onPaginationChanged.bind(this)),this.addManagedListener(o,w.EVENT_MODEL_UPDATED,this.onModelUpdated.bind(this)),this.addManagedListener(o,w.EVENT_COLUMN_MOVED,this.onColumnMoved.bind(this)),this.addDestroyFunc(function(){e.destroyBeans(e.rowDragComps,e.beans.context)}),this.addManagedPropertyListeners(["rowDragEntireRow"],function(){var n=e.gridOptionsService.get("rowDragEntireRow");if(n){e.allRowGuis.forEach(function(i){e.addRowDraggerToRow(i)});return}e.destroyBeans(e.rowDragComps,e.beans.context),e.rowDragComps=[]}),this.addListenersForCellComps()},t.prototype.onColumnMoved=function(){this.updateColumnLists()},t.prototype.addListenersForCellComps=function(){var e=this;this.addManagedListener(this.rowNode,be.EVENT_ROW_INDEX_CHANGED,function(){e.getAllCellCtrls().forEach(function(o){return o.onRowIndexChanged()})}),this.addManagedListener(this.rowNode,be.EVENT_CELL_CHANGED,function(o){e.getAllCellCtrls().forEach(function(n){return n.onCellChanged(o)})})},t.prototype.onRowNodeDataChanged=function(e){var o=this,n=this.isFullWidth()!==!!this.rowNode.isFullWidthCell();if(n){this.beans.rowRenderer.redrawRow(this.rowNode);return}if(this.isFullWidth()){var i=this.refreshFullWidth();i||this.beans.rowRenderer.redrawRow(this.rowNode);return}this.getAllCellCtrls().forEach(function(s){return s.refreshCell({suppressFlash:!e.update,newData:!e.update})}),this.allRowGuis.forEach(function(s){o.setRowCompRowId(s.rowComp),o.updateRowBusinessKey(),o.setRowCompRowBusinessKey(s.rowComp)}),this.onRowSelected(),this.postProcessCss()},t.prototype.onRowNodeCellChanged=function(){this.postProcessCss()},t.prototype.postProcessCss=function(){this.setStylesFromGridOptions(!0),this.postProcessClassesFromGridOptions(),this.postProcessRowClassRules(),this.postProcessRowDragging()},t.prototype.onRowNodeHighlightChanged=function(){var e=this.rowNode.highlighted;this.allRowGuis.forEach(function(o){var n=e===On.Above,i=e===On.Below;o.rowComp.addOrRemoveCssClass("ag-row-highlight-above",n),o.rowComp.addOrRemoveCssClass("ag-row-highlight-below",i)})},t.prototype.onRowNodeDraggingChanged=function(){this.postProcessRowDragging()},t.prototype.postProcessRowDragging=function(){var e=this.rowNode.dragging;this.allRowGuis.forEach(function(o){return o.rowComp.addOrRemoveCssClass("ag-row-dragging",e)})},t.prototype.updateExpandedCss=function(){var e=this.rowNode.isExpandable(),o=this.rowNode.expanded==!0;this.allRowGuis.forEach(function(n){n.rowComp.addOrRemoveCssClass("ag-row-group",e),n.rowComp.addOrRemoveCssClass("ag-row-group-expanded",e&&o),n.rowComp.addOrRemoveCssClass("ag-row-group-contracted",e&&!o),ko(n.element,e&&o)})},t.prototype.onDisplayedColumnsChanged=function(){this.updateColumnLists(!0),this.beans.columnModel.wasAutoRowHeightEverActive()&&this.rowNode.checkAutoHeights()},t.prototype.onVirtualColumnsChanged=function(){this.updateColumnLists(!1,!0)},t.prototype.getRowPosition=function(){return{rowPinned:un(this.rowNode.rowPinned),rowIndex:this.rowNode.rowIndex}},t.prototype.onKeyboardNavigate=function(e){var o=this.allRowGuis.find(function(c){return c.element.contains(e.target)}),n=o?o.element:null,i=n===e.target;if(i){var s=this.rowNode,a=this.beans.focusService.getFocusedCell(),l={rowIndex:s.rowIndex,rowPinned:s.rowPinned,column:a&&a.column};this.beans.navigationService.navigateToNextCell(e,e.key,l,!0),e.preventDefault()}},t.prototype.onTabKeyDown=function(e){if(!(e.defaultPrevented||Uo(e))){var o=this.allRowGuis.find(function(a){return a.element.contains(e.target)}),n=o?o.element:null,i=n===e.target,s=null;i||(s=this.beans.focusService.findNextFocusableElement(n,!1,e.shiftKey)),(this.isFullWidth()&&i||!s)&&this.beans.navigationService.onTabKeyDown(this,e)}},t.prototype.onFullWidthRowFocused=function(e){var o,n=this.rowNode,i=e?this.isFullWidth()&&e.rowIndex===n.rowIndex&&e.rowPinned==n.rowPinned:!1,s=this.fullWidthGui?this.fullWidthGui.element:(o=this.centerGui)===null||o===void 0?void 0:o.element;s&&(s.classList.toggle("ag-full-width-focus",i),i&&s.focus({preventScroll:!0}))},t.prototype.refreshCell=function(e){this.centerCellCtrls=this.removeCellCtrl(this.centerCellCtrls,e),this.leftCellCtrls=this.removeCellCtrl(this.leftCellCtrls,e),this.rightCellCtrls=this.removeCellCtrl(this.rightCellCtrls,e),this.updateColumnLists()},t.prototype.removeCellCtrl=function(e,o){var n={list:[],map:{}};return e.list.forEach(function(i){i!==o&&(n.list.push(i),n.map[i.getInstanceId()]=i)}),n},t.prototype.onMouseEvent=function(e,o){switch(e){case"dblclick":this.onRowDblClick(o);break;case"click":this.onRowClick(o);break;case"touchstart":case"mousedown":this.onRowMouseDown(o);break}},t.prototype.createRowEvent=function(e,o){return{type:e,node:this.rowNode,data:this.rowNode.data,rowIndex:this.rowNode.rowIndex,rowPinned:this.rowNode.rowPinned,context:this.gridOptionsService.context,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,event:o}},t.prototype.createRowEventWithSource=function(e,o){var n=this.createRowEvent(e,o);return n.source=this,n},t.prototype.onRowDblClick=function(e){if(!Uo(e)){var o=this.createRowEventWithSource(w.EVENT_ROW_DOUBLE_CLICKED,e);this.beans.eventService.dispatchEvent(o)}},t.prototype.onRowMouseDown=function(e){if(this.lastMouseDownOnDragger=Ai(e.target,"ag-row-drag",3),!!this.isFullWidth()){var o=this.rowNode,n=this.beans.columnModel;this.beans.rangeService&&this.beans.rangeService.removeAllCellRanges(),this.beans.focusService.setFocusedCell({rowIndex:o.rowIndex,column:n.getAllDisplayedColumns()[0],rowPinned:o.rowPinned,forceBrowserFocus:!0})}},t.prototype.onRowClick=function(e){var o=Uo(e)||this.lastMouseDownOnDragger;if(!o){var n=this.createRowEventWithSource(w.EVENT_ROW_CLICKED,e);this.beans.eventService.dispatchEvent(n);var i=e.ctrlKey||e.metaKey,s=e.shiftKey,a=this.gridOptionsService.get("groupSelectsChildren");if(!(a&&this.rowNode.group||!this.rowNode.selectable||this.rowNode.rowPinned||!this.gridOptionsService.isRowSelection()||this.gridOptionsService.get("suppressRowClickSelection"))){var l=this.gridOptionsService.get("rowMultiSelectWithClick"),c=!this.gridOptionsService.get("suppressRowDeselection"),u="rowClicked";if(this.rowNode.isSelected())l?this.rowNode.setSelectedParams({newValue:!1,event:e,source:u}):i?c&&this.rowNode.setSelectedParams({newValue:!1,event:e,source:u}):this.rowNode.setSelectedParams({newValue:!0,clearSelection:!s,rangeSelect:s,event:e,source:u});else{var d=l?!1:!i;this.rowNode.setSelectedParams({newValue:!0,clearSelection:d,rangeSelect:s,event:e,source:u})}}}},t.prototype.setupDetailRowAutoHeight=function(e){var o=this;if(this.rowType===Xt.FullWidthDetail&&this.gridOptionsService.get("detailRowAutoHeight")){var n=function(){var s=e.clientHeight;if(s!=null&&s>0){var a=function(){o.rowNode.setRowHeight(s),o.beans.clientSideRowModel?o.beans.clientSideRowModel.onRowHeightChanged():o.beans.serverSideRowModel&&o.beans.serverSideRowModel.onRowHeightChanged()};o.beans.frameworkOverrides.setTimeout(a,0)}},i=this.beans.resizeObserverService.observeResize(e,n);this.addDestroyFunc(i),n()}},t.prototype.createFullWidthParams=function(e,o){var n=this,i={fullWidth:!0,data:this.rowNode.data,node:this.rowNode,value:this.rowNode.key,valueFormatted:this.rowNode.key,rowIndex:this.rowNode.rowIndex,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context,eGridCell:e,eParentOfValue:e,pinned:o,addRenderedRowListener:this.addEventListener.bind(this),registerRowDragger:function(s,a,l,c){return n.addFullWidthRowDragging(s,a,l,c)}};return i},t.prototype.addFullWidthRowDragging=function(e,o,n,i){if(n===void 0&&(n=""),!!this.isFullWidth()){var s=new Pl(function(){return n},this.rowNode,void 0,e,o,i);this.createManagedBean(s,this.beans.context)}},t.prototype.onUiLevelChanged=function(){var e=this.beans.rowCssClassCalculator.calculateRowLevel(this.rowNode);if(this.rowLevel!=e){var o="ag-row-level-"+e,n="ag-row-level-"+this.rowLevel;this.allRowGuis.forEach(function(i){i.rowComp.addOrRemoveCssClass(o,!0),i.rowComp.addOrRemoveCssClass(n,!1)})}this.rowLevel=e},t.prototype.isFirstRowOnPage=function(){return this.rowNode.rowIndex===this.beans.paginationProxy.getPageFirstRow()},t.prototype.isLastRowOnPage=function(){return this.rowNode.rowIndex===this.beans.paginationProxy.getPageLastRow()},t.prototype.onModelUpdated=function(){this.refreshFirstAndLastRowStyles()},t.prototype.refreshFirstAndLastRowStyles=function(){var e=this.isFirstRowOnPage(),o=this.isLastRowOnPage();this.firstRowOnPage!==e&&(this.firstRowOnPage=e,this.allRowGuis.forEach(function(n){return n.rowComp.addOrRemoveCssClass("ag-row-first",e)})),this.lastRowOnPage!==o&&(this.lastRowOnPage=o,this.allRowGuis.forEach(function(n){return n.rowComp.addOrRemoveCssClass("ag-row-last",o)}))},t.prototype.stopEditing=function(e){var o,n;if(e===void 0&&(e=!1),!this.stoppingRowEdit){var i=this.getAllCellCtrls(),s=this.editingRow;this.stoppingRowEdit=!0;var a=!1;try{for(var l=XN(i),c=l.next();!c.done;c=l.next()){var u=c.value,d=u.stopEditing(e);s&&!e&&!a&&d&&(a=!0)}}catch(h){o={error:h}}finally{try{c&&!c.done&&(n=l.return)&&n.call(l)}finally{if(o)throw o.error}}if(a){var p=this.createRowEvent(w.EVENT_ROW_VALUE_CHANGED);this.beans.eventService.dispatchEvent(p)}s&&this.setEditingRow(!1),this.stoppingRowEdit=!1}},t.prototype.setInlineEditingCss=function(e){this.allRowGuis.forEach(function(o){o.rowComp.addOrRemoveCssClass("ag-row-inline-editing",e),o.rowComp.addOrRemoveCssClass("ag-row-not-inline-editing",!e)})},t.prototype.setEditingRow=function(e){this.editingRow=e,this.allRowGuis.forEach(function(n){return n.rowComp.addOrRemoveCssClass("ag-row-editing",e)});var o=e?this.createRowEvent(w.EVENT_ROW_EDITING_STARTED):this.createRowEvent(w.EVENT_ROW_EDITING_STOPPED);this.beans.eventService.dispatchEvent(o)},t.prototype.startRowEditing=function(e,o,n){if(e===void 0&&(e=null),o===void 0&&(o=null),n===void 0&&(n=null),!this.editingRow){var i=this.getAllCellCtrls().reduce(function(s,a){var l=a===o;return l?a.startEditing(e,l,n):a.startEditing(null,l,n),s?!0:a.isEditing()},!1);i&&this.setEditingRow(!0)}},t.prototype.getAllCellCtrls=function(){if(this.leftCellCtrls.list.length===0&&this.rightCellCtrls.list.length===0)return this.centerCellCtrls.list;var e=pu(pu(pu([],du(this.centerCellCtrls.list),!1),du(this.leftCellCtrls.list),!1),du(this.rightCellCtrls.list),!1);return e},t.prototype.postProcessClassesFromGridOptions=function(){var e=this,o=this.beans.rowCssClassCalculator.processClassesFromGridOptions(this.rowNode);!o||!o.length||o.forEach(function(n){e.allRowGuis.forEach(function(i){return i.rowComp.addOrRemoveCssClass(n,!0)})})},t.prototype.postProcessRowClassRules=function(){var e=this;this.beans.rowCssClassCalculator.processRowClassRules(this.rowNode,function(o){e.allRowGuis.forEach(function(n){return n.rowComp.addOrRemoveCssClass(o,!0)})},function(o){e.allRowGuis.forEach(function(n){return n.rowComp.addOrRemoveCssClass(o,!1)})})},t.prototype.setStylesFromGridOptions=function(e,o){var n=this;e&&(this.rowStyles=this.processStylesFromGridOptions()),this.forEachGui(o,function(i){return i.rowComp.setUserStyles(n.rowStyles)})},t.prototype.getPinnedForContainer=function(e){var o=e===ft.LEFT?"left":e===ft.RIGHT?"right":null;return o},t.prototype.getInitialRowClasses=function(e){var o=this.getPinnedForContainer(e),n={rowNode:this.rowNode,rowFocused:this.rowFocused,fadeRowIn:this.fadeInAnimation[e],rowIsEven:this.rowNode.rowIndex%2===0,rowLevel:this.rowLevel,fullWidthRow:this.isFullWidth(),firstRowOnPage:this.isFirstRowOnPage(),lastRowOnPage:this.isLastRowOnPage(),printLayout:this.printLayout,expandable:this.rowNode.isExpandable(),pinned:o};return this.beans.rowCssClassCalculator.getInitialRowClasses(n)},t.prototype.processStylesFromGridOptions=function(){var e=this.gridOptionsService.get("rowStyle");if(e&&typeof e=="function"){console.warn("AG Grid: rowStyle should be an object of key/value styles, not be a function, use getRowStyle() instead");return}var o=this.gridOptionsService.getCallback("getRowStyle"),n;if(o){var i={data:this.rowNode.data,node:this.rowNode,rowIndex:this.rowNode.rowIndex};n=o(i)}return n||e?Object.assign({},e,n):this.emptyStyle},t.prototype.onRowSelected=function(e){var o=this,n=!!this.rowNode.isSelected();this.forEachGui(e,function(i){i.rowComp.addOrRemoveCssClass("ag-row-selected",n),Mr(i.element,n?!0:void 0);var s=o.createAriaLabel();In(i.element,s??"")})},t.prototype.createAriaLabel=function(){var e=this.rowNode.isSelected();if(!(e&&this.gridOptionsService.get("suppressRowDeselection"))){var o=this.beans.localeService.getLocaleTextFunc(),n=o(e?"ariaRowDeselect":"ariaRowSelect","Press SPACE to ".concat(e?"deselect":"select"," this row."));return n}},t.prototype.isUseAnimationFrameForCreate=function(){return this.useAnimationFrameForCreate},t.prototype.addHoverFunctionality=function(e){var o=this;this.active&&(this.addManagedListener(e,"mouseenter",function(){return o.rowNode.onMouseEnter()}),this.addManagedListener(e,"mouseleave",function(){return o.rowNode.onMouseLeave()}),this.addManagedListener(this.rowNode,be.EVENT_MOUSE_ENTER,function(){!o.beans.dragService.isDragging()&&!o.gridOptionsService.get("suppressRowHoverHighlight")&&(e.classList.add("ag-row-hover"),o.rowNode.setHovered(!0))}),this.addManagedListener(this.rowNode,be.EVENT_MOUSE_LEAVE,function(){e.classList.remove("ag-row-hover"),o.rowNode.setHovered(!1)}))},t.prototype.roundRowTopToBounds=function(e){var o=this.beans.ctrlsService.getGridBodyCtrl(),n=o.getScrollFeature().getVScrollPosition(),i=this.applyPaginationOffset(n.top,!0)-100,s=this.applyPaginationOffset(n.bottom,!0)+100;return Math.min(Math.max(i,e),s)},t.prototype.getFrameworkOverrides=function(){return this.beans.frameworkOverrides},t.prototype.forEachGui=function(e,o){e?o(e):this.allRowGuis.forEach(o)},t.prototype.onRowHeightChanged=function(e){if(this.rowNode.rowHeight!=null){var o=this.rowNode.rowHeight,n=this.beans.environment.getDefaultRowHeight(),i=this.gridOptionsService.isGetRowHeightFunction(),s=i?this.gridOptionsService.getRowHeightForNode(this.rowNode).height:void 0,a=s?"".concat(Math.min(n,s)-2,"px"):void 0;this.forEachGui(e,function(l){l.element.style.height="".concat(o,"px"),a&&l.element.style.setProperty("--ag-line-height",a)})}},t.prototype.addEventListener=function(e,o){r.prototype.addEventListener.call(this,e,o)},t.prototype.removeEventListener=function(e,o){r.prototype.removeEventListener.call(this,e,o)},t.prototype.destroyFirstPass=function(){this.active=!1,this.gridOptionsService.isAnimateRows()&&this.setupRemoveAnimation(),this.rowNode.setHovered(!1);var e=this.createRowEvent(w.EVENT_VIRTUAL_ROW_REMOVED);this.dispatchEvent(e),this.beans.eventService.dispatchEvent(e),r.prototype.destroy.call(this)},t.prototype.setupRemoveAnimation=function(){if(!this.isSticky()){var e=this.rowNode.rowTop!=null;if(e){var o=this.roundRowTopToBounds(this.rowNode.rowTop);this.setRowTop(o)}else this.allRowGuis.forEach(function(n){return n.rowComp.addOrRemoveCssClass("ag-opacity-zero",!0)})}},t.prototype.destroySecondPass=function(){this.allRowGuis.length=0,this.stopEditing();var e=function(o){return o.list.forEach(function(n){return n.destroy()}),{list:[],map:{}}};this.centerCellCtrls=e(this.centerCellCtrls),this.leftCellCtrls=e(this.leftCellCtrls),this.rightCellCtrls=e(this.rightCellCtrls)},t.prototype.setFocusedClasses=function(e){var o=this;this.forEachGui(e,function(n){n.rowComp.addOrRemoveCssClass("ag-row-focus",o.rowFocused),n.rowComp.addOrRemoveCssClass("ag-row-no-focus",!o.rowFocused)})},t.prototype.onCellFocused=function(){this.onCellFocusChanged()},t.prototype.onCellFocusCleared=function(){this.onCellFocusChanged()},t.prototype.onCellFocusChanged=function(){var e=this.beans.focusService.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned);e!==this.rowFocused&&(this.rowFocused=e,this.setFocusedClasses()),!e&&this.editingRow&&this.stopEditing(!1)},t.prototype.onPaginationChanged=function(){var e=this.beans.paginationProxy.getCurrentPage();this.paginationPage!==e&&(this.paginationPage=e,this.onTopChanged()),this.refreshFirstAndLastRowStyles()},t.prototype.onTopChanged=function(){this.setRowTop(this.rowNode.rowTop)},t.prototype.onPaginationPixelOffsetChanged=function(){this.onTopChanged()},t.prototype.applyPaginationOffset=function(e,o){if(o===void 0&&(o=!1),this.rowNode.isRowPinned()||this.rowNode.sticky)return e;var n=this.beans.paginationProxy.getPixelOffset(),i=o?1:-1;return e+n*i},t.prototype.setRowTop=function(e){if(!this.printLayout&&W(e)){var o=this.applyPaginationOffset(e),n=this.rowNode.isRowPinned()||this.rowNode.sticky,i=n?o:this.beans.rowContainerHeightService.getRealPixelPosition(o),s="".concat(i,"px");this.setRowTopStyle(s)}},t.prototype.getInitialRowTop=function(e){var o=this.gridOptionsService.get("suppressRowTransform");return o?this.getInitialRowTopShared(e):void 0},t.prototype.getInitialTransform=function(e){var o=this.gridOptionsService.get("suppressRowTransform");return o?void 0:"translateY(".concat(this.getInitialRowTopShared(e),")")},t.prototype.getInitialRowTopShared=function(e){if(this.printLayout)return"";var o;if(this.isSticky())o=this.rowNode.stickyRowTop;else{var n=this.slideInAnimation[e]?this.roundRowTopToBounds(this.rowNode.oldRowTop):this.rowNode.rowTop,i=this.applyPaginationOffset(n);o=this.rowNode.isRowPinned()?i:this.beans.rowContainerHeightService.getRealPixelPosition(i)}return o+"px"},t.prototype.setRowTopStyle=function(e){var o=this.gridOptionsService.get("suppressRowTransform");this.allRowGuis.forEach(function(n){return o?n.rowComp.setTop(e):n.rowComp.setTransform("translateY(".concat(e,")"))})},t.prototype.getRowNode=function(){return this.rowNode},t.prototype.getCellCtrl=function(e){var o=null;return this.getAllCellCtrls().forEach(function(n){n.getColumn()==e&&(o=n)}),o!=null||this.getAllCellCtrls().forEach(function(n){n.getColSpanningList().indexOf(e)>=0&&(o=n)}),o},t.prototype.onRowIndexChanged=function(){this.rowNode.rowIndex!=null&&(this.onCellFocusChanged(),this.updateRowIndexes(),this.postProcessCss())},t.prototype.getRowIndex=function(){return this.rowNode.getRowIndexString()},t.prototype.updateRowIndexes=function(e){var o=this.rowNode.getRowIndexString(),n=this.beans.headerNavigationService.getHeaderRowCount()+this.beans.filterManager.getHeaderRowCount(),i=this.rowNode.rowIndex%2===0,s=n+this.rowNode.rowIndex+1;this.forEachGui(e,function(a){a.rowComp.setRowIndex(o),a.rowComp.addOrRemoveCssClass("ag-row-even",i),a.rowComp.addOrRemoveCssClass("ag-row-odd",!i),Yp(a.element,s)})},t.prototype.getPinnedLeftRowElement=function(){return this.leftGui?this.leftGui.element:void 0},t.prototype.getPinnedRightRowElement=function(){return this.rightGui?this.rightGui.element:void 0},t.prototype.getBodyRowElement=function(){return this.centerGui?this.centerGui.element:void 0},t.prototype.getFullWidthRowElement=function(){return this.fullWidthGui?this.fullWidthGui.element:void 0},t.DOM_DATA_KEY_ROW_CTRL="renderedRow",t}(K),JN=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),so=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},e6=function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var o=e.call(r),n,i=[],s;try{for(;(t===void 0||t-- >0)&&!(n=o.next()).done;)i.push(n.value)}catch(a){s={error:a}}finally{try{n&&!n.done&&(e=o.return)&&e.call(o)}finally{if(s)throw s.error}}return i},t6=function(r){JN(t,r);function t(e){var o=r.call(this)||this;return o.element=e,o}return t.prototype.postConstruct=function(){this.addKeyboardListeners(),this.addMouseListeners(),this.mockContextMenuForIPad()},t.prototype.addKeyboardListeners=function(){var e="keydown",o=this.processKeyboardEvent.bind(this,e);this.addManagedListener(this.element,e,o)},t.prototype.addMouseListeners=function(){var e=this,o=Bp("touchstart")?"touchstart":"mousedown",n=["dblclick","contextmenu","mouseover","mouseout","click",o];n.forEach(function(i){var s=e.processMouseEvent.bind(e,i);e.addManagedListener(e.element,i,s)})},t.prototype.processMouseEvent=function(e,o){if(!(!this.mouseEventService.isEventFromThisGrid(o)||Uo(o))){var n=this.getRowForEvent(o),i=this.mouseEventService.getRenderedCellForEvent(o);e==="contextmenu"?this.handleContextMenuMouseEvent(o,null,n,i):(i&&i.onMouseEvent(e,o),n&&n.onMouseEvent(e,o))}},t.prototype.mockContextMenuForIPad=function(){var e=this;if(ai()){var o=new fo(this.element),n=function(i){var s=e.getRowForEvent(i.touchEvent),a=e.mouseEventService.getRenderedCellForEvent(i.touchEvent);e.handleContextMenuMouseEvent(null,i.touchEvent,s,a)};this.addManagedListener(o,fo.EVENT_LONG_TAP,n),this.addDestroyFunc(function(){return o.destroy()})}},t.prototype.getRowForEvent=function(e){for(var o=e.target;o;){var n=this.gridOptionsService.getDomData(o,Ii.DOM_DATA_KEY_ROW_CTRL);if(n)return n;o=o.parentElement}return null},t.prototype.handleContextMenuMouseEvent=function(e,o,n,i){var s=n?n.getRowNode():null,a=i?i.getColumn():null,l=null;if(a){var c=e||o;i.dispatchCellContextMenuEvent(c),l=this.valueService.getValue(a,s)}var u=this.ctrlsService.getGridBodyCtrl(),d=i?i.getGui():u.getGridBodyElement();this.contextMenuFactory&&this.contextMenuFactory.onContextMenu(e,o,s,a,l,d)},t.prototype.getControlsForEventTarget=function(e){return{cellCtrl:_l(this.gridOptionsService,e,Pi.DOM_DATA_KEY_CELL_CTRL),rowCtrl:_l(this.gridOptionsService,e,Ii.DOM_DATA_KEY_ROW_CTRL)}},t.prototype.processKeyboardEvent=function(e,o){var n=this.getControlsForEventTarget(o.target),i=n.cellCtrl,s=n.rowCtrl;o.defaultPrevented||(i?this.processCellKeyboardEvent(i,e,o):s&&s.isFullWidth()&&this.processFullWidthRowKeyboardEvent(s,e,o))},t.prototype.processCellKeyboardEvent=function(e,o,n){var i=e.getRowNode(),s=e.getColumn(),a=e.isEditing(),l=!Tl(this.gridOptionsService,n,i,s,a);if(l&&o==="keydown"){var c=!a&&this.navigationService.handlePageScrollingKey(n);c||e.onKeyDown(n),this.doGridOperations(n,e.isEditing()),gc(n)&&e.processCharacter(n)}if(o==="keydown"){var u=e.createEvent(n,w.EVENT_CELL_KEY_DOWN);this.eventService.dispatchEvent(u)}},t.prototype.processFullWidthRowKeyboardEvent=function(e,o,n){var i=e.getRowNode(),s=this.focusService.getFocusedCell(),a=s&&s.column,l=!Tl(this.gridOptionsService,n,i,a,!1);if(l){var c=n.key;if(o==="keydown")switch(c){case N.PAGE_HOME:case N.PAGE_END:case N.PAGE_UP:case N.PAGE_DOWN:this.navigationService.handlePageScrollingKey(n,!0);break;case N.UP:case N.DOWN:e.onKeyboardNavigate(n);break;case N.TAB:e.onTabKeyDown(n);break}}if(o==="keydown"){var u=e.createRowEvent(w.EVENT_CELL_KEY_DOWN,n);this.eventService.dispatchEvent(u)}},t.prototype.doGridOperations=function(e,o){if(!(!e.ctrlKey&&!e.metaKey)&&!o&&this.mouseEventService.isEventFromThisGrid(e)){var n=_C(e);if(n===N.A)return this.onCtrlAndA(e);if(n===N.C)return this.onCtrlAndC(e);if(n===N.D)return this.onCtrlAndD(e);if(n===N.V)return this.onCtrlAndV(e);if(n===N.X)return this.onCtrlAndX(e);if(n===N.Y)return this.onCtrlAndY();if(n===N.Z)return this.onCtrlAndZ(e)}},t.prototype.onCtrlAndA=function(e){var o=this,n=o.pinnedRowModel,i=o.paginationProxy,s=o.rangeService;if(s&&i.isRowsToRender()){var a=e6([n.isEmpty("top"),n.isEmpty("bottom")],2),l=a[0],c=a[1],u=l?null:"top",d=void 0,p=void 0;c?(d=null,p=this.paginationProxy.getRowCount()-1):(d="bottom",p=n.getPinnedBottomRowData().length-1);var h=this.columnModel.getAllDisplayedColumns();if(Jt(h))return;s.setCellRange({rowStartIndex:0,rowStartPinned:u,rowEndIndex:p,rowEndPinned:d,columnStart:h[0],columnEnd:Ge(h)})}e.preventDefault()},t.prototype.onCtrlAndC=function(e){if(!(!this.clipboardService||this.gridOptionsService.get("enableCellTextSelection"))){var o=this.getControlsForEventTarget(e.target),n=o.cellCtrl,i=o.rowCtrl;n!=null&&n.isEditing()||i!=null&&i.isEditing()||(e.preventDefault(),this.clipboardService.copyToClipboard())}},t.prototype.onCtrlAndX=function(e){if(!(!this.clipboardService||this.gridOptionsService.get("enableCellTextSelection")||this.gridOptionsService.get("suppressCutToClipboard"))){var o=this.getControlsForEventTarget(e.target),n=o.cellCtrl,i=o.rowCtrl;n!=null&&n.isEditing()||i!=null&&i.isEditing()||(e.preventDefault(),this.clipboardService.cutToClipboard(void 0,"ui"))}},t.prototype.onCtrlAndV=function(e){var o=this.getControlsForEventTarget(e.target),n=o.cellCtrl,i=o.rowCtrl;n!=null&&n.isEditing()||i!=null&&i.isEditing()||this.clipboardService&&!this.gridOptionsService.get("suppressClipboardPaste")&&this.clipboardService.pasteFromClipboard()},t.prototype.onCtrlAndD=function(e){this.clipboardService&&!this.gridOptionsService.get("suppressClipboardPaste")&&this.clipboardService.copyRangeDown(),e.preventDefault()},t.prototype.onCtrlAndZ=function(e){this.gridOptionsService.get("undoRedoCellEditing")&&(e.preventDefault(),e.shiftKey?this.undoRedoService.redo("ui"):this.undoRedoService.undo("ui"))},t.prototype.onCtrlAndY=function(){this.undoRedoService.redo("ui")},so([y("mouseEventService")],t.prototype,"mouseEventService",void 0),so([y("valueService")],t.prototype,"valueService",void 0),so([Le("contextMenuFactory")],t.prototype,"contextMenuFactory",void 0),so([y("ctrlsService")],t.prototype,"ctrlsService",void 0),so([y("navigationService")],t.prototype,"navigationService",void 0),so([y("focusService")],t.prototype,"focusService",void 0),so([y("undoRedoService")],t.prototype,"undoRedoService",void 0),so([y("columnModel")],t.prototype,"columnModel",void 0),so([y("paginationProxy")],t.prototype,"paginationProxy",void 0),so([y("pinnedRowModel")],t.prototype,"pinnedRowModel",void 0),so([Le("rangeService")],t.prototype,"rangeService",void 0),so([Le("clipboardService")],t.prototype,"clipboardService",void 0),so([Q],t.prototype,"postConstruct",null),t}(K),o6=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),is=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},$f=function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var o=e.call(r),n,i=[],s;try{for(;(t===void 0||t-- >0)&&!(n=o.next()).done;)i.push(n.value)}catch(a){s={error:a}}finally{try{n&&!n.done&&(e=o.return)&&e.call(o)}finally{if(s)throw s.error}}return i},Kf=function(r,t,e){if(e||arguments.length===2)for(var o=0,n=t.length,i;o<n;o++)(i||!(o in t))&&(i||(i=Array.prototype.slice.call(t,0,o)),i[o]=t[o]);return r.concat(i||Array.prototype.slice.call(t))},n6=function(r){o6(t,r);function t(e){var o=r.call(this)||this;return o.centerContainerCtrl=e,o}return t.prototype.postConstruct=function(){var e=this;this.ctrlsService.whenReady(function(){e.gridBodyCtrl=e.ctrlsService.getGridBodyCtrl(),e.listenForResize()}),this.addManagedListener(this.eventService,w.EVENT_SCROLLBAR_WIDTH_CHANGED,this.onScrollbarWidthChanged.bind(this)),this.addManagedPropertyListeners(["alwaysShowHorizontalScroll","alwaysShowVerticalScroll"],function(){e.checkViewportAndScrolls()})},t.prototype.listenForResize=function(){var e=this,o=function(){return e.onCenterViewportResized()};this.centerContainerCtrl.registerViewportResizeListener(o),this.gridBodyCtrl.registerBodyViewportResizeListener(o)},t.prototype.onScrollbarWidthChanged=function(){this.checkViewportAndScrolls()},t.prototype.onCenterViewportResized=function(){if(this.centerContainerCtrl.isViewportVisible()){this.keepPinnedColumnsNarrowerThanViewport(),this.checkViewportAndScrolls();var e=this.centerContainerCtrl.getCenterWidth();e!==this.centerWidth&&(this.centerWidth=e,this.columnModel.refreshFlexedColumns({viewportWidth:this.centerWidth,updateBodyWidths:!0,fireResizedEvent:!0}))}else this.bodyHeight=0},t.prototype.keepPinnedColumnsNarrowerThanViewport=function(){var e=this.gridBodyCtrl.getBodyViewportElement(),o=Qi(e);if(!(isNaN(o)||o<=50)){var n=this.getPinnedColumnsOverflowingViewport(o-50),i=this.gridOptionsService.getCallback("processUnpinnedColumns");if(n.length){if(i){var s={columns:n,viewportWidth:o};n=i(s)}this.columnModel.setColumnsPinned(n,null,"viewportSizeFeature")}}},t.prototype.getPinnedColumnsOverflowingViewport=function(e){var o=this.pinnedWidthService.getPinnedRightWidth(),n=this.pinnedWidthService.getPinnedLeftWidth(),i=o+n;if(i<e)return[];for(var s=Kf([],$f(this.columnModel.getDisplayedLeftColumns()),!1),a=Kf([],$f(this.columnModel.getDisplayedRightColumns()),!1),l=0,c=0,u=0,d=[],p=i-u-e;(c<s.length||l<a.length)&&p>0;){if(l<a.length){var h=a[l++];p-=h.getActualWidth(),d.push(h)}if(c<s.length&&p>0){var h=s[c++];p-=h.getActualWidth(),d.push(h)}}return d},t.prototype.checkViewportAndScrolls=function(){this.updateScrollVisibleService(),this.checkBodyHeight(),this.onHorizontalViewportChanged(),this.gridBodyCtrl.getScrollFeature().checkScrollLeft()},t.prototype.getBodyHeight=function(){return this.bodyHeight},t.prototype.checkBodyHeight=function(){var e=this.gridBodyCtrl.getBodyViewportElement(),o=ua(e);if(this.bodyHeight!==o){this.bodyHeight=o;var n={type:w.EVENT_BODY_HEIGHT_CHANGED};this.eventService.dispatchEvent(n)}},t.prototype.updateScrollVisibleService=function(){this.updateScrollVisibleServiceImpl(),setTimeout(this.updateScrollVisibleServiceImpl.bind(this),500)},t.prototype.updateScrollVisibleServiceImpl=function(){var e={horizontalScrollShowing:this.isHorizontalScrollShowing(),verticalScrollShowing:this.gridBodyCtrl.isVerticalScrollShowing()};this.scrollVisibleService.setScrollsVisible(e)},t.prototype.isHorizontalScrollShowing=function(){return this.centerContainerCtrl.isHorizontalScrollShowing()},t.prototype.onHorizontalViewportChanged=function(){var e=this.centerContainerCtrl.getCenterWidth(),o=this.centerContainerCtrl.getViewportScrollLeft();this.columnModel.setViewportPosition(e,o)},is([y("ctrlsService")],t.prototype,"ctrlsService",void 0),is([y("pinnedWidthService")],t.prototype,"pinnedWidthService",void 0),is([y("columnModel")],t.prototype,"columnModel",void 0),is([y("scrollVisibleService")],t.prototype,"scrollVisibleService",void 0),is([Q],t.prototype,"postConstruct",null),t}(K),i6=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),Yf=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},r6=function(r){i6(t,r);function t(e){var o=r.call(this)||this;return o.element=e,o}return t.prototype.postConstruct=function(){this.addManagedListener(this.eventService,w.EVENT_LEFT_PINNED_WIDTH_CHANGED,this.onPinnedLeftWidthChanged.bind(this))},t.prototype.onPinnedLeftWidthChanged=function(){var e=this.pinnedWidthService.getPinnedLeftWidth(),o=e>0;xe(this.element,o),Ao(this.element,e)},t.prototype.getWidth=function(){return this.pinnedWidthService.getPinnedLeftWidth()},Yf([y("pinnedWidthService")],t.prototype,"pinnedWidthService",void 0),Yf([Q],t.prototype,"postConstruct",null),t}(K),s6=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),qf=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},a6=function(r){s6(t,r);function t(e){var o=r.call(this)||this;return o.element=e,o}return t.prototype.postConstruct=function(){this.addManagedListener(this.eventService,w.EVENT_RIGHT_PINNED_WIDTH_CHANGED,this.onPinnedRightWidthChanged.bind(this))},t.prototype.onPinnedRightWidthChanged=function(){var e=this.pinnedWidthService.getPinnedRightWidth(),o=e>0;xe(this.element,o),Ao(this.element,e)},t.prototype.getWidth=function(){return this.pinnedWidthService.getPinnedRightWidth()},qf([y("pinnedWidthService")],t.prototype,"pinnedWidthService",void 0),qf([Q],t.prototype,"postConstruct",null),t}(K),l6=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),Qf=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},ZC=function(r){l6(t,r);function t(e,o){var n=r.call(this)||this;return n.eContainer=e,n.eViewport=o,n}return t.prototype.postConstruct=function(){this.addManagedListener(this.eventService,w.EVENT_ROW_CONTAINER_HEIGHT_CHANGED,this.onHeightChanged.bind(this))},t.prototype.onHeightChanged=function(){var e=this.maxDivHeightScaler.getUiContainerHeight(),o=e!=null?"".concat(e,"px"):"";this.eContainer.style.height=o,this.eViewport&&(this.eViewport.style.height=o)},Qf([y("rowContainerHeightService")],t.prototype,"maxDivHeightScaler",void 0),Qf([Q],t.prototype,"postConstruct",null),t}(K),c6=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),hu=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},u6=function(r){c6(t,r);function t(e){var o=r.call(this)||this;return o.eContainer=e,o}return t.prototype.postConstruct=function(){var e=this;if(!pe(this.rangeService)){this.params={eElement:this.eContainer,onDragStart:this.rangeService.onDragStart.bind(this.rangeService),onDragStop:this.rangeService.onDragStop.bind(this.rangeService),onDragging:this.rangeService.onDragging.bind(this.rangeService)},this.addManagedPropertyListener("enableRangeSelection",function(n){var i=n.currentValue;if(i){e.enableFeature();return}e.disableFeature()}),this.addDestroyFunc(function(){return e.disableFeature()});var o=this.gridOptionsService.get("enableRangeSelection");o&&this.enableFeature()}},t.prototype.enableFeature=function(){this.dragService.addDragSource(this.params)},t.prototype.disableFeature=function(){this.dragService.removeDragSource(this.params)},hu([Le("rangeService")],t.prototype,"rangeService",void 0),hu([y("dragService")],t.prototype,"dragService",void 0),hu([Q],t.prototype,"postConstruct",null),t}(K),d6=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),fu=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},_h=function(r){d6(t,r);function t(e,o){o===void 0&&(o=!1);var n=r.call(this)||this;return n.callback=e,n.addSpacer=o,n}return t.prototype.postConstruct=function(){var e=this.setWidth.bind(this);this.addManagedPropertyListener("domLayout",e),this.addManagedListener(this.eventService,w.EVENT_DISPLAYED_COLUMNS_CHANGED,e),this.addManagedListener(this.eventService,w.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,e),this.addManagedListener(this.eventService,w.EVENT_LEFT_PINNED_WIDTH_CHANGED,e),this.addSpacer&&(this.addManagedListener(this.eventService,w.EVENT_RIGHT_PINNED_WIDTH_CHANGED,e),this.addManagedListener(this.eventService,w.EVENT_SCROLL_VISIBILITY_CHANGED,e),this.addManagedListener(this.eventService,w.EVENT_SCROLLBAR_WIDTH_CHANGED,e)),this.setWidth()},t.prototype.setWidth=function(){var e=this.columnModel,o=this.gridOptionsService.isDomLayout("print"),n=e.getBodyContainerWidth(),i=e.getDisplayedColumnsLeftWidth(),s=e.getDisplayedColumnsRightWidth(),a;if(o)a=n+i+s;else if(a=n,this.addSpacer){var l=this.gridOptionsService.get("enableRtl")?i:s;l===0&&this.scrollVisibleService.isVerticalScrollShowing()&&(a+=this.gridOptionsService.getScrollbarWidth())}this.callback(a)},fu([y("columnModel")],t.prototype,"columnModel",void 0),fu([y("scrollVisibleService")],t.prototype,"scrollVisibleService",void 0),fu([Q],t.prototype,"postConstruct",null),t}(K),p6=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),Nn=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},Da=function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var o=e.call(r),n,i=[],s;try{for(;(t===void 0||t-- >0)&&!(n=o.next()).done;)i.push(n.value)}catch(a){s={error:a}}finally{try{n&&!n.done&&(e=o.return)&&e.call(o)}finally{if(s)throw s.error}}return i},Ma=function(r,t,e){if(e||arguments.length===2)for(var o=0,n=t.length,i;o<n;o++)(i||!(o in t))&&(i||(i=Array.prototype.slice.call(t,0,o)),i[o]=t[o]);return r.concat(i||Array.prototype.slice.call(t))},j;(function(r){r.LEFT="left",r.RIGHT="right",r.CENTER="center",r.FULL_WIDTH="fullWidth",r.TOP_LEFT="topLeft",r.TOP_RIGHT="topRight",r.TOP_CENTER="topCenter",r.TOP_FULL_WIDTH="topFullWidth",r.STICKY_TOP_LEFT="stickyTopLeft",r.STICKY_TOP_RIGHT="stickyTopRight",r.STICKY_TOP_CENTER="stickyTopCenter",r.STICKY_TOP_FULL_WIDTH="stickyTopFullWidth",r.BOTTOM_LEFT="bottomLeft",r.BOTTOM_RIGHT="bottomRight",r.BOTTOM_CENTER="bottomCenter",r.BOTTOM_FULL_WIDTH="bottomFullWidth"})(j||(j={}));var ft;(function(r){r.LEFT="left",r.RIGHT="right",r.CENTER="center",r.FULL_WIDTH="fullWidth"})(ft||(ft={}));function h6(r){switch(r){case j.CENTER:case j.TOP_CENTER:case j.STICKY_TOP_CENTER:case j.BOTTOM_CENTER:return ft.CENTER;case j.LEFT:case j.TOP_LEFT:case j.STICKY_TOP_LEFT:case j.BOTTOM_LEFT:return ft.LEFT;case j.RIGHT:case j.TOP_RIGHT:case j.STICKY_TOP_RIGHT:case j.BOTTOM_RIGHT:return ft.RIGHT;case j.FULL_WIDTH:case j.TOP_FULL_WIDTH:case j.STICKY_TOP_FULL_WIDTH:case j.BOTTOM_FULL_WIDTH:return ft.FULL_WIDTH;default:throw Error("Invalid Row Container Type")}}var f6=Qn([[j.CENTER,"ag-center-cols-container"],[j.LEFT,"ag-pinned-left-cols-container"],[j.RIGHT,"ag-pinned-right-cols-container"],[j.FULL_WIDTH,"ag-full-width-container"],[j.TOP_CENTER,"ag-floating-top-container"],[j.TOP_LEFT,"ag-pinned-left-floating-top"],[j.TOP_RIGHT,"ag-pinned-right-floating-top"],[j.TOP_FULL_WIDTH,"ag-floating-top-full-width-container"],[j.STICKY_TOP_CENTER,"ag-sticky-top-container"],[j.STICKY_TOP_LEFT,"ag-pinned-left-sticky-top"],[j.STICKY_TOP_RIGHT,"ag-pinned-right-sticky-top"],[j.STICKY_TOP_FULL_WIDTH,"ag-sticky-top-full-width-container"],[j.BOTTOM_CENTER,"ag-floating-bottom-container"],[j.BOTTOM_LEFT,"ag-pinned-left-floating-bottom"],[j.BOTTOM_RIGHT,"ag-pinned-right-floating-bottom"],[j.BOTTOM_FULL_WIDTH,"ag-floating-bottom-full-width-container"]]),g6=Qn([[j.CENTER,"ag-center-cols-viewport"],[j.TOP_CENTER,"ag-floating-top-viewport"],[j.STICKY_TOP_CENTER,"ag-sticky-top-viewport"],[j.BOTTOM_CENTER,"ag-floating-bottom-viewport"]]),JC=function(r){p6(t,r);function t(e){var o=r.call(this)||this;return o.visible=!0,o.EMPTY_CTRLS=[],o.name=e,o.isFullWithContainer=o.name===j.TOP_FULL_WIDTH||o.name===j.STICKY_TOP_FULL_WIDTH||o.name===j.BOTTOM_FULL_WIDTH||o.name===j.FULL_WIDTH,o}return t.getRowContainerCssClasses=function(e){var o=f6.get(e),n=g6.get(e);return{container:o,viewport:n}},t.getPinned=function(e){switch(e){case j.BOTTOM_LEFT:case j.TOP_LEFT:case j.STICKY_TOP_LEFT:case j.LEFT:return"left";case j.BOTTOM_RIGHT:case j.TOP_RIGHT:case j.STICKY_TOP_RIGHT:case j.RIGHT:return"right";default:return null}},t.prototype.postConstruct=function(){var e=this;this.enableRtl=this.gridOptionsService.get("enableRtl"),this.forContainers([j.CENTER],function(){return e.viewportSizeFeature=e.createManagedBean(new n6(e))})},t.prototype.registerWithCtrlsService=function(){switch(this.name){case j.CENTER:this.ctrlsService.registerCenterRowContainerCtrl(this);break;case j.LEFT:this.ctrlsService.registerLeftRowContainerCtrl(this);break;case j.RIGHT:this.ctrlsService.registerRightRowContainerCtrl(this);break;case j.TOP_CENTER:this.ctrlsService.registerTopCenterRowContainerCtrl(this);break;case j.TOP_LEFT:this.ctrlsService.registerTopLeftRowContainerCon(this);break;case j.TOP_RIGHT:this.ctrlsService.registerTopRightRowContainerCtrl(this);break;case j.STICKY_TOP_CENTER:this.ctrlsService.registerStickyTopCenterRowContainerCtrl(this);break;case j.STICKY_TOP_LEFT:this.ctrlsService.registerStickyTopLeftRowContainerCon(this);break;case j.STICKY_TOP_RIGHT:this.ctrlsService.registerStickyTopRightRowContainerCtrl(this);break;case j.BOTTOM_CENTER:this.ctrlsService.registerBottomCenterRowContainerCtrl(this);break;case j.BOTTOM_LEFT:this.ctrlsService.registerBottomLeftRowContainerCtrl(this);break;case j.BOTTOM_RIGHT:this.ctrlsService.registerBottomRightRowContainerCtrl(this);break}},t.prototype.forContainers=function(e,o){e.indexOf(this.name)>=0&&o()},t.prototype.getContainerElement=function(){return this.eContainer},t.prototype.getViewportSizeFeature=function(){return this.viewportSizeFeature},t.prototype.setComp=function(e,o,n){var i=this;this.comp=e,this.eContainer=o,this.eViewport=n,this.createManagedBean(new t6(this.eContainer)),this.addPreventScrollWhileDragging(),this.listenOnDomOrder(),this.stopHScrollOnPinnedRows();var s=[j.TOP_CENTER,j.TOP_LEFT,j.TOP_RIGHT],a=[j.STICKY_TOP_CENTER,j.STICKY_TOP_LEFT,j.STICKY_TOP_RIGHT],l=[j.BOTTOM_CENTER,j.BOTTOM_LEFT,j.BOTTOM_RIGHT],c=[j.CENTER,j.LEFT,j.RIGHT],u=Ma(Ma(Ma(Ma([],Da(s),!1),Da(l),!1),Da(c),!1),Da(a),!1),d=[j.CENTER,j.LEFT,j.RIGHT,j.FULL_WIDTH],p=[j.CENTER,j.TOP_CENTER,j.STICKY_TOP_CENTER,j.BOTTOM_CENTER],h=[j.LEFT,j.BOTTOM_LEFT,j.TOP_LEFT,j.STICKY_TOP_LEFT],f=[j.RIGHT,j.BOTTOM_RIGHT,j.TOP_RIGHT,j.STICKY_TOP_RIGHT];this.forContainers(h,function(){i.pinnedWidthFeature=i.createManagedBean(new r6(i.eContainer)),i.addManagedListener(i.eventService,w.EVENT_LEFT_PINNED_WIDTH_CHANGED,function(){return i.onPinnedWidthChanged()})}),this.forContainers(f,function(){i.pinnedWidthFeature=i.createManagedBean(new a6(i.eContainer)),i.addManagedListener(i.eventService,w.EVENT_RIGHT_PINNED_WIDTH_CHANGED,function(){return i.onPinnedWidthChanged()})}),this.forContainers(d,function(){return i.createManagedBean(new ZC(i.eContainer,i.name===j.CENTER?n:void 0))}),this.forContainers(u,function(){return i.createManagedBean(new u6(i.eContainer))}),this.forContainers(p,function(){return i.createManagedBean(new _h(function(g){return i.comp.setContainerWidth("".concat(g,"px"))}))}),this.addListeners(),this.registerWithCtrlsService()},t.prototype.addListeners=function(){var e=this;this.addManagedListener(this.eventService,w.EVENT_DISPLAYED_COLUMNS_CHANGED,function(){return e.onDisplayedColumnsChanged()}),this.addManagedListener(this.eventService,w.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,function(){return e.onDisplayedColumnsWidthChanged()}),this.addManagedListener(this.eventService,w.EVENT_DISPLAYED_ROWS_CHANGED,function(o){return e.onDisplayedRowsChanged(o.afterScroll)}),this.onDisplayedColumnsChanged(),this.onDisplayedColumnsWidthChanged(),this.onDisplayedRowsChanged()},t.prototype.listenOnDomOrder=function(){var e=this,o=[j.STICKY_TOP_CENTER,j.STICKY_TOP_LEFT,j.STICKY_TOP_RIGHT,j.STICKY_TOP_FULL_WIDTH],n=o.indexOf(this.name)>=0;if(n){this.comp.setDomOrder(!0);return}var i=function(){var s=e.gridOptionsService.get("ensureDomOrder"),a=e.gridOptionsService.isDomLayout("print");e.comp.setDomOrder(s||a)};this.addManagedPropertyListener("domLayout",i),i()},t.prototype.stopHScrollOnPinnedRows=function(){var e=this;this.forContainers([j.TOP_CENTER,j.STICKY_TOP_CENTER,j.BOTTOM_CENTER],function(){var o=function(){return e.eViewport.scrollLeft=0};e.addManagedListener(e.eViewport,"scroll",o)})},t.prototype.onDisplayedColumnsChanged=function(){var e=this;this.forContainers([j.CENTER],function(){return e.onHorizontalViewportChanged()})},t.prototype.onDisplayedColumnsWidthChanged=function(){var e=this;this.forContainers([j.CENTER],function(){return e.onHorizontalViewportChanged()})},t.prototype.addPreventScrollWhileDragging=function(){var e=this,o=function(n){e.dragService.isDragging()&&n.cancelable&&n.preventDefault()};this.eContainer.addEventListener("touchmove",o,{passive:!1}),this.addDestroyFunc(function(){return e.eContainer.removeEventListener("touchmove",o)})},t.prototype.onHorizontalViewportChanged=function(e){e===void 0&&(e=!1);var o=this.getCenterWidth(),n=this.getCenterViewportScrollLeft();this.columnModel.setViewportPosition(o,n,e)},t.prototype.getCenterWidth=function(){return Qi(this.eViewport)},t.prototype.getCenterViewportScrollLeft=function(){return qs(this.eViewport,this.enableRtl)},t.prototype.registerViewportResizeListener=function(e){var o=this.resizeObserverService.observeResize(this.eViewport,e);this.addDestroyFunc(function(){return o()})},t.prototype.isViewportVisible=function(){return io(this.eViewport)},t.prototype.getViewportScrollLeft=function(){return qs(this.eViewport,this.enableRtl)},t.prototype.isHorizontalScrollShowing=function(){var e=this.gridOptionsService.get("alwaysShowHorizontalScroll");return e||fC(this.eViewport)},t.prototype.getViewportElement=function(){return this.eViewport},t.prototype.setContainerTranslateX=function(e){this.eContainer.style.transform="translateX(".concat(e,"px)")},t.prototype.getHScrollPosition=function(){var e={left:this.eViewport.scrollLeft,right:this.eViewport.scrollLeft+this.eViewport.offsetWidth};return e},t.prototype.setCenterViewportScrollLeft=function(e){Qs(this.eViewport,e,this.enableRtl)},t.prototype.isContainerVisible=function(){var e=t.getPinned(this.name);return!e||!!this.pinnedWidthFeature&&this.pinnedWidthFeature.getWidth()>0},t.prototype.onPinnedWidthChanged=function(){var e=this.isContainerVisible();this.visible!=e&&(this.visible=e,this.onDisplayedRowsChanged())},t.prototype.onDisplayedRowsChanged=function(e){var o=this;if(e===void 0&&(e=!1),this.visible){var n=this.gridOptionsService.isDomLayout("print"),i=this.gridOptionsService.get("embedFullWidthRows"),s=i||n,a=function(c){var u=c.isFullWidth(),d=o.isFullWithContainer?!s&&u:s||!u;return d},l=this.getRowCtrls().filter(a);this.comp.setRowCtrls(l,e)}else this.comp.setRowCtrls(this.EMPTY_CTRLS,!1)},t.prototype.getRowCtrls=function(){switch(this.name){case j.TOP_CENTER:case j.TOP_LEFT:case j.TOP_RIGHT:case j.TOP_FULL_WIDTH:return this.rowRenderer.getTopRowCtrls();case j.STICKY_TOP_CENTER:case j.STICKY_TOP_LEFT:case j.STICKY_TOP_RIGHT:case j.STICKY_TOP_FULL_WIDTH:return this.rowRenderer.getStickyTopRowCtrls();case j.BOTTOM_CENTER:case j.BOTTOM_LEFT:case j.BOTTOM_RIGHT:case j.BOTTOM_FULL_WIDTH:return this.rowRenderer.getBottomRowCtrls();default:return this.rowRenderer.getCentreRowCtrls()}},Nn([y("scrollVisibleService")],t.prototype,"scrollVisibleService",void 0),Nn([y("dragService")],t.prototype,"dragService",void 0),Nn([y("ctrlsService")],t.prototype,"ctrlsService",void 0),Nn([y("columnModel")],t.prototype,"columnModel",void 0),Nn([y("resizeObserverService")],t.prototype,"resizeObserverService",void 0),Nn([y("animationFrameService")],t.prototype,"animationFrameService",void 0),Nn([y("rowRenderer")],t.prototype,"rowRenderer",void 0),Nn([Q],t.prototype,"postConstruct",null),t}(K),v6=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),yn=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},m6=`<div class="ag-root ag-unselectable" role="treegrid">
        <ag-header-root ref="gridHeader"></ag-header-root>
        <div class="ag-floating-top" ref="eTop" role="presentation">
            <ag-row-container ref="topLeftContainer" name="`.concat(j.TOP_LEFT,`"></ag-row-container>
            <ag-row-container ref="topCenterContainer" name="`).concat(j.TOP_CENTER,`"></ag-row-container>
            <ag-row-container ref="topRightContainer" name="`).concat(j.TOP_RIGHT,`"></ag-row-container>
            <ag-row-container ref="topFullWidthContainer" name="`).concat(j.TOP_FULL_WIDTH,`"></ag-row-container>
        </div>
        <div class="ag-body" ref="eBody" role="presentation">
            <div class="ag-body-viewport" ref="eBodyViewport" role="presentation">
                <ag-row-container ref="leftContainer" name="`).concat(j.LEFT,`"></ag-row-container>
                <ag-row-container ref="centerContainer" name="`).concat(j.CENTER,`"></ag-row-container>
                <ag-row-container ref="rightContainer" name="`).concat(j.RIGHT,`"></ag-row-container>
                <ag-row-container ref="fullWidthContainer" name="`).concat(j.FULL_WIDTH,`"></ag-row-container>
            </div>
            <ag-fake-vertical-scroll></ag-fake-vertical-scroll>
        </div>
        <div class="ag-sticky-top" ref="eStickyTop" role="presentation">
            <ag-row-container ref="stickyTopLeftContainer" name="`).concat(j.STICKY_TOP_LEFT,`"></ag-row-container>
            <ag-row-container ref="stickyTopCenterContainer" name="`).concat(j.STICKY_TOP_CENTER,`"></ag-row-container>
            <ag-row-container ref="stickyTopRightContainer" name="`).concat(j.STICKY_TOP_RIGHT,`"></ag-row-container>
            <ag-row-container ref="stickyTopFullWidthContainer" name="`).concat(j.STICKY_TOP_FULL_WIDTH,`"></ag-row-container>
        </div>
        <div class="ag-floating-bottom" ref="eBottom" role="presentation">
            <ag-row-container ref="bottomLeftContainer" name="`).concat(j.BOTTOM_LEFT,`"></ag-row-container>
            <ag-row-container ref="bottomCenterContainer" name="`).concat(j.BOTTOM_CENTER,`"></ag-row-container>
            <ag-row-container ref="bottomRightContainer" name="`).concat(j.BOTTOM_RIGHT,`"></ag-row-container>
            <ag-row-container ref="bottomFullWidthContainer" name="`).concat(j.BOTTOM_FULL_WIDTH,`"></ag-row-container>
        </div>
        <ag-fake-horizontal-scroll></ag-fake-horizontal-scroll>
        <ag-overlay-wrapper></ag-overlay-wrapper>
    </div>`),y6=function(r){v6(t,r);function t(){return r.call(this,m6)||this}return t.prototype.init=function(){var e=this,o=function(i,s){var a="".concat(i,"px");s.style.minHeight=a,s.style.height=a},n={setRowAnimationCssOnBodyViewport:function(i,s){return e.setRowAnimationCssOnBodyViewport(i,s)},setColumnCount:function(i){return tC(e.getGui(),i)},setRowCount:function(i){return eC(e.getGui(),i)},setTopHeight:function(i){return o(i,e.eTop)},setBottomHeight:function(i){return o(i,e.eBottom)},setTopDisplay:function(i){return e.eTop.style.display=i},setBottomDisplay:function(i){return e.eBottom.style.display=i},setStickyTopHeight:function(i){return e.eStickyTop.style.height=i},setStickyTopTop:function(i){return e.eStickyTop.style.top=i},setStickyTopWidth:function(i){return e.eStickyTop.style.width=i},setColumnMovingCss:function(i,s){return e.addOrRemoveCssClass(i,s)},updateLayoutClasses:function(i,s){var a=[e.eBodyViewport.classList,e.eBody.classList];a.forEach(function(l){l.toggle(pt.AUTO_HEIGHT,s.autoHeight),l.toggle(pt.NORMAL,s.normal),l.toggle(pt.PRINT,s.print)}),e.addOrRemoveCssClass(pt.AUTO_HEIGHT,s.autoHeight),e.addOrRemoveCssClass(pt.NORMAL,s.normal),e.addOrRemoveCssClass(pt.PRINT,s.print)},setAlwaysVerticalScrollClass:function(i,s){return e.eBodyViewport.classList.toggle(QC,s)},registerBodyViewportResizeListener:function(i){var s=e.resizeObserverService.observeResize(e.eBodyViewport,i);e.addDestroyFunc(function(){return s()})},setPinnedTopBottomOverflowY:function(i){return e.eTop.style.overflowY=e.eBottom.style.overflowY=i},setCellSelectableCss:function(i,s){[e.eTop,e.eBodyViewport,e.eBottom].forEach(function(a){return a.classList.toggle(i,s)})},setBodyViewportWidth:function(i){return e.eBodyViewport.style.width=i}};this.ctrl=this.createManagedBean(new hN),this.ctrl.setComp(n,this.getGui(),this.eBodyViewport,this.eTop,this.eBottom,this.eStickyTop),(this.rangeService&&this.gridOptionsService.get("enableRangeSelection")||this.gridOptionsService.get("rowSelection")==="multiple")&&Jy(this.getGui(),!0)},t.prototype.setRowAnimationCssOnBodyViewport=function(e,o){var n=this.eBodyViewport.classList;n.toggle(Nr.ANIMATION_ON,o),n.toggle(Nr.ANIMATION_OFF,!o)},t.prototype.getFloatingTopBottom=function(){return[this.eTop,this.eBottom]},yn([y("resizeObserverService")],t.prototype,"resizeObserverService",void 0),yn([Le("rangeService")],t.prototype,"rangeService",void 0),yn([ee("eBodyViewport")],t.prototype,"eBodyViewport",void 0),yn([ee("eStickyTop")],t.prototype,"eStickyTop",void 0),yn([ee("eTop")],t.prototype,"eTop",void 0),yn([ee("eBottom")],t.prototype,"eBottom",void 0),yn([ee("gridHeader")],t.prototype,"headerRootComp",void 0),yn([ee("eBody")],t.prototype,"eBody",void 0),yn([Q],t.prototype,"init",null),t}(Re),C6=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),gu=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},w6=function(r){C6(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.postConstruct=function(){this.addManagedListener(this.eventService,w.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.addManagedListener(this.eventService,w.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,this.onDisplayedColumnsWidthChanged.bind(this))},t.prototype.onDisplayedColumnsChanged=function(){this.update()},t.prototype.onDisplayedColumnsWidthChanged=function(){this.update()},t.prototype.update=function(){this.updateImpl(),setTimeout(this.updateImpl.bind(this),500)},t.prototype.updateImpl=function(){var e=this.ctrlsService.getCenterRowContainerCtrl();if(e){var o={horizontalScrollShowing:e.isHorizontalScrollShowing(),verticalScrollShowing:this.isVerticalScrollShowing()};this.setScrollsVisible(o)}},t.prototype.setScrollsVisible=function(e){var o=this.horizontalScrollShowing!==e.horizontalScrollShowing||this.verticalScrollShowing!==e.verticalScrollShowing;if(o){this.horizontalScrollShowing=e.horizontalScrollShowing,this.verticalScrollShowing=e.verticalScrollShowing;var n={type:w.EVENT_SCROLL_VISIBILITY_CHANGED};this.eventService.dispatchEvent(n)}},t.prototype.isHorizontalScrollShowing=function(){return this.horizontalScrollShowing},t.prototype.isVerticalScrollShowing=function(){return this.verticalScrollShowing},gu([y("ctrlsService")],t.prototype,"ctrlsService",void 0),gu([Q],t.prototype,"postConstruct",null),t=gu([ne("scrollVisibleService")],t),t}(K),_6=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),Xf=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},S6=function(r){_6(t,r);function t(){var o=r!==null&&r.apply(this,arguments)||this;return o.gridInstanceId=e.gridInstanceSequence.next(),o}e=t,t.prototype.stampTopLevelGridCompWithGridInstance=function(o){o[e.GRID_DOM_KEY]=this.gridInstanceId},t.prototype.getRenderedCellForEvent=function(o){return _l(this.gridOptionsService,o.target,Pi.DOM_DATA_KEY_CELL_CTRL)},t.prototype.isEventFromThisGrid=function(o){var n=this.isElementInThisGrid(o.target);return n},t.prototype.isElementInThisGrid=function(o){for(var n=o;n;){var i=n[e.GRID_DOM_KEY];if(W(i)){var s=i===this.gridInstanceId;return s}n=n.parentElement}return!1},t.prototype.getCellPositionForEvent=function(o){var n=this.getRenderedCellForEvent(o);return n?n.getCellPosition():null},t.prototype.getNormalisedPosition=function(o){var n=this.gridOptionsService.isDomLayout("normal"),i=o,s,a;if(i.clientX!=null||i.clientY!=null?(s=i.clientX,a=i.clientY):(s=i.x,a=i.y),n){var l=this.ctrlsService.getGridBodyCtrl(),c=l.getScrollFeature().getVScrollPosition(),u=l.getScrollFeature().getHScrollPosition();s+=u.left,a+=c.top}return{x:s,y:a}};var e;return t.gridInstanceSequence=new xr,t.GRID_DOM_KEY="__ag_grid_instance",Xf([y("ctrlsService")],t.prototype,"ctrlsService",void 0),t=e=Xf([ne("mouseEventService")],t),t}(K),E6=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),Fl=function(){return Fl=Object.assign||function(r){for(var t,e=1,o=arguments.length;e<o;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},Fl.apply(this,arguments)},Kt=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},R6=function(r){E6(t,r);function t(){var e=r.call(this)||this;return e.onPageDown=md(e.onPageDown,100),e.onPageUp=md(e.onPageUp,100),e}return t.prototype.postConstruct=function(){var e=this;this.ctrlsService.whenReady(function(o){e.gridBodyCon=o.gridBodyCtrl})},t.prototype.handlePageScrollingKey=function(e,o){o===void 0&&(o=!1);var n=e.key,i=e.altKey,s=e.ctrlKey||e.metaKey,a=!!this.rangeService&&e.shiftKey,l=this.mouseEventService.getCellPositionForEvent(e),c=!1;switch(n){case N.PAGE_HOME:case N.PAGE_END:!s&&!i&&(this.onHomeOrEndKey(n),c=!0);break;case N.LEFT:case N.RIGHT:case N.UP:case N.DOWN:if(!l)return!1;s&&!i&&!a&&(this.onCtrlUpDownLeftRight(n,l),c=!0);break;case N.PAGE_DOWN:case N.PAGE_UP:!s&&!i&&(c=this.handlePageUpDown(n,l,o));break}return c&&e.preventDefault(),c},t.prototype.handlePageUpDown=function(e,o,n){return n&&(o=this.focusService.getFocusedCell()),o?(e===N.PAGE_UP?this.onPageUp(o):this.onPageDown(o),!0):!1},t.prototype.navigateTo=function(e){var o=e.scrollIndex,n=e.scrollType,i=e.scrollColumn,s=e.focusIndex,a=e.focusColumn;if(W(i)&&!i.isPinned()&&this.gridBodyCon.getScrollFeature().ensureColumnVisible(i),W(o)&&this.gridBodyCon.getScrollFeature().ensureIndexVisible(o,n),e.isAsync||this.gridBodyCon.getScrollFeature().ensureIndexVisible(s),this.focusService.setFocusedCell({rowIndex:s,column:a,rowPinned:null,forceBrowserFocus:!0}),this.rangeService){var l={rowIndex:s,rowPinned:null,column:a};this.rangeService.setRangeToCell(l)}},t.prototype.onPageDown=function(e){var o=this.ctrlsService.getGridBodyCtrl(),n=o.getScrollFeature().getVScrollPosition(),i=this.getViewportHeight(),s=this.paginationProxy.getPixelOffset(),a=n.top+i,l=this.paginationProxy.getRowIndexAtPixel(a+s);this.columnModel.isAutoRowHeightActive()?this.navigateToNextPageWithAutoHeight(e,l):this.navigateToNextPage(e,l)},t.prototype.onPageUp=function(e){var o=this.ctrlsService.getGridBodyCtrl(),n=o.getScrollFeature().getVScrollPosition(),i=this.paginationProxy.getPixelOffset(),s=n.top,a=this.paginationProxy.getRowIndexAtPixel(s+i);this.columnModel.isAutoRowHeightActive()?this.navigateToNextPageWithAutoHeight(e,a,!0):this.navigateToNextPage(e,a,!0)},t.prototype.navigateToNextPage=function(e,o,n){n===void 0&&(n=!1);var i=this.getViewportHeight(),s=this.paginationProxy.getPageFirstRow(),a=this.paginationProxy.getPageLastRow(),l=this.paginationProxy.getPixelOffset(),c=this.paginationProxy.getRow(e.rowIndex),u=n?(c==null?void 0:c.rowHeight)-i-l:i-l,d=(c==null?void 0:c.rowTop)+u,p=this.paginationProxy.getRowIndexAtPixel(d+l);if(p===e.rowIndex){var h=n?-1:1;o=p=e.rowIndex+h}var f;n?(f="bottom",p<s&&(p=s),o<s&&(o=s)):(f="top",p>a&&(p=a),o>a&&(o=a)),this.isRowTallerThanView(p)&&(o=p,f="top"),this.navigateTo({scrollIndex:o,scrollType:f,scrollColumn:null,focusIndex:p,focusColumn:e.column})},t.prototype.navigateToNextPageWithAutoHeight=function(e,o,n){var i=this;n===void 0&&(n=!1),this.navigateTo({scrollIndex:o,scrollType:n?"bottom":"top",scrollColumn:null,focusIndex:o,focusColumn:e.column}),setTimeout(function(){var s=i.getNextFocusIndexForAutoHeight(e,n);i.navigateTo({scrollIndex:o,scrollType:n?"bottom":"top",scrollColumn:null,focusIndex:s,focusColumn:e.column,isAsync:!0})},50)},t.prototype.getNextFocusIndexForAutoHeight=function(e,o){var n;o===void 0&&(o=!1);for(var i=o?-1:1,s=this.getViewportHeight(),a=this.paginationProxy.getPageLastRow(),l=0,c=e.rowIndex;c>=0&&c<=a;){var u=this.paginationProxy.getRow(c);if(u){var d=(n=u.rowHeight)!==null&&n!==void 0?n:0;if(l+d>s)break;l+=d}c+=i}return Math.max(0,Math.min(c,a))},t.prototype.getViewportHeight=function(){var e=this.ctrlsService.getGridBodyCtrl(),o=e.getScrollFeature().getVScrollPosition(),n=this.gridOptionsService.getScrollbarWidth(),i=o.bottom-o.top;return this.ctrlsService.getCenterRowContainerCtrl().isHorizontalScrollShowing()&&(i-=n),i},t.prototype.isRowTallerThanView=function(e){var o=this.paginationProxy.getRow(e);if(!o)return!1;var n=o.rowHeight;return typeof n!="number"?!1:n>this.getViewportHeight()},t.prototype.onCtrlUpDownLeftRight=function(e,o){var n=this.cellNavigationService.getNextCellToFocus(e,o,!0),i=n.rowIndex,s=n.column;this.navigateTo({scrollIndex:i,scrollType:null,scrollColumn:s,focusIndex:i,focusColumn:s})},t.prototype.onHomeOrEndKey=function(e){var o=e===N.PAGE_HOME,n=this.columnModel.getAllDisplayedColumns(),i=o?n[0]:Ge(n),s=o?this.paginationProxy.getPageFirstRow():this.paginationProxy.getPageLastRow();this.navigateTo({scrollIndex:s,scrollType:null,scrollColumn:i,focusIndex:s,focusColumn:i})},t.prototype.onTabKeyDown=function(e,o){var n=o.shiftKey,i=this.tabToNextCellCommon(e,n,o);if(i){o.preventDefault();return}if(n){var s=e.getRowPosition(),a=s.rowIndex,l=s.rowPinned,c=l?a===0:a===this.paginationProxy.getPageFirstRow();c&&(this.gridOptionsService.get("headerHeight")===0?this.focusService.focusNextGridCoreContainer(!0,!0):(o.preventDefault(),this.focusService.focusPreviousFromFirstCell(o)))}else e instanceof Pi&&e.focusCell(!0),this.focusService.focusNextGridCoreContainer(n)&&o.preventDefault()},t.prototype.tabToNextCell=function(e,o){var n=this.focusService.getFocusedCell();if(!n)return!1;var i=this.getCellByPosition(n);return!i&&(i=this.rowRenderer.getRowByPosition(n),!i||!i.isFullWidth())?!1:this.tabToNextCellCommon(i,e,o)},t.prototype.tabToNextCellCommon=function(e,o,n){var i=e.isEditing();if(!i&&e instanceof Pi){var s=e,a=s.getRowCtrl();a&&(i=a.isEditing())}var l;return i?this.gridOptionsService.get("editType")==="fullRow"?l=this.moveToNextEditingRow(e,o,n):l=this.moveToNextEditingCell(e,o,n):l=this.moveToNextCellNotEditing(e,o),l||!!this.focusService.getFocusedHeader()},t.prototype.moveToNextEditingCell=function(e,o,n){n===void 0&&(n=null);var i=e.getCellPosition();e.getGui().focus(),e.stopEditing();var s=this.findNextCellToFocusOn(i,o,!0);return s==null?!1:(s.startEditing(null,!0,n),s.focusCell(!1),!0)},t.prototype.moveToNextEditingRow=function(e,o,n){n===void 0&&(n=null);var i=e.getCellPosition(),s=this.findNextCellToFocusOn(i,o,!0);if(s==null)return!1;var a=s.getCellPosition(),l=this.isCellEditable(i),c=this.isCellEditable(a),u=a&&i.rowIndex===a.rowIndex&&i.rowPinned===a.rowPinned;if(l&&e.setFocusOutOnEditor(),!u){var d=e.getRowCtrl();d.stopEditing();var p=s.getRowCtrl();p.startRowEditing(void 0,void 0,n)}return c?(s.setFocusInOnEditor(),s.focusCell()):s.focusCell(!0),!0},t.prototype.moveToNextCellNotEditing=function(e,o){var n=this.columnModel.getAllDisplayedColumns(),i;e instanceof Ii?i=Fl(Fl({},e.getRowPosition()),{column:o?n[0]:Ge(n)}):i=e.getCellPosition();var s=this.findNextCellToFocusOn(i,o,!1);if(s instanceof Pi)s.focusCell(!0);else if(s)return this.tryToFocusFullWidthRow(s.getRowPosition(),o);return W(s)},t.prototype.findNextCellToFocusOn=function(e,o,n){for(var i=e;;){e!==i&&(e=i),o||(i=this.getLastCellOfColSpan(i)),i=this.cellNavigationService.getNextTabbedCell(i,o);var s=this.gridOptionsService.getCallback("tabToNextCell");if(W(s)){var a={backwards:o,editing:n,previousCellPosition:e,nextCellPosition:i||null},l=s(a);W(l)?(l.floating&&(Ee("tabToNextCellFunc return type should have attributes: rowIndex, rowPinned, column. However you had 'floating', maybe you meant 'rowPinned'?"),l.rowPinned=l.floating),i={rowIndex:l.rowIndex,column:l.column,rowPinned:l.rowPinned}):i=null}if(!i)return null;if(i.rowIndex<0){var c=this.headerNavigationService.getHeaderRowCount();return this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:c+i.rowIndex,column:i.column},fromCell:!0}),null}var u=this.gridOptionsService.get("editType")==="fullRow";if(n&&!u){var d=this.isCellEditable(i);if(!d)continue}this.ensureCellVisible(i);var p=this.getCellByPosition(i);if(!p){var h=this.rowRenderer.getRowByPosition(i);if(!h||!h.isFullWidth()||n)continue;return h}if(!p.isSuppressNavigable())return this.rangeService&&this.rangeService.setRangeToCell(i),p}},t.prototype.isCellEditable=function(e){var o=this.lookupRowNodeForCell(e);return o?e.column.isCellEditable(o):!1},t.prototype.getCellByPosition=function(e){var o=this.rowRenderer.getRowByPosition(e);return o?o.getCellCtrl(e.column):null},t.prototype.lookupRowNodeForCell=function(e){return e.rowPinned==="top"?this.pinnedRowModel.getPinnedTopRow(e.rowIndex):e.rowPinned==="bottom"?this.pinnedRowModel.getPinnedBottomRow(e.rowIndex):this.paginationProxy.getRow(e.rowIndex)},t.prototype.navigateToNextCell=function(e,o,n,i){for(var s=n,a=!1;s&&(s===n||!this.isValidNavigateCell(s));)this.gridOptionsService.get("enableRtl")?o===N.LEFT&&(s=this.getLastCellOfColSpan(s)):o===N.RIGHT&&(s=this.getLastCellOfColSpan(s)),s=this.cellNavigationService.getNextCellToFocus(o,s),a=pe(s);if(a&&e&&e.key===N.UP&&(s={rowIndex:-1,rowPinned:null,column:n.column}),i){var l=this.gridOptionsService.getCallback("navigateToNextCell");if(W(l)){var c={key:o,previousCellPosition:n,nextCellPosition:s||null,event:e},u=l(c);W(u)?(u.floating&&(Ee("tabToNextCellFunc return type should have attributes: rowIndex, rowPinned, column. However you had 'floating', maybe you meant 'rowPinned'?"),u.rowPinned=u.floating),s={rowPinned:u.rowPinned,rowIndex:u.rowIndex,column:u.column}):s=null}}if(s){if(s.rowIndex<0){var d=this.headerNavigationService.getHeaderRowCount();this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:d+s.rowIndex,column:n.column},event:e||void 0,fromCell:!0});return}var p=this.getNormalisedPosition(s);p?this.focusPosition(p):this.tryToFocusFullWidthRow(s)}},t.prototype.getNormalisedPosition=function(e){this.ensureCellVisible(e);var o=this.getCellByPosition(e);return o?(e=o.getCellPosition(),this.ensureCellVisible(e),e):null},t.prototype.tryToFocusFullWidthRow=function(e,o){o===void 0&&(o=!1);var n=this.columnModel.getAllDisplayedColumns(),i=this.rowRenderer.getRowByPosition(e);if(!i||!i.isFullWidth())return!1;var s=this.focusService.getFocusedCell(),a={rowIndex:e.rowIndex,rowPinned:e.rowPinned,column:e.column||(o?Ge(n):n[0])};this.focusPosition(a);var l=s!=null?this.rowPositionUtils.before(a,s):!1,c={type:w.EVENT_FULL_WIDTH_ROW_FOCUSED,rowIndex:a.rowIndex,rowPinned:a.rowPinned,column:a.column,isFullWidthCell:!0,floating:a.rowPinned,fromBelow:l};return this.eventService.dispatchEvent(c),!0},t.prototype.focusPosition=function(e){this.focusService.setFocusedCell({rowIndex:e.rowIndex,column:e.column,rowPinned:e.rowPinned,forceBrowserFocus:!0}),this.rangeService&&this.rangeService.setRangeToCell(e)},t.prototype.isValidNavigateCell=function(e){var o=this.rowPositionUtils.getRowNode(e);return!!o},t.prototype.getLastCellOfColSpan=function(e){var o=this.getCellByPosition(e);if(!o)return e;var n=o.getColSpanningList();return n.length===1?e:{rowIndex:e.rowIndex,column:Ge(n),rowPinned:e.rowPinned}},t.prototype.ensureCellVisible=function(e){var o=this.gridOptionsService.isGroupRowsSticky(),n=this.rowModel.getRow(e.rowIndex),i=o&&(n==null?void 0:n.sticky);!i&&pe(e.rowPinned)&&this.gridBodyCon.getScrollFeature().ensureIndexVisible(e.rowIndex),e.column.isPinned()||this.gridBodyCon.getScrollFeature().ensureColumnVisible(e.column)},Kt([y("mouseEventService")],t.prototype,"mouseEventService",void 0),Kt([y("paginationProxy")],t.prototype,"paginationProxy",void 0),Kt([y("focusService")],t.prototype,"focusService",void 0),Kt([Le("rangeService")],t.prototype,"rangeService",void 0),Kt([y("columnModel")],t.prototype,"columnModel",void 0),Kt([y("rowModel")],t.prototype,"rowModel",void 0),Kt([y("ctrlsService")],t.prototype,"ctrlsService",void 0),Kt([y("rowRenderer")],t.prototype,"rowRenderer",void 0),Kt([y("headerNavigationService")],t.prototype,"headerNavigationService",void 0),Kt([y("rowPositionUtils")],t.prototype,"rowPositionUtils",void 0),Kt([y("cellNavigationService")],t.prototype,"cellNavigationService",void 0),Kt([y("pinnedRowModel")],t.prototype,"pinnedRowModel",void 0),Kt([Q],t.prototype,"postConstruct",null),t=Kt([ne("navigationService")],t),t}(K),T6=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),b6=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},A6=function(r){T6(t,r);function t(e){var o=r.call(this,'<div class="ag-popup-editor" tabindex="-1"/>')||this;return o.params=e,o}return t.prototype.postConstruct=function(){this.gridOptionsService.setDomData(this.getGui(),t.DOM_KEY_POPUP_EDITOR_WRAPPER,!0),this.addKeyDownListener()},t.prototype.addKeyDownListener=function(){var e=this,o=this.getGui(),n=this.params,i=function(s){Tl(e.gridOptionsService,s,n.node,n.column,!0)||n.onKeyDown(s)};this.addManagedListener(o,"keydown",i)},t.DOM_KEY_POPUP_EDITOR_WRAPPER="popupEditorWrapper",b6([Q],t.prototype,"postConstruct",null),t}(Zi),O6=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),P6=function(r){O6(t,r);function t(e,o,n,i,s){var a=r.call(this)||this;a.rendererVersion=0,a.editorVersion=0,a.beans=e,a.column=o.getColumn(),a.rowNode=o.getRowNode(),a.rowCtrl=o.getRowCtrl(),a.eRow=i,a.cellCtrl=o,a.setTemplate('<div comp-id="'.concat(a.getCompId(),'"/>'));var l=a.getGui();a.forceWrapper=o.isForceWrapper(),a.refreshWrapper(!1);var c=function(p,h){h!=null&&h!=""?l.setAttribute(p,h):l.removeAttribute(p)};yt(l,o.getCellAriaRole()),c("col-id",o.getColumnIdSanitised());var u=o.getTabIndex();u!==void 0&&c("tabindex",u.toString());var d={addOrRemoveCssClass:function(p,h){return a.addOrRemoveCssClass(p,h)},setUserStyles:function(p){return lh(l,p)},getFocusableElement:function(){return a.getFocusableElement()},setIncludeSelection:function(p){return a.includeSelection=p},setIncludeRowDrag:function(p){return a.includeRowDrag=p},setIncludeDndSource:function(p){return a.includeDndSource=p},setRenderDetails:function(p,h,f){return a.setRenderDetails(p,h,f)},setEditDetails:function(p,h,f){return a.setEditDetails(p,h,f)},getCellEditor:function(){return a.cellEditor||null},getCellRenderer:function(){return a.cellRenderer||null},getParentOfValue:function(){return a.getParentOfValue()}};return o.setComp(d,a.getGui(),a.eCellWrapper,n,s),a}return t.prototype.getParentOfValue=function(){return this.eCellValue?this.eCellValue:this.eCellWrapper?this.eCellWrapper:this.getGui()},t.prototype.setRenderDetails=function(e,o,n){var i=this.cellEditor&&!this.cellEditorPopupWrapper;if(!i){this.firstRender=this.firstRender==null;var s=this.refreshWrapper(!1);if(this.refreshEditStyles(!1),e){var a=n||s,l=a?!1:this.refreshCellRenderer(e);l||(this.destroyRenderer(),this.createCellRendererInstance(e))}else this.destroyRenderer(),this.insertValueWithoutCellRenderer(o)}},t.prototype.setEditDetails=function(e,o,n){e?this.createCellEditorInstance(e,o,n):this.destroyEditor()},t.prototype.removeControls=function(){this.checkboxSelectionComp=this.beans.context.destroyBean(this.checkboxSelectionComp),this.dndSourceComp=this.beans.context.destroyBean(this.dndSourceComp),this.rowDraggingComp=this.beans.context.destroyBean(this.rowDraggingComp)},t.prototype.refreshWrapper=function(e){var o=this.includeRowDrag||this.includeDndSource||this.includeSelection,n=o||this.forceWrapper,i=n&&this.eCellWrapper==null;i&&(this.eCellWrapper=Ot('<div class="ag-cell-wrapper" role="presentation"></div>'),this.getGui().appendChild(this.eCellWrapper));var s=!n&&this.eCellWrapper!=null;s&&(bn(this.eCellWrapper),this.eCellWrapper=void 0),this.addOrRemoveCssClass("ag-cell-value",!n);var a=!e&&n,l=a&&this.eCellValue==null;l&&(this.eCellValue=Ot('<span class="ag-cell-value" role="presentation"></span>'),this.eCellWrapper.appendChild(this.eCellValue));var c=!a&&this.eCellValue!=null;c&&(bn(this.eCellValue),this.eCellValue=void 0);var u=i||s||l||c;return u&&this.removeControls(),e||o&&this.addControls(),u},t.prototype.addControls=function(){this.includeRowDrag&&this.rowDraggingComp==null&&(this.rowDraggingComp=this.cellCtrl.createRowDragComp(),this.rowDraggingComp&&this.eCellWrapper.insertBefore(this.rowDraggingComp.getGui(),this.eCellValue)),this.includeDndSource&&this.dndSourceComp==null&&(this.dndSourceComp=this.cellCtrl.createDndSource(),this.eCellWrapper.insertBefore(this.dndSourceComp.getGui(),this.eCellValue)),this.includeSelection&&this.checkboxSelectionComp==null&&(this.checkboxSelectionComp=this.cellCtrl.createSelectionCheckbox(),this.eCellWrapper.insertBefore(this.checkboxSelectionComp.getGui(),this.eCellValue))},t.prototype.createCellEditorInstance=function(e,o,n){var i=this,s=this.editorVersion,a=e.newAgStackInstance();if(a){var l=e.params;a.then(function(u){return i.afterCellEditorCreated(s,u,l,o,n)});var c=pe(this.cellEditor);c&&l.cellStartedEdit&&this.cellCtrl.focusCell(!0)}},t.prototype.insertValueWithoutCellRenderer=function(e){var o=this.getParentOfValue();Et(o);var n=e!=null?ht(e):null;n!=null&&(o.innerHTML=n)},t.prototype.destroyEditorAndRenderer=function(){this.destroyRenderer(),this.destroyEditor()},t.prototype.destroyRenderer=function(){var e=this.beans.context;this.cellRenderer=e.destroyBean(this.cellRenderer),bn(this.cellRendererGui),this.cellRendererGui=null,this.rendererVersion++},t.prototype.destroyEditor=function(){var e=this.beans.context;this.hideEditorPopup&&this.hideEditorPopup(),this.hideEditorPopup=void 0,this.cellEditor=e.destroyBean(this.cellEditor),this.cellEditorPopupWrapper=e.destroyBean(this.cellEditorPopupWrapper),bn(this.cellEditorGui),this.cellEditorGui=null,this.editorVersion++},t.prototype.refreshCellRenderer=function(e){if(this.cellRenderer==null||this.cellRenderer.refresh==null||this.cellRendererClass!==e.componentClass)return!1;var o=this.cellRenderer.refresh(e.params);return o===!0||o===void 0},t.prototype.createCellRendererInstance=function(e){var o=this,n=this.beans.gridOptionsService.get("suppressAnimationFrame"),i=!n,s=this.rendererVersion,a=e.componentClass,l=function(){var c=o.rendererVersion!==s||!o.isAlive();if(!c){var u=e.newAgStackInstance(),d=o.afterCellRendererCreated.bind(o,s,a);u&&u.then(d)}};i&&this.firstRender?this.beans.animationFrameService.createTask(l,this.rowNode.rowIndex,"createTasksP2"):l()},t.prototype.getCtrl=function(){return this.cellCtrl},t.prototype.getRowCtrl=function(){return this.rowCtrl},t.prototype.getCellRenderer=function(){return this.cellRenderer},t.prototype.getCellEditor=function(){return this.cellEditor},t.prototype.afterCellRendererCreated=function(e,o,n){var i=!this.isAlive()||e!==this.rendererVersion;if(i){this.beans.context.destroyBean(n);return}if(this.cellRenderer=n,this.cellRendererClass=o,this.cellRendererGui=this.cellRenderer.getGui(),this.cellRendererGui!=null){var s=this.getParentOfValue();Et(s),s.appendChild(this.cellRendererGui)}},t.prototype.afterCellEditorCreated=function(e,o,n,i,s){var a=e!==this.editorVersion;if(a){this.beans.context.destroyBean(o);return}var l=o.isCancelBeforeStart&&o.isCancelBeforeStart();if(l){this.beans.context.destroyBean(o),this.cellCtrl.stopEditing(!0);return}if(!o.getGui){console.warn("AG Grid: cellEditor for column ".concat(this.column.getId()," is missing getGui() method")),this.beans.context.destroyBean(o);return}this.cellEditor=o,this.cellEditorGui=o.getGui();var c=i||o.isPopup!==void 0&&o.isPopup();c?this.addPopupCellEditor(n,s):this.addInCellEditor(),this.refreshEditStyles(!0,c),o.afterGuiAttached&&o.afterGuiAttached()},t.prototype.refreshEditStyles=function(e,o){var n;this.addOrRemoveCssClass("ag-cell-inline-editing",e&&!o),this.addOrRemoveCssClass("ag-cell-popup-editing",e&&!!o),this.addOrRemoveCssClass("ag-cell-not-inline-editing",!e||!!o),(n=this.rowCtrl)===null||n===void 0||n.setInlineEditingCss(e)},t.prototype.addInCellEditor=function(){var e=this.getGui(),o=this.beans.gridOptionsService.getDocument();if(e.contains(o.activeElement)&&e.focus(),this.destroyRenderer(),this.refreshWrapper(!0),this.clearParentOfValue(),this.cellEditorGui){var n=this.getParentOfValue();n.appendChild(this.cellEditorGui)}},t.prototype.addPopupCellEditor=function(e,o){var n=this;this.beans.gridOptionsService.get("editType")==="fullRow"&&console.warn("AG Grid: popup cellEditor does not work with fullRowEdit - you cannot use them both - either turn off fullRowEdit, or stop using popup editors.");var i=this.cellEditor;this.cellEditorPopupWrapper=this.beans.context.createBean(new A6(e));var s=this.cellEditorPopupWrapper.getGui();this.cellEditorGui&&s.appendChild(this.cellEditorGui);var a=this.beans.popupService,l=this.beans.gridOptionsService.get("stopEditingWhenCellsLoseFocus"),c=o??(i.getPopupPosition?i.getPopupPosition():"over"),u=this.beans.gridOptionsService.get("enableRtl"),d={ePopup:s,column:this.column,rowNode:this.rowNode,type:"popupCellEditor",eventSource:this.getGui(),position:c,alignSide:u?"right":"left",keepWithinBounds:!0},p=a.positionPopupByComponent.bind(a,d),h=this.beans.localeService.getLocaleTextFunc(),f=a.addPopup({modal:l,eChild:s,closeOnEsc:!0,closedCallback:function(){n.cellCtrl.onPopupEditorClosed()},anchorToElement:this.getGui(),positionCallback:p,ariaLabel:h("ariaLabelCellEditor","Cell Editor")});f&&(this.hideEditorPopup=f.hideFunc)},t.prototype.detach=function(){this.eRow.removeChild(this.getGui())},t.prototype.destroy=function(){this.cellCtrl.stopEditing(),this.destroyEditorAndRenderer(),this.removeControls(),r.prototype.destroy.call(this)},t.prototype.clearParentOfValue=function(){var e=this.getGui(),o=this.beans.gridOptionsService.getDocument();e.contains(o.activeElement)&&hc()&&e.focus({preventScroll:!0}),Et(this.getParentOfValue())},t}(Re),I6=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),D6=function(r){I6(t,r);function t(e,o,n){var i=r.call(this)||this;i.cellComps={},i.beans=o,i.rowCtrl=e,i.setTemplate('<div comp-id="'.concat(i.getCompId(),'" style="').concat(i.getInitialStyle(n),'"/>'));var s=i.getGui(),a=s.style;i.domOrder=i.rowCtrl.getDomOrder(),yt(s,"row");var l=i.rowCtrl.getTabIndex();l!=null&&s.setAttribute("tabindex",l.toString());var c={setDomOrder:function(u){return i.domOrder=u},setCellCtrls:function(u){return i.setCellCtrls(u)},showFullWidth:function(u){return i.showFullWidth(u)},getFullWidthCellRenderer:function(){return i.getFullWidthCellRenderer()},addOrRemoveCssClass:function(u,d){return i.addOrRemoveCssClass(u,d)},setUserStyles:function(u){return lh(s,u)},setTop:function(u){return a.top=u},setTransform:function(u){return a.transform=u},setRowIndex:function(u){return s.setAttribute("row-index",u)},setRowId:function(u){return s.setAttribute("row-id",u)},setRowBusinessKey:function(u){return s.setAttribute("row-business-key",u)}};return e.setComp(c,i.getGui(),n),i.addDestroyFunc(function(){e.unsetComp(n)}),i}return t.prototype.getInitialStyle=function(e){var o=this.rowCtrl.getInitialTransform(e),n=this.rowCtrl.getInitialRowTop(e);return o?"transform: ".concat(o):"top: ".concat(n)},t.prototype.showFullWidth=function(e){var o=this,n=function(s){if(o.isAlive()){var a=s.getGui();o.getGui().appendChild(a),o.rowCtrl.setupDetailRowAutoHeight(a),o.setFullWidthRowComp(s)}else o.beans.context.destroyBean(s)},i=e.newAgStackInstance();i&&i.then(n)},t.prototype.setCellCtrls=function(e){var o=this,n=Object.assign({},this.cellComps);e.forEach(function(s){var a=s.getInstanceId(),l=o.cellComps[a];l==null?o.newCellComp(s):n[a]=null});var i=ii(n).filter(function(s){return s!=null});this.destroyCells(i),this.ensureDomOrder(e)},t.prototype.ensureDomOrder=function(e){var o=this;if(this.domOrder){var n=[];e.forEach(function(i){var s=o.cellComps[i.getInstanceId()];s&&n.push(s.getGui())}),ah(this.getGui(),n)}},t.prototype.newCellComp=function(e){var o=new P6(this.beans,e,this.rowCtrl.isPrintLayout(),this.getGui(),this.rowCtrl.isEditing());this.cellComps[e.getInstanceId()]=o,this.getGui().appendChild(o.getGui())},t.prototype.destroy=function(){r.prototype.destroy.call(this),this.destroyAllCells()},t.prototype.destroyAllCells=function(){var e=ii(this.cellComps).filter(function(o){return o!=null});this.destroyCells(e)},t.prototype.setFullWidthRowComp=function(e){var o=this;this.fullWidthCellRenderer&&console.error("AG Grid - should not be setting fullWidthRowComponent twice"),this.fullWidthCellRenderer=e,this.addDestroyFunc(function(){o.fullWidthCellRenderer=o.beans.context.destroyBean(o.fullWidthCellRenderer)})},t.prototype.getFullWidthCellRenderer=function(){return this.fullWidthCellRenderer},t.prototype.destroyCells=function(e){var o=this;e.forEach(function(n){if(n){var i=n.getCtrl().getInstanceId();o.cellComps[i]===n&&(n.detach(),n.destroy(),o.cellComps[i]=null)}})},t}(Re),M6=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),Md=function(){return Md=Object.assign||function(r){for(var t,e=1,o=arguments.length;e<o;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},Md.apply(this,arguments)},rs=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i};function L6(){var r=Re.elementGettingCreated.getAttribute("name"),t=JC.getRowContainerCssClasses(r),e,o=r===j.CENTER||r===j.TOP_CENTER||r===j.STICKY_TOP_CENTER||r===j.BOTTOM_CENTER;return o?e='<div class="'.concat(t.viewport,`" ref="eViewport" role="presentation">
                <div class="`).concat(t.container,`" ref="eContainer"></div>
            </div>`):e='<div class="'.concat(t.container,'" ref="eContainer"></div>'),e}var x6=function(r){M6(t,r);function t(){var e=r.call(this,L6())||this;return e.rowComps={},e.name=Re.elementGettingCreated.getAttribute("name"),e.type=h6(e.name),e}return t.prototype.postConstruct=function(){var e=this,o={setViewportHeight:function(i){return e.eViewport.style.height=i},setRowCtrls:function(i){return e.setRowCtrls(i)},setDomOrder:function(i){e.domOrder=i},setContainerWidth:function(i){return e.eContainer.style.width=i}},n=this.createManagedBean(new JC(this.name));n.setComp(o,this.eContainer,this.eViewport)},t.prototype.preDestroy=function(){this.setRowCtrls([])},t.prototype.setRowCtrls=function(e){var o=this,n=Md({},this.rowComps);this.rowComps={},this.lastPlacedElement=null;var i=function(s){var a=s.getInstanceId(),l=n[a];if(l)o.rowComps[a]=l,delete n[a],o.ensureDomOrder(l.getGui());else{if(!s.getRowNode().displayed)return;var c=new D6(s,o.beans,o.type);o.rowComps[a]=c,o.appendRow(c.getGui())}};e.forEach(i),ii(n).forEach(function(s){o.eContainer.removeChild(s.getGui()),s.destroy()}),yt(this.eContainer,e.length?"rowgroup":"presentation")},t.prototype.appendRow=function(e){this.domOrder?hC(this.eContainer,e,this.lastPlacedElement):this.eContainer.appendChild(e),this.lastPlacedElement=e},t.prototype.ensureDomOrder=function(e){this.domOrder&&(sh(this.eContainer,e,this.lastPlacedElement),this.lastPlacedElement=e)},rs([y("beans")],t.prototype,"beans",void 0),rs([ee("eViewport")],t.prototype,"eViewport",void 0),rs([ee("eContainer")],t.prototype,"eContainer",void 0),rs([Q],t.prototype,"postConstruct",null),rs([zt],t.prototype,"preDestroy",null),t}(Re),Zf=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},F6=function(){function r(t){this.columnsToAggregate=[],this.columnsToGroup=[],this.columnsToPivot=[],this.pinned=t}return r.prototype.onDragEnter=function(t){var e=this;if(this.clearColumnsList(),!this.gridOptionsService.get("functionsReadOnly")){var o=t.dragItem.columns;o&&o.forEach(function(n){n.isPrimary()&&(n.isAnyFunctionActive()||(n.isAllowValue()?e.columnsToAggregate.push(n):n.isAllowRowGroup()?e.columnsToGroup.push(n):n.isAllowPivot()&&e.columnsToPivot.push(n)))})}},r.prototype.getIconName=function(){var t=this.columnsToAggregate.length+this.columnsToGroup.length+this.columnsToPivot.length;return t>0?this.pinned?St.ICON_PINNED:St.ICON_MOVE:null},r.prototype.onDragLeave=function(t){this.clearColumnsList()},r.prototype.clearColumnsList=function(){this.columnsToAggregate.length=0,this.columnsToGroup.length=0,this.columnsToPivot.length=0},r.prototype.onDragging=function(t){},r.prototype.onDragStop=function(t){this.columnsToAggregate.length>0&&this.columnModel.addValueColumns(this.columnsToAggregate,"toolPanelDragAndDrop"),this.columnsToGroup.length>0&&this.columnModel.addRowGroupColumns(this.columnsToGroup,"toolPanelDragAndDrop"),this.columnsToPivot.length>0&&this.columnModel.addPivotColumns(this.columnsToPivot,"toolPanelDragAndDrop")},Zf([y("columnModel")],r.prototype,"columnModel",void 0),Zf([y("gridOptionsService")],r.prototype,"gridOptionsService",void 0),r}(),N6=function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var o=e.call(r),n,i=[],s;try{for(;(t===void 0||t-- >0)&&!(n=o.next()).done;)i.push(n.value)}catch(a){s={error:a}}finally{try{n&&!n.done&&(e=o.return)&&e.call(o)}finally{if(s)throw s.error}}return i},Di=function(){function r(){}return r.attemptMoveColumns=function(t){var e=t.isFromHeader,o=t.hDirection,n=t.xPosition,i=t.fromEnter,s=t.fakeEvent,a=t.pinned,l=t.gridOptionsService,c=t.columnModel,u=o===Bt.Left,d=o===Bt.Right,p=t.allMovingColumns;if(e){var h=[];p.forEach(function(M){for(var z,V=null,q=M.getParent();q!=null&&q.getDisplayedLeafColumns().length===1;)V=q,q=q.getParent();if(V!=null){var $=!!(!((z=V.getColGroupDef())===null||z===void 0)&&z.marryChildren),ce=$?V.getProvidedColumnGroup().getLeafColumns():V.getLeafColumns();ce.forEach(function(me){h.includes(me)||h.push(me)})}else h.includes(M)||h.push(M)}),p=h}var f=p.slice();c.sortColumnsLikeGridColumns(f);var g=this.calculateValidMoves({movingCols:f,draggingRight:d,xPosition:n,pinned:a,gridOptionsService:l,columnModel:c}),_=this.calculateOldIndex(f,c);if(g.length!==0){var C=g[0],E=_!==null&&!i;if(e&&(E=_!==null),!(E&&!s&&(u&&C>=_||d&&C<=_))){for(var T=c.getAllDisplayedColumns(),P=[],A=null,b=0;b<g.length;b++){var I=g[b],F=c.getProposedColumnOrder(f,I);if(c.doesOrderPassRules(F)){var U=F.filter(function(M){return T.includes(M)});if(A===null)A=U;else if(!Tn(U,A))break;var k=this.groupFragCount(F);P.push({move:I,fragCount:k})}}if(P.length!==0)return P.sort(function(M,z){return M.fragCount-z.fragCount}),this.moveColumns(p,P[0].move,"uiColumnMoved",!1,c)}}},r.moveColumns=function(t,e,o,n,i){return i.moveColumns(t,e,o,n),n?null:{columns:t,toIndex:e}},r.calculateOldIndex=function(t,e){var o=e.getAllGridColumns(),n=xy(t.map(function(c){return o.indexOf(c)})),i=n[0],s=Ge(n),a=s-i,l=a!==n.length-1;return l?null:i},r.groupFragCount=function(t){function e(s){for(var a=[],l=s.getOriginalParent();l!=null;)a.push(l),l=l.getOriginalParent();return a}for(var o=0,n=function(s){var a,l=e(t[s]),c=e(t[s+1]);a=N6(l.length>c.length?[l,c]:[c,l],2),l=a[0],c=a[1],l.forEach(function(u){c.indexOf(u)===-1&&o++})},i=0;i<t.length-1;i++)n(i);return o},r.calculateValidMoves=function(t){var e=t.movingCols,o=t.draggingRight,n=t.xPosition,i=t.pinned,s=t.gridOptionsService,a=t.columnModel,l=s.get("suppressMovableColumns")||e.some(function(M){return M.getColDef().suppressMovable});if(l)return[];var c=a.getDisplayedColumns(i),u=a.getAllGridColumns(),d=c.filter(function(M){return To(e,M)}),p=c.filter(function(M){return!To(e,M)}),h=u.filter(function(M){return!To(e,M)}),f=0,g=n;if(o){var _=0;d.forEach(function(M){return _+=M.getActualWidth()}),g-=_}if(g>0){for(var C=0;C<p.length;C++){var E=p[C];if(g-=E.getActualWidth(),g<0)break;f++}o&&f++}var T;if(f>0){var P=p[f-1];T=h.indexOf(P)+1}else T=h.indexOf(p[0]),T===-1&&(T=0);var A=[T],b=function(M,z){return M-z};if(o){for(var I=T+1,F=u.length-1;I<=F;)A.push(I),I++;A.sort(b)}else{for(var I=T,F=u.length-1,U=u[I];I<=F&&c.indexOf(U)<0;)I++,A.push(I),U=u[I];I=T-1;for(var k=0;I>=k;)A.push(I),I--;A.sort(b).reverse()}return A},r.normaliseX=function(t,e,o,n,i){var s=i.getHeaderRowContainerCtrl(e).getViewport();if(o&&(t-=s.getBoundingClientRect().left),n.get("enableRtl")){var a=s.clientWidth;t=a-t}return e==null&&(t+=i.getCenterRowContainerCtrl().getCenterViewportScrollLeft()),t},r}(),ss=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},G6=function(){function r(t,e){this.needToMoveLeft=!1,this.needToMoveRight=!1,this.lastMovedInfo=null,this.pinned=t,this.eContainer=e,this.centerContainer=!W(t)}return r.prototype.init=function(){var t=this;this.ctrlsService.whenReady(function(){t.gridBodyCon=t.ctrlsService.getGridBodyCtrl()})},r.prototype.getIconName=function(){return this.pinned?St.ICON_PINNED:St.ICON_MOVE},r.prototype.onDragEnter=function(t){var e=t.dragItem.columns,o=t.dragSource.type===no.ToolPanel;if(o)this.setColumnsVisible(e,!0,"uiColumnDragged");else{var n=t.dragItem.visibleState,i=(e||[]).filter(function(s){return n[s.getId()]});this.setColumnsVisible(i,!0,"uiColumnDragged")}this.setColumnsPinned(e,this.pinned,"uiColumnDragged"),this.onDragging(t,!0,!0)},r.prototype.onDragLeave=function(){this.ensureIntervalCleared(),this.lastMovedInfo=null},r.prototype.setColumnsVisible=function(t,e,o){if(o===void 0&&(o="api"),t){var n=t.filter(function(i){return!i.getColDef().lockVisible});this.columnModel.setColumnsVisible(n,e,o)}},r.prototype.setColumnsPinned=function(t,e,o){if(o===void 0&&(o="api"),t){var n=t.filter(function(i){return!i.getColDef().lockPinned});this.columnModel.setColumnsPinned(n,e,o)}},r.prototype.onDragStop=function(){this.onDragging(this.lastDraggingEvent,!1,!0,!0),this.ensureIntervalCleared(),this.lastMovedInfo=null},r.prototype.checkCenterForScrolling=function(t){if(this.centerContainer){var e=this.ctrlsService.getCenterRowContainerCtrl().getCenterViewportScrollLeft(),o=e+this.ctrlsService.getCenterRowContainerCtrl().getCenterWidth();this.gridOptionsService.get("enableRtl")?(this.needToMoveRight=t<e+50,this.needToMoveLeft=t>o-50):(this.needToMoveLeft=t<e+50,this.needToMoveRight=t>o-50),this.needToMoveLeft||this.needToMoveRight?this.ensureIntervalStarted():this.ensureIntervalCleared()}},r.prototype.onDragging=function(t,e,o,n){var i=this,s;if(t===void 0&&(t=this.lastDraggingEvent),e===void 0&&(e=!1),o===void 0&&(o=!1),n===void 0&&(n=!1),n){if(this.lastMovedInfo){var a=this.lastMovedInfo,l=a.columns,c=a.toIndex;Di.moveColumns(l,c,"uiColumnMoved",!0,this.columnModel)}return}if(this.lastDraggingEvent=t,!pe(t.hDirection)){var u=Di.normaliseX(t.x,this.pinned,!1,this.gridOptionsService,this.ctrlsService);e||this.checkCenterForScrolling(u);var d=this.normaliseDirection(t.hDirection),p=t.dragSource.type,h=((s=t.dragSource.getDragItem().columns)===null||s===void 0?void 0:s.filter(function(g){return g.getColDef().lockPinned?g.getPinned()==i.pinned:!0}))||[],f=Di.attemptMoveColumns({allMovingColumns:h,isFromHeader:p===no.HeaderCell,hDirection:d,xPosition:u,pinned:this.pinned,fromEnter:e,fakeEvent:o,gridOptionsService:this.gridOptionsService,columnModel:this.columnModel});f&&(this.lastMovedInfo=f)}},r.prototype.normaliseDirection=function(t){if(this.gridOptionsService.get("enableRtl"))switch(t){case Bt.Left:return Bt.Right;case Bt.Right:return Bt.Left;default:console.error("AG Grid: Unknown direction ".concat(t))}else return t},r.prototype.ensureIntervalStarted=function(){this.movingIntervalId||(this.intervalCount=0,this.failedMoveAttempts=0,this.movingIntervalId=window.setInterval(this.moveInterval.bind(this),100),this.needToMoveLeft?this.dragAndDropService.setGhostIcon(St.ICON_LEFT,!0):this.dragAndDropService.setGhostIcon(St.ICON_RIGHT,!0))},r.prototype.ensureIntervalCleared=function(){this.movingIntervalId&&(window.clearInterval(this.movingIntervalId),this.movingIntervalId=null,this.dragAndDropService.setGhostIcon(St.ICON_MOVE))},r.prototype.moveInterval=function(){var t;this.intervalCount++,t=10+this.intervalCount*5,t>100&&(t=100);var e=null,o=this.gridBodyCon.getScrollFeature();if(this.needToMoveLeft?e=o.scrollHorizontally(-t):this.needToMoveRight&&(e=o.scrollHorizontally(t)),e!==0)this.onDragging(this.lastDraggingEvent),this.failedMoveAttempts=0;else{this.failedMoveAttempts++;var n=this.lastDraggingEvent.dragItem.columns,i=n.filter(function(a){return!a.getColDef().lockPinned});if(i.length>0&&(this.dragAndDropService.setGhostIcon(St.ICON_PINNED),this.failedMoveAttempts>7)){var s=this.needToMoveLeft?"left":"right";this.setColumnsPinned(i,s,"uiColumnDragged"),this.dragAndDropService.nudge()}}},ss([y("columnModel")],r.prototype,"columnModel",void 0),ss([y("dragAndDropService")],r.prototype,"dragAndDropService",void 0),ss([y("gridOptionsService")],r.prototype,"gridOptionsService",void 0),ss([y("ctrlsService")],r.prototype,"ctrlsService",void 0),ss([Q],r.prototype,"init",null),r}(),k6=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),as=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},H6=function(r){k6(t,r);function t(e,o){var n=r.call(this)||this;return n.pinned=e,n.eContainer=o,n}return t.prototype.postConstruct=function(){var e=this;this.ctrlsService.whenReady(function(o){switch(e.pinned){case"left":e.eSecondaryContainers=[[o.gridBodyCtrl.getBodyViewportElement(),o.leftRowContainerCtrl.getContainerElement()],[o.bottomLeftRowContainerCtrl.getContainerElement()],[o.topLeftRowContainerCtrl.getContainerElement()]];break;case"right":e.eSecondaryContainers=[[o.gridBodyCtrl.getBodyViewportElement(),o.rightRowContainerCtrl.getContainerElement()],[o.bottomRightRowContainerCtrl.getContainerElement()],[o.topRightRowContainerCtrl.getContainerElement()]];break;default:e.eSecondaryContainers=[[o.gridBodyCtrl.getBodyViewportElement(),o.centerRowContainerCtrl.getViewportElement()],[o.bottomCenterRowContainerCtrl.getViewportElement()],[o.topCenterRowContainerCtrl.getViewportElement()]];break}})},t.prototype.isInterestedIn=function(e){return e===no.HeaderCell||e===no.ToolPanel&&this.gridOptionsService.get("allowDragFromColumnsToolPanel")},t.prototype.getSecondaryContainers=function(){return this.eSecondaryContainers},t.prototype.getContainer=function(){return this.eContainer},t.prototype.init=function(){this.moveColumnFeature=this.createManagedBean(new G6(this.pinned,this.eContainer)),this.bodyDropPivotTarget=this.createManagedBean(new F6(this.pinned)),this.dragAndDropService.addDropTarget(this)},t.prototype.getIconName=function(){return this.currentDropListener.getIconName()},t.prototype.isDropColumnInPivotMode=function(e){return this.columnModel.isPivotMode()&&e.dragSource.type===no.ToolPanel},t.prototype.onDragEnter=function(e){this.currentDropListener=this.isDropColumnInPivotMode(e)?this.bodyDropPivotTarget:this.moveColumnFeature,this.currentDropListener.onDragEnter(e)},t.prototype.onDragLeave=function(e){this.currentDropListener.onDragLeave(e)},t.prototype.onDragging=function(e){this.currentDropListener.onDragging(e)},t.prototype.onDragStop=function(e){this.currentDropListener.onDragStop(e)},as([y("dragAndDropService")],t.prototype,"dragAndDropService",void 0),as([y("columnModel")],t.prototype,"columnModel",void 0),as([y("ctrlsService")],t.prototype,"ctrlsService",void 0),as([Q],t.prototype,"postConstruct",null),as([Q],t.prototype,"init",null),t}(K),V6=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),La=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},B6=function(r){V6(t,r);function t(e){var o=r.call(this,t.TEMPLATE,e)||this;return o.headerCompVersion=0,o.column=e.getColumnGroupChild(),o.pinned=e.getPinned(),o}return t.prototype.postConstruct=function(){var e=this,o=this.getGui(),n=function(a,l){l!=null&&l!=""?o.setAttribute(a,l):o.removeAttribute(a)};n("col-id",this.column.getColId());var i={setWidth:function(a){return o.style.width=a},addOrRemoveCssClass:function(a,l){return e.addOrRemoveCssClass(a,l)},setAriaDescription:function(a){return Qy(o,a)},setAriaSort:function(a){return a?nC(o,a):iC(o)},setUserCompDetails:function(a){return e.setUserCompDetails(a)},getUserCompInstance:function(){return e.headerComp}};this.ctrl.setComp(i,this.getGui(),this.eResize,this.eHeaderCompWrapper);var s=this.ctrl.getSelectAllGui();this.eResize.insertAdjacentElement("afterend",s)},t.prototype.destroyHeaderComp=function(){this.headerComp&&(this.eHeaderCompWrapper.removeChild(this.headerCompGui),this.headerComp=this.destroyBean(this.headerComp),this.headerCompGui=void 0)},t.prototype.setUserCompDetails=function(e){var o=this;this.headerCompVersion++;var n=this.headerCompVersion;e.newAgStackInstance().then(function(i){return o.afterCompCreated(n,i)})},t.prototype.afterCompCreated=function(e,o){if(e!=this.headerCompVersion||!this.isAlive()){this.destroyBean(o);return}this.destroyHeaderComp(),this.headerComp=o,this.headerCompGui=o.getGui(),this.eHeaderCompWrapper.appendChild(this.headerCompGui),this.ctrl.setDragSource(this.getGui())},t.TEMPLATE=`<div class="ag-header-cell" role="columnheader" tabindex="-1">
            <div ref="eResize" class="ag-header-cell-resize" role="presentation"></div>
            <div ref="eHeaderCompWrapper" class="ag-header-cell-comp-wrapper" role="presentation"></div>
        </div>`,La([ee("eResize")],t.prototype,"eResize",void 0),La([ee("eHeaderCompWrapper")],t.prototype,"eHeaderCompWrapper",void 0),La([Q],t.prototype,"postConstruct",null),La([zt],t.prototype,"destroyHeaderComp",null),t}(yh),U6=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),vu=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},j6=function(r){U6(t,r);function t(e){return r.call(this,t.TEMPLATE,e)||this}return t.prototype.postConstruct=function(){var e=this,o=this.getGui(),n=function(s,a){return a!=null?o.setAttribute(s,a):o.removeAttribute(s)};o.setAttribute("col-id",this.ctrl.getColId());var i={addOrRemoveCssClass:function(s,a){return e.addOrRemoveCssClass(s,a)},setResizableDisplayed:function(s){return xe(e.eResize,s)},setWidth:function(s){return o.style.width=s},setAriaExpanded:function(s){return n("aria-expanded",s)},setUserCompDetails:function(s){return e.setUserCompDetails(s)},getUserCompInstance:function(){return e.headerGroupComp}};this.ctrl.setComp(i,o,this.eResize)},t.prototype.setUserCompDetails=function(e){var o=this;e.newAgStackInstance().then(function(n){return o.afterHeaderCompCreated(n)})},t.prototype.afterHeaderCompCreated=function(e){var o=this,n=function(){return o.destroyBean(e)};if(!this.isAlive()){n();return}var i=this.getGui(),s=e.getGui();i.appendChild(s),this.addDestroyFunc(n),this.headerGroupComp=e,this.ctrl.setDragSource(i)},t.TEMPLATE=`<div class="ag-header-group-cell" role="columnheader" tabindex="-1">
            <div ref="eResize" class="ag-header-cell-resize" role="presentation"></div>
        </div>`,vu([y("userComponentFactory")],t.prototype,"userComponentFactory",void 0),vu([ee("eResize")],t.prototype,"eResize",void 0),vu([Q],t.prototype,"postConstruct",null),t}(yh),W6=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),Jf=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},Pt;(function(r){r.COLUMN_GROUP="group",r.COLUMN="column",r.FLOATING_FILTER="filter"})(Pt||(Pt={}));var z6=function(r){W6(t,r);function t(e){var o=r.call(this)||this;return o.headerComps={},o.ctrl=e,o.setTemplate('<div class="'.concat(o.ctrl.getHeaderRowClass(),'" role="row"></div>')),o}return t.prototype.init=function(){var e=this;this.getGui().style.transform=this.ctrl.getTransform(),Yp(this.getGui(),this.ctrl.getAriaRowIndex());var o={setHeight:function(n){return e.getGui().style.height=n},setTop:function(n){return e.getGui().style.top=n},setHeaderCtrls:function(n,i){return e.setHeaderCtrls(n,i)},setWidth:function(n){return e.getGui().style.width=n}};this.ctrl.setComp(o)},t.prototype.destroyHeaderCtrls=function(){this.setHeaderCtrls([],!1)},t.prototype.setHeaderCtrls=function(e,o){var n=this;if(this.isAlive()){var i=this.headerComps;if(this.headerComps={},e.forEach(function(l){var c=l.getInstanceId(),u=i[c];delete i[c],u==null&&(u=n.createHeaderComp(l),n.getGui().appendChild(u.getGui())),n.headerComps[c]=u}),Gt(i,function(l,c){n.getGui().removeChild(c.getGui()),n.destroyBean(c)}),o){var s=ii(this.headerComps);s.sort(function(l,c){var u=l.getCtrl().getColumnGroupChild().getLeft(),d=c.getCtrl().getColumnGroupChild().getLeft();return u-d});var a=s.map(function(l){return l.getGui()});ah(this.getGui(),a)}}},t.prototype.createHeaderComp=function(e){var o;switch(this.ctrl.getType()){case Pt.COLUMN_GROUP:o=new j6(e);break;case Pt.FLOATING_FILTER:o=new tN(e);break;default:o=new B6(e);break}return this.createBean(o),o.setParentComponent(this),o},Jf([Q],t.prototype,"init",null),Jf([zt],t.prototype,"destroyHeaderCtrls",null),t}(Re),$6=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),ls=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},K6=0,_c=function(r){$6(t,r);function t(e,o){var n=r.call(this)||this;return n.resizeToggleTimeout=0,n.resizeMultiplier=1,n.resizeFeature=null,n.lastFocusEvent=null,n.dragSource=null,n.columnGroupChild=e,n.parentRowCtrl=o,n.instanceId=e.getUniqueId()+"-"+K6++,n}return t.prototype.shouldStopEventPropagation=function(e){var o=this.focusService.getFocusedHeader(),n=o.headerRowIndex,i=o.column;return wC(this.gridOptionsService,e,n,i)},t.prototype.getWrapperHasFocus=function(){var e=this.gridOptionsService.getDocument(),o=e.activeElement;return o===this.eGui},t.prototype.setGui=function(e){this.eGui=e,this.addDomData(),this.addManagedListener(this.beans.eventService,w.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.onDisplayedColumnsChanged()},t.prototype.onDisplayedColumnsChanged=function(){!this.comp||!this.column||(this.refreshFirstAndLastStyles(),this.refreshAriaColIndex())},t.prototype.refreshFirstAndLastStyles=function(){var e=this,o=e.comp,n=e.column,i=e.beans;wc.refreshFirstAndLastStyles(o,n,i.columnModel)},t.prototype.refreshAriaColIndex=function(){var e=this,o=e.beans,n=e.column,i=o.columnModel.getAriaColumnIndex(n);qp(this.eGui,i)},t.prototype.addResizeAndMoveKeyboardListeners=function(){this.resizeFeature&&(this.addManagedListener(this.eGui,"keydown",this.onGuiKeyDown.bind(this)),this.addManagedListener(this.eGui,"keyup",this.onGuiKeyUp.bind(this)))},t.prototype.onGuiKeyDown=function(e){var o,n=this.gridOptionsService.getDocument(),i=n.activeElement,s=e.key===N.LEFT||e.key===N.RIGHT;if(this.isResizing&&(e.preventDefault(),e.stopImmediatePropagation()),!(i!==this.eGui||!e.shiftKey&&!e.altKey)&&((this.isResizing||s)&&(e.preventDefault(),e.stopImmediatePropagation()),!!s)){var a=e.key===N.LEFT!==this.gridOptionsService.get("enableRtl"),l=Bt[a?"Left":"Right"];e.altKey?(this.isResizing=!0,this.resizeMultiplier+=1,this.resizeHeader(l,e.shiftKey),(o=this.resizeFeature)===null||o===void 0||o.toggleColumnResizing(!0)):this.moveHeader(l)}},t.prototype.onGuiKeyUp=function(){var e=this;this.isResizing&&(this.resizeToggleTimeout&&(window.clearTimeout(this.resizeToggleTimeout),this.resizeToggleTimeout=0),this.isResizing=!1,this.resizeMultiplier=1,this.resizeToggleTimeout=setTimeout(function(){var o;(o=e.resizeFeature)===null||o===void 0||o.toggleColumnResizing(!1)},150))},t.prototype.handleKeyDown=function(e){var o=this.getWrapperHasFocus();switch(e.key){case N.PAGE_DOWN:case N.PAGE_UP:case N.PAGE_HOME:case N.PAGE_END:o&&e.preventDefault()}},t.prototype.addDomData=function(){var e=this,o=t.DOM_DATA_KEY_HEADER_CTRL;this.gridOptionsService.setDomData(this.eGui,o,this),this.addDestroyFunc(function(){return e.gridOptionsService.setDomData(e.eGui,o,null)})},t.prototype.getGui=function(){return this.eGui},t.prototype.focus=function(e){return this.eGui?(this.lastFocusEvent=e||null,this.eGui.focus(),!0):!1},t.prototype.getRowIndex=function(){return this.parentRowCtrl.getRowIndex()},t.prototype.getParentRowCtrl=function(){return this.parentRowCtrl},t.prototype.getPinned=function(){return this.parentRowCtrl.getPinned()},t.prototype.getInstanceId=function(){return this.instanceId},t.prototype.getColumnGroupChild=function(){return this.columnGroupChild},t.prototype.removeDragSource=function(){this.dragSource&&(this.dragAndDropService.removeDragSource(this.dragSource),this.dragSource=null)},t.prototype.destroy=function(){r.prototype.destroy.call(this),this.removeDragSource(),this.comp=null,this.column=null,this.resizeFeature=null,this.lastFocusEvent=null,this.columnGroupChild=null,this.parentRowCtrl=null,this.eGui=null},t.DOM_DATA_KEY_HEADER_CTRL="headerCtrl",ls([y("focusService")],t.prototype,"focusService",void 0),ls([y("beans")],t.prototype,"beans",void 0),ls([y("userComponentFactory")],t.prototype,"userComponentFactory",void 0),ls([y("ctrlsService")],t.prototype,"ctrlsService",void 0),ls([y("dragAndDropService")],t.prototype,"dragAndDropService",void 0),t}(K),Y6=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),q6=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},Sh=function(r){Y6(t,r);function t(e,o,n,i){var s=r.call(this)||this;return s.columnOrGroup=e,s.eCell=o,s.ariaEl=s.eCell.querySelector("[role=columnheader]")||s.eCell,s.colsSpanning=i,s.beans=n,s}return t.prototype.setColsSpanning=function(e){this.colsSpanning=e,this.onLeftChanged()},t.prototype.getColumnOrGroup=function(){return this.beans.gridOptionsService.get("enableRtl")&&this.colsSpanning?Ge(this.colsSpanning):this.columnOrGroup},t.prototype.postConstruct=function(){this.addManagedListener(this.columnOrGroup,We.EVENT_LEFT_CHANGED,this.onLeftChanged.bind(this)),this.setLeftFirstTime(),this.addManagedListener(this.eventService,w.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,this.onLeftChanged.bind(this)),this.addManagedPropertyListener("domLayout",this.onLeftChanged.bind(this))},t.prototype.setLeftFirstTime=function(){var e=this.beans.gridOptionsService.get("suppressColumnMoveAnimation"),o=W(this.columnOrGroup.getOldLeft()),n=this.beans.columnAnimationService.isActive()&&o&&!e;n?this.animateInLeft():this.onLeftChanged()},t.prototype.animateInLeft=function(){var e=this,o=this.getColumnOrGroup(),n=o.getLeft(),i=o.getOldLeft(),s=this.modifyLeftForPrintLayout(o,i),a=this.modifyLeftForPrintLayout(o,n);this.setLeft(s),this.actualLeft=a,this.beans.columnAnimationService.executeNextVMTurn(function(){e.actualLeft===a&&e.setLeft(a)})},t.prototype.onLeftChanged=function(){var e=this.getColumnOrGroup(),o=e.getLeft();this.actualLeft=this.modifyLeftForPrintLayout(e,o),this.setLeft(this.actualLeft)},t.prototype.modifyLeftForPrintLayout=function(e,o){var n=this.beans.gridOptionsService.isDomLayout("print");if(!n||e.getPinned()==="left")return o;var i=this.beans.columnModel.getDisplayedColumnsLeftWidth();if(e.getPinned()==="right"){var s=this.beans.columnModel.getBodyContainerWidth();return i+s+o}return i+o},t.prototype.setLeft=function(e){if(W(e)&&(this.eCell.style.left="".concat(e,"px")),this.columnOrGroup instanceof We)this.columnOrGroup;else{var o=this.columnOrGroup,n=o.getLeafColumns();if(!n.length)return;n.length>1&&oC(this.ariaEl,n.length),n[0]}},q6([Q],t.prototype,"postConstruct",null),t}(K),Q6=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),eg=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},Eh=function(r){Q6(t,r);function t(e,o){var n=r.call(this)||this;return n.columns=e,n.element=o,n}return t.prototype.postConstruct=function(){this.gridOptionsService.get("columnHoverHighlight")&&this.addMouseHoverListeners()},t.prototype.addMouseHoverListeners=function(){this.addManagedListener(this.element,"mouseout",this.onMouseOut.bind(this)),this.addManagedListener(this.element,"mouseover",this.onMouseOver.bind(this))},t.prototype.onMouseOut=function(){this.columnHoverService.clearMouseOver()},t.prototype.onMouseOver=function(){this.columnHoverService.setMouseOver(this.columns)},eg([y("columnHoverService")],t.prototype,"columnHoverService",void 0),eg([Q],t.prototype,"postConstruct",null),t}(K),X6=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),mu=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},Z6=function(r){X6(t,r);function t(e,o){var n=r.call(this,e,o)||this;return n.iconCreated=!1,n.column=e,n}return t.prototype.setComp=function(e,o,n,i){this.comp=e,this.eButtonShowMainFilter=n,this.eFloatingFilterBody=i,this.setGui(o),this.setupActive(),this.setupWidth(),this.setupLeft(),this.setupHover(),this.setupFocus(),this.setupAria(),this.setupFilterButton(),this.setupUserComp(),this.setupSyncWithFilter(),this.setupUi(),this.addManagedListener(this.eButtonShowMainFilter,"click",this.showParentFilter.bind(this)),this.setupFilterChangedListener(),this.addManagedListener(this.column,We.EVENT_COL_DEF_CHANGED,this.onColDefChanged.bind(this))},t.prototype.resizeHeader=function(){},t.prototype.moveHeader=function(){},t.prototype.setupActive=function(){var e=this.column.getColDef(),o=!!e.filter,n=!!e.floatingFilter;this.active=o&&n},t.prototype.setupUi=function(){if(this.comp.setButtonWrapperDisplayed(!this.suppressFilterButton&&this.active),this.comp.addOrRemoveBodyCssClass("ag-floating-filter-full-body",this.suppressFilterButton),this.comp.addOrRemoveBodyCssClass("ag-floating-filter-body",!this.suppressFilterButton),!(!this.active||this.iconCreated)){var e=at("filter",this.gridOptionsService,this.column);e&&(this.iconCreated=!0,this.eButtonShowMainFilter.appendChild(e))}},t.prototype.setupFocus=function(){this.createManagedBean(new ci(this.eGui,{shouldStopEventPropagation:this.shouldStopEventPropagation.bind(this),onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this)}))},t.prototype.setupAria=function(){var e=this.localeService.getLocaleTextFunc();In(this.eButtonShowMainFilter,e("ariaFilterMenuOpen","Open Filter Menu"))},t.prototype.onTabKeyDown=function(e){var o=this.gridOptionsService.getDocument(),n=o.activeElement,i=n===this.eGui;if(!i){var s=this.focusService.findNextFocusableElement(this.eGui,null,e.shiftKey);if(s){this.beans.headerNavigationService.scrollToColumn(this.column),e.preventDefault(),s.focus();return}var a=this.findNextColumnWithFloatingFilter(e.shiftKey);a&&this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:this.getParentRowCtrl().getRowIndex(),column:a},event:e})&&e.preventDefault()}},t.prototype.findNextColumnWithFloatingFilter=function(e){var o=this.beans.columnModel,n=this.column;do if(n=e?o.getDisplayedColBefore(n):o.getDisplayedColAfter(n),!n)break;while(!n.getColDef().filter||!n.getColDef().floatingFilter);return n},t.prototype.handleKeyDown=function(e){r.prototype.handleKeyDown.call(this,e);var o=this.getWrapperHasFocus();switch(e.key){case N.UP:case N.DOWN:o||e.preventDefault();case N.LEFT:case N.RIGHT:if(o)return;e.stopPropagation();case N.ENTER:o&&this.focusService.focusInto(this.eGui)&&e.preventDefault();break;case N.ESCAPE:o||this.eGui.focus()}},t.prototype.onFocusIn=function(e){var o=this.eGui.contains(e.relatedTarget);if(!o){var n=!!e.relatedTarget&&!e.relatedTarget.classList.contains("ag-floating-filter"),i=!!e.relatedTarget&&Ai(e.relatedTarget,"ag-floating-filter");if(n&&i&&e.target===this.eGui){var s=this.lastFocusEvent,a=!!(s&&s.key===N.TAB);if(s&&a){var l=s.shiftKey;this.focusService.focusInto(this.eGui,l)}}var c=this.getRowIndex();this.beans.focusService.setFocusedHeader(c,this.column)}},t.prototype.setupHover=function(){var e=this;this.createManagedBean(new Eh([this.column],this.eGui));var o=function(){if(e.gridOptionsService.get("columnHoverHighlight")){var n=e.columnHoverService.isHovered(e.column);e.comp.addOrRemoveCssClass("ag-column-hover",n)}};this.addManagedListener(this.eventService,w.EVENT_COLUMN_HOVER_CHANGED,o),o()},t.prototype.setupLeft=function(){var e=new Sh(this.column,this.eGui,this.beans);this.createManagedBean(e)},t.prototype.setupFilterButton=function(){var e=this.column.getColDef();this.suppressFilterButton=e.floatingFilterComponentParams?!!e.floatingFilterComponentParams.suppressFilterButton:!1},t.prototype.setupUserComp=function(){var e=this;if(this.active){var o=this.filterManager.getFloatingFilterCompDetails(this.column,function(){return e.showParentFilter()});o&&this.setCompDetails(o)}},t.prototype.setCompDetails=function(e){this.userCompDetails=e,this.comp.setCompDetails(e)},t.prototype.showParentFilter=function(){var e=this.suppressFilterButton?this.eFloatingFilterBody:this.eButtonShowMainFilter;this.menuFactory.showMenuAfterButtonClick(this.column,e,"floatingFilter","filterMenuTab",["filterMenuTab"])},t.prototype.setupSyncWithFilter=function(){var e=this;if(this.active){var o=function(n){var i=e.comp.getFloatingFilterComp();i&&i.then(function(s){if(s){var a=e.filterManager.getCurrentFloatingFilterParentModel(e.column);s.onParentModelChanged(a,n)}})};this.destroySyncListener=this.addManagedListener(this.column,We.EVENT_FILTER_CHANGED,o),this.filterManager.isFilterActive(this.column)&&o(null)}},t.prototype.setupWidth=function(){var e=this,o=function(){var n="".concat(e.column.getActualWidth(),"px");e.comp.setWidth(n)};this.addManagedListener(this.column,We.EVENT_WIDTH_CHANGED,o),o()},t.prototype.setupFilterChangedListener=function(){this.active&&(this.destroyFilterChangedListener=this.addManagedListener(this.column,We.EVENT_FILTER_CHANGED,this.updateFilterButton.bind(this)))},t.prototype.updateFilterButton=function(){!this.suppressFilterButton&&this.comp&&this.comp.setButtonWrapperDisplayed(this.filterManager.isFilterAllowed(this.column))},t.prototype.onColDefChanged=function(){var e=this,o,n,i=this.active;this.setupActive();var s=!i&&this.active;i&&!this.active&&((o=this.destroySyncListener)===null||o===void 0||o.call(this),(n=this.destroyFilterChangedListener)===null||n===void 0||n.call(this));var a=this.active?this.filterManager.getFloatingFilterCompDetails(this.column,function(){return e.showParentFilter()}):null,l=this.comp.getFloatingFilterComp();!l||!a?this.updateCompDetails(a,s):l.then(function(c){var u;!c||e.filterManager.areFilterCompsDifferent((u=e.userCompDetails)!==null&&u!==void 0?u:null,a)?e.updateCompDetails(a,s):e.updateFloatingFilterParams(a)})},t.prototype.updateCompDetails=function(e,o){this.setCompDetails(e),this.setupFilterButton(),this.setupUi(),o&&(this.setupSyncWithFilter(),this.setupFilterChangedListener())},t.prototype.updateFloatingFilterParams=function(e){var o;if(e){var n=e.params;(o=this.comp.getFloatingFilterComp())===null||o===void 0||o.then(function(i){i!=null&&i.onParamsUpdated&&typeof i.onParamsUpdated=="function"&&i.onParamsUpdated(n)})}},t.prototype.destroy=function(){r.prototype.destroy.call(this),this.eButtonShowMainFilter=null,this.eFloatingFilterBody=null,this.userCompDetails=null,this.destroySyncListener=null,this.destroyFilterChangedListener=null},mu([y("filterManager")],t.prototype,"filterManager",void 0),mu([y("columnHoverService")],t.prototype,"columnHoverService",void 0),mu([y("menuFactory")],t.prototype,"menuFactory",void 0),t}(_c),J6=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),cs=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},eG=function(r){J6(t,r);function t(e,o,n,i,s){var a=r.call(this)||this;return a.pinned=e,a.column=o,a.eResize=n,a.comp=i,a.ctrl=s,a}return t.prototype.postConstruct=function(){var e=this,o=[],n,i,s=function(){if(xe(e.eResize,n),!!n){var c=e.horizontalResizeService.addResizeBar({eResizeBar:e.eResize,onResizeStart:e.onResizeStart.bind(e),onResizing:e.onResizing.bind(e,!1),onResizeEnd:e.onResizing.bind(e,!0)});if(o.push(c),i){var u=e.gridOptionsService.get("skipHeaderOnAutoSize"),d=function(){e.columnModel.autoSizeColumn(e.column,u,"uiColumnResized")};e.eResize.addEventListener("dblclick",d);var p=new fo(e.eResize);p.addEventListener(fo.EVENT_DOUBLE_TAP,d),o.push(function(){e.eResize.removeEventListener("dblclick",d),p.removeEventListener(fo.EVENT_DOUBLE_TAP,d),p.destroy()})}}},a=function(){o.forEach(function(c){return c()}),o.length=0},l=function(){var c=e.column.isResizable(),u=!e.gridOptionsService.get("suppressAutoSize")&&!e.column.getColDef().suppressAutoSize,d=c!==n||u!==i;d&&(n=c,i=u,a(),s())};l(),this.addDestroyFunc(a),this.ctrl.addRefreshFunction(l)},t.prototype.onResizing=function(e,o){var n=this,i=n.column,s=n.lastResizeAmount,a=n.resizeStartWidth,l=this.normaliseResizeAmount(o),c=a+l,u=[{key:i,newWidth:c}];if(this.column.getPinned()){var d=this.pinnedWidthService.getPinnedLeftWidth(),p=this.pinnedWidthService.getPinnedRightWidth(),h=Qi(this.ctrlsService.getGridBodyCtrl().getBodyViewportElement())-50;if(d+p+(l-s)>h)return}this.lastResizeAmount=l,this.columnModel.setColumnWidths(u,this.resizeWithShiftKey,e,"uiColumnResized"),e&&this.toggleColumnResizing(!1)},t.prototype.onResizeStart=function(e){this.resizeStartWidth=this.column.getActualWidth(),this.lastResizeAmount=0,this.resizeWithShiftKey=e,this.toggleColumnResizing(!0)},t.prototype.toggleColumnResizing=function(e){this.comp.addOrRemoveCssClass("ag-column-resizing",e)},t.prototype.normaliseResizeAmount=function(e){var o=e,n=this.pinned!=="left",i=this.pinned==="right";return this.gridOptionsService.get("enableRtl")?n&&(o*=-1):i&&(o*=-1),o},cs([y("horizontalResizeService")],t.prototype,"horizontalResizeService",void 0),cs([y("pinnedWidthService")],t.prototype,"pinnedWidthService",void 0),cs([y("ctrlsService")],t.prototype,"ctrlsService",void 0),cs([y("columnModel")],t.prototype,"columnModel",void 0),cs([Q],t.prototype,"postConstruct",null),t}(K),tG=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),tg=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},oG=function(r){tG(t,r);function t(e){var o=r.call(this)||this;return o.cbSelectAllVisible=!1,o.processingEventFromCheckbox=!1,o.column=e,o}return t.prototype.onSpaceKeyDown=function(e){var o=this.cbSelectAll,n=this.gridOptionsService.getDocument();o.isDisplayed()&&!o.getGui().contains(n.activeElement)&&(e.preventDefault(),o.setValue(!o.getValue()))},t.prototype.getCheckboxGui=function(){return this.cbSelectAll.getGui()},t.prototype.setComp=function(e){this.headerCellCtrl=e,this.cbSelectAll=this.createManagedBean(new mc),this.cbSelectAll.addCssClass("ag-header-select-all"),yt(this.cbSelectAll.getGui(),"presentation"),this.showOrHideSelectAll(),this.addManagedListener(this.eventService,w.EVENT_NEW_COLUMNS_LOADED,this.onNewColumnsLoaded.bind(this)),this.addManagedListener(this.eventService,w.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.addManagedListener(this.eventService,w.EVENT_SELECTION_CHANGED,this.onSelectionChanged.bind(this)),this.addManagedListener(this.eventService,w.EVENT_PAGINATION_CHANGED,this.onSelectionChanged.bind(this)),this.addManagedListener(this.eventService,w.EVENT_MODEL_UPDATED,this.onModelChanged.bind(this)),this.addManagedListener(this.cbSelectAll,w.EVENT_FIELD_VALUE_CHANGED,this.onCbSelectAll.bind(this)),uc(this.cbSelectAll.getGui(),!0),this.cbSelectAll.getInputElement().setAttribute("tabindex","-1"),this.refreshSelectAllLabel()},t.prototype.onNewColumnsLoaded=function(){this.showOrHideSelectAll()},t.prototype.onDisplayedColumnsChanged=function(){this.isAlive()&&this.showOrHideSelectAll()},t.prototype.showOrHideSelectAll=function(){this.cbSelectAllVisible=this.isCheckboxSelection(),this.cbSelectAll.setDisplayed(this.cbSelectAllVisible,{skipAriaHidden:!0}),this.cbSelectAllVisible&&(this.checkRightRowModelType("selectAllCheckbox"),this.checkSelectionType("selectAllCheckbox"),this.updateStateOfCheckbox()),this.refreshSelectAllLabel()},t.prototype.onModelChanged=function(){this.cbSelectAllVisible&&this.updateStateOfCheckbox()},t.prototype.onSelectionChanged=function(){this.cbSelectAllVisible&&this.updateStateOfCheckbox()},t.prototype.updateStateOfCheckbox=function(){if(!this.processingEventFromCheckbox){this.processingEventFromCheckbox=!0;var e=this.selectionService.getSelectAllState(this.isFilteredOnly(),this.isCurrentPageOnly());this.cbSelectAll.setValue(e),this.refreshSelectAllLabel(),this.processingEventFromCheckbox=!1}},t.prototype.refreshSelectAllLabel=function(){var e=this.localeService.getLocaleTextFunc(),o=this.cbSelectAll.getValue(),n=o?e("ariaChecked","checked"):e("ariaUnchecked","unchecked"),i=e("ariaRowSelectAll","Press Space to toggle all rows selection");this.cbSelectAllVisible?this.headerCellCtrl.setAriaDescriptionProperty("selectAll","".concat(i," (").concat(n,")")):this.headerCellCtrl.setAriaDescriptionProperty("selectAll",null),this.cbSelectAll.setInputAriaLabel("".concat(i," (").concat(n,")")),this.headerCellCtrl.refreshAriaDescription()},t.prototype.checkSelectionType=function(e){var o=this.gridOptionsService.get("rowSelection")==="multiple";return o?!0:(console.warn("AG Grid: ".concat(e," is only available if using 'multiple' rowSelection.")),!1)},t.prototype.checkRightRowModelType=function(e){var o=this.rowModel.getType(),n=o==="clientSide"||o==="serverSide";return n?!0:(console.warn("AG Grid: ".concat(e," is only available if using 'clientSide' or 'serverSide' rowModelType, you are using ").concat(o,".")),!1)},t.prototype.onCbSelectAll=function(){if(!this.processingEventFromCheckbox&&this.cbSelectAllVisible){var e=this.cbSelectAll.getValue(),o=this.isFilteredOnly(),n=this.isCurrentPageOnly(),i="uiSelectAll";n?i="uiSelectAllCurrentPage":o&&(i="uiSelectAllFiltered");var s={source:i,justFiltered:o,justCurrentPage:n};e?this.selectionService.selectAllRowNodes(s):this.selectionService.deselectAllRowNodes(s)}},t.prototype.isCheckboxSelection=function(){var e=this.column.getColDef().headerCheckboxSelection;if(typeof e=="function"){var o=e,n={column:this.column,colDef:this.column.getColDef(),columnApi:this.gridOptionsService.columnApi,api:this.gridOptionsService.api,context:this.gridOptionsService.context};e=o(n)}return e?this.checkRightRowModelType("headerCheckboxSelection")&&this.checkSelectionType("headerCheckboxSelection"):!1},t.prototype.isFilteredOnly=function(){return!!this.column.getColDef().headerCheckboxSelectionFilteredOnly},t.prototype.isCurrentPageOnly=function(){return!!this.column.getColDef().headerCheckboxSelectionCurrentPageOnly},tg([y("rowModel")],t.prototype,"rowModel",void 0),tg([y("selectionService")],t.prototype,"selectionService",void 0),t}(K),nG=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),vi=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},iG=function(r){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&r[t],o=0;if(e)return e.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&o>=r.length&&(r=void 0),{value:r&&r[o++],done:!r}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},rG=function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var o=e.call(r),n,i=[],s;try{for(;(t===void 0||t-- >0)&&!(n=o.next()).done;)i.push(n.value)}catch(a){s={error:a}}finally{try{n&&!n.done&&(e=o.return)&&e.call(o)}finally{if(s)throw s.error}}return i},sG=function(r){nG(t,r);function t(e,o){var n=r.call(this,e,o)||this;return n.refreshFunctions=[],n.userHeaderClasses=new Set,n.ariaDescriptionProperties=new Map,n.column=e,n}return t.prototype.setComp=function(e,o,n,i){var s=this;this.comp=e,this.setGui(o),this.updateState(),this.setupWidth(),this.setupMovingCss(),this.setupMenuClass(),this.setupSortableClass(),this.setupWrapTextClass(),this.refreshSpanHeaderHeight(),this.setupAutoHeight(i),this.addColumnHoverListener(),this.setupFilterClass(),this.setupClassesFromColDef(),this.setupTooltip(),this.addActiveHeaderMouseListeners(),this.setupSelectAll(),this.setupUserComp(),this.refreshAria(),this.resizeFeature=this.createManagedBean(new eG(this.getPinned(),this.column,n,e,this)),this.createManagedBean(new Eh([this.column],o)),this.createManagedBean(new Sh(this.column,o,this.beans)),this.createManagedBean(new ci(o,{shouldStopEventPropagation:function(a){return s.shouldStopEventPropagation(a)},onTabKeyDown:function(){return null},handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this),onFocusOut:this.onFocusOut.bind(this)})),this.addResizeAndMoveKeyboardListeners(),this.addManagedPropertyListeners(["suppressMovableColumns","suppressMenuHide","suppressAggFuncInHeader"],this.refresh.bind(this)),this.addManagedListener(this.column,We.EVENT_COL_DEF_CHANGED,this.refresh.bind(this)),this.addManagedListener(this.eventService,w.EVENT_COLUMN_VALUE_CHANGED,this.onColumnValueChanged.bind(this)),this.addManagedListener(this.eventService,w.EVENT_COLUMN_ROW_GROUP_CHANGED,this.onColumnRowGroupChanged.bind(this)),this.addManagedListener(this.eventService,w.EVENT_COLUMN_PIVOT_CHANGED,this.onColumnPivotChanged.bind(this)),this.addManagedListener(this.eventService,w.EVENT_HEADER_HEIGHT_CHANGED,this.onHeaderHeightChanged.bind(this))},t.prototype.resizeHeader=function(e,o){var n,i;if(this.column.isResizable()){var s=this.column.getPinned(),a=this.gridOptionsService.get("enableRtl"),l=this.column.getActualWidth(),c=(n=this.column.getMinWidth())!==null&&n!==void 0?n:0,u=(i=this.column.getMaxWidth())!==null&&i!==void 0?i:Number.MAX_SAFE_INTEGER,d=e===Bt.Left;s&&a!==(s==="right")&&(d=!d);var p=(d?-1:1)*this.resizeMultiplier,h=Math.min(Math.max(l+p,c),u);if(s){var f=this.pinnedWidthService.getPinnedLeftWidth(),g=this.pinnedWidthService.getPinnedRightWidth(),_=Qi(this.ctrlsService.getGridBodyCtrl().getBodyViewportElement())-50;if(f+g+p>_)return}this.columnModel.setColumnWidths([{key:this.column,newWidth:h}],o,!0)}},t.prototype.moveHeader=function(e){var o=this,n=o.eGui,i=o.column,s=o.columnModel,a=o.gridOptionsService,l=o.ctrlsService,c=this.getPinned(),u=n.getBoundingClientRect().left,d=i.getActualWidth(),p=a.get("enableRtl"),h=e===Bt.Left!==p,f=Di.normaliseX(h?u-20:u+d+20,c,!0,a,l);Di.attemptMoveColumns({allMovingColumns:[i],isFromHeader:!0,hDirection:e,xPosition:f,pinned:c,fromEnter:!1,fakeEvent:!1,gridOptionsService:a,columnModel:s}),l.getGridBodyCtrl().getScrollFeature().ensureColumnVisible(i,"auto")},t.prototype.setupUserComp=function(){var e=this.lookupUserCompDetails();this.setCompDetails(e)},t.prototype.setCompDetails=function(e){this.userCompDetails=e,this.comp.setUserCompDetails(e)},t.prototype.lookupUserCompDetails=function(){var e=this.createParams(),o=this.column.getColDef();return this.userComponentFactory.getHeaderCompDetails(o,e)},t.prototype.createParams=function(){var e=this,o={column:this.column,displayName:this.displayName,enableSorting:this.column.isSortable(),enableMenu:this.menuEnabled,showColumnMenu:function(n){e.gridApi.showColumnMenuAfterButtonClick(e.column,n)},progressSort:function(n){e.sortController.progressSort(e.column,!!n,"uiColumnSorted")},setSort:function(n,i){e.sortController.setSortForColumn(e.column,n,!!i,"uiColumnSorted")},api:this.gridApi,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context,eGridHeader:this.getGui()};return o},t.prototype.setupSelectAll=function(){this.selectAllFeature=this.createManagedBean(new oG(this.column)),this.selectAllFeature.setComp(this)},t.prototype.getSelectAllGui=function(){return this.selectAllFeature.getCheckboxGui()},t.prototype.handleKeyDown=function(e){r.prototype.handleKeyDown.call(this,e),e.key===N.SPACE&&this.selectAllFeature.onSpaceKeyDown(e),e.key===N.ENTER&&this.onEnterKeyDown(e)},t.prototype.onEnterKeyDown=function(e){var o=this.comp.getUserCompInstance();if(o){if(e.ctrlKey||e.metaKey)this.menuEnabled&&o.showMenu&&(e.preventDefault(),o.showMenu());else if(this.sortable){var n=e.shiftKey;this.sortController.progressSort(this.column,n,"uiColumnSorted")}}},t.prototype.isMenuEnabled=function(){return this.menuEnabled},t.prototype.onFocusIn=function(e){if(!this.getGui().contains(e.relatedTarget)){var o=this.getRowIndex();this.focusService.setFocusedHeader(o,this.column)}this.setActiveHeader(!0)},t.prototype.onFocusOut=function(e){this.getGui().contains(e.relatedTarget)||this.setActiveHeader(!1)},t.prototype.setupTooltip=function(){var e=this,o={getColumn:function(){return e.column},getColDef:function(){return e.column.getColDef()},getGui:function(){return e.eGui},getLocation:function(){return"header"},getTooltipValue:function(){var i=e.column.getColDef().headerTooltip;return i}},n=this.createManagedBean(new wh(o,this.beans));n.setComp(this.eGui),this.refreshFunctions.push(function(){return n.refreshToolTip()})},t.prototype.setupClassesFromColDef=function(){var e=this,o=function(){var n=e.column.getColDef(),i=wc.getHeaderClassesFromColDef(n,e.gridOptionsService,e.column,null),s=e.userHeaderClasses;e.userHeaderClasses=new Set(i),i.forEach(function(a){s.has(a)?s.delete(a):e.comp.addOrRemoveCssClass(a,!0)}),s.forEach(function(a){return e.comp.addOrRemoveCssClass(a,!1)})};this.refreshFunctions.push(o),o()},t.prototype.setDragSource=function(e){var o=this;if(this.dragSourceElement=e,this.removeDragSource(),!(!e||!this.draggable)){var n=this,i=n.column,s=n.columnModel,a=n.displayName,l=n.dragAndDropService,c=n.gridOptionsService,u=!this.gridOptionsService.get("suppressDragLeaveHidesColumns"),d=this.dragSource={type:no.HeaderCell,eElement:e,getDefaultIconName:function(){return u?St.ICON_HIDE:St.ICON_NOT_ALLOWED},getDragItem:function(){return o.createDragItem(i)},dragItemName:a,onDragStarted:function(){u=!c.get("suppressDragLeaveHidesColumns"),i.setMoving(!0,"uiColumnMoved")},onDragStopped:function(){return i.setMoving(!1,"uiColumnMoved")},onGridEnter:function(p){var h;if(u){var f=((h=p==null?void 0:p.columns)===null||h===void 0?void 0:h.filter(function(g){return!g.getColDef().lockVisible}))||[];s.setColumnsVisible(f,!0,"uiColumnMoved")}},onGridExit:function(p){var h;if(u){var f=((h=p==null?void 0:p.columns)===null||h===void 0?void 0:h.filter(function(g){return!g.getColDef().lockVisible}))||[];s.setColumnsVisible(f,!1,"uiColumnMoved")}}};l.addDragSource(d,!0)}},t.prototype.createDragItem=function(e){var o={};return o[e.getId()]=e.isVisible(),{columns:[e],visibleState:o}},t.prototype.updateState=function(){var e=this.column.getColDef();this.menuEnabled=this.menuFactory.isMenuEnabled(this.column)&&!e.suppressMenu,this.sortable=this.column.isSortable(),this.displayName=this.calculateDisplayName(),this.draggable=this.workOutDraggable()},t.prototype.addRefreshFunction=function(e){this.refreshFunctions.push(e)},t.prototype.refresh=function(){this.updateState(),this.refreshHeaderComp(),this.refreshAria(),this.refreshFunctions.forEach(function(e){return e()})},t.prototype.refreshHeaderComp=function(){var e=this.lookupUserCompDetails(),o=this.comp.getUserCompInstance(),n=o!=null&&this.userCompDetails.componentClass==e.componentClass,i=n?this.attemptHeaderCompRefresh(e.params):!1;i?this.setDragSource(this.dragSourceElement):this.setCompDetails(e)},t.prototype.attemptHeaderCompRefresh=function(e){var o=this.comp.getUserCompInstance();if(!o||!o.refresh)return!1;var n=o.refresh(e);return n},t.prototype.calculateDisplayName=function(){return this.columnModel.getDisplayNameForColumn(this.column,"header",!0)},t.prototype.checkDisplayName=function(){this.displayName!==this.calculateDisplayName()&&this.refresh()},t.prototype.workOutDraggable=function(){var e=this.column.getColDef(),o=this.gridOptionsService.get("suppressMovableColumns"),n=!o&&!e.suppressMovable&&!e.lockPosition;return!!n||!!e.enableRowGroup||!!e.enablePivot},t.prototype.onColumnRowGroupChanged=function(){this.checkDisplayName()},t.prototype.onColumnPivotChanged=function(){this.checkDisplayName()},t.prototype.onColumnValueChanged=function(){this.checkDisplayName()},t.prototype.setupWidth=function(){var e=this,o=function(){var n=e.column.getActualWidth();e.comp.setWidth("".concat(n,"px"))};this.addManagedListener(this.column,We.EVENT_WIDTH_CHANGED,o),o()},t.prototype.setupMovingCss=function(){var e=this,o=function(){e.comp.addOrRemoveCssClass("ag-header-cell-moving",e.column.isMoving())};this.addManagedListener(this.column,We.EVENT_MOVING_CHANGED,o),o()},t.prototype.setupMenuClass=function(){var e=this,o=function(){e.comp.addOrRemoveCssClass("ag-column-menu-visible",e.column.isMenuVisible())};this.addManagedListener(this.column,We.EVENT_MENU_VISIBLE_CHANGED,o),o()},t.prototype.setupSortableClass=function(){var e=this,o=function(){e.comp.addOrRemoveCssClass("ag-header-cell-sortable",!!e.sortable)};o(),this.addRefreshFunction(o),this.addManagedListener(this.eventService,We.EVENT_SORT_CHANGED,this.refreshAriaSort.bind(this))},t.prototype.setupFilterClass=function(){var e=this,o=function(){var n=e.column.isFilterActive();e.comp.addOrRemoveCssClass("ag-header-cell-filtered",n),e.refreshAria()};this.addManagedListener(this.column,We.EVENT_FILTER_ACTIVE_CHANGED,o),o()},t.prototype.setupWrapTextClass=function(){var e=this,o=function(){var n=!!e.column.getColDef().wrapHeaderText;e.comp.addOrRemoveCssClass("ag-header-cell-wrap-text",n)};o(),this.addRefreshFunction(o)},t.prototype.onDisplayedColumnsChanged=function(){r.prototype.onDisplayedColumnsChanged.call(this),this.isAlive()&&this.onHeaderHeightChanged()},t.prototype.onHeaderHeightChanged=function(){this.refreshSpanHeaderHeight()},t.prototype.refreshSpanHeaderHeight=function(){var e=this,o=e.eGui,n=e.column,i=e.comp,s=e.columnModel;if(e.gridOptionsService,!n.isSpanHeaderHeight()){o.style.removeProperty("top"),o.style.removeProperty("height"),i.addOrRemoveCssClass("ag-header-span-height",!1),i.addOrRemoveCssClass("ag-header-span-total",!1);return}var a=this.getColumnGroupPaddingInfo(),l=a.numberOfParents,c=a.isSpanningTotal;i.addOrRemoveCssClass("ag-header-span-height",l>0);var u=s.getColumnHeaderRowHeight();if(l===0){i.addOrRemoveCssClass("ag-header-span-total",!1),o.style.setProperty("top","0px"),o.style.setProperty("height","".concat(u,"px"));return}i.addOrRemoveCssClass("ag-header-span-total",c);var d=s.isPivotMode(),p=d?s.getPivotGroupHeaderHeight():s.getGroupHeaderHeight(),h=l*p;o.style.setProperty("top","".concat(-h,"px")),o.style.setProperty("height","".concat(u+h,"px"))},t.prototype.getColumnGroupPaddingInfo=function(){var e=this.column.getParent();if(!e||!e.isPadding())return{numberOfParents:0,isSpanningTotal:!1};for(var o=e.getPaddingLevel()+1,n=!0;e;){if(!e.isPadding()){n=!1;break}e=e.getParent()}return{numberOfParents:o,isSpanningTotal:n}},t.prototype.setupAutoHeight=function(e){var o=this,n=function(u){if(o.isAlive()){var d=li(o.getGui()),p=d.paddingTop,h=d.paddingBottom,f=d.borderBottomWidth,g=d.borderTopWidth,_=p+h+f+g,C=e.offsetHeight,E=C+_;if(u<5){var T=o.beans.gridOptionsService.getDocument(),P=!T||!T.contains(e),A=E==0;if(P||A){o.beans.frameworkOverrides.setTimeout(function(){return n(u+1)},0);return}}o.columnModel.setColumnHeaderHeight(o.column,E)}},i=!1,s,a=function(){var u=o.column.isAutoHeaderHeight();u&&!i&&l(),!u&&i&&c()},l=function(){i=!0,n(0),o.comp.addOrRemoveCssClass("ag-header-cell-auto-height",!0),s=o.resizeObserverService.observeResize(e,function(){return n(0)})},c=function(){i=!1,s&&s(),o.comp.addOrRemoveCssClass("ag-header-cell-auto-height",!1),s=void 0};a(),this.addDestroyFunc(function(){return c()}),this.addManagedListener(this.column,We.EVENT_WIDTH_CHANGED,function(){return i&&n(0)}),this.addManagedListener(this.eventService,We.EVENT_SORT_CHANGED,function(){i&&o.beans.frameworkOverrides.setTimeout(function(){return n(0)})}),this.addRefreshFunction(a)},t.prototype.refreshAriaSort=function(){if(this.sortable){var e=this.localeService.getLocaleTextFunc(),o=this.sortController.getDisplaySortForColumn(this.column)||null;this.comp.setAriaSort($y(o)),this.setAriaDescriptionProperty("sort",e("ariaSortableColumn","Press ENTER to sort."))}else this.comp.setAriaSort(),this.setAriaDescriptionProperty("sort",null)},t.prototype.refreshAriaMenu=function(){if(this.menuEnabled){var e=this.localeService.getLocaleTextFunc();this.setAriaDescriptionProperty("menu",e("ariaMenuColumn","Press CTRL ENTER to open column menu."))}else this.setAriaDescriptionProperty("menu",null)},t.prototype.refreshAriaFiltered=function(){var e=this.localeService.getLocaleTextFunc(),o=this.column.isFilterActive();o?this.setAriaDescriptionProperty("filter",e("ariaColumnFiltered","Column Filtered")):this.setAriaDescriptionProperty("filter",null)},t.prototype.setAriaDescriptionProperty=function(e,o){o!=null?this.ariaDescriptionProperties.set(e,o):this.ariaDescriptionProperties.delete(e)},t.prototype.refreshAriaDescription=function(){var e,o,n=null;try{for(var i=iG(this.ariaDescriptionProperties),s=i.next();!s.done;s=i.next()){var a=rG(s.value,2),l=a[0],c=a[1];l==="filter"?n="".concat(c," ").concat(n||""):n="".concat(n||""," ").concat(c)}}catch(u){e={error:u}}finally{try{s&&!s.done&&(o=i.return)&&o.call(i)}finally{if(e)throw e.error}}this.comp.setAriaDescription(n??void 0)},t.prototype.refreshAria=function(){this.refreshAriaSort(),this.refreshAriaMenu(),this.refreshAriaFiltered(),this.refreshAriaDescription()},t.prototype.addColumnHoverListener=function(){var e=this,o=function(){if(e.gridOptionsService.get("columnHoverHighlight")){var n=e.columnHoverService.isHovered(e.column);e.comp.addOrRemoveCssClass("ag-column-hover",n)}};this.addManagedListener(this.eventService,w.EVENT_COLUMN_HOVER_CHANGED,o),o()},t.prototype.getColId=function(){return this.column.getColId()},t.prototype.addActiveHeaderMouseListeners=function(){var e=this,o=function(n){return e.setActiveHeader(n.type==="mouseenter")};this.addManagedListener(this.getGui(),"mouseenter",o),this.addManagedListener(this.getGui(),"mouseleave",o)},t.prototype.setActiveHeader=function(e){this.comp.addOrRemoveCssClass("ag-header-active",e)},t.prototype.destroy=function(){r.prototype.destroy.call(this),this.refreshFunctions=null,this.selectAllFeature=null,this.dragSourceElement=null,this.userCompDetails=null,this.userHeaderClasses=null,this.ariaDescriptionProperties=null},vi([y("columnModel")],t.prototype,"columnModel",void 0),vi([y("pinnedWidthService")],t.prototype,"pinnedWidthService",void 0),vi([y("columnHoverService")],t.prototype,"columnHoverService",void 0),vi([y("sortController")],t.prototype,"sortController",void 0),vi([y("menuFactory")],t.prototype,"menuFactory",void 0),vi([y("resizeObserverService")],t.prototype,"resizeObserverService",void 0),vi([y("gridApi")],t.prototype,"gridApi",void 0),t}(_c),aG=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),xa=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},lG=function(r){aG(t,r);function t(e,o,n,i){var s=r.call(this)||this;return s.eResize=o,s.comp=e,s.pinned=n,s.columnGroup=i,s}return t.prototype.postConstruct=function(){var e=this;if(!this.columnGroup.isResizable()){this.comp.setResizableDisplayed(!1);return}var o=this.horizontalResizeService.addResizeBar({eResizeBar:this.eResize,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this,!1),onResizeEnd:this.onResizing.bind(this,!0)});if(this.addDestroyFunc(o),!this.gridOptionsService.get("suppressAutoSize")){var n=this.gridOptionsService.get("skipHeaderOnAutoSize");this.eResize.addEventListener("dblclick",function(){var i=[],s=e.columnGroup.getDisplayedLeafColumns();s.forEach(function(a){a.getColDef().suppressAutoSize||i.push(a.getColId())}),i.length>0&&e.columnModel.autoSizeColumns({columns:i,skipHeader:n,stopAtGroup:e.columnGroup,source:"uiColumnResized"}),e.resizeLeafColumnsToFit("uiColumnResized")})}},t.prototype.onResizeStart=function(e){var o=this.getInitialValues(e);this.storeLocalValues(o),this.toggleColumnResizing(!0)},t.prototype.onResizing=function(e,o,n){n===void 0&&(n="uiColumnResized");var i=this.normaliseDragChange(o),s=this.resizeStartWidth+i;this.resizeColumnsFromLocalValues(s,n,e)},t.prototype.getInitialValues=function(e){var o=this.getColumnsToResize(),n=this.getInitialSizeOfColumns(o),i=this.getSizeRatiosOfColumns(o,n),s={columnsToResize:o,resizeStartWidth:n,resizeRatios:i},a=null;if(e&&(a=this.columnModel.getDisplayedGroupAfter(this.columnGroup)),a){var l=a.getDisplayedLeafColumns(),c=s.groupAfterColumns=l.filter(function(d){return d.isResizable()}),u=s.groupAfterStartWidth=this.getInitialSizeOfColumns(c);s.groupAfterRatios=this.getSizeRatiosOfColumns(c,u)}else s.groupAfterColumns=void 0,s.groupAfterStartWidth=void 0,s.groupAfterRatios=void 0;return s},t.prototype.storeLocalValues=function(e){var o=e.columnsToResize,n=e.resizeStartWidth,i=e.resizeRatios,s=e.groupAfterColumns,a=e.groupAfterStartWidth,l=e.groupAfterRatios;this.resizeCols=o,this.resizeStartWidth=n,this.resizeRatios=i,this.resizeTakeFromCols=s,this.resizeTakeFromStartWidth=a,this.resizeTakeFromRatios=l},t.prototype.clearLocalValues=function(){this.resizeCols=void 0,this.resizeRatios=void 0,this.resizeTakeFromCols=void 0,this.resizeTakeFromRatios=void 0},t.prototype.resizeLeafColumnsToFit=function(e){var o=this.autoWidthCalculator.getPreferredWidthForColumnGroup(this.columnGroup),n=this.getInitialValues();o>n.resizeStartWidth&&this.resizeColumns(n,o,e,!0)},t.prototype.resizeColumnsFromLocalValues=function(e,o,n){var i,s,a;if(n===void 0&&(n=!0),!(!this.resizeCols||!this.resizeRatios)){var l={columnsToResize:this.resizeCols,resizeStartWidth:this.resizeStartWidth,resizeRatios:this.resizeRatios,groupAfterColumns:(i=this.resizeTakeFromCols)!==null&&i!==void 0?i:void 0,groupAfterStartWidth:(s=this.resizeTakeFromStartWidth)!==null&&s!==void 0?s:void 0,groupAfterRatios:(a=this.resizeTakeFromRatios)!==null&&a!==void 0?a:void 0};this.resizeColumns(l,e,o,n)}},t.prototype.resizeColumns=function(e,o,n,i){i===void 0&&(i=!0);var s=e.columnsToResize,a=e.resizeStartWidth,l=e.resizeRatios,c=e.groupAfterColumns,u=e.groupAfterStartWidth,d=e.groupAfterRatios,p=[];if(p.push({columns:s,ratios:l,width:o}),c){var h=o-a;p.push({columns:c,ratios:d,width:u-h})}this.columnModel.resizeColumnSets({resizeSets:p,finished:i,source:n}),i&&this.toggleColumnResizing(!1)},t.prototype.toggleColumnResizing=function(e){this.comp.addOrRemoveCssClass("ag-column-resizing",e)},t.prototype.getColumnsToResize=function(){var e=this.columnGroup.getDisplayedLeafColumns();return e.filter(function(o){return o.isResizable()})},t.prototype.getInitialSizeOfColumns=function(e){return e.reduce(function(o,n){return o+n.getActualWidth()},0)},t.prototype.getSizeRatiosOfColumns=function(e,o){return e.map(function(n){return n.getActualWidth()/o})},t.prototype.normaliseDragChange=function(e){var o=e;return this.gridOptionsService.get("enableRtl")?this.pinned!=="left"&&(o*=-1):this.pinned==="right"&&(o*=-1),o},t.prototype.destroy=function(){r.prototype.destroy.call(this),this.clearLocalValues()},xa([y("horizontalResizeService")],t.prototype,"horizontalResizeService",void 0),xa([y("autoWidthCalculator")],t.prototype,"autoWidthCalculator",void 0),xa([y("columnModel")],t.prototype,"columnModel",void 0),xa([Q],t.prototype,"postConstruct",null),t}(K),cG=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),uG=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},dG=function(r){cG(t,r);function t(e,o){var n=r.call(this)||this;return n.removeChildListenersFuncs=[],n.columnGroup=o,n.comp=e,n}return t.prototype.postConstruct=function(){this.addListenersToChildrenColumns(),this.addManagedListener(this.columnGroup,vt.EVENT_DISPLAYED_CHILDREN_CHANGED,this.onDisplayedChildrenChanged.bind(this)),this.onWidthChanged(),this.addDestroyFunc(this.removeListenersOnChildrenColumns.bind(this))},t.prototype.addListenersToChildrenColumns=function(){var e=this;this.removeListenersOnChildrenColumns();var o=this.onWidthChanged.bind(this);this.columnGroup.getLeafColumns().forEach(function(n){n.addEventListener("widthChanged",o),n.addEventListener("visibleChanged",o),e.removeChildListenersFuncs.push(function(){n.removeEventListener("widthChanged",o),n.removeEventListener("visibleChanged",o)})})},t.prototype.removeListenersOnChildrenColumns=function(){this.removeChildListenersFuncs.forEach(function(e){return e()}),this.removeChildListenersFuncs=[]},t.prototype.onDisplayedChildrenChanged=function(){this.addListenersToChildrenColumns(),this.onWidthChanged()},t.prototype.onWidthChanged=function(){var e=this.columnGroup.getActualWidth();this.comp.setWidth("".concat(e,"px")),this.comp.addOrRemoveCssClass("ag-hidden",e===0)},uG([Q],t.prototype,"postConstruct",null),t}(K),pG=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),Nl=function(){return Nl=Object.assign||function(r){for(var t,e=1,o=arguments.length;e<o;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},Nl.apply(this,arguments)},hG=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},fG=function(r){pG(t,r);function t(e,o){var n=r.call(this,e,o)||this;return n.onSuppressColMoveChange=function(){if(n.isSuppressMoving())n.removeDragSource();else if(!n.dragSource){var i=n.getGui();n.setDragSource(i)}},n.column=e,n}return t.prototype.setComp=function(e,o,n){this.comp=e,this.setGui(o),this.displayName=this.columnModel.getDisplayNameForColumnGroup(this.column,"header"),this.addClasses(),this.setupMovingCss(),this.setupExpandable(),this.setupTooltip(),this.setupUserComp();var i=this.getParentRowCtrl().getPinned(),s=this.column.getProvidedColumnGroup().getLeafColumns();this.createManagedBean(new Eh(s,o)),this.createManagedBean(new Sh(this.column,o,this.beans)),this.createManagedBean(new dG(e,this.column)),this.resizeFeature=this.createManagedBean(new lG(e,n,i,this.column)),this.createManagedBean(new ci(o,{shouldStopEventPropagation:this.shouldStopEventPropagation.bind(this),onTabKeyDown:function(){},handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this)})),this.addManagedPropertyListener(w.EVENT_SUPPRESS_COLUMN_MOVE_CHANGED,this.onSuppressColMoveChange),this.addResizeAndMoveKeyboardListeners()},t.prototype.resizeHeader=function(e,o){if(this.resizeFeature){var n=e===Bt.Left,i=(n?-1:1)*this.resizeMultiplier,s=this.resizeFeature.getInitialValues(o);this.resizeFeature.resizeColumns(s,s.resizeStartWidth+i,"uiColumnResized",!0)}},t.prototype.moveHeader=function(e){var o=this,n=o.eGui,i=o.column,s=o.columnModel,a=o.gridOptionsService,l=o.ctrlsService,c=a.get("enableRtl"),u=e===Bt.Left,d=this.getPinned(),p=n.getBoundingClientRect(),h=p.left,f=p.width,g=Di.normaliseX(u!==c?h-20:h+f+20,d,!0,a,l),_=i.getGroupId(),C=this.focusService.getFocusedHeader();Di.attemptMoveColumns({allMovingColumns:this.column.getLeafColumns(),isFromHeader:!0,hDirection:e,xPosition:g,pinned:d,fromEnter:!1,fakeEvent:!1,gridOptionsService:a,columnModel:s});var E=i.getDisplayedLeafColumns(),T=u?E[0]:Ge(E);this.ctrlsService.getGridBodyCtrl().getScrollFeature().ensureColumnVisible(T,"auto"),!this.isAlive()&&C&&this.restoreFocus(_,i,C)},t.prototype.restoreFocus=function(e,o,n){var i=o.getLeafColumns();if(i.length){var s=i[0].getParent();if(s){var a=this.findGroupWidthId(s,e);a&&this.focusService.focusHeaderPosition({headerPosition:Nl(Nl({},n),{column:a})})}}},t.prototype.findGroupWidthId=function(e,o){for(;e;){if(e.getGroupId()===o)return e;e=e.getParent()}return null},t.prototype.resizeLeafColumnsToFit=function(e){this.resizeFeature&&this.resizeFeature.resizeLeafColumnsToFit(e)},t.prototype.setupUserComp=function(){var e=this,o={displayName:this.displayName,columnGroup:this.column,setExpanded:function(i){e.columnModel.setColumnGroupOpened(e.column.getProvidedColumnGroup(),i,"gridInitializing")},api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context},n=this.userComponentFactory.getHeaderGroupCompDetails(o);this.comp.setUserCompDetails(n)},t.prototype.setupTooltip=function(){var e=this,o=this.column.getColGroupDef(),n={getColumn:function(){return e.column},getGui:function(){return e.eGui},getLocation:function(){return"headerGroup"},getTooltipValue:function(){return o&&o.headerTooltip}};o&&(n.getColDef=function(){return o});var i=this.createManagedBean(new wh(n,this.beans));i.setComp(this.eGui)},t.prototype.setupExpandable=function(){var e=this.column.getProvidedColumnGroup();this.refreshExpanded(),this.addManagedListener(e,st.EVENT_EXPANDABLE_CHANGED,this.refreshExpanded.bind(this)),this.addManagedListener(e,st.EVENT_EXPANDED_CHANGED,this.refreshExpanded.bind(this))},t.prototype.refreshExpanded=function(){var e=this.column;this.expandable=e.isExpandable();var o=e.isExpanded();this.expandable?this.comp.setAriaExpanded(o?"true":"false"):this.comp.setAriaExpanded(void 0)},t.prototype.getColId=function(){return this.column.getUniqueId()},t.prototype.addClasses=function(){var e=this,o=this.column.getColGroupDef(),n=wc.getHeaderClassesFromColDef(o,this.gridOptionsService,null,this.column);if(this.column.isPadding()){n.push("ag-header-group-cell-no-group");var i=this.column.getLeafColumns();i.every(function(s){return s.isSpanHeaderHeight()})&&n.push("ag-header-span-height")}else n.push("ag-header-group-cell-with-group");n.forEach(function(s){return e.comp.addOrRemoveCssClass(s,!0)})},t.prototype.setupMovingCss=function(){var e=this,o=this.column.getProvidedColumnGroup(),n=o.getLeafColumns(),i=function(){return e.comp.addOrRemoveCssClass("ag-header-cell-moving",e.column.isMoving())};n.forEach(function(s){e.addManagedListener(s,We.EVENT_MOVING_CHANGED,i)}),i()},t.prototype.onFocusIn=function(e){if(!this.eGui.contains(e.relatedTarget)){var o=this.getRowIndex();this.beans.focusService.setFocusedHeader(o,this.column)}},t.prototype.handleKeyDown=function(e){r.prototype.handleKeyDown.call(this,e);var o=this.getWrapperHasFocus();if(!(!this.expandable||!o)&&e.key===N.ENTER){var n=this.column,i=!n.isExpanded();this.columnModel.setColumnGroupOpened(n.getProvidedColumnGroup(),i,"uiColumnExpanded")}},t.prototype.setDragSource=function(e){var o=this;if(!this.isSuppressMoving()&&(this.removeDragSource(),!!e)){var n=this,i=n.column,s=n.columnModel,a=n.displayName,l=n.gridOptionsService,c=n.dragAndDropService,u=i.getProvidedColumnGroup().getLeafColumns(),d=!l.get("suppressDragLeaveHidesColumns"),p=this.dragSource={type:no.HeaderCell,eElement:e,getDefaultIconName:function(){return d?St.ICON_HIDE:St.ICON_NOT_ALLOWED},dragItemName:a,getDragItem:function(){return o.getDragItemForGroup(i)},onDragStarted:function(){d=!l.get("suppressDragLeaveHidesColumns"),u.forEach(function(h){return h.setMoving(!0,"uiColumnDragged")})},onDragStopped:function(){return u.forEach(function(h){return h.setMoving(!1,"uiColumnDragged")})},onGridEnter:function(h){var f;if(d){var g=((f=h==null?void 0:h.columns)===null||f===void 0?void 0:f.filter(function(_){return!_.getColDef().lockVisible}))||[];s.setColumnsVisible(g,!0,"uiColumnMoved")}},onGridExit:function(h){var f;if(d){var g=((f=h==null?void 0:h.columns)===null||f===void 0?void 0:f.filter(function(_){return!_.getColDef().lockVisible}))||[];s.setColumnsVisible(g,!1,"uiColumnMoved")}}};c.addDragSource(p,!0)}},t.prototype.getDragItemForGroup=function(e){var o=e.getProvidedColumnGroup().getLeafColumns(),n={};o.forEach(function(s){return n[s.getId()]=s.isVisible()});var i=[];return this.columnModel.getAllDisplayedColumns().forEach(function(s){o.indexOf(s)>=0&&(i.push(s),uo(o,s))}),o.forEach(function(s){return i.push(s)}),{columns:i,visibleState:n}},t.prototype.isSuppressMoving=function(){var e=!1;this.column.getLeafColumns().forEach(function(n){(n.getColDef().suppressMovable||n.getColDef().lockPosition)&&(e=!0)});var o=e||this.gridOptionsService.get("suppressMovableColumns");return o},hG([y("columnModel")],t.prototype,"columnModel",void 0),t}(_c),gG=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),Fa=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},og=function(r){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&r[t],o=0;if(e)return e.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&o>=r.length&&(r=void 0),{value:r&&r[o++],done:!r}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},vG=function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var o=e.call(r),n,i=[],s;try{for(;(t===void 0||t-- >0)&&!(n=o.next()).done;)i.push(n.value)}catch(a){s={error:a}}finally{try{n&&!n.done&&(e=o.return)&&e.call(o)}finally{if(s)throw s.error}}return i},mG=0,yu=function(r){gG(t,r);function t(e,o,n){var i=r.call(this)||this;i.instanceId=mG++,i.rowIndex=e,i.pinned=o,i.type=n;var s=n==Pt.COLUMN_GROUP?"ag-header-row-column-group":n==Pt.FLOATING_FILTER?"ag-header-row-column-filter":"ag-header-row-column";return i.headerRowClass="ag-header-row ".concat(s),i}return t.prototype.postConstruct=function(){this.isPrintLayout=this.gridOptionsService.isDomLayout("print"),this.isEnsureDomOrder=this.gridOptionsService.get("ensureDomOrder")},t.prototype.getInstanceId=function(){return this.instanceId},t.prototype.setComp=function(e,o){o===void 0&&(o=!0),this.comp=e,o&&(this.onRowHeightChanged(),this.onVirtualColumnsChanged()),this.setWidth(),this.addEventListeners()},t.prototype.getHeaderRowClass=function(){return this.headerRowClass},t.prototype.getAriaRowIndex=function(){return this.rowIndex+1},t.prototype.getTransform=function(){if(Wo())return"translateZ(0)"},t.prototype.addEventListeners=function(){var e=this;this.addManagedListener(this.eventService,w.EVENT_COLUMN_RESIZED,this.onColumnResized.bind(this)),this.addManagedListener(this.eventService,w.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.addManagedListener(this.eventService,w.EVENT_VIRTUAL_COLUMNS_CHANGED,function(o){return e.onVirtualColumnsChanged(o.afterScroll)}),this.addManagedListener(this.eventService,w.EVENT_COLUMN_HEADER_HEIGHT_CHANGED,this.onRowHeightChanged.bind(this)),this.addManagedListener(this.eventService,w.EVENT_GRID_STYLES_CHANGED,this.onRowHeightChanged.bind(this)),this.addManagedListener(this.eventService,w.EVENT_ADVANCED_FILTER_ENABLED_CHANGED,this.onRowHeightChanged.bind(this)),this.addManagedPropertyListener("domLayout",this.onDisplayedColumnsChanged.bind(this)),this.addManagedPropertyListener("ensureDomOrder",function(o){return e.isEnsureDomOrder=o.currentValue}),this.addManagedPropertyListener("headerHeight",this.onRowHeightChanged.bind(this)),this.addManagedPropertyListener("pivotHeaderHeight",this.onRowHeightChanged.bind(this)),this.addManagedPropertyListener("groupHeaderHeight",this.onRowHeightChanged.bind(this)),this.addManagedPropertyListener("pivotGroupHeaderHeight",this.onRowHeightChanged.bind(this)),this.addManagedPropertyListener("floatingFiltersHeight",this.onRowHeightChanged.bind(this))},t.prototype.getHeaderCellCtrl=function(e){if(this.headerCellCtrls)return bi(this.headerCellCtrls).find(function(o){return o.getColumnGroupChild()===e})},t.prototype.onDisplayedColumnsChanged=function(){this.isPrintLayout=this.gridOptionsService.isDomLayout("print"),this.onVirtualColumnsChanged(),this.setWidth(),this.onRowHeightChanged()},t.prototype.getType=function(){return this.type},t.prototype.onColumnResized=function(){this.setWidth()},t.prototype.setWidth=function(){var e=this.getWidthForRow();this.comp.setWidth("".concat(e,"px"))},t.prototype.getWidthForRow=function(){if(this.isPrintLayout){var e=this.pinned!=null;return e?0:this.columnModel.getContainerWidth("right")+this.columnModel.getContainerWidth("left")+this.columnModel.getContainerWidth(null)}return this.columnModel.getContainerWidth(this.pinned)},t.prototype.onRowHeightChanged=function(){var e=this.getTopAndHeight(),o=e.topOffset,n=e.rowHeight;this.comp.setTop(o+"px"),this.comp.setHeight(n+"px")},t.prototype.getTopAndHeight=function(){var e=this.columnModel.getHeaderRowCount(),o=[],n=0;this.filterManager.hasFloatingFilters()&&(e++,n=1);for(var i=this.columnModel.getColumnGroupHeaderRowHeight(),s=this.columnModel.getColumnHeaderRowHeight(),a=1+n,l=e-a,c=0;c<l;c++)o.push(i);o.push(s);for(var c=0;c<n;c++)o.push(this.columnModel.getFloatingFiltersHeight());for(var u=0,c=0;c<this.rowIndex;c++)u+=o[c];var d=o[this.rowIndex];return{topOffset:u,rowHeight:d}},t.prototype.getPinned=function(){return this.pinned},t.prototype.getRowIndex=function(){return this.rowIndex},t.prototype.onVirtualColumnsChanged=function(e){e===void 0&&(e=!1);var o=this.getHeaderCtrls(),n=this.isEnsureDomOrder||this.isPrintLayout;this.comp.setHeaderCtrls(o,n,e)},t.prototype.getHeaderCtrls=function(){var e,o,n,i,s=this,a=this.headerCellCtrls;this.headerCellCtrls=new Map;var l=this.getColumnsInViewport();try{for(var c=og(l),u=c.next();!u.done;u=c.next()){var d=u.value;this.recycleAndCreateHeaderCtrls(d,a)}}catch(P){e={error:P}}finally{try{u&&!u.done&&(o=c.return)&&o.call(c)}finally{if(e)throw e.error}}var p=function(P){var A=s.focusService.isHeaderWrapperFocused(P);if(!A)return!1;var b=s.columnModel.isDisplayed(P.getColumnGroupChild());return b};if(a)try{for(var h=og(a),f=h.next();!f.done;f=h.next()){var g=vG(f.value,2),_=g[0],C=g[1],E=p(C);E?this.headerCellCtrls.set(_,C):this.destroyBean(C)}}catch(P){n={error:P}}finally{try{f&&!f.done&&(i=h.return)&&i.call(h)}finally{if(n)throw n.error}}var T=Array.from(this.headerCellCtrls.values());return T},t.prototype.recycleAndCreateHeaderCtrls=function(e,o){if(this.headerCellCtrls&&!e.isEmptyGroup()){var n=e.getUniqueId(),i;o&&(i=o.get(n),o.delete(n));var s=i&&i.getColumnGroupChild()!=e;if(s&&(this.destroyBean(i),i=void 0),i==null)switch(this.type){case Pt.FLOATING_FILTER:i=this.createBean(new Z6(e,this));break;case Pt.COLUMN_GROUP:i=this.createBean(new fG(e,this));break;default:i=this.createBean(new sG(e,this));break}this.headerCellCtrls.set(n,i)}},t.prototype.getColumnsInViewport=function(){return this.isPrintLayout?this.getColumnsInViewportPrintLayout():this.getColumnsInViewportNormalLayout()},t.prototype.getColumnsInViewportPrintLayout=function(){var e=this;if(this.pinned!=null)return[];var o=[],n=this.getActualDepth();return["left",null,"right"].forEach(function(i){var s=e.columnModel.getVirtualHeaderGroupRow(i,n);o=o.concat(s)}),o},t.prototype.getActualDepth=function(){return this.type==Pt.FLOATING_FILTER?this.rowIndex-1:this.rowIndex},t.prototype.getColumnsInViewportNormalLayout=function(){return this.columnModel.getVirtualHeaderGroupRow(this.pinned,this.getActualDepth())},t.prototype.focusHeader=function(e,o){if(!this.headerCellCtrls)return!1;var n=Array.from(this.headerCellCtrls.values()),i=n.find(function(s){return s.getColumnGroupChild()==e});return i?i.focus(o):!1},t.prototype.destroy=function(){var e=this;this.headerCellCtrls&&this.headerCellCtrls.forEach(function(o){e.destroyBean(o)}),this.headerCellCtrls=void 0,r.prototype.destroy.call(this)},Fa([y("columnModel")],t.prototype,"columnModel",void 0),Fa([y("focusService")],t.prototype,"focusService",void 0),Fa([y("filterManager")],t.prototype,"filterManager",void 0),Fa([Q],t.prototype,"postConstruct",null),t}(K),yG=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),nr=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},CG=function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var o=e.call(r),n,i=[],s;try{for(;(t===void 0||t-- >0)&&!(n=o.next()).done;)i.push(n.value)}catch(a){s={error:a}}finally{try{n&&!n.done&&(e=o.return)&&e.call(o)}finally{if(s)throw s.error}}return i},wG=function(r,t,e){if(e||arguments.length===2)for(var o=0,n=t.length,i;o<n;o++)(i||!(o in t))&&(i||(i=Array.prototype.slice.call(t,0,o)),i[o]=t[o]);return r.concat(i||Array.prototype.slice.call(t))},_G=function(r){yG(t,r);function t(e){var o=r.call(this)||this;return o.hidden=!1,o.includeFloatingFilter=!1,o.groupsRowCtrls=[],o.pinned=e,o}return t.prototype.setComp=function(e,o){this.comp=e,this.eViewport=o,this.setupCenterWidth(),this.setupPinnedWidth(),this.setupDragAndDrop(this.eViewport),this.addManagedListener(this.eventService,w.EVENT_GRID_COLUMNS_CHANGED,this.onGridColumnsChanged.bind(this)),this.addManagedListener(this.eventService,w.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.addManagedListener(this.eventService,w.EVENT_ADVANCED_FILTER_ENABLED_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.ctrlsService.registerHeaderContainer(this,this.pinned),this.columnModel.isReady()&&this.refresh()},t.prototype.setupDragAndDrop=function(e){var o=new H6(this.pinned,e);this.createManagedBean(o)},t.prototype.refresh=function(e){var o=this;e===void 0&&(e=!1);var n=new xr,i=this.focusService.getFocusHeaderToUseAfterRefresh(),s=function(){var u=o.columnModel.getHeaderRowCount()-1;o.groupsRowCtrls=o.destroyBeans(o.groupsRowCtrls);for(var d=0;d<u;d++){var p=o.createBean(new yu(n.next(),o.pinned,Pt.COLUMN_GROUP));o.groupsRowCtrls.push(p)}},a=function(){var u=n.next(),d=!o.hidden&&(o.columnsRowCtrl==null||!e||o.columnsRowCtrl.getRowIndex()!==u),p=d||o.hidden;p&&(o.columnsRowCtrl=o.destroyBean(o.columnsRowCtrl)),d&&(o.columnsRowCtrl=o.createBean(new yu(u,o.pinned,Pt.COLUMN)))},l=function(){o.includeFloatingFilter=o.filterManager.hasFloatingFilters()&&!o.hidden;var u=function(){o.filtersRowCtrl=o.destroyBean(o.filtersRowCtrl)};if(!o.includeFloatingFilter){u();return}var d=n.next();if(o.filtersRowCtrl){var p=o.filtersRowCtrl.getRowIndex()!==d;(!e||p)&&u()}o.filtersRowCtrl||(o.filtersRowCtrl=o.createBean(new yu(d,o.pinned,Pt.FLOATING_FILTER)))};s(),a(),l();var c=this.getAllCtrls();this.comp.setCtrls(c),this.restoreFocusOnHeader(i)},t.prototype.restoreFocusOnHeader=function(e){e==null||e.column.getPinned()!=this.pinned||this.focusService.focusHeaderPosition({headerPosition:e})},t.prototype.getAllCtrls=function(){var e=wG([],CG(this.groupsRowCtrls),!1);return this.columnsRowCtrl&&e.push(this.columnsRowCtrl),this.filtersRowCtrl&&e.push(this.filtersRowCtrl),e},t.prototype.onGridColumnsChanged=function(){this.refresh(!0)},t.prototype.onDisplayedColumnsChanged=function(){var e=this.filterManager.hasFloatingFilters()&&!this.hidden;this.includeFloatingFilter!==e&&this.refresh(!0)},t.prototype.setupCenterWidth=function(){var e=this;this.pinned==null&&this.createManagedBean(new _h(function(o){return e.comp.setCenterWidth("".concat(o,"px"))},!0))},t.prototype.setHorizontalScroll=function(e){this.comp.setViewportScrollLeft(e)},t.prototype.setupPinnedWidth=function(){var e=this;if(this.pinned!=null){var o=this.pinned==="left",n=this.pinned==="right";this.hidden=!0;var i=function(){var s=o?e.pinnedWidthService.getPinnedLeftWidth():e.pinnedWidthService.getPinnedRightWidth();if(s!=null){var a=s==0,l=e.hidden!==a,c=e.gridOptionsService.get("enableRtl"),u=e.gridOptionsService.getScrollbarWidth(),d=e.scrollVisibleService.isVerticalScrollShowing()&&(c&&o||!c&&n),p=d?s+u:s;e.comp.setPinnedContainerWidth("".concat(p,"px")),e.comp.setDisplayed(!a),l&&(e.hidden=a,e.refresh())}};this.addManagedListener(this.eventService,w.EVENT_LEFT_PINNED_WIDTH_CHANGED,i),this.addManagedListener(this.eventService,w.EVENT_RIGHT_PINNED_WIDTH_CHANGED,i),this.addManagedListener(this.eventService,w.EVENT_SCROLL_VISIBILITY_CHANGED,i),this.addManagedListener(this.eventService,w.EVENT_SCROLLBAR_WIDTH_CHANGED,i)}},t.prototype.getHeaderCtrlForColumn=function(e){if(e instanceof We)return this.columnsRowCtrl?this.columnsRowCtrl.getHeaderCellCtrl(e):void 0;if(this.groupsRowCtrls.length!==0)for(var o=0;o<this.groupsRowCtrls.length;o++){var n=this.groupsRowCtrls[o].getHeaderCellCtrl(e);if(n)return n}},t.prototype.getHtmlElementForColumnHeader=function(e){var o=this.getHeaderCtrlForColumn(e);return o?o.getGui():null},t.prototype.getRowType=function(e){var o=this.getAllCtrls(),n=o[e];return n?n.getType():void 0},t.prototype.focusHeader=function(e,o,n){var i=this.getAllCtrls(),s=i[e];return s?s.focusHeader(o,n):!1},t.prototype.getViewport=function(){return this.eViewport},t.prototype.getRowCount=function(){return this.groupsRowCtrls.length+(this.columnsRowCtrl?1:0)+(this.filtersRowCtrl?1:0)},t.prototype.destroy=function(){this.filtersRowCtrl&&(this.filtersRowCtrl=this.destroyBean(this.filtersRowCtrl)),this.columnsRowCtrl&&(this.columnsRowCtrl=this.destroyBean(this.columnsRowCtrl)),this.groupsRowCtrls&&this.groupsRowCtrls.length&&(this.groupsRowCtrls=this.destroyBeans(this.groupsRowCtrls)),r.prototype.destroy.call(this)},nr([y("ctrlsService")],t.prototype,"ctrlsService",void 0),nr([y("scrollVisibleService")],t.prototype,"scrollVisibleService",void 0),nr([y("pinnedWidthService")],t.prototype,"pinnedWidthService",void 0),nr([y("columnModel")],t.prototype,"columnModel",void 0),nr([y("focusService")],t.prototype,"focusService",void 0),nr([y("filterManager")],t.prototype,"filterManager",void 0),t}(K),SG=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),Cu=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},wu=function(r){SG(t,r);function t(e){var o=r.call(this)||this;return o.headerRowComps={},o.rowCompsList=[],o.pinned=e,o}return t.prototype.init=function(){var e=this;this.selectAndSetTemplate();var o={setDisplayed:function(i){return e.setDisplayed(i)},setCtrls:function(i){return e.setCtrls(i)},setCenterWidth:function(i){return e.eCenterContainer.style.width=i},setViewportScrollLeft:function(i){return e.getGui().scrollLeft=i},setPinnedContainerWidth:function(i){var s=e.getGui();s.style.width=i,s.style.maxWidth=i,s.style.minWidth=i}},n=this.createManagedBean(new _G(this.pinned));n.setComp(o,this.getGui())},t.prototype.selectAndSetTemplate=function(){var e=this.pinned=="left",o=this.pinned=="right",n=e?t.PINNED_LEFT_TEMPLATE:o?t.PINNED_RIGHT_TEMPLATE:t.CENTER_TEMPLATE;this.setTemplate(n),this.eRowContainer=this.eCenterContainer?this.eCenterContainer:this.getGui()},t.prototype.destroyRowComps=function(){this.setCtrls([])},t.prototype.destroyRowComp=function(e){this.destroyBean(e),this.eRowContainer.removeChild(e.getGui())},t.prototype.setCtrls=function(e){var o=this,n=this.headerRowComps;this.headerRowComps={},this.rowCompsList=[];var i,s=function(a){var l=a.getGui(),c=l.parentElement!=o.eRowContainer;c&&o.eRowContainer.appendChild(l),i&&sh(o.eRowContainer,l,i),i=l};e.forEach(function(a){var l=a.getInstanceId(),c=n[l];delete n[l];var u=c||o.createBean(new z6(a));o.headerRowComps[l]=u,o.rowCompsList.push(u),s(u)}),ii(n).forEach(function(a){return o.destroyRowComp(a)})},t.PINNED_LEFT_TEMPLATE='<div class="ag-pinned-left-header" role="presentation"></div>',t.PINNED_RIGHT_TEMPLATE='<div class="ag-pinned-right-header" role="presentation"></div>',t.CENTER_TEMPLATE=`<div class="ag-header-viewport" role="presentation">
            <div class="ag-header-container" ref="eCenterContainer" role="rowgroup"></div>
        </div>`,Cu([ee("eCenterContainer")],t.prototype,"eCenterContainer",void 0),Cu([Q],t.prototype,"init",null),Cu([zt],t.prototype,"destroyRowComps",null),t}(Re),EG=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),us=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},Jo;(function(r){r[r.UP=0]="UP",r[r.DOWN=1]="DOWN",r[r.LEFT=2]="LEFT",r[r.RIGHT=3]="RIGHT"})(Jo||(Jo={}));var RG=function(r){EG(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.postConstruct=function(){var e=this;this.ctrlsService.whenReady(function(o){e.gridBodyCon=o.gridBodyCtrl})},t.prototype.getHeaderRowCount=function(){var e=this.ctrlsService.getHeaderRowContainerCtrl();return e?e.getRowCount():0},t.prototype.navigateVertically=function(e,o,n){if(o||(o=this.focusService.getFocusedHeader()),!o)return!1;var i=o.headerRowIndex,s=o.column,a=this.getHeaderRowCount(),l=e===Jo.UP,c=l?this.headerPositionUtils.getColumnVisibleParent(s,i):this.headerPositionUtils.getColumnVisibleChild(s,i),u=c.nextRow,d=c.nextFocusColumn,p=!1;return u<0&&(u=0,d=s,p=!0),u>=a&&(u=-1),!p&&!d?!1:this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:u,column:d},allowUserOverride:!0,event:n})},t.prototype.navigateHorizontally=function(e,o,n){o===void 0&&(o=!1);var i=this.focusService.getFocusedHeader(),s=e===Jo.LEFT,a=this.gridOptionsService.get("enableRtl"),l,c;return s!==a?(c="Before",l=this.headerPositionUtils.findHeader(i,c)):(c="After",l=this.headerPositionUtils.findHeader(i,c)),l||!o?this.focusService.focusHeaderPosition({headerPosition:l,direction:c,fromTab:o,allowUserOverride:!0,event:n}):this.focusNextHeaderRow(i,c,n)},t.prototype.focusNextHeaderRow=function(e,o,n){var i=e.headerRowIndex,s=null,a;return o==="Before"?i>0&&(a=i-1,s=this.headerPositionUtils.findColAtEdgeForHeaderRow(a,"end")):(a=i+1,s=this.headerPositionUtils.findColAtEdgeForHeaderRow(a,"start")),this.focusService.focusHeaderPosition({headerPosition:s,direction:o,fromTab:!0,allowUserOverride:!0,event:n})},t.prototype.scrollToColumn=function(e,o){if(o===void 0&&(o="After"),!e.getPinned()){var n;if(e instanceof vt){var i=e.getDisplayedLeafColumns();n=o==="Before"?Ge(i):i[0]}else n=e;this.gridBodyCon.getScrollFeature().ensureColumnVisible(n)}},us([y("focusService")],t.prototype,"focusService",void 0),us([y("headerPositionUtils")],t.prototype,"headerPositionUtils",void 0),us([y("ctrlsService")],t.prototype,"ctrlsService",void 0),us([Q],t.prototype,"postConstruct",null),t=us([ne("headerNavigationService")],t),t}(K),TG=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),ds=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},bG=function(r){TG(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.setComp=function(e,o,n){this.comp=e,this.eGui=o,this.createManagedBean(new ci(n,{onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),onFocusOut:this.onFocusOut.bind(this)})),this.addManagedListener(this.eventService,w.EVENT_COLUMN_PIVOT_MODE_CHANGED,this.onPivotModeChanged.bind(this)),this.addManagedListener(this.eventService,w.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.onPivotModeChanged(),this.setupHeaderHeight(),this.ctrlsService.registerGridHeaderCtrl(this)},t.prototype.setupHeaderHeight=function(){var e=this.setHeaderHeight.bind(this);e(),this.addManagedPropertyListener("headerHeight",e),this.addManagedPropertyListener("pivotHeaderHeight",e),this.addManagedPropertyListener("groupHeaderHeight",e),this.addManagedPropertyListener("pivotGroupHeaderHeight",e),this.addManagedPropertyListener("floatingFiltersHeight",e),this.addManagedListener(this.eventService,w.EVENT_DISPLAYED_COLUMNS_CHANGED,e),this.addManagedListener(this.eventService,w.EVENT_COLUMN_HEADER_HEIGHT_CHANGED,e),this.addManagedListener(this.eventService,w.EVENT_GRID_STYLES_CHANGED,e),this.addManagedListener(this.eventService,w.EVENT_ADVANCED_FILTER_ENABLED_CHANGED,e)},t.prototype.getHeaderHeight=function(){return this.headerHeight},t.prototype.setHeaderHeight=function(){var e=this.columnModel,o=0,n=e.getHeaderRowCount(),i,s=this.filterManager.hasFloatingFilters();s&&(n++,o=1);var a=this.columnModel.getColumnGroupHeaderRowHeight(),l=this.columnModel.getColumnHeaderRowHeight(),c=1+o,u=n-c;if(i=o*e.getFloatingFiltersHeight(),i+=u*a,i+=l,this.headerHeight!==i){this.headerHeight=i;var d="".concat(i+1,"px");this.comp.setHeightAndMinHeight(d),this.eventService.dispatchEvent({type:w.EVENT_HEADER_HEIGHT_CHANGED})}},t.prototype.onPivotModeChanged=function(){var e=this.columnModel.isPivotMode();this.comp.addOrRemoveCssClass("ag-pivot-on",e),this.comp.addOrRemoveCssClass("ag-pivot-off",!e)},t.prototype.onDisplayedColumnsChanged=function(){var e=this.columnModel.getAllDisplayedColumns(),o=e.some(function(n){return n.isSpanHeaderHeight()});this.comp.addOrRemoveCssClass("ag-header-allow-overflow",o)},t.prototype.onTabKeyDown=function(e){var o=this.gridOptionsService.get("enableRtl"),n=e.shiftKey!==o?Jo.LEFT:Jo.RIGHT;(this.headerNavigationService.navigateHorizontally(n,!0,e)||this.focusService.focusNextGridCoreContainer(e.shiftKey))&&e.preventDefault()},t.prototype.handleKeyDown=function(e){var o=null;switch(e.key){case N.LEFT:o=Jo.LEFT;case N.RIGHT:W(o)||(o=Jo.RIGHT),this.headerNavigationService.navigateHorizontally(o,!1,e);break;case N.UP:o=Jo.UP;case N.DOWN:W(o)||(o=Jo.DOWN),this.headerNavigationService.navigateVertically(o,null,e)&&e.preventDefault();break;default:return}},t.prototype.onFocusOut=function(e){var o=this.gridOptionsService.getDocument(),n=e.relatedTarget;!n&&this.eGui.contains(o.activeElement)||this.eGui.contains(n)||this.focusService.clearFocusedHeader()},ds([y("headerNavigationService")],t.prototype,"headerNavigationService",void 0),ds([y("focusService")],t.prototype,"focusService",void 0),ds([y("columnModel")],t.prototype,"columnModel",void 0),ds([y("ctrlsService")],t.prototype,"ctrlsService",void 0),ds([y("filterManager")],t.prototype,"filterManager",void 0),t}(K),AG=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),OG=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},PG=function(r){AG(t,r);function t(){return r.call(this,t.TEMPLATE)||this}return t.prototype.postConstruct=function(){var e=this,o={addOrRemoveCssClass:function(s,a){return e.addOrRemoveCssClass(s,a)},setHeightAndMinHeight:function(s){e.getGui().style.height=s,e.getGui().style.minHeight=s}},n=this.createManagedBean(new bG);n.setComp(o,this.getGui(),this.getFocusableElement());var i=function(s){e.createManagedBean(s),e.appendChild(s)};i(new wu("left")),i(new wu(null)),i(new wu("right"))},t.TEMPLATE='<div class="ag-header" role="presentation"/>',OG([Q],t.prototype,"postConstruct",null),t}(Re),IG=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),_u=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},DG=function(r){IG(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.addResizeBar=function(e){var o=this,n={dragStartPixels:e.dragStartPixels||0,eElement:e.eResizeBar,onDragStart:this.onDragStart.bind(this,e),onDragStop:this.onDragStop.bind(this,e),onDragging:this.onDragging.bind(this,e),includeTouch:!0,stopPropagationForTouch:!0};this.dragService.addDragSource(n);var i=function(){return o.dragService.removeDragSource(n)};return i},t.prototype.onDragStart=function(e,o){this.dragStartX=o.clientX,this.setResizeIcons();var n=o instanceof MouseEvent&&o.shiftKey===!0;e.onResizeStart(n)},t.prototype.setResizeIcons=function(){var e=this.ctrlsService.getGridCtrl();e.setResizeCursor(!0),e.disableUserSelect(!0)},t.prototype.onDragStop=function(e,o){e.onResizeEnd(this.resizeAmount),this.resetIcons()},t.prototype.resetIcons=function(){var e=this.ctrlsService.getGridCtrl();e.setResizeCursor(!1),e.disableUserSelect(!1)},t.prototype.onDragging=function(e,o){this.resizeAmount=o.clientX-this.dragStartX,e.onResizing(this.resizeAmount)},_u([y("dragService")],t.prototype,"dragService",void 0),_u([y("ctrlsService")],t.prototype,"ctrlsService",void 0),t=_u([ne("horizontalResizeService")],t),t}(K),MG=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),ps=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},LG=function(r){MG(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.hideActiveMenu=function(){this.hidePopup&&this.hidePopup()},t.prototype.showMenuAfterMouseEvent=function(e,o){var n=this;this.showPopup(e,function(i){n.popupService.positionPopupUnderMouseEvent({column:e,type:"columnMenu",mouseEvent:o,ePopup:i})},"columnMenu",o.target)},t.prototype.showMenuAfterButtonClick=function(e,o,n){var i=this;this.showPopup(e,function(s){i.popupService.positionPopupByComponent({type:n,eventSource:o,ePopup:s,keepWithinBounds:!0,position:"under",column:e})},n,o)},t.prototype.showPopup=function(e,o,n,i){var s=this,a=this.filterManager.getOrCreateFilterWrapper(e,"COLUMN_MENU");if(!a)throw new Error("AG Grid - unable to show popup filter, filter instantiation failed");var l=document.createElement("div");yt(l,"presentation"),l.classList.add("ag-menu"),this.tabListener=this.addManagedListener(l,"keydown",function(g){return s.trapFocusWithin(g,l)}),a.guiPromise.then(function(g){return l.appendChild(g)});var c,u=function(){var g;return(g=a.filterPromise)===null||g===void 0?void 0:g.then(function(_){var C;return(C=_==null?void 0:_.afterGuiDetached)===null||C===void 0?void 0:C.call(_)})},d=i||this.ctrlsService.getGridBodyCtrl().getGui(),p=function(g){e.setMenuVisible(!1,"contextMenu");var _=g instanceof KeyboardEvent;if(s.tabListener&&(s.tabListener=s.tabListener()),_&&i&&io(i)){var C=s.focusService.findTabbableParent(i);C&&C.focus()}u()},h=this.localeService.getLocaleTextFunc(),f=this.popupService.addPopup({modal:!0,eChild:l,closeOnEsc:!0,closedCallback:p,positionCallback:function(){return o(l)},anchorToElement:d,ariaLabel:h("ariaLabelColumnMenu","Column Menu")});f&&(this.hidePopup=c=f.hideFunc),a.filterPromise.then(function(g){o(l),g.afterGuiAttached&&g.afterGuiAttached({container:n,hidePopup:c})}),e.setMenuVisible(!0,"contextMenu")},t.prototype.trapFocusWithin=function(e,o){e.key!==N.TAB||e.defaultPrevented||this.focusService.findNextFocusableElement(o,!1,e.shiftKey)||(e.preventDefault(),this.focusService.focusInto(o,e.shiftKey))},t.prototype.isMenuEnabled=function(e){return e.isFilterAllowed()&&e.getMenuTabs(["filterMenuTab"]).includes("filterMenuTab")},ps([y("filterManager")],t.prototype,"filterManager",void 0),ps([y("popupService")],t.prototype,"popupService",void 0),ps([y("focusService")],t.prototype,"focusService",void 0),ps([y("ctrlsService")],t.prototype,"ctrlsService",void 0),t=ps([ne("menuFactory")],t),t}(K),xG=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),Na=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i};(function(r){xG(t,r);function t(e){var o=r.call(this,t.getTemplate(e.cssClass))||this;return o.items=[],o.tabbedItemScrollMap=new Map,o.params=e,e.items&&e.items.forEach(function(n){return o.addItem(n)}),o}return t.prototype.postConstruct=function(){var e=this;this.createManagedBean(new ci(this.getFocusableElement(),{onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this)})),this.addDestroyFunc(function(){var o,n,i;return(i=(n=(o=e.activeItem)===null||o===void 0?void 0:o.tabbedItem)===null||n===void 0?void 0:n.afterDetachedCallback)===null||i===void 0?void 0:i.call(n)})},t.getTemplate=function(e){return'<div class="ag-tabs '.concat(e,`">
            <div ref="eHeader" role="tablist" class="ag-tabs-header `).concat(e?"".concat(e,"-header"):"",`"></div>
            <div ref="eBody" role="presentation" class="ag-tabs-body `).concat(e?"".concat(e,"-body"):"",`"></div>
        </div>`)},t.prototype.handleKeyDown=function(e){var o=this.gridOptionsService.getDocument();switch(e.key){case N.RIGHT:case N.LEFT:if(!this.eHeader.contains(o.activeElement))return;var n=e.key===N.RIGHT,i=this.gridOptionsService.get("enableRtl"),s=this.items.indexOf(this.activeItem),a=n!==i?Math.min(s+1,this.items.length-1):Math.max(s-1,0);if(s===a)return;e.preventDefault();var l=this.items[a];this.showItemWrapper(l),l.eHeaderButton.focus();break;case N.UP:case N.DOWN:e.stopPropagation();break}},t.prototype.onTabKeyDown=function(e){if(!e.defaultPrevented){var o=this,n=o.focusService,i=o.eHeader,s=o.eBody,a=o.activeItem,l=this.gridOptionsService.getDocument(),c=l.activeElement,u=e.target;if(e.preventDefault(),i.contains(c)){n.focusInto(s,e.shiftKey);return}var d=null;n.isTargetUnderManagedComponent(s,u)&&(e.shiftKey&&(d=this.focusService.findFocusableElementBeforeTabGuard(s,u)),d||(d=a.eHeaderButton)),!d&&s.contains(c)&&(d=n.findNextFocusableElement(s,!1,e.shiftKey),d||(d=a.eHeaderButton)),d&&d.focus()}},t.prototype.setAfterAttachedParams=function(e){this.afterAttachedParams=e},t.prototype.showFirstItem=function(){this.items.length>0&&this.showItemWrapper(this.items[0])},t.prototype.addItem=function(e){var o=document.createElement("span");yt(o,"tab"),o.setAttribute("tabindex","-1"),o.appendChild(e.title),o.classList.add("ag-tab"),this.eHeader.appendChild(o),In(o,e.titleLabel);var n={tabbedItem:e,eHeaderButton:o};this.items.push(n),o.addEventListener("click",this.showItemWrapper.bind(this,n))},t.prototype.showItem=function(e){var o=this.items.find(function(n){return n.tabbedItem===e});o&&this.showItemWrapper(o)},t.prototype.showItemWrapper=function(e){var o=this,n,i,s=e.tabbedItem,a=e.eHeaderButton;if(this.params.onItemClicked&&this.params.onItemClicked({item:s}),this.activeItem===e){Iy(this.params.onActiveItemClicked);return}this.lastScrollListener&&(this.lastScrollListener=this.lastScrollListener()),Et(this.eBody),s.bodyPromise.then(function(l){o.eBody.appendChild(l);var c=!o.focusService.isKeyboardMode();if(o.focusService.focusInto(o.eBody,!1,c),s.afterAttachedCallback&&s.afterAttachedCallback(o.afterAttachedParams),o.params.keepScrollPosition){var u=s.getScrollableContainer&&s.getScrollableContainer()||l;o.lastScrollListener=o.addManagedListener(u,"scroll",function(){o.tabbedItemScrollMap.set(s.name,u.scrollTop)});var d=o.tabbedItemScrollMap.get(s.name);d!==void 0&&setTimeout(function(){u.scrollTop=d},0)}}),this.activeItem&&(this.activeItem.eHeaderButton.classList.remove("ag-tab-selected"),(i=(n=this.activeItem.tabbedItem).afterDetachedCallback)===null||i===void 0||i.call(n)),a.classList.add("ag-tab-selected"),this.activeItem=e},Na([y("focusService")],t.prototype,"focusService",void 0),Na([ee("eHeader")],t.prototype,"eHeader",void 0),Na([ee("eBody")],t.prototype,"eBody",void 0),Na([Q],t.prototype,"postConstruct",null),t})(Re);var FG=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),NG=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},GG=50,kG=function(r){FG(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.polyfillFunctions=[],e}return t.prototype.observeResize=function(e,o){var n=this,i=this.gridOptionsService.getWindow(),s=function(){var u=new i.ResizeObserver(o);return u.observe(e),function(){return u.disconnect()}},a=function(){var u=Td(e),d=Rd(e),p=!0,h=function(){if(p){var f=Td(e),g=Rd(e),_=f!==u||g!==d;_&&(u=f,d=g,o()),n.doNextPolyfillTurn(h)}};return h(),function(){return p=!1}},l=this.gridOptionsService.get("suppressBrowserResizeObserver"),c=!!i.ResizeObserver;return c&&!l?s():a()},t.prototype.doNextPolyfillTurn=function(e){this.polyfillFunctions.push(e),this.schedulePolyfill()},t.prototype.schedulePolyfill=function(){var e=this;if(!this.polyfillScheduled){var o=function(){var n=e.polyfillFunctions;e.polyfillScheduled=!1,e.polyfillFunctions=[],n.forEach(function(i){return i()})};this.polyfillScheduled=!0,this.getFrameworkOverrides().setTimeout(o,GG)}},t=NG([ne("resizeObserverService")],t),t}(K),HG=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),Ga=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},VG=function(r){HG(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.createTasksP1={list:[],sorted:!1},e.createTasksP2={list:[],sorted:!1},e.destroyTasks=[],e.ticking=!1,e.scrollGoingDown=!0,e.lastPage=0,e.lastScrollTop=0,e.taskCount=0,e.cancelledTasks=new Set,e}return t.prototype.setScrollTop=function(e){var o=this.gridOptionsService.get("pagination");if(this.scrollGoingDown=e>=this.lastScrollTop,o&&e===0){var n=this.paginationProxy.getCurrentPage();n!==this.lastPage&&(this.lastPage=n,this.scrollGoingDown=!0)}this.lastScrollTop=e},t.prototype.init=function(){this.useAnimationFrame=!this.gridOptionsService.get("suppressAnimationFrame")},t.prototype.isOn=function(){return this.useAnimationFrame},t.prototype.verifyAnimationFrameOn=function(e){this.useAnimationFrame===!1&&console.warn("AG Grid: AnimationFrameService.".concat(e," called but animation frames are off"))},t.prototype.createTask=function(e,o,n){this.verifyAnimationFrameOn(n);var i={task:e,index:o,createOrder:++this.taskCount};this.addTaskToList(this[n],i),this.schedule()},t.prototype.cancelTask=function(e){this.cancelledTasks.add(e)},t.prototype.addTaskToList=function(e,o){e.list.push(o),e.sorted=!1},t.prototype.sortTaskList=function(e){if(!e.sorted){var o=this.scrollGoingDown?1:-1;e.list.sort(function(n,i){return n.index!==i.index?o*(i.index-n.index):i.createOrder-n.createOrder}),e.sorted=!0}},t.prototype.addDestroyTask=function(e){this.verifyAnimationFrameOn("createTasksP3"),this.destroyTasks.push(e),this.schedule()},t.prototype.executeFrame=function(e){this.verifyAnimationFrameOn("executeFrame");for(var o=this.createTasksP1,n=o.list,i=this.createTasksP2,s=i.list,a=this.destroyTasks,l=new Date().getTime(),c=new Date().getTime()-l,u=e<=0,d=this.ctrlsService.getGridBodyCtrl();u||c<e;){var p=d.getScrollFeature().scrollGridIfNeeded();if(!p){var h=void 0;if(n.length)this.sortTaskList(o),h=n.pop().task;else if(s.length)this.sortTaskList(i),h=s.pop().task;else if(a.length)h=a.pop();else{this.cancelledTasks.clear();break}this.cancelledTasks.has(h)||h()}c=new Date().getTime()-l}n.length||s.length||a.length?this.requestFrame():this.stopTicking()},t.prototype.stopTicking=function(){this.ticking=!1},t.prototype.flushAllFrames=function(){this.useAnimationFrame&&this.executeFrame(-1)},t.prototype.schedule=function(){this.useAnimationFrame&&(this.ticking||(this.ticking=!0,this.requestFrame()))},t.prototype.requestFrame=function(){var e=this.executeFrame.bind(this,60);this.requestAnimationFrame(e)},t.prototype.requestAnimationFrame=function(e){var o=this.gridOptionsService.getWindow();o.requestAnimationFrame?o.requestAnimationFrame(e):o.webkitRequestAnimationFrame?o.webkitRequestAnimationFrame(e):o.setTimeout(e,0)},t.prototype.isQueueEmpty=function(){return!this.ticking},t.prototype.debounce=function(e){var o=this,n=!1;return function(){if(!o.isOn()){o.getFrameworkOverrides().setTimeout(e,0);return}n||(n=!0,o.addDestroyTask(function(){n=!1,e()}))}},Ga([y("ctrlsService")],t.prototype,"ctrlsService",void 0),Ga([y("paginationProxy")],t.prototype,"paginationProxy",void 0),Ga([Q],t.prototype,"init",null),t=Ga([ne("animationFrameService")],t),t}(K),Ie;(function(r){r.EVERYTHING="group",r.FILTER="filter",r.SORT="sort",r.MAP="map",r.AGGREGATE="aggregate",r.FILTER_AGGREGATES="filter_aggregates",r.PIVOT="pivot",r.NOTHING="nothing"})(Ie||(Ie={}));var BG=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),Su=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},UG=function(r){BG(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.postConstruct=function(){this.isClientSideRowModel=this.rowModel.getType()==="clientSide"},t.prototype.expandRows=function(e){if(this.isClientSideRowModel){var o=new Set(e);this.rowModel.forEachNode(function(n){n.id&&o.has(n.id)&&(n.expanded=!0)}),this.onGroupExpandedOrCollapsed()}},t.prototype.getExpandedRows=function(){var e=[];return this.rowModel.forEachNode(function(o){var n=o.expanded,i=o.id;n&&i&&e.push(i)}),e},t.prototype.expandAll=function(e){this.isClientSideRowModel&&this.rowModel.expandOrCollapseAll(e)},t.prototype.setRowNodeExpanded=function(e,o,n){e&&(n&&e.parent&&e.parent.level!==-1&&this.setRowNodeExpanded(e.parent,o,n),e.setExpanded(o))},t.prototype.onGroupExpandedOrCollapsed=function(){this.isClientSideRowModel&&this.rowModel.refreshModel({step:Ie.MAP})},Su([y("rowModel")],t.prototype,"rowModel",void 0),Su([Q],t.prototype,"postConstruct",null),t=Su([ne("expansionService")],t),t}(K),jG=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),hs=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},WG=function(r){jG(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.postConstruct=function(){var e=this;this.ctrlsService.whenReady(function(o){e.centerRowContainerCtrl=o.centerRowContainerCtrl})},t.prototype.getPreferredWidthForColumn=function(e,o){var n=this.getHeaderCellForColumn(e);if(!n)return-1;var i=this.rowRenderer.getAllCellsForColumn(e);return o||i.push(n),this.addElementsToContainerAndGetWidth(i)},t.prototype.getPreferredWidthForColumnGroup=function(e){var o=this.getHeaderCellForColumn(e);return o?this.addElementsToContainerAndGetWidth([o]):-1},t.prototype.addElementsToContainerAndGetWidth=function(e){var o=this,n=document.createElement("form");n.style.position="fixed";var i=this.centerRowContainerCtrl.getContainerElement();e.forEach(function(l){return o.cloneItemIntoDummy(l,n)}),i.appendChild(n);var s=n.offsetWidth;i.removeChild(n);var a=this.getAutoSizePadding();return s+a},t.prototype.getAutoSizePadding=function(){return this.gridOptionsService.get("autoSizePadding")},t.prototype.getHeaderCellForColumn=function(e){var o=null;return this.ctrlsService.getHeaderRowContainerCtrls().forEach(function(n){var i=n.getHtmlElementForColumnHeader(e);i!=null&&(o=i)}),o},t.prototype.cloneItemIntoDummy=function(e,o){var n=e.cloneNode(!0);n.style.width="",n.style.position="static",n.style.left="";var i=document.createElement("div"),s=i.classList,a=["ag-header-cell","ag-header-group-cell"].some(function(p){return n.classList.contains(p)});a?(s.add("ag-header","ag-header-row"),i.style.position="static"):s.add("ag-row");for(var l=e.parentElement;l;){var c=["ag-header-row","ag-row"].some(function(p){return l.classList.contains(p)});if(c){for(var u=0;u<l.classList.length;u++){var d=l.classList[u];d!="ag-row-position-absolute"&&s.add(d)}break}l=l.parentElement}i.appendChild(n),o.appendChild(i)},hs([y("rowRenderer")],t.prototype,"rowRenderer",void 0),hs([y("ctrlsService")],t.prototype,"ctrlsService",void 0),hs([y("rowCssClassCalculator")],t.prototype,"rowCssClassCalculator",void 0),hs([Q],t.prototype,"postConstruct",null),t=hs([ne("autoWidthCalculator")],t),t}(K),zG=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),ka=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},$G=function(r){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&r[t],o=0;if(e)return e.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&o>=r.length&&(r=void 0),{value:r&&r[o++],done:!r}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},KG=function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var o=e.call(r),n,i=[],s;try{for(;(t===void 0||t-- >0)&&!(n=o.next()).done;)i.push(n.value)}catch(a){s={error:a}}finally{try{n&&!n.done&&(e=o.return)&&e.call(o)}finally{if(s)throw s.error}}return i},YG=function(r,t,e){if(e||arguments.length===2)for(var o=0,n=t.length,i;o<n;o++)(i||!(o in t))&&(i||(i=Array.prototype.slice.call(t,0,o)),i[o]=t[o]);return r.concat(i||Array.prototype.slice.call(t))},qG=function(r){zG(t,r);function t(e,o){var n=r.call(this)||this;return n.createRowCon=e,n.destroyRowCtrls=o,n.stickyRowCtrls=[],n.containerHeight=0,n}return t.prototype.postConstruct=function(){var e=this;this.isClientSide=this.rowModel.getType()==="clientSide",this.ctrlsService.whenReady(function(o){e.gridBodyCtrl=o.gridBodyCtrl})},t.prototype.getStickyRowCtrls=function(){return this.stickyRowCtrls},t.prototype.checkStickyRows=function(){var e=this,o=0;if(!this.gridOptionsService.isGroupRowsSticky())return this.refreshNodesAndContainerHeight([],o);for(var n=[],i=this.rowRenderer.getFirstVisibleVerticalPixel(),s=function(h){var f,g,_;n.push(h);var C;if(e.isClientSide){for(var E=h;E.isExpandable()&&E.expanded;)if(E.master)E=E.detailNode;else if(E.childrenAfterSort){if(E.childrenAfterSort.length===0)break;E=Ge(E.childrenAfterSort)}C=E.rowTop+E.rowHeight}else if(h.master)C=h.detailNode.rowTop+h.detailNode.rowHeight;else{var T=(f=h.childStore)===null||f===void 0?void 0:f.getStoreBounds();C=((g=T==null?void 0:T.heightPx)!==null&&g!==void 0?g:0)+((_=T==null?void 0:T.topPx)!==null&&_!==void 0?_:0)}var P=i+o+h.rowHeight;C<P?h.stickyRowTop=o+(C-P):h.stickyRowTop=o,o=0,n.forEach(function(A){var b=A.stickyRowTop+A.rowHeight;o<b&&(o=b)})};;){var a=i+o,l=this.rowModel.getRowIndexAtPixel(a),c=this.rowModel.getRow(l);if(c==null||c.level<0)break;for(var u=[],d=c.parent;d.level>=0;)u.push(d),d=d.parent;var p=u.reverse().find(function(h){return n.indexOf(h)<0&&h.displayed});if(p){s(p);continue}if(c.isExpandable()&&c.expanded&&c.rowTop<a){s(c);continue}break}return this.refreshNodesAndContainerHeight(n,o)},t.prototype.refreshStickyNode=function(e){for(var o=[],n=0;n<this.stickyRowCtrls.length;n++){var i=this.stickyRowCtrls[n].getRowNode();i!==e&&o.push(i)}this.refreshNodesAndContainerHeight(o,this.containerHeight)&&this.checkStickyRows()},t.prototype.refreshNodesAndContainerHeight=function(e,o){var n,i,s,a=this,l=!1,c=this.stickyRowCtrls.filter(function(_){return e.indexOf(_.getRowNode())===-1}),u=e.filter(function(_){return a.stickyRowCtrls.findIndex(function(C){return C.getRowNode()===_})===-1});(c.length||u.length)&&(l=!0);var d={};c.forEach(function(_){d[_.getRowNode().id]=_,a.stickyRowCtrls=a.stickyRowCtrls.filter(function(C){return C!==_})});try{for(var p=$G(Object.values(d)),h=p.next();!h.done;h=p.next()){var f=h.value;f.getRowNode().sticky=!1}}catch(_){n={error:_}}finally{try{h&&!h.done&&(i=p.return)&&i.call(p)}finally{if(n)throw n.error}}this.destroyRowCtrls(d,!1);var g=u.map(function(_){return _.sticky=!0,a.createRowCon(_,!1,!1)});return(s=this.stickyRowCtrls).push.apply(s,YG([],KG(g),!1)),this.stickyRowCtrls.forEach(function(_){return _.setRowTop(_.getRowNode().stickyRowTop)}),this.stickyRowCtrls.sort(function(_,C){return C.getRowNode().rowIndex-_.getRowNode().rowIndex}),this.containerHeight!==o&&(this.containerHeight=o,this.gridBodyCtrl.setStickyTopHeight(o),l=!0),l},ka([y("rowModel")],t.prototype,"rowModel",void 0),ka([y("rowRenderer")],t.prototype,"rowRenderer",void 0),ka([y("ctrlsService")],t.prototype,"ctrlsService",void 0),ka([Q],t.prototype,"postConstruct",null),t}(K),QG=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),Lo=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},Gn=function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var o=e.call(r),n,i=[],s;try{for(;(t===void 0||t-- >0)&&!(n=o.next()).done;)i.push(n.value)}catch(a){s={error:a}}finally{try{n&&!n.done&&(e=o.return)&&e.call(o)}finally{if(s)throw s.error}}return i},kn=function(r,t,e){if(e||arguments.length===2)for(var o=0,n=t.length,i;o<n;o++)(i||!(o in t))&&(i||(i=Array.prototype.slice.call(t,0,o)),i[o]=t[o]);return r.concat(i||Array.prototype.slice.call(t))},XG=function(r){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&r[t],o=0;if(e)return e.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&o>=r.length&&(r=void 0),{value:r&&r[o++],done:!r}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},ZG=function(r){QG(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.destroyFuncsForColumnListeners=[],e.rowCtrlsByRowIndex={},e.zombieRowCtrls={},e.allRowCtrls=[],e.topRowCtrls=[],e.bottomRowCtrls=[],e.refreshInProgress=!1,e.dataFirstRenderedFired=!1,e.setupRangeSelectionListeners=function(){var o=function(){e.getAllCellCtrls().forEach(function(l){return l.onRangeSelectionChanged()})},n=function(){e.getAllCellCtrls().forEach(function(l){return l.updateRangeBordersIfRangeCount()})},i=function(){e.eventService.addEventListener(w.EVENT_RANGE_SELECTION_CHANGED,o),e.eventService.addEventListener(w.EVENT_COLUMN_MOVED,n),e.eventService.addEventListener(w.EVENT_COLUMN_PINNED,n),e.eventService.addEventListener(w.EVENT_COLUMN_VISIBLE,n)},s=function(){e.eventService.removeEventListener(w.EVENT_RANGE_SELECTION_CHANGED,o),e.eventService.removeEventListener(w.EVENT_COLUMN_MOVED,n),e.eventService.removeEventListener(w.EVENT_COLUMN_PINNED,n),e.eventService.removeEventListener(w.EVENT_COLUMN_VISIBLE,n)};e.addDestroyFunc(function(){return s()}),e.addManagedPropertyListener("enableRangeSelection",function(l){var c=l.currentValue;c?i():s()});var a=e.gridOptionsService.get("enableRangeSelection");a&&i()},e}return t.prototype.postConstruct=function(){var e=this;this.ctrlsService.whenReady(function(){e.gridBodyCtrl=e.ctrlsService.getGridBodyCtrl(),e.initialise()})},t.prototype.initialise=function(){var e=this;if(this.addManagedListener(this.eventService,w.EVENT_PAGINATION_CHANGED,this.onPageLoaded.bind(this)),this.addManagedListener(this.eventService,w.EVENT_PINNED_ROW_DATA_CHANGED,this.onPinnedRowDataChanged.bind(this)),this.addManagedListener(this.eventService,w.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.addManagedListener(this.eventService,w.EVENT_BODY_SCROLL,this.onBodyScroll.bind(this)),this.addManagedListener(this.eventService,w.EVENT_BODY_HEIGHT_CHANGED,this.redraw.bind(this)),this.addManagedPropertyListeners(["domLayout","embedFullWidthRows"],function(){return e.onDomLayoutChanged()}),this.addManagedPropertyListeners(["suppressMaxRenderedRowRestriction","rowBuffer"],function(){return e.redraw()}),this.addManagedPropertyListeners(["suppressCellFocus","getBusinessKeyForNode","fullWidthCellRenderer","fullWidthCellRendererParams","rowStyle","getRowStyle","rowClass","getRowClass","rowClassRules","groupRowRenderer","groupRowRendererParams","loadingCellRenderer","loadingCellRendererParams","detailCellRenderer","detailCellRendererParams","enableRangeSelection","enableCellTextSelection"],function(){return e.redrawRows()}),this.gridOptionsService.isGroupRowsSticky()){var o=this.rowModel.getType();(o==="clientSide"||o==="serverSide")&&(this.stickyRowFeature=this.createManagedBean(new qG(this.createRowCon.bind(this),this.destroyRowCtrls.bind(this))))}this.registerCellEventListeners(),this.initialiseCache(),this.printLayout=this.gridOptionsService.isDomLayout("print"),this.embedFullWidthRows=this.printLayout||this.gridOptionsService.get("embedFullWidthRows"),this.redrawAfterModelUpdate()},t.prototype.initialiseCache=function(){if(this.gridOptionsService.get("keepDetailRows")){var e=this.getKeepDetailRowsCount(),o=e??3;this.cachedRowCtrls=new JG(o)}},t.prototype.getKeepDetailRowsCount=function(){return this.gridOptionsService.get("keepDetailRowsCount")},t.prototype.getStickyTopRowCtrls=function(){return this.stickyRowFeature?this.stickyRowFeature.getStickyRowCtrls():[]},t.prototype.updateAllRowCtrls=function(){var e=ii(this.rowCtrlsByRowIndex),o=this.gridOptionsService.get("ensureDomOrder"),n=this.gridOptionsService.isDomLayout("print");(o||n)&&e.sort(function(a,l){return a.getRowNode().rowIndex-l.getRowNode.rowIndex});var i=ii(this.zombieRowCtrls),s=this.cachedRowCtrls?this.cachedRowCtrls.getEntries():[];i.length>0||s.length>0?this.allRowCtrls=kn(kn(kn([],Gn(e),!1),Gn(i),!1),Gn(s),!1):this.allRowCtrls=e},t.prototype.onCellFocusChanged=function(e){this.getAllCellCtrls().forEach(function(o){return o.onCellFocused(e)}),this.getFullWidthRowCtrls().forEach(function(o){return o.onFullWidthRowFocused(e)})},t.prototype.registerCellEventListeners=function(){var e=this;this.addManagedListener(this.eventService,w.EVENT_CELL_FOCUSED,function(o){e.onCellFocusChanged(o)}),this.addManagedListener(this.eventService,w.EVENT_CELL_FOCUS_CLEARED,function(){e.onCellFocusChanged()}),this.addManagedListener(this.eventService,w.EVENT_FLASH_CELLS,function(o){e.getAllCellCtrls().forEach(function(n){return n.onFlashCells(o)})}),this.addManagedListener(this.eventService,w.EVENT_COLUMN_HOVER_CHANGED,function(){e.getAllCellCtrls().forEach(function(o){return o.onColumnHover()})}),this.addManagedListener(this.eventService,w.EVENT_DISPLAYED_COLUMNS_CHANGED,function(){e.getAllCellCtrls().forEach(function(o){return o.onDisplayedColumnsChanged()})}),this.addManagedListener(this.eventService,w.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,function(){e.printLayout&&e.getAllCellCtrls().forEach(function(o){return o.onLeftChanged()})}),this.setupRangeSelectionListeners(),this.refreshListenersToColumnsForCellComps(),this.addManagedListener(this.eventService,w.EVENT_GRID_COLUMNS_CHANGED,this.refreshListenersToColumnsForCellComps.bind(this)),this.addDestroyFunc(this.removeGridColumnListeners.bind(this))},t.prototype.removeGridColumnListeners=function(){this.destroyFuncsForColumnListeners.forEach(function(e){return e()}),this.destroyFuncsForColumnListeners.length=0},t.prototype.refreshListenersToColumnsForCellComps=function(){var e=this;this.removeGridColumnListeners();var o=this.columnModel.getAllGridColumns();o.forEach(function(n){var i=function(d){e.getAllCellCtrls().forEach(function(p){p.getColumn()===n&&d(p)})},s=function(){i(function(d){return d.onLeftChanged()})},a=function(){i(function(d){return d.onWidthChanged()})},l=function(){i(function(d){return d.onFirstRightPinnedChanged()})},c=function(){i(function(d){return d.onLastLeftPinnedChanged()})},u=function(){i(function(d){return d.onColDefChanged()})};n.addEventListener("leftChanged",s),n.addEventListener("widthChanged",a),n.addEventListener("firstRightPinnedChanged",l),n.addEventListener("lastLeftPinnedChanged",c),n.addEventListener("colDefChanged",u),e.destroyFuncsForColumnListeners.push(function(){n.removeEventListener("leftChanged",s),n.removeEventListener("widthChanged",a),n.removeEventListener("firstRightPinnedChanged",l),n.removeEventListener("lastLeftPinnedChanged",c),n.removeEventListener("colDefChanged",u)})})},t.prototype.onDomLayoutChanged=function(){var e=this.gridOptionsService.isDomLayout("print"),o=e||this.gridOptionsService.get("embedFullWidthRows"),n=o!==this.embedFullWidthRows||this.printLayout!==e;this.printLayout=e,this.embedFullWidthRows=o,n&&this.redrawAfterModelUpdate({domLayoutChanged:!0})},t.prototype.datasourceChanged=function(){this.firstRenderedRow=0,this.lastRenderedRow=-1;var e=Object.keys(this.rowCtrlsByRowIndex);this.removeRowCtrls(e)},t.prototype.onPageLoaded=function(e){var o={recycleRows:e.keepRenderedRows,animate:e.animate,newData:e.newData,newPage:e.newPage,onlyBody:!0};this.redrawAfterModelUpdate(o)},t.prototype.getAllCellsForColumn=function(e){var o=[];return this.getAllRowCtrls().forEach(function(n){var i=n.getCellElement(e);i&&o.push(i)}),o},t.prototype.refreshFloatingRowComps=function(){this.refreshFloatingRows(this.topRowCtrls,this.pinnedRowModel.getPinnedTopRowData()),this.refreshFloatingRows(this.bottomRowCtrls,this.pinnedRowModel.getPinnedBottomRowData())},t.prototype.getTopRowCtrls=function(){return this.topRowCtrls},t.prototype.getCentreRowCtrls=function(){return this.allRowCtrls},t.prototype.getBottomRowCtrls=function(){return this.bottomRowCtrls},t.prototype.refreshFloatingRows=function(e,o){var n=this;e.forEach(function(i){i.destroyFirstPass(),i.destroySecondPass()}),e.length=0,o&&o.forEach(function(i){var s=new Ii(i,n.beans,!1,!1,n.printLayout);e.push(s)})},t.prototype.onPinnedRowDataChanged=function(){var e={recycleRows:!0};this.redrawAfterModelUpdate(e)},t.prototype.redrawRow=function(e,o){var n=this;if(o===void 0&&(o=!1),e.sticky)this.stickyRowFeature.refreshStickyNode(e);else{var i=function(s){var a=s[e.rowIndex];a&&a.getRowNode()===e&&(a.destroyFirstPass(),a.destroySecondPass(),s[e.rowIndex]=n.createRowCon(e,!1,!1))};switch(e.rowPinned){case"top":i(this.topRowCtrls);case"bottom":i(this.bottomRowCtrls);default:i(this.rowCtrlsByRowIndex),this.updateAllRowCtrls()}}o||this.dispatchDisplayedRowsChanged(!1)},t.prototype.redrawRows=function(e){var o=this,n=e!=null;if(n){e==null||e.forEach(function(i){return o.redrawRow(i,!0)}),this.dispatchDisplayedRowsChanged(!1);return}this.redrawAfterModelUpdate()},t.prototype.getCellToRestoreFocusToAfterRefresh=function(e){var o=e!=null&&e.suppressKeepFocus?null:this.focusService.getFocusCellToUseAfterRefresh();if(o==null)return null;var n=this.gridOptionsService.getDocument(),i=n.activeElement,s=this.gridOptionsService.getDomData(i,Pi.DOM_DATA_KEY_CELL_CTRL),a=this.gridOptionsService.getDomData(i,Ii.DOM_DATA_KEY_ROW_CTRL),l=s||a;return l?o:null},t.prototype.redrawAfterModelUpdate=function(e){e===void 0&&(e={}),this.getLockOnRefresh();var o=this.getCellToRestoreFocusToAfterRefresh(e);this.updateContainerHeights(),this.scrollToTopIfNewData(e);var n=!e.domLayoutChanged&&!!e.recycleRows,i=e.animate&&this.gridOptionsService.isAnimateRows(),s=n?this.getRowsToRecycle():null;n||this.removeAllRowComps(),this.workOutFirstAndLastRowsToRender(),this.stickyRowFeature&&this.stickyRowFeature.checkStickyRows(),this.recycleRows(s,i),this.gridBodyCtrl.updateRowCount(),e.onlyBody||this.refreshFloatingRowComps(),this.dispatchDisplayedRowsChanged(),o!=null&&this.restoreFocusedCell(o),this.releaseLockOnRefresh()},t.prototype.scrollToTopIfNewData=function(e){var o=e.newData||e.newPage,n=this.gridOptionsService.get("suppressScrollOnNewData");o&&!n&&this.gridBodyCtrl.getScrollFeature().scrollToTop()},t.prototype.updateContainerHeights=function(){if(this.printLayout){this.rowContainerHeightService.setModelHeight(null);return}var e=this.paginationProxy.getCurrentPageHeight();e===0&&(e=1),this.rowContainerHeightService.setModelHeight(e)},t.prototype.getLockOnRefresh=function(){if(this.refreshInProgress)throw new Error("AG Grid: cannot get grid to draw rows when it is in the middle of drawing rows. Your code probably called a grid API method while the grid was in the render stage. To overcome this, put the API call into a timeout, e.g. instead of api.redrawRows(), call setTimeout(function() { api.redrawRows(); }, 0). To see what part of your code that caused the refresh check this stacktrace.");this.refreshInProgress=!0},t.prototype.releaseLockOnRefresh=function(){this.refreshInProgress=!1},t.prototype.isRefreshInProgress=function(){return this.refreshInProgress},t.prototype.restoreFocusedCell=function(e){e&&(this.focusService.setRestoreFocusedCell(e),this.onCellFocusChanged({rowIndex:e.rowIndex,column:e.column,rowPinned:e.rowPinned,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0,api:this.beans.gridApi,columnApi:this.beans.columnApi,context:this.beans.gridOptionsService.context,type:"mock"}))},t.prototype.stopEditing=function(e){e===void 0&&(e=!1),this.getAllRowCtrls().forEach(function(o){o.stopEditing(e)})},t.prototype.getAllCellCtrls=function(){for(var e=[],o=this.getAllRowCtrls(),n=o.length,i=0;i<n;i++)for(var s=o[i].getAllCellCtrls(),a=s.length,l=0;l<a;l++)e.push(s[l]);return e},t.prototype.getAllRowCtrls=function(){var e,o,n=this.stickyRowFeature&&this.stickyRowFeature.getStickyRowCtrls()||[],i=kn(kn(kn([],Gn(this.topRowCtrls),!1),Gn(this.bottomRowCtrls),!1),Gn(n),!1);try{for(var s=XG(Object.keys(this.rowCtrlsByRowIndex)),a=s.next();!a.done;a=s.next()){var l=a.value;i.push(this.rowCtrlsByRowIndex[l])}}catch(c){e={error:c}}finally{try{a&&!a.done&&(o=s.return)&&o.call(s)}finally{if(e)throw e.error}}return i},t.prototype.addRenderedRowListener=function(e,o,n){var i=this.rowCtrlsByRowIndex[o];i&&i.addEventListener(e,n)},t.prototype.flashCells=function(e){e===void 0&&(e={});var o=e.flashDelay,n=e.fadeDelay;this.getCellCtrls(e.rowNodes,e.columns).forEach(function(i){return i.flashCell({flashDelay:o,fadeDelay:n})})},t.prototype.refreshCells=function(e){var o=this;e===void 0&&(e={});var n={forceRefresh:e.force,newData:!1,suppressFlash:e.suppressFlash};this.getCellCtrls(e.rowNodes,e.columns).forEach(function(i){return i.refreshOrDestroyCell(n)}),e.rowNodes&&(this.getRowCtrls(e.rowNodes).forEach(function(i){if(i.isFullWidth()){var s=i.refreshFullWidth();s||o.redrawRow(i.getRowNode(),!0)}}),this.dispatchDisplayedRowsChanged(!1))},t.prototype.getCellRendererInstances=function(e){var o=this,n,i=this.getCellCtrls(e.rowNodes,e.columns).map(function(l){return l.getCellRenderer()}).filter(function(l){return l!=null});if(!((n=e.columns)===null||n===void 0)&&n.length)return i;var s=[],a=this.mapRowNodes(e.rowNodes);return this.getAllRowCtrls().forEach(function(l){if(!(a&&!o.isRowInMap(l.getRowNode(),a))&&l.isFullWidth()){var c=l.getFullWidthCellRenderer();c&&s.push(c)}}),kn(kn([],Gn(s),!1),Gn(i),!1)},t.prototype.getCellEditorInstances=function(e){var o=[];return this.getCellCtrls(e.rowNodes,e.columns).forEach(function(n){var i=n.getCellEditor();i&&o.push(i)}),o},t.prototype.getEditingCells=function(){var e=[];return this.getAllCellCtrls().forEach(function(o){if(o.isEditing()){var n=o.getCellPosition();e.push(n)}}),e},t.prototype.mapRowNodes=function(e){if(e){var o={top:{},bottom:{},normal:{}};return e.forEach(function(n){var i=n.id;n.rowPinned==="top"?o.top[i]=n:n.rowPinned==="bottom"?o.bottom[i]=n:o.normal[i]=n}),o}},t.prototype.isRowInMap=function(e,o){var n=e.id,i=e.rowPinned;return i==="bottom"?o.bottom[n]!=null:i==="top"?o.top[n]!=null:o.normal[n]!=null},t.prototype.getRowCtrls=function(e){var o=this,n=this.mapRowNodes(e),i=this.getAllRowCtrls();return!e||!n?i:i.filter(function(s){var a=s.getRowNode();return o.isRowInMap(a,n)})},t.prototype.getCellCtrls=function(e,o){var n=this,i;W(o)&&(i={},o.forEach(function(a){var l=n.columnModel.getGridColumn(a);W(l)&&(i[l.getId()]=!0)}));var s=[];return this.getRowCtrls(e).forEach(function(a){a.getAllCellCtrls().forEach(function(l){var c=l.getColumn().getId(),u=i&&!i[c];u||s.push(l)})}),s},t.prototype.destroy=function(){this.removeAllRowComps(),r.prototype.destroy.call(this)},t.prototype.removeAllRowComps=function(){var e=Object.keys(this.rowCtrlsByRowIndex);this.removeRowCtrls(e)},t.prototype.getRowsToRecycle=function(){var e=[];Gt(this.rowCtrlsByRowIndex,function(n,i){var s=i.getRowNode().id==null;s&&e.push(n)}),this.removeRowCtrls(e);var o={};return Gt(this.rowCtrlsByRowIndex,function(n,i){var s=i.getRowNode();o[s.id]=i}),this.rowCtrlsByRowIndex={},o},t.prototype.removeRowCtrls=function(e){var o=this;e.forEach(function(n){var i=o.rowCtrlsByRowIndex[n];i&&(i.destroyFirstPass(),i.destroySecondPass()),delete o.rowCtrlsByRowIndex[n]})},t.prototype.onBodyScroll=function(e){e.direction==="vertical"&&this.redraw({afterScroll:!0})},t.prototype.redraw=function(e){e===void 0&&(e={});var o=e.afterScroll,n;this.stickyRowFeature&&hc()&&(n=this.getCellToRestoreFocusToAfterRefresh()||void 0);var i=this.firstRenderedRow,s=this.lastRenderedRow;this.workOutFirstAndLastRowsToRender();var a=!1;this.stickyRowFeature&&(a=this.stickyRowFeature.checkStickyRows());var l=this.firstRenderedRow!==i||this.lastRenderedRow!==s;if(!(o&&!a&&!l)&&(this.getLockOnRefresh(),this.recycleRows(null,!1,o),this.releaseLockOnRefresh(),this.dispatchDisplayedRowsChanged(o),n!=null)){var c=this.getCellToRestoreFocusToAfterRefresh();n!=null&&c==null&&(this.animationFrameService.flushAllFrames(),this.restoreFocusedCell(n))}},t.prototype.removeRowCompsNotToDraw=function(e){var o={};e.forEach(function(s){return o[s]=!0});var n=Object.keys(this.rowCtrlsByRowIndex),i=n.filter(function(s){return!o[s]});this.removeRowCtrls(i)},t.prototype.calculateIndexesToDraw=function(e){var o=this,n=uC(this.firstRenderedRow,this.lastRenderedRow),i=function(u,d){var p=d.getRowNode().rowIndex;p!=null&&(p<o.firstRenderedRow||p>o.lastRenderedRow)&&o.doNotUnVirtualiseRow(d)&&n.push(p)};Gt(this.rowCtrlsByRowIndex,i),Gt(e,i),n.sort(function(u,d){return u-d});for(var s=[],a=0;a<n.length;a++){var l=n[a],c=this.paginationProxy.getRow(l);c&&!c.sticky&&s.push(l)}return s},t.prototype.recycleRows=function(e,o,n){var i=this;o===void 0&&(o=!1),n===void 0&&(n=!1);var s=this.calculateIndexesToDraw(e);if(this.removeRowCompsNotToDraw(s),this.printLayout&&(o=!1),s.forEach(function(l){var c=i.createOrUpdateRowCtrl(l,e,o,n);W(c)}),e){var a=n&&!this.gridOptionsService.get("suppressAnimationFrame")&&!this.printLayout;a?this.beans.animationFrameService.addDestroyTask(function(){i.destroyRowCtrls(e,o),i.updateAllRowCtrls(),i.dispatchDisplayedRowsChanged()}):this.destroyRowCtrls(e,o)}this.updateAllRowCtrls()},t.prototype.dispatchDisplayedRowsChanged=function(e){e===void 0&&(e=!1);var o={type:w.EVENT_DISPLAYED_ROWS_CHANGED,afterScroll:e};this.eventService.dispatchEvent(o)},t.prototype.onDisplayedColumnsChanged=function(){var e=this.columnModel.isPinningLeft(),o=this.columnModel.isPinningRight(),n=this.pinningLeft!==e||o!==this.pinningRight;n&&(this.pinningLeft=e,this.pinningRight=o,this.embedFullWidthRows&&this.redrawFullWidthEmbeddedRows())},t.prototype.redrawFullWidthEmbeddedRows=function(){var e=[];this.getFullWidthRowCtrls().forEach(function(o){var n=o.getRowNode().rowIndex;e.push(n.toString())}),this.refreshFloatingRowComps(),this.removeRowCtrls(e),this.redraw({afterScroll:!0})},t.prototype.getFullWidthRowCtrls=function(e){var o=this,n=this.mapRowNodes(e);return this.getAllRowCtrls().filter(function(i){if(!i.isFullWidth())return!1;var s=i.getRowNode();return!(n!=null&&!o.isRowInMap(s,n))})},t.prototype.createOrUpdateRowCtrl=function(e,o,n,i){var s,a=this.rowCtrlsByRowIndex[e];a||(s=this.paginationProxy.getRow(e),W(s)&&W(o)&&o[s.id]&&s.alreadyRendered&&(a=o[s.id],o[s.id]=null));var l=!a;if(l)if(s||(s=this.paginationProxy.getRow(e)),W(s))a=this.createRowCon(s,n,i);else return;return s&&(s.alreadyRendered=!0),this.rowCtrlsByRowIndex[e]=a,a},t.prototype.destroyRowCtrls=function(e,o){var n=this,i=[];Gt(e,function(s,a){if(a){if(n.cachedRowCtrls&&a.isCacheable()){n.cachedRowCtrls.addRow(a);return}a.destroyFirstPass(),o?(n.zombieRowCtrls[a.getInstanceId()]=a,i.push(function(){a.destroySecondPass(),delete n.zombieRowCtrls[a.getInstanceId()]})):a.destroySecondPass()}}),o&&(i.push(function(){n.updateAllRowCtrls(),n.dispatchDisplayedRowsChanged()}),Oy(i))},t.prototype.getRowBuffer=function(){return this.gridOptionsService.get("rowBuffer")},t.prototype.getRowBufferInPixels=function(){var e=this.getRowBuffer(),o=this.gridOptionsService.getRowHeightAsNumber();return e*o},t.prototype.workOutFirstAndLastRowsToRender=function(){this.rowContainerHeightService.updateOffset();var e,o;if(!this.paginationProxy.isRowsToRender())e=0,o=-1;else if(this.printLayout)this.environment.refreshRowHeightVariable(),e=this.paginationProxy.getPageFirstRow(),o=this.paginationProxy.getPageLastRow();else{var n=this.getRowBufferInPixels(),i=this.ctrlsService.getGridBodyCtrl(),s=this.gridOptionsService.get("suppressRowVirtualisation"),a=!1,l=void 0,c=void 0;do{var u=this.paginationProxy.getPixelOffset(),d=this.paginationProxy.getCurrentPagePixelRange(),p=d.pageFirstPixel,h=d.pageLastPixel,f=this.rowContainerHeightService.getDivStretchOffset(),g=i.getScrollFeature().getVScrollPosition(),_=g.top,C=g.bottom;s?(l=p+f,c=h+f):(l=Math.max(_+u-n,p)+f,c=Math.min(C+u+n,h)+f),this.firstVisibleVPixel=Math.max(_+u,p)+f,a=this.ensureAllRowsInRangeHaveHeightsCalculated(l,c)}while(a);var E=this.paginationProxy.getRowIndexAtPixel(l),T=this.paginationProxy.getRowIndexAtPixel(c),P=this.paginationProxy.getPageFirstRow(),A=this.paginationProxy.getPageLastRow();E<P&&(E=P),T>A&&(T=A),e=E,o=T}var b=this.gridOptionsService.isDomLayout("normal"),I=this.gridOptionsService.get("suppressMaxRenderedRowRestriction"),F=Math.max(this.getRowBuffer(),500);b&&!I&&o-e>F&&(o=e+F);var U=e!==this.firstRenderedRow,k=o!==this.lastRenderedRow;if(U||k){this.firstRenderedRow=e,this.lastRenderedRow=o;var M={type:w.EVENT_VIEWPORT_CHANGED,firstRow:e,lastRow:o};this.eventService.dispatchEvent(M)}},t.prototype.dispatchFirstDataRenderedEvent=function(){var e=this;if(!this.dataFirstRenderedFired){this.dataFirstRenderedFired=!0;var o={type:w.EVENT_FIRST_DATA_RENDERED,firstRow:this.firstRenderedRow,lastRow:this.lastRenderedRow};window.requestAnimationFrame(function(){e.beans.eventService.dispatchEvent(o)})}},t.prototype.ensureAllRowsInRangeHaveHeightsCalculated=function(e,o){var n=this.paginationProxy.ensureRowHeightsValid(e,o,-1,-1);return n&&this.updateContainerHeights(),n},t.prototype.getFirstVisibleVerticalPixel=function(){return this.firstVisibleVPixel},t.prototype.getFirstVirtualRenderedRow=function(){return this.firstRenderedRow},t.prototype.getLastVirtualRenderedRow=function(){return this.lastRenderedRow},t.prototype.doNotUnVirtualiseRow=function(e){var o=!1,n=!0,i=e.getRowNode(),s=this.focusService.isRowNodeFocused(i),a=e.isEditing(),l=i.detail,c=s||a||l;if(!c)return o;var u=this.paginationProxy.isRowPresent(i);return u?n:o},t.prototype.createRowCon=function(e,o,n){var i=this.cachedRowCtrls?this.cachedRowCtrls.getRow(e):null;if(i)return i;var s=this.gridOptionsService.get("suppressAnimationFrame"),a=n&&!s&&!this.printLayout,l=new Ii(e,this.beans,o,a,this.printLayout);return l},t.prototype.getRenderedNodes=function(){var e=this.rowCtrlsByRowIndex;return Object.keys(e).map(function(o){return e[o].getRowNode()})},t.prototype.getRowByPosition=function(e){var o,n=e.rowIndex;switch(e.rowPinned){case"top":o=this.topRowCtrls[n];break;case"bottom":o=this.bottomRowCtrls[n];break;default:o=this.rowCtrlsByRowIndex[n],o||(o=this.getStickyTopRowCtrls().find(function(i){return i.getRowNode().rowIndex===n})||null);break}return o},t.prototype.getRowNode=function(e){switch(e.rowPinned){case"top":return this.pinnedRowModel.getPinnedTopRowData()[e.rowIndex];case"bottom":return this.pinnedRowModel.getPinnedBottomRowData()[e.rowIndex];default:return this.rowModel.getRow(e.rowIndex)}},t.prototype.isRangeInRenderedViewport=function(e,o){var n=e==null||o==null;if(n)return!1;var i=e>this.lastRenderedRow,s=o<this.firstRenderedRow,a=!s&&!i;return a},Lo([y("animationFrameService")],t.prototype,"animationFrameService",void 0),Lo([y("paginationProxy")],t.prototype,"paginationProxy",void 0),Lo([y("columnModel")],t.prototype,"columnModel",void 0),Lo([y("pinnedRowModel")],t.prototype,"pinnedRowModel",void 0),Lo([y("rowModel")],t.prototype,"rowModel",void 0),Lo([y("focusService")],t.prototype,"focusService",void 0),Lo([y("beans")],t.prototype,"beans",void 0),Lo([y("rowContainerHeightService")],t.prototype,"rowContainerHeightService",void 0),Lo([y("ctrlsService")],t.prototype,"ctrlsService",void 0),Lo([Q],t.prototype,"postConstruct",null),t=Lo([ne("rowRenderer")],t),t}(K),JG=function(){function r(t){this.entriesMap={},this.entriesList=[],this.maxCount=t}return r.prototype.addRow=function(t){if(this.entriesMap[t.getRowNode().id]=t,this.entriesList.push(t),t.setCached(!0),this.entriesList.length>this.maxCount){var e=this.entriesList[0];e.destroyFirstPass(),e.destroySecondPass(),this.removeFromCache(e)}},r.prototype.getRow=function(t){if(t==null||t.id==null)return null;var e=this.entriesMap[t.id];if(!e)return null;this.removeFromCache(e),e.setCached(!1);var o=e.getRowNode()!=t;return o?null:e},r.prototype.removeFromCache=function(t){var e=t.getRowNode().id;delete this.entriesMap[e],uo(this.entriesList,t)},r.prototype.getEntries=function(){return this.entriesList},r}(),e4=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),ng=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},t4=function(r){e4(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.formatValue=function(e,o,n,i,s){s===void 0&&(s=!0);var a=null,l,c=e.getColDef();if(i?l=i:s&&(l=c.valueFormatter),l){var u={value:n,node:o,data:o?o.data:null,colDef:c,column:e,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context};typeof l=="function"?a=l(u):a=this.expressionService.evaluate(l,u)}else if(c.refData)return c.refData[n]||"";return a==null&&Array.isArray(n)&&(a=n.join(", ")),a},ng([y("expressionService")],t.prototype,"expressionService",void 0),t=ng([ne("valueFormatterService")],t),t}(K),o4=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),Eu=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},n4=function(r){o4(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.init=function(){var e=this;this.setPinnedTopRowData(),this.setPinnedBottomRowData(),this.addManagedPropertyListener("pinnedTopRowData",function(){return e.setPinnedTopRowData()}),this.addManagedPropertyListener("pinnedBottomRowData",function(){return e.setPinnedBottomRowData()})},t.prototype.isEmpty=function(e){var o=e==="top"?this.pinnedTopRows:this.pinnedBottomRows;return Jt(o)},t.prototype.isRowsToRender=function(e){return!this.isEmpty(e)},t.prototype.getRowAtPixel=function(e,o){var n=o==="top"?this.pinnedTopRows:this.pinnedBottomRows;if(Jt(n))return 0;for(var i=0;i<n.length;i++){var s=n[i],a=s.rowTop+s.rowHeight-1;if(a>=e)return i}return n.length-1},t.prototype.setPinnedTopRowData=function(){var e=this.gridOptionsService.get("pinnedTopRowData");this.pinnedTopRows=this.createNodesFromData(e,!0);var o={type:w.EVENT_PINNED_ROW_DATA_CHANGED};this.eventService.dispatchEvent(o)},t.prototype.setPinnedBottomRowData=function(){var e=this.gridOptionsService.get("pinnedBottomRowData");this.pinnedBottomRows=this.createNodesFromData(e,!1);var o={type:w.EVENT_PINNED_ROW_DATA_CHANGED};this.eventService.dispatchEvent(o)},t.prototype.createNodesFromData=function(e,o){var n=this,i=[];if(e){var s=0;e.forEach(function(a,l){var c=new be(n.beans);c.data=a;var u=o?be.ID_PREFIX_TOP_PINNED:be.ID_PREFIX_BOTTOM_PINNED;c.id=u+l,c.rowPinned=o?"top":"bottom",c.setRowTop(s),c.setRowHeight(n.gridOptionsService.getRowHeightForNode(c).height),c.setRowIndex(l),s+=c.rowHeight,i.push(c)})}return i},t.prototype.getPinnedTopRowData=function(){return this.pinnedTopRows},t.prototype.getPinnedBottomRowData=function(){return this.pinnedBottomRows},t.prototype.getPinnedTopTotalHeight=function(){return this.getTotalHeight(this.pinnedTopRows)},t.prototype.getPinnedTopRowCount=function(){return this.pinnedTopRows?this.pinnedTopRows.length:0},t.prototype.getPinnedBottomRowCount=function(){return this.pinnedBottomRows?this.pinnedBottomRows.length:0},t.prototype.getPinnedTopRow=function(e){return this.pinnedTopRows[e]},t.prototype.getPinnedBottomRow=function(e){return this.pinnedBottomRows[e]},t.prototype.forEachPinnedTopRow=function(e){Jt(this.pinnedTopRows)||this.pinnedTopRows.forEach(e)},t.prototype.forEachPinnedBottomRow=function(e){Jt(this.pinnedBottomRows)||this.pinnedBottomRows.forEach(e)},t.prototype.getPinnedBottomTotalHeight=function(){return this.getTotalHeight(this.pinnedBottomRows)},t.prototype.getTotalHeight=function(e){if(!e||e.length===0)return 0;var o=Ge(e);return o.rowTop+o.rowHeight},Eu([y("beans")],t.prototype,"beans",void 0),Eu([Q],t.prototype,"init",null),t=Eu([ne("pinnedRowModel")],t),t}(K),ig;(function(r){r.Applied="Applied",r.StoreNotFound="StoreNotFound",r.StoreLoading="StoreLoading",r.StoreWaitingToLoad="StoreWaitingToLoad",r.StoreLoadingFailed="StoreLoadingFailed",r.StoreWrongType="StoreWrongType",r.Cancelled="Cancelled",r.StoreNotStarted="StoreNotStarted"})(ig||(ig={}));var Sc=function(){function r(t,e){this.active=!0,this.nodeIdsToColumns={},this.mapToItems={},this.keepingColumns=t,this.pathRoot={rowNode:e,children:null},this.mapToItems[e.id]=this.pathRoot}return r.prototype.setInactive=function(){this.active=!1},r.prototype.isActive=function(){return this.active},r.prototype.depthFirstSearchChangedPath=function(t,e){if(t.children)for(var o=0;o<t.children.length;o++)this.depthFirstSearchChangedPath(t.children[o],e);e(t.rowNode)},r.prototype.depthFirstSearchEverything=function(t,e,o){if(t.childrenAfterGroup)for(var n=0;n<t.childrenAfterGroup.length;n++){var i=t.childrenAfterGroup[n];i.childrenAfterGroup?this.depthFirstSearchEverything(t.childrenAfterGroup[n],e,o):o&&e(i)}e(t)},r.prototype.forEachChangedNodeDepthFirst=function(t,e,o){e===void 0&&(e=!1),o===void 0&&(o=!1),this.active&&!o?this.depthFirstSearchChangedPath(this.pathRoot,t):this.depthFirstSearchEverything(this.pathRoot.rowNode,t,e)},r.prototype.executeFromRootNode=function(t){t(this.pathRoot.rowNode)},r.prototype.createPathItems=function(t){for(var e=t,o=0;!this.mapToItems[e.id];){var n={rowNode:e,children:null};this.mapToItems[e.id]=n,o++,e=e.parent}return o},r.prototype.populateColumnsMap=function(t,e){var o=this;if(!(!this.keepingColumns||!e))for(var n=t;n;)this.nodeIdsToColumns[n.id]||(this.nodeIdsToColumns[n.id]={}),e.forEach(function(i){return o.nodeIdsToColumns[n.id][i.getId()]=!0}),n=n.parent},r.prototype.linkPathItems=function(t,e){for(var o=t,n=0;n<e;n++){var i=this.mapToItems[o.id],s=this.mapToItems[o.parent.id];s.children||(s.children=[]),s.children.push(i),o=o.parent}},r.prototype.addParentNode=function(t,e){if(!(!t||t.isRowPinned())){var o=this.createPathItems(t);this.linkPathItems(t,o),this.populateColumnsMap(t,e)}},r.prototype.canSkip=function(t){return this.active&&!this.mapToItems[t.id]},r.prototype.getValueColumnsForNode=function(t,e){if(!this.keepingColumns)return e;var o=this.nodeIdsToColumns[t.id],n=e.filter(function(i){return o[i.getId()]});return n},r.prototype.getNotValueColumnsForNode=function(t,e){if(!this.keepingColumns)return null;var o=this.nodeIdsToColumns[t.id],n=e.filter(function(i){return!o[i.getId()]});return n},r}(),i4=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),Ld=function(r){i4(t,r);function t(e){var o=r.call(this)||this;return o.state=t.STATE_WAITING_TO_LOAD,o.version=0,o.id=e,o}return t.prototype.getId=function(){return this.id},t.prototype.load=function(){this.state=t.STATE_LOADING,this.loadFromDatasource()},t.prototype.getVersion=function(){return this.version},t.prototype.setStateWaitingToLoad=function(){this.version++,this.state=t.STATE_WAITING_TO_LOAD},t.prototype.getState=function(){return this.state},t.prototype.pageLoadFailed=function(e){var o=this.isRequestMostRecentAndLive(e);o&&(this.state=t.STATE_FAILED,this.processServerFail()),this.dispatchLoadCompleted(!1)},t.prototype.success=function(e,o){this.successCommon(e,o)},t.prototype.pageLoaded=function(e,o,n){this.successCommon(e,{rowData:o,rowCount:n})},t.prototype.isRequestMostRecentAndLive=function(e){var o=e===this.version,n=this.isAlive();return o&&n},t.prototype.successCommon=function(e,o){this.dispatchLoadCompleted();var n=this.isRequestMostRecentAndLive(e);n&&(this.state=t.STATE_LOADED,this.processServerResult(o))},t.prototype.dispatchLoadCompleted=function(e){e===void 0&&(e=!0);var o={type:t.EVENT_LOAD_COMPLETE,success:e,block:this};this.dispatchEvent(o)},t.EVENT_LOAD_COMPLETE="loadComplete",t.STATE_WAITING_TO_LOAD="needsLoading",t.STATE_LOADING="loading",t.STATE_LOADED="loaded",t.STATE_FAILED="failed",t}(K),r4=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),Ha=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},s4=function(r,t){return function(e,o){t(e,o,r)}},a4=function(r){r4(t,r);function t(){var o=r!==null&&r.apply(this,arguments)||this;return o.activeBlockLoadsCount=0,o.blocks=[],o.active=!0,o}e=t,t.prototype.postConstruct=function(){this.maxConcurrentRequests=this.getMaxConcurrentDatasourceRequests();var o=this.gridOptionsService.get("blockLoadDebounceMillis");o&&o>0&&(this.checkBlockToLoadDebounce=Ae.debounce(this.performCheckBlocksToLoad.bind(this),o))},t.prototype.setBeans=function(o){this.logger=o.create("RowNodeBlockLoader")},t.prototype.getMaxConcurrentDatasourceRequests=function(){var o=this.gridOptionsService.get("maxConcurrentDatasourceRequests");if(o==null)return 2;if(!(o<=0))return o},t.prototype.addBlock=function(o){this.blocks.push(o),o.addEventListener(Ld.EVENT_LOAD_COMPLETE,this.loadComplete.bind(this)),this.checkBlockToLoad()},t.prototype.removeBlock=function(o){Ae.removeFromArray(this.blocks,o)},t.prototype.destroy=function(){r.prototype.destroy.call(this),this.active=!1},t.prototype.loadComplete=function(){this.activeBlockLoadsCount--,this.checkBlockToLoad(),this.dispatchEvent({type:e.BLOCK_LOADED_EVENT}),this.activeBlockLoadsCount==0&&this.dispatchEvent({type:e.BLOCK_LOADER_FINISHED_EVENT})},t.prototype.checkBlockToLoad=function(){this.checkBlockToLoadDebounce?this.checkBlockToLoadDebounce():this.performCheckBlocksToLoad()},t.prototype.performCheckBlocksToLoad=function(){if(this.active){if(this.printCacheStatus(),this.maxConcurrentRequests!=null&&this.activeBlockLoadsCount>=this.maxConcurrentRequests){this.logger.log("checkBlockToLoad: max loads exceeded");return}var o=this.getAvailableLoadingCount(),n=this.blocks.filter(function(i){return i.getState()===Ld.STATE_WAITING_TO_LOAD}).slice(0,o);this.registerLoads(n.length),n.forEach(function(i){return i.load()}),this.printCacheStatus()}},t.prototype.getBlockState=function(){if(this.gridOptionsService.isRowModelType("serverSide")){var o=this.rowModel;return o.getBlockStates()}var n={};return this.blocks.forEach(function(i){var s=i.getBlockStateJson(),a=s.id,l=s.state;n[a]=l}),n},t.prototype.printCacheStatus=function(){this.logger.isLogging()&&this.logger.log("printCacheStatus: activePageLoadsCount = ".concat(this.activeBlockLoadsCount,",")+" blocks = ".concat(JSON.stringify(this.getBlockState())))},t.prototype.isLoading=function(){return this.activeBlockLoadsCount>0},t.prototype.registerLoads=function(o){this.activeBlockLoadsCount+=o},t.prototype.getAvailableLoadingCount=function(){return this.maxConcurrentRequests!==void 0?this.maxConcurrentRequests-this.activeBlockLoadsCount:void 0};var e;return t.BLOCK_LOADED_EVENT="blockLoaded",t.BLOCK_LOADER_FINISHED_EVENT="blockLoaderFinished",Ha([y("rowModel")],t.prototype,"rowModel",void 0),Ha([Q],t.prototype,"postConstruct",null),Ha([s4(0,eo("loggerFactory"))],t.prototype,"setBeans",null),t=e=Ha([ne("rowNodeBlockLoader")],t),t}(K),l4=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),Ru=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},c4=function(r){l4(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.currentPage=0,e.topDisplayedRowIndex=0,e.bottomDisplayedRowIndex=0,e.pixelOffset=0,e.masterRowCount=0,e}return t.prototype.postConstruct=function(){this.active=this.gridOptionsService.get("pagination"),this.pageSizeFromGridOptions=this.gridOptionsService.get("paginationPageSize"),this.paginateChildRows=this.isPaginateChildRows(),this.addManagedListener(this.eventService,w.EVENT_MODEL_UPDATED,this.onModelUpdated.bind(this)),this.addManagedPropertyListener("pagination",this.onPaginationGridOptionChanged.bind(this)),this.addManagedPropertyListener("paginationPageSize",this.onPageSizeGridOptionChanged.bind(this)),this.onModelUpdated()},t.prototype.ensureRowHeightsValid=function(e,o,n,i){var s=this.rowModel.ensureRowHeightsValid(e,o,this.getPageFirstRow(),this.getPageLastRow());return s&&this.calculatePages(),s},t.prototype.isPaginateChildRows=function(){var e=this.gridOptionsService.get("groupRemoveSingleChildren")||this.gridOptionsService.get("groupRemoveLowestSingleChildren");return e?!0:this.gridOptionsService.get("paginateChildRows")},t.prototype.onModelUpdated=function(e){this.calculatePages();var o={type:w.EVENT_PAGINATION_CHANGED,animate:e?e.animate:!1,newData:e?e.newData:!1,newPage:e?e.newPage:!1,newPageSize:e?e.newPageSize:!1,keepRenderedRows:e?e.keepRenderedRows:!1};this.eventService.dispatchEvent(o)},t.prototype.onPaginationGridOptionChanged=function(){this.active=this.gridOptionsService.get("pagination"),this.calculatePages();var e={type:w.EVENT_PAGINATION_CHANGED,animate:!1,newData:!1,newPage:!1,newPageSize:!1,keepRenderedRows:!0};this.eventService.dispatchEvent(e)},t.prototype.onPageSizeGridOptionChanged=function(){this.setPageSize(this.gridOptionsService.get("paginationPageSize"),"gridOptions")},t.prototype.goToPage=function(e){if(!(!this.active||this.currentPage===e||typeof this.currentPage!="number")){this.currentPage=e;var o={type:w.EVENT_MODEL_UPDATED,animate:!1,keepRenderedRows:!1,newData:!1,newPage:!0,newPageSize:!1};this.onModelUpdated(o)}},t.prototype.getPixelOffset=function(){return this.pixelOffset},t.prototype.getRow=function(e){return this.rowModel.getRow(e)},t.prototype.getRowNode=function(e){return this.rowModel.getRowNode(e)},t.prototype.getRowIndexAtPixel=function(e){return this.rowModel.getRowIndexAtPixel(e)},t.prototype.getCurrentPageHeight=function(){return pe(this.topRowBounds)||pe(this.bottomRowBounds)?0:Math.max(this.bottomRowBounds.rowTop+this.bottomRowBounds.rowHeight-this.topRowBounds.rowTop,0)},t.prototype.getCurrentPagePixelRange=function(){var e=this.topRowBounds?this.topRowBounds.rowTop:0,o=this.bottomRowBounds?this.bottomRowBounds.rowTop+this.bottomRowBounds.rowHeight:0;return{pageFirstPixel:e,pageLastPixel:o}},t.prototype.isRowPresent=function(e){if(!this.rowModel.isRowPresent(e))return!1;var o=e.rowIndex>=this.topDisplayedRowIndex&&e.rowIndex<=this.bottomDisplayedRowIndex;return o},t.prototype.isEmpty=function(){return this.rowModel.isEmpty()},t.prototype.isRowsToRender=function(){return this.rowModel.isRowsToRender()},t.prototype.forEachNode=function(e){return this.rowModel.forEachNode(e)},t.prototype.forEachNodeOnPage=function(e){for(var o=this.getPageFirstRow(),n=this.getPageLastRow(),i=o;i<=n;i++){var s=this.getRow(i);s&&e(s)}},t.prototype.getType=function(){return this.rowModel.getType()},t.prototype.getRowBounds=function(e){var o=this.rowModel.getRowBounds(e);return o.rowIndex=e,o},t.prototype.getPageFirstRow=function(){return this.topRowBounds?this.topRowBounds.rowIndex:-1},t.prototype.getPageLastRow=function(){return this.bottomRowBounds?this.bottomRowBounds.rowIndex:-1},t.prototype.getRowCount=function(){return this.rowModel.getRowCount()},t.prototype.getPageForIndex=function(e){return Math.floor(e/this.pageSize)},t.prototype.goToPageWithIndex=function(e){if(this.active){var o=this.getPageForIndex(e);this.goToPage(o)}},t.prototype.isRowInPage=function(e){if(!this.active)return!0;var o=this.getPageForIndex(e.rowIndex);return o===this.currentPage},t.prototype.isLastPageFound=function(){return this.rowModel.isLastRowIndexKnown()},t.prototype.getCurrentPage=function(){return this.currentPage},t.prototype.goToNextPage=function(){this.goToPage(this.currentPage+1)},t.prototype.goToPreviousPage=function(){this.goToPage(this.currentPage-1)},t.prototype.goToFirstPage=function(){this.goToPage(0)},t.prototype.goToLastPage=function(){var e=this.rowModel.getRowCount(),o=Math.floor(e/this.pageSize);this.goToPage(o)},t.prototype.getPageSize=function(){return this.pageSize},t.prototype.getTotalPages=function(){return this.totalPages},t.prototype.setPage=function(e){this.currentPage=e},Object.defineProperty(t.prototype,"pageSize",{get:function(){return W(this.pageSizeAutoCalculated)?this.pageSizeAutoCalculated:W(this.pageSizeFromPageSizeSelector)?this.pageSizeFromPageSizeSelector:W(this.pageSizeFromInitialState)?this.pageSizeFromInitialState:W(this.pageSizeFromGridOptions)?this.pageSizeFromGridOptions:this.defaultPageSize},enumerable:!1,configurable:!0}),t.prototype.unsetAutoCalculatedPageSize=function(){if(this.pageSizeAutoCalculated!==void 0){var e=this.pageSizeAutoCalculated;this.pageSizeAutoCalculated=void 0,this.pageSize!==e&&this.onModelUpdated({type:w.EVENT_MODEL_UPDATED,animate:!1,keepRenderedRows:!1,newData:!1,newPage:!1,newPageSize:!0})}},t.prototype.setPageSize=function(e,o){var n=this.pageSize;switch(o){case"autoCalculated":this.pageSizeAutoCalculated=e;break;case"pageSizeSelector":this.pageSizeFromPageSizeSelector=e,this.currentPage!==0&&this.goToFirstPage();break;case"initialState":this.pageSizeFromInitialState=e;break;case"gridOptions":this.pageSizeFromGridOptions=e,this.pageSizeFromInitialState=void 0,this.pageSizeFromPageSizeSelector=void 0,this.currentPage!==0&&this.goToFirstPage();break}if(n!==this.pageSize){var i={type:w.EVENT_MODEL_UPDATED,animate:!1,keepRenderedRows:!1,newData:!1,newPage:!1,newPageSize:!0};this.onModelUpdated(i)}},t.prototype.calculatePages=function(){this.active?this.paginateChildRows?this.calculatePagesAllRows():this.calculatePagesMasterRowsOnly():this.calculatedPagesNotActive(),this.topRowBounds=this.rowModel.getRowBounds(this.topDisplayedRowIndex),this.topRowBounds&&(this.topRowBounds.rowIndex=this.topDisplayedRowIndex),this.bottomRowBounds=this.rowModel.getRowBounds(this.bottomDisplayedRowIndex),this.bottomRowBounds&&(this.bottomRowBounds.rowIndex=this.bottomDisplayedRowIndex),this.setPixelOffset(W(this.topRowBounds)?this.topRowBounds.rowTop:0)},t.prototype.setPixelOffset=function(e){this.pixelOffset!==e&&(this.pixelOffset=e,this.eventService.dispatchEvent({type:w.EVENT_PAGINATION_PIXEL_OFFSET_CHANGED}))},t.prototype.setZeroRows=function(){this.masterRowCount=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=-1,this.currentPage=0,this.totalPages=0},t.prototype.adjustCurrentPageIfInvalid=function(){this.currentPage>=this.totalPages&&(this.currentPage=this.totalPages-1),(!isFinite(this.currentPage)||isNaN(this.currentPage)||this.currentPage<0)&&(this.currentPage=0)},t.prototype.calculatePagesMasterRowsOnly=function(){if(this.masterRowCount=this.rowModel.getTopLevelRowCount(),this.masterRowCount<=0){this.setZeroRows();return}var e=this.masterRowCount-1;this.totalPages=Math.floor(e/this.pageSize)+1,this.adjustCurrentPageIfInvalid();var o=this.pageSize*this.currentPage,n=this.pageSize*(this.currentPage+1)-1;if(n>e&&(n=e),this.topDisplayedRowIndex=this.rowModel.getTopLevelRowDisplayedIndex(o),n===e)this.bottomDisplayedRowIndex=this.rowModel.getRowCount()-1;else{var i=this.rowModel.getTopLevelRowDisplayedIndex(n+1);this.bottomDisplayedRowIndex=i-1}},t.prototype.getMasterRowCount=function(){return this.masterRowCount},t.prototype.calculatePagesAllRows=function(){if(this.masterRowCount=this.rowModel.getRowCount(),this.masterRowCount===0){this.setZeroRows();return}var e=this.masterRowCount-1;this.totalPages=Math.floor(e/this.pageSize)+1,this.adjustCurrentPageIfInvalid(),this.topDisplayedRowIndex=this.pageSize*this.currentPage,this.bottomDisplayedRowIndex=this.pageSize*(this.currentPage+1)-1,this.bottomDisplayedRowIndex>e&&(this.bottomDisplayedRowIndex=e)},t.prototype.calculatedPagesNotActive=function(){this.setPageSize(this.masterRowCount,"autoCalculated"),this.totalPages=1,this.currentPage=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=this.rowModel.getRowCount()-1},Ru([y("rowModel")],t.prototype,"rowModel",void 0),Ru([Q],t.prototype,"postConstruct",null),t=Ru([ne("paginationProxy")],t),t}(K),u4=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),rg=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},d4=function(r){u4(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.processAllCellClasses=function(e,o,n,i){this.processClassRules(void 0,e.cellClassRules,o,n,i),this.processStaticCellClasses(e,o,n)},t.prototype.processClassRules=function(e,o,n,i,s){if(!(o==null&&e==null)){var a={},l={},c=function(f,g){f.split(" ").forEach(function(_){_.trim()!=""&&g(_)})};if(o)for(var u=Object.keys(o),d=function(f){var g=u[f],_=o[g],C;typeof _=="string"?C=p.expressionService.evaluate(_,n):typeof _=="function"&&(C=_(n)),c(g,function(E){C?a[E]=!0:l[E]=!0})},p=this,h=0;h<u.length;h++)d(h);e&&s&&Object.keys(e).forEach(function(f){return c(f,function(g){a[g]||(l[g]=!0)})}),s&&Object.keys(l).forEach(s),Object.keys(a).forEach(i)}},t.prototype.getStaticCellClasses=function(e,o){var n=e.cellClass;if(!n)return[];var i;if(typeof n=="function"){var s=n;i=s(o)}else i=n;return typeof i=="string"&&(i=[i]),i||[]},t.prototype.processStaticCellClasses=function(e,o,n){var i=this.getStaticCellClasses(e,o);i.forEach(function(s){n(s)})},rg([y("expressionService")],t.prototype,"expressionService",void 0),t=rg([ne("stylingService")],t),t}(K),p4=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),h4=function(r){p4(t,r);function t(e){return r.call(this,e,"ag-toggle-button")||this}return t.prototype.setValue=function(e,o){return r.prototype.setValue.call(this,e,o),this.addOrRemoveCssClass("ag-selected",this.getValue()),this},t}(mc),f4=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),g4=function(r){f4(t,r);function t(e){return r.call(this,e,"ag-text-area",null,"textarea")||this}return t.prototype.setValue=function(e,o){var n=r.prototype.setValue.call(this,e,o);return this.eInput.value=e,n},t.prototype.setCols=function(e){return this.eInput.cols=e,this},t.prototype.setRows=function(e){return this.eInput.rows=e,this},t}(Zn),v4=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),m4=function(r){v4(t,r);function t(e){return r.call(this,e,"ag-date-field","date")||this}return t.prototype.postConstruct=function(){var e=this;r.prototype.postConstruct.call(this),this.addManagedListener(this.eInput,"wheel",this.onWheel.bind(this));var o=Wo();this.addManagedListener(this.eInput,"mousedown",function(){e.isDisabled()||o||e.eInput.focus()}),this.eInput.step="any"},t.prototype.onWheel=function(e){document.activeElement===this.eInput&&e.preventDefault()},t.prototype.setMin=function(e){var o,n=e instanceof Date?(o=bo(e??null,!1))!==null&&o!==void 0?o:void 0:e;return this.min===n?this:(this.min=n,dn(this.eInput,"min",n),this)},t.prototype.setMax=function(e){var o,n=e instanceof Date?(o=bo(e??null,!1))!==null&&o!==void 0?o:void 0:e;return this.max===n?this:(this.max=n,dn(this.eInput,"max",n),this)},t.prototype.setStep=function(e){return this.step===e?this:(this.step=e,dn(this.eInput,"step",e),this)},t.prototype.getDate=function(){var e;if(this.eInput.validity.valid)return(e=to(this.getValue()))!==null&&e!==void 0?e:void 0},t.prototype.setDate=function(e,o){this.setValue(bo(e??null,!1),o)},t}(Xi),y4=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),C4=function(r){y4(t,r);function t(e){return r.call(this,e,"ag-range-field","range")||this}return t.prototype.postConstruct=function(){r.prototype.postConstruct.call(this);var e=this.config,o=e.min,n=e.max,i=e.step;o!=null&&this.setMinValue(o),n!=null&&this.setMaxValue(n),this.setStep(i||1)},t.prototype.addInputListeners=function(){var e=this;this.addManagedListener(this.eInput,"input",function(o){var n=o.target.value;e.setValue(n)})},t.prototype.setMinValue=function(e){return this.min=e,this.eInput.setAttribute("min",e.toString()),this},t.prototype.setMaxValue=function(e){return this.max=e,this.eInput.setAttribute("max",e.toString()),this},t.prototype.setStep=function(e){return this.eInput.setAttribute("step",e.toString()),this},t.prototype.setValue=function(e,o){this.min!=null&&(e=Math.max(parseFloat(e),this.min).toString()),this.max!=null&&(e=Math.min(parseFloat(e),this.max).toString());var n=r.prototype.setValue.call(this,e,o);return this.eInput.value=e,n},t}(Zn),w4=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),sg=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},_4=function(r){w4(t,r);function t(e,o){var n=r.call(this,'<div class="ag-rich-select-row" role="presentation"></div>')||this;return n.params=e,n.wrapperEl=o,n}return t.prototype.postConstruct=function(){this.addManagedListener(this.getGui(),"mouseup",this.onMouseUp.bind(this))},t.prototype.setState=function(e){var o="";this.params.valueFormatter&&(o=this.params.valueFormatter(e));var n=this.populateWithRenderer(e,o);n||this.populateWithoutRenderer(e,o),this.value=e},t.prototype.highlightString=function(e){var o=this.parsedValue;if(!(this.params.cellRenderer||!W(o))){var n=W(e);if(n){var i=o==null?void 0:o.toLocaleLowerCase().indexOf(e.toLocaleLowerCase());if(i>=0){var s=i+e.length,a=ht(o.slice(0,i),!0),l=ht(o.slice(i,s),!0),c=ht(o.slice(s));this.renderValueWithoutRenderer("".concat(a,'<span class="ag-rich-select-row-text-highlight">').concat(l,"</span>").concat(c))}else n=!1}n||this.renderValueWithoutRenderer(o)}},t.prototype.updateHighlighted=function(e){var o,n=this.getGui(),i="ag-rich-select-row-".concat(this.getCompId());if((o=n.parentElement)===null||o===void 0||o.setAttribute("id",i),e){var s=this.getParentComponent().getAriaElement();zp(s,i),this.wrapperEl.setAttribute("data-active-option",i)}Mr(n.parentElement,e),this.addOrRemoveCssClass("ag-rich-select-row-selected",e)},t.prototype.populateWithoutRenderer=function(e,o){var n=this.gridOptionsService.getDocument(),i=this.getGui(),s=n.createElement("span");s.style.overflow="hidden",s.style.textOverflow="ellipsis";var a=ht(W(o)?o:e,!0);this.parsedValue=W(a)?a:null,i.appendChild(s),this.renderValueWithoutRenderer(a)},t.prototype.renderValueWithoutRenderer=function(e){var o=this.getGui().querySelector("span");o&&(o.innerHTML=W(e)?e:"&nbsp;")},t.prototype.populateWithRenderer=function(e,o){var n=this,i,s;return this.params.cellRenderer&&(s=this.userComponentFactory.getCellRendererDetails(this.params,{value:e,valueFormatted:o,api:this.gridOptionsService.api})),s&&(i=s.newAgStackInstance()),i&&uh(i,this.getGui()),i?(i.then(function(a){n.addDestroyFunc(function(){n.getContext().destroyBean(a)})}),!0):!1},t.prototype.onMouseUp=function(){var e=this.getParentComponent(),o={type:w.EVENT_FIELD_PICKER_VALUE_SELECTED,fromEnterKey:!1,value:this.value};e==null||e.dispatchEvent(o)},sg([y("userComponentFactory")],t.prototype,"userComponentFactory",void 0),sg([Q],t.prototype,"postConstruct",null),t}(Re),S4=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),ag=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},_r;(function(r){r.TAB_GUARD="ag-tab-guard",r.TAB_GUARD_TOP="ag-tab-guard-top",r.TAB_GUARD_BOTTOM="ag-tab-guard-bottom"})(_r||(_r={}));var E4=function(r){S4(t,r);function t(e){var o=r.call(this)||this;o.skipTabGuardFocus=!1;var n=e.comp,i=e.eTopGuard,s=e.eBottomGuard,a=e.focusInnerElement,l=e.onFocusIn,c=e.onFocusOut,u=e.shouldStopEventPropagation,d=e.onTabKeyDown,p=e.handleKeyDown,h=e.eFocusableElement;return o.comp=n,o.eTopGuard=i,o.eBottomGuard=s,o.providedFocusInnerElement=a,o.eFocusableElement=h,o.providedFocusIn=l,o.providedFocusOut=c,o.providedShouldStopEventPropagation=u,o.providedOnTabKeyDown=d,o.providedHandleKeyDown=p,o}return t.prototype.postConstruct=function(){var e=this;this.createManagedBean(new ci(this.eFocusableElement,{shouldStopEventPropagation:function(){return e.shouldStopEventPropagation()},onTabKeyDown:function(o){return e.onTabKeyDown(o)},handleKeyDown:function(o){return e.handleKeyDown(o)},onFocusIn:function(o){return e.onFocusIn(o)},onFocusOut:function(o){return e.onFocusOut(o)}})),this.activateTabGuards(),[this.eTopGuard,this.eBottomGuard].forEach(function(o){return e.addManagedListener(o,"focus",e.onFocus.bind(e))})},t.prototype.handleKeyDown=function(e){this.providedHandleKeyDown&&this.providedHandleKeyDown(e)},t.prototype.tabGuardsAreActive=function(){return!!this.eTopGuard&&this.eTopGuard.hasAttribute("tabIndex")},t.prototype.shouldStopEventPropagation=function(){return this.providedShouldStopEventPropagation?this.providedShouldStopEventPropagation():!1},t.prototype.activateTabGuards=function(){var e=this.gridOptionsService.get("tabIndex");this.comp.setTabIndex(e.toString())},t.prototype.deactivateTabGuards=function(){this.comp.setTabIndex()},t.prototype.onFocus=function(e){if(this.skipTabGuardFocus){this.skipTabGuardFocus=!1;return}var o=e.target===this.eBottomGuard;this.providedFocusInnerElement?this.providedFocusInnerElement(o):this.focusInnerElement(o)},t.prototype.onFocusIn=function(e){this.providedFocusIn&&this.providedFocusIn(e)||this.deactivateTabGuards()},t.prototype.onFocusOut=function(e){this.providedFocusOut&&this.providedFocusOut(e)||this.eFocusableElement.contains(e.relatedTarget)||this.activateTabGuards()},t.prototype.onTabKeyDown=function(e){var o=this;if(this.providedOnTabKeyDown){this.providedOnTabKeyDown(e);return}if(!e.defaultPrevented){var n=this.tabGuardsAreActive();n&&this.deactivateTabGuards();var i=this.getNextFocusableElement(e.shiftKey);n&&setTimeout(function(){return o.activateTabGuards()},0),i&&(i.focus(),e.preventDefault())}},t.prototype.focusInnerElement=function(e){e===void 0&&(e=!1);var o=this.focusService.findFocusableElements(this.eFocusableElement);this.tabGuardsAreActive()&&(o.splice(0,1),o.splice(o.length-1,1)),o.length&&o[e?o.length-1:0].focus({preventScroll:!0})},t.prototype.getNextFocusableElement=function(e){return this.focusService.findNextFocusableElement(this.eFocusableElement,!1,e)},t.prototype.forceFocusOutOfContainer=function(e){e===void 0&&(e=!1);var o=e?this.eTopGuard:this.eBottomGuard;this.activateTabGuards(),this.skipTabGuardFocus=!0,o.focus()},ag([y("focusService")],t.prototype,"focusService",void 0),ag([Q],t.prototype,"postConstruct",null),t}(K),R4=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),T4=function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var o=e.call(r),n,i=[],s;try{for(;(t===void 0||t-- >0)&&!(n=o.next()).done;)i.push(n.value)}catch(a){s={error:a}}finally{try{n&&!n.done&&(e=o.return)&&e.call(o)}finally{if(s)throw s.error}}return i},b4=function(r,t,e){if(e||arguments.length===2)for(var o=0,n=t.length,i;o<n;o++)(i||!(o in t))&&(i||(i=Array.prototype.slice.call(t,0,o)),i[o]=t[o]);return r.concat(i||Array.prototype.slice.call(t))},Ec=function(r){R4(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.initialiseTabGuard=function(e){this.eTopGuard=this.createTabGuard("top"),this.eBottomGuard=this.createTabGuard("bottom"),this.eFocusableElement=this.getFocusableElement();var o=[this.eTopGuard,this.eBottomGuard],n={setTabIndex:function(i){o.forEach(function(s){return i!=null?s.setAttribute("tabindex",i):s.removeAttribute("tabindex")})}};this.addTabGuards(this.eTopGuard,this.eBottomGuard),this.tabGuardCtrl=this.createManagedBean(new E4({comp:n,eTopGuard:this.eTopGuard,eBottomGuard:this.eBottomGuard,eFocusableElement:this.eFocusableElement,onFocusIn:e.onFocusIn,onFocusOut:e.onFocusOut,focusInnerElement:e.focusInnerElement,handleKeyDown:e.handleKeyDown,onTabKeyDown:e.onTabKeyDown,shouldStopEventPropagation:e.shouldStopEventPropagation}))},t.prototype.createTabGuard=function(e){var o=document.createElement("div"),n=e==="top"?_r.TAB_GUARD_TOP:_r.TAB_GUARD_BOTTOM;return o.classList.add(_r.TAB_GUARD,n),yt(o,"presentation"),o},t.prototype.addTabGuards=function(e,o){this.eFocusableElement.insertAdjacentElement("afterbegin",e),this.eFocusableElement.insertAdjacentElement("beforeend",o)},t.prototype.removeAllChildrenExceptTabGuards=function(){var e=[this.eTopGuard,this.eBottomGuard];Et(this.getFocusableElement()),this.addTabGuards.apply(this,b4([],T4(e),!1))},t.prototype.forceFocusOutOfContainer=function(e){e===void 0&&(e=!1),this.tabGuardCtrl.forceFocusOutOfContainer(e)},t.prototype.appendChild=function(e,o){da(e)||(e=e.getGui());var n=this.eBottomGuard;n?n.insertAdjacentElement("beforebegin",e):r.prototype.appendChild.call(this,e,o)},t}(Re),A4=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),Va=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},ew=function(r){A4(t,r);function t(e){var o=r.call(this,t.getTemplate((e==null?void 0:e.cssIdentifier)||"default"))||this;o.renderedRows=new Map,o.rowHeight=20;var n=e||{},i=n.cssIdentifier,s=i===void 0?"default":i,a=n.ariaRole,l=a===void 0?"listbox":a,c=n.listName;return o.cssIdentifier=s,o.ariaRole=l,o.listName=c,o}return t.prototype.postConstruct=function(){var e=this;this.addScrollListener(),this.rowHeight=this.getItemHeight(),this.addResizeObserver(),this.initialiseTabGuard({onFocusIn:function(o){return e.onFocusIn(o)},onFocusOut:function(o){return e.onFocusOut(o)},focusInnerElement:function(o){return e.focusInnerElement(o)},onTabKeyDown:function(o){return e.onTabKeyDown(o)},handleKeyDown:function(o){return e.handleKeyDown(o)}}),this.setAriaProperties(),this.addManagedListener(this.eventService,w.EVENT_GRID_STYLES_CHANGED,this.onGridStylesChanged.bind(this))},t.prototype.onGridStylesChanged=function(){this.rowHeight=this.getItemHeight(),this.refresh()},t.prototype.setAriaProperties=function(){var e=this.localeService.getLocaleTextFunc(),o=e("ariaDefaultListName",this.listName||"List"),n=this.eContainer;yt(n,this.ariaRole),In(n,o)},t.prototype.addResizeObserver=function(){var e=this,o=function(){return e.animationFrameService.requestAnimationFrame(function(){return e.drawVirtualRows()})},n=this.resizeObserverService.observeResize(this.getGui(),o);this.addDestroyFunc(n)},t.prototype.focusInnerElement=function(e){this.focusRow(e?this.model.getRowCount()-1:0)},t.prototype.onFocusIn=function(e){var o=e.target;return o.classList.contains("ag-virtual-list-item")&&(this.lastFocusedRowIndex=Yy(o)-1),!1},t.prototype.onFocusOut=function(e){return this.getFocusableElement().contains(e.relatedTarget)||(this.lastFocusedRowIndex=null),!1},t.prototype.handleKeyDown=function(e){switch(e.key){case N.UP:case N.DOWN:this.navigate(e.key===N.UP)&&e.preventDefault();break}},t.prototype.onTabKeyDown=function(e){this.navigate(e.shiftKey)?e.preventDefault():(hn(e),this.forceFocusOutOfContainer(e.shiftKey))},t.prototype.navigate=function(e){if(this.lastFocusedRowIndex==null)return!1;var o=this.lastFocusedRowIndex+(e?-1:1);return o<0||o>=this.model.getRowCount()?!1:(this.focusRow(o),!0)},t.prototype.getLastFocusedRow=function(){return this.lastFocusedRowIndex},t.prototype.focusRow=function(e){var o=this;this.ensureIndexVisible(e),window.setTimeout(function(){if(o.isAlive()){var n=o.renderedRows.get(e);n&&n.eDiv.focus()}},10)},t.prototype.getComponentAt=function(e){var o=this.renderedRows.get(e);return o&&o.rowComponent},t.prototype.forEachRenderedRow=function(e){this.renderedRows.forEach(function(o,n){return e(o.rowComponent,n)})},t.getTemplate=function(e){return'<div class="ag-virtual-list-viewport ag-'.concat(e,`-virtual-list-viewport" role="presentation">
                <div class="ag-virtual-list-container ag-`).concat(e,`-virtual-list-container" ref="eContainer"></div>
            </div>`)},t.prototype.getItemHeight=function(){return this.environment.getListItemHeight()},t.prototype.ensureIndexVisible=function(e,o){o===void 0&&(o=!0);var n=this.model.getRowCount();if(typeof e!="number"||e<0||e>=n)return console.warn("AG Grid: invalid row index for ensureIndexVisible: "+e),!1;var i=e*this.rowHeight,s=i+this.rowHeight,a=this.getGui(),l=a.scrollTop,c=a.offsetHeight,u=l+c,d=o?0:this.rowHeight,p=l>i+d,h=u<s-d;if(p)return a.scrollTop=i,!0;if(h){var f=s-c;return a.scrollTop=f,!0}return!1},t.prototype.setComponentCreator=function(e){this.componentCreator=e},t.prototype.setComponentUpdater=function(e){this.componentUpdater=e},t.prototype.getRowHeight=function(){return this.rowHeight},t.prototype.getScrollTop=function(){return this.getGui().scrollTop},t.prototype.setRowHeight=function(e){this.rowHeight=e,this.refresh()},t.prototype.refresh=function(e){var o=this;if(!(this.model==null||!this.isAlive())){var n=this.model.getRowCount();this.eContainer.style.height="".concat(n*this.rowHeight,"px"),Hp(function(){return o.eContainer.clientHeight>=n*o.rowHeight},function(){o.isAlive()&&(o.canSoftRefresh(e)?o.drawVirtualRows(!0):(o.clearVirtualRows(),o.drawVirtualRows()))})}},t.prototype.canSoftRefresh=function(e){return!!(e&&this.renderedRows.size&&typeof this.model.areRowsEqual=="function"&&this.componentUpdater)},t.prototype.clearVirtualRows=function(){var e=this;this.renderedRows.forEach(function(o,n){return e.removeRow(n)})},t.prototype.drawVirtualRows=function(e){if(!(!this.isAlive()||!this.model)){var o=this.getGui(),n=o.scrollTop,i=n+o.offsetHeight,s=Math.floor(n/this.rowHeight),a=Math.floor(i/this.rowHeight);this.ensureRowsRendered(s,a,e)}},t.prototype.ensureRowsRendered=function(e,o,n){var i=this;this.renderedRows.forEach(function(a,l){(l<e||l>o)&&l!==i.lastFocusedRowIndex&&i.removeRow(l)}),n&&this.refreshRows();for(var s=e;s<=o;s++)this.renderedRows.has(s)||s<this.model.getRowCount()&&this.insertRow(s)},t.prototype.insertRow=function(e){var o=this,n=this.model.getRow(e),i=document.createElement("div");i.classList.add("ag-virtual-list-item","ag-".concat(this.cssIdentifier,"-virtual-list-item")),yt(i,this.ariaRole==="tree"?"treeitem":"option"),$p(i,this.model.getRowCount()),Kp(i,e+1),i.setAttribute("tabindex","-1"),i.style.height="".concat(this.rowHeight,"px"),i.style.top="".concat(this.rowHeight*e,"px");var s=this.componentCreator(n,i);s.addGuiEventListener("focusin",function(){return o.lastFocusedRowIndex=e}),i.appendChild(s.getGui()),this.renderedRows.has(e-1)?this.renderedRows.get(e-1).eDiv.insertAdjacentElement("afterend",i):this.renderedRows.has(e+1)?this.renderedRows.get(e+1).eDiv.insertAdjacentElement("beforebegin",i):this.eContainer.appendChild(i),this.renderedRows.set(e,{rowComponent:s,eDiv:i,value:n})},t.prototype.removeRow=function(e){var o=this.renderedRows.get(e);this.eContainer.removeChild(o.eDiv),this.destroyBean(o.rowComponent),this.renderedRows.delete(e)},t.prototype.refreshRows=function(){var e=this,o=this.model.getRowCount();this.renderedRows.forEach(function(n,i){var s,a;if(i>=o)e.removeRow(i);else{var l=e.model.getRow(i);!((a=(s=e.model).areRowsEqual)===null||a===void 0)&&a.call(s,n.value,l)?e.componentUpdater(l,n.rowComponent):e.removeRow(i)}})},t.prototype.addScrollListener=function(){var e=this;this.addGuiEventListener("scroll",function(){return e.drawVirtualRows()},{passive:!0})},t.prototype.setModel=function(e){this.model=e},t.prototype.getAriaElement=function(){return this.eContainer},t.prototype.destroy=function(){this.isAlive()&&(this.clearVirtualRows(),r.prototype.destroy.call(this))},Va([y("resizeObserverService")],t.prototype,"resizeObserverService",void 0),Va([y("animationFrameService")],t.prototype,"animationFrameService",void 0),Va([ee("eContainer")],t.prototype,"eContainer",void 0),Va([Q],t.prototype,"postConstruct",null),t}(Ec),O4=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),Gl=function(){return Gl=Object.assign||function(r){for(var t,e=1,o=arguments.length;e<o;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},Gl.apply(this,arguments)},lg=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},P4=`
    <div class="ag-picker-field" role="presentation">
        <div ref="eLabel"></div>
            <div ref="eWrapper" class="ag-wrapper ag-picker-field-wrapper ag-rich-select-value ag-picker-collapsed">
            <div ref="eDisplayField" class="ag-picker-field-display"></div>
            <ag-input-text-field ref="eInput" class="ag-rich-select-field-input"></ag-input-text-field>
            <div ref="eIcon" class="ag-picker-field-icon" aria-hidden="true"></div>
        </div>
    </div>`,I4=function(r){O4(t,r);function t(e){var o=this,n,i;o=r.call(this,Gl(Gl({pickerAriaLabelKey:"ariaLabelRichSelectField",pickerAriaLabelValue:"Rich Select Field",pickerType:"ag-list",className:"ag-rich-select",pickerIcon:"smallDown",ariaRole:"combobox",template:(n=e==null?void 0:e.template)!==null&&n!==void 0?n:P4,modalPicker:!1},e),{maxPickerHeight:(i=e==null?void 0:e.maxPickerHeight)!==null&&i!==void 0?i:"calc(var(--ag-row-height) * 6.5)"}))||this,o.searchString="",o.highlightedItem=-1,o.lastRowHovered=-1,o.searchStringCreator=null;var s=e||{},a=s.cellRowHeight,l=s.value,c=s.valueList,u=s.searchStringCreator;return a!=null&&(o.cellRowHeight=a),l!==void 0&&(o.value=l),c!=null&&(o.values=c),u&&(o.searchStringCreator=u),o}return t.prototype.postConstruct=function(){var e=this;r.prototype.postConstruct.call(this),this.createLoadingElement(),this.createListComponent();var o=this.config,n=o.allowTyping,i=o.placeholder;n?(this.eInput.setAutoComplete(!1).setInputPlaceholder(i),this.eDisplayField.classList.add("ag-hidden")):this.eInput.setDisplayed(!1),this.eWrapper.tabIndex=this.gridOptionsService.get("tabIndex");var s=this.config.searchDebounceDelay,a=s===void 0?300:s;this.clearSearchString=Eo(this.clearSearchString,a),this.renderSelectedValue(),n&&(this.eInput.onValueChange(function(l){return e.searchTextFromString(l)}),this.addManagedListener(this.eWrapper,"focus",this.onWrapperFocus.bind(this))),this.addManagedListener(this.eWrapper,"focusout",this.onWrapperFocusOut.bind(this))},t.prototype.createLoadingElement=function(){var e=this.gridOptionsService.getDocument(),o=this.localeService.getLocaleTextFunc(),n=e.createElement("div");n.classList.add("ag-loading-text"),n.innerText=o("loadingOoo","Loading..."),this.eLoading=n},t.prototype.createListComponent=function(){var e=this;this.listComponent=this.createBean(new ew({cssIdentifier:"rich-select"})),this.listComponent.setComponentCreator(this.createRowComponent.bind(this)),this.listComponent.setParentComponent(this),this.addManagedListener(this.listComponent,w.EVENT_FIELD_PICKER_VALUE_SELECTED,function(c){e.onListValueSelected(c.value,c.fromEnterKey)});var o=this.cellRowHeight;o&&this.listComponent.setRowHeight(o);var n=this.listComponent.getGui(),i=this.listComponent.getAriaElement();this.addManagedListener(n,"mousemove",this.onPickerMouseMove.bind(this)),this.addManagedListener(n,"mousedown",function(c){return c.preventDefault()}),n.classList.add("ag-rich-select-list");var s="ag-rich-select-list-".concat(this.listComponent.getCompId());i.setAttribute("id",s);var a=this.localeService.getLocaleTextFunc(),l=a(this.config.pickerAriaLabelKey,this.config.pickerAriaLabelValue);In(i,l),Qp(this.eWrapper,i)},t.prototype.renderSelectedValue=function(){var e=this,o=this,n=o.value,i=o.eDisplayField,s=o.config,a=this.config,l=a.allowTyping,c=a.initialInputValue,u=this.config.valueFormatter?this.config.valueFormatter(n):n;if(l){this.eInput.setValue(c??u);return}var d;s.cellRenderer&&(d=this.userComponentFactory.getCellRendererDetails(this.config,{value:n,valueFormatted:u,api:this.gridOptionsService.api}));var p;if(d&&(p=d.newAgStackInstance()),p)Et(i),uh(p,i),p.then(function(f){e.addDestroyFunc(function(){return e.getContext().destroyBean(f)})});else if(W(this.value))i.innerText=u,i.classList.remove("ag-display-as-placeholder");else{var h=s.placeholder;W(h)?(i.innerHTML="".concat(ht(h)),i.classList.add("ag-display-as-placeholder")):Et(i)}},t.prototype.getCurrentValueIndex=function(){var e=this,o=e.currentList,n=e.value;if(n==null||!o)return-1;for(var i=0;i<o.length;i++)if(o[i]===n)return i;return-1},t.prototype.highlightFilterMatch=function(){var e=this,o;(o=this.listComponent)===null||o===void 0||o.forEachRenderedRow(function(n,i){n.highlightString(e.searchString)})},t.prototype.highlightSelectedValue=function(e){var o=this,n;e==null&&(e=this.getCurrentValueIndex()),this.highlightedItem=e,(n=this.listComponent)===null||n===void 0||n.forEachRenderedRow(function(i,s){var a=e===-1?!1:o.highlightedItem===s;i.updateHighlighted(a)})},t.prototype.setRowHeight=function(e){e!==this.cellRowHeight&&(this.cellRowHeight=e),this.listComponent&&this.listComponent.setRowHeight(e)},t.prototype.createPickerComponent=function(){var e=this.values;return e&&this.setValueList({valueList:e}),this.listComponent},t.prototype.setSearchStringCreator=function(e){this.searchStringCreator=e},t.prototype.setValueList=function(e){var o=e.valueList,n=e.refresh;this.listComponent&&this.currentList!==o&&(this.currentList=o,this.listComponent.setModel({getRowCount:function(){return o.length},getRow:function(i){return o[i]}}),n&&(this.values?this.listComponent.refresh():(this.values=o,this.isPickerDisplayed&&this.showCurrentValueInPicker())))},t.prototype.showPicker=function(){r.prototype.showPicker.call(this),this.showCurrentValueInPicker(),this.displayOrHidePicker()},t.prototype.showCurrentValueInPicker=function(){var e,o;if(this.listComponent){if(!this.currentList){this.isPickerDisplayed&&this.eLoading&&this.listComponent.appendChild(this.eLoading);return}!((e=this.eLoading)===null||e===void 0)&&e.offsetParent&&((o=this.eLoading.parentElement)===null||o===void 0||o.removeChild(this.eLoading));var n=this.getCurrentValueIndex();n!==-1?(this.listComponent.refresh(),this.listComponent.ensureIndexVisible(n),this.listComponent.refresh(!0),this.highlightSelectedValue(n)):this.listComponent.refresh()}},t.prototype.beforeHidePicker=function(){this.highlightedItem=-1,r.prototype.beforeHidePicker.call(this)},t.prototype.onWrapperFocus=function(){if(this.eInput){var e=this.eInput.getFocusableElement();e.focus(),e.select()}},t.prototype.onWrapperFocusOut=function(e){this.eWrapper.contains(e.relatedTarget)||this.hidePicker()},t.prototype.buildSearchStringFromKeyboardEvent=function(e){var o=e.key;if(o===N.BACKSPACE)this.searchString=this.searchString.slice(0,-1),o="";else if(!gc(e))return;e.preventDefault(),this.searchTextFromCharacter(o)},t.prototype.searchTextFromCharacter=function(e){this.searchString+=e,this.runSearch(),this.clearSearchString()},t.prototype.searchTextFromString=function(e){e==null&&(e=""),this.searchString=e,this.runSearch()},t.prototype.buildSearchStrings=function(e){var o=this.config.valueFormatter,n=o===void 0?function(s){return s}:o,i;return typeof e[0]=="number"||typeof e[0]=="string"?i=e.map(function(s){return n(s)}):typeof e[0]=="object"&&this.searchStringCreator&&(i=this.searchStringCreator(e)),i},t.prototype.getSuggestionsAndFilteredValues=function(e,o){var n=this,i=[],s=[];if(!e.length)return{suggestions:i,filteredValues:s};var a=this.config,l=a.searchType,c=l===void 0?"fuzzy":l,u=a.filterList;if(c==="fuzzy"){var d=pa(this.searchString,o,!0);i=d.values;var p=d.indices;if(u&&p.length)for(var h=0;h<p.length;h++)s.push(this.values[p[h]])}else i=o.filter(function(f,g){var _=f.toLocaleLowerCase(),C=n.searchString.toLocaleLowerCase(),E=c==="match"?_.startsWith(C):_.indexOf(C)!==-1;return u&&E&&s.push(n.values[g]),E});return{suggestions:i,filteredValues:s}},t.prototype.filterListModel=function(e){var o=this.config.filterList;o&&(this.setValueList({valueList:e,refresh:!0}),this.alignPickerToComponent())},t.prototype.runSearch=function(){var e,o,n=this.values,i=this.buildSearchStrings(n);if(!i){this.highlightSelectedValue(-1);return}var s=this.getSuggestionsAndFilteredValues(this.searchString,i),a=s.suggestions,l=s.filteredValues,c=this.config,u=c.filterList,d=c.highlightMatch,p=c.searchType,h=p===void 0?"fuzzy":p,f=l.length,g=!!(u&&this.searchString!=="");if(this.filterListModel(g?l:n),a.length){var _=g?0:i.indexOf(a[0]);this.selectListItem(_)}else if(this.highlightSelectedValue(-1),!g||f)(e=this.listComponent)===null||e===void 0||e.ensureIndexVisible(0);else if(g){this.getAriaElement().removeAttribute("data-active-option");var C=(o=this.listComponent)===null||o===void 0?void 0:o.getAriaElement();C&&zp(C,null)}d&&h!=="fuzzy"&&this.highlightFilterMatch(),this.displayOrHidePicker()},t.prototype.displayOrHidePicker=function(){var e,o=(e=this.listComponent)===null||e===void 0?void 0:e.getGui(),n=this.currentList?this.currentList.length===0:!1;o==null||o.classList.toggle("ag-hidden",n)},t.prototype.clearSearchString=function(){this.searchString=""},t.prototype.selectListItem=function(e,o){if(!(!this.isPickerDisplayed||!this.currentList||!this.listComponent||e<0||e>=this.currentList.length)){var n=this.listComponent.ensureIndexVisible(e,!o);n&&!o&&this.listComponent.refresh(!0),this.highlightSelectedValue(e)}},t.prototype.setValue=function(e,o,n){var i=this.currentList?this.currentList.indexOf(e):-1;return i===-1?this:(this.value=e,n||this.selectListItem(i),this.renderSelectedValue(),r.prototype.setValue.call(this,e,o))},t.prototype.createRowComponent=function(e){var o=new _4(this.config,this.eWrapper);o.setParentComponent(this.listComponent),this.getContext().createBean(o),o.setState(e);var n=this.config,i=n.highlightMatch,s=n.searchType,a=s===void 0?"fuzzy":s;return i&&a!=="fuzzy"&&o.highlightString(this.searchString),o},t.prototype.getRowForMouseEvent=function(e){var o=this.listComponent;if(!o)return-1;var n=o==null?void 0:o.getGui(),i=n.getBoundingClientRect(),s=o.getScrollTop(),a=e.clientY-i.top+s;return Math.floor(a/o.getRowHeight())},t.prototype.onPickerMouseMove=function(e){if(this.listComponent){var o=this.getRowForMouseEvent(e);o!==-1&&o!=this.lastRowHovered&&(this.lastRowHovered=o,this.selectListItem(o,!0))}},t.prototype.onNavigationKeyDown=function(e,o){e.preventDefault();var n=o===N.DOWN;if(!this.isPickerDisplayed&&n){this.showPicker();return}var i=this.highlightedItem,s=n?1:-1,a=i===-1?0:i+s;this.selectListItem(a)},t.prototype.onEnterKeyDown=function(e){this.isPickerDisplayed&&(e.preventDefault(),this.currentList&&this.onListValueSelected(this.currentList[this.highlightedItem],!0))},t.prototype.onTabKeyDown=function(){!this.isPickerDisplayed||!this.currentList||this.setValue(this.currentList[this.highlightedItem],!1,!0)},t.prototype.onListValueSelected=function(e,o){this.setValue(e,!1,!0),this.dispatchPickerEvent(e,o),this.hidePicker()},t.prototype.dispatchPickerEvent=function(e,o){var n={type:w.EVENT_FIELD_PICKER_VALUE_SELECTED,fromEnterKey:o,value:e};this.dispatchEvent(n)},t.prototype.getFocusableElement=function(){var e=this.config.allowTyping;return e?this.eInput.getFocusableElement():r.prototype.getFocusableElement.call(this)},t.prototype.onKeyDown=function(e){var o=e.key,n=this.config.allowTyping;switch(o){case N.LEFT:case N.RIGHT:case N.PAGE_HOME:case N.PAGE_END:n||e.preventDefault();break;case N.PAGE_UP:case N.PAGE_DOWN:e.preventDefault();break;case N.DOWN:case N.UP:this.onNavigationKeyDown(e,o);break;case N.ESCAPE:this.isPickerDisplayed&&(io(this.listComponent.getGui())&&(e.preventDefault(),hn(e)),this.hidePicker());break;case N.ENTER:this.onEnterKeyDown(e);break;case N.TAB:this.onTabKeyDown();break;default:n||this.buildSearchStringFromKeyboardEvent(e)}},t.prototype.destroy=function(){this.listComponent&&(this.destroyBean(this.listComponent),this.listComponent=void 0),this.eLoading=void 0,r.prototype.destroy.call(this)},lg([y("userComponentFactory")],t.prototype,"userComponentFactory",void 0),lg([ee("eInput")],t.prototype,"eInput",void 0),t}(IC),D4=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),Ba=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},M4=function(r){D4(t,r);function t(e){var o=r.call(this,e,t.TEMPLATE)||this;return o.labelAlignment="top",o}return t.prototype.init=function(){this.eSlider.addCssClass("ag-slider-field")},t.prototype.onValueChange=function(e){var o=this,n=w.EVENT_FIELD_VALUE_CHANGED;return this.addManagedListener(this.eText,n,function(){var i=parseFloat(o.eText.getValue());o.eSlider.setValue(i.toString(),!0),e(i||0)}),this.addManagedListener(this.eSlider,n,function(){var i=o.eSlider.getValue();o.eText.setValue(i,!0),e(parseFloat(i))}),this},t.prototype.setSliderWidth=function(e){return this.eSlider.setWidth(e),this},t.prototype.setTextFieldWidth=function(e){return this.eText.setWidth(e),this},t.prototype.setMinValue=function(e){return this.eSlider.setMinValue(e),this.eText.setMin(e),this},t.prototype.setMaxValue=function(e){return this.eSlider.setMaxValue(e),this.eText.setMax(e),this},t.prototype.getValue=function(){return this.eText.getValue()},t.prototype.setValue=function(e){return this.getValue()===e?this:(this.eText.setValue(e,!0),this.eSlider.setValue(e,!0),this.dispatchEvent({type:w.EVENT_FIELD_VALUE_CHANGED}),this)},t.prototype.setStep=function(e){return this.eSlider.setStep(e),this.eText.setStep(e),this},t.TEMPLATE=`<div class="ag-slider">
            <label ref="eLabel"></label>
            <div class="ag-wrapper ag-slider-wrapper">
                <ag-input-range ref="eSlider"></ag-input-range>
                <ag-input-number-field ref="eText"></ag-input-number-field>
            </div>
        </div>`,Ba([ee("eLabel")],t.prototype,"eLabel",void 0),Ba([ee("eSlider")],t.prototype,"eSlider",void 0),Ba([ee("eText")],t.prototype,"eText",void 0),Ba([Q],t.prototype,"init",null),t}(OC),L4=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),Hn=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},x4=function(r){L4(t,r);function t(e){e===void 0&&(e={});var o=r.call(this,t.getTemplate(e))||this;o.suppressEnabledCheckbox=!0,o.suppressOpenCloseIcons=!1;var n=e.title,i=e.enabled,s=e.items,a=e.suppressEnabledCheckbox,l=e.suppressOpenCloseIcons;return o.title=n,o.cssIdentifier=e.cssIdentifier||"default",o.enabled=i??!0,o.items=s||[],o.alignItems=e.alignItems||"center",a!=null&&(o.suppressEnabledCheckbox=a),l!=null&&(o.suppressOpenCloseIcons=l),o}return t.getTemplate=function(e){var o=e.cssIdentifier||"default",n=e.direction||"vertical";return'<div class="ag-group ag-'.concat(o,`-group" role="presentation">
            <div class="ag-group-title-bar ag-`).concat(o,`-group-title-bar ag-unselectable" ref="eTitleBar" role="button">
                <span class="ag-group-title-bar-icon ag-`).concat(o,`-group-title-bar-icon" ref="eGroupOpenedIcon" role="presentation"></span>
                <span class="ag-group-title-bar-icon ag-`).concat(o,`-group-title-bar-icon" ref="eGroupClosedIcon" role="presentation"></span>
                <span ref="eTitle" class="ag-group-title ag-`).concat(o,`-group-title"></span>
            </div>
            <div ref="eToolbar" class="ag-group-toolbar ag-`).concat(o,`-group-toolbar">
                <ag-checkbox ref="cbGroupEnabled"></ag-checkbox>
            </div>
            <div ref="eContainer" class="ag-group-container ag-group-container-`).concat(n," ag-").concat(o,`-group-container"></div>
        </div>`)},t.prototype.postConstruct=function(){if(this.items.length){var e=this.items;this.items=[],this.addItems(e)}var o=this.localeService.getLocaleTextFunc();this.cbGroupEnabled.setLabel(o("enabled","Enabled")),this.title&&this.setTitle(this.title),this.enabled&&this.setEnabled(this.enabled),this.setAlignItems(this.alignItems),this.hideEnabledCheckbox(this.suppressEnabledCheckbox),this.hideOpenCloseIcons(this.suppressOpenCloseIcons),this.setupExpandContract(),this.refreshAriaStatus(),this.refreshChildDisplay()},t.prototype.setupExpandContract=function(){var e=this;this.eGroupClosedIcon.appendChild(wo("columnSelectClosed",this.gridOptionsService,null)),this.eGroupOpenedIcon.appendChild(wo("columnSelectOpen",this.gridOptionsService,null)),this.addManagedListener(this.eTitleBar,"click",function(){return e.toggleGroupExpand()}),this.addManagedListener(this.eTitleBar,"keydown",function(o){switch(o.key){case N.ENTER:case N.SPACE:o.preventDefault(),e.toggleGroupExpand();break;case N.RIGHT:case N.LEFT:o.preventDefault(),e.toggleGroupExpand(o.key===N.RIGHT);break}})},t.prototype.refreshAriaStatus=function(){this.suppressOpenCloseIcons||ko(this.eTitleBar,this.expanded)},t.prototype.refreshChildDisplay=function(){var e=!this.suppressOpenCloseIcons;xe(this.eToolbar,this.expanded&&!this.suppressEnabledCheckbox),xe(this.eGroupOpenedIcon,e&&this.expanded),xe(this.eGroupClosedIcon,e&&!this.expanded)},t.prototype.isExpanded=function(){return this.expanded},t.prototype.setAlignItems=function(e){this.alignItems!==e&&this.removeCssClass("ag-group-item-alignment-".concat(this.alignItems)),this.alignItems=e;var o="ag-group-item-alignment-".concat(this.alignItems);return this.addCssClass(o),this},t.prototype.toggleGroupExpand=function(e){return this.suppressOpenCloseIcons?(this.expanded=!0,this.refreshChildDisplay(),xe(this.eContainer,!0),this):(e=e??!this.expanded,this.expanded===e?this:(this.expanded=e,this.refreshAriaStatus(),this.refreshChildDisplay(),xe(this.eContainer,e),this.dispatchEvent({type:this.expanded?t.EVENT_EXPANDED:t.EVENT_COLLAPSED}),this))},t.prototype.addItems=function(e){var o=this;e.forEach(function(n){return o.addItem(n)})},t.prototype.addItem=function(e){var o=this.eContainer,n=e instanceof Re?e.getGui():e;n.classList.add("ag-group-item","ag-".concat(this.cssIdentifier,"-group-item")),o.appendChild(n),this.items.push(n)},t.prototype.hideItem=function(e,o){var n=this.items[o];xe(n,!e)},t.prototype.setTitle=function(e){return this.eTitle.innerText=e,this},t.prototype.addCssClassToTitleBar=function(e){this.eTitleBar.classList.add(e)},t.prototype.setEnabled=function(e,o){return this.enabled=e,this.refreshDisabledStyles(),this.toggleGroupExpand(e),o||this.cbGroupEnabled.setValue(e),this},t.prototype.isEnabled=function(){return this.enabled},t.prototype.onEnableChange=function(e){var o=this;return this.cbGroupEnabled.onValueChange(function(n){o.setEnabled(n,!0),e(n)}),this},t.prototype.hideEnabledCheckbox=function(e){return this.suppressEnabledCheckbox=e,this.refreshChildDisplay(),this.refreshDisabledStyles(),this},t.prototype.hideOpenCloseIcons=function(e){return this.suppressOpenCloseIcons=e,e&&this.toggleGroupExpand(!0),this},t.prototype.refreshDisabledStyles=function(){this.addOrRemoveCssClass("ag-disabled",!this.enabled),this.suppressEnabledCheckbox&&!this.enabled?(this.eTitleBar.classList.add("ag-disabled-group-title-bar"),this.eTitleBar.removeAttribute("tabindex")):(this.eTitleBar.classList.remove("ag-disabled-group-title-bar"),this.eTitleBar.setAttribute("tabindex","0")),this.eContainer.classList.toggle("ag-disabled-group-container",!this.enabled)},t.EVENT_EXPANDED="expanded",t.EVENT_COLLAPSED="collapsed",Hn([ee("eTitleBar")],t.prototype,"eTitleBar",void 0),Hn([ee("eGroupOpenedIcon")],t.prototype,"eGroupOpenedIcon",void 0),Hn([ee("eGroupClosedIcon")],t.prototype,"eGroupClosedIcon",void 0),Hn([ee("eToolbar")],t.prototype,"eToolbar",void 0),Hn([ee("cbGroupEnabled")],t.prototype,"cbGroupEnabled",void 0),Hn([ee("eTitle")],t.prototype,"eTitle",void 0),Hn([ee("eContainer")],t.prototype,"eContainer",void 0),Hn([Q],t.prototype,"postConstruct",null),t}(Re),F4=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),kl=function(){return kl=Object.assign||function(r){for(var t,e=1,o=arguments.length;e<o;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},kl.apply(this,arguments)},cg=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},N4=function(r){F4(t,r);function t(e){e===void 0&&(e=1);var o=r.call(this,'<div class="ag-menu-list" role="tree"></div>')||this;return o.level=e,o.menuItems=[],o}return t.prototype.postConstruct=function(){var e=this;this.initialiseTabGuard({onTabKeyDown:function(o){return e.onTabKeyDown(o)},handleKeyDown:function(o){return e.handleKeyDown(o)}})},t.prototype.onTabKeyDown=function(e){var o=this.getParentComponent(),n=o&&o.getGui(),i=n&&n.classList.contains("ag-focus-managed");i||e.preventDefault(),e.shiftKey&&this.closeIfIsChild(e)},t.prototype.handleKeyDown=function(e){switch(e.key){case N.UP:case N.RIGHT:case N.DOWN:case N.LEFT:e.preventDefault(),this.handleNavKey(e.key);break;case N.ESCAPE:var o=this.findTopMenu();o&&this.focusService.focusInto(o.getGui());break}},t.prototype.clearActiveItem=function(){this.activeMenuItem&&(this.activeMenuItem.deactivate(),this.activeMenuItem=null)},t.prototype.addMenuItems=function(e){var o=this;e!=null&&e.forEach(function(n){n==="separator"?o.addSeparator():typeof n=="string"?console.warn("AG Grid: unrecognised menu item ".concat(n)):o.addItem(n)})},t.prototype.addItem=function(e){var o=this,n=this.createManagedBean(new fs(kl(kl({},e),{isAnotherSubMenuOpen:function(){return o.menuItems.some(function(i){return i.isSubMenuOpen()})}})));n.setParentComponent(this),Xy(n.getGui(),this.level),this.menuItems.push(n),this.appendChild(n.getGui()),this.addManagedListener(n,fs.EVENT_MENU_ITEM_SELECTED,function(i){o.dispatchEvent(i)}),this.addManagedListener(n,fs.EVENT_MENU_ITEM_ACTIVATED,function(i){o.activeMenuItem&&o.activeMenuItem!==i.menuItem&&o.activeMenuItem.deactivate(),o.activeMenuItem=i.menuItem})},t.prototype.activateFirstItem=function(){var e=this.menuItems.filter(function(o){return!o.isDisabled()})[0];e&&e.activate()},t.prototype.addSeparator=function(){var e=`
            <div class="ag-menu-separator" aria-hidden="true">
                <div class="ag-menu-separator-part"></div>
                <div class="ag-menu-separator-part"></div>
                <div class="ag-menu-separator-part"></div>
                <div class="ag-menu-separator-part"></div>
            </div>`;this.appendChild(Ot(e))},t.prototype.findTopMenu=function(){var e=this.getParentComponent();if(!e&&this instanceof t)return this;for(;;){var o=e&&e.getParentComponent&&e.getParentComponent();if(!o||!(o instanceof t||o instanceof fs))break;e=o}return e instanceof t?e:void 0},t.prototype.handleNavKey=function(e){switch(e){case N.UP:case N.DOWN:var o=this.findNextItem(e===N.UP);o&&o!==this.activeMenuItem&&o.activate();return}var n=this.gridOptionsService.get("enableRtl")?N.RIGHT:N.LEFT;e===n?this.closeIfIsChild():this.openChild()},t.prototype.closeIfIsChild=function(e){var o=this.getParentComponent();o&&o instanceof fs&&(e&&e.preventDefault(),o.closeSubMenu(),o.getGui().focus())},t.prototype.openChild=function(){this.activeMenuItem&&this.activeMenuItem.openSubMenu(!0)},t.prototype.findNextItem=function(e){var o=this.menuItems.filter(function(l){return!l.isDisabled()});if(o.length){if(!this.activeMenuItem)return e?Ge(o):o[0];e&&o.reverse();for(var n,i=!1,s=0;s<o.length;s++){var a=o[s];if(!i){a===this.activeMenuItem&&(i=!0);continue}n=a;break}return n||this.activeMenuItem}},t.prototype.destroy=function(){this.clearActiveItem(),r.prototype.destroy.call(this)},cg([y("focusService")],t.prototype,"focusService",void 0),cg([Q],t.prototype,"postConstruct",null),t}(Ec),G4=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),k4=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},H4=function(r){G4(t,r);function t(e){var o=r.call(this)||this;return o.wrappedComponent=e,o.setTemplateFromElement(e.getGui()),o}return t.prototype.postConstruct=function(){var e=this;this.initialiseTabGuard({onTabKeyDown:function(o){return e.onTabKeyDown(o)},handleKeyDown:function(o){return e.handleKeyDown(o)}})},t.prototype.handleKeyDown=function(e){e.key===N.ESCAPE&&this.closePanel()},t.prototype.onTabKeyDown=function(e){e.defaultPrevented||(this.closePanel(),e.preventDefault())},t.prototype.closePanel=function(){var e=this.parentComponent;e.closeSubMenu(),setTimeout(function(){return e.getGui().focus()},0)},k4([Q],t.prototype,"postConstruct",null),t}(Ec),V4=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),ug=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},fs=function(r){V4(t,r);function t(e){var o=r.call(this)||this;return o.params=e,o.isActive=!1,o.subMenuIsOpen=!1,o.setTemplate('<div class="'.concat(o.getClassName(),'" tabindex="-1" role="treeitem"></div>')),o}return t.prototype.init=function(){var e=this;this.addIcon(),this.addName(),this.addShortcut(),this.addSubMenu(),this.addTooltip();var o=this.getGui();this.params.disabled?(this.addCssClass(this.getClassName("disabled")),Wp(o,!0)):(this.addGuiEventListener("click",function(n){return e.onItemSelected(n)}),this.addGuiEventListener("keydown",function(n){(n.key===N.ENTER||n.key===N.SPACE)&&(n.preventDefault(),e.onItemSelected(n))}),this.addGuiEventListener("mousedown",function(n){n.stopPropagation(),n.preventDefault()}),this.addGuiEventListener("mouseenter",function(){return e.onMouseEnter()}),this.addGuiEventListener("mouseleave",function(){return e.onMouseLeave()})),this.params.cssClasses&&this.params.cssClasses.forEach(function(n){return e.addCssClass(n)})},t.prototype.isDisabled=function(){return!!this.params.disabled},t.prototype.openSubMenu=function(e){var o=this;if(e===void 0&&(e=!1),this.closeSubMenu(),!!this.params.subMenu){var n=Ot('<div class="ag-menu" role="presentation"></div>'),i;if(this.params.subMenu instanceof Array){var s=Ky(this.getGui()),a=isNaN(s)?1:s+1,l=this.createBean(new N4(a));l.setParentComponent(this),l.addMenuItems(this.params.subMenu),n.appendChild(l.getGui()),this.addManagedListener(l,t.EVENT_MENU_ITEM_SELECTED,function(E){return o.dispatchEvent(E)}),l.addGuiEventListener("mouseenter",function(){return o.cancelDeactivate()}),i=function(){return o.destroyBean(l)},e&&setTimeout(function(){return l.activateFirstItem()},0)}else{var c=this.params.subMenu,u=this.createBean(new H4(c));u.setParentComponent(this);var d=u.getGui(),p="mouseenter",h=function(){return o.cancelDeactivate()};d.addEventListener(p,h),i=function(){return d.removeEventListener(p,h)},n.appendChild(d),c.afterGuiAttached&&setTimeout(function(){return c.afterGuiAttached()},0)}var f=this.getGui(),g=this.popupService.positionPopupForMenu.bind(this.popupService,{eventSource:f,ePopup:n}),_=this.localeService.getLocaleTextFunc(),C=this.popupService.addPopup({modal:!0,eChild:n,positionCallback:g,anchorToElement:f,ariaLabel:_("ariaLabelSubMenu","SubMenu")});this.subMenuIsOpen=!0,ko(f,!0),this.hideSubMenu=function(){C&&C.hideFunc(),o.subMenuIsOpen=!1,ko(f,!1),i()}}},t.prototype.closeSubMenu=function(){this.hideSubMenu&&(this.hideSubMenu(),this.hideSubMenu=null,ko(this.getGui(),!1))},t.prototype.isSubMenuOpen=function(){return this.subMenuIsOpen},t.prototype.activate=function(e){var o=this;this.cancelActivate(),!this.params.disabled&&(this.isActive=!0,this.addCssClass(this.getClassName("active")),this.getGui().focus(),e&&this.params.subMenu&&window.setTimeout(function(){o.isAlive()&&o.isActive&&o.openSubMenu()},300),this.onItemActivated())},t.prototype.deactivate=function(){this.cancelDeactivate(),this.removeCssClass(this.getClassName("active")),this.isActive=!1,this.subMenuIsOpen&&this.hideSubMenu()},t.prototype.addIcon=function(){if(!(!this.params.checked&&!this.params.icon&&this.params.isCompact)){var e=Ot('<span ref="eIcon" class="'.concat(this.getClassName("part")," ").concat(this.getClassName("icon"),'" role="presentation"></span>'));this.params.checked?e.appendChild(at("check",this.gridOptionsService)):this.params.icon&&(da(this.params.icon)?e.appendChild(this.params.icon):typeof this.params.icon=="string"?e.innerHTML=this.params.icon:console.warn("AG Grid: menu item icon must be DOM node or string")),this.getGui().appendChild(e)}},t.prototype.addName=function(){if(!(!this.params.name&&this.params.isCompact)){var e=Ot('<span ref="eName" class="'.concat(this.getClassName("part")," ").concat(this.getClassName("text"),'">').concat(this.params.name||"","</span>"));this.getGui().appendChild(e)}},t.prototype.addTooltip=function(){this.params.tooltip&&(this.tooltip=this.params.tooltip,this.gridOptionsService.get("enableBrowserTooltips")?this.getGui().setAttribute("title",this.tooltip):this.createManagedBean(new hh(this)))},t.prototype.getTooltipParams=function(){return{location:"menu",value:this.tooltip}},t.prototype.addShortcut=function(){if(!(!this.params.shortcut&&this.params.isCompact)){var e=Ot('<span ref="eShortcut" class="'.concat(this.getClassName("part")," ").concat(this.getClassName("shortcut"),'">').concat(this.params.shortcut||"","</span>"));this.getGui().appendChild(e)}},t.prototype.addSubMenu=function(){if(!(!this.params.subMenu&&this.params.isCompact)){var e=Ot('<span ref="ePopupPointer" class="'.concat(this.getClassName("part")," ").concat(this.getClassName("popup-pointer"),'"></span>')),o=this.getGui();if(this.params.subMenu){var n=this.gridOptionsService.get("enableRtl")?"smallLeft":"smallRight";ko(o,!1),e.appendChild(at(n,this.gridOptionsService))}o.appendChild(e)}},t.prototype.onItemSelected=function(e){if(this.params.action?this.params.action():this.openSubMenu(e&&e.type==="keydown"),!(this.params.subMenu&&!this.params.action)){var o={type:t.EVENT_MENU_ITEM_SELECTED,action:this.params.action,checked:this.params.checked,cssClasses:this.params.cssClasses,disabled:this.params.disabled,icon:this.params.icon,name:this.params.name,shortcut:this.params.shortcut,subMenu:this.params.subMenu,tooltip:this.params.tooltip,event:e};this.dispatchEvent(o)}},t.prototype.onItemActivated=function(){var e={type:t.EVENT_MENU_ITEM_ACTIVATED,menuItem:this};this.dispatchEvent(e)},t.prototype.cancelActivate=function(){this.activateTimeoutId&&(window.clearTimeout(this.activateTimeoutId),this.activateTimeoutId=0)},t.prototype.cancelDeactivate=function(){this.deactivateTimeoutId&&(window.clearTimeout(this.deactivateTimeoutId),this.deactivateTimeoutId=0)},t.prototype.onMouseEnter=function(){var e=this;this.cancelDeactivate(),this.params.isAnotherSubMenuOpen()?this.activateTimeoutId=window.setTimeout(function(){return e.activate(!0)},t.ACTIVATION_DELAY):this.activate(!0)},t.prototype.onMouseLeave=function(){var e=this;this.cancelActivate(),this.isSubMenuOpen()?this.deactivateTimeoutId=window.setTimeout(function(){return e.deactivate()},t.ACTIVATION_DELAY):this.deactivate()},t.prototype.getClassName=function(e){var o=this.params.isCompact?"ag-compact-menu-option":"ag-menu-option";return e?"".concat(o,"-").concat(e):o},t.EVENT_MENU_ITEM_SELECTED="menuItemSelected",t.EVENT_MENU_ITEM_ACTIVATED="menuItemActivated",t.ACTIVATION_DELAY=80,ug([y("popupService")],t.prototype,"popupService",void 0),ug([Q],t.prototype,"init",null),t}(Re),B4=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),gs=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},tw=function(r){B4(t,r);function t(e){var o=r.call(this,t.getTemplate(e))||this;return o.closable=!0,o.config=e,o}return t.getTemplate=function(e){var o=e&&e.cssIdentifier||"default";return'<div class="ag-panel ag-'.concat(o,`-panel" tabindex="-1">
            <div ref="eTitleBar" class="ag-panel-title-bar ag-`).concat(o,`-panel-title-bar ag-unselectable">
                <span ref="eTitle" class="ag-panel-title-bar-title ag-`).concat(o,`-panel-title-bar-title"></span>
                <div ref="eTitleBarButtons" class="ag-panel-title-bar-buttons ag-`).concat(o,`-panel-title-bar-buttons"></div>
            </div>
            <div ref="eContentWrapper" class="ag-panel-content-wrapper ag-`).concat(o,`-panel-content-wrapper"></div>
        </div>`)},t.prototype.postConstruct=function(){var e=this,o=this.config,n=o.component,i=o.closable,s=o.hideTitleBar,a=o.title,l=o.minWidth,c=l===void 0?250:l,u=o.width,d=o.minHeight,p=d===void 0?250:d,h=o.height,f=o.centered,g=o.popup,_=o.x,C=o.y;this.positionableFeature=new AC(this.getGui(),{minWidth:c,width:u,minHeight:p,height:h,centered:f,x:_,y:C,popup:g,calculateTopBuffer:function(){return e.positionableFeature.getHeight()-e.getBodyHeight()}}),this.createManagedBean(this.positionableFeature);var E=this.getGui();n&&this.setBodyComponent(n),s?xe(this.eTitleBar,!1):(a&&this.setTitle(a),this.setClosable(i??this.closable)),this.addManagedListener(this.eTitleBar,"mousedown",function(T){var P=e.gridOptionsService.getDocument();if(E.contains(T.relatedTarget)||E.contains(P.activeElement)||e.eTitleBarButtons.contains(T.target)){T.preventDefault();return}var A=e.eContentWrapper.querySelector("button, [href], input, select, textarea, [tabindex]");A&&A.focus()}),!(g&&this.positionableFeature.isPositioned())&&(this.renderComponent&&this.renderComponent(),this.positionableFeature.initialisePosition(),this.eContentWrapper.style.height="0")},t.prototype.renderComponent=function(){var e=this,o=this.getGui();o.focus(),this.close=function(){o.parentElement.removeChild(o),e.destroy()}},t.prototype.getHeight=function(){return this.positionableFeature.getHeight()},t.prototype.setHeight=function(e){this.positionableFeature.setHeight(e)},t.prototype.getWidth=function(){return this.positionableFeature.getWidth()},t.prototype.setWidth=function(e){this.positionableFeature.setWidth(e)},t.prototype.setClosable=function(e){if(e!==this.closable&&(this.closable=e),e){var o=this.closeButtonComp=new Re(t.CLOSE_BTN_TEMPLATE);this.getContext().createBean(o);var n=o.getGui(),i=at("close",this.gridOptionsService);i.classList.add("ag-panel-title-bar-button-icon"),n.appendChild(i),this.addTitleBarButton(o),o.addManagedListener(n,"click",this.onBtClose.bind(this))}else if(this.closeButtonComp){var n=this.closeButtonComp.getGui();n.parentElement.removeChild(n),this.closeButtonComp=this.destroyBean(this.closeButtonComp)}},t.prototype.setBodyComponent=function(e){e.setParentComponent(this),this.eContentWrapper.appendChild(e.getGui())},t.prototype.addTitleBarButton=function(e,o){var n=this.eTitleBarButtons,i=n.children,s=i.length;o==null&&(o=s),o=Math.max(0,Math.min(o,s)),e.addCssClass("ag-panel-title-bar-button");var a=e.getGui();o===0?n.insertAdjacentElement("afterbegin",a):o===s?n.insertAdjacentElement("beforeend",a):i[o-1].insertAdjacentElement("afterend",a),e.setParentComponent(this)},t.prototype.getBodyHeight=function(){return ua(this.eContentWrapper)},t.prototype.getBodyWidth=function(){return Qi(this.eContentWrapper)},t.prototype.setTitle=function(e){this.eTitle.innerText=e},t.prototype.onBtClose=function(){this.close()},t.prototype.destroy=function(){this.closeButtonComp&&(this.closeButtonComp=this.destroyBean(this.closeButtonComp));var e=this.getGui();e&&io(e)&&this.close(),r.prototype.destroy.call(this)},t.CLOSE_BTN_TEMPLATE='<div class="ag-button"></div>',gs([ee("eContentWrapper")],t.prototype,"eContentWrapper",void 0),gs([ee("eTitleBar")],t.prototype,"eTitleBar",void 0),gs([ee("eTitleBarButtons")],t.prototype,"eTitleBarButtons",void 0),gs([ee("eTitle")],t.prototype,"eTitle",void 0),gs([Q],t.prototype,"postConstruct",null),t}(Re),U4=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),Hl=function(){return Hl=Object.assign||function(r){for(var t,e=1,o=arguments.length;e<o;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},Hl.apply(this,arguments)},j4=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},W4=function(r){U4(t,r);function t(e){var o=r.call(this,Hl(Hl({},e),{popup:!0}))||this;return o.isMaximizable=!1,o.isMaximized=!1,o.maximizeListeners=[],o.resizeListenerDestroy=null,o.lastPosition={x:0,y:0,width:0,height:0},o}return t.prototype.postConstruct=function(){var e=this,o=this.getGui(),n=this.config,i=n.movable,s=n.resizable,a=n.maximizable;this.addCssClass("ag-dialog"),r.prototype.postConstruct.call(this),this.addManagedListener(o,"focusin",function(l){o.contains(l.relatedTarget)||e.popupService.bringPopupToFront(o)}),i&&this.setMovable(i),a&&this.setMaximizable(a),s&&this.setResizable(s)},t.prototype.renderComponent=function(){var e=this.getGui(),o=this.config,n=o.alwaysOnTop,i=o.modal,s=o.title,a=o.afterGuiAttached,l=this.localeService.getLocaleTextFunc(),c=this.popupService.addPopup({modal:i,eChild:e,closeOnEsc:!0,closedCallback:this.destroy.bind(this),alwaysOnTop:n,ariaLabel:s||l("ariaLabelDialog","Dialog"),afterGuiAttached:a});c&&(this.close=c.hideFunc)},t.prototype.toggleMaximize=function(){var e=this.positionableFeature.getPosition();if(this.isMaximized){var o=this.lastPosition,n=o.x,i=o.y,s=o.width,a=o.height;this.setWidth(s),this.setHeight(a),this.positionableFeature.offsetElement(n,i)}else this.lastPosition.width=this.getWidth(),this.lastPosition.height=this.getHeight(),this.lastPosition.x=e.x,this.lastPosition.y=e.y,this.positionableFeature.offsetElement(0,0),this.setHeight("100%"),this.setWidth("100%");this.isMaximized=!this.isMaximized,this.refreshMaximizeIcon()},t.prototype.refreshMaximizeIcon=function(){xe(this.maximizeIcon,!this.isMaximized),xe(this.minimizeIcon,this.isMaximized)},t.prototype.clearMaximizebleListeners=function(){this.maximizeListeners.length&&(this.maximizeListeners.forEach(function(e){return e()}),this.maximizeListeners.length=0),this.resizeListenerDestroy&&(this.resizeListenerDestroy(),this.resizeListenerDestroy=null)},t.prototype.destroy=function(){this.maximizeButtonComp=this.destroyBean(this.maximizeButtonComp),this.clearMaximizebleListeners(),r.prototype.destroy.call(this)},t.prototype.setResizable=function(e){this.positionableFeature.setResizable(e)},t.prototype.setMovable=function(e){this.positionableFeature.setMovable(e,this.eTitleBar)},t.prototype.setMaximizable=function(e){var o=this;if(!e){this.clearMaximizebleListeners(),this.maximizeButtonComp&&(this.destroyBean(this.maximizeButtonComp),this.maximizeButtonComp=this.maximizeIcon=this.minimizeIcon=void 0);return}var n=this.eTitleBar;if(!(!n||e===this.isMaximizable)){var i=this.buildMaximizeAndMinimizeElements();this.refreshMaximizeIcon(),i.addManagedListener(i.getGui(),"click",this.toggleMaximize.bind(this)),this.addTitleBarButton(i,0),this.maximizeListeners.push(this.addManagedListener(n,"dblclick",this.toggleMaximize.bind(this))),this.resizeListenerDestroy=this.addManagedListener(this,"resize",function(){o.isMaximized=!1,o.refreshMaximizeIcon()})}},t.prototype.buildMaximizeAndMinimizeElements=function(){var e=this.maximizeButtonComp=this.createBean(new Re('<div class="ag-dialog-button"></span>')),o=e.getGui();return this.maximizeIcon=at("maximize",this.gridOptionsService),o.appendChild(this.maximizeIcon),this.maximizeIcon.classList.add("ag-panel-title-bar-button-icon"),this.minimizeIcon=at("minimize",this.gridOptionsService),o.appendChild(this.minimizeIcon),this.minimizeIcon.classList.add("ag-panel-title-bar-button-icon"),e},j4([y("popupService")],t.prototype,"popupService",void 0),t}(tw),z4=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),Vl=function(){return Vl=Object.assign||function(r){for(var t,e=1,o=arguments.length;e<o;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},Vl.apply(this,arguments)},vs=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},dg=function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var o=e.call(r),n,i=[],s;try{for(;(t===void 0||t-- >0)&&!(n=o.next()).done;)i.push(n.value)}catch(a){s={error:a}}finally{try{n&&!n.done&&(e=o.return)&&e.call(o)}finally{if(s)throw s.error}}return i},pg=function(r,t,e){if(e||arguments.length===2)for(var o=0,n=t.length,i;o<n;o++)(i||!(o in t))&&(i||(i=Array.prototype.slice.call(t,0,o)),i[o]=t[o]);return r.concat(i||Array.prototype.slice.call(t))},hg=function(r){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&r[t],o=0;if(e)return e.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&o>=r.length&&(r=void 0),{value:r&&r[o++],done:!r}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Kn;(function(r){r[r.vertical=0]="vertical",r[r.horizontal=1]="horizontal"})(Kn||(Kn={}));var $4=0,K4=function(r){z4(t,r);function t(){var o=r!==null&&r.apply(this,arguments)||this;return o.popupList=[],o}e=t,t.prototype.postConstruct=function(){var o=this;this.ctrlsService.whenReady(function(n){o.gridCtrl=n.gridCtrl}),this.addManagedListener(this.eventService,w.EVENT_GRID_STYLES_CHANGED,this.handleThemeChange.bind(this))},t.prototype.getPopupParent=function(){var o=this.gridOptionsService.get("popupParent");return o||this.gridCtrl.getGui()},t.prototype.positionPopupForMenu=function(o){var n=o.eventSource,i=o.ePopup,s=this.getPopupIndex(i);if(s!==-1){var a=this.popupList[s];a.alignedToElement=n}var l=n.getBoundingClientRect(),c=this.getParentRect(),u=this.keepXYWithinBounds(i,l.top-c.top,Kn.vertical),d=i.clientWidth>0?i.clientWidth:200;i.style.minWidth="".concat(d,"px");var p=c.right-c.left,h=p-d,f;this.gridOptionsService.get("enableRtl")?(f=_(),f<0&&(f=g(),this.setAlignedStyles(i,"left")),f>h&&(f=0,this.setAlignedStyles(i,"right"))):(f=g(),f>h&&(f=_(),this.setAlignedStyles(i,"right")),f<0&&(f=0,this.setAlignedStyles(i,"left"))),i.style.left="".concat(f,"px"),i.style.top="".concat(u,"px");function g(){return l.right-c.left-2}function _(){return l.left-c.left-d}},t.prototype.positionPopupUnderMouseEvent=function(o){var n=this,i=o.ePopup,s=o.nudgeX,a=o.nudgeY,l=o.skipObserver;this.positionPopup({ePopup:i,nudgeX:s,nudgeY:a,keepWithinBounds:!0,skipObserver:l,updatePosition:function(){return n.calculatePointerAlign(o.mouseEvent)},postProcessCallback:function(){return n.callPostProcessPopup(o.type,o.ePopup,null,o.mouseEvent,o.column,o.rowNode)}})},t.prototype.calculatePointerAlign=function(o){var n=this.getParentRect();return{x:o.clientX-n.left,y:o.clientY-n.top}},t.prototype.positionPopupByComponent=function(o){var n=this,i=o.ePopup,s=o.nudgeX,a=o.nudgeY,l=o.keepWithinBounds,c=o.eventSource,u=o.alignSide,d=u===void 0?"left":u,p=o.position,h=p===void 0?"over":p,f=o.column,g=o.rowNode,_=o.type,C=c.getBoundingClientRect(),E=this.getParentRect(),T=this.getPopupIndex(i);if(T!==-1){var P=this.popupList[T];P.alignedToElement=c}var A=function(){var b=C.left-E.left;d==="right"&&(b-=i.offsetWidth-C.width);var I;if(h==="over")I=C.top-E.top,n.setAlignedStyles(i,"over");else{n.setAlignedStyles(i,"under");var F=n.shouldRenderUnderOrAbove(i,C,E,o.nudgeY||0);F==="under"?I=C.top-E.top+C.height:I=C.top-i.offsetHeight-(a||0)*2-E.top}return{x:b,y:I}};this.positionPopup({ePopup:i,nudgeX:s,nudgeY:a,keepWithinBounds:l,updatePosition:A,postProcessCallback:function(){return n.callPostProcessPopup(_,i,c,null,f,g)}})},t.prototype.shouldRenderUnderOrAbove=function(o,n,i,s){var a=i.bottom-n.bottom,l=n.top-i.top,c=o.offsetHeight+s;return a>c?"under":l>c||l>a?"above":"under"},t.prototype.setAlignedStyles=function(o,n){var i=this.getPopupIndex(o);if(i!==-1){var s=this.popupList[i],a=s.alignedToElement;if(a){var l=["right","left","over","above","under"];l.forEach(function(c){a.classList.remove("ag-has-popup-positioned-".concat(c)),o.classList.remove("ag-popup-positioned-".concat(c))}),n&&(a.classList.add("ag-has-popup-positioned-".concat(n)),o.classList.add("ag-popup-positioned-".concat(n)))}}},t.prototype.callPostProcessPopup=function(o,n,i,s,a,l){var c=this.gridOptionsService.getCallback("postProcessPopup");if(c){var u={column:a,rowNode:l,ePopup:n,type:o,eventSource:i,mouseEvent:s};c(u)}},t.prototype.positionPopup=function(o){var n=this,i=o.ePopup,s=o.keepWithinBounds,a=o.nudgeX,l=o.nudgeY,c=o.skipObserver,u=o.updatePosition,d={width:0,height:0},p=function(f){f===void 0&&(f=!1);var g=u(),_=g.x,C=g.y;f&&i.clientWidth===d.width&&i.clientHeight===d.height||(d.width=i.clientWidth,d.height=i.clientHeight,a&&(_+=a),l&&(C+=l),s&&(_=n.keepXYWithinBounds(i,_,Kn.horizontal),C=n.keepXYWithinBounds(i,C,Kn.vertical)),i.style.left="".concat(_,"px"),i.style.top="".concat(C,"px"),o.postProcessCallback&&o.postProcessCallback())};if(p(),!c){var h=this.resizeObserverService.observeResize(i,function(){return p(!0)});setTimeout(function(){return h()},e.WAIT_FOR_POPUP_CONTENT_RESIZE)}},t.prototype.getActivePopups=function(){return this.popupList.map(function(o){return o.element})},t.prototype.getPopupList=function(){return this.popupList},t.prototype.getParentRect=function(){var o=this.gridOptionsService.getDocument(),n=this.getPopupParent();return n===o.body?n=o.documentElement:getComputedStyle(n).position==="static"&&(n=n.offsetParent),rh(n)},t.prototype.keepXYWithinBounds=function(o,n,i){var s=i===Kn.vertical,a=s?"clientHeight":"clientWidth",l=s?"top":"left",c=s?"offsetHeight":"offsetWidth",u=s?"scrollTop":"scrollLeft",d=this.gridOptionsService.getDocument(),p=d.documentElement,h=this.getPopupParent(),f=h.getBoundingClientRect(),g=d.documentElement.getBoundingClientRect(),_=h===d.body,C=o[c],E=s?ih:Ks,T=_?E(p)+p[u]:h[a];_&&(T-=Math.abs(g[l]-f[l]));var P=T-C;return Math.min(Math.max(n,0),Math.abs(P))},t.prototype.addPopup=function(o){var n=this.gridOptionsService.getDocument(),i=o.eChild,s=o.ariaLabel,a=o.alwaysOnTop,l=o.positionCallback,c=o.anchorToElement;if(!n)return console.warn("AG Grid: could not find the document, document is empty"),{hideFunc:function(){}};var u=this.getPopupIndex(i);if(u!==-1){var d=this.popupList[u];return{hideFunc:d.hideFunc}}this.initialisePopupPosition(i);var p=this.createPopupWrapper(i,s,!!a),h=this.addEventListenersToPopup(Vl(Vl({},o),{wrapperEl:p}));return l&&l(),this.addPopupToPopupList(i,p,h,c),{hideFunc:h}},t.prototype.initialisePopupPosition=function(o){var n=this.getPopupParent(),i=n.getBoundingClientRect();W(o.style.top)||(o.style.top="".concat(i.top*-1,"px")),W(o.style.left)||(o.style.left="".concat(i.left*-1,"px"))},t.prototype.createPopupWrapper=function(o,n,i){var s,a=this.getPopupParent(),l=document.createElement("div"),c=this.environment.getTheme().allThemes;return c.length&&(s=l.classList).add.apply(s,pg([],dg(c),!1)),l.classList.add("ag-popup"),o.classList.add(this.gridOptionsService.get("enableRtl")?"ag-rtl":"ag-ltr","ag-popup-child"),o.hasAttribute("role")||yt(o,"dialog"),In(o,n),l.appendChild(o),a.appendChild(l),i?this.setAlwaysOnTop(o,!0):this.bringPopupToFront(o),l},t.prototype.handleThemeChange=function(){var o,n,i,s,a,l=this.environment.getTheme().allThemes;try{for(var c=hg(this.popupList),u=c.next();!u.done;u=c.next()){var d=u.value;try{for(var p=(i=void 0,hg(Array.from(d.wrapper.classList))),h=p.next();!h.done;h=p.next()){var f=h.value;f.startsWith("ag-theme-")&&d.wrapper.classList.remove(f)}}catch(g){i={error:g}}finally{try{h&&!h.done&&(s=p.return)&&s.call(p)}finally{if(i)throw i.error}}l.length&&(a=d.wrapper.classList).add.apply(a,pg([],dg(l),!1))}}catch(g){o={error:g}}finally{try{u&&!u.done&&(n=c.return)&&n.call(c)}finally{if(o)throw o.error}}},t.prototype.addEventListenersToPopup=function(o){var n=this,i=this.gridOptionsService.getDocument(),s=this.getPopupParent(),a=o.wrapperEl,l=o.eChild;o.click;var c=o.closedCallback,u=o.afterGuiAttached,d=o.closeOnEsc,p=o.modal,h=!1,f=function(E){if(a.contains(i.activeElement)){var T=E.key;T===N.ESCAPE&&!Uo(E)&&C({keyboardEvent:E})}},g=function(E){return C({mouseEvent:E})},_=function(E){return C({touchEvent:E})},C=function(E){E===void 0&&(E={});var T=E.mouseEvent,P=E.touchEvent,A=E.keyboardEvent;n.isEventFromCurrentPopup({mouseEvent:T,touchEvent:P},l)||h||(h=!0,s.removeChild(a),i.removeEventListener("keydown",f),i.removeEventListener("mousedown",g),i.removeEventListener("touchstart",_),i.removeEventListener("contextmenu",g),n.eventService.removeEventListener(w.EVENT_DRAG_STARTED,g),c&&c(T||P||A),n.removePopupFromPopupList(l))};return u&&u({hidePopup:C}),window.setTimeout(function(){d&&i.addEventListener("keydown",f),p&&(i.addEventListener("mousedown",g),n.eventService.addEventListener(w.EVENT_DRAG_STARTED,g),i.addEventListener("touchstart",_),i.addEventListener("contextmenu",g))},0),C},t.prototype.addPopupToPopupList=function(o,n,i,s){this.popupList.push({element:o,wrapper:n,hideFunc:i,instanceId:$4++,isAnchored:!!s}),s&&this.setPopupPositionRelatedToElement(o,s)},t.prototype.getPopupIndex=function(o){return this.popupList.findIndex(function(n){return n.element===o})},t.prototype.setPopupPositionRelatedToElement=function(o,n){var i=this.getPopupIndex(o);if(i!==-1){var s=this.popupList[i];if(s.stopAnchoringPromise&&s.stopAnchoringPromise.then(function(l){return l&&l()}),s.stopAnchoringPromise=void 0,s.isAnchored=!1,!!n){var a=this.keepPopupPositionedRelativeTo({element:n,ePopup:o,hidePopup:s.hideFunc});return s.stopAnchoringPromise=a,s.isAnchored=!0,a}}},t.prototype.removePopupFromPopupList=function(o){this.setAlignedStyles(o,null),this.setPopupPositionRelatedToElement(o,null),this.popupList=this.popupList.filter(function(n){return n.element!==o})},t.prototype.keepPopupPositionedRelativeTo=function(o){var n=this,i=this.getPopupParent(),s=i.getBoundingClientRect(),a=o.element,l=o.ePopup,c=a.getBoundingClientRect(),u=s.top-c.top,d=s.left-c.left,p=u,h=d,f=l.style.top,g=parseInt(f.substring(0,f.length-1),10),_=l.style.left,C=parseInt(_.substring(0,_.length-1),10);return new on(function(E){n.getFrameworkOverrides().setInterval(function(){var T=i.getBoundingClientRect(),P=a.getBoundingClientRect(),A=P.top==0&&P.left==0&&P.height==0&&P.width==0;if(A){o.hidePopup();return}var b=T.top-P.top;if(b!=p){var I=n.keepXYWithinBounds(l,g+u-b,Kn.vertical);l.style.top="".concat(I,"px")}p=b;var F=T.left-P.left;if(F!=h){var U=n.keepXYWithinBounds(l,C+d-F,Kn.horizontal);l.style.left="".concat(U,"px")}h=F},200).then(function(T){var P=function(){T!=null&&window.clearInterval(T)};E(P)})})},t.prototype.hasAnchoredPopup=function(){return this.popupList.some(function(o){return o.isAnchored})},t.prototype.isEventFromCurrentPopup=function(o,n){var i=o.mouseEvent,s=o.touchEvent,a=i||s;if(!a)return!1;var l=this.getPopupIndex(n);if(l===-1)return!1;for(var c=l;c<this.popupList.length;c++){var u=this.popupList[c];if(Sl(u.element,a))return!0}return this.isElementWithinCustomPopup(a.target)},t.prototype.isElementWithinCustomPopup=function(o){for(var n=this.gridOptionsService.getDocument();o&&o!==n.body;){if(o.classList.contains("ag-custom-component-popup")||o.parentElement===null)return!0;o=o.parentElement}return!1},t.prototype.getWrapper=function(o){for(;!o.classList.contains("ag-popup")&&o.parentElement;)o=o.parentElement;return o.classList.contains("ag-popup")?o:null},t.prototype.setAlwaysOnTop=function(o,n){var i=this.getWrapper(o);i&&(i.classList.toggle("ag-always-on-top",!!n),n&&this.bringPopupToFront(i))},t.prototype.bringPopupToFront=function(o){var n=this.getPopupParent(),i=Array.prototype.slice.call(n.querySelectorAll(".ag-popup")),s=i.length,a=Array.prototype.slice.call(n.querySelectorAll(".ag-popup.ag-always-on-top")),l=a.length,c=this.getWrapper(o);if(!(!c||s<=1||!n.contains(o))){var u=i.indexOf(c),d=c.querySelectorAll("div"),p=[];if(d.forEach(function(_){_.scrollTop!==0&&p.push([_,_.scrollTop])}),l){var h=c.classList.contains("ag-always-on-top");h?u!==s-1&&Ge(a).insertAdjacentElement("afterend",c):u!==s-l-1&&a[0].insertAdjacentElement("beforebegin",c)}else u!==s-1&&Ge(i).insertAdjacentElement("afterend",c);for(;p.length;){var f=p.pop();f[0].scrollTop=f[1]}var g={type:"popupToFront",api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,eWrapper:c};this.eventService.dispatchEvent(g)}};var e;return t.WAIT_FOR_POPUP_CONTENT_RESIZE=200,vs([y("focusService")],t.prototype,"focusService",void 0),vs([y("ctrlsService")],t.prototype,"ctrlsService",void 0),vs([y("resizeObserverService")],t.prototype,"resizeObserverService",void 0),vs([Q],t.prototype,"postConstruct",null),t=e=vs([ne("popupService")],t),t}(K),Y4=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),q4=function(r){Y4(t,r);function t(){var e=r.call(this,`
        <div class="ag-autocomplete-row" role="presentation">
            <div class="ag-autocomplete-row-label"></div>
        </div>`)||this;return e.hasHighlighting=!1,e}return t.prototype.setState=function(e,o){this.value=e,this.render(),this.updateSelected(o)},t.prototype.updateSelected=function(e){this.addOrRemoveCssClass("ag-autocomplete-row-selected",e)},t.prototype.setSearchString=function(e){var o,n=!1;if(W(e)){var i=(o=this.value)===null||o===void 0?void 0:o.toLocaleLowerCase().indexOf(e.toLocaleLowerCase());if(i>=0){n=!0,this.hasHighlighting=!0;var s=i+e.length,a=ht(this.value.slice(0,i)),l=ht(this.value.slice(i,s)),c=ht(this.value.slice(s));this.getGui().lastElementChild.innerHTML="".concat(a,"<b>").concat(l,"</b>").concat(c)}}!n&&this.hasHighlighting&&(this.hasHighlighting=!1,this.render())},t.prototype.render=function(){var e;this.getGui().lastElementChild.innerHTML=(e=ht(this.value))!==null&&e!==void 0?e:"&nbsp;"},t}(Re),Q4=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),fg=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},X4=function(r){Q4(t,r);function t(e){var o=r.call(this,t.TEMPLATE)||this;return o.params=e,o.searchString="",o}return t.prototype.destroy=function(){r.prototype.destroy.call(this)},t.prototype.init=function(){var e=this;this.autocompleteEntries=this.params.autocompleteEntries,this.virtualList=this.createManagedBean(new ew({cssIdentifier:"autocomplete"})),this.virtualList.setComponentCreator(this.createRowComponent.bind(this)),this.eList.appendChild(this.virtualList.getGui()),this.virtualList.setModel({getRowCount:function(){return e.autocompleteEntries.length},getRow:function(n){return e.autocompleteEntries[n]}});var o=this.virtualList.getGui();this.addManagedListener(o,"click",function(){return e.params.onConfirmed()}),this.addManagedListener(o,"mousemove",this.onMouseMove.bind(this)),this.addManagedListener(o,"mousedown",function(n){return n.preventDefault()}),this.setSelectedValue(0)},t.prototype.onNavigationKeyDown=function(e,o){e.preventDefault();var n=this.autocompleteEntries.indexOf(this.selectedValue),i=o===N.UP?n-1:n+1;this.checkSetSelectedValue(i)},t.prototype.setSearch=function(e){this.searchString=e,W(e)?this.runSearch():(this.autocompleteEntries=this.params.autocompleteEntries,this.virtualList.refresh(),this.checkSetSelectedValue(0)),this.updateSearchInList()},t.prototype.runContainsSearch=function(e,o){var n,i=!1,s=e.toLocaleLowerCase(),a=o.filter(function(l){var c=l.toLocaleLowerCase(),u=c.indexOf(s),d=u===0,p=u>=0;return p&&(!n||!i&&d||i===d&&l.length<n.length)&&(n=l,i=d),p});return!n&&a.length&&(n=a[0]),{topMatch:n,allMatches:a}},t.prototype.runSearch=function(){var e,o,n=this.params.autocompleteEntries,i=n.map(function(d){var p;return(p=d.displayValue)!==null&&p!==void 0?p:d.key}),s,a;if(this.params.useFuzzySearch)s=pa(this.searchString,i,!0).values,a=s.length?s[0]:void 0;else{var l=this.runContainsSearch(this.searchString,i);s=l.allMatches,a=l.topMatch}var c=n.filter(function(d){var p=d.key,h=d.displayValue;return s.includes(h??p)});if(!c.length&&this.selectedValue&&(!((o=(e=this.params)===null||e===void 0?void 0:e.forceLastSelection)===null||o===void 0)&&o.call(e,this.selectedValue,this.searchString))&&(c=[this.selectedValue]),this.autocompleteEntries=c,this.virtualList.refresh(),!!a){var u=s.indexOf(a);this.checkSetSelectedValue(u)}},t.prototype.updateSearchInList=function(){var e=this;this.virtualList.forEachRenderedRow(function(o){return o.setSearchString(e.searchString)})},t.prototype.checkSetSelectedValue=function(e){e>=0&&e<this.autocompleteEntries.length&&this.setSelectedValue(e)},t.prototype.setSelectedValue=function(e){var o=this.autocompleteEntries[e];this.selectedValue!==o&&(this.selectedValue=o,this.virtualList.ensureIndexVisible(e),this.virtualList.forEachRenderedRow(function(n,i){n.updateSelected(e===i)}))},t.prototype.createRowComponent=function(e){var o,n=new q4;return this.getContext().createBean(n),n.setState((o=e.displayValue)!==null&&o!==void 0?o:e.key,e===this.selectedValue),n},t.prototype.onMouseMove=function(e){var o=this.virtualList.getGui().getBoundingClientRect(),n=this.virtualList.getScrollTop(),i=e.clientY-o.top+n,s=Math.floor(i/this.virtualList.getRowHeight());this.checkSetSelectedValue(s)},t.prototype.afterGuiAttached=function(){this.virtualList.refresh()},t.prototype.getSelectedValue=function(){var e;return this.autocompleteEntries.length&&(e=this.selectedValue)!==null&&e!==void 0?e:null},t.TEMPLATE=`<div class="ag-autocomplete-list-popup">
            <div ref="eList" class="ag-autocomplete-list"></div>
        <div>`,fg([ee("eList")],t.prototype,"eList",void 0),fg([Q],t.prototype,"init",null),t}(Zi),Z4=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),Tu=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},J4=function(r){Z4(t,r);function t(){var e=r.call(this,`
            <div class="ag-autocomplete" role="presentation">
                <ag-input-text-field ref="eAutocompleteInput"></ag-input-text-field>
            </div>`)||this;return e.isListOpen=!1,e.lastPosition=0,e.valid=!0,e}return t.prototype.postConstruct=function(){var e=this;this.eAutocompleteInput.onValueChange(function(o){return e.onValueChanged(o)}),this.eAutocompleteInput.getInputElement().setAttribute("autocomplete","off"),this.addGuiEventListener("keydown",this.onKeyDown.bind(this)),this.addGuiEventListener("click",this.updatePositionAndList.bind(this)),this.addDestroyFunc(function(){e.destroyBean(e.autocompleteList)}),this.addGuiEventListener("focusout",function(){return e.onFocusOut()})},t.prototype.onValueChanged=function(e){var o=un(e);this.updateValue(o),this.updateAutocompleteList(o)},t.prototype.updateValue=function(e){this.updateLastPosition(),this.dispatchEvent({type:t.EVENT_VALUE_CHANGED,value:e}),this.validate(e)},t.prototype.updateAutocompleteList=function(e){var o,n,i,s,a=(n=(o=this.listGenerator)===null||o===void 0?void 0:o.call(this,e,this.lastPosition))!==null&&n!==void 0?n:{enabled:!1};if((!a.type||a.type!==((i=this.autocompleteListParams)===null||i===void 0?void 0:i.type))&&this.isListOpen&&this.closeList(),this.autocompleteListParams=a,!((s=this.autocompleteListParams)===null||s===void 0)&&s.enabled){this.isListOpen||this.openList();var l=this.autocompleteListParams.searchString;this.autocompleteList.setSearch(l??"")}else this.isListOpen&&this.closeList()},t.prototype.onKeyDown=function(e){var o=this,n=e.key;switch(this.updateLastPosition(),n){case N.ENTER:this.onEnterKeyDown(e);break;case N.TAB:this.onTabKeyDown(e);break;case N.DOWN:case N.UP:this.onUpDownKeyDown(e,n);break;case N.LEFT:case N.RIGHT:case N.PAGE_HOME:case N.PAGE_END:setTimeout(function(){o.updatePositionAndList()});break;case N.ESCAPE:this.onEscapeKeyDown(e);break;case N.SPACE:e.ctrlKey&&!this.isListOpen&&(e.preventDefault(),this.forceOpenList());break}},t.prototype.confirmSelection=function(){var e,o=(e=this.autocompleteList)===null||e===void 0?void 0:e.getSelectedValue();o&&(this.closeList(),this.dispatchEvent({type:t.EVENT_OPTION_SELECTED,value:this.getValue(),position:this.lastPosition,updateEntry:o,autocompleteType:this.autocompleteListParams.type}))},t.prototype.onTabKeyDown=function(e){this.isListOpen&&(e.preventDefault(),e.stopPropagation(),this.confirmSelection())},t.prototype.onEnterKeyDown=function(e){e.preventDefault(),this.isListOpen?this.confirmSelection():this.onCompleted()},t.prototype.onUpDownKeyDown=function(e,o){var n;e.preventDefault(),this.isListOpen?(n=this.autocompleteList)===null||n===void 0||n.onNavigationKeyDown(e,o):this.forceOpenList()},t.prototype.onEscapeKeyDown=function(e){this.isListOpen&&(e.preventDefault(),e.stopPropagation(),this.closeList(),this.setCaret(this.lastPosition,!0))},t.prototype.onFocusOut=function(){this.isListOpen&&this.closeList()},t.prototype.updatePositionAndList=function(){var e;this.updateLastPosition(),this.updateAutocompleteList((e=this.eAutocompleteInput.getValue())!==null&&e!==void 0?e:null)},t.prototype.setCaret=function(e,o){var n=this.gridOptionsService.getDocument();o&&n.activeElement===n.body&&this.eAutocompleteInput.getFocusableElement().focus();var i=this.eAutocompleteInput.getInputElement();i.setSelectionRange(e,e),e===i.value.length&&(i.scrollLeft=i.scrollWidth)},t.prototype.forceOpenList=function(){this.onValueChanged(this.eAutocompleteInput.getValue())},t.prototype.updateLastPosition=function(){var e;this.lastPosition=(e=this.eAutocompleteInput.getInputElement().selectionStart)!==null&&e!==void 0?e:0},t.prototype.validate=function(e){var o;this.validator&&(this.validationMessage=this.validator(e),this.eAutocompleteInput.getInputElement().setCustomValidity((o=this.validationMessage)!==null&&o!==void 0?o:""),this.valid=!this.validationMessage,this.dispatchEvent({type:t.EVENT_VALID_CHANGED,isValid:this.valid,validationMessage:this.validationMessage}))},t.prototype.openList=function(){var e=this;this.isListOpen=!0,this.autocompleteList=this.createBean(new X4({autocompleteEntries:this.autocompleteListParams.entries,onConfirmed:function(){return e.confirmSelection()},forceLastSelection:this.forceLastSelection}));var o=this.autocompleteList.getGui(),n={ePopup:o,type:"autocomplete",eventSource:this.getGui(),position:"under",alignSide:this.gridOptionsService.get("enableRtl")?"right":"left",keepWithinBounds:!0},i=this.popupService.addPopup({eChild:o,anchorToElement:this.getGui(),positionCallback:function(){return e.popupService.positionPopupByComponent(n)},ariaLabel:this.listAriaLabel});this.hidePopup=i.hideFunc,this.autocompleteList.afterGuiAttached()},t.prototype.closeList=function(){this.isListOpen=!1,this.hidePopup(),this.destroyBean(this.autocompleteList),this.autocompleteList=null},t.prototype.onCompleted=function(){this.isListOpen&&this.closeList(),this.dispatchEvent({type:t.EVENT_VALUE_CONFIRMED,value:this.getValue(),isValid:this.isValid()})},t.prototype.getValue=function(){return un(this.eAutocompleteInput.getValue())},t.prototype.setInputPlaceholder=function(e){return this.eAutocompleteInput.setInputPlaceholder(e),this},t.prototype.setInputAriaLabel=function(e){return this.eAutocompleteInput.setInputAriaLabel(e),this},t.prototype.setListAriaLabel=function(e){return this.listAriaLabel=e,this},t.prototype.setListGenerator=function(e){return this.listGenerator=e,this},t.prototype.setValidator=function(e){return this.validator=e,this},t.prototype.isValid=function(){return this.valid},t.prototype.setValue=function(e){var o=e.value,n=e.position,i=e.silent,s=e.updateListOnlyIfOpen,a=e.restoreFocus;this.eAutocompleteInput.setValue(o,!0),this.setCaret(n??this.lastPosition,a),i||this.updateValue(o),(!s||this.isListOpen)&&this.updateAutocompleteList(o)},t.prototype.setForceLastSelection=function(e){return this.forceLastSelection=e,this},t.prototype.setInputDisabled=function(e){return this.eAutocompleteInput.setDisabled(e),this},t.EVENT_VALUE_CHANGED="eventValueChanged",t.EVENT_VALUE_CONFIRMED="eventValueConfirmed",t.EVENT_OPTION_SELECTED="eventOptionSelected",t.EVENT_VALID_CHANGED="eventValidChanged",Tu([y("popupService")],t.prototype,"popupService",void 0),Tu([ee("eAutocompleteInput")],t.prototype,"eAutocompleteInput",void 0),Tu([Q],t.prototype,"postConstruct",null),t}(Re),ek=["mouseover","mouseout","mouseenter","mouseleave","mousemove"],tk=["touchstart","touchend","touchmove","touchcancel"],ow=function(){function r(t){t===void 0&&(t="javascript"),this.frameworkName=t,this.renderingEngine="vanilla",this.isOutsideAngular=function(e){return To(ek,e)}}return r.prototype.setTimeout=function(t,e){window.setTimeout(t,e)},r.prototype.setInterval=function(t,e){return new on(function(o){o(window.setInterval(t,e))})},r.prototype.addEventListener=function(t,e,o,n){var i=To(tk,e);t.addEventListener(e,o,{capture:!!n,passive:i})},r.prototype.dispatchEvent=function(t,e,o){e()},r.prototype.frameworkComponent=function(t){return null},r.prototype.isFrameworkComponent=function(t){return!1},r.prototype.getDocLink=function(t){var e=this.frameworkName==="solid"?"react":this.frameworkName;return"https://www.ag-grid.com/".concat(e,"-data-grid").concat(t?"/".concat(t):"")},r}(),ok=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),ir=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},nk=function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var o=e.call(r),n,i=[],s;try{for(;(t===void 0||t-- >0)&&!(n=o.next()).done;)i.push(n.value)}catch(a){s={error:a}}finally{try{n&&!n.done&&(e=o.return)&&e.call(o)}finally{if(s)throw s.error}}return i},ik=function(r,t,e){if(e||arguments.length===2)for(var o=0,n=t.length,i;o<n;o++)(i||!(o in t))&&(i||(i=Array.prototype.slice.call(t,0,o)),i[o]=t[o]);return r.concat(i||Array.prototype.slice.call(t))},rk=function(r){ok(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getNextCellToFocus=function(e,o,n){return n===void 0&&(n=!1),n?this.getNextCellToFocusWithCtrlPressed(e,o):this.getNextCellToFocusWithoutCtrlPressed(e,o)},t.prototype.getNextCellToFocusWithCtrlPressed=function(e,o){var n=e===N.UP,i=e===N.DOWN,s=e===N.LEFT,a,l;if(n||i)l=n?this.paginationProxy.getPageFirstRow():this.paginationProxy.getPageLastRow(),a=o.column;else{var c=this.columnModel.getAllDisplayedColumns(),u=this.gridOptionsService.get("enableRtl");l=o.rowIndex,a=s!==u?c[0]:Ge(c)}return{rowIndex:l,rowPinned:null,column:a}},t.prototype.getNextCellToFocusWithoutCtrlPressed=function(e,o){for(var n=o,i=!1;!i;){switch(e){case N.UP:n=this.getCellAbove(n);break;case N.DOWN:n=this.getCellBelow(n);break;case N.RIGHT:this.gridOptionsService.get("enableRtl")?n=this.getCellToLeft(n):n=this.getCellToRight(n);break;case N.LEFT:this.gridOptionsService.get("enableRtl")?n=this.getCellToRight(n):n=this.getCellToLeft(n);break;default:n=null,console.warn("AG Grid: unknown key for navigation "+e);break}n?i=this.isCellGoodToFocusOn(n):i=!0}return n},t.prototype.isCellGoodToFocusOn=function(e){var o=e.column,n;switch(e.rowPinned){case"top":n=this.pinnedRowModel.getPinnedTopRow(e.rowIndex);break;case"bottom":n=this.pinnedRowModel.getPinnedBottomRow(e.rowIndex);break;default:n=this.rowModel.getRow(e.rowIndex);break}if(!n)return!1;var i=o.isSuppressNavigable(n);return!i},t.prototype.getCellToLeft=function(e){if(!e)return null;var o=this.columnModel.getDisplayedColBefore(e.column);return o?{rowIndex:e.rowIndex,column:o,rowPinned:e.rowPinned}:null},t.prototype.getCellToRight=function(e){if(!e)return null;var o=this.columnModel.getDisplayedColAfter(e.column);return o?{rowIndex:e.rowIndex,column:o,rowPinned:e.rowPinned}:null},t.prototype.getRowBelow=function(e){var o=e.rowIndex,n=e.rowPinned;if(this.isLastRowInContainer(e))switch(n){case"bottom":return null;case"top":return this.rowModel.isRowsToRender()?{rowIndex:this.paginationProxy.getPageFirstRow(),rowPinned:null}:this.pinnedRowModel.isRowsToRender("bottom")?{rowIndex:0,rowPinned:"bottom"}:null;default:return this.pinnedRowModel.isRowsToRender("bottom")?{rowIndex:0,rowPinned:"bottom"}:null}var i=this.rowModel.getRow(e.rowIndex),s=this.getNextStickyPosition(i);return s||{rowIndex:o+1,rowPinned:n}},t.prototype.getNextStickyPosition=function(e,o){if(!(!this.gridOptionsService.isGroupRowsSticky()||!e||!e.sticky)){var n=ik([],nk(this.rowRenderer.getStickyTopRowCtrls()),!1).sort(function(l,c){return l.getRowNode().rowIndex-c.getRowNode().rowIndex}),i=o?-1:1,s=n.findIndex(function(l){return l.getRowNode().rowIndex===e.rowIndex}),a=n[s+i];if(a)return{rowIndex:a.getRowNode().rowIndex,rowPinned:null}}},t.prototype.getCellBelow=function(e){if(!e)return null;var o=this.getRowBelow(e);return o?{rowIndex:o.rowIndex,column:e.column,rowPinned:o.rowPinned}:null},t.prototype.isLastRowInContainer=function(e){var o=e.rowPinned,n=e.rowIndex;if(o==="top"){var i=this.pinnedRowModel.getPinnedTopRowData().length-1;return i<=n}if(o==="bottom"){var s=this.pinnedRowModel.getPinnedBottomRowData().length-1;return s<=n}var a=this.paginationProxy.getPageLastRow();return a<=n},t.prototype.getRowAbove=function(e){var o=e.rowIndex,n=e.rowPinned,i=n?o===0:o===this.paginationProxy.getPageFirstRow();if(i)return n==="top"?null:n?this.rowModel.isRowsToRender()?this.getLastBodyCell():this.pinnedRowModel.isRowsToRender("top")?this.getLastFloatingTopRow():null:this.pinnedRowModel.isRowsToRender("top")?this.getLastFloatingTopRow():null;var s=this.rowModel.getRow(e.rowIndex),a=this.getNextStickyPosition(s,!0);return a||{rowIndex:o-1,rowPinned:n}},t.prototype.getCellAbove=function(e){if(!e)return null;var o=this.getRowAbove({rowIndex:e.rowIndex,rowPinned:e.rowPinned});return o?{rowIndex:o.rowIndex,column:e.column,rowPinned:o.rowPinned}:null},t.prototype.getLastBodyCell=function(){var e=this.paginationProxy.getPageLastRow();return{rowIndex:e,rowPinned:null}},t.prototype.getLastFloatingTopRow=function(){var e=this.pinnedRowModel.getPinnedTopRowData().length-1;return{rowIndex:e,rowPinned:"top"}},t.prototype.getNextTabbedCell=function(e,o){return o?this.getNextTabbedCellBackwards(e):this.getNextTabbedCellForwards(e)},t.prototype.getNextTabbedCellForwards=function(e){var o=this.columnModel.getAllDisplayedColumns(),n=e.rowIndex,i=e.rowPinned,s=this.columnModel.getDisplayedColAfter(e.column);if(!s){s=o[0];var a=this.getRowBelow(e);if(pe(a)||!a.rowPinned&&!this.paginationProxy.isRowInPage(a))return null;n=a?a.rowIndex:null,i=a?a.rowPinned:null}return{rowIndex:n,column:s,rowPinned:i}},t.prototype.getNextTabbedCellBackwards=function(e){var o=this.columnModel.getAllDisplayedColumns(),n=e.rowIndex,i=e.rowPinned,s=this.columnModel.getDisplayedColBefore(e.column);if(!s){s=Ge(o);var a=this.getRowAbove({rowIndex:e.rowIndex,rowPinned:e.rowPinned});if(pe(a)||!a.rowPinned&&!this.paginationProxy.isRowInPage(a))return null;n=a?a.rowIndex:null,i=a?a.rowPinned:null}return{rowIndex:n,column:s,rowPinned:i}},ir([y("columnModel")],t.prototype,"columnModel",void 0),ir([y("rowModel")],t.prototype,"rowModel",void 0),ir([y("rowRenderer")],t.prototype,"rowRenderer",void 0),ir([y("pinnedRowModel")],t.prototype,"pinnedRowModel",void 0),ir([y("paginationProxy")],t.prototype,"paginationProxy",void 0),t=ir([ne("cellNavigationService")],t),t}(K),sk=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),ms=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},ak=function(r,t){return function(e,o){t(e,o,r)}},lk=function(r){sk(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.consuming=!1,e}return t.prototype.setBeans=function(e){this.logger=e.create("AlignedGridsService")},t.prototype.getAlignedGridApis=function(){var e=this,o,n=(o=this.gridOptionsService.get("alignedGrids"))!==null&&o!==void 0?o:[],i=typeof n=="function";typeof n=="function"&&(n=n());var s=function(){return"See ".concat(e.getFrameworkOverrides().getDocLink("aligned-grids"))},a=n.map(function(l){var c;if(!l){sn("alignedGrids contains an undefined option."),i||sn(`You may want to configure via a callback to avoid setup race conditions:
                     "alignedGrids: () => [linkedGrid]"`),sn(s());return}if(l instanceof YC)return l;var u=l;return"current"in u?(c=u.current)===null||c===void 0?void 0:c.api:(u.api||sn("alignedGrids - No api found on the linked grid. If you are passing gridOptions to alignedGrids since v31 this is no longer valid. ".concat(s())),u.api)}).filter(function(l){return!!l&&!l.isDestroyed()});return a},t.prototype.init=function(){this.addManagedListener(this.eventService,w.EVENT_COLUMN_MOVED,this.fireColumnEvent.bind(this)),this.addManagedListener(this.eventService,w.EVENT_COLUMN_VISIBLE,this.fireColumnEvent.bind(this)),this.addManagedListener(this.eventService,w.EVENT_COLUMN_PINNED,this.fireColumnEvent.bind(this)),this.addManagedListener(this.eventService,w.EVENT_COLUMN_GROUP_OPENED,this.fireColumnEvent.bind(this)),this.addManagedListener(this.eventService,w.EVENT_COLUMN_RESIZED,this.fireColumnEvent.bind(this)),this.addManagedListener(this.eventService,w.EVENT_BODY_SCROLL,this.fireScrollEvent.bind(this))},t.prototype.fireEvent=function(e){this.consuming||this.getAlignedGridApis().forEach(function(o){var n=o.__getAlignedGridService();e(n)})},t.prototype.onEvent=function(e){this.consuming=!0,e(),this.consuming=!1},t.prototype.fireColumnEvent=function(e){this.fireEvent(function(o){o.onColumnEvent(e)})},t.prototype.fireScrollEvent=function(e){e.direction==="horizontal"&&this.fireEvent(function(o){o.onScrollEvent(e)})},t.prototype.onScrollEvent=function(e){var o=this;this.onEvent(function(){var n=o.ctrlsService.getGridBodyCtrl();n.getScrollFeature().setHorizontalScrollPosition(e.left,!0)})},t.prototype.getMasterColumns=function(e){var o=[];return e.columns?e.columns.forEach(function(n){o.push(n)}):e.column&&o.push(e.column),o},t.prototype.getColumnIds=function(e){var o=[];return e.columns?e.columns.forEach(function(n){o.push(n.getColId())}):e.column&&o.push(e.column.getColId()),o},t.prototype.onColumnEvent=function(e){var o=this;this.onEvent(function(){switch(e.type){case w.EVENT_COLUMN_MOVED:case w.EVENT_COLUMN_VISIBLE:case w.EVENT_COLUMN_PINNED:case w.EVENT_COLUMN_RESIZED:var n=e;o.processColumnEvent(n);break;case w.EVENT_COLUMN_GROUP_OPENED:var i=e;o.processGroupOpenedEvent(i);break;case w.EVENT_COLUMN_PIVOT_CHANGED:console.warn("AG Grid: pivoting is not supported with aligned grids. You can only use one of these features at a time in a grid.");break}})},t.prototype.processGroupOpenedEvent=function(e){var o=this;e.columnGroups.forEach(function(n){var i=null;if(n){var s=n.getGroupId();i=o.columnModel.getProvidedColumnGroup(s)}n&&!i||(o.logger.log("onColumnEvent-> processing "+e+" expanded = "+n.isExpanded()),o.columnModel.setColumnGroupOpened(i,n.isExpanded(),"alignedGridChanged"))})},t.prototype.processColumnEvent=function(e){var o=this,n,i=e.column,s=null;if(i&&(s=this.columnModel.getPrimaryColumn(i.getColId())),!(i&&!s)){var a=this.getMasterColumns(e);switch(e.type){case w.EVENT_COLUMN_MOVED:{var l=e,c=e.api.getColumnState(),u=c.map(function(C){return{colId:C.colId}});this.columnModel.applyColumnState({state:u,applyOrder:!0},"alignedGridChanged"),this.logger.log("onColumnEvent-> processing ".concat(e.type," toIndex = ").concat(l.toIndex))}break;case w.EVENT_COLUMN_VISIBLE:{var d=e,c=e.api.getColumnState(),u=c.map(function(T){return{colId:T.colId,hide:T.hide}});this.columnModel.applyColumnState({state:u},"alignedGridChanged"),this.logger.log("onColumnEvent-> processing ".concat(e.type," visible = ").concat(d.visible))}break;case w.EVENT_COLUMN_PINNED:{var p=e,c=e.api.getColumnState(),u=c.map(function(T){return{colId:T.colId,pinned:T.pinned}});this.columnModel.applyColumnState({state:u},"alignedGridChanged"),this.logger.log("onColumnEvent-> processing ".concat(e.type," pinned = ").concat(p.pinned))}break;case w.EVENT_COLUMN_RESIZED:var h=e,f={};a.forEach(function(C){o.logger.log("onColumnEvent-> processing ".concat(e.type," actualWidth = ").concat(C.getActualWidth())),f[C.getId()]={key:C.getColId(),newWidth:C.getActualWidth()}}),(n=h.flexColumns)===null||n===void 0||n.forEach(function(C){f[C.getId()]&&delete f[C.getId()]}),this.columnModel.setColumnWidths(Object.values(f),!1,h.finished,"alignedGridChanged");break}var g=this.ctrlsService.getGridBodyCtrl(),_=g.isVerticalScrollShowing();this.getAlignedGridApis().forEach(function(C){C.setGridOption("alwaysShowVerticalScroll",_)})}},ms([y("columnModel")],t.prototype,"columnModel",void 0),ms([y("ctrlsService")],t.prototype,"ctrlsService",void 0),ms([ak(0,eo("loggerFactory"))],t.prototype,"setBeans",null),ms([Q],t.prototype,"init",null),t=ms([ne("alignedGridsService")],t),t}(K),ck=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),ys=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},uk=function(r,t){return function(e,o){t(e,o,r)}},nw=function(r){ck(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.selectedNodes=new Map,e}return t.prototype.setBeans=function(e){this.logger=e.create("selectionService"),this.resetNodes()},t.prototype.init=function(){var e=this;this.rowSelection=this.gridOptionsService.get("rowSelection"),this.groupSelectsChildren=this.gridOptionsService.get("groupSelectsChildren"),this.addManagedPropertyListeners(["groupSelectsChildren","rowSelection"],function(){e.groupSelectsChildren=e.gridOptionsService.get("groupSelectsChildren"),e.rowSelection=e.gridOptionsService.get("rowSelection"),e.deselectAllRowNodes({source:"api"})}),this.addManagedListener(this.eventService,w.EVENT_ROW_SELECTED,this.onRowSelected.bind(this))},t.prototype.isMultiselect=function(){return this.rowSelection==="multiple"},t.prototype.setNodesSelected=function(e){var o;if(e.nodes.length===0)return 0;var n=e.newValue,i=e.clearSelection,s=e.suppressFinishActions,a=e.rangeSelect;e.event;var l=e.source,c=l===void 0?"api":l;if(e.nodes.length>1&&!this.isMultiselect())return console.warn("AG Grid: cannot multi select while rowSelection='single'"),0;var u=this.groupSelectsChildren&&e.groupSelectsFiltered===!0,d=e.nodes.map(function(A){return A.footer?A.sibling:A});if(a){if(e.nodes.length>1)return console.warn("AG Grid: cannot range select while selecting multiple rows"),0;var p=this.getLastSelectedNode();if(p){var h=d[0],f=p!==h;if(f&&this.isMultiselect())return this.selectRange(h,p,e.newValue,c)}}for(var g=0,_=0;_<d.length;_++){var h=d[_],C=u&&h.group;if(!C){var E=h.selectThisNode(n,e.event,c);E&&g++}this.groupSelectsChildren&&(!((o=h.childrenAfterGroup)===null||o===void 0)&&o.length)&&(g+=this.selectChildren(h,n,u,c))}if(!s){var T=n&&(i||!this.isMultiselect());if(T&&(g+=this.clearOtherNodes(d[0],c)),g>0){this.updateGroupsFromChildrenSelections(c);var P={type:w.EVENT_SELECTION_CHANGED,source:c};this.eventService.dispatchEvent(P)}}return g},t.prototype.selectRange=function(e,o,n,i){var s=this;n===void 0&&(n=!0);var a=this.rowModel.getNodesInRangeForSelection(e,o),l=0;a.forEach(function(u){if(!(u.group&&s.groupSelectsChildren||n===!1&&e===u)){var d=u.selectThisNode(n,void 0,i);d&&l++}}),this.updateGroupsFromChildrenSelections(i);var c={type:w.EVENT_SELECTION_CHANGED,source:i};return this.eventService.dispatchEvent(c),l},t.prototype.selectChildren=function(e,o,n,i){var s=n?e.childrenAfterAggFilter:e.childrenAfterGroup;return pe(s)?0:this.setNodesSelected({newValue:o,clearSelection:!1,suppressFinishActions:!0,groupSelectsFiltered:n,source:i,nodes:s})},t.prototype.getLastSelectedNode=function(){var e=Array.from(this.selectedNodes.keys());if(e.length==0)return null;var o=this.selectedNodes.get(Ge(e));return o||null},t.prototype.getSelectedNodes=function(){var e=[];return this.selectedNodes.forEach(function(o){o&&e.push(o)}),e},t.prototype.getSelectedRows=function(){var e=[];return this.selectedNodes.forEach(function(o){o&&o.data&&e.push(o.data)}),e},t.prototype.getSelectionCount=function(){return this.selectedNodes.size},t.prototype.filterFromSelection=function(e){var o=new Map;this.selectedNodes.forEach(function(n,i){var s=n&&e(n);s&&o.set(i,n)}),this.selectedNodes=o},t.prototype.updateGroupsFromChildrenSelections=function(e,o){if(!this.groupSelectsChildren||this.rowModel.getType()!=="clientSide")return!1;var n=this.rowModel,i=n.getRootNode();o||(o=new Sc(!0,i),o.setInactive());var s=!1;return o.forEachChangedNodeDepthFirst(function(a){if(a!==i){var l=a.calculateSelectedFromChildren();s=a.selectThisNode(l===null?!1:l,void 0,e)||s}}),s},t.prototype.clearOtherNodes=function(e,o){var n=this,i=new Map,s=0;return this.selectedNodes.forEach(function(a){if(a&&a.id!==e.id){var l=n.selectedNodes.get(a.id);s+=l.setSelectedParams({newValue:!1,clearSelection:!1,suppressFinishActions:!0,source:o}),n.groupSelectsChildren&&a.parent&&i.set(a.parent.id,a.parent)}}),i.forEach(function(a){var l=a.calculateSelectedFromChildren();a.selectThisNode(l===null?!1:l,void 0,o)}),s},t.prototype.onRowSelected=function(e){var o=e.node;this.groupSelectsChildren&&o.group||(o.isSelected()?this.selectedNodes.set(o.id,o):this.selectedNodes.delete(o.id))},t.prototype.syncInRowNode=function(e,o){this.syncInOldRowNode(e,o),this.syncInNewRowNode(e)},t.prototype.syncInOldRowNode=function(e,o){var n=W(o)&&e.id!==o.id;if(n&&o){var i=o.id,s=this.selectedNodes.get(i)==e;s&&this.selectedNodes.set(o.id,o)}},t.prototype.syncInNewRowNode=function(e){this.selectedNodes.has(e.id)?(e.setSelectedInitialValue(!0),this.selectedNodes.set(e.id,e)):e.setSelectedInitialValue(!1)},t.prototype.reset=function(e){var o=this.getSelectionCount();if(this.resetNodes(),o){var n={type:w.EVENT_SELECTION_CHANGED,source:e};this.eventService.dispatchEvent(n)}},t.prototype.resetNodes=function(){var e;this.logger.log("reset"),(e=this.selectedNodes)===null||e===void 0||e.clear()},t.prototype.getBestCostNodeSelection=function(){if(this.rowModel.getType()!=="clientSide")return;var e=this.rowModel,o=e.getTopLevelNodes();if(o===null)return;var n=[];function i(s){for(var a=0,l=s.length;a<l;a++){var c=s[a];if(c.isSelected())n.push(c);else{var u=c;u.group&&u.children&&i(u.children)}}}return i(o),n},t.prototype.isEmpty=function(){var e=0;return this.selectedNodes.forEach(function(o){o&&e++}),e===0},t.prototype.deselectAllRowNodes=function(e){var o=function(c){return c.selectThisNode(!1,void 0,i)},n=this.rowModel.getType()==="clientSide",i=e.source,s=e.justFiltered,a=e.justCurrentPage;if(a||s){if(!n){console.error("AG Grid: selecting just filtered only works when gridOptions.rowModelType='clientSide'");return}this.getNodesToSelect(s,a).forEach(o)}else this.selectedNodes.forEach(function(c){c&&o(c)}),this.reset(i);n&&this.groupSelectsChildren&&this.updateGroupsFromChildrenSelections(i);var l={type:w.EVENT_SELECTION_CHANGED,source:i};this.eventService.dispatchEvent(l)},t.prototype.getSelectedCounts=function(e,o){var n=this,i=0,s=0,a=function(l){n.groupSelectsChildren&&l.group||(l.isSelected()?i++:l.selectable&&s++)};return this.getNodesToSelect(e,o).forEach(a),{selectedCount:i,notSelectedCount:s}},t.prototype.getSelectAllState=function(e,o){var n=this.getSelectedCounts(e,o),i=n.selectedCount,s=n.notSelectedCount;return i===0&&s===0?!1:i>0&&s>0?null:i>0},t.prototype.getNodesToSelect=function(e,o){var n=this;if(e===void 0&&(e=!1),o===void 0&&(o=!1),this.rowModel.getType()!=="clientSide")throw new Error("selectAll only available when rowModelType='clientSide', ie not ".concat(this.rowModel.getType()));var i=[];if(o)return this.paginationProxy.forEachNodeOnPage(function(a){if(!a.group){i.push(a);return}if(!a.expanded){var l=function(c){var u;i.push(c),!((u=c.childrenAfterFilter)===null||u===void 0)&&u.length&&c.childrenAfterFilter.forEach(l)};l(a);return}n.groupSelectsChildren||i.push(a)}),i;var s=this.rowModel;return e?(s.forEachNodeAfterFilter(function(a){i.push(a)}),i):(s.forEachNode(function(a){i.push(a)}),i)},t.prototype.selectAllRowNodes=function(e){if(this.rowModel.getType()!=="clientSide")throw new Error("selectAll only available when rowModelType='clientSide', ie not ".concat(this.rowModel.getType()));var o=e.source,n=e.justFiltered,i=e.justCurrentPage,s=function(l){return l.selectThisNode(!0,void 0,o)};this.getNodesToSelect(n,i).forEach(s),this.rowModel.getType()==="clientSide"&&this.groupSelectsChildren&&this.updateGroupsFromChildrenSelections(o);var a={type:w.EVENT_SELECTION_CHANGED,source:o};this.eventService.dispatchEvent(a)},t.prototype.getSelectionState=function(){var e=[];return this.selectedNodes.forEach(function(o){o!=null&&o.id&&e.push(o.id)}),e.length?e:null},t.prototype.setSelectionState=function(e,o){if(Array.isArray(e)){var n=new Set(e),i=[];this.rowModel.forEachNode(function(s){n.has(s.id)&&i.push(s)}),this.setNodesSelected({newValue:!0,nodes:i,source:o})}},ys([y("rowModel")],t.prototype,"rowModel",void 0),ys([y("paginationProxy")],t.prototype,"paginationProxy",void 0),ys([uk(0,eo("loggerFactory"))],t.prototype,"setBeans",null),ys([Q],t.prototype,"init",null),t=ys([ne("selectionService")],t),t}(K),gg=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},dk=function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var o=e.call(r),n,i=[],s;try{for(;(t===void 0||t-- >0)&&!(n=o.next()).done;)i.push(n.value)}catch(a){s={error:a}}finally{try{n&&!n.done&&(e=o.return)&&e.call(o)}finally{if(s)throw s.error}}return i},pk=function(r,t,e){if(e||arguments.length===2)for(var o=0,n=t.length,i;o<n;o++)(i||!(o in t))&&(i||(i=Array.prototype.slice.call(t,0,o)),i[o]=t[o]);return r.concat(i||Array.prototype.slice.call(t))},iw=function(){function r(t){var e=this;this.viaApi=function(o){for(var n,i=[],s=1;s<arguments.length;s++)i[s-1]=arguments[s];return Ee("Since v31, 'columnApi.".concat(o,"' is deprecated and moved to 'api.").concat(o,"'.")),(n=e.api)[o].apply(n,pk([],dk(i),!1))},this.api=t}return r.prototype.sizeColumnsToFit=function(t){this.viaApi("sizeColumnsToFit",t)},r.prototype.setColumnGroupOpened=function(t,e){this.viaApi("setColumnGroupOpened",t,e)},r.prototype.getColumnGroup=function(t,e){return this.viaApi("getColumnGroup",t,e)},r.prototype.getProvidedColumnGroup=function(t){return this.viaApi("getProvidedColumnGroup",t)},r.prototype.getDisplayNameForColumn=function(t,e){return this.viaApi("getDisplayNameForColumn",t,e)},r.prototype.getDisplayNameForColumnGroup=function(t,e){return this.viaApi("getDisplayNameForColumnGroup",t,e)},r.prototype.getColumn=function(t){return this.viaApi("getColumn",t)},r.prototype.getColumns=function(){return this.viaApi("getColumns")},r.prototype.applyColumnState=function(t){return this.viaApi("applyColumnState",t)},r.prototype.getColumnState=function(){return this.viaApi("getColumnState")},r.prototype.resetColumnState=function(){this.viaApi("resetColumnState")},r.prototype.getColumnGroupState=function(){return this.viaApi("getColumnGroupState")},r.prototype.setColumnGroupState=function(t){this.viaApi("setColumnGroupState",t)},r.prototype.resetColumnGroupState=function(){this.viaApi("resetColumnGroupState")},r.prototype.isPinning=function(){return this.viaApi("isPinning")},r.prototype.isPinningLeft=function(){return this.viaApi("isPinningLeft")},r.prototype.isPinningRight=function(){return this.viaApi("isPinningRight")},r.prototype.getDisplayedColAfter=function(t){return this.viaApi("getDisplayedColAfter",t)},r.prototype.getDisplayedColBefore=function(t){return this.viaApi("getDisplayedColBefore",t)},r.prototype.setColumnVisible=function(t,e){this.viaApi("setColumnVisible",t,e)},r.prototype.setColumnsVisible=function(t,e){this.viaApi("setColumnsVisible",t,e)},r.prototype.setColumnPinned=function(t,e){this.viaApi("setColumnPinned",t,e)},r.prototype.setColumnsPinned=function(t,e){this.viaApi("setColumnsPinned",t,e)},r.prototype.getAllGridColumns=function(){return this.viaApi("getAllGridColumns")},r.prototype.getDisplayedLeftColumns=function(){return this.viaApi("getDisplayedLeftColumns")},r.prototype.getDisplayedCenterColumns=function(){return this.viaApi("getDisplayedCenterColumns")},r.prototype.getDisplayedRightColumns=function(){return this.viaApi("getDisplayedRightColumns")},r.prototype.getAllDisplayedColumns=function(){return this.viaApi("getAllDisplayedColumns")},r.prototype.getAllDisplayedVirtualColumns=function(){return this.viaApi("getAllDisplayedVirtualColumns")},r.prototype.moveColumn=function(t,e){this.viaApi("moveColumn",t,e)},r.prototype.moveColumnByIndex=function(t,e){this.viaApi("moveColumnByIndex",t,e)},r.prototype.moveColumns=function(t,e){this.viaApi("moveColumns",t,e)},r.prototype.moveRowGroupColumn=function(t,e){this.viaApi("moveRowGroupColumn",t,e)},r.prototype.setColumnAggFunc=function(t,e){this.viaApi("setColumnAggFunc",t,e)},r.prototype.setColumnWidth=function(t,e,o,n){o===void 0&&(o=!0),this.viaApi("setColumnWidth",t,e,o,n)},r.prototype.setColumnWidths=function(t,e,o){e===void 0&&(e=!0),this.viaApi("setColumnWidths",t,e,o)},r.prototype.setPivotMode=function(t){this.viaApi("setPivotMode",t)},r.prototype.isPivotMode=function(){return this.viaApi("isPivotMode")},r.prototype.getPivotResultColumn=function(t,e){return this.viaApi("getPivotResultColumn",t,e)},r.prototype.setValueColumns=function(t){this.viaApi("setValueColumns",t)},r.prototype.getValueColumns=function(){return this.viaApi("getValueColumns")},r.prototype.removeValueColumn=function(t){this.viaApi("removeValueColumn",t)},r.prototype.removeValueColumns=function(t){this.viaApi("removeValueColumns",t)},r.prototype.addValueColumn=function(t){this.viaApi("addValueColumn",t)},r.prototype.addValueColumns=function(t){this.viaApi("addValueColumns",t)},r.prototype.setRowGroupColumns=function(t){this.viaApi("setRowGroupColumns",t)},r.prototype.removeRowGroupColumn=function(t){this.viaApi("removeRowGroupColumn",t)},r.prototype.removeRowGroupColumns=function(t){this.viaApi("removeRowGroupColumns",t)},r.prototype.addRowGroupColumn=function(t){this.viaApi("addRowGroupColumn",t)},r.prototype.addRowGroupColumns=function(t){this.viaApi("addRowGroupColumns",t)},r.prototype.getRowGroupColumns=function(){return this.viaApi("getRowGroupColumns")},r.prototype.setPivotColumns=function(t){this.viaApi("setPivotColumns",t)},r.prototype.removePivotColumn=function(t){this.viaApi("removePivotColumn",t)},r.prototype.removePivotColumns=function(t){this.viaApi("removePivotColumns",t)},r.prototype.addPivotColumn=function(t){this.viaApi("addPivotColumn",t)},r.prototype.addPivotColumns=function(t){this.viaApi("addPivotColumns",t)},r.prototype.getPivotColumns=function(){return this.viaApi("getPivotColumns")},r.prototype.getLeftDisplayedColumnGroups=function(){return this.viaApi("getLeftDisplayedColumnGroups")},r.prototype.getCenterDisplayedColumnGroups=function(){return this.viaApi("getCenterDisplayedColumnGroups")},r.prototype.getRightDisplayedColumnGroups=function(){return this.viaApi("getRightDisplayedColumnGroups")},r.prototype.getAllDisplayedColumnGroups=function(){return this.viaApi("getAllDisplayedColumnGroups")},r.prototype.autoSizeColumn=function(t,e){return this.viaApi("autoSizeColumn",t,e)},r.prototype.autoSizeColumns=function(t,e){this.viaApi("autoSizeColumns",t,e)},r.prototype.autoSizeAllColumns=function(t){this.viaApi("autoSizeAllColumns",t)},r.prototype.setPivotResultColumns=function(t){this.viaApi("setPivotResultColumns",t)},r.prototype.getPivotResultColumns=function(){return this.viaApi("getPivotResultColumns")},gg([y("gridApi")],r.prototype,"api",void 0),r=gg([ne("columnApi")],r),r}(),hk=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),rr=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},fk=function(r){hk(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.initialised=!1,e.isSsrm=!1,e}return t.prototype.init=function(){var e=this;this.isSsrm=this.gridOptionsService.isRowModelType("serverSide"),this.cellExpressions=this.gridOptionsService.get("enableCellExpressions"),this.isTreeData=this.gridOptionsService.get("treeData"),this.initialised=!0;var o=function(i){return e.callColumnCellValueChangedHandler(i)},n=this.gridOptionsService.useAsyncEvents();this.eventService.addEventListener(w.EVENT_CELL_VALUE_CHANGED,o,n),this.addDestroyFunc(function(){return e.eventService.removeEventListener(w.EVENT_CELL_VALUE_CHANGED,o,n)}),this.addManagedPropertyListener("treeData",function(i){return e.isTreeData=i.currentValue})},t.prototype.getValue=function(e,o,n,i){if(n===void 0&&(n=!1),i===void 0&&(i=!1),this.initialised||this.init(),!!o){var s=e.getColDef(),a=s.field,l=e.getColId(),c=o.data,u,d=o.groupData&&o.groupData[l]!==void 0,p=!i&&o.aggData&&o.aggData[l]!==void 0,h=this.isSsrm&&i&&!!e.getColDef().aggFunc,f=this.isSsrm&&o.footer&&o.field&&(e.getColDef().showRowGroup===!0||e.getColDef().showRowGroup===o.field);if(n&&s.filterValueGetter?u=this.executeFilterValueGetter(s.filterValueGetter,c,e,o):this.isTreeData&&p?u=o.aggData[l]:this.isTreeData&&s.valueGetter?u=this.executeValueGetter(s.valueGetter,c,e,o):this.isTreeData&&a&&c?u=yr(c,a,e.isFieldContainsDots()):d?u=o.groupData[l]:p?u=o.aggData[l]:s.valueGetter?u=this.executeValueGetter(s.valueGetter,c,e,o):f?u=yr(c,o.field,e.isFieldContainsDots()):a&&c&&!h&&(u=yr(c,a,e.isFieldContainsDots())),this.cellExpressions&&typeof u=="string"&&u.indexOf("=")===0){var g=u.substring(1);u=this.executeValueGetter(g,c,e,o)}if(u==null){var _=this.getOpenedGroup(o,e);if(_!=null)return _}return u}},t.prototype.getOpenedGroup=function(e,o){if(this.gridOptionsService.get("showOpenedGroup")){var n=o.getColDef();if(n.showRowGroup)for(var i=o.getColDef().showRowGroup,s=e.parent;s!=null;){if(s.rowGroupColumn&&(i===!0||i===s.rowGroupColumn.getColId()))return s.key;s=s.parent}}},t.prototype.setValue=function(e,o,n,i){var s=this.columnModel.getPrimaryColumn(o);if(!e||!s)return!1;pe(e.data)&&(e.data={});var a=s.getColDef(),l=a.field,c=a.valueSetter;if(pe(l)&&pe(c))return console.warn("AG Grid: you need either field or valueSetter set on colDef for editing to work"),!1;if(!this.dataTypeService.checkType(s,n))return console.warn("AG Grid: Data type of the new value does not match the cell data type of the column"),!1;var u={node:e,data:e.data,oldValue:this.getValue(s,e),newValue:n,colDef:s.getColDef(),column:s,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context};u.newValue=n;var d;if(W(c)?typeof c=="function"?d=c(u):d=this.expressionService.evaluate(c,u):d=this.setValueUsingField(e.data,l,n,s.isFieldContainsDots()),d===void 0&&(d=!0),!d)return!1;e.resetQuickFilterAggregateText(),this.valueCache.onDataChanged(),u.newValue=this.getValue(s,e);var p={type:w.EVENT_CELL_VALUE_CHANGED,event:null,rowIndex:e.rowIndex,rowPinned:e.rowPinned,column:u.column,api:u.api,columnApi:u.columnApi,colDef:u.colDef,context:u.context,data:e.data,node:e,oldValue:u.oldValue,newValue:u.newValue,value:u.newValue,source:i};return this.eventService.dispatchEvent(p),!0},t.prototype.callColumnCellValueChangedHandler=function(e){var o=e.colDef.onCellValueChanged;typeof o=="function"&&o({node:e.node,data:e.data,oldValue:e.oldValue,newValue:e.newValue,colDef:e.colDef,column:e.column,api:e.api,columnApi:e.columnApi,context:e.context})},t.prototype.setValueUsingField=function(e,o,n,i){if(!o)return!1;var s=!1;if(!i)s=e[o]===n,s||(e[o]=n);else for(var a=o.split("."),l=e;a.length>0&&l;){var c=a.shift();a.length===0?(s=l[c]===n,s||(l[c]=n)):l=l[c]}return!s},t.prototype.executeFilterValueGetter=function(e,o,n,i){var s={data:o,node:i,column:n,colDef:n.getColDef(),api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context,getValue:this.getValueCallback.bind(this,i)};return typeof e=="function"?e(s):this.expressionService.evaluate(e,s)},t.prototype.executeValueGetter=function(e,o,n,i){var s=n.getColId(),a=this.valueCache.getValue(i,s);if(a!==void 0)return a;var l={data:o,node:i,column:n,colDef:n.getColDef(),api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context,getValue:this.getValueCallback.bind(this,i)},c;return typeof e=="function"?c=e(l):c=this.expressionService.evaluate(e,l),this.valueCache.setValue(i,s,c),c},t.prototype.getValueCallback=function(e,o){var n=this.columnModel.getPrimaryColumn(o);return n?this.getValue(n,e):null},t.prototype.getKeyForNode=function(e,o){var n=this.getValue(e,o),i=e.getColDef().keyCreator,s=n;if(i){var a={value:n,colDef:e.getColDef(),column:e,node:o,data:o.data,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context};s=i(a)}return typeof s=="string"||s==null||(s=String(s),s==="[object Object]"&&Ee("a column you are grouping or pivoting by has objects as values. If you want to group by complex objects then either a) use a colDef.keyCreator (se AG Grid docs) or b) to toString() on the object to return a key")),s},rr([y("expressionService")],t.prototype,"expressionService",void 0),rr([y("columnModel")],t.prototype,"columnModel",void 0),rr([y("valueCache")],t.prototype,"valueCache",void 0),rr([y("dataTypeService")],t.prototype,"dataTypeService",void 0),rr([Q],t.prototype,"init",null),t=rr([ne("valueService")],t),t}(K),gk=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),vg=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},vk=function(r,t){return function(e,o){t(e,o,r)}},mk=function(r){gk(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.expressionToFunctionCache={},e}return t.prototype.setBeans=function(e){this.logger=e.create("ExpressionService")},t.prototype.evaluate=function(e,o){if(typeof e=="string")return this.evaluateExpression(e,o);console.error("AG Grid: value should be either a string or a function",e)},t.prototype.evaluateExpression=function(e,o){try{var n=this.createExpressionFunction(e),i=n(o.value,o.context,o.oldValue,o.newValue,o.value,o.node,o.data,o.colDef,o.rowIndex,o.api,o.columnApi,o.getValue,o.column,o.columnGroup);return i}catch(s){return console.log("Processing of the expression failed"),console.log("Expression = "+e),console.log("Params =",o),console.log("Exception = "+s),null}},t.prototype.createExpressionFunction=function(e){if(this.expressionToFunctionCache[e])return this.expressionToFunctionCache[e];var o=this.createFunctionBody(e),n=new Function("x, ctx, oldValue, newValue, value, node, data, colDef, rowIndex, api, columnApi, getValue, column, columnGroup",o);return this.expressionToFunctionCache[e]=n,n},t.prototype.createFunctionBody=function(e){return e.indexOf("return")>=0?e:"return "+e+";"},vg([vk(0,eo("loggerFactory"))],t.prototype,"setBeans",null),t=vg([ne("expressionService")],t),t}(K),yk=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),Ck=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},wk=function(r){yk(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.templateCache={},e.waitingCallbacks={},e}return t.prototype.getTemplate=function(e,o){var n=this.templateCache[e];if(n)return n;var i=this.waitingCallbacks[e],s=this;if(!i){i=[],this.waitingCallbacks[e]=i;var a=new XMLHttpRequest;a.onload=function(){s.handleHttpResult(this,e)},a.open("GET",e),a.send()}return o&&i.push(o),null},t.prototype.handleHttpResult=function(e,o){if(e.status!==200||e.response===null){console.warn("AG Grid: Unable to get template error ".concat(e.status," - ").concat(o));return}this.templateCache[o]=e.response||e.responseText;for(var n=this.waitingCallbacks[o],i=0;i<n.length;i++){var s=n[i];s()}},t=Ck([ne("templateService")],t),t}(K),_k=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),mg=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},Sk=function(r,t){return function(e,o){t(e,o,r)}},Ek=function(r){_k(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.setBeans=function(e){this.logging=e.get("debug")},t.prototype.create=function(e){return new Rh(e,this.isLogging.bind(this))},t.prototype.isLogging=function(){return this.logging},mg([Sk(0,eo("gridOptionsService"))],t.prototype,"setBeans",null),t=mg([ne("loggerFactory")],t),t}(K),Rh=function(){function r(t,e){this.name=t,this.isLoggingFunc=e}return r.prototype.isLogging=function(){return this.isLoggingFunc()},r.prototype.log=function(t){this.isLoggingFunc()&&console.log("AG Grid."+this.name+": "+t)},r}(),Rk=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),sr=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},Tk=function(r){Rk(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.setComp=function(e,o,n){var i=this;this.view=e,this.eGridHostDiv=o,this.eGui=n,this.eGui.setAttribute("grid-id",this.context.getGridId()),this.dragAndDropService.addDropTarget({getContainer:function(){return i.eGui},isInterestedIn:function(a){return a===no.HeaderCell||a===no.ToolPanel},getIconName:function(){return St.ICON_NOT_ALLOWED}}),this.mouseEventService.stampTopLevelGridCompWithGridInstance(o),this.createManagedBean(new Ch(this.view)),this.addRtlSupport();var s=this.resizeObserverService.observeResize(this.eGridHostDiv,this.onGridSizeChanged.bind(this));this.addDestroyFunc(function(){return s()}),this.ctrlsService.registerGridCtrl(this)},t.prototype.isDetailGrid=function(){var e,o=this.focusService.findTabbableParent(this.getGui());return((e=o==null?void 0:o.getAttribute("row-id"))===null||e===void 0?void 0:e.startsWith("detail"))||!1},t.prototype.showDropZones=function(){return Se.__isRegistered(ie.RowGroupingModule,this.context.getGridId())},t.prototype.showSideBar=function(){return Se.__isRegistered(ie.SideBarModule,this.context.getGridId())},t.prototype.showStatusBar=function(){return Se.__isRegistered(ie.StatusBarModule,this.context.getGridId())},t.prototype.showWatermark=function(){return Se.__isRegistered(ie.EnterpriseCoreModule,this.context.getGridId())},t.prototype.onGridSizeChanged=function(){var e={type:w.EVENT_GRID_SIZE_CHANGED,clientWidth:this.eGridHostDiv.clientWidth,clientHeight:this.eGridHostDiv.clientHeight};this.eventService.dispatchEvent(e)},t.prototype.addRtlSupport=function(){var e=this.gridOptionsService.get("enableRtl")?"ag-rtl":"ag-ltr";this.view.setRtlClass(e)},t.prototype.destroyGridUi=function(){this.view.destroyGridUi()},t.prototype.getGui=function(){return this.eGui},t.prototype.setResizeCursor=function(e){this.view.setCursor(e?"ew-resize":null)},t.prototype.disableUserSelect=function(e){this.view.setUserSelect(e?"none":null)},t.prototype.focusNextInnerContainer=function(e){var o=this.gridOptionsService.getDocument(),n=this.view.getFocusableContainers(),i=n.findIndex(function(a){return a.contains(o.activeElement)}),s=i+(e?-1:1);return s<=0||s>=n.length?!1:this.focusService.focusInto(n[s])},t.prototype.focusInnerElement=function(e){var o=this.view.getFocusableContainers(),n=this.columnModel.getAllDisplayedColumns();if(e){if(o.length>1)return this.focusService.focusInto(Ge(o),!0);var i=Ge(n);if(this.focusService.focusGridView(i,!0))return!0}return this.gridOptionsService.get("headerHeight")===0?this.focusService.focusGridView(n[0]):this.focusService.focusFirstHeader()},t.prototype.forceFocusOutOfContainer=function(e){e===void 0&&(e=!1),this.view.forceFocusOutOfContainer(e)},sr([y("focusService")],t.prototype,"focusService",void 0),sr([y("resizeObserverService")],t.prototype,"resizeObserverService",void 0),sr([y("columnModel")],t.prototype,"columnModel",void 0),sr([y("ctrlsService")],t.prototype,"ctrlsService",void 0),sr([y("mouseEventService")],t.prototype,"mouseEventService",void 0),sr([y("dragAndDropService")],t.prototype,"dragAndDropService",void 0),t}(K),bk=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),Cs=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},Ak=function(r){bk(t,r);function t(e){var o=r.call(this)||this;return o.eGridDiv=e,o}return t.prototype.postConstruct=function(){var e=this;this.logger=this.loggerFactory.create("GridComp");var o={destroyGridUi:function(){return e.destroyBean(e)},setRtlClass:function(i){return e.addCssClass(i)},forceFocusOutOfContainer:this.forceFocusOutOfContainer.bind(this),updateLayoutClasses:this.updateLayoutClasses.bind(this),getFocusableContainers:this.getFocusableContainers.bind(this),setUserSelect:function(i){e.getGui().style.userSelect=i??"",e.getGui().style.webkitUserSelect=i??""},setCursor:function(i){e.getGui().style.cursor=i??""}};this.ctrl=this.createManagedBean(new Tk);var n=this.createTemplate();this.setTemplate(n),this.ctrl.setComp(o,this.eGridDiv,this.getGui()),this.insertGridIntoDom(),this.initialiseTabGuard({onTabKeyDown:function(){},focusInnerElement:function(i){return e.ctrl.focusInnerElement(i)}})},t.prototype.insertGridIntoDom=function(){var e=this,o=this.getGui();this.eGridDiv.appendChild(o),this.addDestroyFunc(function(){e.eGridDiv.removeChild(o),e.logger.log("Grid removed from DOM")})},t.prototype.updateLayoutClasses=function(e,o){var n=this.eRootWrapperBody.classList;n.toggle(pt.AUTO_HEIGHT,o.autoHeight),n.toggle(pt.NORMAL,o.normal),n.toggle(pt.PRINT,o.print),this.addOrRemoveCssClass(pt.AUTO_HEIGHT,o.autoHeight),this.addOrRemoveCssClass(pt.NORMAL,o.normal),this.addOrRemoveCssClass(pt.PRINT,o.print)},t.prototype.createTemplate=function(){var e=this.ctrl.showDropZones()?"<ag-grid-header-drop-zones></ag-grid-header-drop-zones>":"",o=this.ctrl.showSideBar()?'<ag-side-bar ref="sideBar"></ag-side-bar>':"",n=this.ctrl.showStatusBar()?'<ag-status-bar ref="statusBar"></ag-status-bar>':"",i=this.ctrl.showWatermark()?"<ag-watermark></ag-watermark>":"",s=`<div class="ag-root-wrapper" role="presentation">
                `.concat(e,`
                <div class="ag-root-wrapper-body" ref="rootWrapperBody" role="presentation">
                    <ag-grid-body ref="gridBody"></ag-grid-body>
                    `).concat(o,`
                </div>
                `).concat(n,`
                <ag-pagination></ag-pagination>
                `).concat(i,`
            </div>`);return s},t.prototype.getFocusableElement=function(){return this.eRootWrapperBody},t.prototype.getFocusableContainers=function(){var e=[this.gridBodyComp.getGui()];return this.sideBarComp&&e.push(this.sideBarComp.getGui()),e.filter(function(o){return io(o)})},Cs([y("loggerFactory")],t.prototype,"loggerFactory",void 0),Cs([ee("gridBody")],t.prototype,"gridBodyComp",void 0),Cs([ee("sideBar")],t.prototype,"sideBarComp",void 0),Cs([ee("rootWrapperBody")],t.prototype,"eRootWrapperBody",void 0),Cs([Q],t.prototype,"postConstruct",null),t}(Ec),Ok=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),yg=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},Vn=function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var o=e.call(r),n,i=[],s;try{for(;(t===void 0||t-- >0)&&!(n=o.next()).done;)i.push(n.value)}catch(a){s={error:a}}finally{try{n&&!n.done&&(e=o.return)&&e.call(o)}finally{if(s)throw s.error}}return i},ar=function(r,t,e){if(e||arguments.length===2)for(var o=0,n=t.length,i;o<n;o++)(i||!(o in t))&&(i||(i=Array.prototype.slice.call(t,0,o)),i[o]=t[o]);return r.concat(i||Array.prototype.slice.call(t))},Pk=function(r){Ok(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}e=t,t.prototype.progressSort=function(o,n,i){var s=this.getNextSortDirection(o);this.setSortForColumn(o,s,n,i)},t.prototype.setSortForColumn=function(o,n,i,s){n!=="asc"&&n!=="desc"&&(n=null);var a=this.gridOptionsService.isColumnsSortingCoupledToGroup(),l=[o];if(a&&o.getColDef().showRowGroup){var c=this.columnModel.getSourceColumnsForGroupColumn(o),u=c==null?void 0:c.filter(function(p){return p.isSortable()});u&&(l=ar([o],Vn(u),!1))}l.forEach(function(p){return p.setSort(n,s)});var d=(i||this.gridOptionsService.get("alwaysMultiSort"))&&!this.gridOptionsService.get("suppressMultiSort");d||this.clearSortBarTheseColumns(l,s),this.updateSortIndex(o),this.dispatchSortChangedEvents(s)},t.prototype.updateSortIndex=function(o){var n=this.gridOptionsService.isColumnsSortingCoupledToGroup(),i=this.columnModel.getGroupDisplayColumnForGroup(o.getId()),s=n&&i||o,a=this.getColumnsWithSortingOrdered();this.columnModel.getPrimaryAndSecondaryAndAutoColumns().forEach(function(u){return u.setSortIndex(null)});var l=a.filter(function(u){return u!==s}),c=s.getSort()?ar(ar([],Vn(l),!1),[s],!1):l;c.forEach(function(u,d){return u.setSortIndex(d)})},t.prototype.onSortChanged=function(o){this.dispatchSortChangedEvents(o)},t.prototype.isSortActive=function(){var o=this.columnModel.getPrimaryAndSecondaryAndAutoColumns(),n=o.filter(function(i){return!!i.getSort()});return n&&n.length>0},t.prototype.dispatchSortChangedEvents=function(o){var n={type:w.EVENT_SORT_CHANGED,source:o};this.eventService.dispatchEvent(n)},t.prototype.clearSortBarTheseColumns=function(o,n){this.columnModel.getPrimaryAndSecondaryAndAutoColumns().forEach(function(i){o.includes(i)||i.setSort(void 0,n)})},t.prototype.getNextSortDirection=function(o){var n;if(o.getColDef().sortingOrder?n=o.getColDef().sortingOrder:this.gridOptionsService.get("sortingOrder")?n=this.gridOptionsService.get("sortingOrder"):n=e.DEFAULT_SORTING_ORDER,!Array.isArray(n)||n.length<=0)return console.warn("AG Grid: sortingOrder must be an array with at least one element, currently it's ".concat(n)),null;var i=n.indexOf(o.getSort()),s=i<0,a=i==n.length-1,l;return s||a?l=n[0]:l=n[i+1],e.DEFAULT_SORTING_ORDER.indexOf(l)<0?(console.warn("AG Grid: invalid sort type "+l),null):l},t.prototype.getIndexedSortMap=function(){var o=this,n=this.columnModel.getPrimaryAndSecondaryAndAutoColumns().filter(function(u){return!!u.getSort()});if(this.columnModel.isPivotMode()){var i=this.gridOptionsService.isColumnsSortingCoupledToGroup();n=n.filter(function(u){var d=!!u.getAggFunc(),p=!u.isPrimary(),h=i?o.columnModel.getGroupDisplayColumnForGroup(u.getId()):u.getColDef().showRowGroup;return d||p||h})}var s=this.columnModel.getRowGroupColumns().filter(function(u){return!!u.getSort()}),a=this.gridOptionsService.isColumnsSortingCoupledToGroup()&&!!s.length;a&&(n=ar([],Vn(new Set(n.map(function(u){var d;return(d=o.columnModel.getGroupDisplayColumnForGroup(u.getId()))!==null&&d!==void 0?d:u}))),!1));var l={};n.forEach(function(u,d){return l[u.getId()]=d}),n.sort(function(u,d){var p=u.getSortIndex(),h=d.getSortIndex();if(p!=null&&h!=null)return p-h;if(p==null&&h==null){var f=l[u.getId()],g=l[d.getId()];return f>g?1:-1}else return h==null?-1:1});var c=new Map;return n.forEach(function(u,d){return c.set(u,d)}),a&&s.forEach(function(u){var d=o.columnModel.getGroupDisplayColumnForGroup(u.getId());c.set(u,c.get(d))}),c},t.prototype.getColumnsWithSortingOrdered=function(){return ar([],Vn(this.getIndexedSortMap().entries()),!1).sort(function(o,n){var i=Vn(o,2);i[0];var s=i[1],a=Vn(n,2);a[0];var l=a[1];return s-l}).map(function(o){var n=Vn(o,1),i=n[0];return i})},t.prototype.getSortModel=function(){return this.getColumnsWithSortingOrdered().filter(function(o){return o.getSort()}).map(function(o){return{sort:o.getSort(),colId:o.getId()}})},t.prototype.getSortOptions=function(){return this.getColumnsWithSortingOrdered().filter(function(o){return o.getSort()}).map(function(o){return{sort:o.getSort(),column:o}})},t.prototype.canColumnDisplayMixedSort=function(o){var n=this.gridOptionsService.isColumnsSortingCoupledToGroup(),i=!!o.getColDef().showRowGroup;return n&&i},t.prototype.getDisplaySortForColumn=function(o){var n=this.columnModel.getSourceColumnsForGroupColumn(o);if(!this.canColumnDisplayMixedSort(o)||!(n!=null&&n.length))return o.getSort();var i=o.getColDef().field!=null||!!o.getColDef().valueGetter,s=i?ar([o],Vn(n),!1):n,a=s[0].getSort(),l=s.every(function(c){return c.getSort()==a});return l?a:"mixed"},t.prototype.getDisplaySortIndexForColumn=function(o){return this.getIndexedSortMap().get(o)};var e;return t.DEFAULT_SORTING_ORDER=["asc","desc",null],yg([y("columnModel")],t.prototype,"columnModel",void 0),t=e=yg([ne("sortController")],t),t}(K),Ik=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),Vs=function(){return Vs=Object.assign||function(r){for(var t,e=1,o=arguments.length;e<o;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},Vs.apply(this,arguments)},ao=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},Dk=function(r){Ik(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}e=t,t.addKeyboardModeEvents=function(o){this.instanceCount>0||(o.addEventListener("keydown",e.toggleKeyboardMode),o.addEventListener("mousedown",e.toggleKeyboardMode))},t.removeKeyboardModeEvents=function(o){this.instanceCount>0||(o.addEventListener("keydown",e.toggleKeyboardMode),o.addEventListener("mousedown",e.toggleKeyboardMode))},t.toggleKeyboardMode=function(o){var n=e.keyboardModeActive,i=o.type==="keydown";i&&(o.ctrlKey||o.metaKey||o.altKey)||n!==i&&(e.keyboardModeActive=i)},t.unregisterGridCompController=function(o){e.removeKeyboardModeEvents(o)},t.prototype.init=function(){var o=this,n=this.clearFocusedCell.bind(this);this.addManagedListener(this.eventService,w.EVENT_COLUMN_PIVOT_MODE_CHANGED,n),this.addManagedListener(this.eventService,w.EVENT_NEW_COLUMNS_LOADED,this.onColumnEverythingChanged.bind(this)),this.addManagedListener(this.eventService,w.EVENT_COLUMN_GROUP_OPENED,n),this.addManagedListener(this.eventService,w.EVENT_COLUMN_ROW_GROUP_CHANGED,n),this.registerKeyboardFocusEvents(),this.ctrlsService.whenReady(function(i){o.gridCtrl=i.gridCtrl})},t.prototype.registerKeyboardFocusEvents=function(){var o=this.gridOptionsService.getDocument();e.addKeyboardModeEvents(o),e.instanceCount++,this.addDestroyFunc(function(){e.instanceCount--,e.unregisterGridCompController(o)})},t.prototype.onColumnEverythingChanged=function(){if(this.focusedCellPosition){var o=this.focusedCellPosition.column,n=this.columnModel.getGridColumn(o.getId());o!==n&&this.clearFocusedCell()}},t.prototype.isKeyboardMode=function(){return e.keyboardModeActive},t.prototype.getFocusCellToUseAfterRefresh=function(){var o=this.gridOptionsService.getDocument();return this.gridOptionsService.get("suppressFocusAfterRefresh")||!this.focusedCellPosition||this.isDomDataMissingInHierarchy(o.activeElement,Ii.DOM_DATA_KEY_ROW_CTRL)?null:this.focusedCellPosition},t.prototype.getFocusHeaderToUseAfterRefresh=function(){var o=this.gridOptionsService.getDocument();return this.gridOptionsService.get("suppressFocusAfterRefresh")||!this.focusedHeaderPosition||this.isDomDataMissingInHierarchy(o.activeElement,_c.DOM_DATA_KEY_HEADER_CTRL)?null:this.focusedHeaderPosition},t.prototype.isDomDataMissingInHierarchy=function(o,n){for(var i=o;i;){var s=this.gridOptionsService.getDomData(i,n);if(s)return!1;i=i.parentNode}return!0},t.prototype.getFocusedCell=function(){return this.focusedCellPosition},t.prototype.shouldRestoreFocus=function(o){var n=this;return this.isCellRestoreFocused(o)?(setTimeout(function(){n.restoredFocusedCellPosition=null},0),!0):!1},t.prototype.isCellRestoreFocused=function(o){return this.restoredFocusedCellPosition==null?!1:this.cellPositionUtils.equals(o,this.restoredFocusedCellPosition)},t.prototype.setRestoreFocusedCell=function(o){this.getFrameworkOverrides().renderingEngine==="react"&&(this.restoredFocusedCellPosition=o)},t.prototype.getFocusEventParams=function(){var o=this.focusedCellPosition,n=o.rowIndex,i=o.rowPinned,s=o.column,a={rowIndex:n,rowPinned:i,column:s,isFullWidthCell:!1},l=this.rowRenderer.getRowByPosition({rowIndex:n,rowPinned:i});return l&&(a.isFullWidthCell=l.isFullWidth()),a},t.prototype.clearFocusedCell=function(){if(this.restoredFocusedCellPosition=null,this.focusedCellPosition!=null){var o=Vs({type:w.EVENT_CELL_FOCUS_CLEARED},this.getFocusEventParams());this.focusedCellPosition=null,this.eventService.dispatchEvent(o)}},t.prototype.setFocusedCell=function(o){var n=o.column,i=o.rowIndex,s=o.rowPinned,a=o.forceBrowserFocus,l=a===void 0?!1:a,c=o.preventScrollOnBrowserFocus,u=c===void 0?!1:c,d=this.columnModel.getGridColumn(n);if(!d){this.focusedCellPosition=null;return}this.focusedCellPosition=d?{rowIndex:i,rowPinned:un(s),column:d}:null;var p=Vs(Vs({type:w.EVENT_CELL_FOCUSED},this.getFocusEventParams()),{forceBrowserFocus:l,preventScrollOnBrowserFocus:u,floating:null});this.eventService.dispatchEvent(p)},t.prototype.isCellFocused=function(o){return this.focusedCellPosition==null?!1:this.cellPositionUtils.equals(o,this.focusedCellPosition)},t.prototype.isRowNodeFocused=function(o){return this.isRowFocused(o.rowIndex,o.rowPinned)},t.prototype.isHeaderWrapperFocused=function(o){if(this.focusedHeaderPosition==null)return!1;var n=o.getColumnGroupChild(),i=o.getRowIndex(),s=o.getPinned(),a=this.focusedHeaderPosition,l=a.column,c=a.headerRowIndex;return n===l&&i===c&&s==l.getPinned()},t.prototype.clearFocusedHeader=function(){this.focusedHeaderPosition=null},t.prototype.getFocusedHeader=function(){return this.focusedHeaderPosition},t.prototype.setFocusedHeader=function(o,n){this.focusedHeaderPosition={headerRowIndex:o,column:n}},t.prototype.focusHeaderPosition=function(o){var n=o.direction,i=o.fromTab,s=o.allowUserOverride,a=o.event,l=o.fromCell,c=o.headerPosition;if(l&&this.filterManager.isAdvancedFilterHeaderActive())return this.focusAdvancedFilter(c);if(s){var u=this.getFocusedHeader(),d=this.headerNavigationService.getHeaderRowCount();if(i){var p=this.gridOptionsService.getCallback("tabToNextHeader");if(p){var h={backwards:n==="Before",previousHeaderPosition:u,nextHeaderPosition:c,headerRowCount:d};c=p(h)}}else{var p=this.gridOptionsService.getCallback("navigateToNextHeader");if(p&&a){var f={key:a.key,previousHeaderPosition:u,nextHeaderPosition:c,headerRowCount:d,event:a};c=p(f)}}}if(!c)return!1;if(c.headerRowIndex===-1)return this.filterManager.isAdvancedFilterHeaderActive()?this.focusAdvancedFilter(c):this.focusGridView(c.column);this.headerNavigationService.scrollToColumn(c.column,n);var g=this.ctrlsService.getHeaderRowContainerCtrl(c.column.getPinned()),_=g.focusHeader(c.headerRowIndex,c.column,a);return _},t.prototype.focusFirstHeader=function(){var o=this.columnModel.getAllDisplayedColumns()[0];return o?(o.getParent()&&(o=this.columnModel.getColumnGroupAtLevel(o,0)),this.focusHeaderPosition({headerPosition:{headerRowIndex:0,column:o}})):!1},t.prototype.focusLastHeader=function(o){var n=this.headerNavigationService.getHeaderRowCount()-1,i=Ge(this.columnModel.getAllDisplayedColumns());return this.focusHeaderPosition({headerPosition:{headerRowIndex:n,column:i},event:o})},t.prototype.focusPreviousFromFirstCell=function(o){return this.filterManager.isAdvancedFilterHeaderActive()?this.focusAdvancedFilter(null):this.focusLastHeader(o)},t.prototype.isAnyCellFocused=function(){return!!this.focusedCellPosition},t.prototype.isRowFocused=function(o,n){return this.focusedCellPosition==null?!1:this.focusedCellPosition.rowIndex===o&&this.focusedCellPosition.rowPinned===un(n)},t.prototype.findFocusableElements=function(o,n,i){i===void 0&&(i=!1);var s=dC,a=oh;n&&(a+=", "+n),i&&(a+=', [tabindex="-1"]');var l=Array.prototype.slice.apply(o.querySelectorAll(s)).filter(function(d){return io(d)}),c=Array.prototype.slice.apply(o.querySelectorAll(a));if(!c.length)return l;var u=function(d,p){return d.filter(function(h){return p.indexOf(h)===-1})};return u(l,c)},t.prototype.focusInto=function(o,n,i){n===void 0&&(n=!1),i===void 0&&(i=!1);var s=this.findFocusableElements(o,null,i),a=n?Ge(s):s[0];return a?(a.focus({preventScroll:!0}),!0):!1},t.prototype.findFocusableElementBeforeTabGuard=function(o,n){if(!n)return null;var i=this.findFocusableElements(o),s=i.indexOf(n);if(s===-1)return null;for(var a=-1,l=s-1;l>=0;l--)if(i[l].classList.contains(_r.TAB_GUARD_TOP)){a=l;break}return a<=0?null:i[a-1]},t.prototype.findNextFocusableElement=function(o,n,i){o===void 0&&(o=this.eGridDiv);var s=this.findFocusableElements(o,n?':not([tabindex="-1"])':null),a=this.gridOptionsService.getDocument(),l=a.activeElement,c;n?c=s.findIndex(function(d){return d.contains(l)}):c=s.indexOf(l);var u=c+(i?-1:1);return u<0||u>=s.length?null:s[u]},t.prototype.isTargetUnderManagedComponent=function(o,n){if(!n)return!1;var i=o.querySelectorAll(".".concat(ci.FOCUS_MANAGED_CLASS));if(!i.length)return!1;for(var s=0;s<i.length;s++)if(i[s].contains(n))return!0;return!1},t.prototype.findTabbableParent=function(o,n){n===void 0&&(n=5);for(var i=0;o&&Rl(o)===null&&++i<=n;)o=o.parentElement;return Rl(o)===null?null:o},t.prototype.focusGridView=function(o,n){if(this.gridOptionsService.get("suppressCellFocus"))return n?this.focusLastHeader():this.focusNextGridCoreContainer(!1);var i=n?this.rowPositionUtils.getLastRow():this.rowPositionUtils.getFirstRow();if(!i)return!1;var s=i.rowIndex,a=i.rowPinned,l=this.getFocusedHeader();if(!o&&l&&(o=l.column),s==null||!o)return!1;if(this.navigationService.ensureCellVisible({rowIndex:s,column:o,rowPinned:a}),this.setFocusedCell({rowIndex:s,column:o,rowPinned:un(a),forceBrowserFocus:!0}),this.rangeService){var c={rowIndex:s,rowPinned:a,column:o};this.rangeService.setRangeToCell(c)}return!0},t.prototype.focusNextGridCoreContainer=function(o,n){return n===void 0&&(n=!1),!n&&this.gridCtrl.focusNextInnerContainer(o)?!0:((n||!o&&!this.gridCtrl.isDetailGrid())&&this.gridCtrl.forceFocusOutOfContainer(o),!1)},t.prototype.focusAdvancedFilter=function(o){return this.advancedFilterFocusColumn=o==null?void 0:o.column,this.advancedFilterService.getCtrl().focusHeaderComp()},t.prototype.focusNextFromAdvancedFilter=function(o,n){var i,s,a=(i=n?void 0:this.advancedFilterFocusColumn)!==null&&i!==void 0?i:(s=this.columnModel.getAllDisplayedColumns())===null||s===void 0?void 0:s[0];return o?this.focusHeaderPosition({headerPosition:{column:a,headerRowIndex:this.headerNavigationService.getHeaderRowCount()-1}}):this.focusGridView(a)},t.prototype.clearAdvancedFilterColumn=function(){this.advancedFilterFocusColumn=void 0};var e;return t.keyboardModeActive=!1,t.instanceCount=0,ao([y("eGridDiv")],t.prototype,"eGridDiv",void 0),ao([y("columnModel")],t.prototype,"columnModel",void 0),ao([y("headerNavigationService")],t.prototype,"headerNavigationService",void 0),ao([y("rowRenderer")],t.prototype,"rowRenderer",void 0),ao([y("rowPositionUtils")],t.prototype,"rowPositionUtils",void 0),ao([y("cellPositionUtils")],t.prototype,"cellPositionUtils",void 0),ao([Le("rangeService")],t.prototype,"rangeService",void 0),ao([y("navigationService")],t.prototype,"navigationService",void 0),ao([y("ctrlsService")],t.prototype,"ctrlsService",void 0),ao([y("filterManager")],t.prototype,"filterManager",void 0),ao([Le("advancedFilterService")],t.prototype,"advancedFilterService",void 0),ao([Q],t.prototype,"init",null),t=e=ao([ne("focusService")],t),t}(K),Mk=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),Lk=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},xk=function(r){Mk(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.setMouseOver=function(e){this.selectedColumns=e;var o={type:w.EVENT_COLUMN_HOVER_CHANGED};this.eventService.dispatchEvent(o)},t.prototype.clearMouseOver=function(){this.selectedColumns=null;var e={type:w.EVENT_COLUMN_HOVER_CHANGED};this.eventService.dispatchEvent(e)},t.prototype.isHovered=function(e){return!!this.selectedColumns&&this.selectedColumns.indexOf(e)>=0},t=Lk([ne("columnHoverService")],t),t}(K),Fk=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),bu=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},Nk=function(r){Fk(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.executeNextFuncs=[],e.executeLaterFuncs=[],e.active=!1,e.animationThreadCount=0,e}return t.prototype.postConstruct=function(){var e=this;this.ctrlsService.whenReady(function(o){return e.gridBodyCtrl=o.gridBodyCtrl})},t.prototype.isActive=function(){return this.active},t.prototype.start=function(){this.active||this.gridOptionsService.get("suppressColumnMoveAnimation")||this.gridOptionsService.get("enableRtl")||(this.ensureAnimationCssClassPresent(),this.active=!0)},t.prototype.finish=function(){this.active&&(this.flush(),this.active=!1)},t.prototype.executeNextVMTurn=function(e){this.active?this.executeNextFuncs.push(e):e()},t.prototype.executeLaterVMTurn=function(e){this.active?this.executeLaterFuncs.push(e):e()},t.prototype.ensureAnimationCssClassPresent=function(){var e=this;this.animationThreadCount++;var o=this.animationThreadCount;this.gridBodyCtrl.setColumnMovingCss(!0),this.executeLaterFuncs.push(function(){e.animationThreadCount===o&&e.gridBodyCtrl.setColumnMovingCss(!1)})},t.prototype.flush=function(){var e=this.executeNextFuncs;this.executeNextFuncs=[];var o=this.executeLaterFuncs;this.executeLaterFuncs=[],!(e.length===0&&o.length===0)&&(window.setTimeout(function(){return e.forEach(function(n){return n()})},0),window.setTimeout(function(){return o.forEach(function(n){return n()})},300))},bu([y("ctrlsService")],t.prototype,"ctrlsService",void 0),bu([Q],t.prototype,"postConstruct",null),t=bu([ne("columnAnimationService")],t),t}(K),Gk=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),Ua=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},kk=function(r){Gk(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.postConstruct=function(){var e=this;this.ctrlsService.whenReady(function(o){e.centerRowContainerCon=o.centerRowContainerCtrl,e.addManagedListener(e.eventService,w.EVENT_BODY_HEIGHT_CHANGED,e.checkPageSize.bind(e)),e.addManagedListener(e.eventService,w.EVENT_SCROLL_VISIBILITY_CHANGED,e.checkPageSize.bind(e)),e.addManagedPropertyListener("paginationAutoPageSize",e.onPaginationAutoSizeChanged.bind(e)),e.checkPageSize()})},t.prototype.notActive=function(){return!this.gridOptionsService.get("paginationAutoPageSize")||this.centerRowContainerCon==null},t.prototype.onPaginationAutoSizeChanged=function(){this.notActive()?this.paginationProxy.unsetAutoCalculatedPageSize():this.checkPageSize()},t.prototype.checkPageSize=function(){var e=this;if(!this.notActive()){var o=this.centerRowContainerCon.getViewportSizeFeature().getBodyHeight();if(o>0){var n=function(){var i=e.gridOptionsService.getRowHeightAsNumber(),s=Math.floor(o/i);e.paginationProxy.setPageSize(s,"autoCalculated")};this.isBodyRendered?Eo(function(){return n()},50)():(n(),this.isBodyRendered=!0)}else this.isBodyRendered=!1}},Ua([y("ctrlsService")],t.prototype,"ctrlsService",void 0),Ua([y("paginationProxy")],t.prototype,"paginationProxy",void 0),Ua([Q],t.prototype,"postConstruct",null),t=Ua([ne("paginationAutoPageSizeService")],t),t}(K),Hk=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),Cg=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},Vk=function(r){Hk(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.cacheVersion=0,e}return t.prototype.init=function(){this.active=this.gridOptionsService.get("valueCache"),this.neverExpires=this.gridOptionsService.get("valueCacheNeverExpires")},t.prototype.onDataChanged=function(){this.neverExpires||this.expire()},t.prototype.expire=function(){this.cacheVersion++},t.prototype.setValue=function(e,o,n){this.active&&(e.__cacheVersion!==this.cacheVersion&&(e.__cacheVersion=this.cacheVersion,e.__cacheData={}),e.__cacheData[o]=n)},t.prototype.getValue=function(e,o){if(!(!this.active||e.__cacheVersion!==this.cacheVersion))return e.__cacheData[o]},Cg([Q],t.prototype,"init",null),t=Cg([ne("valueCache")],t),t}(K),Bk=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),ja=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},Uk="paste",jk=function(r){Bk(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.init=function(){this.rowModel.getType()==="clientSide"&&(this.clientSideRowModel=this.rowModel),this.addManagedListener(this.eventService,w.EVENT_CELL_VALUE_CHANGED,this.onCellValueChanged.bind(this))},t.prototype.onCellValueChanged=function(e){e.source!==Uk&&this.doChangeDetection(e.node,e.column)},t.prototype.doChangeDetection=function(e,o){if(!this.gridOptionsService.get("suppressChangeDetection")){var n=[e];if(this.clientSideRowModel&&!e.isRowPinned()){var i=this.gridOptionsService.get("aggregateOnlyChangedColumns"),s=new Sc(i,this.clientSideRowModel.getRootNode());s.addParentNode(e.parent,[o]),this.clientSideRowModel.doAggregate(s),s.forEachChangedNodeDepthFirst(function(a){n.push(a)})}this.rowRenderer.refreshCells({rowNodes:n})}},ja([y("rowModel")],t.prototype,"rowModel",void 0),ja([y("rowRenderer")],t.prototype,"rowRenderer",void 0),ja([Q],t.prototype,"init",null),t=ja([ne("changeDetectionService")],t),t}(K),Wk=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),wg=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},zk=function(r){Wk(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.adaptFunction=function(e,o){var n=this.componentMetadataProvider.retrieve(e);return n&&n.functionAdapter?n.functionAdapter(o):null},t.prototype.adaptCellRendererFunction=function(e){var o=function(){function n(){}return n.prototype.refresh=function(i){return!1},n.prototype.getGui=function(){return this.eGui},n.prototype.init=function(i){var s=e(i),a=typeof s;if(a==="string"||a==="number"||a==="boolean"){this.eGui=Ot("<span>"+s+"</span>");return}if(s==null){this.eGui=Ot("<span></span>");return}this.eGui=s},n}();return o},t.prototype.doesImplementIComponent=function(e){return e?e.prototype&&"getGui"in e.prototype:!1},wg([y("componentMetadataProvider")],t.prototype,"componentMetadataProvider",void 0),t=wg([ne("agComponentUtils")],t),t}(K),$k=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),Au=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},Kk=function(r){$k(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.postConstruct=function(){this.componentMetaData={dateComponent:{mandatoryMethodList:["getDate","setDate"],optionalMethodList:["afterGuiAttached","setInputPlaceholder","setInputAriaLabel"]},detailCellRenderer:{mandatoryMethodList:[],optionalMethodList:["refresh"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},headerComponent:{mandatoryMethodList:[],optionalMethodList:["refresh"]},headerGroupComponent:{mandatoryMethodList:[],optionalMethodList:[]},loadingCellRenderer:{mandatoryMethodList:[],optionalMethodList:[]},loadingOverlayComponent:{mandatoryMethodList:[],optionalMethodList:[]},noRowsOverlayComponent:{mandatoryMethodList:[],optionalMethodList:[]},floatingFilterComponent:{mandatoryMethodList:["onParentModelChanged"],optionalMethodList:["afterGuiAttached"]},floatingFilterWrapperComponent:{mandatoryMethodList:[],optionalMethodList:[]},cellRenderer:{mandatoryMethodList:[],optionalMethodList:["refresh","afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},cellEditor:{mandatoryMethodList:["getValue"],optionalMethodList:["isPopup","isCancelBeforeStart","isCancelAfterEnd","getPopupPosition","focusIn","focusOut","afterGuiAttached"]},innerRenderer:{mandatoryMethodList:[],optionalMethodList:["afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},fullWidthCellRenderer:{mandatoryMethodList:[],optionalMethodList:["refresh","afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},groupRowRenderer:{mandatoryMethodList:[],optionalMethodList:["afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},filter:{mandatoryMethodList:["isFilterActive","doesFilterPass","getModel","setModel"],optionalMethodList:["afterGuiAttached","afterGuiDetached","onNewRowsLoaded","getModelAsString","onFloatingFilterChanged","onAnyFilterChanged"]},filterComponent:{mandatoryMethodList:["isFilterActive","doesFilterPass","getModel","setModel"],optionalMethodList:["afterGuiAttached","afterGuiDetached","onNewRowsLoaded","getModelAsString","onFloatingFilterChanged","onAnyFilterChanged"]},statusPanel:{mandatoryMethodList:[],optionalMethodList:["afterGuiAttached"]},toolPanel:{mandatoryMethodList:[],optionalMethodList:["refresh","afterGuiAttached"]},tooltipComponent:{mandatoryMethodList:[],optionalMethodList:[]}}},t.prototype.retrieve=function(e){return this.componentMetaData[e]},Au([y("agComponentUtils")],t.prototype,"agComponentUtils",void 0),Au([Q],t.prototype,"postConstruct",null),t=Au([ne("componentMetadataProvider")],t),t}(K),Yk=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),Ou=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},qk=function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var o=e.call(r),n,i=[],s;try{for(;(t===void 0||t-- >0)&&!(n=o.next()).done;)i.push(n.value)}catch(a){s={error:a}}finally{try{n&&!n.done&&(e=o.return)&&e.call(o)}finally{if(s)throw s.error}}return i},Qk=function(r,t,e){if(e||arguments.length===2)for(var o=0,n=t.length,i;o<n;o++)(i||!(o in t))&&(i||(i=Array.prototype.slice.call(t,0,o)),i[o]=t[o]);return r.concat(i||Array.prototype.slice.call(t))},Xk=25,_g=10,Pu=8,Zk=4,Iu=4,Du=6,Jk=16,Sg=14,Mu=8,e5={"ag-theme-custom":{headerHeight:25,headerCellMinWidth:24,listItemHeight:Zk*5,rowHeight:25,chartMenuPanelWidth:220},"ag-theme-material":{headerHeight:Pu*7,headerCellMinWidth:48,listItemHeight:Pu*4,rowHeight:Pu*6,chartMenuPanelWidth:240},"ag-theme-balham":{headerHeight:Iu*8,headerCellMinWidth:24,listItemHeight:Iu*6,rowHeight:Iu*7,chartMenuPanelWidth:220},"ag-theme-alpine":{headerHeight:Du*8,headerCellMinWidth:36,listItemHeight:Du*4,rowHeight:Du*7,chartMenuPanelWidth:240},"ag-theme-quartz":{headerHeight:Sg+Mu*4.25,headerCellMinWidth:36,listItemHeight:Jk+Mu,rowHeight:Sg+Mu*3.5,chartMenuPanelWidth:260}},Eg={headerHeight:["ag-header-row"],headerCellMinWidth:["ag-header-cell"],listItemHeight:["ag-virtual-list-item"],rowHeight:["ag-row"],chartMenuPanelWidth:["ag-chart-docked-container"]},t5=function(r){Yk(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.calculatedSizes={},e}return t.prototype.postConstruct=function(){var e=this,o,n=(o=this.getTheme().el)!==null&&o!==void 0?o:this.eGridDiv;this.addManagedPropertyListener("rowHeight",function(){return e.refreshRowHeightVariable()}),this.mutationObserver=new MutationObserver(function(){e.calculatedSizes={},e.fireGridStylesChangedEvent()}),this.mutationObserver.observe(n||this.eGridDiv,{attributes:!0,attributeFilter:["class"]})},t.prototype.fireGridStylesChangedEvent=function(){var e={type:w.EVENT_GRID_STYLES_CHANGED};this.eventService.dispatchEvent(e)},t.prototype.getSassVariable=function(e){var o=this.getTheme(),n=o.themeFamily,i=o.el;if(!(!n||n.indexOf("ag-theme")!==0)){this.calculatedSizes||(this.calculatedSizes={}),this.calculatedSizes[n]||(this.calculatedSizes[n]={});var s=this.calculatedSizes[n][e];return s??(this.calculatedSizes[n][e]=this.calculateValueForSassProperty(e,n,i),this.calculatedSizes[n][e])}},t.prototype.calculateValueForSassProperty=function(e,o,n){var i,s="ag-theme-"+(o.match("material")?"material":o.match("balham")?"balham":o.match("alpine")?"alpine":"custom"),a=e5[s][e],l=this.gridOptionsService.getDocument();if(n||(n=this.eGridDiv),!Eg[e])return a;var c=Eg[e],u=l.createElement("div"),d=Array.from(n.classList);(i=u.classList).add.apply(i,Qk([o],qk(d),!1)),u.style.position="absolute";var p=c.reduce(function(g,_){var C=l.createElement("div");return C.style.position="static",C.classList.add(_),g.appendChild(C),C},u),h=0;if(l.body){l.body.appendChild(u);var f=e.toLowerCase().indexOf("height")!==-1?"height":"width";h=parseInt(window.getComputedStyle(p)[f],10),l.body.removeChild(u)}return h||a},t.prototype.isThemeDark=function(){var e=this.getTheme().theme;return!!e&&e.indexOf("dark")>=0},t.prototype.chartMenuPanelWidth=function(){return this.getSassVariable("chartMenuPanelWidth")},t.prototype.getTheme=function(){for(var e=/\bag-(material|(?:theme-([\w\-]*)))\b/g,o=this.eGridDiv,n=null,i=[];o;)if(n=e.exec(o.className),!n)o=o.parentElement||void 0;else{var s=o.className.match(e);s&&(i=s);break}if(!n)return{allThemes:i};var a=n[0];return{theme:a,el:o,themeFamily:a.replace(/-dark$/,""),allThemes:i}},t.prototype.getFromTheme=function(e,o){var n;return(n=this.getSassVariable(o))!==null&&n!==void 0?n:e},t.prototype.getDefaultRowHeight=function(){return this.getFromTheme(Xk,"rowHeight")},t.prototype.getListItemHeight=function(){return this.getFromTheme(20,"listItemHeight")},t.prototype.refreshRowHeightVariable=function(){var e=this.eGridDiv.style.getPropertyValue("--ag-line-height").trim(),o=this.gridOptionsService.get("rowHeight");if(o==null||isNaN(o)||!isFinite(o))return e!==null&&this.eGridDiv.style.setProperty("--ag-line-height",null),-1;var n="".concat(o,"px");return e!=n?(this.eGridDiv.style.setProperty("--ag-line-height",n),o):e!=""?parseFloat(e):-1},t.prototype.getMinColWidth=function(){var e=this.getFromTheme(null,"headerCellMinWidth");return W(e)?Math.max(e,_g):_g},t.prototype.destroy=function(){this.calculatedSizes=null,this.mutationObserver&&this.mutationObserver.disconnect(),r.prototype.destroy.call(this)},Ou([y("eGridDiv")],t.prototype,"eGridDiv",void 0),Ou([Q],t.prototype,"postConstruct",null),t=Ou([ne("environment")],t),t}(K),o5=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),Wa=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},n5=function(r,t){return function(e,o){t(e,o,r)}},i5=function(r){o5(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.scrollY=0,e.uiBodyHeight=0,e}return t.prototype.agWire=function(e){this.logger=e.create("RowContainerHeightService")},t.prototype.postConstruct=function(){this.addManagedListener(this.eventService,w.EVENT_BODY_HEIGHT_CHANGED,this.updateOffset.bind(this)),this.maxDivHeight=rC(),this.logger.log("maxDivHeight = "+this.maxDivHeight)},t.prototype.isStretching=function(){return this.stretching},t.prototype.getDivStretchOffset=function(){return this.divStretchOffset},t.prototype.updateOffset=function(){if(this.stretching){var e=this.ctrlsService.getGridBodyCtrl(),o=e.getScrollFeature().getVScrollPosition().top,n=this.getUiBodyHeight(),i=o!==this.scrollY||n!==this.uiBodyHeight;i&&(this.scrollY=o,this.uiBodyHeight=n,this.calculateOffset())}},t.prototype.calculateOffset=function(){this.setUiContainerHeight(this.maxDivHeight),this.pixelsToShave=this.modelHeight-this.uiContainerHeight,this.maxScrollY=this.uiContainerHeight-this.uiBodyHeight;var e=this.scrollY/this.maxScrollY,o=e*this.pixelsToShave;this.logger.log("Div Stretch Offset = ".concat(o," (").concat(this.pixelsToShave," * ").concat(e,")")),this.setDivStretchOffset(o)},t.prototype.setUiContainerHeight=function(e){e!==this.uiContainerHeight&&(this.uiContainerHeight=e,this.eventService.dispatchEvent({type:w.EVENT_ROW_CONTAINER_HEIGHT_CHANGED}))},t.prototype.clearOffset=function(){this.setUiContainerHeight(this.modelHeight),this.pixelsToShave=0,this.setDivStretchOffset(0)},t.prototype.setDivStretchOffset=function(e){var o=typeof e=="number"?Math.floor(e):null;this.divStretchOffset!==o&&(this.divStretchOffset=o,this.eventService.dispatchEvent({type:w.EVENT_HEIGHT_SCALE_CHANGED}))},t.prototype.setModelHeight=function(e){this.modelHeight=e,this.stretching=e!=null&&this.maxDivHeight>0&&e>this.maxDivHeight,this.stretching?this.calculateOffset():this.clearOffset()},t.prototype.getUiContainerHeight=function(){return this.uiContainerHeight},t.prototype.getRealPixelPosition=function(e){return e-this.divStretchOffset},t.prototype.getUiBodyHeight=function(){var e=this.ctrlsService.getGridBodyCtrl(),o=e.getScrollFeature().getVScrollPosition();return o.bottom-o.top},t.prototype.getScrollPositionForPixel=function(e){if(this.pixelsToShave<=0)return e;var o=this.modelHeight-this.getUiBodyHeight(),n=e/o,i=this.maxScrollY*n;return i},Wa([y("ctrlsService")],t.prototype,"ctrlsService",void 0),Wa([n5(0,eo("loggerFactory"))],t.prototype,"agWire",null),Wa([Q],t.prototype,"postConstruct",null),t=Wa([ne("rowContainerHeightService")],t),t}(K),r5=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),za=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},s5=function(r){r5(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.init=function(){var e=this;this.addManagedPropertyListener("isRowSelectable",function(){return e.updateSelectable()})},t.prototype.updateSelectableAfterGrouping=function(){this.updateSelectable(!0)},t.prototype.updateSelectable=function(e){e===void 0&&(e=!1);var o=!!this.gridOptionsService.get("rowSelection"),n=this.gridOptionsService.get("isRowSelectable");if(!(!o||!n)){var i=this.gridOptionsService.get("groupSelectsChildren"),s=this.rowModel.getType()==="clientSide"&&i,a=[],l=function(d){if(!(e&&!d.group)){if(s&&d.group){var p=d.childrenAfterGroup.some(function(f){return f.selectable===!0});d.setRowSelectable(p,!0);return}var h=n?n(d):!0;d.setRowSelectable(h,!0),!h&&d.isSelected()&&a.push(d)}};if(s){var c=this.rowModel,u=new Sc(!1,c.getRootNode());u.forEachChangedNodeDepthFirst(l,!0,!0)}else this.rowModel.forEachNode(l);a.length&&this.selectionService.setNodesSelected({nodes:a,newValue:!1,source:"selectableChanged"}),s&&this.selectionService instanceof nw&&this.selectionService.updateGroupsFromChildrenSelections("selectableChanged")}},za([y("rowModel")],t.prototype,"rowModel",void 0),za([y("selectionService")],t.prototype,"selectionService",void 0),za([Q],t.prototype,"init",null),t=za([ne("selectableService")],t),t}(K),a5=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),lo=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},l5=function(r){a5(t,r);function t(){var e=r.call(this)||this;return e.previousAndFirstButtonsDisabled=!1,e.nextButtonDisabled=!1,e.lastButtonDisabled=!1,e.areListenersSetup=!1,e}return t.prototype.postConstruct=function(){var e=this,o=this.gridOptionsService.get("enableRtl");this.setTemplate(this.getTemplate());var n=this,i=n.btFirst,s=n.btPrevious,a=n.btNext,l=n.btLast;n.pageSizeComp,this.activateTabIndex([i,s,a,l]),i.insertAdjacentElement("afterbegin",at(o?"last":"first",this.gridOptionsService)),s.insertAdjacentElement("afterbegin",at(o?"next":"previous",this.gridOptionsService)),a.insertAdjacentElement("afterbegin",at(o?"previous":"next",this.gridOptionsService)),l.insertAdjacentElement("afterbegin",at(o?"first":"last",this.gridOptionsService)),this.addManagedPropertyListener("pagination",this.onPaginationChanged.bind(this)),this.addManagedPropertyListener("suppressPaginationPanel",this.onPaginationChanged.bind(this)),this.addManagedPropertyListeners(["paginationPageSizeSelector","paginationAutoPageSize","suppressPaginationPanel"],function(){return e.onPageSizeRelatedOptionsChange()}),this.pageSizeComp.toggleSelectDisplay(this.pageSizeComp.shouldShowPageSizeSelector()),this.onPaginationChanged()},t.prototype.onPaginationChanged=function(){var e=this.gridOptionsService.get("pagination"),o=e&&!this.gridOptionsService.get("suppressPaginationPanel");this.setDisplayed(o),o&&(this.setupListeners(),this.enableOrDisableButtons(),this.updateRowLabels(),this.setCurrentPageLabel(),this.setTotalLabels(),this.onPageSizeRelatedOptionsChange())},t.prototype.onPageSizeRelatedOptionsChange=function(){this.pageSizeComp.toggleSelectDisplay(this.pageSizeComp.shouldShowPageSizeSelector())},t.prototype.setupListeners=function(){var e=this;this.areListenersSetup||(this.addManagedListener(this.eventService,w.EVENT_PAGINATION_CHANGED,this.onPaginationChanged.bind(this)),[{el:this.btFirst,fn:this.onBtFirst.bind(this)},{el:this.btPrevious,fn:this.onBtPrevious.bind(this)},{el:this.btNext,fn:this.onBtNext.bind(this)},{el:this.btLast,fn:this.onBtLast.bind(this)}].forEach(function(o){var n=o.el,i=o.fn;e.addManagedListener(n,"click",i),e.addManagedListener(n,"keydown",function(s){(s.key===N.ENTER||s.key===N.SPACE)&&(s.preventDefault(),i())})}),this.areListenersSetup=!0)},t.prototype.onBtFirst=function(){this.previousAndFirstButtonsDisabled||this.paginationProxy.goToFirstPage()},t.prototype.setCurrentPageLabel=function(){var e=this.paginationProxy.getTotalPages()>0,o=this.paginationProxy.getCurrentPage(),n=e?o+1:0;this.lbCurrent.innerHTML=this.formatNumber(n)},t.prototype.formatNumber=function(e){var o=this.gridOptionsService.getCallback("paginationNumberFormatter");if(o){var n={value:e};return o(n)}var i=this.localeService.getLocaleTextFunc(),s=i("thousandSeparator",","),a=i("decimalSeparator",".");return th(e,s,a)},t.prototype.getTemplate=function(){var e=this.localeService.getLocaleTextFunc(),o=e("page","Page"),n=e("to","to"),i=e("of","of"),s=e("firstPage","First Page"),a=e("previousPage","Previous Page"),l=e("nextPage","Next Page"),c=e("lastPage","Last Page"),u=this.getCompId();return'<div class="ag-paging-panel ag-unselectable" id="ag-'.concat(u,`">
                <ag-page-size-selector ref="pageSizeComp"></ag-page-size-selector>
                <span class="ag-paging-row-summary-panel" role="status">
                    <span id="ag-`).concat(u,`-first-row" ref="lbFirstRowOnPage" class="ag-paging-row-summary-panel-number"></span>
                    <span id="ag-`).concat(u,'-to">').concat(n,`</span>
                    <span id="ag-`).concat(u,`-last-row" ref="lbLastRowOnPage" class="ag-paging-row-summary-panel-number"></span>
                    <span id="ag-`).concat(u,'-of">').concat(i,`</span>
                    <span id="ag-`).concat(u,`-row-count" ref="lbRecordCount" class="ag-paging-row-summary-panel-number"></span>
                </span>
                <span class="ag-paging-page-summary-panel" role="presentation">
                    <div ref="btFirst" class="ag-button ag-paging-button" role="button" aria-label="`).concat(s,`"></div>
                    <div ref="btPrevious" class="ag-button ag-paging-button" role="button" aria-label="`).concat(a,`"></div>
                    <span class="ag-paging-description" role="status">
                        <span id="ag-`).concat(u,'-start-page">').concat(o,`</span>
                        <span id="ag-`).concat(u,`-start-page-number" ref="lbCurrent" class="ag-paging-number"></span>
                        <span id="ag-`).concat(u,'-of-page">').concat(i,`</span>
                        <span id="ag-`).concat(u,`-of-page-number" ref="lbTotal" class="ag-paging-number"></span>
                    </span>
                    <div ref="btNext" class="ag-button ag-paging-button" role="button" aria-label="`).concat(l,`"></div>
                    <div ref="btLast" class="ag-button ag-paging-button" role="button" aria-label="`).concat(c,`"></div>
                </span>
            </div>`)},t.prototype.onBtNext=function(){this.nextButtonDisabled||this.paginationProxy.goToNextPage()},t.prototype.onBtPrevious=function(){this.previousAndFirstButtonsDisabled||this.paginationProxy.goToPreviousPage()},t.prototype.onBtLast=function(){this.lastButtonDisabled||this.paginationProxy.goToLastPage()},t.prototype.enableOrDisableButtons=function(){var e=this.paginationProxy.getCurrentPage(),o=this.paginationProxy.isLastPageFound(),n=this.paginationProxy.getTotalPages();this.previousAndFirstButtonsDisabled=e===0,this.toggleButtonDisabled(this.btFirst,this.previousAndFirstButtonsDisabled),this.toggleButtonDisabled(this.btPrevious,this.previousAndFirstButtonsDisabled);var i=this.isZeroPagesToDisplay(),s=e===n-1;this.nextButtonDisabled=s||i,this.lastButtonDisabled=!o||i||e===n-1,this.toggleButtonDisabled(this.btNext,this.nextButtonDisabled),this.toggleButtonDisabled(this.btLast,this.lastButtonDisabled)},t.prototype.toggleButtonDisabled=function(e,o){Wp(e,o),e.classList.toggle("ag-disabled",o)},t.prototype.updateRowLabels=function(){var e=this.paginationProxy.getCurrentPage(),o=this.paginationProxy.getPageSize(),n=this.paginationProxy.isLastPageFound(),i=this.paginationProxy.isLastPageFound()?this.paginationProxy.getMasterRowCount():null,s,a;if(this.isZeroPagesToDisplay()?s=a=0:(s=o*e+1,a=s+o-1,n&&a>i&&(a=i)),this.lbFirstRowOnPage.innerHTML=this.formatNumber(s),this.rowNodeBlockLoader.isLoading()){var l=this.localeService.getLocaleTextFunc();this.lbLastRowOnPage.innerHTML=l("pageLastRowUnknown","?")}else this.lbLastRowOnPage.innerHTML=this.formatNumber(a)},t.prototype.isZeroPagesToDisplay=function(){var e=this.paginationProxy.isLastPageFound(),o=this.paginationProxy.getTotalPages();return e&&o===0},t.prototype.setTotalLabels=function(){var e=this.paginationProxy.isLastPageFound(),o=this.paginationProxy.getTotalPages(),n=e?this.paginationProxy.getMasterRowCount():null;if(n===1){var i=this.paginationProxy.getRow(0),s=i&&i.group&&!(i.groupData||i.aggData);if(s){this.setTotalLabelsToZero();return}}if(e)this.lbTotal.innerHTML=this.formatNumber(o),this.lbRecordCount.innerHTML=this.formatNumber(n);else{var a=this.localeService.getLocaleTextFunc()("more","more");this.lbTotal.innerHTML=a,this.lbRecordCount.innerHTML=a}},t.prototype.setTotalLabelsToZero=function(){this.lbFirstRowOnPage.innerHTML=this.formatNumber(0),this.lbCurrent.innerHTML=this.formatNumber(0),this.lbLastRowOnPage.innerHTML=this.formatNumber(0),this.lbTotal.innerHTML=this.formatNumber(0),this.lbRecordCount.innerHTML=this.formatNumber(0)},lo([y("paginationProxy")],t.prototype,"paginationProxy",void 0),lo([y("rowNodeBlockLoader")],t.prototype,"rowNodeBlockLoader",void 0),lo([ee("btFirst")],t.prototype,"btFirst",void 0),lo([ee("btPrevious")],t.prototype,"btPrevious",void 0),lo([ee("btNext")],t.prototype,"btNext",void 0),lo([ee("btLast")],t.prototype,"btLast",void 0),lo([ee("lbRecordCount")],t.prototype,"lbRecordCount",void 0),lo([ee("lbFirstRowOnPage")],t.prototype,"lbFirstRowOnPage",void 0),lo([ee("lbLastRowOnPage")],t.prototype,"lbLastRowOnPage",void 0),lo([ee("lbCurrent")],t.prototype,"lbCurrent",void 0),lo([ee("lbTotal")],t.prototype,"lbTotal",void 0),lo([ee("pageSizeComp")],t.prototype,"pageSizeComp",void 0),lo([Q],t.prototype,"postConstruct",null),t}(Re),c5=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),Lu=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},u5=function(r){c5(t,r);function t(){var e=r.call(this,t.TEMPLATE)||this;return e.inProgress=!1,e.destroyRequested=!1,e}return t.prototype.updateLayoutClasses=function(e,o){var n=this.eOverlayWrapper.classList;n.toggle(pt.AUTO_HEIGHT,o.autoHeight),n.toggle(pt.NORMAL,o.normal),n.toggle(pt.PRINT,o.print)},t.prototype.postConstruct=function(){this.createManagedBean(new Ch(this)),this.setDisplayed(!1,{skipAriaHidden:!0}),this.overlayService.registerOverlayWrapperComp(this)},t.prototype.setWrapperTypeClass=function(e){var o=this.eOverlayWrapper.classList;this.activeOverlayWrapperCssClass&&o.toggle(this.activeOverlayWrapperCssClass,!1),this.activeOverlayWrapperCssClass=e,o.toggle(e,!0)},t.prototype.showOverlay=function(e,o){var n=this;this.inProgress||(this.setWrapperTypeClass(o),this.destroyActiveOverlay(),this.inProgress=!0,e&&e.then(function(i){n.inProgress=!1,n.eOverlayWrapper.appendChild(i.getGui()),n.activeOverlay=i,n.destroyRequested&&(n.destroyRequested=!1,n.destroyActiveOverlay())}),this.setDisplayed(!0,{skipAriaHidden:!0}))},t.prototype.destroyActiveOverlay=function(){if(this.inProgress){this.destroyRequested=!0;return}this.activeOverlay&&(this.activeOverlay=this.getContext().destroyBean(this.activeOverlay),Et(this.eOverlayWrapper))},t.prototype.hideOverlay=function(){this.destroyActiveOverlay(),this.setDisplayed(!1,{skipAriaHidden:!0})},t.prototype.destroy=function(){this.destroyActiveOverlay(),r.prototype.destroy.call(this)},t.TEMPLATE=`
        <div class="ag-overlay" aria-hidden="true">
            <div class="ag-overlay-panel">
                <div class="ag-overlay-wrapper" ref="eOverlayWrapper"></div>
            </div>
        </div>`,Lu([y("overlayService")],t.prototype,"overlayService",void 0),Lu([ee("eOverlayWrapper")],t.prototype,"eOverlayWrapper",void 0),Lu([Q],t.prototype,"postConstruct",null),t}(Re),d5=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),$a=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},p5=function(r){d5(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getFirstRow=function(){var e=0,o;return this.pinnedRowModel.getPinnedTopRowCount()?o="top":this.rowModel.getRowCount()?(o=null,e=this.paginationProxy.getPageFirstRow()):this.pinnedRowModel.getPinnedBottomRowCount()&&(o="bottom"),o===void 0?null:{rowIndex:e,rowPinned:o}},t.prototype.getLastRow=function(){var e,o=null,n=this.pinnedRowModel.getPinnedBottomRowCount(),i=this.pinnedRowModel.getPinnedTopRowCount();return n?(o="bottom",e=n-1):this.rowModel.getRowCount()?(o=null,e=this.paginationProxy.getPageLastRow()):i&&(o="top",e=i-1),e===void 0?null:{rowIndex:e,rowPinned:o}},t.prototype.getRowNode=function(e){switch(e.rowPinned){case"top":return this.pinnedRowModel.getPinnedTopRowData()[e.rowIndex];case"bottom":return this.pinnedRowModel.getPinnedBottomRowData()[e.rowIndex];default:return this.rowModel.getRow(e.rowIndex)}},t.prototype.sameRow=function(e,o){return!e&&!o?!0:e&&!o||!e&&o?!1:e.rowIndex===o.rowIndex&&e.rowPinned==o.rowPinned},t.prototype.before=function(e,o){switch(e.rowPinned){case"top":if(o.rowPinned!=="top")return!0;break;case"bottom":if(o.rowPinned!=="bottom")return!1;break;default:if(W(o.rowPinned))return o.rowPinned!=="top";break}return e.rowIndex<o.rowIndex},t.prototype.rowMax=function(e){var o=this,n;return e.forEach(function(i){(n===void 0||o.before(n,i))&&(n=i)}),n},t.prototype.rowMin=function(e){var o=this,n;return e.forEach(function(i){(n===void 0||o.before(i,n))&&(n=i)}),n},$a([y("rowModel")],t.prototype,"rowModel",void 0),$a([y("pinnedRowModel")],t.prototype,"pinnedRowModel",void 0),$a([y("paginationProxy")],t.prototype,"paginationProxy",void 0),t=$a([ne("rowPositionUtils")],t),t}(K),h5=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),f5=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},g5=function(r){h5(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.createId=function(e){var o=e.rowIndex,n=e.rowPinned,i=e.column;return this.createIdFromValues({rowIndex:o,column:i,rowPinned:n})},t.prototype.createIdFromValues=function(e){var o=e.rowIndex,n=e.rowPinned,i=e.column;return"".concat(o,".").concat(n??"null",".").concat(i.getId())},t.prototype.equals=function(e,o){var n=e.column===o.column,i=e.rowPinned===o.rowPinned,s=e.rowIndex===o.rowIndex;return n&&i&&s},t=f5([ne("cellPositionUtils")],t),t}(K),v5=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),Ms=function(){function r(t){this.cellValueChanges=t}return r}(),xu=function(r){v5(t,r);function t(e,o,n,i){var s=r.call(this,e)||this;return s.initialRange=o,s.finalRange=n,s.ranges=i,s}return t}(Ms),Rg=function(){function r(t){this.actionStack=[],this.maxStackSize=t||r.DEFAULT_STACK_SIZE,this.actionStack=new Array(this.maxStackSize)}return r.prototype.pop=function(){return this.actionStack.pop()},r.prototype.push=function(t){var e=t.cellValueChanges&&t.cellValueChanges.length>0;e&&(this.actionStack.length===this.maxStackSize&&this.actionStack.shift(),this.actionStack.push(t))},r.prototype.clear=function(){this.actionStack=[]},r.prototype.getCurrentStackSize=function(){return this.actionStack.length},r.DEFAULT_STACK_SIZE=10,r}(),m5=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),Bl=function(){return Bl=Object.assign||function(r){for(var t,e=1,o=arguments.length;e<o;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},Bl.apply(this,arguments)},Ko=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},y5=function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var o=e.call(r),n,i=[],s;try{for(;(t===void 0||t-- >0)&&!(n=o.next()).done;)i.push(n.value)}catch(a){s={error:a}}finally{try{n&&!n.done&&(e=o.return)&&e.call(o)}finally{if(s)throw s.error}}return i},C5=function(r,t,e){if(e||arguments.length===2)for(var o=0,n=t.length,i;o<n;o++)(i||!(o in t))&&(i||(i=Array.prototype.slice.call(t,0,o)),i[o]=t[o]);return r.concat(i||Array.prototype.slice.call(t))},w5=function(r){m5(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.cellValueChanges=[],e.activeCellEdit=null,e.activeRowEdit=null,e.isPasting=!1,e.isRangeInAction=!1,e.onCellValueChanged=function(o){var n={column:o.column,rowIndex:o.rowIndex,rowPinned:o.rowPinned},i=e.activeCellEdit!==null&&e.cellPositionUtils.equals(e.activeCellEdit,n),s=e.activeRowEdit!==null&&e.rowPositionUtils.sameRow(e.activeRowEdit,n),a=i||s||e.isPasting||e.isRangeInAction;if(a){var l=o.rowPinned,c=o.rowIndex,u=o.column,d=o.oldValue,p=o.value,h={rowPinned:l,rowIndex:c,columnId:u.getColId(),newValue:p,oldValue:d};e.cellValueChanges.push(h)}},e.clearStacks=function(){e.undoStack.clear(),e.redoStack.clear()},e}return t.prototype.init=function(){var e=this;if(this.gridOptionsService.get("undoRedoCellEditing")){var o=this.gridOptionsService.get("undoRedoCellEditingLimit");o<=0||(this.undoStack=new Rg(o),this.redoStack=new Rg(o),this.addRowEditingListeners(),this.addCellEditingListeners(),this.addPasteListeners(),this.addFillListeners(),this.addCellKeyListeners(),this.addManagedListener(this.eventService,w.EVENT_CELL_VALUE_CHANGED,this.onCellValueChanged),this.addManagedListener(this.eventService,w.EVENT_MODEL_UPDATED,function(n){n.keepUndoRedoStack||e.clearStacks()}),this.addManagedListener(this.eventService,w.EVENT_COLUMN_PIVOT_MODE_CHANGED,this.clearStacks),this.addManagedListener(this.eventService,w.EVENT_NEW_COLUMNS_LOADED,this.clearStacks),this.addManagedListener(this.eventService,w.EVENT_COLUMN_GROUP_OPENED,this.clearStacks),this.addManagedListener(this.eventService,w.EVENT_COLUMN_ROW_GROUP_CHANGED,this.clearStacks),this.addManagedListener(this.eventService,w.EVENT_COLUMN_MOVED,this.clearStacks),this.addManagedListener(this.eventService,w.EVENT_COLUMN_PINNED,this.clearStacks),this.addManagedListener(this.eventService,w.EVENT_COLUMN_VISIBLE,this.clearStacks),this.addManagedListener(this.eventService,w.EVENT_ROW_DRAG_END,this.clearStacks),this.ctrlsService.whenReady(function(){e.gridBodyCtrl=e.ctrlsService.getGridBodyCtrl()}))}},t.prototype.getCurrentUndoStackSize=function(){return this.undoStack?this.undoStack.getCurrentStackSize():0},t.prototype.getCurrentRedoStackSize=function(){return this.redoStack?this.redoStack.getCurrentStackSize():0},t.prototype.undo=function(e){var o={type:w.EVENT_UNDO_STARTED,source:e};this.eventService.dispatchEvent(o);var n=this.undoRedo(this.undoStack,this.redoStack,"initialRange","oldValue","undo"),i={type:w.EVENT_UNDO_ENDED,source:e,operationPerformed:n};this.eventService.dispatchEvent(i)},t.prototype.redo=function(e){var o={type:w.EVENT_REDO_STARTED,source:e};this.eventService.dispatchEvent(o);var n=this.undoRedo(this.redoStack,this.undoStack,"finalRange","newValue","redo"),i={type:w.EVENT_REDO_ENDED,source:e,operationPerformed:n};this.eventService.dispatchEvent(i)},t.prototype.undoRedo=function(e,o,n,i,s){if(!e)return!1;var a=e.pop();return!a||!a.cellValueChanges?!1:(this.processAction(a,function(l){return l[i]},s),a instanceof xu?this.processRange(a.ranges||[a[n]]):this.processCell(a.cellValueChanges),o.push(a),!0)},t.prototype.processAction=function(e,o,n){var i=this;e.cellValueChanges.forEach(function(s){var a=s.rowIndex,l=s.rowPinned,c=s.columnId,u={rowIndex:a,rowPinned:l},d=i.getRowNode(u);d.displayed&&d.setDataValue(c,o(s),n)})},t.prototype.processRange=function(e){var o=this,n;this.rangeService.removeAllCellRanges(!0),e.forEach(function(i,s){if(i){var a=i.startRow,l=i.endRow;s===e.length-1&&(n={rowPinned:a.rowPinned,rowIndex:a.rowIndex,columnId:i.startColumn.getColId()},o.setLastFocusedCell(n));var c={rowStartIndex:a.rowIndex,rowStartPinned:a.rowPinned,rowEndIndex:l.rowIndex,rowEndPinned:l.rowPinned,columnStart:i.startColumn,columns:i.columns};o.rangeService.addCellRange(c)}})},t.prototype.processCell=function(e){var o=e[0],n=o.rowIndex,i=o.rowPinned,s={rowIndex:n,rowPinned:i},a=this.getRowNode(s),l={rowPinned:o.rowPinned,rowIndex:a.rowIndex,columnId:o.columnId};this.setLastFocusedCell(l,!!this.rangeService)},t.prototype.setLastFocusedCell=function(e,o){var n=e.rowIndex,i=e.columnId,s=e.rowPinned,a=this.gridBodyCtrl.getScrollFeature(),l=this.columnModel.getGridColumn(i);if(l){a.ensureIndexVisible(n),a.ensureColumnVisible(l);var c={rowIndex:n,column:l,rowPinned:s};this.focusService.setFocusedCell(Bl(Bl({},c),{forceBrowserFocus:!0})),o&&this.rangeService.setRangeToCell(c)}},t.prototype.addRowEditingListeners=function(){var e=this;this.addManagedListener(this.eventService,w.EVENT_ROW_EDITING_STARTED,function(o){e.activeRowEdit={rowIndex:o.rowIndex,rowPinned:o.rowPinned}}),this.addManagedListener(this.eventService,w.EVENT_ROW_EDITING_STOPPED,function(){var o=new Ms(e.cellValueChanges);e.pushActionsToUndoStack(o),e.activeRowEdit=null})},t.prototype.addCellEditingListeners=function(){var e=this;this.addManagedListener(this.eventService,w.EVENT_CELL_EDITING_STARTED,function(o){e.activeCellEdit={column:o.column,rowIndex:o.rowIndex,rowPinned:o.rowPinned}}),this.addManagedListener(this.eventService,w.EVENT_CELL_EDITING_STOPPED,function(o){e.activeCellEdit=null;var n=o.valueChanged&&!e.activeRowEdit&&!e.isPasting&&!e.isRangeInAction;if(n){var i=new Ms(e.cellValueChanges);e.pushActionsToUndoStack(i)}})},t.prototype.addPasteListeners=function(){var e=this;this.addManagedListener(this.eventService,w.EVENT_PASTE_START,function(){e.isPasting=!0}),this.addManagedListener(this.eventService,w.EVENT_PASTE_END,function(){var o=new Ms(e.cellValueChanges);e.pushActionsToUndoStack(o),e.isPasting=!1})},t.prototype.addFillListeners=function(){var e=this;this.addManagedListener(this.eventService,w.EVENT_FILL_START,function(){e.isRangeInAction=!0}),this.addManagedListener(this.eventService,w.EVENT_FILL_END,function(o){var n=new xu(e.cellValueChanges,o.initialRange,o.finalRange);e.pushActionsToUndoStack(n),e.isRangeInAction=!1})},t.prototype.addCellKeyListeners=function(){var e=this;this.addManagedListener(this.eventService,w.EVENT_KEY_SHORTCUT_CHANGED_CELL_START,function(){e.isRangeInAction=!0}),this.addManagedListener(this.eventService,w.EVENT_KEY_SHORTCUT_CHANGED_CELL_END,function(){var o;e.rangeService&&e.gridOptionsService.get("enableRangeSelection")?o=new xu(e.cellValueChanges,void 0,void 0,C5([],y5(e.rangeService.getCellRanges()),!1)):o=new Ms(e.cellValueChanges),e.pushActionsToUndoStack(o),e.isRangeInAction=!1})},t.prototype.pushActionsToUndoStack=function(e){this.undoStack.push(e),this.cellValueChanges=[],this.redoStack.clear()},t.prototype.getRowNode=function(e){switch(e.rowPinned){case"top":return this.pinnedRowModel.getPinnedTopRowData()[e.rowIndex];case"bottom":return this.pinnedRowModel.getPinnedBottomRowData()[e.rowIndex];default:return this.rowModel.getRow(e.rowIndex)}},Ko([y("focusService")],t.prototype,"focusService",void 0),Ko([y("ctrlsService")],t.prototype,"ctrlsService",void 0),Ko([y("rowModel")],t.prototype,"rowModel",void 0),Ko([y("pinnedRowModel")],t.prototype,"pinnedRowModel",void 0),Ko([y("cellPositionUtils")],t.prototype,"cellPositionUtils",void 0),Ko([y("rowPositionUtils")],t.prototype,"rowPositionUtils",void 0),Ko([y("columnModel")],t.prototype,"columnModel",void 0),Ko([Le("rangeService")],t.prototype,"rangeService",void 0),Ko([Q],t.prototype,"init",null),t=Ko([ne("undoRedoService")],t),t}(K),_5=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),Fu=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},S5=function(r){_5(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.findHeader=function(e,o){var n,i,s;if(e.column instanceof vt?(i="getDisplayedGroup".concat(o),n=this.columnModel[i](e.column)):(s="getDisplayedCol".concat(o),n=this.columnModel[s](e.column)),!!n){var a=e.headerRowIndex,l=this.getHeaderRowType(a);if(l===Pt.COLUMN_GROUP){var c=n;if(c.isPadding()&&this.isAnyChildSpanningHeaderHeight(c)){var u=this.getColumnVisibleChild(c,a,o),d=u.nextFocusColumn,p=u.nextRow;d&&(n=d,a=p)}}return{column:n,headerRowIndex:a}}},t.prototype.isAnyChildSpanningHeaderHeight=function(e){return e?e.getLeafColumns().some(function(o){return o.isSpanHeaderHeight()}):!1},t.prototype.getColumnVisibleParent=function(e,o){var n=this.getHeaderRowType(o),i=n===Pt.FLOATING_FILTER,s=n===Pt.COLUMN,a=i?e:e.getParent(),l=o-1;if(s&&this.isAnyChildSpanningHeaderHeight(e.getParent())){for(;a&&a.isPadding();)a=a.getParent(),l--;l<0&&(a=e,l=o)}return{nextFocusColumn:a,nextRow:l}},t.prototype.getColumnVisibleChild=function(e,o,n){n===void 0&&(n="After");var i=this.getHeaderRowType(o),s=e,a=o+1;if(i===Pt.COLUMN_GROUP){var l=e.getDisplayedLeafColumns(),c=n==="After"?l[0]:Ge(l);if(this.isAnyChildSpanningHeaderHeight(c.getParent())){s=c;for(var u=c.getParent();u&&u!==e;)u=u.getParent(),a++}else s=e.getDisplayedChildren()[0]}return{nextFocusColumn:s,nextRow:a}},t.prototype.getHeaderRowType=function(e){var o=this.ctrlsService.getHeaderRowContainerCtrl();if(o)return o.getRowType(e)},t.prototype.findColAtEdgeForHeaderRow=function(e,o){var n=this.columnModel.getAllDisplayedColumns(),i=n[o==="start"?0:n.length-1];if(i){var s=this.ctrlsService.getHeaderRowContainerCtrl(i.getPinned()),a=s.getRowType(e);if(a==Pt.COLUMN_GROUP){var l=this.columnModel.getColumnGroupAtLevel(i,e);return{headerRowIndex:e,column:l}}return{headerRowIndex:a==null?-1:e,column:i}}},Fu([y("columnModel")],t.prototype,"columnModel",void 0),Fu([y("ctrlsService")],t.prototype,"ctrlsService",void 0),t=Fu([ne("headerPositionUtils")],t),t}(K),E5=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},R5=function(){function r(){}return r.prototype.buildColumnDefs=function(t,e,o){var n=this,i=[],s={};return t.forEach(function(a){for(var l=n.createDefFromColumn(a,e,o),c=!0,u=l,d=a.getOriginalParent(),p=null;d;){var h=null;if(d.isPadding()){d=d.getOriginalParent();continue}var f=s[d.getGroupId()];if(f){f.children.push(u),c=!1;break}if(h=n.createDefFromGroup(d),h&&(h.children=[u],s[h.groupId]=h,u=h,d=d.getOriginalParent()),d!=null&&p===d){c=!1;break}p=d}c&&i.push(u)}),i},r.prototype.createDefFromGroup=function(t){var e=Cl(t.getColGroupDef(),["children"]);return e&&(e.groupId=t.getGroupId()),e},r.prototype.createDefFromColumn=function(t,e,o){var n=Cl(t.getColDef());return n.colId=t.getColId(),n.width=t.getActualWidth(),n.rowGroup=t.isRowGroupActive(),n.rowGroupIndex=t.isRowGroupActive()?e.indexOf(t):null,n.pivot=t.isPivotActive(),n.pivotIndex=t.isPivotActive()?o.indexOf(t):null,n.aggFunc=t.isValueActive()?t.getAggFunc():null,n.hide=t.isVisible()?void 0:!0,n.pinned=t.isPinned()?t.getPinned():null,n.sort=t.getSort()?t.getSort():null,n.sortIndex=t.getSortIndex()!=null?t.getSortIndex():null,n},r=E5([ne("columnDefFactory")],r),r}(),Nu=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},T5=function(){function r(){}return r.prototype.getInitialRowClasses=function(t){var e=[];return W(t.extraCssClass)&&e.push(t.extraCssClass),e.push("ag-row"),e.push(t.rowFocused?"ag-row-focus":"ag-row-no-focus"),t.fadeRowIn&&e.push("ag-opacity-zero"),e.push(t.rowIsEven?"ag-row-even":"ag-row-odd"),t.rowNode.isRowPinned()&&e.push("ag-row-pinned"),t.rowNode.isSelected()&&e.push("ag-row-selected"),t.rowNode.footer&&e.push("ag-row-footer"),e.push("ag-row-level-"+t.rowLevel),t.rowNode.stub&&e.push("ag-row-loading"),t.fullWidthRow&&e.push("ag-full-width-row"),t.expandable&&(e.push("ag-row-group"),e.push(t.rowNode.expanded?"ag-row-group-expanded":"ag-row-group-contracted")),t.rowNode.dragging&&e.push("ag-row-dragging"),Cd(e,this.processClassesFromGridOptions(t.rowNode)),Cd(e,this.preProcessRowClassRules(t.rowNode)),e.push(t.printLayout?"ag-row-position-relative":"ag-row-position-absolute"),t.firstRowOnPage&&e.push("ag-row-first"),t.lastRowOnPage&&e.push("ag-row-last"),t.fullWidthRow&&(t.pinned==="left"&&e.push("ag-cell-last-left-pinned"),t.pinned==="right"&&e.push("ag-cell-first-right-pinned")),e},r.prototype.processClassesFromGridOptions=function(t){var e=[],o=function(l){typeof l=="string"?e.push(l):Array.isArray(l)&&l.forEach(function(c){return e.push(c)})},n=this.gridOptionsService.get("rowClass");if(n){if(typeof n=="function")return console.warn("AG Grid: rowClass should not be a function, please use getRowClass instead"),[];o(n)}var i=this.gridOptionsService.getCallback("getRowClass");if(i){var s={data:t.data,node:t,rowIndex:t.rowIndex},a=i(s);o(a)}return e},r.prototype.preProcessRowClassRules=function(t){var e=[];return this.processRowClassRules(t,function(o){e.push(o)},function(o){}),e},r.prototype.processRowClassRules=function(t,e,o){var n={data:t.data,node:t,rowIndex:t.rowIndex,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context};this.stylingService.processClassRules(void 0,this.gridOptionsService.get("rowClassRules"),n,e,o)},r.prototype.calculateRowLevel=function(t){return t.group?t.level:t.parent?t.parent.level+1:0},Nu([y("stylingService")],r.prototype,"stylingService",void 0),Nu([y("gridOptionsService")],r.prototype,"gridOptionsService",void 0),r=Nu([ne("rowCssClassCalculator")],r),r}(),b5=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),Ka=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},A5=function(r){b5(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.init=function(){var e=this;this.isAccentedSort=this.gridOptionsService.get("accentedSort"),this.primaryColumnsSortGroups=this.gridOptionsService.isColumnsSortingCoupledToGroup(),this.addManagedPropertyListener("accentedSort",function(o){return e.isAccentedSort=o.currentValue}),this.addManagedPropertyListener("autoGroupColumnDef",function(){return e.primaryColumnsSortGroups=e.gridOptionsService.isColumnsSortingCoupledToGroup()})},t.prototype.doFullSort=function(e,o){var n=function(s,a){return{currentPos:a,rowNode:s}},i=e.map(n);return i.sort(this.compareRowNodes.bind(this,o)),i.map(function(s){return s.rowNode})},t.prototype.compareRowNodes=function(e,o,n){for(var i=o.rowNode,s=n.rowNode,a=0,l=e.length;a<l;a++){var c=e[a],u=c.sort==="desc",d=this.getValue(i,c.column),p=this.getValue(s,c.column),h=void 0,f=this.getComparator(c,i);f?h=f(d,p,i,s,u):h=Ae.defaultComparator(d,p,this.isAccentedSort);var g=!isNaN(h);if(g&&h!==0)return c.sort==="asc"?h:h*-1}return o.currentPos-n.currentPos},t.prototype.getComparator=function(e,o){var n=e.column,i=n.getColDef().comparator;if(i!=null)return i;if(n.getColDef().showRowGroup){var s=!o.group&&n.getColDef().field;if(s){var a=this.columnModel.getPrimaryColumn(s);if(a)return a.getColDef().comparator}}},t.prototype.getValue=function(e,o){var n,i;if(!this.primaryColumnsSortGroups)return this.valueService.getValue(o,e,!1,!1);var s=e.rowGroupColumn===o;if(s){var a=this.gridOptionsService.isGroupUseEntireRow(this.columnModel.isPivotActive());if(a){var l=(n=e.allLeafChildren)===null||n===void 0?void 0:n[0];return l?this.valueService.getValue(o,l,!1,!1):void 0}var c=this.columnModel.getGroupDisplayColumnForGroup(o.getId());return c?(i=e.groupData)===null||i===void 0?void 0:i[c.getId()]:void 0}if(!(e.group&&o.getColDef().showRowGroup))return this.valueService.getValue(o,e,!1,!1)},Ka([y("valueService")],t.prototype,"valueService",void 0),Ka([y("columnModel")],t.prototype,"columnModel",void 0),Ka([Q],t.prototype,"init",null),t=Ka([ne("rowNodeSorter")],t),t}(K),O5=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),P5=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},I5=function(r){O5(t,r);function t(){var o=r!==null&&r.apply(this,arguments)||this;return o.ready=!1,o.readyCallbacks=[],o}e=t,t.prototype.checkReady=function(){if(this.ready=this.gridCtrl!=null&&this.gridBodyCtrl!=null&&this.centerRowContainerCtrl!=null&&this.leftRowContainerCtrl!=null&&this.rightRowContainerCtrl!=null&&this.bottomCenterRowContainerCtrl!=null&&this.bottomLeftRowContainerCtrl!=null&&this.bottomRightRowContainerCtrl!=null&&this.topCenterRowContainerCtrl!=null&&this.topLeftRowContainerCtrl!=null&&this.topRightRowContainerCtrl!=null&&this.stickyTopCenterRowContainerCtrl!=null&&this.stickyTopLeftRowContainerCtrl!=null&&this.stickyTopRightRowContainerCtrl!=null&&this.centerHeaderRowContainerCtrl!=null&&this.leftHeaderRowContainerCtrl!=null&&this.rightHeaderRowContainerCtrl!=null&&this.fakeHScrollComp!=null&&this.fakeVScrollComp!=null&&this.gridHeaderCtrl!=null,this.ready){var o=this.createReadyParams();this.readyCallbacks.forEach(function(n){return n(o)}),this.readyCallbacks.length=0}},t.prototype.whenReady=function(o){this.ready?o(this.createReadyParams()):this.readyCallbacks.push(o)},t.prototype.createReadyParams=function(){return{centerRowContainerCtrl:this.centerRowContainerCtrl,leftRowContainerCtrl:this.leftRowContainerCtrl,rightRowContainerCtrl:this.rightRowContainerCtrl,bottomCenterRowContainerCtrl:this.bottomCenterRowContainerCtrl,bottomLeftRowContainerCtrl:this.bottomLeftRowContainerCtrl,bottomRightRowContainerCtrl:this.bottomRightRowContainerCtrl,topCenterRowContainerCtrl:this.topCenterRowContainerCtrl,topLeftRowContainerCtrl:this.topLeftRowContainerCtrl,topRightRowContainerCtrl:this.topRightRowContainerCtrl,stickyTopCenterRowContainerCtrl:this.stickyTopCenterRowContainerCtrl,stickyTopLeftRowContainerCtrl:this.stickyTopLeftRowContainerCtrl,stickyTopRightRowContainerCtrl:this.stickyTopRightRowContainerCtrl,centerHeaderRowContainerCtrl:this.centerHeaderRowContainerCtrl,leftHeaderRowContainerCtrl:this.leftHeaderRowContainerCtrl,rightHeaderRowContainerCtrl:this.rightHeaderRowContainerCtrl,fakeHScrollComp:this.fakeHScrollComp,fakeVScrollComp:this.fakeVScrollComp,gridBodyCtrl:this.gridBodyCtrl,gridCtrl:this.gridCtrl,gridHeaderCtrl:this.gridHeaderCtrl}},t.prototype.registerFakeHScrollComp=function(o){this.fakeHScrollComp=o,this.checkReady()},t.prototype.registerFakeVScrollComp=function(o){this.fakeVScrollComp=o,this.checkReady()},t.prototype.registerGridHeaderCtrl=function(o){this.gridHeaderCtrl=o,this.checkReady()},t.prototype.registerCenterRowContainerCtrl=function(o){this.centerRowContainerCtrl=o,this.checkReady()},t.prototype.registerLeftRowContainerCtrl=function(o){this.leftRowContainerCtrl=o,this.checkReady()},t.prototype.registerRightRowContainerCtrl=function(o){this.rightRowContainerCtrl=o,this.checkReady()},t.prototype.registerTopCenterRowContainerCtrl=function(o){this.topCenterRowContainerCtrl=o,this.checkReady()},t.prototype.registerTopLeftRowContainerCon=function(o){this.topLeftRowContainerCtrl=o,this.checkReady()},t.prototype.registerTopRightRowContainerCtrl=function(o){this.topRightRowContainerCtrl=o,this.checkReady()},t.prototype.registerStickyTopCenterRowContainerCtrl=function(o){this.stickyTopCenterRowContainerCtrl=o,this.checkReady()},t.prototype.registerStickyTopLeftRowContainerCon=function(o){this.stickyTopLeftRowContainerCtrl=o,this.checkReady()},t.prototype.registerStickyTopRightRowContainerCtrl=function(o){this.stickyTopRightRowContainerCtrl=o,this.checkReady()},t.prototype.registerBottomCenterRowContainerCtrl=function(o){this.bottomCenterRowContainerCtrl=o,this.checkReady()},t.prototype.registerBottomLeftRowContainerCtrl=function(o){this.bottomLeftRowContainerCtrl=o,this.checkReady()},t.prototype.registerBottomRightRowContainerCtrl=function(o){this.bottomRightRowContainerCtrl=o,this.checkReady()},t.prototype.registerHeaderContainer=function(o,n){switch(n){case"left":this.leftHeaderRowContainerCtrl=o;break;case"right":this.rightHeaderRowContainerCtrl=o;break;default:this.centerHeaderRowContainerCtrl=o;break}this.checkReady()},t.prototype.registerGridBodyCtrl=function(o){this.gridBodyCtrl=o,this.checkReady()},t.prototype.registerGridCtrl=function(o){this.gridCtrl=o,this.checkReady()},t.prototype.getFakeHScrollComp=function(){return this.fakeHScrollComp},t.prototype.getFakeVScrollComp=function(){return this.fakeVScrollComp},t.prototype.getGridHeaderCtrl=function(){return this.gridHeaderCtrl},t.prototype.getGridCtrl=function(){return this.gridCtrl},t.prototype.getCenterRowContainerCtrl=function(){return this.centerRowContainerCtrl},t.prototype.getTopCenterRowContainerCtrl=function(){return this.topCenterRowContainerCtrl},t.prototype.getBottomCenterRowContainerCtrl=function(){return this.bottomCenterRowContainerCtrl},t.prototype.getStickyTopCenterRowContainerCtrl=function(){return this.stickyTopCenterRowContainerCtrl},t.prototype.getGridBodyCtrl=function(){return this.gridBodyCtrl},t.prototype.getHeaderRowContainerCtrls=function(){return[this.leftHeaderRowContainerCtrl,this.rightHeaderRowContainerCtrl,this.centerHeaderRowContainerCtrl]},t.prototype.getHeaderRowContainerCtrl=function(o){switch(o){case"left":return this.leftHeaderRowContainerCtrl;case"right":return this.rightHeaderRowContainerCtrl;default:return this.centerHeaderRowContainerCtrl}};var e;return t.NAME="ctrlsService",t=e=P5([ne(e.NAME)],t),t}(K),D5=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),M5=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},L5=function(r){D5(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.registry={},e}return t.prototype.register=function(e){this.registry[e.controllerName]=e.controllerClass},t.prototype.getInstance=function(e){var o=this.registry[e];if(o!=null)return new o},t=M5([ne("ctrlsFactory")],t),t}(K),x5=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),ws=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},rw=function(r){x5(t,r);function t(e,o){var n=r.call(this,e)||this;return n.direction=o,n.hideTimeout=null,n}return t.prototype.postConstruct=function(){this.addManagedListener(this.eventService,w.EVENT_SCROLL_VISIBILITY_CHANGED,this.onScrollVisibilityChanged.bind(this)),this.onScrollVisibilityChanged(),this.addOrRemoveCssClass("ag-apple-scrollbar",Jp()||ai())},t.prototype.initialiseInvisibleScrollbar=function(){this.invisibleScrollbar===void 0&&(this.invisibleScrollbar=eh(),this.invisibleScrollbar&&(this.hideAndShowInvisibleScrollAsNeeded(),this.addActiveListenerToggles()))},t.prototype.addActiveListenerToggles=function(){var e=this,o=["mouseenter","mousedown","touchstart"],n=["mouseleave","touchend"],i=this.getGui();o.forEach(function(s){return e.addManagedListener(i,s,function(){return e.addOrRemoveCssClass("ag-scrollbar-active",!0)})}),n.forEach(function(s){return e.addManagedListener(i,s,function(){return e.addOrRemoveCssClass("ag-scrollbar-active",!1)})})},t.prototype.onScrollVisibilityChanged=function(){var e=this;this.invisibleScrollbar===void 0&&this.initialiseInvisibleScrollbar(),this.animationFrameService.requestAnimationFrame(function(){return e.setScrollVisible()})},t.prototype.hideAndShowInvisibleScrollAsNeeded=function(){var e=this;this.addManagedListener(this.eventService,w.EVENT_BODY_SCROLL,function(o){o.direction===e.direction&&(e.hideTimeout!==null&&(window.clearTimeout(e.hideTimeout),e.hideTimeout=null),e.addOrRemoveCssClass("ag-scrollbar-scrolling",!0))}),this.addManagedListener(this.eventService,w.EVENT_BODY_SCROLL_END,function(){e.hideTimeout=window.setTimeout(function(){e.addOrRemoveCssClass("ag-scrollbar-scrolling",!1),e.hideTimeout=null},400)})},t.prototype.attemptSettingScrollPosition=function(e){var o=this,n=this.getViewport();Hp(function(){return io(n)},function(){return o.setScrollPosition(e)},100)},t.prototype.getViewport=function(){return this.eViewport},t.prototype.getContainer=function(){return this.eContainer},t.prototype.onScrollCallback=function(e){this.addManagedListener(this.getViewport(),"scroll",e)},ws([ee("eViewport")],t.prototype,"eViewport",void 0),ws([ee("eContainer")],t.prototype,"eContainer",void 0),ws([y("scrollVisibleService")],t.prototype,"scrollVisibleService",void 0),ws([y("ctrlsService")],t.prototype,"ctrlsService",void 0),ws([y("animationFrameService")],t.prototype,"animationFrameService",void 0),t}(Re),F5=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),_s=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},N5=function(r){F5(t,r);function t(){return r.call(this,t.TEMPLATE,"horizontal")||this}return t.prototype.postConstruct=function(){var e=this;r.prototype.postConstruct.call(this);var o=this.setFakeHScrollSpacerWidths.bind(this);this.addManagedListener(this.eventService,w.EVENT_DISPLAYED_COLUMNS_CHANGED,o),this.addManagedListener(this.eventService,w.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,o),this.addManagedListener(this.eventService,w.EVENT_PINNED_ROW_DATA_CHANGED,this.onPinnedRowDataChanged.bind(this)),this.addManagedPropertyListener("domLayout",o),this.ctrlsService.registerFakeHScrollComp(this),this.createManagedBean(new _h(function(n){return e.eContainer.style.width="".concat(n,"px")})),this.addManagedPropertyListeners(["suppressHorizontalScroll"],this.onScrollVisibilityChanged.bind(this))},t.prototype.initialiseInvisibleScrollbar=function(){this.invisibleScrollbar===void 0&&(this.enableRtl=this.gridOptionsService.get("enableRtl"),r.prototype.initialiseInvisibleScrollbar.call(this),this.invisibleScrollbar&&this.refreshCompBottom())},t.prototype.onPinnedRowDataChanged=function(){this.refreshCompBottom()},t.prototype.refreshCompBottom=function(){if(this.invisibleScrollbar){var e=this.pinnedRowModel.getPinnedBottomTotalHeight();this.getGui().style.bottom="".concat(e,"px")}},t.prototype.onScrollVisibilityChanged=function(){r.prototype.onScrollVisibilityChanged.call(this),this.setFakeHScrollSpacerWidths()},t.prototype.setFakeHScrollSpacerWidths=function(){var e=this.scrollVisibleService.isVerticalScrollShowing(),o=this.columnModel.getDisplayedColumnsRightWidth(),n=!this.enableRtl&&e,i=this.gridOptionsService.getScrollbarWidth();n&&(o+=i),Ao(this.eRightSpacer,o),this.eRightSpacer.classList.toggle("ag-scroller-corner",o<=i);var s=this.columnModel.getDisplayedColumnsLeftWidth(),a=this.enableRtl&&e;a&&(s+=i),Ao(this.eLeftSpacer,s),this.eLeftSpacer.classList.toggle("ag-scroller-corner",s<=i)},t.prototype.setScrollVisible=function(){var e=this.scrollVisibleService.isHorizontalScrollShowing(),o=this.invisibleScrollbar,n=this.gridOptionsService.get("suppressHorizontalScroll"),i=e&&this.gridOptionsService.getScrollbarWidth()||0,s=i===0&&o?16:i,a=n?0:s;this.addOrRemoveCssClass("ag-scrollbar-invisible",o),Oi(this.getGui(),a),Oi(this.eViewport,a),Oi(this.eContainer,a),this.setDisplayed(e,{skipAriaHidden:!0})},t.prototype.getScrollPosition=function(){return qs(this.getViewport(),this.enableRtl)},t.prototype.setScrollPosition=function(e){io(this.getViewport())||this.attemptSettingScrollPosition(e),Qs(this.getViewport(),e,this.enableRtl)},t.TEMPLATE=`<div class="ag-body-horizontal-scroll" aria-hidden="true">
            <div class="ag-horizontal-left-spacer" ref="eLeftSpacer"></div>
            <div class="ag-body-horizontal-scroll-viewport" ref="eViewport">
                <div class="ag-body-horizontal-scroll-container" ref="eContainer"></div>
            </div>
            <div class="ag-horizontal-right-spacer" ref="eRightSpacer"></div>
        </div>`,_s([ee("eLeftSpacer")],t.prototype,"eLeftSpacer",void 0),_s([ee("eRightSpacer")],t.prototype,"eRightSpacer",void 0),_s([y("columnModel")],t.prototype,"columnModel",void 0),_s([y("pinnedRowModel")],t.prototype,"pinnedRowModel",void 0),_s([Q],t.prototype,"postConstruct",null),t}(rw),G5=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),Gu=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},k5=function(r){G5(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.postConstruct=function(){var e=this.checkContainerWidths.bind(this);this.addManagedListener(this.eventService,w.EVENT_DISPLAYED_COLUMNS_CHANGED,e),this.addManagedListener(this.eventService,w.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,e),this.addManagedPropertyListener("domLayout",e)},t.prototype.checkContainerWidths=function(){var e=this.gridOptionsService.isDomLayout("print"),o=e?0:this.columnModel.getDisplayedColumnsLeftWidth(),n=e?0:this.columnModel.getDisplayedColumnsRightWidth();o!=this.leftWidth&&(this.leftWidth=o,this.eventService.dispatchEvent({type:w.EVENT_LEFT_PINNED_WIDTH_CHANGED})),n!=this.rightWidth&&(this.rightWidth=n,this.eventService.dispatchEvent({type:w.EVENT_RIGHT_PINNED_WIDTH_CHANGED}))},t.prototype.getPinnedRightWidth=function(){return this.rightWidth},t.prototype.getPinnedLeftWidth=function(){return this.leftWidth},Gu([y("columnModel")],t.prototype,"columnModel",void 0),Gu([Q],t.prototype,"postConstruct",null),t=Gu([ne("pinnedWidthService")],t),t}(K),H5=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),Ya=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},V5=function(r){H5(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.events=[],e}return t.prototype.postConstruct=function(){this.rowModel.getType()=="clientSide"&&(this.clientSideRowModel=this.rowModel)},t.prototype.dispatchExpanded=function(e){var o=this;if(this.clientSideRowModel==null){this.eventService.dispatchEvent(e);return}this.events.push(e);var n=function(){o.clientSideRowModel&&o.clientSideRowModel.onRowGroupOpened(),o.events.forEach(function(i){return o.eventService.dispatchEvent(i)}),o.events=[]};this.dispatchExpandedDebounced==null&&(this.dispatchExpandedDebounced=this.animationFrameService.debounce(n)),this.dispatchExpandedDebounced()},Ya([y("animationFrameService")],t.prototype,"animationFrameService",void 0),Ya([y("rowModel")],t.prototype,"rowModel",void 0),Ya([Q],t.prototype,"postConstruct",null),t=Ya([ne("rowNodeEventThrottle")],t),t}(K),B5={},Bn=function(r,t){var e;return((e=t.rowModelType)!==null&&e!==void 0?e:"clientSide")==="clientSide"?{module:ie.RowGroupingModule}:null},U5={enableRowGroup:Bn,rowGroup:Bn,rowGroupIndex:Bn,enablePivot:Bn,enableValue:Bn,pivot:Bn,pivotIndex:Bn,aggFunc:Bn,cellEditor:function(r){return r.cellEditor==="agRichSelect"||r.cellEditor==="agRichSelectCellEditor"?{module:ie.RichSelectModule}:null},menuTabs:function(r){var t,e=["columnsMenuTab","generalMenuTab"];return!((t=r.menuTabs)===null||t===void 0)&&t.some(function(o){return e.includes(o)})?{module:ie.MenuModule}:null},columnsMenuParams:{module:[ie.MenuModule,ie.ColumnsToolPanelModule]},headerCheckboxSelection:{supportedRowModels:["clientSide","serverSide"],dependencies:function(r,t){var e=t.rowSelection;return e==="multiple"?null:"headerCheckboxSelection is only supported with rowSelection=multiple"}},headerCheckboxSelectionFilteredOnly:{supportedRowModels:["clientSide"],dependencies:function(r,t){var e=t.rowSelection;return e==="multiple"?null:"headerCheckboxSelectionFilteredOnly is only supported with rowSelection=multiple"}},headerCheckboxSelectionCurrentPageOnly:{supportedRowModels:["clientSide"],dependencies:function(r,t){var e=t.rowSelection;return e==="multiple"?null:"headerCheckboxSelectionCurrentPageOnly is only supported with rowSelection=multiple"}},children:function(){return gr}},gr={objectName:"colDef",allProperties:$F.ALL_PROPERTIES,docsUrl:"column-properties/",deprecations:B5,validations:U5},Tg=function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var o=e.call(r),n,i=[],s;try{for(;(t===void 0||t-- >0)&&!(n=o.next()).done;)i.push(n.value)}catch(a){s={error:a}}finally{try{n&&!n.done&&(e=o.return)&&e.call(o)}finally{if(s)throw s.error}}return i},bg=function(r,t,e){if(e||arguments.length===2)for(var o=0,n=t.length,i;o<n;o++)(i||!(o in t))&&(i||(i=Array.prototype.slice.call(t,0,o)),i[o]=t[o]);return r.concat(i||Array.prototype.slice.call(t))},j5={enableChartToolPanelsButton:{version:"29",message:"The Chart Tool Panels button is now enabled by default. To hide the Chart Tool Panels button and display the hamburger button instead, set suppressChartToolPanelsButton=true."},functionsPassive:{version:"29.2"},onColumnRowGroupChangeRequest:{version:"29.2"},onColumnPivotChangeRequest:{version:"29.2"},onColumnValueChangeRequest:{version:"29.2"},onColumnAggFuncChangeRequest:{version:"29.2"},serverSideFilterAllLevels:{version:"30",message:"All server-side group levels are now filtered by default. This can be toggled using `serverSideOnlyRefreshFilteredGroups`."},suppressAggAtRootLevel:{version:"30",message:"The root level aggregation is now suppressed by default. This can be toggled using  `alwaysAggregateAtRootLevel`."},excludeHiddenColumnsFromQuickFilter:{version:"30",message:"Hidden columns are now excluded from the Quick Filter by default. This can be toggled using `includeHiddenColumnsInQuickFilter`."},enterMovesDown:{version:"30",renamed:"enterNavigatesVertically"},enterMovesDownAfterEdit:{version:"30",renamed:"enterNavigatesVerticallyAfterEdit"},suppressParentsInRowNodes:{version:"30.2",message:"Using suppressParentsInRowNodes is no longer recommended. To serialize nodes it is now recommended to instead remove the parent node reference before serialization."},advancedFilterModel:{version:"31",message:"Use `initialState.filter.advancedFilterModel` instead."},suppressAsyncEvents:{version:"31",message:"Events should be handled asynchronously."}},W5={suppressContextMenu:!1,preventDefaultOnContextMenu:!1,allowContextMenuWithControlKey:!1,suppressMenuHide:!1,enableBrowserTooltips:!1,tooltipTrigger:"hover",tooltipShowDelay:2e3,tooltipHideDelay:1e4,tooltipMouseTrack:!1,tooltipInteraction:!1,copyHeadersToClipboard:!1,copyGroupHeadersToClipboard:!1,clipboardDelimiter:"	",suppressCopyRowsToClipboard:!1,suppressCopySingleCellRanges:!1,suppressLastEmptyLineOnPaste:!1,suppressClipboardPaste:!1,suppressClipboardApi:!1,suppressCutToClipboard:!1,maintainColumnOrder:!1,suppressFieldDotNotation:!1,allowDragFromColumnsToolPanel:!1,suppressMovableColumns:!1,suppressColumnMoveAnimation:!1,suppressDragLeaveHidesColumns:!1,suppressRowGroupHidesColumns:!1,suppressAutoSize:!1,autoSizePadding:20,skipHeaderOnAutoSize:!1,singleClickEdit:!1,suppressClickEdit:!1,readOnlyEdit:!1,stopEditingWhenCellsLoseFocus:!1,enterNavigatesVertically:!1,enterNavigatesVerticallyAfterEdit:!1,enableCellEditingOnBackspace:!1,undoRedoCellEditing:!1,undoRedoCellEditingLimit:10,suppressCsvExport:!1,suppressExcelExport:!1,cacheQuickFilter:!1,includeHiddenColumnsInQuickFilter:!1,excludeChildrenWhenTreeDataFiltering:!1,enableAdvancedFilter:!1,includeHiddenColumnsInAdvancedFilter:!1,enableCharts:!1,suppressChartToolPanelsButton:!1,masterDetail:!1,keepDetailRows:!1,keepDetailRowsCount:10,detailRowAutoHeight:!1,tabIndex:0,rowBuffer:10,valueCache:!1,valueCacheNeverExpires:!1,enableCellExpressions:!1,suppressTouch:!1,suppressFocusAfterRefresh:!1,suppressAsyncEvents:!1,suppressBrowserResizeObserver:!1,suppressPropertyNamesCheck:!1,suppressChangeDetection:!1,debug:!1,suppressLoadingOverlay:!1,suppressNoRowsOverlay:!1,pagination:!1,paginationPageSize:100,paginationPageSizeSelector:!0,paginationAutoPageSize:!1,paginateChildRows:!1,suppressPaginationPanel:!1,pivotMode:!1,pivotPanelShow:"never",pivotDefaultExpanded:0,pivotSuppressAutoColumn:!1,suppressExpandablePivotGroups:!1,functionsReadOnly:!1,suppressAggFuncInHeader:!1,alwaysAggregateAtRootLevel:!1,aggregateOnlyChangedColumns:!1,suppressAggFilteredOnly:!1,removePivotHeaderRowWhenSingleValueColumn:!1,animateRows:!0,enableCellChangeFlash:!1,cellFlashDelay:500,cellFadeDelay:1e3,allowShowChangeAfterFilter:!1,domLayout:"normal",ensureDomOrder:!1,enableRtl:!1,suppressColumnVirtualisation:!1,suppressMaxRenderedRowRestriction:!1,suppressRowVirtualisation:!1,rowDragManaged:!1,suppressRowDrag:!1,suppressMoveWhenRowDragging:!1,rowDragEntireRow:!1,rowDragMultiRow:!1,embedFullWidthRows:!1,groupDisplayType:"singleColumn",groupDefaultExpanded:0,groupMaintainOrder:!1,groupSelectsChildren:!1,groupIncludeTotalFooter:!1,groupSuppressBlankHeader:!1,groupSelectsFiltered:!1,showOpenedGroup:!1,groupRemoveSingleChildren:!1,groupRemoveLowestSingleChildren:!1,groupHideOpenParents:!1,groupAllowUnbalanced:!1,rowGroupPanelShow:"never",suppressMakeColumnVisibleAfterUnGroup:!1,treeData:!1,rowGroupPanelSuppressSort:!1,suppressGroupRowsSticky:!1,rowModelType:"clientSide",asyncTransactionWaitMillis:50,suppressModelUpdateAfterUpdateTransaction:!1,cacheOverflowSize:1,infiniteInitialRowCount:1,serverSideInitialRowCount:1,suppressServerSideInfiniteScroll:!1,cacheBlockSize:100,maxBlocksInCache:-1,maxConcurrentDatasourceRequests:2,blockLoadDebounceMillis:0,purgeClosedRowNodes:!1,serverSideSortAllLevels:!1,serverSideOnlyRefreshFilteredGroups:!1,serverSideSortOnServer:!1,serverSideFilterOnServer:!1,serverSidePivotResultFieldSeparator:"_",viewportRowModelPageSize:5,viewportRowModelBufferSize:5,alwaysShowHorizontalScroll:!1,alwaysShowVerticalScroll:!1,debounceVerticalScrollbar:!1,suppressHorizontalScroll:!1,suppressScrollOnNewData:!1,suppressScrollWhenPopupsAreOpen:!1,suppressAnimationFrame:!1,suppressMiddleClickScrolls:!1,suppressPreventDefaultOnMouseWheel:!1,rowMultiSelectWithClick:!1,suppressRowDeselection:!1,suppressRowClickSelection:!1,suppressCellFocus:!1,suppressMultiRangeSelection:!1,enableCellTextSelection:!1,enableRangeSelection:!1,enableRangeHandle:!1,enableFillHandle:!1,fillHandleDirection:"xy",suppressClearOnFillReduction:!1,accentedSort:!1,unSortIcon:!1,suppressMultiSort:!1,alwaysMultiSort:!1,suppressMaintainUnsortedOrder:!1,suppressRowHoverHighlight:!1,suppressRowTransform:!1,columnHoverHighlight:!1,deltaSort:!1,enableGroupEdit:!1,suppressGroupMaintainValueType:!1,functionsPassive:!1,groupLockGroupColumns:0},z5={sideBar:{module:ie.SideBarModule},statusBar:{module:ie.StatusBarModule},enableCharts:{module:ie.GridChartsModule},getMainMenuItems:{module:ie.MenuModule},getContextMenuItems:{module:ie.MenuModule},allowContextMenuWithControlKey:{module:ie.MenuModule},enableAdvancedFilter:{module:ie.AdvancedFilterModule},treeData:{supportedRowModels:["clientSide","serverSide"],module:ie.RowGroupingModule,dependencies:function(r){var t,e=(t=r.rowModelType)!==null&&t!==void 0?t:"clientSide";switch(e){case"clientSide":var o="treeData requires 'getDataPath' in the ".concat(e," row model.");return r.getDataPath?null:o;case"serverSide":var n="treeData requires 'isServerSideGroup' and 'getServerSideGroupKey' in the ".concat(e," row model.");return r.isServerSideGroup&&r.getServerSideGroupKey?null:n}return null}},masterDetail:{module:ie.MasterDetailModule},enableRangeSelection:{module:ie.RangeSelectionModule},enableRangeHandle:{dependencies:{enableRangeSelection:[!0]}},enableFillHandle:{dependencies:{enableRangeSelection:[!0]}},groupDefaultExpanded:{supportedRowModels:["clientSide"]},groupIncludeFooter:{supportedRowModels:["clientSide","serverSide"],dependencies:function(r){var t,e=(t=r.rowModelType)!==null&&t!==void 0?t:"clientSide";switch(e){case"clientSide":return null;case"serverSide":var o="groupIncludeFooter is not supported alongside suppressServerSideInfiniteScroll";return r.suppressServerSideInfiniteScroll?o:null}return null}},groupIncludeTotalFooter:{supportedRowModels:["clientSide"]},groupRemoveSingleChildren:{dependencies:{groupHideOpenParents:[void 0,!1],groupRemoveLowestSingleChildren:[void 0,!1]}},groupRemoveLowestSingleChildren:{dependencies:{groupHideOpenParents:[void 0,!1],groupRemoveSingleChildren:[void 0,!1]}},groupSelectsChildren:{dependencies:{rowSelection:["multiple"]}},suppressParentsInRowNodes:{dependencies:{groupSelectsChildren:[void 0,!1]}},viewportDatasource:{supportedRowModels:["viewport"],module:ie.ViewportRowModelModule},serverSideDatasource:{supportedRowModels:["serverSide"],module:ie.ServerSideRowModelModule},cacheBlockSize:{supportedRowModels:["serverSide","infinite"]},datasource:{supportedRowModels:["infinite"],module:ie.InfiniteRowModelModule},rowData:{supportedRowModels:["clientSide"],module:ie.ClientSideRowModelModule},columnDefs:function(){return gr},defaultColDef:function(){return gr},defaultColGroupDef:function(){return gr},autoGroupColumnDef:function(){return gr}},$5={objectName:"gridOptions",allProperties:bg(bg([],Tg(Xo.ALL_PROPERTIES),!1),Tg(_o.EVENT_CALLBACKS),!1),propertyExceptions:["api","columnApi"],docsUrl:"grid-options/",deprecations:j5,validations:z5},Cn=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},qa=function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var o=e.call(r),n,i=[],s;try{for(;(t===void 0||t-- >0)&&!(n=o.next()).done;)i.push(n.value)}catch(a){s={error:a}}finally{try{n&&!n.done&&(e=o.return)&&e.call(o)}finally{if(s)throw s.error}}return i},ku=function(r,t,e){if(e||arguments.length===2)for(var o=0,n=t.length,i;o<n;o++)(i||!(o in t))&&(i||(i=Array.prototype.slice.call(t,0,o)),i[o]=t[o]);return r.concat(i||Array.prototype.slice.call(t))},sw=function(){function r(){var e=this;this.destroyed=!1,this.domDataKey="__AG_"+Math.random().toString(),this.propertyEventService=new si,this.globalEventHandlerFactory=function(o){return function(n,i){if(!e.destroyed){var s=t.alwaysSyncGlobalEvents.has(n);if(!(s&&!o||!s&&o)){var a=_o.getCallbackForEvent(n);typeof e.gridOptions[a]=="function"&&e.gridOptions[a](i)}}}}}t=r,Object.defineProperty(r.prototype,"context",{get:function(){return this.gridOptions.context},enumerable:!1,configurable:!0}),r.prototype.init=function(){this.columnApi=new iw(this.api);var e=!this.get("suppressAsyncEvents");this.eventService.addGlobalListener(this.globalEventHandlerFactory().bind(this),e),this.eventService.addGlobalListener(this.globalEventHandlerFactory(!0).bind(this),!1),this.getScrollbarWidth()},r.prototype.destroy=function(){this.destroyed=!0,this.columnApi=void 0},r.prototype.get=function(e){var o;return(o=this.gridOptions[e])!==null&&o!==void 0?o:W5[e]},r.prototype.getCallback=function(e){return this.mergeGridCommonParams(this.gridOptions[e])},r.prototype.exists=function(e){return W(this.gridOptions[e])},r.prototype.mergeGridCommonParams=function(e){var o=this;if(e){var n=function(i){var s=i;return s.api=o.api,s.columnApi=o.columnApi,s.context=o.context,e(s)};return n}return e},r.toBoolean=function(e){return typeof e=="boolean"?e:typeof e=="string"?e.toUpperCase()==="TRUE"||e=="":!1},r.toNumber=function(e){if(typeof e=="number")return e;if(typeof e=="string"){var o=parseInt(e);return isNaN(o)?void 0:o}},r.toConstrainedNum=function(e,o){return function(n){var i=t.toNumber(n);if(!(i==null||i<e||i>o))return i}},r.getCoercedValue=function(e,o){var n=t.PROPERTY_COERCIONS.get(e);return n?n(o):o},r.getCoercedGridOptions=function(e){var o={};return Object.entries(e).forEach(function(n){var i=qa(n,2),s=i[0],a=i[1],l=t.getCoercedValue(s,a);o[s]=l}),o},r.prototype.updateGridOptions=function(e){var o=this,n=e.options,i=e.source,s=i===void 0?"api":i,a={id:t.changeSetId++,properties:[]},l=[];Object.entries(n).forEach(function(c){var u=qa(c,2),d=u[0],p=u[1];s==="api"&&oL[d]&&Ee("".concat(d," is an initial property and cannot be updated."));var h=t.getCoercedValue(d,p),f=typeof h=="object"&&s==="api",g=o.gridOptions[d];if(f||g!==h){o.gridOptions[d]=h;var _={type:d,currentValue:h,previousValue:g,changeSet:a,source:s};l.push(_)}}),this.validationService.processGridOptions(this.gridOptions),a.properties=l.map(function(c){return c.type}),l.forEach(function(c){o.gridOptions.debug&&console.log("AG Grid: Updated property ".concat(c.type," from ").concat(String(c.previousValue)," to ").concat(String(c.currentValue),".")),o.propertyEventService.dispatchEvent(c)})},r.prototype.addEventListener=function(e,o){this.propertyEventService.addEventListener(e,o)},r.prototype.removeEventListener=function(e,o){this.propertyEventService.removeEventListener(e,o)},r.prototype.getGridId=function(){return this.api.getGridId()},r.prototype.getScrollbarWidth=function(){if(this.scrollbarWidth==null){var e=typeof this.gridOptions.scrollbarWidth=="number"&&this.gridOptions.scrollbarWidth>=0,o=e?this.gridOptions.scrollbarWidth:lC();o!=null&&(this.scrollbarWidth=o,this.eventService.dispatchEvent({type:w.EVENT_SCROLLBAR_WIDTH_CHANGED}))}return this.scrollbarWidth},r.prototype.isRowModelType=function(e){return this.gridOptions.rowModelType===e||e==="clientSide"&&pe(this.gridOptions.rowModelType)},r.prototype.isDomLayout=function(e){var o,n=(o=this.gridOptions.domLayout)!==null&&o!==void 0?o:"normal";return n===e},r.prototype.isRowSelection=function(){return this.gridOptions.rowSelection==="single"||this.gridOptions.rowSelection==="multiple"},r.prototype.useAsyncEvents=function(){return!this.get("suppressAsyncEvents")},r.prototype.isGetRowHeightFunction=function(){return typeof this.gridOptions.getRowHeight=="function"},r.prototype.getRowHeightForNode=function(e,o,n){if(o===void 0&&(o=!1),n==null&&(n=this.environment.getDefaultRowHeight()),this.isGetRowHeightFunction()){if(o)return{height:n,estimated:!0};var i={node:e,data:e.data},s=this.getCallback("getRowHeight")(i);if(this.isNumeric(s))return s===0&&Ee("The return of `getRowHeight` cannot be zero. If the intention is to hide rows, use a filter instead."),{height:Math.max(1,s),estimated:!1}}if(e.detail&&this.get("masterDetail"))return this.getMasterDetailRowHeight();var a=this.gridOptions.rowHeight&&this.isNumeric(this.gridOptions.rowHeight)?this.gridOptions.rowHeight:n;return{height:a,estimated:!1}},r.prototype.getMasterDetailRowHeight=function(){return this.get("detailRowAutoHeight")?{height:1,estimated:!1}:this.isNumeric(this.gridOptions.detailRowHeight)?{height:this.gridOptions.detailRowHeight,estimated:!1}:{height:300,estimated:!1}},r.prototype.getRowHeightAsNumber=function(){if(!this.gridOptions.rowHeight||pe(this.gridOptions.rowHeight))return this.environment.getDefaultRowHeight();var e=this.environment.refreshRowHeightVariable();return e!==-1?e:(console.warn("AG Grid row height must be a number if not using standard row model"),this.environment.getDefaultRowHeight())},r.prototype.isNumeric=function(e){return!isNaN(e)&&typeof e=="number"&&isFinite(e)},r.prototype.getDomDataKey=function(){return this.domDataKey},r.prototype.getDomData=function(e,o){var n=e[this.getDomDataKey()];return n?n[o]:void 0},r.prototype.setDomData=function(e,o,n){var i=this.getDomDataKey(),s=e[i];pe(s)&&(s={},e[i]=s),s[o]=n},r.prototype.getDocument=function(){var e=null;return this.gridOptions.getDocument&&W(this.gridOptions.getDocument)?e=this.gridOptions.getDocument():this.eGridDiv&&(e=this.eGridDiv.ownerDocument),e&&W(e)?e:document},r.prototype.getWindow=function(){var e=this.getDocument();return e.defaultView||window},r.prototype.getRootNode=function(){return this.eGridDiv.getRootNode()},r.prototype.getAsyncTransactionWaitMillis=function(){return W(this.gridOptions.asyncTransactionWaitMillis)?this.gridOptions.asyncTransactionWaitMillis:50},r.prototype.isAnimateRows=function(){return this.get("ensureDomOrder")?!1:this.get("animateRows")},r.prototype.isGroupRowsSticky=function(){return!(this.get("suppressGroupRowsSticky")||this.get("paginateChildRows")||this.get("groupHideOpenParents"))},r.prototype.isColumnsSortingCoupledToGroup=function(){var e=this.gridOptions.autoGroupColumnDef;return!(e!=null&&e.comparator)&&!this.get("treeData")},r.prototype.getGroupAggFiltering=function(){var e=this.gridOptions.groupAggFiltering;if(typeof e=="function")return this.getCallback("groupAggFiltering");if(e===!0)return function(){return!0}},r.prototype.isGroupIncludeFooterTrueOrCallback=function(){var e=this.gridOptions.groupIncludeFooter;return e===!0||typeof e=="function"},r.prototype.getGroupIncludeFooter=function(){var e=this.gridOptions.groupIncludeFooter;return typeof e=="function"?this.getCallback("groupIncludeFooter"):e===!0?function(){return!0}:function(){return!1}},r.prototype.isGroupMultiAutoColumn=function(){return this.gridOptions.groupDisplayType?this.gridOptions.groupDisplayType==="multipleColumns":this.get("groupHideOpenParents")},r.prototype.isGroupUseEntireRow=function(e){return e?!1:this.gridOptions.groupDisplayType==="groupRows"};var t;return r.alwaysSyncGlobalEvents=new Set([w.EVENT_GRID_PRE_DESTROYED]),r.PROPERTY_COERCIONS=new Map(ku(ku(ku([],qa(Xo.BOOLEAN_PROPERTIES.map(function(e){return[e,t.toBoolean]})),!1),qa(Xo.NUMBER_PROPERTIES.map(function(e){return[e,t.toNumber]})),!1),[["groupAggFiltering",function(e){return typeof e=="function"?e:t.toBoolean(e)}],["pageSize",t.toConstrainedNum(1,Number.MAX_VALUE)],["autoSizePadding",t.toConstrainedNum(0,Number.MAX_VALUE)],["keepDetailRowsCount",t.toConstrainedNum(1,Number.MAX_VALUE)],["rowBuffer",t.toConstrainedNum(0,Number.MAX_VALUE)],["infiniteInitialRowCount",t.toConstrainedNum(1,Number.MAX_VALUE)],["cacheOverflowSize",t.toConstrainedNum(1,Number.MAX_VALUE)],["cacheBlockSize",t.toConstrainedNum(1,Number.MAX_VALUE)],["serverSideInitialRowCount",t.toConstrainedNum(1,Number.MAX_VALUE)],["viewportRowModelPageSize",t.toConstrainedNum(1,Number.MAX_VALUE)],["viewportRowModelBufferSize",t.toConstrainedNum(0,Number.MAX_VALUE)]],!1)),r.changeSetId=0,Cn([y("gridOptions")],r.prototype,"gridOptions",void 0),Cn([y("eventService")],r.prototype,"eventService",void 0),Cn([y("environment")],r.prototype,"environment",void 0),Cn([y("eGridDiv")],r.prototype,"eGridDiv",void 0),Cn([y("validationService")],r.prototype,"validationService",void 0),Cn([y("gridApi")],r.prototype,"api",void 0),Cn([Q],r.prototype,"init",null),Cn([zt],r.prototype,"destroy",null),r=t=Cn([ne("gridOptionsService")],r),r}(),K5=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),Y5=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},q5=function(r){K5(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getLocaleTextFunc=function(){var e=this.gridOptionsService.getCallback("getLocaleText");if(e)return function(n,i,s){var a={key:n,defaultValue:i,variableValues:s};return e(a)};var o=this.gridOptionsService.get("localeText");return function(n,i,s){var a=o&&o[n];if(a&&s&&s.length)for(var l=0;!(l>=s.length);){var c=a.indexOf("${variable}");if(c===-1)break;a=a.replace("${variable}",s[l++])}return a??i}},t=Y5([ne("localeService")],t),t}(K),Q5=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),X5=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},Z5=function(r){Q5(t,r);function t(){return r.call(this,t.TEMPLATE,"vertical")||this}return t.prototype.postConstruct=function(){r.prototype.postConstruct.call(this),this.createManagedBean(new ZC(this.eContainer)),this.ctrlsService.registerFakeVScrollComp(this),this.addManagedListener(this.eventService,w.EVENT_ROW_CONTAINER_HEIGHT_CHANGED,this.onRowContainerHeightChanged.bind(this))},t.prototype.setScrollVisible=function(){var e=this.scrollVisibleService.isVerticalScrollShowing(),o=this.invisibleScrollbar,n=e&&this.gridOptionsService.getScrollbarWidth()||0,i=n===0&&o?16:n;this.addOrRemoveCssClass("ag-scrollbar-invisible",o),Ao(this.getGui(),i),Ao(this.eViewport,i),Ao(this.eContainer,i),this.setDisplayed(e,{skipAriaHidden:!0})},t.prototype.onRowContainerHeightChanged=function(){var e=this.ctrlsService.getGridBodyCtrl(),o=e.getBodyViewportElement();this.eViewport.scrollTop!=o.scrollTop&&(this.eViewport.scrollTop=o.scrollTop)},t.prototype.getScrollPosition=function(){return this.getViewport().scrollTop},t.prototype.setScrollPosition=function(e){io(this.getViewport())||this.attemptSettingScrollPosition(e),this.getViewport().scrollTop=e},t.TEMPLATE=`<div class="ag-body-vertical-scroll" aria-hidden="true">
            <div class="ag-body-vertical-scroll-viewport" ref="eViewport">
                <div class="ag-body-vertical-scroll-container" ref="eContainer"></div>
            </div>
        </div>`,X5([Q],t.prototype,"postConstruct",null),t}(rw),J5=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),Zt=function(){return Zt=Object.assign||function(r){for(var t,e=1,o=arguments.length;e<o;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},Zt.apply(this,arguments)},mi=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},Yo=function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var o=e.call(r),n,i=[],s;try{for(;(t===void 0||t-- >0)&&!(n=o.next()).done;)i.push(n.value)}catch(a){s={error:a}}finally{try{n&&!n.done&&(e=o.return)&&e.call(o)}finally{if(s)throw s.error}}return i},Ss=function(r,t,e){if(e||arguments.length===2)for(var o=0,n=t.length,i;o<n;o++)(i||!(o in t))&&(i||(i=Array.prototype.slice.call(t,0,o)),i[o]=t[o]);return r.concat(i||Array.prototype.slice.call(t))},Ag={january:"January",february:"February",march:"March",april:"April",may:"May",june:"June",july:"July",august:"August",september:"September",october:"October",november:"November",december:"December"},Og=["january","february","march","april","may","june","july","august","september","october","november","december"],e9=function(r){J5(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.dataTypeDefinitions={},e.isWaitingForRowData=!1,e.isColumnTypeOverrideInDataTypeDefinitions=!1,e.columnStateUpdatesPendingInference={},e.columnStateUpdateListenerDestroyFuncs=[],e}return t.prototype.init=function(){var e=this;this.groupHideOpenParents=this.gridOptionsService.get("groupHideOpenParents"),this.addManagedPropertyListener("groupHideOpenParents",function(){e.groupHideOpenParents=e.gridOptionsService.get("groupHideOpenParents")}),this.processDataTypeDefinitions(),this.addManagedPropertyListener("dataTypeDefinitions",function(){e.processDataTypeDefinitions(),e.columnModel.recreateColumnDefs("gridOptionsChanged")})},t.prototype.processDataTypeDefinitions=function(){var e=this,o,n=this.getDefaultDataTypes();this.dataTypeDefinitions={},Object.entries(n).forEach(function(s){var a=Yo(s,2),l=a[0],c=a[1];e.dataTypeDefinitions[l]=Zt(Zt({},c),{groupSafeValueFormatter:e.createGroupSafeValueFormatter(c)})});var i=(o=this.gridOptionsService.get("dataTypeDefinitions"))!==null&&o!==void 0?o:{};this.dataTypeMatchers={},Object.entries(i).forEach(function(s){var a=Yo(s,2),l=a[0],c=a[1],u=e.processDataTypeDefinition(c,i,[l],n);u&&(e.dataTypeDefinitions[l]=u,c.dataTypeMatcher&&(e.dataTypeMatchers[l]=c.dataTypeMatcher))}),this.checkObjectValueHandlers(n),["dateString","text","number","boolean","date"].forEach(function(s){var a=e.dataTypeMatchers[s];a&&delete e.dataTypeMatchers[s],e.dataTypeMatchers[s]=a??n[s].dataTypeMatcher})},t.prototype.mergeDataTypeDefinitions=function(e,o){var n=Zt(Zt({},e),o);return e.columnTypes&&o.columnTypes&&o.appendColumnTypes&&(n.columnTypes=Ss(Ss([],Yo(this.convertColumnTypes(e.columnTypes)),!1),Yo(this.convertColumnTypes(o.columnTypes)),!1)),n},t.prototype.processDataTypeDefinition=function(e,o,n,i){var s,a=e.extendsDataType;if(e.columnTypes&&(this.isColumnTypeOverrideInDataTypeDefinitions=!0),e.extendsDataType===e.baseDataType){var l=i[a],c=o[a];if(l&&c&&(l=c),!this.validateDataTypeDefinition(e,l,a))return;s=this.mergeDataTypeDefinitions(l,e)}else{if(n.includes(a)){Ee('Data type definition hierarchies (via the "extendsDataType" property) cannot contain circular references.');return}var u=o[a];if(!this.validateDataTypeDefinition(e,u,a))return;var d=this.processDataTypeDefinition(u,o,Ss(Ss([],Yo(n),!1),[a],!1),i);if(!d)return;s=this.mergeDataTypeDefinitions(d,e)}return Zt(Zt({},s),{groupSafeValueFormatter:this.createGroupSafeValueFormatter(s)})},t.prototype.validateDataTypeDefinition=function(e,o,n){return o?o.baseDataType!==e.baseDataType?(Ee('The "baseDataType" property of a data type definition must match that of its parent.'),!1):!0:(Ee("The data type definition ".concat(n," does not exist.")),!1)},t.prototype.createGroupSafeValueFormatter=function(e){var o=this;if(e.valueFormatter)return function(n){var i,s;if(!((i=n.node)===null||i===void 0)&&i.group){var a=n.column.getAggFunc();if(a){if(a==="first"||a==="last")return e.valueFormatter(n);if(e.baseDataType==="number"&&a!=="count"){if(typeof n.value=="number")return e.valueFormatter(n);if(typeof n.value=="object"){if(!n.value)return;if("toNumber"in n.value)return e.valueFormatter(Zt(Zt({},n),{value:n.value.toNumber()}));if("value"in n.value)return e.valueFormatter(Zt(Zt({},n),{value:n.value.value}))}}}if(!o.gridOptionsService.get("suppressGroupMaintainValueType"))return}else if(o.groupHideOpenParents&&n.column.isRowGroupActive()){if(typeof n.value!="string"||!((s=e.dataTypeMatcher)===null||s===void 0)&&s.call(e,n.value))return e.valueFormatter(n);if(!o.gridOptionsService.get("suppressGroupMaintainValueType"))return}return e.valueFormatter(n)}},t.prototype.updateColDefAndGetDataTypeDefinitionColumnType=function(e,o,n){var i=o.cellDataType,s=o.field;if(i===void 0&&(i=e.cellDataType),(i==null||i===!0)&&(i=this.canInferCellDataType(e,o)?this.inferCellDataType(s,n):!1),!i){e.cellDataType=!1;return}var a=this.dataTypeDefinitions[i];if(!a){Ee('Missing data type definition - "'.concat(i,'"'));return}return e.cellDataType=i,a.groupSafeValueFormatter&&(e.valueFormatter=a.groupSafeValueFormatter),a.valueParser&&(e.valueParser=a.valueParser),a.suppressDefaultProperties||this.setColDefPropertiesForBaseDataType(e,a,n),a.columnTypes},t.prototype.updateColDefAndGetColumnType=function(e,o,n){var i,s,a=this.updateColDefAndGetDataTypeDefinitionColumnType(e,o,n),l=(s=(i=o.type)!==null&&i!==void 0?i:a)!==null&&s!==void 0?s:e.type;return e.type=l,l?this.convertColumnTypes(l):void 0},t.prototype.addColumnListeners=function(e){if(this.isWaitingForRowData){var o=this.columnStateUpdatesPendingInference[e.getColId()];if(o){var n=function(i){o.add(i.key)};e.addEventListener(We.EVENT_STATE_UPDATED,n),this.columnStateUpdateListenerDestroyFuncs.push(function(){return e.removeEventListener(We.EVENT_STATE_UPDATED,n)})}}},t.prototype.canInferCellDataType=function(e,o){var n=this,i;if(this.rowModel.getType()!=="clientSide")return!1;var s={cellRenderer:!0,valueGetter:!0,valueParser:!0,refData:!0};if(this.doColDefPropsPreventInference(o,s))return!1;var a=o.type===null?e.type:o.type;if(a){var l=(i=this.gridOptionsService.get("columnTypes"))!==null&&i!==void 0?i:{},c=this.convertColumnTypes(a).some(function(u){var d=l[u.trim()];return d&&n.doColDefPropsPreventInference(d,s)});if(c)return!1}return!this.doColDefPropsPreventInference(e,s)},t.prototype.doColDefPropsPreventInference=function(e,o){var n=this;return[["cellRenderer","agSparklineCellRenderer"],["valueGetter",void 0],["valueParser",void 0],["refData",void 0]].some(function(i){var s=Yo(i,2),a=s[0],l=s[1];return n.doesColDefPropPreventInference(e,o,a,l)})},t.prototype.doesColDefPropPreventInference=function(e,o,n,i){if(!o[n])return!1;var s=e[n];return s===null?(o[n]=!1,!1):i===void 0?!!s:s===i},t.prototype.inferCellDataType=function(e,o){var n;if(e){var i,s=this.getInitialData();if(s){var a=e.indexOf(".")>=0&&!this.gridOptionsService.get("suppressFieldDotNotation");i=yr(s,e,a)}else this.initWaitForRowData(o);if(i!=null){var l=Yo((n=Object.entries(this.dataTypeMatchers).find(function(u){var d=Yo(u,2);d[0];var p=d[1];return p(i)}))!==null&&n!==void 0?n:["object"],1),c=l[0];return c}}},t.prototype.getInitialData=function(){var e=this.gridOptionsService.get("rowData");if(e!=null&&e.length)return e[0];if(this.initialData)return this.initialData;var o=this.rowModel.getRootNode().allLeafChildren;return o!=null&&o.length?o[0].data:null},t.prototype.initWaitForRowData=function(e){var o=this;if(this.columnStateUpdatesPendingInference[e]=new Set,!this.isWaitingForRowData){this.isWaitingForRowData=!0;var n=this.isColumnTypeOverrideInDataTypeDefinitions;n&&this.columnModel.queueResizeOperations();var i=this.addManagedListener(this.eventService,w.EVENT_ROW_DATA_UPDATE_STARTED,function(s){var a=s.firstRowData;if(a){i==null||i(),o.isWaitingForRowData=!1,o.processColumnsPendingInference(a,n),o.columnStateUpdatesPendingInference={},n&&o.columnModel.processResizeOperations();var l={type:w.EVENT_DATA_TYPES_INFERRED};o.eventService.dispatchEvent(l)}})}},t.prototype.isPendingInference=function(){return this.isWaitingForRowData},t.prototype.processColumnsPendingInference=function(e,o){var n=this;this.initialData=e;var i=[];this.columnStateUpdateListenerDestroyFuncs.forEach(function(l){return l()}),this.columnStateUpdateListenerDestroyFuncs=[];var s={},a={};Object.entries(this.columnStateUpdatesPendingInference).forEach(function(l){var c=Yo(l,2),u=c[0],d=c[1],p=n.columnModel.getGridColumn(u);if(p){var h=p.getColDef();if(n.columnModel.resetColumnDefIntoColumn(p,"cellDataTypeInferred")){var f=p.getColDef();if(o&&f.type&&f.type!==h.type){var g=n.getUpdatedColumnState(p,d);g.rowGroup&&g.rowGroupIndex==null&&(s[u]=g),g.pivot&&g.pivotIndex==null&&(a[u]=g),i.push(g)}}}}),o&&i.push.apply(i,Ss([],Yo(this.columnModel.generateColumnStateForRowGroupAndPivotIndexes(s,a)),!1)),i.length&&this.columnModel.applyColumnState({state:i},"cellDataTypeInferred"),this.initialData=null},t.prototype.getUpdatedColumnState=function(e,o){var n=this.columnModel.getColumnStateFromColDef(e);return o.forEach(function(i){delete n[i],i==="rowGroup"?delete n.rowGroupIndex:i==="pivot"&&delete n.pivotIndex}),n},t.prototype.checkObjectValueHandlers=function(e){var o=this.dataTypeDefinitions.object,n=e.object;this.hasObjectValueParser=o.valueParser!==n.valueParser,this.hasObjectValueFormatter=o.valueFormatter!==n.valueFormatter},t.prototype.convertColumnTypes=function(e){var o=[];if(e instanceof Array){var n=e.some(function(i){return typeof i!="string"});n?console.warn("if colDef.type is supplied an array it should be of type 'string[]'"):o=e}else typeof e=="string"?o=e.split(","):console.warn("colDef.type should be of type 'string' | 'string[]'");return o},t.prototype.getDateStringTypeDefinition=function(){return this.dataTypeDefinitions.dateString},t.prototype.getDateParserFunction=function(){return this.getDateStringTypeDefinition().dateParser},t.prototype.getDateFormatterFunction=function(){return this.getDateStringTypeDefinition().dateFormatter},t.prototype.getDataTypeDefinition=function(e){var o=e.getColDef();if(o.cellDataType)return this.dataTypeDefinitions[o.cellDataType]},t.prototype.getBaseDataType=function(e){var o;return(o=this.getDataTypeDefinition(e))===null||o===void 0?void 0:o.baseDataType},t.prototype.checkType=function(e,o){var n;if(o==null)return!0;var i=(n=this.getDataTypeDefinition(e))===null||n===void 0?void 0:n.dataTypeMatcher;return i?i(o):!0},t.prototype.validateColDef=function(e){e.cellDataType==="object"&&(e.valueFormatter===this.dataTypeDefinitions.object.groupSafeValueFormatter&&!this.hasObjectValueFormatter&&Ee('Cell data type is "object" but no value formatter has been provided. Please either provide an object data type definition with a value formatter, or set "colDef.valueFormatter"'),e.editable&&e.valueParser===this.dataTypeDefinitions.object.valueParser&&!this.hasObjectValueParser&&Ee('Cell data type is "object" but no value parser has been provided. Please either provide an object data type definition with a value parser, or set "colDef.valueParser"'))},t.prototype.setColDefPropertiesForBaseDataType=function(e,o,n){var i=this,s=function(d,p,h){var f=d.getColDef().valueFormatter;return f===o.groupSafeValueFormatter&&(f=o.valueFormatter),i.valueFormatterService.formatValue(d,p,h,f)},a=Se.__isRegistered(ie.SetFilterModule,this.context.getGridId()),l=this.localeService.getLocaleTextFunc(),c=function(d){var p=e.filterParams;e.filterParams=typeof p=="object"?Zt(Zt({},p),d):d};switch(o.baseDataType){case"number":{e.cellEditor="agNumberCellEditor",a&&c({comparator:function(d,p){var h=d==null?0:parseInt(d),f=p==null?0:parseInt(p);return h===f?0:h>f?1:-1}});break}case"boolean":{e.cellEditor="agCheckboxCellEditor",e.cellRenderer="agCheckboxCellRenderer",e.suppressKeyboardEvent=function(d){return!!d.colDef.editable&&d.event.key===N.SPACE},c(a?{valueFormatter:function(d){return W(d.value)?l(String(d.value),d.value?"True":"False"):l("blanks","(Blanks)")}}:{maxNumConditions:1,filterOptions:["empty",{displayKey:"true",displayName:"True",predicate:function(d,p){return p},numberOfInputs:0},{displayKey:"false",displayName:"False",predicate:function(d,p){return p===!1},numberOfInputs:0}]});break}case"date":{e.cellEditor="agDateCellEditor",e.keyCreator=function(d){return s(d.column,d.node,d.value)},a&&c({valueFormatter:function(d){var p=s(d.column,d.node,d.value);return W(p)?p:l("blanks","(Blanks)")},treeList:!0,treeListFormatter:function(d,p){if(p===1&&d!=null){var h=Og[Number(d)-1];return l(h,Ag[h])}return d??l("blanks","(Blanks)")}});break}case"dateString":{e.cellEditor="agDateStringCellEditor",e.keyCreator=function(d){return s(d.column,d.node,d.value)};var u=this.getDateParserFunction();c(a?{valueFormatter:function(d){var p=s(d.column,d.node,d.value);return W(p)?p:l("blanks","(Blanks)")},treeList:!0,treeListPathGetter:function(d){var p=u(d??void 0);return p?[String(p.getFullYear()),String(p.getMonth()+1),String(p.getDate())]:null},treeListFormatter:function(d,p){if(p===1&&d!=null){var h=Og[Number(d)-1];return l(h,Ag[h])}return d??l("blanks","(Blanks)")}}:{comparator:function(d,p){var h=u(p);return p==null||h<d?-1:h>d?1:0}});break}case"object":{e.cellEditorParams={useFormatter:!0},e.comparator=function(d,p){var h=i.columnModel.getPrimaryColumn(n),f=h==null?void 0:h.getColDef();if(!h||!f)return 0;var g=d==null?"":s(h,null,d),_=p==null?"":s(h,null,p);return g===_?0:g>_?1:-1},e.keyCreator=function(d){return s(d.column,d.node,d.value)},a?c({valueFormatter:function(d){var p=s(d.column,d.node,d.value);return W(p)?p:l("blanks","(Blanks)")}}):e.filterValueGetter=function(d){return s(d.column,d.node,i.valueService.getValue(d.column,d.node))};break}}},t.prototype.getDefaultDataTypes=function(){var e=function(n){return!!n.match("^\\d{4}-\\d{2}-\\d{2}$")},o=this.localeService.getLocaleTextFunc();return{number:{baseDataType:"number",valueParser:function(n){return n.newValue===""?null:Number(n.newValue)},valueFormatter:function(n){return n.value==null?"":typeof n.value!="number"||isNaN(n.value)?(console.log("was",typeof n.value,n.value,n),o("invalidNumber","Invalid Number")):String(n.value)},dataTypeMatcher:function(n){return typeof n=="number"}},text:{baseDataType:"text",valueParser:function(n){return n.newValue===""?null:zs(n.newValue)},dataTypeMatcher:function(n){return typeof n=="string"}},boolean:{baseDataType:"boolean",valueParser:function(n){return n.newValue==null?n.newValue:n.newValue===""?null:String(n.newValue).toLowerCase()==="true"},valueFormatter:function(n){return n.value==null?"":String(n.value)},dataTypeMatcher:function(n){return typeof n=="boolean"}},date:{baseDataType:"date",valueParser:function(n){return to(n.newValue==null?null:String(n.newValue))},valueFormatter:function(n){var i;return n.value==null?"":!(n.value instanceof Date)||isNaN(n.value.getTime())?o("invalidDate","Invalid Date"):(i=bo(n.value,!1))!==null&&i!==void 0?i:""},dataTypeMatcher:function(n){return n instanceof Date}},dateString:{baseDataType:"dateString",dateParser:function(n){var i;return(i=to(n))!==null&&i!==void 0?i:void 0},dateFormatter:function(n){var i;return(i=bo(n??null,!1))!==null&&i!==void 0?i:void 0},valueParser:function(n){return e(String(n.newValue))?n.newValue:null},valueFormatter:function(n){return e(String(n.value))?n.value:""},dataTypeMatcher:function(n){return typeof n=="string"&&e(n)}},object:{baseDataType:"object",valueParser:function(){return null},valueFormatter:function(n){var i;return(i=zs(n.value))!==null&&i!==void 0?i:""}}}},mi([y("rowModel")],t.prototype,"rowModel",void 0),mi([y("columnModel")],t.prototype,"columnModel",void 0),mi([y("columnUtils")],t.prototype,"columnUtils",void 0),mi([y("valueService")],t.prototype,"valueService",void 0),mi([y("valueFormatterService")],t.prototype,"valueFormatterService",void 0),mi([Q],t.prototype,"init",null),t=mi([ne("dataTypeService")],t),t}(K),t9=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),Pg=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},o9=function(r){t9(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.parseValue=function(e,o,n,i){var s=e.getColDef(),a={node:o,data:o==null?void 0:o.data,oldValue:i,newValue:n,colDef:s,column:e,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context},l=s.valueParser;return W(l)?typeof l=="function"?l(a):this.expressionService.evaluate(l,a):n},Pg([y("expressionService")],t.prototype,"expressionService",void 0),t=Pg([ne("valueParserService")],t),t}(K),n9=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),Es=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},i9=function(r){n9(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.waitingForColumns=!1,e}return t.prototype.postConstruct=function(){var e=this;this.addManagedPropertyListener("columnDefs",function(o){return e.setColumnDefs(o)})},t.prototype.start=function(){var e=this;this.ctrlsService.whenReady(function(){var o=e.gridOptionsService.get("columnDefs");o?e.setColumnsAndData(o):e.waitingForColumns=!0,e.gridReady()})},t.prototype.setColumnsAndData=function(e){this.columnModel.setColumnDefs(e??[],"gridInitializing"),this.rowModel.start()},t.prototype.gridReady=function(){var e=this;this.dispatchGridReadyEvent();var o=Se.__isRegistered(ie.EnterpriseCoreModule,this.context.getGridId()),n=new Rh("AG Grid",function(){return e.gridOptionsService.get("debug")});n.log("initialised successfully, enterprise = ".concat(o))},t.prototype.dispatchGridReadyEvent=function(){var e={type:w.EVENT_GRID_READY};this.eventService.dispatchEvent(e)},t.prototype.setColumnDefs=function(e){var o,n=this.gridOptionsService.get("columnDefs");if(n){if(this.waitingForColumns){this.waitingForColumns=!1,this.setColumnsAndData(n);return}var i=(o=e.source)!==null&&o!==void 0?o:"api";this.columnModel.setColumnDefs(n,i)}},Es([y("ctrlsService")],t.prototype,"ctrlsService",void 0),Es([y("columnModel")],t.prototype,"columnModel",void 0),Es([y("rowModel")],t.prototype,"rowModel",void 0),Es([Q],t.prototype,"postConstruct",null),t=Es([ne("syncService")],t),t}(K),r9=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),Rs=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},s9=function(r){r9(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.manuallyDisplayed=!1,e}return t.prototype.postConstruct=function(){var e=this;this.addManagedListener(this.eventService,w.EVENT_ROW_DATA_UPDATED,function(){return e.onRowDataUpdated()}),this.addManagedListener(this.eventService,w.EVENT_NEW_COLUMNS_LOADED,function(){return e.onNewColumnsLoaded()})},t.prototype.registerOverlayWrapperComp=function(e){this.overlayWrapperComp=e,(!this.gridOptionsService.get("columnDefs")||this.gridOptionsService.isRowModelType("clientSide")&&!this.gridOptionsService.get("rowData"))&&this.showLoadingOverlay()},t.prototype.showLoadingOverlay=function(){if(!this.gridOptionsService.get("suppressLoadingOverlay")){var e={},o=this.userComponentFactory.getLoadingOverlayCompDetails(e);this.showOverlay(o,"ag-overlay-loading-wrapper")}},t.prototype.showNoRowsOverlay=function(){if(!this.gridOptionsService.get("suppressNoRowsOverlay")){var e={},o=this.userComponentFactory.getNoRowsOverlayCompDetails(e);this.showOverlay(o,"ag-overlay-no-rows-wrapper")}},t.prototype.showOverlay=function(e,o){var n=e.newAgStackInstance();this.manuallyDisplayed=this.columnModel.isReady()&&!this.paginationProxy.isEmpty(),this.overlayWrapperComp.showOverlay(n,o)},t.prototype.hideOverlay=function(){this.manuallyDisplayed=!1,this.overlayWrapperComp.hideOverlay()},t.prototype.showOrHideOverlay=function(){var e=this.paginationProxy.isEmpty(),o=this.gridOptionsService.get("suppressNoRowsOverlay");e&&!o?this.showNoRowsOverlay():this.hideOverlay()},t.prototype.onRowDataUpdated=function(){this.showOrHideOverlay()},t.prototype.onNewColumnsLoaded=function(){this.columnModel.isReady()&&!this.paginationProxy.isEmpty()&&!this.manuallyDisplayed&&this.hideOverlay()},Rs([y("userComponentFactory")],t.prototype,"userComponentFactory",void 0),Rs([y("paginationProxy")],t.prototype,"paginationProxy",void 0),Rs([y("columnModel")],t.prototype,"columnModel",void 0),Rs([Q],t.prototype,"postConstruct",null),t=Rs([ne("overlayService")],t),t}(K),a9=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),Yn=function(){return Yn=Object.assign||function(r){for(var t,e=1,o=arguments.length;e<o;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},Yn.apply(this,arguments)},Co=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},l9=function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var o=e.call(r),n,i=[],s;try{for(;(t===void 0||t-- >0)&&!(n=o.next()).done;)i.push(n.value)}catch(a){s={error:a}}finally{try{n&&!n.done&&(e=o.return)&&e.call(o)}finally{if(s)throw s.error}}return i},c9=function(r){a9(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.suppressEvents=!0,e.queuedUpdateSources=new Set,e.dispatchStateUpdateEventDebounced=Eo(function(){return e.dispatchQueuedStateUpdateEvents()},0),e}return t.prototype.postConstruct=function(){var e=this,o;this.isClientSideRowModel=this.rowModel.getType()==="clientSide",this.cachedState=(o=this.gridOptionsService.get("initialState"))!==null&&o!==void 0?o:{},this.ctrlsService.whenReady(function(){return e.setupStateOnGridReady()});var n=this.addManagedListener(this.eventService,w.EVENT_NEW_COLUMNS_LOADED,function(a){var l=a.source;l==="gridInitializing"&&(n==null||n(),e.setupStateOnColumnsInitialised())}),i=this.addManagedListener(this.eventService,w.EVENT_ROW_COUNT_READY,function(){i==null||i(),e.setupStateOnRowCountReady()}),s=this.addManagedListener(this.eventService,w.EVENT_FIRST_DATA_RENDERED,function(){s==null||s(),e.setupStateOnFirstDataRendered(),e.suppressEvents=!1,e.dispatchStateUpdateEvent(["gridInitializing"])})},t.prototype.getState=function(){return this.cachedState},t.prototype.setupStateOnGridReady=function(){var e=this;this.updateCachedState("sideBar",this.getSideBarState()),this.addManagedListener(this.eventService,w.EVENT_TOOL_PANEL_VISIBLE_CHANGED,function(){return e.updateCachedState("sideBar",e.getSideBarState())}),this.addManagedListener(this.eventService,w.EVENT_SIDE_BAR_UPDATED,function(){return e.updateCachedState("sideBar",e.getSideBarState())})},t.prototype.setupStateOnColumnsInitialised=function(){var e=this,o,n=(o=this.gridOptionsService.get("initialState"))!==null&&o!==void 0?o:{},i=n.filter,s=n.columnGroup;this.setColumnState(n),s&&this.setColumnGroupState(s);var a=this.gridOptionsService.get("advancedFilterModel");(i||a)&&this.setFilterState(i,a),this.updateColumnState(["aggregation","columnOrder","columnPinning","columnSizing","columnVisibility","pivot","pivot","rowGroup","sort"]),this.updateCachedState("columnGroup",this.getColumnGroupState()),this.updateCachedState("filter",this.getFilterState()),this.addManagedListener(this.eventService,w.EVENT_COLUMN_VALUE_CHANGED,function(){return e.updateColumnState(["aggregation"])}),this.addManagedListener(this.eventService,w.EVENT_COLUMN_MOVED,function(){return e.updateColumnState(["columnOrder"])}),this.addManagedListener(this.eventService,w.EVENT_COLUMN_PINNED,function(){return e.updateColumnState(["columnPinning"])}),this.addManagedListener(this.eventService,w.EVENT_COLUMN_RESIZED,function(){return e.updateColumnState(["columnSizing"])}),this.addManagedListener(this.eventService,w.EVENT_COLUMN_VISIBLE,function(){return e.updateColumnState(["columnVisibility"])}),this.addManagedListener(this.eventService,w.EVENT_COLUMN_PIVOT_CHANGED,function(){return e.updateColumnState(["pivot"])}),this.addManagedListener(this.eventService,w.EVENT_COLUMN_PIVOT_MODE_CHANGED,function(){return e.updateColumnState(["pivot"])}),this.addManagedListener(this.eventService,w.EVENT_COLUMN_ROW_GROUP_CHANGED,function(){return e.updateColumnState(["rowGroup"])}),this.addManagedListener(this.eventService,w.EVENT_SORT_CHANGED,function(){return e.updateColumnState(["sort"])}),this.addManagedListener(this.eventService,w.EVENT_NEW_COLUMNS_LOADED,function(){return e.updateColumnState(["aggregation","columnOrder","columnPinning","columnSizing","columnVisibility","pivot","pivot","rowGroup","sort"])}),this.addManagedListener(this.eventService,w.EVENT_COLUMN_GROUP_OPENED,function(){return e.updateCachedState("columnGroup",e.getColumnGroupState())}),this.addManagedListener(this.eventService,w.EVENT_FILTER_CHANGED,function(){return e.updateCachedState("filter",e.getFilterState())})},t.prototype.setupStateOnRowCountReady=function(){var e=this,o,n=(o=this.gridOptionsService.get("initialState"))!==null&&o!==void 0?o:{},i=n.rowGroupExpansion,s=n.rowSelection,a=n.pagination;i&&this.setRowGroupExpansionState(i),s&&this.setRowSelectionState(s),a&&this.setPaginationState(a),this.updateCachedState("rowGroupExpansion",this.getRowGroupExpansionState()),this.updateCachedState("rowSelection",this.getRowSelectionState()),this.updateCachedState("pagination",this.getPaginationState()),this.addManagedListener(this.eventService,w.EVENT_ROW_GROUP_OPENED,function(){return e.updateCachedState("rowGroupExpansion",e.getRowGroupExpansionState())}),this.addManagedListener(this.eventService,w.EVENT_SELECTION_CHANGED,function(){return e.updateCachedState("rowSelection",e.getRowSelectionState())}),this.addManagedListener(this.eventService,w.EVENT_PAGINATION_CHANGED,function(l){(l.newPage||l.newPageSize)&&e.updateCachedState("pagination",e.getPaginationState())})},t.prototype.setupStateOnFirstDataRendered=function(){var e=this,o,n=(o=this.gridOptionsService.get("initialState"))!==null&&o!==void 0?o:{},i=n.scroll,s=n.rangeSelection,a=n.focusedCell;a&&this.setFocusedCellState(a),s&&this.setRangeSelectionState(s),i&&this.setScrollState(i),this.updateCachedState("sideBar",this.getSideBarState()),this.updateCachedState("focusedCell",this.getFocusedCellState()),this.updateCachedState("rangeSelection",this.getRangeSelectionState()),this.updateCachedState("scroll",this.getScrollState()),this.addManagedListener(this.eventService,w.EVENT_CELL_FOCUSED,function(){return e.updateCachedState("focusedCell",e.getFocusedCellState())}),this.addManagedListener(this.eventService,w.EVENT_RANGE_SELECTION_CHANGED,function(l){l.finished&&e.updateCachedState("rangeSelection",e.getRangeSelectionState())}),this.addManagedListener(this.eventService,w.EVENT_BODY_SCROLL_END,function(){return e.updateCachedState("scroll",e.getScrollState())})},t.prototype.getColumnState=function(){for(var e=this.columnModel.isPivotMode(),o=[],n=[],i=[],s=[],a=[],l=[],c=[],u=[],d=[],p=this.columnModel.getColumnState(),h=0;h<p.length;h++){var f=p[h],g=f.colId,_=f.sort,C=f.sortIndex,E=f.rowGroup,T=f.rowGroupIndex,P=f.aggFunc,A=f.pivot,b=f.pivotIndex,I=f.pinned,F=f.hide,U=f.width,k=f.flex;d.push(g),_&&(o[C??0]={colId:g,sort:_}),E&&(n[T??0]=g),typeof P=="string"&&i.push({colId:g,aggFunc:P}),A&&(s[b??0]=g),I&&(I==="right"?l:a).push(g),F&&c.push(g),(k||U)&&u.push({colId:g,flex:k??void 0,width:U})}return{sort:o.length?{sortModel:o}:void 0,rowGroup:n.length?{groupColIds:n}:void 0,aggregation:i.length?{aggregationModel:i}:void 0,pivot:s.length||e?{pivotMode:e,pivotColIds:s}:void 0,columnPinning:a.length||l.length?{leftColIds:a,rightColIds:l}:void 0,columnVisibility:c.length?{hiddenColIds:c}:void 0,columnSizing:u.length?{columnSizingModel:u}:void 0,columnOrder:d.length?{orderedColIds:d}:void 0}},t.prototype.setColumnState=function(e){var o=e.sort,n=e.rowGroup,i=e.aggregation,s=e.pivot,a=e.columnPinning,l=e.columnVisibility,c=e.columnSizing,u=e.columnOrder,d={},p={},h=function(C){var E=d[C];return E||(E={colId:C},d[C]=E,E)};o&&(o.sortModel.forEach(function(C,E){var T=C.colId,P=C.sort,A=h(T);A.sort=P,A.sortIndex=E}),p.sort=null,p.sortIndex=null),n&&(n.groupColIds.forEach(function(C,E){var T=h(C);T.rowGroup=!0,T.rowGroupIndex=E}),p.rowGroup=null,p.rowGroupIndex=null),i&&(i.aggregationModel.forEach(function(C){var E=C.colId,T=C.aggFunc;h(E).aggFunc=T}),p.aggFunc=null),s&&(s.pivotColIds.forEach(function(C,E){var T=h(C);T.pivot=!0,T.pivotIndex=E}),p.pivot=null,p.pivotIndex=null,this.gridOptionsService.updateGridOptions({options:{pivotMode:s.pivotMode},source:"gridInitializing"})),a&&(a.leftColIds.forEach(function(C){h(C).pinned="left"}),a.rightColIds.forEach(function(C){h(C).pinned="right"}),p.pinned=null),l&&(l.hiddenColIds.forEach(function(C){h(C).hide=!0}),p.hide=null),c&&(c.columnSizingModel.forEach(function(C){var E=C.colId,T=C.flex,P=C.width,A=h(E);A.flex=T??null,A.width=P}),p.flex=null);var f=u==null?void 0:u.orderedColIds,g=!!(f!=null&&f.length),_=g?f.map(function(C){return h(C)}):Object.values(d);_.length&&this.columnModel.applyColumnState({state:_,applyOrder:g,defaultState:p},"gridInitializing")},t.prototype.getColumnGroupState=function(){var e=this.columnModel.getColumnGroupState(),o=[];return e.forEach(function(n){var i=n.groupId,s=n.open;s&&o.push(i)}),o.length?{openColumnGroupIds:o}:void 0},t.prototype.setColumnGroupState=function(e){var o=e.openColumnGroupIds,n=new Set(o),i=this.columnModel.getColumnGroupState(),s=i.map(function(a){var l=a.groupId;return{groupId:l,open:n.has(l)}});this.columnModel.setColumnGroupState(s,"gridInitializing")},t.prototype.getFilterState=function(){var e,o=this.filterManager.getFilterModel();o&&Object.keys(o).length===0&&(o=void 0);var n=(e=this.filterManager.getAdvancedFilterModel())!==null&&e!==void 0?e:void 0;return o||n?{filterModel:o,advancedFilterModel:n}:void 0},t.prototype.setFilterState=function(e,o){var n=e??{advancedFilterModel:o},i=n.filterModel,s=n.advancedFilterModel;i&&this.filterManager.setFilterModel(i,"columnFilter"),s&&this.filterManager.setAdvancedFilterModel(s)},t.prototype.getRangeSelectionState=function(){var e,o=(e=this.rangeService)===null||e===void 0?void 0:e.getCellRanges().map(function(n){var i=n.id,s=n.type,a=n.startRow,l=n.endRow,c=n.columns,u=n.startColumn;return{id:i,type:s,startRow:a,endRow:l,colIds:c.map(function(d){return d.getColId()}),startColId:u.getColId()}});return o!=null&&o.length?{cellRanges:o}:void 0},t.prototype.setRangeSelectionState=function(e){var o=this,n;if(this.gridOptionsService.get("enableRangeSelection")){var i=e.cellRanges.map(function(s){return Yn(Yn({},s),{columns:s.colIds.map(function(a){return o.columnModel.getGridColumn(a)}),startColumn:o.columnModel.getGridColumn(s.startColId)})});(n=this.rangeService)===null||n===void 0||n.setCellRanges(i)}},t.prototype.getScrollState=function(){var e,o,n;if(this.isClientSideRowModel){var i=(e=this.ctrlsService.getGridBodyCtrl())===null||e===void 0?void 0:e.getScrollFeature(),s=((o=i==null?void 0:i.getHScrollPosition())!==null&&o!==void 0?o:{left:0}).left,a=((n=i==null?void 0:i.getVScrollPosition())!==null&&n!==void 0?n:{top:0}).top;return a||s?{top:a,left:s}:void 0}},t.prototype.setScrollState=function(e){var o;if(this.isClientSideRowModel){var n=e.top,i=e.left;(o=this.ctrlsService.getGridBodyCtrl())===null||o===void 0||o.getScrollFeature().setScrollPosition(n,i)}},t.prototype.getSideBarState=function(){var e,o;return(o=(e=this.sideBarService)===null||e===void 0?void 0:e.getSideBarComp())===null||o===void 0?void 0:o.getState()},t.prototype.getFocusedCellState=function(){if(this.isClientSideRowModel){var e=this.focusService.getFocusedCell();if(e){var o=e.column,n=e.rowIndex,i=e.rowPinned;return{colId:o.getColId(),rowIndex:n,rowPinned:i}}}},t.prototype.setFocusedCellState=function(e){if(this.isClientSideRowModel){var o=e.colId,n=e.rowIndex,i=e.rowPinned;this.focusService.setFocusedCell({column:this.columnModel.getGridColumn(o),rowIndex:n,rowPinned:i,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0})}},t.prototype.getPaginationState=function(){var e=this.paginationProxy.getCurrentPage(),o=this.gridOptionsService.get("paginationAutoPageSize")?void 0:this.paginationProxy.getPageSize();if(!(!e&&!o))return{page:e,pageSize:o}},t.prototype.setPaginationState=function(e){e.pageSize&&!this.gridOptionsService.get("paginationAutoPageSize")&&this.paginationProxy.setPageSize(e.pageSize,"initialState"),typeof e.page=="number"&&this.paginationProxy.setPage(e.page)},t.prototype.getRowSelectionState=function(){var e,o=this.selectionService.getSelectionState(),n=!o||!Array.isArray(o)&&(o.selectAll===!1||o.selectAllChildren===!1)&&!(!((e=o==null?void 0:o.toggledNodes)===null||e===void 0)&&e.length);return n?void 0:o},t.prototype.setRowSelectionState=function(e){this.selectionService.setSelectionState(e,"gridInitializing")},t.prototype.getRowGroupExpansionState=function(){var e=this.expansionService.getExpandedRows();return e.length?{expandedRowGroupIds:e}:void 0},t.prototype.setRowGroupExpansionState=function(e){this.expansionService.expandRows(e.expandedRowGroupIds)},t.prototype.updateColumnState=function(e){var o=this,n=this.getColumnState(),i=!1;Object.entries(n).forEach(function(s){var a=l9(s,2),l=a[0],c=a[1];gd(c,o.cachedState[l])||(i=!0)}),this.cachedState=Yn(Yn({},this.cachedState),n),i&&this.dispatchStateUpdateEvent(e)},t.prototype.updateCachedState=function(e,o){var n,i=this.cachedState[e];this.cachedState=Yn(Yn({},this.cachedState),(n={},n[e]=o,n)),gd(o,i)||this.dispatchStateUpdateEvent([e])},t.prototype.dispatchStateUpdateEvent=function(e){var o=this;this.suppressEvents||(e.forEach(function(n){return o.queuedUpdateSources.add(n)}),this.dispatchStateUpdateEventDebounced())},t.prototype.dispatchQueuedStateUpdateEvents=function(){var e=Array.from(this.queuedUpdateSources);this.queuedUpdateSources.clear();var o={type:w.EVENT_STATE_UPDATED,sources:e,state:this.cachedState};this.eventService.dispatchEvent(o)},Co([y("filterManager")],t.prototype,"filterManager",void 0),Co([Le("rangeService")],t.prototype,"rangeService",void 0),Co([y("ctrlsService")],t.prototype,"ctrlsService",void 0),Co([Le("sideBarService")],t.prototype,"sideBarService",void 0),Co([y("focusService")],t.prototype,"focusService",void 0),Co([y("columnModel")],t.prototype,"columnModel",void 0),Co([y("paginationProxy")],t.prototype,"paginationProxy",void 0),Co([y("rowModel")],t.prototype,"rowModel",void 0),Co([y("selectionService")],t.prototype,"selectionService",void 0),Co([y("expansionService")],t.prototype,"expansionService",void 0),Co([Q],t.prototype,"postConstruct",null),t=Co([ne("stateService")],t),t}(K),u9=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),Hu=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},yi=function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var o=e.call(r),n,i=[],s;try{for(;(t===void 0||t-- >0)&&!(n=o.next()).done;)i.push(n.value)}catch(a){s={error:a}}finally{try{n&&!n.done&&(e=o.return)&&e.call(o)}finally{if(s)throw s.error}}return i},Ts=function(r,t,e){if(e||arguments.length===2)for(var o=0,n=t.length,i;o<n;o++)(i||!(o in t))&&(i||(i=Array.prototype.slice.call(t,0,o)),i[o]=t[o]);return r.concat(i||Array.prototype.slice.call(t))},d9=function(r){u9(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.init=function(){this.processGridOptions(this.gridOptions)},t.prototype.processGridOptions=function(e){this.processOptions(e,$5)},t.prototype.processColumnDefs=function(e){this.processOptions(e,gr)},t.prototype.processOptions=function(e,o){var n=this,i=o.validations,s=o.deprecations,a=o.allProperties,l=o.propertyExceptions,c=o.objectName,u=o.docsUrl;a&&this.gridOptions.suppressPropertyNamesCheck!==!0&&this.checkProperties(e,Ts(Ts([],yi(l??[]),!1),yi(Object.keys(s)),!1),a,c,u);var d=new Set,p=Object.keys(e);p.forEach(function(h){var f,g=s[h];if(g)if("renamed"in g){var _=g.renamed,C=g.version;d.add("As of v".concat(C,", ").concat(String(h)," is deprecated. Please use ").concat(String(_)," instead.")),e[_]=e[h]}else{var E=g.message,C=g.version;d.add("As of v".concat(C,", ").concat(String(h)," is deprecated. ").concat(E??""))}var T=e[h];if(!(T==null||T===!1)){var P=i[h],A;if(P)if(typeof P=="function"){var b=P(e,n.gridOptions);if(!b)return;if("objectName"in b){var I=e[h];if(Array.isArray(I)){I.forEach(function($){n.processOptions($,b)});return}n.processOptions(e[h],b);return}A=b}else A=P;else return;var F=A.module,U=A.dependencies,k=A.supportedRowModels;if(k){var M=(f=n.gridOptions.rowModelType)!==null&&f!==void 0?f:"clientSide";if(!k.includes(M)){d.add("".concat(String(h)," is not supported with the '").concat(M,"' row model."));return}}if(F){var z=Array.isArray(F)?F:[F],V=!0;if(z.forEach(function($){Se.__assertRegistered($,String(h),n.gridOptionsService.getGridId())||(V=!1,d.add("".concat(String(h)," is only available when ").concat($," is loaded.")))}),!V)return}if(U){var q=n.checkForWarning(h,U,e);if(q){d.add(q);return}}}}),d.size>0&&d.forEach(function(h){Ee(h)})},t.prototype.checkForWarning=function(e,o,n){if(typeof o=="function")return o(n,this.gridOptions);var i=Object.entries(o),s=i.find(function(u){var d=yi(u,2),p=d[0],h=d[1],f=n[p];return!h.includes(f)});if(!s)return null;var a=yi(s,2),l=a[0],c=a[1];return c.length>1?"'".concat(String(e),"' requires '").concat(l,"' to be one of [").concat(c.join(", "),"]."):"'".concat(String(e),"' requires '").concat(l,"' to be ").concat(c[0],".")},t.prototype.checkProperties=function(e,o,n,i,s){var a=["__ob__","__v_skip","__metadata__"],l=yC(Object.getOwnPropertyNames(e),Ts(Ts(Ts([],yi(a),!1),yi(o),!1),yi(n),!1),n);if(Gt(l,function(u,d){Ee("invalid ".concat(i," property '").concat(u,"' did you mean any of these: ").concat(d.slice(0,8).join(", ")))}),Object.keys(l).length>0&&s){var c=this.getFrameworkOverrides().getDocLink(s);Ee("to see all the valid ".concat(i," properties please check: ").concat(c))}},Hu([y("gridOptions")],t.prototype,"gridOptions",void 0),Hu([Q],t.prototype,"init",null),t=Hu([ne("validationService")],t),t}(K),p9=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),h9=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},f9=function(r){p9(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.syncEventListeners=new Map,e.asyncEventListeners=new Map,e.syncGlobalEventListeners=new Set,e.asyncGlobalEventListeners=new Set,e}return t.prototype.addEventListener=function(e,o){var n=this.gridOptionsService.useAsyncEvents(),i=n?this.asyncEventListeners:this.syncEventListeners;i.has(e)||i.set(e,new Set),i.get(e).add(o),this.eventService.addEventListener(e,o,n)},t.prototype.addGlobalListener=function(e){var o=this.gridOptionsService.useAsyncEvents(),n=o?this.asyncGlobalEventListeners:this.syncGlobalEventListeners;n.add(e),this.eventService.addGlobalListener(e,o)},t.prototype.removeEventListener=function(e,o){var n,i=this.asyncEventListeners.get(e),s=!!(i!=null&&i.delete(o));s||(n=this.asyncEventListeners.get(e))===null||n===void 0||n.delete(o),this.eventService.removeEventListener(e,o,s)},t.prototype.removeGlobalListener=function(e){var o=this.asyncGlobalEventListeners.delete(e);o||this.syncGlobalEventListeners.delete(e),this.eventService.removeGlobalListener(e,o)},t.prototype.destroyEventListeners=function(e,o){var n=this;e.forEach(function(i,s){i.forEach(function(a){return n.eventService.removeEventListener(s,a,o)}),i.clear()}),e.clear()},t.prototype.destroyGlobalListeners=function(e,o){var n=this;e.forEach(function(i){return n.eventService.removeGlobalListener(i,o)}),e.clear()},t.prototype.destroy=function(){r.prototype.destroy.call(this),this.destroyEventListeners(this.syncEventListeners,!1),this.destroyEventListeners(this.asyncEventListeners,!0),this.destroyGlobalListeners(this.syncGlobalEventListeners,!1),this.destroyGlobalListeners(this.asyncGlobalEventListeners,!0)},t=h9([ne("apiEventService")],t),t}(K),g9=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),Qa=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},v9=function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var o=e.call(r),n,i=[],s;try{for(;(t===void 0||t-- >0)&&!(n=o.next()).done;)i.push(n.value)}catch(a){s={error:a}}finally{try{n&&!n.done&&(e=o.return)&&e.call(o)}finally{if(s)throw s.error}}return i},m9=function(r,t,e){if(e||arguments.length===2)for(var o=0,n=t.length,i;o<n;o++)(i||!(o in t))&&(i||(i=Array.prototype.slice.call(t,0,o)),i[o]=t[o]);return r.concat(i||Array.prototype.slice.call(t))},y9=function(r){g9(t,r);function t(){var e=r.call(this,'<span class="ag-paging-page-size"></span>')||this;return e.hasEmptyOption=!1,e.handlePageSizeItemSelected=function(){if(e.selectPageSizeComp){var o=e.selectPageSizeComp.getValue();if(o){var n=Number(o);isNaN(n)||n<1||n===e.paginationProxy.getPageSize()||(e.paginationProxy.setPageSize(n,"pageSizeSelector"),e.hasEmptyOption&&e.toggleSelectDisplay(!0),e.selectPageSizeComp.getFocusableElement().focus())}}},e}return t.prototype.init=function(){var e=this;this.addManagedPropertyListener("paginationPageSizeSelector",function(){e.onPageSizeSelectorValuesChange()}),this.addManagedListener(this.eventService,w.EVENT_PAGINATION_CHANGED,function(o){return e.handlePaginationChanged(o)})},t.prototype.handlePaginationChanged=function(e){if(!(!this.selectPageSizeComp||!(e!=null&&e.newPageSize))){var o=this.paginationProxy.getPageSize();this.getPageSizeSelectorValues().includes(o)?this.selectPageSizeComp.setValue(o.toString()):this.hasEmptyOption?this.selectPageSizeComp.setValue(""):this.toggleSelectDisplay(!0)}},t.prototype.toggleSelectDisplay=function(e){this.selectPageSizeComp&&this.reset(),e&&(this.reloadPageSizesSelector(),this.selectPageSizeComp&&this.appendChild(this.selectPageSizeComp))},t.prototype.reset=function(){Et(this.getGui()),this.selectPageSizeComp&&(this.destroyBean(this.selectPageSizeComp),this.selectPageSizeComp=void 0)},t.prototype.onPageSizeSelectorValuesChange=function(){this.selectPageSizeComp&&this.shouldShowPageSizeSelector()&&this.reloadPageSizesSelector()},t.prototype.shouldShowPageSizeSelector=function(){return this.gridOptionsService.get("pagination")&&!this.gridOptionsService.get("suppressPaginationPanel")&&!this.gridOptionsService.get("paginationAutoPageSize")&&this.gridOptionsService.get("paginationPageSizeSelector")!==!1},t.prototype.reloadPageSizesSelector=function(){var e=this,o=this.getPageSizeSelectorValues(),n=this.paginationProxy.getPageSize(),i=!n||!o.includes(n);i&&(o.unshift(""),Ee(`The paginationPageSize grid option is set to a value that is not in the list of page size options.
                Please make sure that the paginationPageSize grid option is set to one of the values in the 
                paginationPageSizeSelector array, or set the paginationPageSizeSelector to false to hide the page size selector.`)),this.selectPageSizeComp&&(this.destroyBean(this.selectPageSizeComp),this.selectPageSizeComp=void 0);var s=this.localeService.getLocaleTextFunc(),a=s("pageSizeSelectorLabel","Page Size:"),l=o.map(function(u){return{value:String(u),text:String(u)}}),c=s("ariaPageSizeSelectorLabel","Page Size");this.selectPageSizeComp=this.createManagedBean(new vc).addOptions(l).setValue(String(i?"":n)).setAriaLabel(c).setLabel(a).onValueChange(function(){return e.handlePageSizeItemSelected()}),this.hasEmptyOption=i},t.prototype.getPageSizeSelectorValues=function(){var e=[20,50,100],o=this.gridOptionsService.get("paginationPageSizeSelector");return!Array.isArray(o)||!this.validateValues(o)?e:m9([],v9(o),!1).sort(function(n,i){return n-i})},t.prototype.validateValues=function(e){if(!e.length)return Ee(`The paginationPageSizeSelector grid option is an empty array. This is most likely a mistake.
                If you want to hide the page size selector, please set the paginationPageSizeSelector to false.`),!1;for(var o=0;o<e.length;o++){var n=e[o],i=typeof n=="number",s=n>0;if(!i)return Ee(`The paginationPageSizeSelector grid option contains a non-numeric value.
                    Please make sure that all values in the paginationPageSizeSelector array are numbers.`),!1;if(!s)return Ee(`The paginationPageSizeSelector grid option contains a negative number or zero.
                    Please make sure that all values in the paginationPageSizeSelector array are positive.`),!1}return!0},t.prototype.destroy=function(){this.toggleSelectDisplay(!1),r.prototype.destroy.call(this)},Qa([y("localeService")],t.prototype,"localeService",void 0),Qa([y("gridOptionsService")],t.prototype,"gridOptionsService",void 0),Qa([y("paginationProxy")],t.prototype,"paginationProxy",void 0),Qa([Q],t.prototype,"init",null),t}(Re),Ig=function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var o=e.call(r),n,i=[],s;try{for(;(t===void 0||t-- >0)&&!(n=o.next()).done;)i.push(n.value)}catch(a){s={error:a}}finally{try{n&&!n.done&&(e=o.return)&&e.call(o)}finally{if(s)throw s.error}}return i},Dg=function(r,t,e){if(e||arguments.length===2)for(var o=0,n=t.length,i;o<n;o++)(i||!(o in t))&&(i||(i=Array.prototype.slice.call(t,0,o)),i[o]=t[o]);return r.concat(i||Array.prototype.slice.call(t))};function C9(r,t,e){if(!t)return sn("No gridOptions provided to createGrid"),{};var o=sw.getCoercedGridOptions(t),n=new _9().create(r,o,function(s){var a=new Ak(r);s.createBean(a)},void 0,e);if(!Object.isFrozen(t)&&!(e!=null&&e.frameworkOverrides)){var i="https://ag-grid.com/javascript-data-grid/grid-interface/#grid-api";Object.defineProperty(t,"api",{get:function(){sn("gridOptions.api is no longer supported. See ".concat(i,"."))},configurable:!0}),Object.defineProperty(t,"columnApi",{get:function(){sn("gridOptions.columnApi is no longer supported and all methods moved to the grid api. See ".concat(i,"."))},configurable:!0})}return n}var w9=1,_9=function(){function r(){}return r.prototype.create=function(t,e,o,n,i){var s,a=!!e.debug,l=(s=e.gridId)!==null&&s!==void 0?s:String(w9++),c=this.getRegisteredModules(i,l),u=this.createBeansList(e.rowModelType,c,l),d=this.createProvidedBeans(t,e,i);if(!u){sn("Failed to create grid.");return}var p={providedBeanInstances:d,beanClasses:u,debug:a,gridId:l},h=new Rh("Context",function(){return p.debug}),f=new y2(p,h),g=f.getBean("beans");return this.registerModuleUserComponents(g,c),this.registerStackComponents(g,c),this.registerControllers(g,c),o(f),g.syncService.start(),n&&n(f),g.gridApi},r.prototype.registerControllers=function(t,e){e.forEach(function(o){o.controllers&&o.controllers.forEach(function(n){return t.ctrlsFactory.register(n)})})},r.prototype.registerStackComponents=function(t,e){var o=this.createAgStackComponentsList(e);t.agStackComponentsRegistry.setupComponents(o)},r.prototype.getRegisteredModules=function(t,e){var o=t?t.modules:null,n=Se.__getRegisteredModules(e),i=[],s={},a=function(l,c,u){var d=function(p){s[p.moduleName]||(s[p.moduleName]=!0,i.push(p),Se.__register(p,l,u))};d(c),c.dependantModules&&c.dependantModules.forEach(function(p){return a(l,p,u)})};return o&&o.forEach(function(l){return a(!0,l,e)}),n&&n.forEach(function(l){return a(!Se.__isPackageBased(),l,void 0)}),i},r.prototype.registerModuleUserComponents=function(t,e){var o=this.extractModuleEntity(e,function(n){return n.userComponents?n.userComponents:[]});o.forEach(function(n){t.userComponentRegistry.registerDefaultComponent(n.componentName,n.componentClass)})},r.prototype.createProvidedBeans=function(t,e,o){var n=o?o.frameworkOverrides:null;pe(n)&&(n=new ow);var i={gridOptions:e,eGridDiv:t,globalEventListener:o?o.globalEventListener:null,globalSyncEventListener:o?o.globalSyncEventListener:null,frameworkOverrides:n};return o&&o.providedBeanInstances&&Object.assign(i,o.providedBeanInstances),i},r.prototype.createAgStackComponentsList=function(t){var e=[{componentName:"AgCheckbox",componentClass:mc},{componentName:"AgRadioButton",componentClass:DC},{componentName:"AgToggleButton",componentClass:h4},{componentName:"AgInputTextField",componentClass:Xi},{componentName:"AgInputTextArea",componentClass:g4},{componentName:"AgInputNumberField",componentClass:gh},{componentName:"AgInputDateField",componentClass:m4},{componentName:"AgInputRange",componentClass:C4},{componentName:"AgRichSelect",componentClass:I4},{componentName:"AgSelect",componentClass:vc},{componentName:"AgSlider",componentClass:M4},{componentName:"AgGridBody",componentClass:y6},{componentName:"AgHeaderRoot",componentClass:PG},{componentName:"AgSortIndicator",componentClass:mh},{componentName:"AgPagination",componentClass:l5},{componentName:"AgPageSizeSelector",componentClass:y9},{componentName:"AgOverlayWrapper",componentClass:u5},{componentName:"AgGroupComponent",componentClass:x4},{componentName:"AgPanel",componentClass:tw},{componentName:"AgDialog",componentClass:W4},{componentName:"AgRowContainer",componentClass:x6},{componentName:"AgFakeHorizontalScroll",componentClass:N5},{componentName:"AgFakeVerticalScroll",componentClass:Z5},{componentName:"AgAutocomplete",componentClass:J4}],o=this.extractModuleEntity(t,function(n){return n.agStackComponents?n.agStackComponents:[]});return e=e.concat(o),e},r.prototype.createBeansList=function(t,e,o){t===void 0&&(t="clientSide");var n=e.filter(function(c){return!c.rowModel||c.rowModel===t}),i={clientSide:ie.ClientSideRowModelModule,infinite:ie.InfiniteRowModelModule,serverSide:ie.ServerSideRowModelModule,viewport:ie.ViewportRowModelModule};if(!i[t]){sn("Could not find row model for rowModelType = "+t);return}if(Se.__assertRegistered(i[t],"rowModelType = '".concat(t,"'"),o)){var s=[XC,p5,g5,S5,kk,YC,OF,zk,Kk,kG,zF,i5,DG,q5,d9,n4,YF,tL,si,sw,K4,nw,ZF,q2,RG,c4,ZG,mk,x2,wk,lk,R6,Vk,fk,Ek,Z2,WG,LG,St,iw,Dk,S6,t5,rk,t4,d4,w6,Pk,xk,Nk,s5,G2,jk,VG,w5,rL,R5,T5,a4,A5,I5,k5,V5,L5,e9,o9,qC,i9,s9,c9,UG,f9],a=this.extractModuleEntity(n,function(c){return c.beans?c.beans:[]});s.push.apply(s,Dg([],Ig(a),!1));var l=[];return s.forEach(function(c){l.indexOf(c)<0&&l.push(c)}),l}},r.prototype.extractModuleEntity=function(t,e){return[].concat.apply([],Dg([],Ig(t.map(e)),!1))},r}(),S9=function(){function r(){}return r.prototype.wrap=function(t,e,o,n){var i=this;o===void 0&&(o=[]);var s=this.createWrapper(t,n);return e.forEach(function(a){i.createMethod(s,a,!0)}),o.forEach(function(a){i.createMethod(s,a,!1)}),s},r.prototype.unwrap=function(t){return t},r.prototype.createMethod=function(t,e,o){t.addMethod(e,this.createMethodProxy(t,e,o))},r.prototype.createMethodProxy=function(t,e,o){return function(){return t.hasMethod(e)?t.callMethod(e,arguments):(o&&console.warn("AG Grid: Framework component is missing the method "+e+"()"),null)}},r}(),Mg;(function(r){r.InsideBase="insideBase",r.InsideEnd="insideEnd",r.Center="center",r.OutsideEnd="outsideEnd"})(Mg||(Mg={}));/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v31.0.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var Yr=typeof global>"u"?{}:global;Yr.HTMLElement=typeof HTMLElement>"u"?{}:HTMLElement;Yr.HTMLButtonElement=typeof HTMLButtonElement>"u"?{}:HTMLButtonElement;Yr.HTMLSelectElement=typeof HTMLSelectElement>"u"?{}:HTMLSelectElement;Yr.HTMLInputElement=typeof HTMLInputElement>"u"?{}:HTMLInputElement;Yr.Node=typeof Node>"u"?{}:Node;Yr.MouseEvent=typeof MouseEvent>"u"?{}:MouseEvent;var bs=function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var o=e.call(r),n,i=[],s;try{for(;(t===void 0||t-- >0)&&!(n=o.next()).done;)i.push(n.value)}catch(a){s={error:a}}finally{try{n&&!n.done&&(e=o.return)&&e.call(o)}finally{if(s)throw s.error}}return i},As=function(r,t,e){if(e||arguments.length===2)for(var o=0,n=t.length,i;o<n;o++)(i||!(o in t))&&(i||(i=Array.prototype.slice.call(t,0,o)),i[o]=t[o]);return r.concat(i||Array.prototype.slice.call(t))},E9=function(){function r(t,e,o,n,i,s){this.nextId=0,this.allNodesMap={},this.dataLoaded=!1,this.rootNode=t,this.gridOptionsService=e,this.eventService=o,this.columnModel=n,this.beans=s,this.selectionService=i,this.rootNode.group=!0,this.rootNode.level=-1,this.rootNode.id=r.ROOT_NODE_ID,this.rootNode.allLeafChildren=[],this.rootNode.childrenAfterGroup=[],this.rootNode.childrenAfterSort=[],this.rootNode.childrenAfterAggFilter=[],this.rootNode.childrenAfterFilter=[]}return r.prototype.getCopyOfNodesMap=function(){return Ae.cloneObject(this.allNodesMap)},r.prototype.getRowNode=function(t){return this.allNodesMap[t]},r.prototype.setRowData=function(t){var e=this;if(typeof t=="string"){console.warn("AG Grid: rowData must be an array, however you passed in a string. If you are loading JSON, make sure you convert the JSON string to JavaScript objects first");return}this.dataLoaded=!0,this.dispatchRowDataUpdateStartedEvent(t);var o=this.rootNode,n=this.rootNode.sibling;o.childrenAfterFilter=null,o.childrenAfterGroup=null,o.childrenAfterAggFilter=null,o.childrenAfterSort=null,o.childrenMapped=null,o.updateHasChildren(),this.nextId=0,this.allNodesMap={},t?o.allLeafChildren=t.map(function(i){return e.createNode(i,e.rootNode,r.TOP_LEVEL)}):(o.allLeafChildren=[],o.childrenAfterGroup=[]),n&&(n.childrenAfterFilter=o.childrenAfterFilter,n.childrenAfterGroup=o.childrenAfterGroup,n.childrenAfterAggFilter=o.childrenAfterAggFilter,n.childrenAfterSort=o.childrenAfterSort,n.childrenMapped=o.childrenMapped,n.allLeafChildren=o.allLeafChildren)},r.prototype.updateRowData=function(t,e){this.dataLoaded=!0,this.dispatchRowDataUpdateStartedEvent(t.add);var o={remove:[],update:[],add:[]},n=[];return this.executeRemove(t,o,n),this.executeUpdate(t,o,n),this.executeAdd(t,o),this.updateSelection(n,"rowDataChanged"),e&&Ae.sortRowNodesByOrder(this.rootNode.allLeafChildren,e),o},r.prototype.hasData=function(){return this.dataLoaded},r.prototype.dispatchRowDataUpdateStartedEvent=function(t){var e={type:w.EVENT_ROW_DATA_UPDATE_STARTED,firstRowData:t!=null&&t.length?t[0]:null};this.eventService.dispatchEvent(e)},r.prototype.updateSelection=function(t,e){var o=t.length>0;if(o&&this.selectionService.setNodesSelected({newValue:!1,nodes:t,suppressFinishActions:!0,source:e}),this.selectionService.updateGroupsFromChildrenSelections(e),o){var n={type:w.EVENT_SELECTION_CHANGED,source:e};this.eventService.dispatchEvent(n)}},r.prototype.executeAdd=function(t,e){var o=this,n,i=t.add,s=t.addIndex;if(!Ae.missingOrEmpty(i)){var a=i.map(function(g){return o.createNode(g,o.rootNode,r.TOP_LEVEL)});if(typeof s=="number"&&s>=0){var l=this.rootNode.allLeafChildren,c=l.length,u=s,d=this.gridOptionsService.get("treeData");if(d&&s>0&&c>0){for(var p=0;p<c;p++)if(((n=l[p])===null||n===void 0?void 0:n.rowIndex)==s-1){u=p+1;break}}var h=l.slice(0,u),f=l.slice(u,l.length);this.rootNode.allLeafChildren=As(As(As([],bs(h),!1),bs(a),!1),bs(f),!1)}else this.rootNode.allLeafChildren=As(As([],bs(this.rootNode.allLeafChildren),!1),bs(a),!1);this.rootNode.sibling&&(this.rootNode.sibling.allLeafChildren=this.rootNode.allLeafChildren),e.add=a}},r.prototype.executeRemove=function(t,e,o){var n=this,i=t.remove;if(!Ae.missingOrEmpty(i)){var s={};i.forEach(function(a){var l=n.lookupRowNode(a);l&&(l.isSelected()&&o.push(l),l.clearRowTopAndRowIndex(),s[l.id]=!0,delete n.allNodesMap[l.id],e.remove.push(l))}),this.rootNode.allLeafChildren=this.rootNode.allLeafChildren.filter(function(a){return!s[a.id]}),this.rootNode.sibling&&(this.rootNode.sibling.allLeafChildren=this.rootNode.allLeafChildren)}},r.prototype.executeUpdate=function(t,e,o){var n=this,i=t.update;Ae.missingOrEmpty(i)||i.forEach(function(s){var a=n.lookupRowNode(s);a&&(a.updateData(s),!a.selectable&&a.isSelected()&&o.push(a),n.setMasterForRow(a,s,r.TOP_LEVEL,!1),e.update.push(a))})},r.prototype.lookupRowNode=function(t){var e=this.gridOptionsService.getCallback("getRowId"),o;if(e){var n=e({data:t,level:0});if(o=this.allNodesMap[n],!o)return console.error("AG Grid: could not find row id=".concat(n,", data item was not found for this id")),null}else if(o=this.rootNode.allLeafChildren.find(function(i){return i.data===t}),!o)return console.error("AG Grid: could not find data item as object was not found",t),console.error("Consider using getRowId to help the Grid find matching row data"),null;return o||null},r.prototype.createNode=function(t,e,o){var n=new be(this.beans);n.group=!1,this.setMasterForRow(n,t,o,!0);var i=this.gridOptionsService.get("suppressParentsInRowNodes");return e&&!i&&(n.parent=e),n.level=o,n.setDataAndId(t,this.nextId.toString()),this.allNodesMap[n.id]&&console.warn("AG Grid: duplicate node id '".concat(n.id,"' detected from getRowId callback, this could cause issues in your grid.")),this.allNodesMap[n.id]=n,this.nextId++,n},r.prototype.setMasterForRow=function(t,e,o,n){var i=this.gridOptionsService.get("treeData");if(i)t.setMaster(!1),n&&(t.expanded=!1);else{var s=this.gridOptionsService.get("masterDetail");if(s){var a=this.gridOptionsService.get("isRowMaster");a?t.setMaster(a(e)):t.setMaster(!0)}else t.setMaster(!1);if(n){var l=this.columnModel.getRowGroupColumns(),c=l?l.length:0,u=o+c;t.expanded=t.master?this.isExpanded(u):!1}}},r.prototype.isExpanded=function(t){var e=this.gridOptionsService.get("groupDefaultExpanded");return e===-1?!0:t<e},r.TOP_LEVEL=0,r.ROOT_NODE_ID="ROOT_NODE_ID",r}(),R9=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),Yt=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},qt=function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var o=e.call(r),n,i=[],s;try{for(;(t===void 0||t-- >0)&&!(n=o.next()).done;)i.push(n.value)}catch(a){s={error:a}}finally{try{n&&!n.done&&(e=o.return)&&e.call(o)}finally{if(s)throw s.error}}return i},Qt=function(r,t,e){if(e||arguments.length===2)for(var o=0,n=t.length,i;o<n;o++)(i||!(o in t))&&(i||(i=Array.prototype.slice.call(t,0,o)),i[o]=t[o]);return r.concat(i||Array.prototype.slice.call(t))},Qo;(function(r){r[r.Normal=0]="Normal",r[r.AfterFilter=1]="AfterFilter",r[r.AfterFilterAndSort=2]="AfterFilterAndSort",r[r.PivotNodes=3]="PivotNodes"})(Qo||(Qo={}));var T9=function(r){R9(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.onRowHeightChanged_debounced=Ae.debounce(e.onRowHeightChanged.bind(e),100),e.rowsToDisplay=[],e.hasStarted=!1,e.shouldSkipSettingDataOnStart=!1,e}return t.prototype.init=function(){var e=this,o=this.refreshModel.bind(this,{step:Ie.EVERYTHING}),n=!this.gridOptionsService.get("suppressAnimationFrame"),i=this.refreshModel.bind(this,{step:Ie.EVERYTHING,afterColumnsChanged:!0,keepRenderedRows:!0,animate:n});this.addManagedListener(this.eventService,w.EVENT_NEW_COLUMNS_LOADED,i),this.addManagedListener(this.eventService,w.EVENT_COLUMN_ROW_GROUP_CHANGED,o),this.addManagedListener(this.eventService,w.EVENT_COLUMN_VALUE_CHANGED,this.onValueChanged.bind(this)),this.addManagedListener(this.eventService,w.EVENT_COLUMN_PIVOT_CHANGED,this.refreshModel.bind(this,{step:Ie.PIVOT})),this.addManagedListener(this.eventService,w.EVENT_FILTER_CHANGED,this.onFilterChanged.bind(this)),this.addManagedListener(this.eventService,w.EVENT_SORT_CHANGED,this.onSortChanged.bind(this)),this.addManagedListener(this.eventService,w.EVENT_COLUMN_PIVOT_MODE_CHANGED,o),this.addManagedListener(this.eventService,w.EVENT_GRID_STYLES_CHANGED,this.onGridStylesChanges.bind(this)),this.addManagedListener(this.eventService,w.EVENT_GRID_READY,function(){return e.onGridReady()}),this.addPropertyListeners(),this.rootNode=new be(this.beans),this.nodeManager=new E9(this.rootNode,this.gridOptionsService,this.eventService,this.columnModel,this.selectionService,this.beans)},t.prototype.addPropertyListeners=function(){var e=this,o=new Set(["treeData","masterDetail"]),n=new Set(["suppressParentsInRowNodes","groupDefaultExpanded","groupAllowUnbalanced","initialGroupOrderComparator","groupHideOpenParents","groupDisplayType"]),i=new Set(["excludeChildrenWhenTreeDataFiltering"]),s=new Set(["removePivotHeaderRowWhenSingleValueColumn","pivotRowTotals","pivotColumnGroupTotals","suppressExpandablePivotGroups"]),a=new Set(["getGroupRowAgg","alwaysAggregateAtRootLevel","groupIncludeTotalFooter","suppressAggFilteredOnly"]),l=new Set(["postSortRows","groupDisplayType","accentedSort"]),c=new Set([]),u=new Set(["groupRemoveSingleChildren","groupRemoveLowestSingleChildren","groupIncludeFooter"]),d=Qt(Qt(Qt(Qt(Qt(Qt(Qt(Qt(Qt([],qt(o),!1),qt(n),!1),qt(i),!1),qt(s),!1),qt(s),!1),qt(a),!1),qt(l),!1),qt(c),!1),qt(u),!1);this.addManagedPropertyListeners(d,function(p){var h,f=(h=p.changeSet)===null||h===void 0?void 0:h.properties;if(f){var g=function(_){return f.some(function(C){return _.has(C)})};if(g(o)){e.setRowData(e.rootNode.allLeafChildren.map(function(_){return _.data}));return}if(g(n)){e.refreshModel({step:Ie.EVERYTHING});return}if(g(i)){e.refreshModel({step:Ie.FILTER});return}if(g(s)){e.refreshModel({step:Ie.PIVOT});return}if(g(a)){e.refreshModel({step:Ie.AGGREGATE});return}if(g(l)){e.refreshModel({step:Ie.SORT});return}if(g(c)){e.refreshModel({step:Ie.FILTER_AGGREGATES});return}g(u)&&e.refreshModel({step:Ie.MAP})}}),this.addManagedPropertyListener("rowHeight",function(){return e.resetRowHeights()})},t.prototype.start=function(){this.hasStarted=!0,this.shouldSkipSettingDataOnStart?this.dispatchUpdateEventsAndRefresh():this.setInitialData()},t.prototype.setInitialData=function(){var e=this.gridOptionsService.get("rowData");e&&(this.shouldSkipSettingDataOnStart=!0,this.setRowData(e))},t.prototype.ensureRowHeightsValid=function(e,o,n,i){var s,a=!1;do{s=!1;for(var l=this.getRowIndexAtPixel(e),c=this.getRowIndexAtPixel(o),u=Math.max(l,n),d=Math.min(c,i),p=u;p<=d;p++){var h=this.getRow(p);if(h.rowHeightEstimated){var f=this.gridOptionsService.getRowHeightForNode(h);h.setRowHeight(f.height),s=!0,a=!0}}s&&this.setRowTopAndRowIndex()}while(s);return a},t.prototype.setRowTopAndRowIndex=function(){for(var e=this.environment.getDefaultRowHeight(),o=0,n=new Set,i=this.gridOptionsService.isDomLayout("normal"),s=0;s<this.rowsToDisplay.length;s++){var a=this.rowsToDisplay[s];if(a.id!=null&&n.add(a.id),a.rowHeight==null){var l=this.gridOptionsService.getRowHeightForNode(a,i,e);a.setRowHeight(l.height,l.estimated)}a.setRowTop(o),a.setRowIndex(s),o+=a.rowHeight}return n},t.prototype.clearRowTopAndRowIndex=function(e,o){var n=e.isActive(),i=function(a){a&&a.id!=null&&!o.has(a.id)&&a.clearRowTopAndRowIndex()},s=function(a){if(i(a),i(a.detailNode),i(a.sibling),a.hasChildren()&&a.childrenAfterGroup){var l=a.level==-1,c=n&&!l&&!a.expanded;c||a.childrenAfterGroup.forEach(s)}};s(this.rootNode)},t.prototype.ensureRowsAtPixel=function(e,o,n){var i=this;n===void 0&&(n=0);var s=this.getRowIndexAtPixel(o),a=this.getRow(s),l=!this.gridOptionsService.get("suppressAnimationFrame");return a===e[0]?!1:(e.forEach(function(c){Ae.removeFromArray(i.rootNode.allLeafChildren,c)}),e.forEach(function(c,u){Ae.insertIntoArray(i.rootNode.allLeafChildren,c,Math.max(s+n,0)+u)}),this.refreshModel({step:Ie.EVERYTHING,keepRenderedRows:!0,keepEditingRows:!0,animate:l}),!0)},t.prototype.highlightRowAtPixel=function(e,o){var n=o!=null?this.getRowIndexAtPixel(o):null,i=n!=null?this.getRow(n):null;if(!i||!e||i===e||o==null){this.lastHighlightedRow&&(this.lastHighlightedRow.setHighlighted(null),this.lastHighlightedRow=null);return}var s=this.getHighlightPosition(o,i);this.lastHighlightedRow&&this.lastHighlightedRow!==i&&(this.lastHighlightedRow.setHighlighted(null),this.lastHighlightedRow=null),i.setHighlighted(s),this.lastHighlightedRow=i},t.prototype.getHighlightPosition=function(e,o){if(!o){var n=this.getRowIndexAtPixel(e);if(o=this.getRow(n||0),!o)return On.Below}var i=o.rowTop,s=o.rowHeight;return e-i<s/2?On.Above:On.Below},t.prototype.getLastHighlightedRowNode=function(){return this.lastHighlightedRow},t.prototype.isLastRowIndexKnown=function(){return!0},t.prototype.getRowCount=function(){return this.rowsToDisplay?this.rowsToDisplay.length:0},t.prototype.getTopLevelRowCount=function(){var e=this.rowsToDisplay&&this.rowsToDisplay[0]===this.rootNode;if(e)return 1;var o=this.rootNode.childrenAfterAggFilter;return o?o.length:0},t.prototype.getTopLevelRowDisplayedIndex=function(e){var o=this.rowsToDisplay&&this.rowsToDisplay[0]===this.rootNode;if(o)return e;var n=this.rootNode.childrenAfterSort[e];if(this.gridOptionsService.get("groupHideOpenParents"))for(;n.expanded&&n.childrenAfterSort&&n.childrenAfterSort.length>0;)n=n.childrenAfterSort[0];return n.rowIndex},t.prototype.getRowBounds=function(e){if(Ae.missing(this.rowsToDisplay))return null;var o=this.rowsToDisplay[e];return o?{rowTop:o.rowTop,rowHeight:o.rowHeight}:null},t.prototype.onRowGroupOpened=function(){var e=this.gridOptionsService.isAnimateRows();this.refreshModel({step:Ie.MAP,keepRenderedRows:!0,animate:e})},t.prototype.onFilterChanged=function(e){if(!e.afterDataChange){var o=this.gridOptionsService.isAnimateRows(),n=e.columns.length===0||e.columns.some(function(s){return s.isPrimary()}),i=n?Ie.FILTER:Ie.FILTER_AGGREGATES;this.refreshModel({step:i,keepRenderedRows:!0,animate:o})}},t.prototype.onSortChanged=function(){var e=this.gridOptionsService.isAnimateRows();this.refreshModel({step:Ie.SORT,keepRenderedRows:!0,animate:e,keepEditingRows:!0})},t.prototype.getType=function(){return"clientSide"},t.prototype.onValueChanged=function(){this.columnModel.isPivotActive()?this.refreshModel({step:Ie.PIVOT}):this.refreshModel({step:Ie.AGGREGATE})},t.prototype.createChangePath=function(e){var o=Ae.missingOrEmpty(e),n=new Sc(!1,this.rootNode);return(o||this.gridOptionsService.get("treeData"))&&n.setInactive(),n},t.prototype.isSuppressModelUpdateAfterUpdateTransaction=function(e){if(!this.gridOptionsService.get("suppressModelUpdateAfterUpdateTransaction")||e.rowNodeTransactions==null)return!1;var o=e.rowNodeTransactions.filter(function(i){return i.add!=null&&i.add.length>0||i.remove!=null&&i.remove.length>0}),n=o==null||o.length==0;return n},t.prototype.buildRefreshModelParams=function(e){var o=Ie.EVERYTHING,n={everything:Ie.EVERYTHING,group:Ie.EVERYTHING,filter:Ie.FILTER,map:Ie.MAP,aggregate:Ie.AGGREGATE,sort:Ie.SORT,pivot:Ie.PIVOT};if(Ae.exists(e)&&(o=n[e]),Ae.missing(o)){console.error("AG Grid: invalid step ".concat(e,", available steps are ").concat(Object.keys(n).join(", ")));return}var i=!this.gridOptionsService.get("suppressAnimationFrame"),s={step:o,keepRenderedRows:!0,keepEditingRows:!0,animate:i};return s},t.prototype.refreshModel=function(e){if(this.hasStarted){var o=typeof e=="object"&&"step"in e?e:this.buildRefreshModelParams(e);if(o&&!this.isSuppressModelUpdateAfterUpdateTransaction(o)){var n=this.createChangePath(o.rowNodeTransactions);switch(o.step){case Ie.EVERYTHING:this.doRowGrouping(o.rowNodeTransactions,o.rowNodeOrder,n,!!o.afterColumnsChanged);case Ie.FILTER:this.doFilter(n);case Ie.PIVOT:this.doPivot(n);case Ie.AGGREGATE:this.doAggregate(n);case Ie.FILTER_AGGREGATES:this.doFilterAggregates(n);case Ie.SORT:this.doSort(o.rowNodeTransactions,n);case Ie.MAP:this.doRowsToDisplay()}var i=this.setRowTopAndRowIndex();this.clearRowTopAndRowIndex(n,i);var s={type:w.EVENT_MODEL_UPDATED,animate:o.animate,keepRenderedRows:o.keepRenderedRows,newData:o.newData,newPage:!1,keepUndoRedoStack:o.keepUndoRedoStack};this.eventService.dispatchEvent(s)}}},t.prototype.isEmpty=function(){var e=Ae.missing(this.rootNode.allLeafChildren)||this.rootNode.allLeafChildren.length===0;return Ae.missing(this.rootNode)||e||!this.columnModel.isReady()},t.prototype.isRowsToRender=function(){return Ae.exists(this.rowsToDisplay)&&this.rowsToDisplay.length>0},t.prototype.getNodesInRangeForSelection=function(e,o){var n=!o,i=!1,s=[],a=this.gridOptionsService.get("groupSelectsChildren");return this.forEachNodeAfterFilterAndSort(function(l){if(!i){if(n&&(l===o||l===e)&&(i=!0,l.group&&a)){s.push.apply(s,Qt([],qt(l.allLeafChildren),!1));return}if(!n){if(l!==o&&l!==e)return;n=!0}var c=!l.group||!a;if(c){s.push(l);return}}}),s},t.prototype.setDatasource=function(e){console.error("AG Grid: should never call setDatasource on clientSideRowController")},t.prototype.getTopLevelNodes=function(){return this.rootNode?this.rootNode.childrenAfterGroup:null},t.prototype.getRootNode=function(){return this.rootNode},t.prototype.getRow=function(e){return this.rowsToDisplay[e]},t.prototype.isRowPresent=function(e){return this.rowsToDisplay.indexOf(e)>=0},t.prototype.getRowIndexAtPixel=function(e){if(this.isEmpty()||this.rowsToDisplay.length===0)return-1;var o=0,n=this.rowsToDisplay.length-1;if(e<=0)return 0;var i=Ae.last(this.rowsToDisplay);if(i.rowTop<=e)return this.rowsToDisplay.length-1;for(var s=-1,a=-1;;){var l=Math.floor((o+n)/2),c=this.rowsToDisplay[l];if(this.isRowInPixel(c,e))return l;c.rowTop<e?o=l+1:c.rowTop>e&&(n=l-1);var u=s===o&&a===n;if(u)return l;s=o,a=n}},t.prototype.isRowInPixel=function(e,o){var n=e.rowTop,i=e.rowTop+e.rowHeight,s=n<=o&&i>o;return s},t.prototype.forEachLeafNode=function(e){this.rootNode.allLeafChildren&&this.rootNode.allLeafChildren.forEach(function(o,n){return e(o,n)})},t.prototype.forEachNode=function(e,o){o===void 0&&(o=!1),this.recursivelyWalkNodesAndCallback({nodes:Qt([],qt(this.rootNode.childrenAfterGroup||[]),!1),callback:e,recursionType:Qo.Normal,index:0,includeFooterNodes:o})},t.prototype.forEachNodeAfterFilter=function(e,o){o===void 0&&(o=!1),this.recursivelyWalkNodesAndCallback({nodes:Qt([],qt(this.rootNode.childrenAfterAggFilter||[]),!1),callback:e,recursionType:Qo.AfterFilter,index:0,includeFooterNodes:o})},t.prototype.forEachNodeAfterFilterAndSort=function(e,o){o===void 0&&(o=!1),this.recursivelyWalkNodesAndCallback({nodes:Qt([],qt(this.rootNode.childrenAfterSort||[]),!1),callback:e,recursionType:Qo.AfterFilterAndSort,index:0,includeFooterNodes:o})},t.prototype.forEachPivotNode=function(e,o){o===void 0&&(o=!1),this.recursivelyWalkNodesAndCallback({nodes:[this.rootNode],callback:e,recursionType:Qo.PivotNodes,index:0,includeFooterNodes:o})},t.prototype.recursivelyWalkNodesAndCallback=function(e){for(var o,n=e.nodes,i=e.callback,s=e.recursionType,a=e.includeFooterNodes,l=e.index,c=0;c<n.length;c++){var u=n[c];if(i(u,l++),u.hasChildren()&&!u.footer){var d=null;switch(s){case Qo.Normal:d=u.childrenAfterGroup;break;case Qo.AfterFilter:d=u.childrenAfterAggFilter;break;case Qo.AfterFilterAndSort:d=u.childrenAfterSort;break;case Qo.PivotNodes:d=u.leafGroup?null:u.childrenAfterSort;break}d&&(l=this.recursivelyWalkNodesAndCallback({nodes:Qt([],qt(d),!1),callback:i,recursionType:s,index:l,includeFooterNodes:a}))}}var p=(o=n[0])===null||o===void 0?void 0:o.parent;if(!a||!p)return l;var h=p===this.rootNode;if(h){var f=this.gridOptionsService.get("groupIncludeTotalFooter");if(!f)return l}else{var g=this.gridOptionsService.getGroupIncludeFooter();if(!g({node:p}))return l}return p.createFooter(),i(p.sibling,l++),l},t.prototype.doAggregate=function(e){this.aggregationStage&&this.aggregationStage.execute({rowNode:this.rootNode,changedPath:e})},t.prototype.doFilterAggregates=function(e){this.filterAggregatesStage?this.filterAggregatesStage.execute({rowNode:this.rootNode,changedPath:e}):this.rootNode.childrenAfterAggFilter=this.rootNode.childrenAfterFilter},t.prototype.expandOrCollapseAll=function(e){var o=this.gridOptionsService.get("treeData"),n=this.columnModel.isPivotActive(),i=function(l){l&&l.forEach(function(c){var u=function(){c.expanded=e,i(c.childrenAfterGroup)};if(o){var d=Ae.exists(c.childrenAfterGroup);d&&u();return}if(n){var p=!c.leafGroup;p&&u();return}var h=c.group;h&&u()})};this.rootNode&&i(this.rootNode.childrenAfterGroup),this.refreshModel({step:Ie.MAP});var s=e?"expandAll":"collapseAll",a={type:w.EVENT_EXPAND_COLLAPSE_ALL,source:s};this.eventService.dispatchEvent(a)},t.prototype.doSort=function(e,o){this.sortStage.execute({rowNode:this.rootNode,rowNodeTransactions:e,changedPath:o})},t.prototype.doRowGrouping=function(e,o,n,i){if(this.groupStage){if(e?this.groupStage.execute({rowNode:this.rootNode,rowNodeTransactions:e,rowNodeOrder:o,changedPath:n}):this.groupStage.execute({rowNode:this.rootNode,changedPath:n,afterColumnsChanged:i}),this.gridOptionsService.get("groupSelectsChildren")){var s=this.selectionService.updateGroupsFromChildrenSelections("rowGroupChanged",n);if(s){var a={type:w.EVENT_SELECTION_CHANGED,source:"rowGroupChanged"};this.eventService.dispatchEvent(a)}}}else this.rootNode.childrenAfterGroup=this.rootNode.allLeafChildren,this.rootNode.sibling&&(this.rootNode.sibling.childrenAfterGroup=this.rootNode.childrenAfterGroup),this.rootNode.updateHasChildren();this.eventService.dispatchEventOnce({type:w.EVENT_ROW_COUNT_READY})},t.prototype.doFilter=function(e){this.filterStage.execute({rowNode:this.rootNode,changedPath:e})},t.prototype.doPivot=function(e){this.pivotStage&&this.pivotStage.execute({rowNode:this.rootNode,changedPath:e})},t.prototype.getCopyOfNodesMap=function(){return this.nodeManager.getCopyOfNodesMap()},t.prototype.getRowNode=function(e){var o=typeof e=="string"&&e.indexOf(be.ID_PREFIX_ROW_GROUP)==0;if(o){var n=void 0;return this.forEachNode(function(i){i.id===e&&(n=i)}),n}return this.nodeManager.getRowNode(e)},t.prototype.setRowData=function(e){this.selectionService.reset("rowDataChanged"),this.nodeManager.setRowData(e),this.hasStarted&&this.dispatchUpdateEventsAndRefresh()},t.prototype.dispatchUpdateEventsAndRefresh=function(){var e={type:w.EVENT_ROW_DATA_UPDATED};this.eventService.dispatchEvent(e),this.refreshModel({step:Ie.EVERYTHING,newData:!0})},t.prototype.batchUpdateRowData=function(e,o){var n=this;if(this.applyAsyncTransactionsTimeout==null){this.rowDataTransactionBatch=[];var i=this.gridOptionsService.getAsyncTransactionWaitMillis();this.applyAsyncTransactionsTimeout=window.setTimeout(function(){n.executeBatchUpdateRowData()},i)}this.rowDataTransactionBatch.push({rowDataTransaction:e,callback:o})},t.prototype.flushAsyncTransactions=function(){this.applyAsyncTransactionsTimeout!=null&&(clearTimeout(this.applyAsyncTransactionsTimeout),this.executeBatchUpdateRowData())},t.prototype.executeBatchUpdateRowData=function(){var e=this;this.valueCache.onDataChanged();var o=[],n=[],i=!1;if(this.rowDataTransactionBatch&&this.rowDataTransactionBatch.forEach(function(a){var l=e.nodeManager.updateRowData(a.rowDataTransaction,void 0);n.push(l),a.callback&&o.push(a.callback.bind(null,l)),typeof a.rowDataTransaction.addIndex=="number"&&(i=!0)}),this.commonUpdateRowData(n,void 0,i),o.length>0&&window.setTimeout(function(){o.forEach(function(a){return a()})},0),n.length>0){var s={type:w.EVENT_ASYNC_TRANSACTIONS_FLUSHED,results:n};this.eventService.dispatchEvent(s)}this.rowDataTransactionBatch=null,this.applyAsyncTransactionsTimeout=void 0},t.prototype.updateRowData=function(e,o){this.valueCache.onDataChanged();var n=this.nodeManager.updateRowData(e,o),i=typeof e.addIndex=="number";return this.commonUpdateRowData([n],o,i),n},t.prototype.createRowNodeOrder=function(){var e=this.gridOptionsService.get("suppressMaintainUnsortedOrder");if(!e){var o={};if(this.rootNode&&this.rootNode.allLeafChildren)for(var n=0;n<this.rootNode.allLeafChildren.length;n++){var i=this.rootNode.allLeafChildren[n];o[i.id]=n}return o}},t.prototype.commonUpdateRowData=function(e,o,n){if(this.hasStarted){var i=!this.gridOptionsService.get("suppressAnimationFrame");n&&(o=this.createRowNodeOrder());var s={type:w.EVENT_ROW_DATA_UPDATED};this.eventService.dispatchEvent(s),this.refreshModel({step:Ie.EVERYTHING,rowNodeTransactions:e,rowNodeOrder:o,keepRenderedRows:!0,keepEditingRows:!0,animate:i})}},t.prototype.doRowsToDisplay=function(){this.rowsToDisplay=this.flattenStage.execute({rowNode:this.rootNode})},t.prototype.onRowHeightChanged=function(){this.refreshModel({step:Ie.MAP,keepRenderedRows:!0,keepEditingRows:!0,keepUndoRedoStack:!0})},t.prototype.onRowHeightChangedDebounced=function(){this.onRowHeightChanged_debounced()},t.prototype.resetRowHeights=function(){var e=this.resetRowHeightsForAllRowNodes();this.rootNode.setRowHeight(this.rootNode.rowHeight,!0),this.rootNode.sibling&&this.rootNode.sibling.setRowHeight(this.rootNode.sibling.rowHeight,!0),e&&this.onRowHeightChanged()},t.prototype.resetRowHeightsForAllRowNodes=function(){var e=!1;return this.forEachNode(function(o){o.setRowHeight(o.rowHeight,!0);var n=o.detailNode;n&&n.setRowHeight(n.rowHeight,!0),o.sibling&&o.sibling.setRowHeight(o.sibling.rowHeight,!0),e=!0}),e},t.prototype.onGridStylesChanges=function(){this.columnModel.isAutoRowHeightActive()||this.resetRowHeights()},t.prototype.onGridReady=function(){this.hasStarted||this.setInitialData()},t.prototype.isRowDataLoaded=function(){return this.nodeManager.hasData()},Yt([y("columnModel")],t.prototype,"columnModel",void 0),Yt([y("selectionService")],t.prototype,"selectionService",void 0),Yt([y("filterManager")],t.prototype,"filterManager",void 0),Yt([y("valueCache")],t.prototype,"valueCache",void 0),Yt([y("beans")],t.prototype,"beans",void 0),Yt([y("filterStage")],t.prototype,"filterStage",void 0),Yt([y("sortStage")],t.prototype,"sortStage",void 0),Yt([y("flattenStage")],t.prototype,"flattenStage",void 0),Yt([Le("groupStage")],t.prototype,"groupStage",void 0),Yt([Le("aggregationStage")],t.prototype,"aggregationStage",void 0),Yt([Le("pivotStage")],t.prototype,"pivotStage",void 0),Yt([Le("filterAggregatesStage")],t.prototype,"filterAggregatesStage",void 0),Yt([Q],t.prototype,"init",null),t=Yt([ne("rowModel")],t),t}(K),b9=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),Lg=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},A9=function(r){b9(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.execute=function(e){var o=e.changedPath;this.filterService.filter(o)},Lg([y("filterService")],t.prototype,"filterService",void 0),t=Lg([ne("filterStage")],t),t}(K),O9=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),Vu=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},P9=function(r){O9(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.execute=function(e){var o=this,n=this.sortController.getSortOptions(),i=Ae.exists(n)&&n.length>0,s=i&&Ae.exists(e.rowNodeTransactions)&&this.gridOptionsService.get("deltaSort"),a=n.some(function(l){var c=o.gridOptionsService.isColumnsSortingCoupledToGroup();return c?l.column.isPrimary()&&l.column.isRowGroupActive():!!l.column.getColDef().showRowGroup});this.sortService.sort(n,i,s,e.rowNodeTransactions,e.changedPath,a)},Vu([y("sortService")],t.prototype,"sortService",void 0),Vu([y("sortController")],t.prototype,"sortController",void 0),t=Vu([ne("sortStage")],t),t}(K),I9=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),Bu=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},D9=function(r){I9(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.execute=function(e){var o=e.rowNode,n=[],i=this.columnModel.isPivotMode(),s=i&&o.leafGroup,a=s?[o]:o.childrenAfterSort,l=this.getFlattenDetails();this.recursivelyAddToRowsToDisplay(l,a,n,i,0);var c=n.length>0,u=!s&&c&&l.groupIncludeTotalFooter;return u&&(o.createFooter(),this.addRowNodeToRowsToDisplay(l,o.sibling,n,0)),n},t.prototype.getFlattenDetails=function(){var e=this.gridOptionsService.get("groupRemoveSingleChildren"),o=!e&&this.gridOptionsService.get("groupRemoveLowestSingleChildren");return{groupRemoveLowestSingleChildren:o,groupRemoveSingleChildren:e,isGroupMultiAutoColumn:this.gridOptionsService.isGroupMultiAutoColumn(),hideOpenParents:this.gridOptionsService.get("groupHideOpenParents"),groupIncludeTotalFooter:this.gridOptionsService.get("groupIncludeTotalFooter"),getGroupIncludeFooter:this.gridOptionsService.getGroupIncludeFooter()}},t.prototype.recursivelyAddToRowsToDisplay=function(e,o,n,i,s){if(!Ae.missingOrEmpty(o))for(var a=0;a<o.length;a++){var l=o[a],c=l.hasChildren(),u=i&&!c,d=e.groupRemoveSingleChildren&&c&&l.childrenAfterGroup.length===1,p=e.groupRemoveLowestSingleChildren&&c&&l.leafGroup&&l.childrenAfterGroup.length===1,h=i&&l.leafGroup,f=e.hideOpenParents&&l.expanded&&!l.master&&!h,g=!u&&!f&&!d&&!p;if(g&&this.addRowNodeToRowsToDisplay(e,l,n,s),!(i&&l.leafGroup)){if(c){var _=d||p;if(l.expanded||_){var C=_?s:s+1;this.recursivelyAddToRowsToDisplay(e,l.childrenAfterSort,n,i,C);var E=e.getGroupIncludeFooter({node:l});E?(l.createFooter(),this.addRowNodeToRowsToDisplay(e,l.sibling,n,C)):l.destroyFooter()}}else if(l.master&&l.expanded){var T=this.createDetailNode(l);this.addRowNodeToRowsToDisplay(e,T,n,s)}}}},t.prototype.addRowNodeToRowsToDisplay=function(e,o,n,i){n.push(o),o.setUiLevel(e.isGroupMultiAutoColumn?0:i)},t.prototype.createDetailNode=function(e){if(Ae.exists(e.detailNode))return e.detailNode;var o=new be(this.beans);return o.detail=!0,o.selectable=!1,o.parent=e,Ae.exists(e.id)&&(o.id="detail_"+e.id),o.data=e.data,o.level=e.level+1,e.detailNode=o,o},Bu([y("columnModel")],t.prototype,"columnModel",void 0),Bu([y("beans")],t.prototype,"beans",void 0),t=Bu([ne("flattenStage")],t),t}(K),M9=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),Uu=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},L9=function(r){M9(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.sort=function(e,o,n,i,s,a){var l=this,c=this.gridOptionsService.get("groupMaintainOrder"),u=this.columnModel.getAllGridColumns().some(function(g){return g.isRowGroupActive()}),d={};n&&i&&(d=this.calculateDirtyNodes(i));var p=this.columnModel.isPivotMode(),h=this.gridOptionsService.getCallback("postSortRows"),f=function(g){l.pullDownGroupDataForHideOpenParents(g.childrenAfterAggFilter,!0);var _=p&&g.leafGroup,C=c&&u&&!g.leafGroup&&!a;if(C){var E=g.childrenAfterAggFilter.slice(0);if(g.childrenAfterSort){var T={};g.childrenAfterSort.forEach(function(A,b){T[A.id]=b}),E.sort(function(A,b){var I,F;return((I=T[A.id])!==null&&I!==void 0?I:0)-((F=T[b.id])!==null&&F!==void 0?F:0)})}g.childrenAfterSort=E}else!o||_?g.childrenAfterSort=g.childrenAfterAggFilter.slice(0):n?g.childrenAfterSort=l.doDeltaSort(g,d,s,e):g.childrenAfterSort=l.rowNodeSorter.doFullSort(g.childrenAfterAggFilter,e);if(g.sibling&&(g.sibling.childrenAfterSort=g.childrenAfterSort),l.updateChildIndexes(g),h){var P={nodes:g.childrenAfterSort};h(P)}};s&&s.forEachChangedNodeDepthFirst(f),this.updateGroupDataForHideOpenParents(s)},t.prototype.calculateDirtyNodes=function(e){var o={},n=function(i){i&&i.forEach(function(s){return o[s.id]=!0})};return e&&e.forEach(function(i){n(i.add),n(i.update),n(i.remove)}),o},t.prototype.doDeltaSort=function(e,o,n,i){var s=this,a=e.childrenAfterAggFilter,l=e.childrenAfterSort;if(!l)return this.rowNodeSorter.doFullSort(a,i);var c={},u=[];a.forEach(function(f){o[f.id]||!n.canSkip(f)?u.push(f):c[f.id]=!0});var d=l.filter(function(f){return c[f.id]}),p=function(f,g){return{currentPos:g,rowNode:f}},h=u.map(p).sort(function(f,g){return s.rowNodeSorter.compareRowNodes(i,f,g)});return this.mergeSortedArrays(i,h,d.map(p)).map(function(f){var g=f.rowNode;return g})},t.prototype.mergeSortedArrays=function(e,o,n){for(var i=[],s=0,a=0;s<o.length&&a<n.length;){var l=this.rowNodeSorter.compareRowNodes(e,o[s],n[a]);l<0?i.push(o[s++]):i.push(n[a++])}for(;s<o.length;)i.push(o[s++]);for(;a<n.length;)i.push(n[a++]);return i},t.prototype.updateChildIndexes=function(e){if(!Ae.missing(e.childrenAfterSort))for(var o=e.childrenAfterSort,n=0;n<o.length;n++){var i=o[n],s=n===0,a=n===e.childrenAfterSort.length-1;i.setFirstChild(s),i.setLastChild(a),i.setChildIndex(n)}},t.prototype.updateGroupDataForHideOpenParents=function(e){var o=this;if(this.gridOptionsService.get("groupHideOpenParents")){if(this.gridOptionsService.get("treeData"))return Ae.warnOnce("The property hideOpenParents dose not work with Tree Data. This is because Tree Data has values at the group level, it doesn't make sense to hide them."),!1;var n=function(i){o.pullDownGroupDataForHideOpenParents(i.childrenAfterSort,!1),i.childrenAfterSort.forEach(function(s){s.hasChildren()&&n(s)})};e&&e.executeFromRootNode(function(i){return n(i)})}},t.prototype.pullDownGroupDataForHideOpenParents=function(e,o){var n=this;!this.gridOptionsService.get("groupHideOpenParents")||Ae.missing(e)||e.forEach(function(i){var s=n.columnModel.getGroupDisplayColumns();s.forEach(function(a){var l=a.getColDef().showRowGroup;if(typeof l!="string"){console.error("AG Grid: groupHideOpenParents only works when specifying specific columns for colDef.showRowGroup");return}var c=l,u=n.columnModel.getPrimaryColumn(c),d=u===i.rowGroupColumn;if(!d)if(o)i.setGroupValue(a.getId(),void 0);else{var p=i.getFirstChildOfFirstChild(u);p&&i.setGroupValue(a.getId(),p.key)}})})},Uu([y("columnModel")],t.prototype,"columnModel",void 0),Uu([y("rowNodeSorter")],t.prototype,"rowNodeSorter",void 0),t=Uu([ne("sortService")],t),t}(K),x9=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),xg=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},F9=function(r){x9(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.filter=function(e){var o=this.filterManager.isChildFilterPresent();this.filterNodes(o,e)},t.prototype.filterNodes=function(e,o){var n=this,i=function(c,u){c.hasChildren()&&e&&!u?c.childrenAfterFilter=c.childrenAfterGroup.filter(function(d){var p=d.childrenAfterFilter&&d.childrenAfterFilter.length>0,h=d.data&&n.filterManager.doesRowPassFilter({rowNode:d});return p||h}):c.childrenAfterFilter=c.childrenAfterGroup,c.sibling&&(c.sibling.childrenAfterFilter=c.childrenAfterFilter)};if(this.doingTreeDataFiltering()){var s=function(c,u){if(c.childrenAfterGroup)for(var d=0;d<c.childrenAfterGroup.length;d++){var p=c.childrenAfterGroup[d],h=u||n.filterManager.doesRowPassFilter({rowNode:p});p.childrenAfterGroup?s(c.childrenAfterGroup[d],h):i(p,h)}i(c,u)},a=function(c){return s(c,!1)};o.executeFromRootNode(a)}else{var l=function(c){return i(c,!1)};o.forEachChangedNodeDepthFirst(l,!0)}},t.prototype.doingTreeDataFiltering=function(){return this.gridOptionsService.get("treeData")&&!this.gridOptionsService.get("excludeChildrenWhenTreeDataFiltering")},xg([y("filterManager")],t.prototype,"filterManager",void 0),t=xg([ne("filterService")],t),t}(K),N9=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),Os=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},G9=function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var o=e.call(r),n,i=[],s;try{for(;(t===void 0||t-- >0)&&!(n=o.next()).done;)i.push(n.value)}catch(a){s={error:a}}finally{try{n&&!n.done&&(e=o.return)&&e.call(o)}finally{if(s)throw s.error}}return i},k9=function(r){N9(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.postConstruct=function(){var e=this;this.rowModel.getType()==="clientSide"&&(this.clientSideRowModel=this.rowModel,this.addManagedPropertyListener("rowData",function(){return e.onRowDataUpdated()}))},t.prototype.isActive=function(){var e=this.gridOptionsService.exists("getRowId"),o=this.gridOptionsService.get("resetRowDataOnUpdate");return o?!1:e},t.prototype.setRowData=function(e){var o=this.createTransactionForRowData(e);if(o){var n=G9(o,2),i=n[0],s=n[1];this.clientSideRowModel.updateRowData(i,s)}},t.prototype.createTransactionForRowData=function(e){if(Ae.missing(this.clientSideRowModel)){console.error("AG Grid: ImmutableService only works with ClientSideRowModel");return}var o=this.gridOptionsService.getCallback("getRowId");if(o==null){console.error("AG Grid: ImmutableService requires getRowId() callback to be implemented, your row data needs IDs!");return}var n={remove:[],update:[],add:[]},i=this.clientSideRowModel.getCopyOfNodesMap(),s=this.gridOptionsService.get("suppressMaintainUnsortedOrder"),a=s?void 0:{};return Ae.exists(e)&&e.forEach(function(l,c){var u=o({data:l,level:0}),d=i[u];if(a&&(a[u]=c),d){var p=d.data!==l;p&&n.update.push(l),i[u]=void 0}else n.add.push(l)}),Ae.iterateObject(i,function(l,c){c&&n.remove.push(c.data)}),[n,a]},t.prototype.onRowDataUpdated=function(){var e=this.gridOptionsService.get("rowData");e&&(this.isActive()?this.setRowData(e):(this.selectionService.reset("rowDataChanged"),this.clientSideRowModel.setRowData(e)))},Os([y("rowModel")],t.prototype,"rowModel",void 0),Os([y("rowRenderer")],t.prototype,"rowRenderer",void 0),Os([y("selectionService")],t.prototype,"selectionService",void 0),Os([Q],t.prototype,"postConstruct",null),t=Os([ne("immutableService")],t),t}(K),H9="31.0.1",V9={version:H9,moduleName:ie.ClientSideRowModelModule,rowModel:"clientSide",beans:[T9,A9,P9,D9,L9,F9,k9]},B9=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),ju=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},Fg=function(r){B9(t,r);function t(e,o,n){var i=r.call(this,e)||this;return i.parentCache=o,i.params=n,i.startRow=e*n.blockSize,i.endRow=i.startRow+n.blockSize,i}return t.prototype.postConstruct=function(){this.createRowNodes()},t.prototype.getBlockStateJson=function(){return{id:""+this.getId(),state:{blockNumber:this.getId(),startRow:this.getStartRow(),endRow:this.getEndRow(),pageStatus:this.getState()}}},t.prototype.setDataAndId=function(e,o,n){Ae.exists(o)?e.setDataAndId(o,n.toString()):e.setDataAndId(void 0,void 0)},t.prototype.loadFromDatasource=function(){var e=this,o=this.createLoadParams();if(Ae.missing(this.params.datasource.getRows)){console.warn("AG Grid: datasource is missing getRows method");return}window.setTimeout(function(){e.params.datasource.getRows(o)},0)},t.prototype.processServerFail=function(){},t.prototype.createLoadParams=function(){var e={startRow:this.getStartRow(),endRow:this.getEndRow(),successCallback:this.pageLoaded.bind(this,this.getVersion()),failCallback:this.pageLoadFailed.bind(this,this.getVersion()),sortModel:this.params.sortModel,filterModel:this.params.filterModel,context:this.gridOptionsService.context};return e},t.prototype.forEachNode=function(e,o,n){var i=this;this.rowNodes.forEach(function(s,a){var l=i.startRow+a;l<n&&e(s,o.next())})},t.prototype.getLastAccessed=function(){return this.lastAccessed},t.prototype.getRow=function(e,o){o===void 0&&(o=!1),o||(this.lastAccessed=this.params.lastAccessedSequence.next());var n=e-this.startRow;return this.rowNodes[n]},t.prototype.getStartRow=function(){return this.startRow},t.prototype.getEndRow=function(){return this.endRow},t.prototype.createRowNodes=function(){this.rowNodes=[];for(var e=0;e<this.params.blockSize;e++){var o=this.startRow+e,n=new be(this.beans);n.setRowHeight(this.params.rowHeight),n.uiLevel=0,n.setRowIndex(o),n.setRowTop(this.params.rowHeight*o),this.rowNodes.push(n)}},t.prototype.processServerResult=function(e){var o=this;this.rowNodes.forEach(function(i,s){var a=e.rowData?e.rowData[s]:void 0;!i.id&&i.alreadyRendered&&a&&(o.rowNodes[s]=new be(o.beans),o.rowNodes[s].setRowIndex(i.rowIndex),o.rowNodes[s].setRowTop(i.rowTop),o.rowNodes[s].setRowHeight(i.rowHeight),i.clearRowTopAndRowIndex()),o.setDataAndId(o.rowNodes[s],a,o.startRow+s)});var n=e.rowCount!=null&&e.rowCount>=0?e.rowCount:void 0;this.parentCache.pageLoaded(this,n)},t.prototype.destroyRowNodes=function(){this.rowNodes.forEach(function(e){e.clearRowTopAndRowIndex()})},ju([y("beans")],t.prototype,"beans",void 0),ju([Q],t.prototype,"postConstruct",null),ju([zt],t.prototype,"destroyRowNodes",null),t}(Ld),U9=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),Xa=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},j9=function(r,t){return function(e,o){t(e,o,r)}},W9=function(r){U9(t,r);function t(e){var o=r.call(this)||this;return o.lastRowIndexKnown=!1,o.blocks={},o.blockCount=0,o.rowCount=e.initialRowCount,o.params=e,o}return t.prototype.setBeans=function(e){this.logger=e.create("InfiniteCache")},t.prototype.getRow=function(e,o){o===void 0&&(o=!1);var n=Math.floor(e/this.params.blockSize),i=this.blocks[n];if(!i){if(o)return;i=this.createBlock(n)}return i.getRow(e)},t.prototype.createBlock=function(e){var o=this.createBean(new Fg(e,this,this.params));return this.blocks[o.getId()]=o,this.blockCount++,this.purgeBlocksIfNeeded(o),this.params.rowNodeBlockLoader.addBlock(o),o},t.prototype.refreshCache=function(){var e=this.blockCount==0;if(e){this.purgeCache();return}this.getBlocksInOrder().forEach(function(o){return o.setStateWaitingToLoad()}),this.params.rowNodeBlockLoader.checkBlockToLoad()},t.prototype.destroyAllBlocks=function(){var e=this;this.getBlocksInOrder().forEach(function(o){return e.destroyBlock(o)})},t.prototype.getRowCount=function(){return this.rowCount},t.prototype.isLastRowIndexKnown=function(){return this.lastRowIndexKnown},t.prototype.pageLoaded=function(e,o){this.isAlive()&&(this.logger.log("onPageLoaded: page = ".concat(e.getId(),", lastRow = ").concat(o)),this.checkRowCount(e,o),this.onCacheUpdated())},t.prototype.purgeBlocksIfNeeded=function(e){var o=this,n=this.getBlocksInOrder().filter(function(c){return c!=e}),i=function(c,u){return u.getLastAccessed()-c.getLastAccessed()};n.sort(i);var s=this.params.maxBlocksInCache>0,a=s?this.params.maxBlocksInCache-1:null,l=t.MAX_EMPTY_BLOCKS_TO_KEEP-1;n.forEach(function(c,u){var d=c.getState()===Fg.STATE_WAITING_TO_LOAD&&u>=l,p=s?u>=a:!1;if(d||p){if(o.isBlockCurrentlyDisplayed(c)||o.isBlockFocused(c))return;o.removeBlockFromCache(c)}})},t.prototype.isBlockFocused=function(e){var o=this.focusService.getFocusCellToUseAfterRefresh();if(!o||o.rowPinned!=null)return!1;var n=e.getStartRow(),i=e.getEndRow(),s=o.rowIndex>=n&&o.rowIndex<i;return s},t.prototype.isBlockCurrentlyDisplayed=function(e){var o=e.getStartRow(),n=e.getEndRow()-1;return this.rowRenderer.isRangeInRenderedViewport(o,n)},t.prototype.removeBlockFromCache=function(e){e&&this.destroyBlock(e)},t.prototype.checkRowCount=function(e,o){if(typeof o=="number"&&o>=0)this.rowCount=o,this.lastRowIndexKnown=!0;else if(!this.lastRowIndexKnown){var n=(e.getId()+1)*this.params.blockSize,i=n+this.params.overflowSize;this.rowCount<i&&(this.rowCount=i)}},t.prototype.setRowCount=function(e,o){this.rowCount=e,Ae.exists(o)&&(this.lastRowIndexKnown=o),this.lastRowIndexKnown||this.rowCount%this.params.blockSize===0&&this.rowCount++,this.onCacheUpdated()},t.prototype.forEachNodeDeep=function(e){var o=this,n=new xr;this.getBlocksInOrder().forEach(function(i){return i.forEachNode(e,n,o.rowCount)})},t.prototype.getBlocksInOrder=function(){var e=function(n,i){return n.getId()-i.getId()},o=Ae.getAllValuesInObject(this.blocks).sort(e);return o},t.prototype.destroyBlock=function(e){delete this.blocks[e.getId()],this.destroyBean(e),this.blockCount--,this.params.rowNodeBlockLoader.removeBlock(e)},t.prototype.onCacheUpdated=function(){if(this.isAlive()){this.destroyAllBlocksPastVirtualRowCount();var e={type:w.EVENT_STORE_UPDATED};this.eventService.dispatchEvent(e)}},t.prototype.destroyAllBlocksPastVirtualRowCount=function(){var e=this,o=[];this.getBlocksInOrder().forEach(function(n){var i=n.getId()*e.params.blockSize;i>=e.rowCount&&o.push(n)}),o.length>0&&o.forEach(function(n){return e.destroyBlock(n)})},t.prototype.purgeCache=function(){var e=this;this.getBlocksInOrder().forEach(function(o){return e.removeBlockFromCache(o)}),this.lastRowIndexKnown=!1,this.rowCount===0&&(this.rowCount=this.params.initialRowCount),this.onCacheUpdated()},t.prototype.getRowNodesInRange=function(e,o){var n=this,i=[],s=-1,a=!1,l=new xr;Ae.missing(e)&&(a=!0);var c=!1;this.getBlocksInOrder().forEach(function(d){if(!c){if(a&&s+1!==d.getId()){c=!0;return}s=d.getId(),d.forEachNode(function(p){var h=p===e||p===o;(a||h)&&i.push(p),h&&(a=!a)},l,n.rowCount)}});var u=c||a;return u?[]:i},t.MAX_EMPTY_BLOCKS_TO_KEEP=2,Xa([y("rowRenderer")],t.prototype,"rowRenderer",void 0),Xa([y("focusService")],t.prototype,"focusService",void 0),Xa([j9(0,eo("loggerFactory"))],t.prototype,"setBeans",null),Xa([zt],t.prototype,"destroyAllBlocks",null),t}(K),z9=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),Un=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},$9=function(r){z9(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getRowBounds=function(e){return{rowHeight:this.rowHeight,rowTop:this.rowHeight*e}},t.prototype.ensureRowHeightsValid=function(e,o,n,i){return!1},t.prototype.init=function(){var e=this;this.gridOptionsService.isRowModelType("infinite")&&(this.rowHeight=this.gridOptionsService.getRowHeightAsNumber(),this.addEventListeners(),this.addDestroyFunc(function(){return e.destroyCache()}),this.verifyProps())},t.prototype.verifyProps=function(){this.gridOptionsService.exists("initialGroupOrderComparator")&&Ae.warnOnce("initialGroupOrderComparator cannot be used with Infinite Row Model as sorting is done on the server side")},t.prototype.start=function(){this.setDatasource(this.gridOptionsService.get("datasource"))},t.prototype.destroyDatasource=function(){this.datasource&&(this.getContext().destroyBean(this.datasource),this.rowRenderer.datasourceChanged(),this.datasource=null)},t.prototype.addEventListeners=function(){var e=this;this.addManagedListener(this.eventService,w.EVENT_FILTER_CHANGED,this.onFilterChanged.bind(this)),this.addManagedListener(this.eventService,w.EVENT_SORT_CHANGED,this.onSortChanged.bind(this)),this.addManagedListener(this.eventService,w.EVENT_NEW_COLUMNS_LOADED,this.onColumnEverything.bind(this)),this.addManagedListener(this.eventService,w.EVENT_STORE_UPDATED,this.onCacheUpdated.bind(this)),this.addManagedPropertyListener("datasource",function(){return e.setDatasource(e.gridOptionsService.get("datasource"))}),this.addManagedPropertyListener("cacheBlockSize",function(){return e.resetCache()}),this.addManagedPropertyListener("rowHeight",function(){e.rowHeight=e.gridOptionsService.getRowHeightAsNumber(),e.cacheParams.rowHeight=e.rowHeight,e.updateRowHeights()})},t.prototype.onFilterChanged=function(){this.reset()},t.prototype.onSortChanged=function(){this.reset()},t.prototype.onColumnEverything=function(){var e;this.cacheParams?e=this.isSortModelDifferent():e=!0,e&&this.reset()},t.prototype.isSortModelDifferent=function(){return!Ae.jsonEquals(this.cacheParams.sortModel,this.sortController.getSortModel())},t.prototype.getType=function(){return"infinite"},t.prototype.setDatasource=function(e){this.destroyDatasource(),this.datasource=e,e&&this.reset()},t.prototype.isEmpty=function(){return!this.infiniteCache},t.prototype.isRowsToRender=function(){return!!this.infiniteCache},t.prototype.getNodesInRangeForSelection=function(e,o){return this.infiniteCache?this.infiniteCache.getRowNodesInRange(e,o):[]},t.prototype.reset=function(){if(this.datasource){var e=this.gridOptionsService.getCallback("getRowId"),o=e!=null;o||this.selectionService.reset("rowDataChanged"),this.resetCache()}},t.prototype.createModelUpdatedEvent=function(){return{type:w.EVENT_MODEL_UPDATED,newPage:!1,newPageSize:!1,newData:!1,keepRenderedRows:!0,animate:!1}},t.prototype.resetCache=function(){this.destroyCache(),this.cacheParams={datasource:this.datasource,filterModel:this.filterManager.getFilterModel(),sortModel:this.sortController.getSortModel(),rowNodeBlockLoader:this.rowNodeBlockLoader,initialRowCount:this.gridOptionsService.get("infiniteInitialRowCount"),maxBlocksInCache:this.gridOptionsService.get("maxBlocksInCache"),rowHeight:this.gridOptionsService.getRowHeightAsNumber(),overflowSize:this.gridOptionsService.get("cacheOverflowSize"),blockSize:this.gridOptionsService.get("cacheBlockSize"),lastAccessedSequence:new xr},this.infiniteCache=this.createBean(new W9(this.cacheParams)),this.eventService.dispatchEventOnce({type:w.EVENT_ROW_COUNT_READY});var e=this.createModelUpdatedEvent();this.eventService.dispatchEvent(e)},t.prototype.updateRowHeights=function(){var e=this;this.forEachNode(function(n){n.setRowHeight(e.rowHeight),n.setRowTop(e.rowHeight*n.rowIndex)});var o=this.createModelUpdatedEvent();this.eventService.dispatchEvent(o)},t.prototype.destroyCache=function(){this.infiniteCache&&(this.infiniteCache=this.destroyBean(this.infiniteCache))},t.prototype.onCacheUpdated=function(){var e=this.createModelUpdatedEvent();this.eventService.dispatchEvent(e)},t.prototype.getRow=function(e){if(this.infiniteCache&&!(e>=this.infiniteCache.getRowCount()))return this.infiniteCache.getRow(e)},t.prototype.getRowNode=function(e){var o;return this.forEachNode(function(n){n.id===e&&(o=n)}),o},t.prototype.forEachNode=function(e){this.infiniteCache&&this.infiniteCache.forEachNodeDeep(e)},t.prototype.getTopLevelRowCount=function(){return this.getRowCount()},t.prototype.getTopLevelRowDisplayedIndex=function(e){return e},t.prototype.getRowIndexAtPixel=function(e){if(this.rowHeight!==0){var o=Math.floor(e/this.rowHeight),n=this.getRowCount()-1;return o>n?n:o}return 0},t.prototype.getRowCount=function(){return this.infiniteCache?this.infiniteCache.getRowCount():0},t.prototype.isRowPresent=function(e){var o=this.getRowNode(e.id);return!!o},t.prototype.refreshCache=function(){this.infiniteCache&&this.infiniteCache.refreshCache()},t.prototype.purgeCache=function(){this.infiniteCache&&this.infiniteCache.purgeCache()},t.prototype.isLastRowIndexKnown=function(){return this.infiniteCache?this.infiniteCache.isLastRowIndexKnown():!1},t.prototype.setRowCount=function(e,o){this.infiniteCache&&this.infiniteCache.setRowCount(e,o)},Un([y("filterManager")],t.prototype,"filterManager",void 0),Un([y("sortController")],t.prototype,"sortController",void 0),Un([y("selectionService")],t.prototype,"selectionService",void 0),Un([y("rowRenderer")],t.prototype,"rowRenderer",void 0),Un([y("rowNodeBlockLoader")],t.prototype,"rowNodeBlockLoader",void 0),Un([Q],t.prototype,"init",null),Un([zt],t.prototype,"destroyDatasource",null),t=Un([ne("rowModel")],t),t}(K),K9="31.0.1",Y9={version:K9,moduleName:ie.InfiniteRowModelModule,rowModel:"infinite",beans:[$9]},q9=function(){function r(){}return r.prototype.setBeans=function(t){this.beans=t},r.prototype.getFileName=function(t){var e=this.getDefaultFileExtension();return(t==null||!t.length)&&(t=this.getDefaultFileName()),t.indexOf(".")===-1?"".concat(t,".").concat(e):t},r.prototype.getData=function(t){var e=this.createSerializingSession(t),o=this.beans.gridSerializer.serialize(e,t);return o},r.prototype.getDefaultFileName=function(){return"export.".concat(this.getDefaultFileExtension())},r}(),Q9=function(){function r(t){this.groupColumns=[];var e=t.columnModel,o=t.valueService,n=t.gridOptionsService,i=t.valueFormatterService,s=t.valueParserService,a=t.processCellCallback,l=t.processHeaderCallback,c=t.processGroupHeaderCallback,u=t.processRowGroupCallback;this.columnModel=e,this.valueService=o,this.gridOptionsService=n,this.valueFormatterService=i,this.valueParserService=s,this.processCellCallback=a,this.processHeaderCallback=l,this.processGroupHeaderCallback=c,this.processRowGroupCallback=u}return r.prototype.prepare=function(t){this.groupColumns=t.filter(function(e){return!!e.getColDef().showRowGroup})},r.prototype.extractHeaderValue=function(t){var e=this.getHeaderName(this.processHeaderCallback,t);return e??""},r.prototype.extractRowCellValue=function(t,e,o,n,i){var s=this.gridOptionsService.get("groupHideOpenParents"),a=(!s||i.footer)&&this.shouldRenderGroupSummaryCell(i,t,e)?this.createValueForGroupNode(i):this.valueService.getValue(t,i),l=this.processCell({accumulatedRowIndex:o,rowNode:i,column:t,value:a,processCellCallback:this.processCellCallback,type:n});return l},r.prototype.shouldRenderGroupSummaryCell=function(t,e,o){var n,i=t&&t.group;if(!i)return!1;var s=this.groupColumns.indexOf(e);if(s!==-1){if(((n=t.groupData)===null||n===void 0?void 0:n[e.getId()])!=null||this.gridOptionsService.isRowModelType("serverSide")&&t.group)return!0;if(t.footer&&t.level===-1){var a=e.getColDef(),l=a==null||a.showRowGroup===!0;return l||a.showRowGroup===this.columnModel.getRowGroupColumns()[0].getId()}}var c=this.gridOptionsService.isGroupUseEntireRow(this.columnModel.isPivotMode());return o===0&&c},r.prototype.getHeaderName=function(t,e){return t?t({column:e,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context}):this.columnModel.getDisplayNameForColumn(e,"csv",!0)},r.prototype.createValueForGroupNode=function(t){if(this.processRowGroupCallback)return this.processRowGroupCallback({node:t,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context});var e=t.footer,o=[t.key];if(!this.gridOptionsService.isGroupMultiAutoColumn())for(;t.parent;)t=t.parent,o.push(t.key);var n=o.reverse().join(" -> ");return e?"Total ".concat(n):n},r.prototype.processCell=function(t){var e=this,o,n=t.accumulatedRowIndex,i=t.rowNode,s=t.column,a=t.value,l=t.processCellCallback,c=t.type;return l?{value:(o=l({accumulatedRowIndex:n,column:s,node:i,value:a,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context,type:c,parseValue:function(u){return e.valueParserService.parseValue(s,i,u,e.valueService.getValue(s,i))},formatValue:function(u){var d;return(d=e.valueFormatterService.formatValue(s,i,u))!==null&&d!==void 0?d:u}}))!==null&&o!==void 0?o:""}:s.getColDef().useValueFormatterForExport!==!1?{value:a??"",valueFormatted:this.valueFormatterService.formatValue(s,i,a)}:{value:a??""}},r}(),X9=function(){function r(){}return r.download=function(t,e){var o=document.defaultView||window;if(!o){console.warn("AG Grid: There is no `window` associated with the current `document`");return}var n=document.createElement("a"),i=o.URL.createObjectURL(e);n.setAttribute("href",i),n.setAttribute("download",t),n.style.display="none",document.body.appendChild(n),n.dispatchEvent(new MouseEvent("click",{bubbles:!1,cancelable:!0,view:o})),document.body.removeChild(n),o.setTimeout(function(){o.URL.revokeObjectURL(i)},0)},r}(),Z9=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),Ng=`\r
`,J9=function(r){Z9(t,r);function t(e){var o=r.call(this,e)||this;o.isFirstLine=!0,o.result="";var n=e.suppressQuotes,i=e.columnSeparator;return o.suppressQuotes=n,o.columnSeparator=i,o}return t.prototype.addCustomContent=function(e){var o=this;e&&(typeof e=="string"?(/^\s*\n/.test(e)||this.beginNewLine(),e=e.replace(/\r?\n/g,Ng),this.result+=e):e.forEach(function(n){o.beginNewLine(),n.forEach(function(i,s){s!==0&&(o.result+=o.columnSeparator),o.result+=o.putInQuotes(i.data.value||""),i.mergeAcross&&o.appendEmptyCells(i.mergeAcross)})}))},t.prototype.onNewHeaderGroupingRow=function(){return this.beginNewLine(),{onColumn:this.onNewHeaderGroupingRowColumn.bind(this)}},t.prototype.onNewHeaderGroupingRowColumn=function(e,o,n,i){n!=0&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(o),this.appendEmptyCells(i)},t.prototype.appendEmptyCells=function(e){for(var o=1;o<=e;o++)this.result+=this.columnSeparator+this.putInQuotes("")},t.prototype.onNewHeaderRow=function(){return this.beginNewLine(),{onColumn:this.onNewHeaderRowColumn.bind(this)}},t.prototype.onNewHeaderRowColumn=function(e,o){o!=0&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(this.extractHeaderValue(e))},t.prototype.onNewBodyRow=function(){return this.beginNewLine(),{onColumn:this.onNewBodyRowColumn.bind(this)}},t.prototype.onNewBodyRowColumn=function(e,o,n){var i;o!=0&&(this.result+=this.columnSeparator);var s=this.extractRowCellValue(e,o,o,"csv",n);this.result+=this.putInQuotes((i=s.valueFormatted)!==null&&i!==void 0?i:s.value)},t.prototype.putInQuotes=function(e){if(this.suppressQuotes)return e;if(e==null)return'""';var o;typeof e=="string"?o=e:typeof e.toString=="function"?o=e.toString():(console.warn("AG Grid: unknown value type during csv conversion"),o="");var n=o.replace(/"/g,'""');return'"'+n+'"'},t.prototype.parse=function(){return this.result},t.prototype.beginNewLine=function(){this.isFirstLine||(this.result+=Ng),this.isFirstLine=!1},t}(Q9),eH=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),jn=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},tH=function(r){eH(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.postConstruct=function(){this.setBeans({gridSerializer:this.gridSerializer,gridOptionsService:this.gridOptionsService})},t.prototype.getMergedParams=function(e){var o=this.gridOptionsService.get("defaultCsvExportParams");return Object.assign({},o,e)},t.prototype.export=function(e){if(this.isExportSuppressed())return console.warn("AG Grid: Export cancelled. Export is not allowed as per your configuration."),"";var o=this.getMergedParams(e),n=this.getData(o),i=new Blob(["\uFEFF",n],{type:"text/plain"});return X9.download(this.getFileName(o.fileName),i),n},t.prototype.exportDataAsCsv=function(e){return this.export(e)},t.prototype.getDataAsCsv=function(e,o){o===void 0&&(o=!1);var n=o?Object.assign({},e):this.getMergedParams(e);return this.getData(n)},t.prototype.getDefaultFileExtension=function(){return"csv"},t.prototype.createSerializingSession=function(e){var o=this,n=o.columnModel,i=o.valueService,s=o.gridOptionsService,a=o.valueFormatterService,l=o.valueParserService,c=e,u=c.processCellCallback,d=c.processHeaderCallback,p=c.processGroupHeaderCallback,h=c.processRowGroupCallback,f=c.suppressQuotes,g=c.columnSeparator;return new J9({columnModel:n,valueService:i,gridOptionsService:s,valueFormatterService:a,valueParserService:l,processCellCallback:u||void 0,processHeaderCallback:d||void 0,processGroupHeaderCallback:p||void 0,processRowGroupCallback:h||void 0,suppressQuotes:f||!1,columnSeparator:g||","})},t.prototype.isExportSuppressed=function(){return this.gridOptionsService.get("suppressCsvExport")},jn([y("columnModel")],t.prototype,"columnModel",void 0),jn([y("valueService")],t.prototype,"valueService",void 0),jn([y("gridSerializer")],t.prototype,"gridSerializer",void 0),jn([y("gridOptionsService")],t.prototype,"gridOptionsService",void 0),jn([y("valueFormatterService")],t.prototype,"valueFormatterService",void 0),jn([y("valueParserService")],t.prototype,"valueParserService",void 0),jn([Q],t.prototype,"postConstruct",null),t=jn([ne("csvCreator")],t),t}(q9),oH=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),Wn=function(r,t,e,o){var n=arguments.length,i=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(i=(n<3?s(i):n>3?s(t,e,i):s(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},Gg;(function(r){r[r.HEADER_GROUPING=0]="HEADER_GROUPING",r[r.HEADER=1]="HEADER",r[r.BODY=2]="BODY"})(Gg||(Gg={}));var nH=function(r){oH(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.serialize=function(e,o){o===void 0&&(o={});var n=o.allColumns,i=o.columnKeys,s=o.skipRowGroups,a=this.getColumnsToExport(n,s,i),l=Ae.compose(this.prepareSession(a),this.prependContent(o),this.exportColumnGroups(o,a),this.exportHeaders(o,a),this.processPinnedTopRows(o,a),this.processRows(o,a),this.processPinnedBottomRows(o,a),this.appendContent(o));return l(e).parse()},t.prototype.processRow=function(e,o,n,i){var s=o.shouldRowBeSkipped||function(){return!1},a=this.gridOptionsService.context,l=this.gridOptionsService.api,c=this.gridOptionsService.columnApi,u=this.gridOptionsService.get("groupRemoveSingleChildren"),d=this.gridOptionsService.get("groupRemoveLowestSingleChildren"),p=o.rowPositions!=null,h=p||!!o.onlySelected,f=this.gridOptionsService.get("groupHideOpenParents")&&!h,g=this.columnModel.isPivotMode()?i.leafGroup:!i.group,_=!!i.footer;o.skipRowGroups;var C=d&&i.leafGroup,E=i.allChildrenCount===1&&(u||C);if(!(!g&&!_&&(o.skipRowGroups||E||f)||o.onlySelected&&!i.isSelected()||o.skipPinnedTop&&i.rowPinned==="top"||o.skipPinnedBottom&&i.rowPinned==="bottom")){var T=i.level===-1;if(!(T&&!g&&!_)){var P=s({node:i,api:l,columnApi:c,context:a});if(!P){var A=e.onNewBodyRow(i);if(n.forEach(function(I,F){A.onColumn(I,F,i)}),o.getCustomContentBelowRow){var b=o.getCustomContentBelowRow({node:i,api:l,columnApi:c,context:a});b&&e.addCustomContent(b)}}}}},t.prototype.appendContent=function(e){return function(o){var n=e.appendContent;return n&&o.addCustomContent(n),o}},t.prototype.prependContent=function(e){return function(o){var n=e.prependContent;return n&&o.addCustomContent(n),o}},t.prototype.prepareSession=function(e){return function(o){return o.prepare(e),o}},t.prototype.exportColumnGroups=function(e,o){var n=this;return function(i){if(!e.skipColumnGroupHeaders){var s=new Uy,a=n.displayedGroupCreator.createDisplayedGroups(o,s,null);n.recursivelyAddHeaderGroups(a,i,e.processGroupHeaderCallback)}return i}},t.prototype.exportHeaders=function(e,o){return function(n){if(!e.skipColumnHeaders){var i=n.onNewHeaderRow();o.forEach(function(s,a){i.onColumn(s,a,void 0)})}return n}},t.prototype.processPinnedTopRows=function(e,o){var n=this;return function(i){var s=n.processRow.bind(n,i,e,o);return e.rowPositions?e.rowPositions.filter(function(a){return a.rowPinned==="top"}).sort(function(a,l){return a.rowIndex-l.rowIndex}).map(function(a){return n.pinnedRowModel.getPinnedTopRow(a.rowIndex)}).forEach(s):n.pinnedRowModel.forEachPinnedTopRow(s),i}},t.prototype.processRows=function(e,o){var n=this;return function(i){var s=n.rowModel,a=s.getType(),l=a==="clientSide",c=a==="serverSide",u=!l&&e.onlySelected,d=n.processRow.bind(n,i,e,o),p=e.exportedRows,h=p===void 0?"filteredAndSorted":p;if(e.rowPositions)e.rowPositions.filter(function(g){return g.rowPinned==null}).sort(function(g,_){return g.rowIndex-_.rowIndex}).map(function(g){return s.getRow(g.rowIndex)}).forEach(d);else if(n.columnModel.isPivotMode())l?s.forEachPivotNode(d,!0):c?s.forEachNodeAfterFilterAndSort(d,!0):s.forEachNode(d);else if(e.onlySelectedAllPages||u){var f=n.selectionService.getSelectedNodes();n.replicateSortedOrder(f),f.forEach(d)}else h==="all"?s.forEachNode(d):l||c?s.forEachNodeAfterFilterAndSort(d,!0):s.forEachNode(d);return i}},t.prototype.replicateSortedOrder=function(e){var o=this,n=this.sortController.getSortOptions(),i=function(s,a){var l,c,u,d;return s.rowIndex!=null&&a.rowIndex!=null?s.rowIndex-a.rowIndex:s.level===a.level?((l=s.parent)===null||l===void 0?void 0:l.id)===((c=a.parent)===null||c===void 0?void 0:c.id)?o.rowNodeSorter.compareRowNodes(n,{rowNode:s,currentPos:(u=s.rowIndex)!==null&&u!==void 0?u:-1},{rowNode:a,currentPos:(d=a.rowIndex)!==null&&d!==void 0?d:-1}):i(s.parent,a.parent):s.level>a.level?i(s.parent,a):i(s,a.parent)};e.sort(i)},t.prototype.processPinnedBottomRows=function(e,o){var n=this;return function(i){var s=n.processRow.bind(n,i,e,o);return e.rowPositions?e.rowPositions.filter(function(a){return a.rowPinned==="bottom"}).sort(function(a,l){return a.rowIndex-l.rowIndex}).map(function(a){return n.pinnedRowModel.getPinnedBottomRow(a.rowIndex)}).forEach(s):n.pinnedRowModel.forEachPinnedBottomRow(s),i}},t.prototype.getColumnsToExport=function(e,o,n){e===void 0&&(e=!1),o===void 0&&(o=!1);var i=this.columnModel.isPivotMode();if(n&&n.length)return this.columnModel.getGridColumns(n);var s=this.gridOptionsService.get("treeData"),a=[];if(e&&!i){var l=s?this.columnModel.getGridColumns([Hi]):[];a=l.concat(this.columnModel.getAllGridColumns())}else a=this.columnModel.getAllDisplayedColumns();return o&&!s&&(a=a.filter(function(c){return c.getColId()!==Hi})),a},t.prototype.recursivelyAddHeaderGroups=function(e,o,n){var i=[];e.forEach(function(s){var a=s;a.getChildren&&a.getChildren().forEach(function(l){return i.push(l)})}),e.length>0&&e[0]instanceof vt&&this.doAddHeaderHeader(o,e,n),i&&i.length>0&&this.recursivelyAddHeaderGroups(i,o,n)},t.prototype.doAddHeaderHeader=function(e,o,n){var i=this,s=e.onNewHeaderGroupingRow(),a=0;o.forEach(function(l){var c=l,u;n?u=n({columnGroup:c,api:i.gridOptionsService.api,columnApi:i.gridOptionsService.columnApi,context:i.gridOptionsService.context}):u=i.columnModel.getDisplayNameForColumnGroup(c,"header");var d=c.getLeafColumns().reduce(function(p,h,f,g){var _=Ae.last(p),C=h.getColumnGroupShow()==="open";return C?(!_||_[1]!=null)&&(_=[f],p.push(_)):_&&_[1]==null&&(_[1]=f-1),f===g.length-1&&_&&_[1]==null&&(_[1]=f),p},[]);s.onColumn(c,u||"",a++,c.getLeafColumns().length-1,d)})},Wn([y("displayedGroupCreator")],t.prototype,"displayedGroupCreator",void 0),Wn([y("columnModel")],t.prototype,"columnModel",void 0),Wn([y("rowModel")],t.prototype,"rowModel",void 0),Wn([y("pinnedRowModel")],t.prototype,"pinnedRowModel",void 0),Wn([y("selectionService")],t.prototype,"selectionService",void 0),Wn([y("rowNodeSorter")],t.prototype,"rowNodeSorter",void 0),Wn([y("sortController")],t.prototype,"sortController",void 0),t=Wn([ne("gridSerializer")],t),t}(K),iH="31.0.1",rH={version:iH,moduleName:ie.CsvExportModule,beans:[tH,nH]},sH=[V9,Y9,rH];Se.registerModules(sH);const aH=r=>r.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),lH=r=>`on${r.charAt(0).toUpperCase()}${r.substring(1,r.length)}`,cH=()=>{const r={};_o.PUBLIC_EVENTS.map(n=>lH(aH(n))).forEach(n=>r[n]=void 0);const e={props(){const n={};return _o.ALL_PROPERTIES.forEach(i=>{var s;this[i]!==_o.VUE_OMITTED_PROPERTY&&(i in this||i in this.gridOptions)&&(n[i]=(s=this[i])!==null&&s!==void 0?s:this.gridOptions[i])}),n}},o={modelValue:{handler(n,i){!this.gridCreated||!this.api||n!==i&&(n&&i&&n.length===i.length&&n.every((s,a)=>s===i[a])||_o.processOnChange({rowData:n},this.api))},deep:!0},props:{handler(n,i){if(!this.gridCreated||!this.api)return;const s={};Object.entries(n).forEach(([a,l])=>{i[a]!==l&&(s[a]=l)}),_o.processOnChange(s,this.api)},deep:!0}};return _o.ALL_PROPERTIES.filter(n=>n!="gridOptions").forEach(n=>{r[n]={default:_o.VUE_OMITTED_PROPERTY}}),[r,e,o]};class Zs{static getComponentDefinition(t,e){let o;return typeof t=="string"?o=this.searchForComponentInstance(e,t):o={extends:X(Object.assign({},t))},o||console.error(`Could not find component with name of ${t}. Is it in Vue.components?`),o.extends?(o.extends.setup&&(o.setup=o.extends.setup),o.extends.props=this.addParamsToProps(o.extends.props)):o.props=this.addParamsToProps(o.props),o}static addParamsToProps(t){return!t||Array.isArray(t)&&t.indexOf("params")===-1?t=["params",...t||[]]:typeof t=="object"&&!t.params&&(t.params={type:Object}),t}static createAndMountComponent(t,e,o,n){const i=Zs.getComponentDefinition(t,o);if(!i)return;const{vNode:s,destroy:a,el:l}=this.mount(i,{params:Object.freeze(e)},o,n||{});return{componentInstance:s.component.proxy,element:l,destroy:a}}static mount(t,e,o,n){let i=R(t,e);i.appContext=o.$.appContext,i.appContext.provides=Object.assign(Object.assign(Object.assign({},n),i.appContext.provides?i.appContext.provides:{}),o.$parent.$options.provide?o.$parent.$options.provide:{});let s=document.createElement("div");return Oh(i,s),{vNode:i,destroy:()=>{s&&Oh(null,s),s=null,i=null},el:s}}static searchForComponentInstance(t,e,o=10,n=!1){let i=null,s=t.$parent,a=0;for(;!i&&s&&s.$options&&++a<o;){const l=s;l.$options&&l.$options.components&&l.$options.components[e]?i=l.$options.components[e]:l[e]&&(i=l[e]),s=s.$parent}if(!i){const l=t.$.appContext.components;l&&l[e]&&(i=l[e])}return!i&&!n?(console.error(`Could not find component with name of ${e}. Is it in Vue.components?`),null):i}}class Bs extends S9{constructor(t,e){super(),this.parent=t,Bs.provides||(Bs.provides=e)}createWrapper(t){const e=this;class o extends uH{init(s){super.init(s)}hasMethod(s){const a=n.getFrameworkComponentInstance();return a[s]?!0:a.$.setupState[s]!=null}callMethod(s,a){var l;const c=this.getFrameworkComponentInstance(),u=n.getFrameworkComponentInstance();return u[s]?u[s].apply(c,a):(l=u.$.setupState[s])===null||l===void 0?void 0:l.apply(c,a)}addMethod(s,a){n[s]=a}overrideProcessing(s){return e.parent.autoParamsRefresh&&s==="refresh"}processMethod(s,a){return s==="refresh"&&(this.getFrameworkComponentInstance().params=a[0]),this.hasMethod(s)?this.callMethod(s,a):s==="refresh"}createComponent(s){return e.createComponent(t,s)}}const n=new o;return n}createComponent(t,e){return Zs.createAndMountComponent(t,e,this.parent,Bs.provides)}createMethodProxy(t,e,o){return function(){return t.overrideProcessing(e)?t.processMethod(e,arguments):t.hasMethod(e)?t.callMethod(e,arguments):(o&&console.warn("AG Grid: Framework component is missing the method "+e+"()"),null)}}destroy(){this.parent=null}}class uH{getGui(){return this.element}destroy(){this.getFrameworkComponentInstance()&&typeof this.getFrameworkComponentInstance().destroy=="function"&&this.getFrameworkComponentInstance().destroy(),this.unmount()}getFrameworkComponentInstance(){return this.componentInstance}init(t){var e;const{componentInstance:o,element:n,destroy:i}=this.createComponent(t);this.componentInstance=o,this.unmount=i,this.element=(e=n.firstElementChild)!==null&&e!==void 0?e:n}}class dH extends ow{constructor(t){super("vue"),this.parent=t}frameworkComponent(t,e){let o=Zs.searchForComponentInstance(this.parent,t,10,!0)?t:null;if(!o&&e&&e[t]){const n=e[t];o=Zs.searchForComponentInstance(this.parent,n,10,!0)?n:null}return o}isFrameworkComponent(t){return typeof t=="object"}}const pH=new Set(["rowDataUpdated","cellValueChanged","rowValueChanged"]),hH=new Set([w.EVENT_GRID_PRE_DESTROYED]),kg="onUpdate:modelValue",fH="update:modelValue",[gH,vH,mH]=cH(),yH=X({render(){return Dw("div")},props:Object.assign({gridOptions:{type:Object,default:()=>({})},autoParamsRefresh:{type:Boolean,default:()=>!1},componentDependencies:{type:Array,default:()=>[]},plugins:[],modules:{type:Array,default:()=>[]},modelValue:{type:Array,default:void 0,required:!1}},gH),data(){return{api:void 0,gridCreated:!1,isDestroyed:!1,gridReadyFired:!1,emitRowModel:void 0}},computed:vH,watch:mH,methods:{globalEventListenerFactory(r){return(t,e)=>{if(this.isDestroyed)return;t==="gridReady"&&(this.gridReadyFired=!0);const o=hH.has(t);o&&!r||!o&&r||this.updateModelIfUsed(t)}},processChanges(r,t,e){if(this.gridCreated){if(this.skipChange(r,t,e))return;const o={[r]:r==="rowData"?Object.isFrozen(t)?t:bc(Ac(t)):t};_o.processOnChange(o,this.api)}},checkForBindingConflicts(){const r=this;(r.rowData||this.gridOptions.rowData)&&r.modelValue&&console.warn("AG Grid: Using both rowData and v-model. rowData will be ignored.")},getRowData(){var r;const t=[];return(r=this.api)===null||r===void 0||r.forEachNode(e=>{t.push(e.data)}),t},updateModelIfUsed(r){this.gridReadyFired&&this.$attrs[kg]&&pH.has(r)&&this.emitRowModel&&this.emitRowModel()},getRowDataBasedOnBindings(){const r=this,t=r.modelValue;return t||(r.rowData?r.rowData:r.gridOptions.rowData)},getProvides(){let r=Mw(),t={};for(;r;)r&&r.provides&&(t=Object.assign(Object.assign({},t),r.provides)),r=r.parent;return t},skipChange(r,t,e){if(this.gridReadyFired&&r==="rowData"&&this.$attrs[kg]){if(t===e)return!0;if(t&&e){const o=t,n=e;if(o.length===n.length){for(let i=0;i<o.length;i++)if(o[i]!==n[i])return!1;return!0}}}return!1},debounce(r,t){let e;return()=>{const o=function(){r()};window.clearTimeout(e),e=window.setTimeout(o,t)}}},mounted(){this.emitRowModel=this.debounce(()=>{this.$emit(fH,Object.freeze(this.getRowData()))},20);const r=this.getProvides(),t=new Bs(this,r),e=bc(_o.combineAttributesAndGridOptions(Ac(this.gridOptions),this));this.checkForBindingConflicts();const o=this.getRowDataBasedOnBindings();o!==_o.VUE_OMITTED_PROPERTY&&(e.rowData=o&&(Object.isFrozen(o)?o:bc(Ac(o))));const n={globalEventListener:this.globalEventListenerFactory().bind(this),globalSyncEventListener:this.globalEventListenerFactory(!0).bind(this),frameworkOverrides:new dH(this),providedBeanInstances:{frameworkComponentWrapper:t},modules:this.modules};this.api=C9(this.$el,e,n),this.gridCreated=!0},unmounted(){var r;this.gridCreated&&((r=this.api)===null||r===void 0||r.destroy(),this.isDestroyed=!0)}}),CH={style:{width:"100%",flex:"1 1 auto"}},wH=X({__name:"NumberProfile",emits:["row-selected"],setup(r,{emit:t}){const{t:e}=ve(),o=Lw(),n=Wi(),i=Ye(),s=x([]),a=t;function l(){s.value=n.numbers}const c={flex:1,resizable:!0,sortable:!0},u=[{headerName:e("Number"),field:"number",checkboxSelection:!0,valueFormatter:f=>Mt(f.value)},{headerName:e("Name"),field:"name"}];function d(f){a("row-selected",v(f.api.getSelectedRows()))}Oe(()=>n.numbers,l,{deep:!0});const p=te(()=>n.numbers.length>0&&i.myNumbers.length===0),h=te(()=>n.accounts.length>1?2:1);return(f,g)=>(S(),H(Gp,{visible:p.value,title:"Number",icon:"fa-solid fa-phone",index:h.value},{default:D(()=>[m("div",CH,[R(v(yH),{style:{height:"350px",width:"100%"},class:Fe(v(o).themeAg),"column-defs":u,"row-data":s.value,"row-selection":"multiple","row-multi-select-with-click":!0,"default-col-def":c,onRowSelected:d},null,8,["class","row-data"])])]),_:1},8,["visible","index"]))}}),_H={class:"d-flex justify-content-end gap-3 mt-5"},SH=X({__name:"BaseOnBoarding",props:{modelValue:{type:Boolean}},emits:["update:modelValue"],setup(r,{emit:t}){const e=r,o=x(e.modelValue),n=t;Oe(()=>e.modelValue,q=>{o.value=q}),Oe(o,q=>{n("update:modelValue",q)});const{t:i}=ve(),{register:s}=Ki(),a=Ye(),l=Wi(),{uploadImage:c}=Wd(),u=ea(),d=x({fullName:"",userType:"",company:"",jobTitle:"",email:"",addressType:"",address1:"",address2:"",city:"",state:""});function p(){for(const q of Object.keys(d.value))d.value[q]=""}const h=x(!0),f=x(null),g=x(!1),_=x([]),C=x(),E=x(!1),T=x(!1);function P(q,$){if($!==0)return q();o.value=!1,iv()}function A(q){f.value=q,q&&(h.value=!0)}function b(q){_.value=q}async function I(q){await hv(C.value).then(async()=>{q(),u.joinRoom(),T.value=!1,E.value=!1,g.value=!1}).catch($=>{var me,Ve;T.value=!1,E.value=!1,g.value=!1;const ce=(me=$.response)==null?void 0:me.data;if(Pn(ce==null?void 0:ce.message),((Ve=$.response)==null?void 0:Ve.status)===422){const Qe=ce==null?void 0:ce.form_errors;if(console.log({formErrors:Qe}),Object.keys(Qe).length>0)for(const nt of Object.keys(Qe)){const fe=jg.camelCase(nt),ye=Qe[nt];if(typeof ye!="string"){d.value[fe]=[];for(const it of ye)d.value[fe]+=it,d.value[fe]+="<br>"}else d.value[fe]=ye}throw $}})}async function F(q){f.value?(g.value=!0,h.value=!0,await rv(f.value.accountCode),g.value=!1,q()):h.value=!1}async function U(q){E.value=!0,setTimeout(async()=>{g.value=!0,T.value?(T.value=!1,E.value=!1,g.value=!1):(await c(),I(q).then(async()=>{if(await jl(),a.myNumbers.length>0||l.numbers.length===0){o.value=!1,await Ph(!1);for(const $ of a.myNumbers)s($.numbersUnmasked,$.password,$.name)}}))},100)}async function k(){if(o.value=!1,await Ph(!1),_.value.length>0){const q=[];for(const $ of _.value)$.active=!0,await a.setMyNumbers($),s($.numbersUnmasked,$.password,$.name),q.push($.numbersUnmasked);xw(q)}}function M(q,$){if(l.accounts.length>1)switch($){case 0:F(q);break;case 1:U(q);break;case 2:k();break}else switch($){case 0:U(q);break;case 1:k();break}}function z(q){T.value=q}function V(q){C.value=q}return(q,$)=>(S(),H(Wt,{id:"settings",modelValue:o.value,"onUpdate:modelValue":$[2]||($[2]=ce=>o.value=ce),size:"xl",persist:"",center:"",scrollable:""},{body:D(()=>[R(YM,{color:v(se).LineIcon},{footer:D(({nextTab:ce,prevTab:me,activeTabIndex:Ve,tabsLength:Qe})=>[m("div",_H,[R(ks,{class:"secondary-btn text-uppercase",disabled:g.value,onClick:nt=>P(me,Ve)},{default:D(()=>[he(L(Ve===0?v(i)("Cancel"):v(i)("Previous")),1)]),_:2},1032,["disabled","onClick"]),R(ks,{class:"primary-btn text-uppercase",disabled:g.value,onClick:nt=>M(ce,Ve)},{default:D(()=>[Ne(R(Te,{name:"loader",class:"feather feather-loader spin me-2"},null,512),[[Vi,g.value]]),he(" "+L(Ve===Qe-1?v(i)("Finish"):v(i)("Continue")),1)]),_:2},1032,["disabled","onClick"])])]),default:D(()=>[R(JM,{"account-selected":!h.value,onChange:A},null,8,["account-selected"]),R(e2,{"form-error":d.value,"onUpdate:formError":$[0]||($[0]=ce=>d.value=ce),"is-submit-profile":E.value,"onUpdate:isSubmitProfile":$[1]||($[1]=ce=>E.value=ce),onHasError:z,onSubmit:V,onChange:p},null,8,["form-error","is-submit-profile"]),R(wH,{onRowSelected:b})]),_:1},8,["color"])]),_:1},8,["modelValue"]))}}),EH=oe(SH,[["__scopeId","data-v-b057cc31"]]),RH={class:"logo"};const TH={key:1,src:o_,class:"navbar-logo",alt:"logo"},bH=X({__name:"HeaderLogo",setup(r){return(e,o)=>{const n=lt("router-link");return S(),O("section",RH,[R(n,{to:"/"},{default:D(()=>[(S(),O("img",TH))]),_:1})])}}}),AH=oe(bH,[["__scopeId","data-v-ebc3f985"]]),OH=r=>(Oo("data-v-0868545d"),r=r(),Po(),r),PH=OH(()=>m("svg",{width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[m("path",{d:"M8.25 14.25C11.5637 14.25 14.25 11.5637 14.25 8.25C14.25 4.93629 11.5637 2.25 8.25 2.25C4.93629 2.25 2.25 4.93629 2.25 8.25C2.25 11.5637 4.93629 14.25 8.25 14.25Z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),m("path",{d:"M15.75 15.75L12.4875 12.4875",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),IH={class:"dropdown-menu show"},DH=["onClick"],MH={class:"d-flex align-items-center gap-2"},LH=["innerHTML"],xH={class:"strong tag-type-user"},FH={class:"icon-container search"},NH={class:"arrow-search"},GH=X({__name:"HeaderSearchBar",setup(r){const{t}=ve(),e=Ye(),o=ri(),n=x(""),i=x([]),s=zi(),a=ji(),l=te(()=>g=>`${s.avatars[g][32]}`),c=x(!1);function u(){c.value=!0}function d(){c.value=!1}async function p(){if(!n.value){d(),i.value=[];return}u();const g=[];if(e.directories.forEach(_=>{_.userName.toLowerCase().includes(n.value.toLowerCase())&&g.push({is_directory:!0,is_imported_contact:!1,name:_.userName,id:_.userId})}),e.importedContacts.forEach(_=>{const C=`${_.firstName} ${_.lastName}`;C.toLowerCase().includes(n.value.toLowerCase())&&g.push({is_directory:!1,is_imported_contact:!0,name:C,id:_.id})}),!isNaN(+n.value)||Fw(n.value)){try{const _=await cv(Ti(n.value)),C=Nw(_).groupBy("user_id").flatten(1).all();C==null||C.forEach(E=>{g.some(T=>E.user_id===T.id)||g.push({id:E.user_id,is_directory:!0,is_imported_contact:!1,name:E.user_name})})}catch(_){console.error(_)}e.importedContacts.forEach(_=>{if(!(!_.phones||_.phones.length==0)&&!g.some(C=>_.id===C.id)&&_.phones.some(C=>Ti(C.number).includes(Ti(n.value)))){g.push({is_directory:!1,is_imported_contact:!0,name:`${_.firstName} ${_.lastName}`,id:_.id});return}})}g.sort((_,C)=>_.name.localeCompare(C.name)),g.forEach(_=>{const C=n.value.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),E=new RegExp(C,"gi");_.name=_.name.replace(E,'<span class="fw-bold">$&</span>')}),i.value=g}function h(){d(),o.push({name:Me.Search,query:{search:n.value}})}function f(g){i.value=[],n.value="",o.push({name:g.is_imported_contact?Me.Contact:Me.Directory,params:{id:g.id}})}return(g,_)=>Ne((S(),O("div",{class:"search-bar-container",onFocusin:u},[m("form",{onSubmit:Bi(h,["prevent"])},[PH,Ne(m("input",{id:"search","onUpdate:modelValue":_[0]||(_[0]=C=>n.value=C),type:"search",name:"search",placeholder:"Search",onInput:p},null,544),[[il,n.value]]),Ne(m("ul",IH,[(S(!0),O(de,null,qe(i.value,C=>{var E,T;return S(),O("li",{key:C.id},[m("a",{class:"dropdown-item sidebar-contact-info",href:"javascript:void(0);",onClick:P=>f(C)},[m("section",MH,[C.is_directory?(S(),H(js,{key:0,src:l.value(C.id),size:"1.25rem",status:((T=(E=v(a))==null?void 0:E.status[C.id])==null?void 0:T.status)??"offline"},null,8,["src","status"])):Z("",!0),C.is_imported_contact?(S(),H(js,{key:1,src:v(e_),size:"1.25rem"},null,8,["src"])):Z("",!0),m("span",{innerHTML:C.name},null,8,LH),m("span",xH,L(C.is_directory?v(t)("Directory"):v(t)("Contact")),1)])],8,DH)])}),128)),m("li",null,[m("a",{class:"dropdown-item",onClick:h},[m("div",{style:ue({color:v(se).TextPrimary}),class:"d-flex gap-1 align-items-center"},[m("div",FH,[R(Te,{style:ue([{top:"auto"},{stroke:v(se).LineIcon}]),name:"search",size:14},null,8,["style"])]),R(v(ze),{size:14},{default:D(()=>[he(L(v(t)("Search messages for")),1)]),_:1}),R(v(ze),{size:14,weight:700,class:"query-search"},{default:D(()=>[he(' "'+L(n.value)+'"... ',1)]),_:1}),m("div",NH,[R(Te,{style:{top:"auto"},name:"chevron-right",size:14})])],4)])])],512),[[Vi,n.value&&c.value]])],32)],32)),[[v(ia),d]])}}),kH=oe(GH,[["__scopeId","data-v-0868545d"]]),HH={class:"ItemLeft"},VH=m("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[m("path",{d:"M20 21V19C20 17.9391 19.5786 16.9217 18.8284 16.1716C18.0783 15.4214 17.0609 15 16 15H8C6.93913 15 5.92172 15.4214 5.17157 16.1716C4.42143 16.9217 4 17.9391 4 19V21",fill:"#E7ECF0"}),m("path",{d:"M20 21V19C20 17.9391 19.5786 16.9217 18.8284 16.1716C18.0783 15.4214 17.0609 15 16 15H8C6.93913 15 5.92172 15.4214 5.17157 16.1716C4.42143 16.9217 4 17.9391 4 19V21",stroke:"#0676C5","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),m("path",{d:"M12 11C14.2091 11 16 9.20914 16 7C16 4.79086 14.2091 3 12 3C9.79086 3 8 4.79086 8 7C8 9.20914 9.79086 11 12 11Z",fill:"#E7ECF0",stroke:"#0676C5","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),BH=X({__name:"UsersItem",setup(r){const{t}=ve(),e=Ui();async function o(){await qg(),await Qg(),await $g(),e.showTeams()}return(n,i)=>(S(),H(v(jr),{value:"Users",class:"DropdownMenuItem",onClick:o},{default:D(()=>[m("div",HH,[VH,R(v(ze),null,{default:D(()=>[he(L(v(t)("Users")),1)]),_:1})])]),_:1}))}}),UH={class:"ItemLeft"},jH=m("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[m("g",{"clip-path":"url(#clip0_329_1560)"},[m("path",{d:"M19.4 15C19.2669 15.3016 19.2272 15.6362 19.286 15.9606C19.3448 16.285 19.4995 16.5843 19.73 16.82L19.79 16.88C19.976 17.0657 20.1235 17.2863 20.2241 17.5291C20.3248 17.7719 20.3766 18.0322 20.3766 18.295C20.3766 18.5578 20.3248 18.8181 20.2241 19.0609C20.1235 19.3037 19.976 19.5243 19.79 19.71C19.6043 19.896 19.3837 20.0435 19.1409 20.1441C18.8981 20.2448 18.6378 20.2966 18.375 20.2966C18.1122 20.2966 17.8519 20.2448 17.6091 20.1441C17.3663 20.0435 17.1457 19.896 16.96 19.71L16.9 19.65C16.6643 19.4195 16.365 19.2648 16.0406 19.206C15.7162 19.1472 15.3816 19.1869 15.08 19.32C14.7842 19.4468 14.532 19.6572 14.3543 19.9255C14.1766 20.1938 14.0813 20.5082 14.08 20.83V21C14.08 21.5304 13.8693 22.0391 13.4942 22.4142C13.1191 22.7893 12.6104 23 12.08 23C11.5496 23 11.0409 22.7893 10.6658 22.4142C10.2907 22.0391 10.08 21.5304 10.08 21V20.91C10.0723 20.579 9.96512 20.258 9.77251 19.9887C9.5799 19.7194 9.31074 19.5143 9 19.4C8.69838 19.2669 8.36381 19.2272 8.03941 19.286C7.71502 19.3448 7.41568 19.4995 7.18 19.73L7.12 19.79C6.93425 19.976 6.71368 20.1235 6.47088 20.2241C6.22808 20.3248 5.96783 20.3766 5.705 20.3766C5.44217 20.3766 5.18192 20.3248 4.93912 20.2241C4.69632 20.1235 4.47575 19.976 4.29 19.79C4.10405 19.6043 3.95653 19.3837 3.85588 19.1409C3.75523 18.8981 3.70343 18.6378 3.70343 18.375C3.70343 18.1122 3.75523 17.8519 3.85588 17.6091C3.95653 17.3663 4.10405 17.1457 4.29 16.96L4.35 16.9C4.58054 16.6643 4.73519 16.365 4.794 16.0406C4.85282 15.7162 4.81312 15.3816 4.68 15.08C4.55324 14.7842 4.34276 14.532 4.07447 14.3543C3.80618 14.1766 3.49179 14.0813 3.17 14.08H3C2.46957 14.08 1.96086 13.8693 1.58579 13.4942C1.21071 13.1191 1 12.6104 1 12.08C1 11.5496 1.21071 11.0409 1.58579 10.6658C1.96086 10.2907 2.46957 10.08 3 10.08H3.09C3.42099 10.0723 3.742 9.96512 4.0113 9.77251C4.28059 9.5799 4.48572 9.31074 4.6 9C4.73312 8.69838 4.77282 8.36381 4.714 8.03941C4.65519 7.71502 4.50054 7.41568 4.27 7.18L4.21 7.12C4.02405 6.93425 3.87653 6.71368 3.77588 6.47088C3.67523 6.22808 3.62343 5.96783 3.62343 5.705C3.62343 5.44217 3.67523 5.18192 3.77588 4.93912C3.87653 4.69632 4.02405 4.47575 4.21 4.29C4.39575 4.10405 4.61632 3.95653 4.85912 3.85588C5.10192 3.75523 5.36217 3.70343 5.625 3.70343C5.88783 3.70343 6.14808 3.75523 6.39088 3.85588C6.63368 3.95653 6.85425 4.10405 7.04 4.29L7.1 4.35C7.33568 4.58054 7.63502 4.73519 7.95941 4.794C8.28381 4.85282 8.61838 4.81312 8.92 4.68H9C9.29577 4.55324 9.54802 4.34276 9.72569 4.07447C9.90337 3.80618 9.99872 3.49179 10 3.17V3C10 2.46957 10.2107 1.96086 10.5858 1.58579C10.9609 1.21071 11.4696 1 12 1C12.5304 1 13.0391 1.21071 13.4142 1.58579C13.7893 1.96086 14 2.46957 14 3V3.09C14.0013 3.41179 14.0966 3.72618 14.2743 3.99447C14.452 4.26276 14.7042 4.47324 15 4.6C15.3016 4.73312 15.6362 4.77282 15.9606 4.714C16.285 4.65519 16.5843 4.50054 16.82 4.27L16.88 4.21C17.0657 4.02405 17.2863 3.87653 17.5291 3.77588C17.7719 3.67523 18.0322 3.62343 18.295 3.62343C18.5578 3.62343 18.8181 3.67523 19.0609 3.77588C19.3037 3.87653 19.5243 4.02405 19.71 4.21C19.896 4.39575 20.0435 4.61632 20.1441 4.85912C20.2448 5.10192 20.2966 5.36217 20.2966 5.625C20.2966 5.88783 20.2448 6.14808 20.1441 6.39088C20.0435 6.63368 19.896 6.85425 19.71 7.04L19.65 7.1C19.4195 7.33568 19.2648 7.63502 19.206 7.95941C19.1472 8.28381 19.1869 8.61838 19.32 8.92V9C19.4468 9.29577 19.6572 9.54802 19.9255 9.72569C20.1938 9.90337 20.5082 9.99872 20.83 10H21C21.5304 10 22.0391 10.2107 22.4142 10.5858C22.7893 10.9609 23 11.4696 23 12C23 12.5304 22.7893 13.0391 22.4142 13.4142C22.0391 13.7893 21.5304 14 21 14H20.91C20.5882 14.0013 20.2738 14.0966 20.0055 14.2743C19.7372 14.452 19.5268 14.7042 19.4 15Z",fill:"#E7ECF0",stroke:"#0676C5","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),m("path",{d:"M12 15C13.6569 15 15 13.6569 15 12C15 10.3431 13.6569 9 12 9C10.3431 9 9 10.3431 9 12C9 13.6569 10.3431 15 12 15Z",stroke:"#0676C5","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})]),m("defs",null,[m("clipPath",{id:"clip0_329_1560"},[m("rect",{width:"24",height:"24",fill:"white"})])])],-1),WH=X({__name:"SettingsItem",setup(r){const{t}=ve(),e=Ui();return(o,n)=>(S(),H(v(jr),{value:"Settings",class:"DropdownMenuItem",onClick:v(e).showSettings},{default:D(()=>[m("div",UH,[jH,R(v(ze),null,{default:D(()=>[he(L(v(t)("Settings")),1)]),_:1})])]),_:1},8,["onClick"]))}}),zH={class:"ItemLeft"},$H=m("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[m("path",{d:"M14.6999 6.29974C14.5166 6.48666 14.414 6.73798 14.414 6.99974C14.414 7.26149 14.5166 7.51281 14.6999 7.69974L16.2999 9.29974C16.4868 9.48296 16.7381 9.58559 16.9999 9.58559C17.2616 9.58559 17.5129 9.48296 17.6999 9.29974L21.4699 5.52974C21.9727 6.64092 22.1249 7.87897 21.9063 9.07888C21.6877 10.2788 21.1086 11.3836 20.2461 12.246C19.3837 13.1084 18.2789 13.6876 17.079 13.9062C15.8791 14.1248 14.641 13.9726 13.5299 13.4697L6.61986 20.3797C6.22203 20.7776 5.68246 21.0011 5.11986 21.0011C4.55725 21.0011 4.01768 20.7776 3.61986 20.3797C3.22203 19.9819 2.99854 19.4423 2.99854 18.8797C2.99854 18.3171 3.22203 17.7776 3.61986 17.3797L10.5299 10.4697C10.027 9.35855 9.87477 8.1205 10.0934 6.92059C10.312 5.72068 10.8911 4.61589 11.7536 3.75346C12.616 2.89102 13.7208 2.3119 14.9207 2.09328C16.1206 1.87465 17.3587 2.0269 18.4699 2.52974L14.7099 6.28974L14.6999 6.29974Z",fill:"#E7ECF0",stroke:"#0676C5","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),KH=X({__name:"SupportItem",setup(r){const t=Ye(),{t:e}=ve();function o(){window.open(t.supportLink,"_blank")}return(n,i)=>(S(),H(v(jr),{value:"Suport",class:"DropdownMenuItem",onClick:o},{default:D(()=>[m("div",zH,[$H,R(v(ze),null,{default:D(()=>[he(L(v(e)("Support")),1)]),_:1})])]),_:1}))}}),YH={class:"ItemLeft"},qH=m("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[m("path",{d:"M21 15.9999V7.9999C20.9996 7.64918 20.9071 7.30471 20.7315 7.00106C20.556 6.69742 20.3037 6.44526 20 6.2699L13 2.2699C12.696 2.09437 12.3511 2.00195 12 2.00195C11.6489 2.00195 11.304 2.09437 11 2.2699L4 6.2699C3.69626 6.44526 3.44398 6.69742 3.26846 7.00106C3.09294 7.30471 3.00036 7.64918 3 7.9999V15.9999C3.00036 16.3506 3.09294 16.6951 3.26846 16.9987C3.44398 17.3024 3.69626 17.5545 4 17.7299L11 21.7299C11.304 21.9054 11.6489 21.9979 12 21.9979C12.3511 21.9979 12.696 21.9054 13 21.7299L20 17.7299C20.3037 17.5545 20.556 17.3024 20.7315 16.9987C20.9071 16.6951 20.9996 16.3506 21 15.9999Z",fill:"#E7ECF0",stroke:"#0676C5","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),m("path",{d:"M3.27002 6.96094L12 12.0109L20.73 6.96094",stroke:"#0676C5","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),m("path",{d:"M12 22.08V12",stroke:"#0676C5","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),m("path",{d:"M16.5 9.40094L7.5 4.21094",stroke:"#0676C5","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),QH=X({__name:"AboutItem",setup(r){const{t}=ve(),e=Ui();return(o,n)=>(S(),H(v(jr),{value:"About",class:"DropdownMenuItem",onClick:v(e).showAbout},{default:D(()=>[m("div",YH,[qH,R(v(ze),null,{default:D(()=>[he(L(v(t)("About")),1)]),_:1})])]),_:1},8,["onClick"]))}}),XH={class:"ItemLeft"},ZH=m("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[m("path",{d:"M9 21H5C4.46957 21 3.96086 20.7893 3.58579 20.4142C3.21071 20.0391 3 19.5304 3 19V5C3 4.46957 3.21071 3.96086 3.58579 3.58579C3.96086 3.21071 4.46957 3 5 3H9",fill:"#E7ECF0"}),m("path",{d:"M9 21H5C4.46957 21 3.96086 20.7893 3.58579 20.4142C3.21071 20.0391 3 19.5304 3 19V5C3 4.46957 3.21071 3.96086 3.58579 3.58579C3.96086 3.21071 4.46957 3 5 3H9",stroke:"#0676C5","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),m("path",{d:"M16 17L21 12L16 7",stroke:"#0676C5","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),m("path",{d:"M21 12H9",stroke:"#0676C5","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),JH=X({__name:"LogoutItem",setup(r){const{t}=ve();return(e,o)=>(S(),H(v(jr),{value:"Logout",class:"DropdownMenuItem",onClick:v(iv)},{default:D(()=>[m("div",XH,[ZH,R(v(ze),null,{default:D(()=>[he(L(v(t)("Logout")),1)]),_:1})])]),_:1},8,["onClick"]))}}),eV={class:"ItemLeft"},tV=X({__name:"StatusSubItem",setup(r){const{t}=ve(),{updateStatus:e}=ji(),o=x([{type:"online",text:"Online",style:{backgroundColor:"#17ad37",border:"1px solid #F8F9FA"}},{type:"busy",text:"Busy",style:{backgroundColor:"#dc001e",border:"1px solid #F8F9FA"}},{type:"away",text:"Away",style:{backgroundColor:"#ec9a00",border:"1px solid #F8F9FA"}},{type:"offline",text:"Appear Offline",style:{backgroundColor:"#F8F9FA",border:"1px solid #0676c5"}},{type:"dnd",text:"Do Not Disturb",style:{backgroundColor:"#F8F9FA",border:"1px solid #dc001e"}}]);function n(i){e(i)}return(i,s)=>(S(),H(v(zl),null,{default:D(()=>[R(v(Vd),{class:"DropdownMenuContent Status",align:"start","side-offset":-5},{default:D(()=>[(S(!0),O(de,null,qe(o.value,a=>(S(),H(v(jr),{key:a.type,class:"DropdownMenuItem",onClick:l=>n(a.type)},{default:D(()=>[m("div",eV,[m("div",{class:"menu-status",style:ue(a.style)},null,4),R(v(ze),{size:14},{default:D(()=>[he(L(v(t)(a.text)),1)]),_:2},1024)])]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1}))}}),oV=oe(tV,[["__scopeId","data-v-dcd07208"]]),nV={class:"ItemLeft"},iV=m("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[m("path",{d:"M20 21V19C20 17.9391 19.5786 16.9217 18.8284 16.1716C18.0783 15.4214 17.0609 15 16 15H8C6.93913 15 5.92172 15.4214 5.17157 16.1716C4.42143 16.9217 4 17.9391 4 19V21",fill:"#E7ECF0"}),m("path",{d:"M20 21V19C20 17.9391 19.5786 16.9217 18.8284 16.1716C18.0783 15.4214 17.0609 15 16 15H8C6.93913 15 5.92172 15.4214 5.17157 16.1716C4.42143 16.9217 4 17.9391 4 19V21",stroke:"#0676C5","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),m("path",{d:"M12 11C14.2091 11 16 9.20914 16 7C16 4.79086 14.2091 3 12 3C9.79086 3 8 4.79086 8 7C8 9.20914 9.79086 11 12 11Z",fill:"#E7ECF0",stroke:"#0676C5","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),rV=X({__name:"StatusItem",setup(r){const{t}=ve();return(e,o)=>(S(),H(v(Ud),null,{default:D(()=>[R(v(Bd),{value:"Status",class:"DropdownMenuSubTrigger"},{default:D(()=>[m("div",nV,[iV,R(v(ze),null,{default:D(()=>[he(L(v(t)("Status")),1)]),_:1})]),R(Te,{name:"chevron-right",class:"m-0",style:ue({stroke:v(se).LineIcon})},null,8,["style"])]),_:1}),R(oV)]),_:1}))}}),sV={class:"ItemLeft"},aV=X({__name:"AccountSubItem",setup(r){const t=Wi(),e=Ye(),o=x(e.currentAccount.accountCode);async function n(i){await rv(i),await Gw(),window.location.href="/"}return(i,s)=>(S(),H(v(zl),null,{default:D(()=>[R(v(Vd),{class:"DropdownMenuContent",align:"start","side-offset":-5},{default:D(()=>[R(v(sv),{modelValue:o.value,"onUpdate:modelValue":s[0]||(s[0]=a=>o.value=a)},{default:D(()=>[(S(!0),O(de,null,qe(v(t).accounts,a=>(S(),H(v(av),{key:a.accountCode,class:"DropdownMenuItem",value:a.accountCode,onClick:l=>n(a.accountCode)},{default:D(()=>[m("div",sV,[R(v(lv),null,{default:D(()=>[R(Hd)]),_:1}),R(v(ze),{class:Fe({"ms-4":o.value!==a.accountCode})},{default:D(()=>[he(L(a.customer),1)]),_:2},1032,["class"])])]),_:2},1032,["value","onClick"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}))}}),lV={class:"ItemLeft"},cV=m("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[m("path",{d:"M20 7H4C2.89543 7 2 7.89543 2 9V19C2 20.1046 2.89543 21 4 21H20C21.1046 21 22 20.1046 22 19V9C22 7.89543 21.1046 7 20 7Z",fill:"#E7ECF0",stroke:"#0676C5","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),m("path",{d:"M16 21V5C16 4.46957 15.7893 3.96086 15.4142 3.58579C15.0391 3.21071 14.5304 3 14 3H10C9.46957 3 8.96086 3.21071 8.58579 3.58579C8.21071 3.96086 8 4.46957 8 5V21",stroke:"#0676C5","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),uV=X({__name:"AccountItem",setup(r){const{t}=ve();return(e,o)=>(S(),H(v(Ud),null,{default:D(()=>[R(v(Bd),{value:"Account",class:"DropdownMenuSubTrigger"},{default:D(()=>[m("div",lV,[cV,R(v(ze),null,{default:D(()=>[he(L(v(t)("Accounts")),1)]),_:1})]),R(Te,{name:"chevron-right",class:"m-0",style:ue({stroke:v(se).LineIcon})},null,8,["style"])]),_:1}),R(aV)]),_:1}))}}),dV={class:"ItemLeft"},pV=X({__name:"LanguageSubItem",setup(r){const{locale:t,t:e}=ve(),o=kw(),n=x(t.value);function i(s){t.value=s,o.changeLanguage(s)}return(s,a)=>(S(),H(v(zl),null,{default:D(()=>[R(v(Vd),{class:"DropdownMenuContent Language",align:"start","side-offset":-5},{default:D(()=>[R(v(sv),{modelValue:n.value,"onUpdate:modelValue":a[0]||(a[0]=l=>n.value=l)},{default:D(()=>[(S(!0),O(de,null,qe(v(Hw),l=>(S(),H(v(av),{key:l.code,class:"DropdownMenuItem",value:l.code,onClick:c=>i(l.code)},{default:D(()=>[m("div",dV,[R(v(lv),null,{default:D(()=>[R(Hd)]),_:1}),R(v(ze),{class:Fe({"ms-4":n.value!==l.code})},{default:D(()=>[he(L(v(e)(l.name)),1)]),_:2},1032,["class"])])]),_:2},1032,["value","onClick"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}))}}),hV={class:"ItemLeft"},fV=m("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[m("path",{d:"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z",fill:"#E7ECF0",stroke:"#0676C5","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),m("path",{d:"M2 12H22",stroke:"#0676C5","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),m("path",{d:"M12 2C14.5013 4.73835 15.9228 8.29203 16 12C15.9228 15.708 14.5013 19.2616 12 22C9.49872 19.2616 8.07725 15.708 8 12C8.07725 8.29203 9.49872 4.73835 12 2V2Z",stroke:"#0676C5","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),gV=X({__name:"LanguageItem",setup(r){const{t}=ve();return(e,o)=>(S(),H(v(Ud),null,{default:D(()=>[R(v(Bd),{value:"Language",class:"DropdownMenuSubTrigger"},{default:D(()=>[m("div",hV,[fV,R(v(ze),null,{default:D(()=>[he(L(v(t)("Language")),1)]),_:1})]),R(Te,{name:"chevron-right",class:"m-0",style:ue({stroke:v(se).LineIcon})},null,8,["style"])]),_:1}),R(pV)]),_:1}))}}),vV=X({__name:"NewProfileDropdown",setup(r){const t=Ye(),e=zi(),o=Wi(),n=x(!1),i=te(()=>`${e.avatars[t.user.userId][32]}`),s=te(()=>Wu[t.currentLevel]==="Account Admin");return(a,l)=>(S(),H(v(Xw),{open:n.value,"onUpdate:open":l[0]||(l[0]=c=>n.value=c)},{default:D(()=>[R(v(qw),{class:"IconButton","aria-label":"Menu"},{default:D(()=>[R(v(ze),{size:14},{default:D(()=>[he(L(v(t).user.userName),1)]),_:1}),R(js,{src:i.value,status:v(t).onlineStatus,size:"2rem"},null,8,["src","status"])]),_:1}),R(v(zl),null,{default:D(()=>[R(v(Qw),{class:"DropdownMenuContent","side-offset":10,align:"end"},{default:D(()=>[R(rV),s.value?(S(),H(BH,{key:0})):Z("",!0),R(WH),R(KH),v(o).accounts.length>1?(S(),H(uV,{key:1})):Z("",!0),R(gV),R(QH),R(JH)]),_:1})]),_:1})]),_:1},8,["open"]))}}),mV=oe(vV,[["__scopeId","data-v-f06fb449"]]),yV={},CV={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},wV=m("path",{d:"M10.4995 6.5V4C10.4995 3.86739 10.4468 3.74021 10.3531 3.64645C10.2593 3.55268 10.1321 3.5 9.99951 3.5H0.999512C0.866903 3.5 0.739726 3.55268 0.645958 3.64645C0.55219 3.74021 0.499512 3.86739 0.499512 4V12C0.499512 12.1326 0.55219 12.2598 0.645958 12.3536C0.739726 12.4473 0.866903 12.5 0.999512 12.5H9.99951C10.1321 12.5 10.2593 12.4473 10.3531 12.3536C10.4468 12.2598 10.4995 12.1326 10.4995 12V9.5L15.4995 12.5V3.5L10.4995 6.5Z",fill:"white"},null,-1),_V=[wV];function SV(r,t){return S(),O("svg",CV,_V)}const EV=oe(yV,[["render",SV]]),RV={},TV=r=>(Oo("data-v-6ce5de58"),r=r(),Po(),r),bV={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",class:"copy-icon"},AV=TV(()=>m("path",{d:"M6.00039 11.9996C5.67039 11.9996 5.38789 11.8821 5.15289 11.6471C4.91789 11.4121 4.80039 11.1296 4.80039 10.7996V2.79961C4.80039 2.46961 4.91789 2.18711 5.15289 1.95211C5.38789 1.71711 5.67039 1.59961 6.00039 1.59961H12.4004C12.7304 1.59961 13.0129 1.71711 13.2479 1.95211C13.4829 2.18711 13.6004 2.46961 13.6004 2.79961V10.7996C13.6004 11.1296 13.4829 11.4121 13.2479 11.6471C13.0129 11.8821 12.7304 11.9996 12.4004 11.9996H6.00039ZM6.00039 10.7996H12.4004V2.79961H6.00039V10.7996ZM3.60039 14.3996C3.27039 14.3996 2.98789 14.2821 2.75289 14.0471C2.51789 13.8121 2.40039 13.5296 2.40039 13.1996V3.99961H3.60039V13.1996H11.2004V14.3996H3.60039Z",fill:"#0676C5"},null,-1)),OV=[AV];function PV(r,t){return S(),O("svg",bV,OV)}const IV=oe(RV,[["render",PV],["__scopeId","data-v-6ce5de58"]]),DV={},MV={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},LV=m("path",{d:"M2.79961 12.7992C2.46961 12.7992 2.18711 12.6817 1.95211 12.4465C1.71711 12.2114 1.59961 11.9287 1.59961 11.5986V4.3945C1.59961 4.06431 1.71711 3.78255 1.95211 3.54922C2.18711 3.31589 2.46961 3.19922 2.79961 3.19922H13.1996C13.5296 3.19922 13.8121 3.31679 14.0471 3.55192C14.2821 3.78705 14.3996 4.06971 14.3996 4.39989V11.6039C14.3996 11.9341 14.2821 12.2159 14.0471 12.4492C13.8121 12.6826 13.5296 12.7992 13.1996 12.7992H2.79961ZM7.99961 8.79922L2.79961 5.81589V11.5992H13.1996V5.81589L7.99961 8.79922ZM7.99961 7.38255L13.1996 4.39922H2.79961L7.99961 7.38255ZM2.79961 5.81589V4.39922V11.5992V5.81589Z",fill:"#0676C5"},null,-1),xV=[LV];function FV(r,t){return S(),O("svg",MV,xV)}const NV=oe(DV,[["render",FV]]),GV={},kV={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},HV=oa('<g clip-path="url(#clip0_4591_15303)"><path d="M14.0003 0.666016H5.33366C5.15685 0.666016 4.98728 0.736253 4.86225 0.861278C4.73723 0.986302 4.66699 1.15587 4.66699 1.33268V1.99935L10.0003 3.63268L14.667 1.99935V1.33268C14.667 1.15587 14.5968 0.986302 14.4717 0.861278C14.3467 0.736253 14.1771 0.666016 14.0003 0.666016Z" fill="#0364B8"></path><path d="M15.9998 7.94612C15.9996 7.88444 15.9835 7.82384 15.9532 7.77014C15.9228 7.71644 15.8792 7.67144 15.8265 7.63946L10.0865 4.37279C10.0606 4.35212 10.0313 4.33631 9.99979 4.32612C9.88945 4.27344 9.76873 4.24609 9.64646 4.24609C9.52419 4.24609 9.40346 4.27344 9.29312 4.32612C9.26635 4.33767 9.24159 4.35342 9.21979 4.37279L3.51979 7.61946C3.46731 7.65081 3.42386 7.69524 3.39369 7.7484C3.36352 7.80157 3.34766 7.86166 3.34766 7.92279C3.34766 7.98392 3.36352 8.04401 3.39369 8.09718C3.42386 8.15034 3.46731 8.19477 3.51979 8.22612L9.24646 11.5128L9.31979 11.5528C9.42894 11.6095 9.55013 11.6391 9.67312 11.6391C9.79612 11.6391 9.9173 11.6095 10.0265 11.5528L10.0998 11.5128L15.8265 8.24612C15.8787 8.21521 15.9221 8.17137 15.9524 8.11883C15.9828 8.06628 15.9991 8.0068 15.9998 7.94612Z" fill="#0A2767"></path><path d="M10.0003 2H4.66699V6.66667L10.0003 12H14.667V6.66667L10.0003 2Z" fill="#28A8EA"></path><path d="M15.7072 15.2128L3.52717 8.24609H3.52051" fill="#35B8F1"></path><path d="M14.6667 2H10V6.66667H14.6667V2Z" fill="#50D9FF"></path><path d="M10.0003 6.66602H4.66699V13.3327H10.0003V6.66602Z" fill="#0078D4"></path><path opacity="0.5" d="M9.66637 13.0002L3.52637 8.23349L3.85303 7.66016L9.59303 10.9535C9.64459 10.9729 9.70147 10.9729 9.75303 10.9535L15.4197 7.72016L15.753 8.30016L9.66637 13.0002Z" fill="#0A2767"></path><path d="M9.2334 11.5137L9.2534 11.5203L9.2334 11.5137Z" fill="#1490DF"></path><path d="M15.8266 8.24026L10.1333 11.5003L10.02 11.5536C9.90815 11.6096 9.78501 11.6392 9.65997 11.6403C9.53695 11.6401 9.41576 11.6104 9.30664 11.5536L11.1533 14.1203L15.7066 15.2069C15.7953 15.147 15.8682 15.0667 15.9192 14.9727C15.9703 14.8788 15.998 14.7739 16 14.6669V7.93359C15.9986 7.99503 15.982 8.05516 15.9518 8.10866C15.9215 8.16215 15.8785 8.20736 15.8266 8.24026Z" fill="#1490DF"></path><path opacity="0.1" d="M15.9997 14.6667V14.6201L10.333 11.3867L10.133 11.5067L10.0197 11.5667C9.90866 11.6174 9.78837 11.6447 9.66634 11.6467H9.61967C9.52049 11.6397 9.42338 11.6149 9.33301 11.5734L11.9997 14.0001L15.7063 15.2067C15.795 15.1468 15.8679 15.0665 15.9189 14.9725C15.97 14.8785 15.9977 14.7737 15.9997 14.6667Z" fill="black"></path><path d="M9.23302 11.5136L4.66635 8.79359L3.50635 8.24026C3.45316 8.20877 3.40916 8.16388 3.37874 8.11007C3.34833 8.05626 3.33256 7.99541 3.33302 7.93359V14.6669C3.33302 14.8437 3.40326 15.0133 3.52828 15.1383C3.6533 15.2634 3.82287 15.3336 3.99968 15.3336H15.1997C15.3782 15.3514 15.5573 15.3066 15.7064 15.2069L9.23302 11.5136Z" fill="#28A8EA"></path><path opacity="0.5" d="M9.06634 13.3333C9.30347 13.3186 9.52761 13.22 9.69863 13.0551C9.86965 12.8902 9.97637 12.6698 9.99967 12.4333V4.78C9.99793 4.57367 9.9152 4.37628 9.76929 4.23038C9.62339 4.08448 9.426 4.00174 9.21967 4H4.66634V6.98L3.50634 7.64667C3.45431 7.67265 3.41054 7.71261 3.37992 7.76206C3.34931 7.81151 3.33307 7.86851 3.33301 7.92667V13.3333H9.06634Z" fill="black"></path><path d="M8.55333 3.33398H0.78C0.349218 3.33398 0 3.6832 0 4.11398V11.8873C0 12.3181 0.349218 12.6673 0.78 12.6673H8.55333C8.98411 12.6673 9.33333 12.3181 9.33333 11.8873V4.11398C9.33333 3.6832 8.98411 3.33398 8.55333 3.33398Z" fill="#0078D4"></path><path d="M2.30693 6.55416C2.51053 6.1239 2.83781 5.76413 3.24693 5.52082C3.69903 5.26279 4.21323 5.13366 4.7336 5.14749C5.21713 5.13795 5.69415 5.26009 6.1136 5.50082C6.50536 5.73655 6.8221 6.07872 7.02693 6.48749C7.23814 6.94474 7.34299 7.4439 7.3336 7.94749C7.34604 8.47282 7.23411 8.99365 7.00693 9.46749C6.80082 9.8926 6.47383 10.2474 6.06693 10.4875C5.64299 10.7364 5.15847 10.8633 4.66693 10.8542C4.17377 10.8666 3.68683 10.742 3.26026 10.4942C2.8619 10.2625 2.53984 9.91958 2.3336 9.50749C2.10997 9.06068 1.99572 8.56712 2.00026 8.06749C1.98625 7.5463 2.09113 7.02877 2.30693 6.55416ZM3.3336 8.98749C3.44317 9.2547 3.62567 9.48571 3.86026 9.65416C4.09522 9.82329 4.37743 9.91425 4.66693 9.91416C4.97776 9.92626 5.28416 9.83738 5.54026 9.66082C5.77227 9.49294 5.95059 9.26136 6.0536 8.99416C6.17316 8.67717 6.22758 8.33932 6.2136 8.00082C6.21636 7.67233 6.16454 7.34567 6.06026 7.03416C5.96426 6.75581 5.7908 6.51065 5.56026 6.32749C5.30067 6.14345 4.98381 6.05832 4.66693 6.08749C4.36586 6.07914 4.06974 6.16541 3.82026 6.33416C3.58444 6.50297 3.39986 6.73369 3.28693 7.00082C3.16482 7.31945 3.11033 7.66 3.12693 8.00082C3.12921 8.34022 3.19948 8.67571 3.3336 8.98749Z" fill="white"></path></g><defs><clipPath id="clip0_4591_15303"><rect width="16" height="16" fill="white"></rect></clipPath></defs>',2),VV=[HV];function BV(r,t){return S(),O("svg",kV,VV)}const Hg=oe(GV,[["render",BV]]),UV={},jV={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},WV=m("path",{d:"M0 4.375H3.00983L4.76241 8.85882L6.53775 4.375H9.46831L5.05553 14.9897H2.1064L3.31433 12.1769L0 4.375Z",fill:"#5F01D1"},null,-1),zV=m("path",{d:"M10.6768 12.2735C11.6838 12.2735 12.5001 11.4572 12.5001 10.4502C12.5001 9.44326 11.6838 8.62695 10.6768 8.62695C9.66983 8.62695 8.85352 9.44326 8.85352 10.4502C8.85352 11.4572 9.66983 12.2735 10.6768 12.2735Z",fill:"#5F01D1"},null,-1),$V=m("path",{d:"M13.0988 7.95729H9.81641L12.7296 0.958984H15.9997L13.0988 7.95729Z",fill:"#5F01D1"},null,-1),KV=[WV,zV,$V];function YV(r,t){return S(),O("svg",jV,KV)}const qV=oe(UV,[["render",YV]]),QV={class:"header-start"},XV={class:"panel-body underline-content px-4"},ZV={class:"share-other-text"},JV={class:"link-share"},e8=["title"],t8=["value"],o8={class:"add-calendar d-flex my-3"},n8={class:"text-mail"},i8={class:"icons-mail"},r8=["title","href"],s8=["title","href"],a8={class:"share-email d-flex mb-4"},l8={class:"text-mail"},c8={class:"icons-mail"},u8=["title","href"],d8=["title","href"],p8=["title","href"],h8=["title","href"],f8={class:"d-flex justify-content-between gap-3"},g8=X({__name:"MeetDetail",props:{modelValue:{type:Boolean},token:{}},emits:["update:modelValue"],setup(r,{emit:t}){const{t:e}=ve(),o=Gd(),n=Ye(),i=r,s=x(i.modelValue),a="https://meet.2talk.com/",l="2talk",c=te(()=>a+i.token),u=encodeURIComponent(`Join meeting on ${l}`),d=te(()=>encodeURIComponent(`${n.user.userName} is inviting you to a meeting. Join via this link: ${c.value}`)),p=encodeURIComponent("Meeting"),h=te(()=>encodeURIComponent(`Join at ${c.value}`)),f=t;function g(){s.value=!1,o.joinNewRoomConference(i.token)}function _(){navigator.clipboard.writeText(c.value);const C=document.getElementById("url-meet");C.select(),C.setSelectionRange(0,99999)}return Oe(()=>i.modelValue,C=>{s.value=C}),Oe(s,C=>{f("update:modelValue",C)}),(C,E)=>{const T=fn("tippy");return S(),H(Wt,{id:"meet-details",modelValue:s.value,"onUpdate:modelValue":E[1]||(E[1]=P=>s.value=P),size:"lg","has-btn-close":"",persist:"",center:"","max-width":"580px"},{header:D(()=>[m("span",QV,L(v(e)("Start meeting")),1)]),body:D(()=>[m("div",XV,[m("p",ZV,L(v(e)("Share the meeting link to invite others:")),1),m("div",JV,[Ne((S(),O("div",{"data-bs-toggle":"tooltip","data-placement":"top",title:v(e)("Copy"),class:"d-inline cursor-pointer bs-tooltip",onClick:_},[R(IV,{class:"align-text-top"})],8,e8)),[[T,{}]]),m("input",{id:"url-meet",value:c.value},null,8,t8)]),m("div",o8,[m("p",n8,L(v(e)("Add to calendar")),1),m("div",i8,[Ne((S(),O("a",{class:"cursor-pointer bs-tooltip","data-bs-toggle":"tooltip","data-placement":"top",title:v(e)("Add to Google Calendar"),href:"https://calendar.google.com/calendar/render?action=TEMPLATE&text="+v(p)+"&details="+h.value,target:"_blank"},[R(zu,{class:"cursor-pointer"})],8,r8)),[[T,{}]]),Ne((S(),O("a",{class:"cursor-pointer bs-tooltip","data-bs-toggle":"tooltip","data-placement":"top",title:v(e)("Add to Outlook Calendar"),href:"https://outlook.office.com/calendar/0/action/compose?body="+h.value+"&path=%2Fcalendar%2Faction%2Fcompose&rru=addevent&subject="+v(p),target:"_blank"},[R(Hg,{class:"cursor-pointer"})],8,s8)),[[T,{}]])])]),m("div",a8,[m("p",l8,L(v(e)("Share link via email")),1),m("div",c8,[Ne((S(),O("a",{class:"cursor-pointer bs-tooltip","data-bs-toggle":"tooltip","data-placement":"top",title:v(e)("Share via default email client"),href:"mailto:?subject="+v(u)+"&body="+d.value,target:"_blank"},[R(NV)],8,u8)),[[T,{}]]),Ne((S(),O("a",{class:"cursor-pointer bs-tooltip","data-bs-toggle":"tooltip","data-placement":"top",title:v(e)("Share via Gmail"),href:"https://mail.google.com/mail/?view=cm&fs=1&su="+v(u)+"&body="+d.value,target:"_blank"},[R(zu,{class:"cursor-pointer"})],8,d8)),[[T,{}]]),Ne((S(),O("a",{class:"cursor-pointer bs-tooltip","data-bs-toggle":"tooltip","data-placement":"top",title:v(e)("Share via Outlook"),href:"https://outlook.office.com/mail/deeplink/compose?subject="+v(u)+"&body="+d.value,target:"_blank"},[R(Hg,{class:"cursor-pointer"})],8,p8)),[[T,{}]]),Ne((S(),O("a",{class:"cursor-pointer bs-tooltip","data-bs-toggle":"tooltip","data-placement":"top",title:v(e)("Share via Yahoo! Mail"),href:"https://compose.mail.yahoo.com/?To=&Subj="+v(u)+"&Body="+d.value,target:"_blank"},[R(qV,{class:"cursor-pointer"})],8,h8)),[[T,{}]])])])])]),footer:D(()=>[m("div",f8,[m("button",{class:"secondary-btn text-uppercase",onClick:E[0]||(E[0]=P=>s.value=!1)},L(v(e)("Close")),1),m("button",{class:"primary-btn text-uppercase",onClick:g},L(v(e)("Join meeting now")),1)])]),_:1},8,["modelValue"])}}}),v8=oe(g8,[["__scopeId","data-v-73aa02a9"]]),m8=X({__name:"BaseMeet",setup(r){const t=Gd(),e=x(!1),o=x("");async function n(){const i=await t.newRoomConference();o.value=i.token,e.value=!0}return(i,s)=>(S(),O(de,null,[m("button",{class:"meet-button",onClick:n},[R(EV)]),R(v8,{modelValue:e.value,"onUpdate:modelValue":s[0]||(s[0]=a=>e.value=a),token:o.value},null,8,["modelValue","token"])],64))}}),y8=oe(m8,[["__scopeId","data-v-4b57fe30"]]),C8={class:"top-bar-actions"},w8=X({__name:"HeaderTopBarActions",setup(r){return(t,e)=>(S(),O("div",C8,[R(uD),R(MD),R(y8),R(SD),R(mV)]))}}),_8=oe(w8,[["__scopeId","data-v-af5c8571"]]),S8={class:"top-bar"},E8=X({__name:"HeaderTopBar",setup(r){return(t,e)=>(S(),O("section",S8,[R(kH),R(_8)]))}}),R8=oe(E8,[["__scopeId","data-v-4557c8f3"]]),T8=X({__name:"NewBaseHeader",setup(r){return(t,e)=>(S(),O("header",null,[R(AH),R(R8)]))}}),b8=oe(T8,[["__scopeId","data-v-4f81cd73"]]),A8={id:"main-body"},O8={id:"main-panel"},P8=X({__name:"NewBaseAuthLayout",setup(r){const t=Ui(),e=Hr();return(o,n)=>{const i=lt("RouterView");return S(),O(de,null,[R(b8),m("section",A8,[R(bM),m("section",O8,[R(i)])]),R(hb,{modelValue:v(t).teams,"onUpdate:modelValue":n[0]||(n[0]=s=>v(t).teams=s)},null,8,["modelValue"]),R(l1,{modelValue:v(t).settings,"onUpdate:modelValue":n[1]||(n[1]=s=>v(t).settings=s)},null,8,["modelValue"]),R(yb,{modelValue:v(t).about,"onUpdate:modelValue":n[2]||(n[2]=s=>v(t).about=s)},null,8,["modelValue"]),v(e).toastLength>0?(S(),H(c3,{key:0})):Z("",!0)],64)}}}),I8=X({__name:"AuthLayout",setup(r){const t=Vw(),e=Ye(),o=Gr(),n=ta(),{initializeSocket:i}=ea();Bg({constraints:{audio:!0,video:!1},requestPermissions:!0});const s=x(!1),a=x(!1);async function l(){for(const h of e.myNumbers)u(h.numbersUnmasked,h.password,h.name);setTimeout(()=>{const h=[];for(const f of e.myNumbers)h.push({number:f.number,registered:f.registered,dnd:f.dnd});Oc.addMetadata("numbers",h)},5*Si.Second)}async function c(){return s.value=!0,await jl(),Oc.setUser(e.user.userId.toString(),e.user.email,e.user.userName),Oc.addMetadata("permissions",{camera:jw.value,speaker:Ww.value,microphone:zw.value,notifications:$w.value}),i(),e.isFirstLogin?(s.value=!1,a.value=!0):(s.value=!1,l(),n.listUnknownContactsSms(),n.listenersSmsMessage(),fv(),a.value=!1)}Oe(()=>e.isFirstLogin,h=>a.value=h);const{register:u}=Ki(),d=ri();let p=0;return Mi.interceptors.response.use(h=>h,h=>{if(h.response&&h.response.status===401){if(p>=3){d.push({name:Me.Login}),t.isAuthenticatedFalsy();return}return new Promise((f,g)=>{p++;const _=Ye();Bw({email:_.user.email,password:_.user.password}).then(()=>{const C=h.response.config;Mi.request(C).then(E=>{f(E)},E=>{g(E)})})})}throw h}),Uw(()=>{c()}),(h,f)=>(S(),O(de,null,[s.value?(S(),H(W_,{key:0})):(S(),O(de,{key:1},[v(e).isFirstLogin?(S(),H(EH,{key:1,modelValue:a.value,"onUpdate:modelValue":f[0]||(f[0]=g=>a.value=g)},null,8,["modelValue"])):(S(),H(P8,{key:0}))],64)),v(o).img.src?(S(),H(OM,{key:2})):Z("",!0)],64))}}),Z8=Object.freeze(Object.defineProperty({__proto__:null,default:I8},Symbol.toStringTag,{value:"Module"}));export{Z8 as A,qO as C,ac as D,uP as T,my as a,vl as b};
//# sourceMappingURL=AuthLayout-RvP8gOYm.js.map
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/TransferAskFirst-mRinKCia.js","assets/main-A7BwrMDB.js","assets/main-PBfXXEx4.css","assets/use-user-agent-gNSz9J2a.js","assets/_plugin-vue_export-helper-x3n3nnut.js","assets/DroddownContacts-lrXkBHej.js","assets/user-dV8HVTng.js","assets/index-35H_NU9g.js","assets/BaseAvatar-cLayq0TK.js","assets/BaseAvatar-mfsRkc1Q.css","assets/DroddownContacts-OaM2qdvY.css","assets/BaseIcon.vue_vue_type_script_setup_true_lang-io_05Ke-.js","assets/color-Ih_vWK5s.js","assets/BaseModal.vue_vue_type_style_index_0_lang-fG62cZ1v.js","assets/BaseModal-nYfg3PJ2.css","assets/GlobalInput-_b9BFpf9.js","assets/GlobalInput-FJftgnZD.css","assets/GlobalTable-zZH7TUnX.js","assets/GlobalTable-R3IZpLQk.css","assets/index-yeKH0v8d.js","assets/index-qjCRqTh6.css","assets/index-Gr4YhlML.js","assets/index-1QyF2mb6.css","assets/BaseContactTag-YcQXm1ts.js","assets/BaseContactTag-6iMu22fK.css","assets/PresenceVideo-m2skjI0f.js","assets/IPhone-TdHhqDC-.js","assets/PresenceVideo-Ue7ePyOj.css","assets/logo_au-qIb2iIvG.js","assets/use-typing-AKUAkgng.js","assets/IGroupV1.vue_vue_type_script_setup_true_lang-O-Dolldc.js","assets/TransferAskFirst-glYErfvD.css"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}