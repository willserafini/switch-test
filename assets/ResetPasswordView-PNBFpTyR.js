import{E as S,h as x,i as A,d as j,j as z,k as H,b as I,r as _,w as U,o as X,R as L,l as K,c as h,m as g,n as s,t as C,f as n,p as W,q as y,s as N,v as q,x as E,e as Z,y as $,z as G,A as J,B as Q}from"./main-A7BwrMDB.js";import{_ as Y,a as ss}from"./logo_au-qIb2iIvG.js";import{_ as f}from"./BaseIcon.vue_vue_type_script_setup_true_lang-io_05Ke-.js";import{u as es}from"./use-input-type-XeEeU_dq.js";import{u as os}from"./use-meta-8qaBMXcq.js";import{_ as as}from"./_plugin-vue_export-helper-x3n3nnut.js";async function rs(p){try{return await x.get(S.CSRF),(await x.post(S.ResetPassword,{remember_token:p.rememberToken,password:p.password,password_confirmation:p.passwordConfirmation},{headers:{"X-XSRF-TOKEN":A("XSRF-TOKEN")}})).data}catch(o){throw o}}const ts={class:"form auth-boxed"},ns={class:"form-container outer"},is={class:"form-form"},ds={class:"form-form-wrap"},ls={class:"form-container"},cs={class:"form-content"},ms={class:""},fs={key:0,src:Y,width:"150",alt:""},ps={key:1,src:ss,width:"150",alt:""},us={class:""},ws={class:"form"},vs={id:"username-field",class:"field-wrapper input"},_s={for:"username-field"},hs=["type","disabled"],Cs=["innerHTML"],ys={id:"password-field",class:"field-wrapper input mb-2"},bs={for:"password-field"},ks=["type","disabled"],gs=["innerHTML"],Ps={class:"d-sm-flex justify-content-between"},Rs={class:"field-wrapper"},Ts=["disabled"],Ss=j({__name:"ResetPasswordView",setup(p){const{t:o}=z();os(o("Create Password"));const P=H(),M=I(),V=_(),{pwdType:R,setPwdType:u}=es(),e=_({password:"",passwordConfirmation:"",rememberToken:""}),a=_({password:"",passwordConfirmation:""});function T(){a.value={password:"",passwordConfirmation:""}}const d=_(!1);U(()=>e.value,()=>{T()},{deep:!0});async function B(){if(T(),!e.value.password||!e.value.passwordConfirmation){e.value.password||(a.value.password=o("Password are required")),e.value.passwordConfirmation||(a.value.passwordConfirmation=o("Confirm password are required"));return}if(e.value.password!==e.value.passwordConfirmation)return a.value.passwordConfirmation=o("Password does not match");const l=/(?=.*?[A-Z])/,r=/(?=.*?[a-z])/,w=/(?=.*?[0-9])/;r.test(e.value.passwordConfirmation)||(a.value.passwordConfirmation=o("Password requires a lowercase character")+"<br>"),l.test(e.value.passwordConfirmation)||(a.value.passwordConfirmation+=o("Password requires a uppercase character")+"<br>"),w.test(e.value.passwordConfirmation)||(a.value.passwordConfirmation+=o("Password requires one digit")+"<br>"),e.value.password.length<8&&(a.value.passwordConfirmation+=o("Password requires at least 8 digits")),!a.value.passwordConfirmation&&(d.value=!0,await rs(e.value).then(async()=>{d.value=!1,J(o("Changed password")),P.push({name:L.Login})}).catch(c=>{var m,t;d.value=!1;const i=(m=c.response)==null?void 0:m.data;if(Q(i==null?void 0:i.message),((t=c.response)==null?void 0:t.status)===422){const b=i==null?void 0:i.form_errors;if(Object.keys(b).length>0)for(const D of Object.keys(b)){const v=D,k=b[v];if(typeof k!="string")for(const F of k)a.value[v]+=F,a.value[v]+="<br>";else a.value[v]=k}}}))}X(()=>{const l=M.query.remember_token;if(l)return e.value.rememberToken=l;P.push({name:L.Login})});const O=K(()=>!1);return(l,r)=>{var w,c,i,m;return h(),g("div",ts,[s("div",ns,[s("div",is,[s("div",ds,[s("div",ls,[s("div",cs,[s("h1",ms,[O.value?(h(),g("img",fs)):(h(),g("img",ps))]),s("p",us,C(n(o)("Create password")),1),s("form",{ref_key:"loginFormRef",ref:V,class:"text-start needs-validation",novalidate:"",onSubmit:W(B,["prevent"])},[s("div",ws,[s("div",vs,[s("label",_s,C(n(o)("PASSWORD")),1),y(f,{name:"lock",class:"mt-1"}),N(s("input",{"onUpdate:modelValue":r[0]||(r[0]=t=>e.value.password=t),type:n(R),class:E(["form-control",[(w=a.value)!=null&&w.password?"is-invalid":""]]),placeholder:"Password",disabled:d.value},null,10,hs),[[q,e.value.password]]),s("div",{class:"invalid-feedback",innerHTML:(c=a.value)==null?void 0:c.password},null,8,Cs),s("span",{onClick:r[1]||(r[1]=(...t)=>n(u)&&n(u)(...t))},[y(f,{name:"eye","custom-class":"feather feather-eye",class:"mt-1"})])]),s("div",ys,[s("label",bs,C(n(o)("CONFIRM PASSWORD")),1),y(f,{name:"lock",class:"mt-1"}),N(s("input",{"onUpdate:modelValue":r[2]||(r[2]=t=>e.value.passwordConfirmation=t),type:n(R),class:E(["form-control",[(i=a.value)!=null&&i.passwordConfirmation?"is-invalid":""]]),placeholder:"Confirm Password",disabled:d.value},null,10,ks),[[q,e.value.passwordConfirmation]]),s("div",{class:"invalid-feedback",innerHTML:(m=a.value)==null?void 0:m.passwordConfirmation},null,8,gs),s("span",{onClick:r[3]||(r[3]=(...t)=>n(u)&&n(u)(...t))},[y(f,{name:"eye","custom-class":"feather feather-eye",class:"mt-1"})])]),s("div",Ps,[s("div",Rs,[s("button",{type:"submit",class:"primary-btn w-100 py-3",disabled:d.value},[d.value?(h(),Z(f,{key:0,name:"fa-solid fa-spinner",class:"spin",library:"fontawesome","font-size":"1rem"})):$("",!0),G(" "+C(n(o)("Create")),1)],8,Ts)])])])],544)])])])])])])}}}),Vs=as(Ss,[["__scopeId","data-v-765559c7"]]);export{Vs as default};
//# sourceMappingURL=ResetPasswordView-PNBFpTyR.js.map
