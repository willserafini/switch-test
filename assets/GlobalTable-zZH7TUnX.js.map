{"version":3,"file":"GlobalTable-zZH7TUnX.js","sources":["../../src/components/Global/GlobalTable.vue"],"sourcesContent":["<template>\n  <table class=\"table table-hover m-0\" @mouseleave=\"emit('table-leave')\">\n    <thead>\n      <tr>\n        <template v-for=\"(column, index) in columns\" :key=\"`column-${index}`\">\n          <th v-if=\"!column.hide\" scope=\"col\">\n            <slot :name=\"columnSlot(column.field)\" :column=\"column\">\n              <div class=\"d-flex justify-content-between\">\n                <span>\n                  {{ column.headerName }}\n                </span>\n                <div v-if=\"column.sorted\" class=\"d-flex flex-column gap-1\">\n                  <IArrow role=\"button\" @click=\"sort(column, 'desc')\" />\n                  <IArrow\n                    role=\"button\"\n                    :rotate=\"180\"\n                    @click=\"sort(column, 'asc')\"\n                  />\n                </div>\n              </div>\n            </slot>\n          </th>\n        </template>\n      </tr>\n    </thead>\n    <tbody>\n      <tr\n        v-for=\"(row, index) in myRows\"\n        :key=\"`row-${index}`\"\n        :style=\"{ cursor: rowCursor }\"\n        @click=\"emit('row-clicked', row)\"\n        @mouseover=\"emit('row-hover', index)\"\n        @mouseleave=\"emit('row-leave')\"\n      >\n        <template v-for=\"(column, id) in columns\" :key=\"`field-${id}`\">\n          <td v-if=\"!column.hide\" :style=\"{ width: column.width }\">\n            <slot :name=\"rowSlot(column.field)\" :row=\"row\" :index=\"index\">\n              {{ row[column.field] }}\n            </slot>\n          </td>\n        </template>\n      </tr>\n    </tbody>\n  </table>\n</template>\n\n<script setup lang=\"ts\">\nimport { computed, ref, watch } from 'vue';\nimport IArrow from '@/components/Icons/IArrow.vue';\nimport type { ColumnsTable } from '@/types';\n\ninterface Props {\n  columns: ColumnsTable[];\n  rows?: Record<string, any>[];\n  rowCursor?: string;\n}\n\ninterface Emit {\n  (e: 'row-clicked', row: any): void;\n  (e: 'row-hover', index: number): void;\n  (e: 'row-leave'): void;\n  (e: 'table-leave'): void;\n}\n\nconst props = defineProps<Props>();\nconst emit = defineEmits<Emit>();\nconst myRows = ref(props.rows);\n\nconst columnSlot = computed(() => {\n  return (field: string) => `column-${field}`;\n});\n\nconst rowSlot = computed(() => {\n  return (field: string) => `row-${field}`;\n});\n\nfunction compareValues(key: any, order: 'asc' | 'desc') {\n  myRows.value?.sort((a, b) => {\n    const newA = a[key] ? a[key] : '';\n    const newB = b[key] ? b[key] : '';\n    const localeCompare = newA.localeCompare(newB);\n    return +!newA - +!newB || order === 'desc'\n      ? -1 * localeCompare\n      : localeCompare;\n  });\n}\n\nfunction compareValuesArray(key: any, order: 'asc' | 'desc') {\n  myRows.value?.sort((a, b) => {\n    const newA = a[key] ? a[key][0] : '';\n    const newB = b[key] ? b[key][0] : '';\n    const localeCompare = newA.localeCompare(newB);\n    return +!newA - +!newB || order === 'desc'\n      ? -1 * localeCompare\n      : localeCompare;\n  });\n}\n\nfunction compareValuesDate(key: any, order: 'asc' | 'desc') {\n  myRows.value?.sort((a, b) => {\n    if (\n      !Object.prototype.hasOwnProperty.call(a, key) ||\n      !Object.prototype.hasOwnProperty.call(b, key)\n    ) {\n      return 0;\n    }\n    let comparison = 0;\n    const newA = new Date(a[key]).getTime();\n    const newB = new Date(b[key]).getTime();\n    if (newA > newB) {\n      comparison = 1;\n    }\n    if (newA < newB) {\n      comparison = -1;\n    }\n    return order === 'desc' ? comparison * -1 : comparison;\n  });\n}\n\nfunction sort(column: ColumnsTable, order: 'asc' | 'desc') {\n  const field = column.field;\n  if (column.isArray) return compareValuesArray(field, order);\n  if (column.isDate) return compareValuesDate(field, order);\n  return compareValues(field, order);\n}\n\nwatch(\n  () => props.rows,\n  (value) => (myRows.value = value)\n);\n</script>\n\n<style scoped>\n.table,\n.table > :not(:first-child) {\n  border-top: 1px solid var(--line);\n}\n\n.table > thead > tr {\n  position: sticky;\n  top: 0;\n  z-index: 1;\n}\n\nth {\n  background-color: var(--bg-element);\n}\n\n.table > thead > tr > th {\n  font-size: 10px;\n  font-weight: 600;\n  line-height: 1.4;\n  color: var(--text-secondary);\n}\n\n.table > tbody > tr > td {\n  font-size: 14px;\n  color: var(--text-primary);\n  line-height: 1.4;\n}\n\n.table.table-hover tbody tr:hover {\n  background-color: var(--hover) !important;\n}\n</style>\n"],"names":["props","__props","emit","__emit","myRows","ref","columnSlot","computed","field","rowSlot","compareValues","key","order","_a","a","b","newA","newB","localeCompare","compareValuesArray","compareValuesDate","comparison","sort","column","watch","value"],"mappings":"03BAgEA,MAAMA,EAAQC,EACRC,EAAOC,EACPC,EAASC,EAAIL,EAAM,IAAI,EAEvBM,EAAaC,EAAS,IAClBC,GAAkB,UAAUA,CAAK,EAC1C,EAEKC,EAAUF,EAAS,IACfC,GAAkB,OAAOA,CAAK,EACvC,EAEQ,SAAAE,EAAcC,EAAUC,EAAuB,QACtDC,EAAAT,EAAO,QAAP,MAAAS,EAAc,KAAK,CAACC,EAAGC,IAAM,CAC3B,MAAMC,EAAOF,EAAEH,CAAG,EAAIG,EAAEH,CAAG,EAAI,GACzBM,EAAOF,EAAEJ,CAAG,EAAII,EAAEJ,CAAG,EAAI,GACzBO,EAAgBF,EAAK,cAAcC,CAAI,EACtC,MAAA,CAAC,CAACD,EAAO,CAAC,CAACC,GAAQL,IAAU,OAChC,GAAKM,EACLA,CAAA,EAER,CAES,SAAAC,EAAmBR,EAAUC,EAAuB,QAC3DC,EAAAT,EAAO,QAAP,MAAAS,EAAc,KAAK,CAACC,EAAGC,IAAM,CACrB,MAAAC,EAAOF,EAAEH,CAAG,EAAIG,EAAEH,CAAG,EAAE,CAAC,EAAI,GAC5BM,EAAOF,EAAEJ,CAAG,EAAII,EAAEJ,CAAG,EAAE,CAAC,EAAI,GAC5BO,EAAgBF,EAAK,cAAcC,CAAI,EACtC,MAAA,CAAC,CAACD,EAAO,CAAC,CAACC,GAAQL,IAAU,OAChC,GAAKM,EACLA,CAAA,EAER,CAES,SAAAE,EAAkBT,EAAUC,EAAuB,QAC1DC,EAAAT,EAAO,QAAP,MAAAS,EAAc,KAAK,CAACC,EAAGC,IAAM,CAC3B,GACE,CAAC,OAAO,UAAU,eAAe,KAAKD,EAAGH,CAAG,GAC5C,CAAC,OAAO,UAAU,eAAe,KAAKI,EAAGJ,CAAG,EAErC,MAAA,GAET,IAAIU,EAAa,EACjB,MAAML,EAAO,IAAI,KAAKF,EAAEH,CAAG,CAAC,EAAE,UACxBM,EAAO,IAAI,KAAKF,EAAEJ,CAAG,CAAC,EAAE,UAC9B,OAAIK,EAAOC,IACII,EAAA,GAEXL,EAAOC,IACII,EAAA,IAERT,IAAU,OAASS,EAAa,GAAKA,CAAA,EAEhD,CAES,SAAAC,EAAKC,EAAsBX,EAAuB,CACzD,MAAMJ,EAAQe,EAAO,MACrB,OAAIA,EAAO,QAAgBJ,EAAmBX,EAAOI,CAAK,EACtDW,EAAO,OAAeH,EAAkBZ,EAAOI,CAAK,EACjDF,EAAcF,EAAOI,CAAK,CACnC,CAEA,OAAAY,EACE,IAAMxB,EAAM,KACXyB,GAAWrB,EAAO,MAAQqB,CAAA"}