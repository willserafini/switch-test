{"version":3,"file":"use-typing-AKUAkgng.js","sources":["../../src/composables/use-typing.ts"],"sourcesContent":["import { useTypingStore } from '@/stores';\nimport { computed } from 'vue';\nimport { RouteName } from '@/enums';\nimport type { IndexesTyping, IndexesTypingGroup } from '@/types';\n\nexport function useTyping() {\n  const typingStore = useTypingStore();\n  let type: 'directory' | 'group';\n\n  const isTyping = computed(() => {\n    return (routeName: string, userId: number | undefined) => {\n      if (\n        routeName === RouteName.Directory ||\n        routeName === RouteName.FavoriteDirectory\n      ) {\n        type = 'directory';\n      }\n      if (!userId) return false;\n\n      const typeTyping = typingStore.typings[type] as IndexesTyping | undefined;\n      if (!typeTyping) return false;\n\n      const userIdTyping = typeTyping[userId as number];\n      if (!userIdTyping) return false;\n\n      return userIdTyping.isTyping ?? false;\n    };\n  });\n\n  const typingGroup = computed(() => {\n    return (routeName: string, groupId: number | undefined) => {\n      if (\n        routeName === RouteName.Group ||\n        routeName === RouteName.FavoriteGroup\n      ) {\n        type = 'group';\n      }\n\n      if (!groupId) return [];\n\n      const typeTyping = typingStore.typings[type] as\n        | IndexesTypingGroup\n        | undefined;\n      if (!typeTyping) return [];\n\n      const userIdTyping = typeTyping?.[groupId as number];\n      if (!userIdTyping) return [];\n\n      return userIdTyping ? userIdTyping : [];\n    };\n  });\n\n  const typingGroupUserId = computed(() => {\n    return (groupId: number) => {\n      const userIdTyping = typingGroup.value('group', groupId);\n\n      const firstElement = 0;\n\n      return userIdTyping.length > 0 ? userIdTyping[firstElement] : -1;\n    };\n  });\n\n  return {\n    isTyping,\n    typingGroup,\n    typingGroupUserId,\n  };\n}\n"],"names":["useTyping","typingStore","useTypingStore","type","isTyping","computed","routeName","userId","RouteName","typeTyping","userIdTyping","typingGroup","groupId","typingGroupUserId"],"mappings":"sDAKO,SAASA,GAAY,CAC1B,MAAMC,EAAcC,IAChB,IAAAC,EAEE,MAAAC,EAAWC,EAAS,IACjB,CAACC,EAAmBC,IAA+B,CAOxD,IALED,IAAcE,EAAU,WACxBF,IAAcE,EAAU,qBAEjBL,EAAA,aAEL,CAACI,EAAe,MAAA,GAEd,MAAAE,EAAaR,EAAY,QAAQE,CAAI,EAC3C,GAAI,CAACM,EAAmB,MAAA,GAElB,MAAAC,EAAeD,EAAWF,CAAgB,EAChD,OAAKG,EAEEA,EAAa,UAAY,GAFN,EAEM,CAEnC,EAEKC,EAAcN,EAAS,IACpB,CAACC,EAAmBM,IAAgC,CAQzD,IANEN,IAAcE,EAAU,OACxBF,IAAcE,EAAU,iBAEjBL,EAAA,SAGL,CAACS,EAAS,MAAO,GAEf,MAAAH,EAAaR,EAAY,QAAQE,CAAI,EAG3C,GAAI,CAACM,EAAY,MAAO,GAElB,MAAAC,EAAeD,GAAA,YAAAA,EAAaG,GAClC,OAAKF,EAEEA,GAA8B,GAFX,EAEY,CAEzC,EAEKG,EAAoBR,EAAS,IACzBO,GAAoB,CAC1B,MAAMF,EAAeC,EAAY,MAAM,QAASC,CAAO,EAIvD,OAAOF,EAAa,OAAS,EAAIA,EAFZ,CAEqC,EAAI,EAAA,CAEjE,EAEM,MAAA,CACL,SAAAN,EACA,YAAAO,EACA,kBAAAE,CAAA,CAEJ"}